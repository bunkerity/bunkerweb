
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BunkerWeb, the open source and next generation WAF.">
      
      
      
        <link rel="canonical" href="https://docs.bunkerweb.io/latest/fr/features/">
      
      
        <link rel="prev" href="../quickstart-guide/">
      
      
        <link rel="next" href="../advanced/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Fonctionnalités - Documentation BunkerWeb</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
    <script async
            defer
            data-domain="docs.bunkerweb.io"
            src="https://data.bunkerity.com/js/script.js"></script>

    <script defer>
      window.addEventListener('DOMContentLoaded', (e) => {

        const customHeaders = document.querySelectorAll('[data-custom-header]')
        customHeaders.forEach(header => {
          const getHeaders = document.querySelectorAll(`#${header.getAttribute('id')}`);
          getHeaders.forEach(el => {

            if(!el.hasAttribute('data-custom-header')) el.remove()
        })})
      })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script>

    <script defer>
  // Lazy load images and embed youtube videos
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-src]").forEach((el) => {
      el.setAttribute("src", el.getAttribute("data-src"));
    });
  });
  // Add missing label
  try {
    document
      .querySelector('div.md-search[data-md-component="search"][role="dialog"]')
      .setAttribute("aria-label", "Search in documentation");
  } catch (err) {}
    </script>

    <script defer>
      window.addEventListener('DOMContentLoaded', () => {
        const bannerEl = document.querySelector('aside.md-banner');
        let defaultContent = [{ "content" : '<p>Get the most of BunkerWeb by upgrading to the PRO version. Click <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&utm_source=doc">here</a> and use the <strong>freetrial</strong> promo code to get started.</p>'},
        { "content" : '<p>Need premium support or tailored consulting around BunkerWeb ? Check out our <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc#services">professional services</a>.</p>'},
        { "content" : '<p>Be part of the Bunker community by joining the <a style="text-decoration:underline; color: white;" href="https://discord.bunkerweb.io">Discord chat</a> and following us on <a style="text-decoration:underline; color: white;" href="https://www.linkedin.com/company/bunkerity/">LinkedIn</a>.</p>'}
        ]

      function setBannerStyle() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        bannerEl.style.backgroundColor = "#2eac68";
        bannerItem.style.textAlign = "center";
        bannerItem.style.transition = "all 0.5s ease-out";
      }

      function setDefault() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        const clone = bannerItem.cloneNode(true);
        clone.innerHTML = defaultContent[0]["content"];
        bannerEl.replaceChild(clone, bannerItem);
      }

      function startBannerLoop() {
        const switchDelay = 7000;
        let i = 0;

        setInterval(() => {
          // Update or reset index
          if(i + 1 === defaultContent.length) {
            i = 0;
          } else {
            i++;
          }

          // Prepare data with next el with opacity 0 too
          const currItem = bannerEl.querySelector('.md-banner__inner');
          currItem.style.opacity = 0;
          const clone = currItem.cloneNode(true);
          clone.innerHTML = defaultContent[i]["content"];
          setTimeout(() => {
            bannerEl.replaceChild(clone, currItem);
            setTimeout(() => {
              const newItem = bannerEl.querySelector('.md-banner__inner');
              newItem.style.opacity = 1;
            }, 20);
          }, 600);

        }, switchDelay);
      }

      function runBanner() {
        startBannerLoop();
        // Try to get dynamic content
        // Else keep static ones
        // fetch("https://www.bunkerweb.io/api/bw-ui-news")
        // .then((res) => {
        //   return res.json();
        // })
        // .then((res) => {
        //   defaultContent = res.data[0].data;
        //   startBannerLoop();
        // })
        // .catch((e) => {
        //   startBannerLoop();
        // });
      }

        setBannerStyle();
        setDefault();
        runBanner()

      })
    </script>

    
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Fonctionnalités - Documentation BunkerWeb" >
      
        <meta  property="og:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  property="og:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/fr/features.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.bunkerweb.io/latest/fr/features/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Fonctionnalités - Documentation BunkerWeb" >
      
        <meta  name="twitter:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  name="twitter:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/fr/features.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fonctionnalites" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    📢 Looking for BunkerWeb PRO version, technical support or tailored services ? Visit the
    <a href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc"
       style="color: #3f6ec6;
              text-decoration: underline">BunkerWeb Panel</a>
    for more information on our enterprise offers.

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    You're not viewing the
    documentation of the latest version.
    <a href="../../..">
        <strong>Click here to view latest.</strong>
    </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../" title="Documentation BunkerWeb" class="md-header__button md-logo" aria-label="Documentation BunkerWeb" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation BunkerWeb
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fonctionnalités
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../features/" hreflang="en" class="md-select__link">
              English - 🇬🇧
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Français - 🇫🇷
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../de/features/" hreflang="de" class="md-select__link">
              Deutsch - 🇩🇪
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/features/" hreflang="es" class="md-select__link">
              Español - 🇪🇸
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bunkerity/bunkerweb" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        
  
  
    
  
  Concepts

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../integrations/" class="md-tabs__link">
        
  
  
    
  
  Intégrations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-guide/" class="md-tabs__link">
        
  
  
    
  
  Guide de démarrage rapide

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Fonctionnalités

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/" class="md-tabs__link">
        
  
  
    
  
  Utilisations avancées

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../web-ui/" class="md-tabs__link">
        
  
  
    
  
  Interface Web

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../upgrading/" class="md-tabs__link">
        
  
  
    
  
  Mise à niveau

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  Dépannage

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
  
    
  
  Plugins

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../professional-services/" class="md-tabs__link">
        
  
  
    
  
  Services professionnels

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
  
    
  
  À propos

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="Documentation BunkerWeb" class="md-nav__button md-logo" aria-label="Documentation BunkerWeb" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Documentation BunkerWeb
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bunkerity/bunkerweb" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intégrations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guide de démarrage rapide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Fonctionnalités
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Fonctionnalités
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parametres-globaux" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres globaux
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Paramètres globaux">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode-multisite" class="md-nav__link">
    <span class="md-ellipsis">
      Mode multisite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-multiples" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres multiples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modes-de-securite" class="md-nav__link">
    <span class="md-ellipsis">
      Modes de sécurité
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-ddos-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Anti DDoS (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antibot" class="md-nav__link">
    <span class="md-ellipsis">
      Antibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-communs" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres communs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclure-du-trafic-des-defis" class="md-nav__link">
    <span class="md-ellipsis">
      Exclure du trafic des défis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mecanismes-de-defi" class="md-nav__link">
    <span class="md-ellipsis">
      Mécanismes de défi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-basic" class="md-nav__link">
    <span class="md-ellipsis">
      Auth basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_1" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_2" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_1" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-en-ligne-de-commande" class="md-nav__link">
    <span class="md-ellipsis">
      Interface en ligne de commande
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_1" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-s3-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Backup S3 (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bad-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Bad behavior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bad behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_3" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_2" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_2" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blacklist" class="md-nav__link">
    <span class="md-ellipsis">
      Blacklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blacklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_4" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brotli" class="md-nav__link">
    <span class="md-ellipsis">
      Brotli
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Brotli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_5" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_3" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_3" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkernet" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerNet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerNet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_6" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_4" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-crowdsec-console" class="md-nav__link">
    <span class="md-ellipsis">
      Intégration CrowdSec Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_4" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_7" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_5" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_5" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Client cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_8" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_6" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_6" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Country">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_9" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_7" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_7" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crowdsec" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CrowdSec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mise-en-place" class="md-nav__link">
    <span class="md-ellipsis">
      Mise en place
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres de configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Paramètres de configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parametres-du-composant-de-securite-applicative" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres du composant de sécurité applicative
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configurations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-ssl-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Custom SSL certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom SSL certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_10" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_8" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_8" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dnsbl" class="md-nav__link">
    <span class="md-ellipsis">
      DNSBL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNSBL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_11" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_3" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_3" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_12" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_9" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easy-resolve-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Easy Resolve (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#errors" class="md-nav__link">
    <span class="md-ellipsis">
      Errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_13" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_10" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_9" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#greylist" class="md-nav__link">
    <span class="md-ellipsis">
      Greylist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Greylist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_14" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_11" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gzip" class="md-nav__link">
    <span class="md-ellipsis">
      Gzip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gzip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fonctionnement" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_15" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_12" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_10" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#html-injection" class="md-nav__link">
    <span class="md-ellipsis">
      HTML injection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTML injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_16" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_13" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_11" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headers" class="md-nav__link">
    <span class="md-ellipsis">
      Headers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_17" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-de-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Guide de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_4" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Encrypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Let&#39;s Encrypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_18" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_4" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fournisseurs-dns-supportes" class="md-nav__link">
    <span class="md-ellipsis">
      Fournisseurs DNS supportés
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_5" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limit" class="md-nav__link">
    <span class="md-ellipsis">
      Limit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Limit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fonctionnement_1" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_14" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_6" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancer-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Load Balancer (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parametres_15" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_12" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Migration (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fonctionnalites-cles" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnalités clés
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-de-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Guide de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_7" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modsecurity" class="md-nav__link">
    <span class="md-ellipsis">
      ModSecurity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModSecurity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_19" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_5" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#versions-du-crs-disponibles" class="md-nav__link">
    <span class="md-ellipsis">
      Versions du CRS disponibles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurations-personnalisees" class="md-nav__link">
    <span class="md-ellipsis">
      Configurations personnalisées
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configurations personnalisées">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ajout-dexclusions-crs-avec-modsec-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Ajout d'exclusions CRS avec modsec-crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mise-a-jour-des-regles-crs-avec-modsec" class="md-nav__link">
    <span class="md-ellipsis">
      Mise à jour des règles CRS avec modsec
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugins-owasp-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Plugins OWASP CRS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_8" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#php" class="md-nav__link">
    <span class="md-ellipsis">
      PHP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PHP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_20" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_16" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_13" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pro" class="md-nav__link">
    <span class="md-ellipsis">
      Pro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_21" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_17" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      FAQ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prometheus-exporter-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus exporter (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Real IP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real IP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_22" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_18" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_14" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirect" class="md-nav__link">
    <span class="md-ellipsis">
      Redirect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redirect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_23" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_19" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_15" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_24" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_20" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_16" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse proxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_25" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-de-configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Guide de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_9" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse scan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse scan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_26" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_21" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_17" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robotstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Robots.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Robots.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#darkvisitors" class="md-nav__link">
    <span class="md-ellipsis">
      DarkVisitors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_27" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_22" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_18" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssl" class="md-nav__link">
    <span class="md-ellipsis">
      SSL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_28" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_23" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_19" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securitytxt" class="md-nav__link">
    <span class="md-ellipsis">
      Security.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_29" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_24" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_20" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#self-signed-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Self-signed certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Self-signed certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_30" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_25" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_21" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Sessions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sessions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_31" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l’utiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_26" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_22" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-manager-pro" class="md-nav__link">
    <span class="md-ellipsis">
      User Manager (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whitelist" class="md-nav__link">
    <span class="md-ellipsis">
      Whitelist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Whitelist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parametres_27" class="md-nav__link">
    <span class="md-ellipsis">
      Paramètres
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilisations avancées
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interface Web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mise à niveau
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dépannage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../professional-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Services professionnels
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    À propos
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="fonctionnalites">Fonctionnalités</h1>
<p>Cette section contient la liste complète des paramètres pris en charge par BunkerWeb. Si vous n’êtes pas encore familier avec BunkerWeb, commencez par lire la section <a href="../concepts/">concepts</a> de la documentation. Suivez ensuite les instructions de votre <a href="../integrations/">intégration</a> pour appliquer les paramètres.</p>
<h2 id="parametres-globaux">Paramètres globaux</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin General fournit le cadre de configuration de base de BunkerWeb, vous permettant de définir les paramètres essentiels qui régissent la protection et la distribution de vos services web. Ce plugin fondamental gère des aspects clés tels que les modes de sécurité, les valeurs par défaut du serveur, le comportement de journalisation et les paramètres opérationnels critiques pour l’ensemble de l’écosystème BunkerWeb.</p>
<p>Comment ça marche :</p>
<ol>
<li>Au démarrage de BunkerWeb, le plugin General charge et applique vos paramètres de configuration principaux.</li>
<li>Les modes de sécurité sont définis globalement ou par site, déterminant le niveau de protection appliqué.</li>
<li>Les paramètres par défaut du serveur établissent des valeurs de repli pour toute configuration multisite non spécifiée.</li>
<li>Les paramètres de journalisation contrôlent les informations enregistrées et leur format.</li>
<li>Ces paramètres constituent la base sur laquelle s’appuient tous les autres plugins et fonctionnalités de BunkerWeb.</li>
</ol>
<h3 id="mode-multisite">Mode multisite</h3>
<p>Lorsque <code>MULTISITE</code> vaut <code>yes</code>, BunkerWeb peut héberger et protéger plusieurs sites web, chacun avec sa propre configuration. Ce mode est utile notamment pour :</p>
<ul>
<li>Héberger plusieurs domaines aux configurations distinctes</li>
<li>Exécuter plusieurs applications avec des exigences de sécurité différentes</li>
<li>Appliquer des politiques de sécurité adaptées à différents services</li>
</ul>
<p>En mode multisite, chaque site est identifié par un <code>SERVER_NAME</code> unique. Pour appliquer des paramètres spécifiques à un site, préfixez le nom du paramètre par le <code>SERVER_NAME</code> principal. Par exemple :</p>
<ul>
<li><code>www.example.com_USE_ANTIBOT=captcha</code> active le CAPTCHA pour <code>www.example.com</code>.</li>
<li><code>myapp.example.com_USE_GZIP=yes</code> active la compression GZIP pour <code>myapp.example.com</code>.</li>
</ul>
<p>Cette approche garantit que les paramètres sont appliqués au bon site dans un environnement multisite.</p>
<h3 id="parametres-multiples">Paramètres multiples</h3>
<p>Certains paramètres de BunkerWeb supportent plusieurs configurations pour une même fonctionnalité. Pour définir plusieurs groupes de paramètres, ajoutez un suffixe numérique au nom du paramètre. Par exemple :</p>
<ul>
<li><code>REVERSE_PROXY_URL_1=/subdir</code> et <code>REVERSE_PROXY_HOST_1=http://myhost1</code> définissent le premier reverse proxy.</li>
<li><code>REVERSE_PROXY_URL_2=/anotherdir</code> et <code>REVERSE_PROXY_HOST_2=http://myhost2</code> définissent le second reverse proxy.</li>
</ul>
<p>Ce modèle permet de gérer plusieurs configurations pour des fonctionnalités comme les reverse proxies, les ports, ou d’autres paramètres nécessitant des valeurs distinctes selon les cas d’usage.</p>
<h3 id="modes-de-securite">Modes de sécurité</h3>
<p>Le paramètre <code>SECURITY_MODE</code> détermine la façon dont BunkerWeb gère les menaces détectées. Ce mécanisme flexible vous permet de choisir entre la surveillance et le blocage actif des activités suspectes, selon vos besoins :</p>
<ul>
<li><code>detect</code> : Enregistre les menaces potentielles sans les bloquer. Utile pour analyser les faux positifs sans perturber les utilisateurs légitimes.</li>
<li><code>block</code> (par défaut) : Bloque activement les menaces détectées tout en journalisant les incidents pour protéger votre application.</li>
</ul>
<p>Passer en mode <code>detect</code> aide à identifier et corriger les faux positifs sans impacter les clients légitimes. Une fois ces problèmes résolus, repassez en mode <code>block</code> pour une protection complète.</p>
<h3 id="parametres-de-configuration">Paramètres de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:9"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Paramètres principaux</label><label for="__tabbed_1_2">Paramètres API</label><label for="__tabbed_1_3">Paramètres réseau et ports</label><label for="__tabbed_1_4">Paramètres serveur Stream</label><label for="__tabbed_1_5">Paramètres des workers</label><label for="__tabbed_1_6">Paramètres mémoire</label><label for="__tabbed_1_7">Paramètres de journalisation</label><label for="__tabbed_1_8">Paramètres d’intégration</label><label for="__tabbed_1_9">Paramètres Nginx</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVER_NAME</code></td>
<td><code>www.example.com</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Domaine principal :</strong> Nom de domaine principal pour ce site. Requis en mode multisite.</td>
</tr>
<tr>
<td><code>BUNKERWEB_INSTANCES</code></td>
<td><code>127.0.0.1</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Instances BunkerWeb :</strong> Liste des instances BunkerWeb séparées par des espaces.</td>
</tr>
<tr>
<td><code>MULTISITE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Sites multiples :</strong> Définir à <code>yes</code> pour héberger plusieurs sites avec des configurations différentes.</td>
</tr>
<tr>
<td><code>SECURITY_MODE</code></td>
<td><code>block</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Niveau de sécurité :</strong> <code>detect</code> ou <code>block</code> pour contrôler l’application de la sécurité.</td>
</tr>
<tr>
<td><code>SERVER_TYPE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Type de serveur :</strong> Définit si le serveur est de type <code>http</code> ou <code>stream</code>.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_API</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Activer l’API :</strong> Active l’API pour piloter BunkerWeb.</td>
</tr>
<tr>
<td><code>API_HTTP_PORT</code></td>
<td><code>5000</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Port de l’API :</strong> Numéro de port d’écoute de l’API.</td>
</tr>
<tr>
<td><code>API_HTTPS_PORT</code></td>
<td><code>6000</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Port HTTPS de l’API :</strong> Numéro de port d’écoute (TLS) de l’API.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Écoute HTTP de l’API :</strong> Active l’écoute HTTP pour l’API.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTPS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Écoute HTTPS de l’API :</strong> Active l’écoute HTTPS (TLS) pour l’API.</td>
</tr>
<tr>
<td><code>API_LISTEN_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>Non</td>
<td><strong>IP d’écoute de l’API :</strong> Adresse IP d’écoute de l’API.</td>
</tr>
<tr>
<td><code>API_SERVER_NAME</code></td>
<td><code>bwapi</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Nom de serveur de l’API :</strong> Nom de serveur (vhost) pour l’API.</td>
</tr>
<tr>
<td><code>API_WHITELIST_IP</code></td>
<td><code>127.0.0.0/8</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Liste blanche API :</strong> Liste IP/réseaux autorisés à contacter l’API.</td>
</tr>
<tr>
<td><code>API_TOKEN</code></td>
<td></td>
<td>global</td>
<td>Non</td>
<td><strong>Jeton d’accès API (optionnel) :</strong> Si défini, chaque requête API doit inclure <code>Authorization: Bearer &lt;token&gt;</code>.</td>
</tr>
</tbody>
</table>
<p>Remarque : pour des raisons d’amorçage, si vous activez <code>API_TOKEN</code>, vous devez le définir dans l’environnement à la fois de l’instance BunkerWeb et du Scheduler. Le Scheduler ajoute automatiquement l’en-tête <code>Authorization</code> quand <code>API_TOKEN</code> est présent dans son environnement. S’il n’est pas défini, aucun en-tête n’est envoyé et BunkerWeb n’applique pas l’authentification par jeton. Vous pouvez exposer l’API en HTTPS en définissant <code>API_LISTEN_HTTPS=yes</code> (port : <code>API_HTTPS_PORT</code>, <code>6000</code> par défaut).</p>
<p>Exemple de test avec curl (remplacez le jeton et l’hôte) :</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://&lt;bunkerweb-host&gt;:5000/ping

curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--insecure<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>https://&lt;bunkerweb-host&gt;:6000/ping
</code></pre></div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HTTP_PORT</code></td>
<td><code>8080</code></td>
<td>global</td>
<td>Oui</td>
<td><strong>Port HTTP :</strong> Numéro de port pour le trafic HTTP.</td>
</tr>
<tr>
<td><code>HTTPS_PORT</code></td>
<td><code>8443</code></td>
<td>global</td>
<td>Oui</td>
<td><strong>Port HTTPS :</strong> Numéro de port pour le trafic HTTPS.</td>
</tr>
<tr>
<td><code>USE_IPV6</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Support IPv6 :</strong> Active la connectivité IPv6.</td>
</tr>
<tr>
<td><code>DNS_RESOLVERS</code></td>
<td><code>127.0.0.11</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Résolveurs DNS :</strong> Adresses des résolveurs à utiliser.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_STREAM</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Écoute stream :</strong> Active l’écoute non-ssl (pass-through).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT</code></td>
<td><code>1337</code></td>
<td>multisite</td>
<td>Oui</td>
<td><strong>Port stream :</strong> Port d’écoute pour le non-ssl (pass-through).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT_SSL</code></td>
<td><code>4242</code></td>
<td>multisite</td>
<td>Oui</td>
<td><strong>Port stream SSL :</strong> Port d’écoute pour le SSL (pass-through).</td>
</tr>
<tr>
<td><code>USE_TCP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Écoute TCP :</strong> Active l’écoute TCP (stream).</td>
</tr>
<tr>
<td><code>USE_UDP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Écoute UDP :</strong> Active l’écoute UDP (stream).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKER_PROCESSES</code></td>
<td><code>auto</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Processus workers :</strong> Nombre de processus workers. <code>auto</code> utilise le nombre de cœurs.</td>
</tr>
<tr>
<td><code>WORKER_CONNECTIONS</code></td>
<td><code>1024</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Connexions par worker :</strong> Nombre maximal de connexions par worker.</td>
</tr>
<tr>
<td><code>WORKER_RLIMIT_NOFILE</code></td>
<td><code>2048</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Limite descripteurs :</strong> Nombre maximal de fichiers ouverts par worker.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKERLOCK_MEMORY_SIZE</code></td>
<td><code>48k</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mémoire workerlock :</strong> Taille de lua_shared_dict pour l’initialisation des workers.</td>
</tr>
<tr>
<td><code>DATASTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mémoire datastore :</strong> Taille du datastore interne.</td>
</tr>
<tr>
<td><code>CACHESTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mémoire cachestore :</strong> Taille du cache interne.</td>
</tr>
<tr>
<td><code>CACHESTORE_IPC_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mémoire cachestore IPC :</strong> Taille du cache interne (IPC).</td>
</tr>
<tr>
<td><code>CACHESTORE_MISS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mémoire cachestore miss :</strong> Taille du cache interne (miss).</td>
</tr>
<tr>
<td><code>CACHESTORE_LOCKS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mémoire cachestore locks :</strong> Taille du cache interne (locks).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOG_FORMAT</code></td>
<td><code>$host $remote_addr - $request_id $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\"</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Format des logs :</strong> Format utilisé pour les logs d’accès.</td>
</tr>
<tr>
<td><code>LOG_LEVEL</code></td>
<td><code>notice</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Niveau de logs :</strong> Verbosité des logs d’erreur. Options : <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
<tr>
<td><code>TIMERS_LOG_LEVEL</code></td>
<td><code>debug</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Niveau des timers :</strong> Niveau de log pour les timers. Options : <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>err</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques de journalisation</p>
<ul>
<li>En production, utilisez les niveaux <code>notice</code>, <code>warn</code> ou <code>error</code> pour limiter le volume de logs.</li>
<li>Pour le dépannage, passez temporairement le niveau à <code>debug</code> pour obtenir plus de détails.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTOCONF_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mode Autoconf :</strong> Active l’intégration Docker Autoconf.</td>
</tr>
<tr>
<td><code>SWARM_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mode Swarm :</strong> Active l’intégration Docker Swarm.</td>
</tr>
<tr>
<td><code>KUBERNETES_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mode Kubernetes :</strong> Active l’intégration Kubernetes.</td>
</tr>
<tr>
<td><code>USE_TEMPLATE</code></td>
<td></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Utiliser un template :</strong> Modèle de configuration qui surcharge les valeurs par défaut de certains paramètres.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NGINX_PREFIX</code></td>
<td><code>/etc/nginx/</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Préfixe Nginx :</strong> Répertoire où NGINX va chercher les configurations.</td>
</tr>
<tr>
<td><code>SERVER_NAMES_HASH_BUCKET_SIZE</code></td>
<td></td>
<td>global</td>
<td>Non</td>
<td><strong>Taille du hash :</strong> Valeur pour la directive server_names_hash_bucket_size.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h3 id="exemples-de-configuration">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Configuration de base (production)</label><label for="__tabbed_2_2">Mode développement</label><label for="__tabbed_2_3">Configuration multisite</label><label for="__tabbed_2_4">Configuration serveur Stream</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuration standard pour un site de production avec une sécurité stricte :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notice&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour un environnement de développement avec journalisation détaillée :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dev.example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;debug&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour héberger plusieurs sites :</p>
<div class="highlight"><pre><span></span><code><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Premier site</span>
<span class="nt">site1.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site1.example.com&quot;</span>
<span class="nt">site1.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>

<span class="c1"># Second site</span>
<span class="nt">site2.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site2.example.com&quot;</span>
<span class="nt">site2.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour un serveur TCP/UDP :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream.example.com&quot;</span>
<span class="nt">LISTEN_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LISTEN_STREAM_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1337&quot;</span>
<span class="nt">USE_TCP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_UDP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="anti-ddos-pro">Anti DDoS <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides enhanced protection against DDoS attacks by analyzing and filtering suspicious traffic.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIDDOS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable or disable anti DDoS protection to mitigate high traffic spikes.</td>
</tr>
<tr>
<td><code>ANTIDDOS_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>non</td>
<td>Size of in-memory storage for DDoS metrics (e.g., 10M, 500k).</td>
</tr>
<tr>
<td><code>ANTIDDOS_THRESHOLD</code></td>
<td><code>100</code></td>
<td>global</td>
<td>non</td>
<td>Maximum suspicious requests allowed from a single IP before blocking.</td>
</tr>
<tr>
<td><code>ANTIDDOS_WINDOW_TIME</code></td>
<td><code>10</code></td>
<td>global</td>
<td>non</td>
<td>Time window (seconds) to detect abnormal request patterns.</td>
</tr>
<tr>
<td><code>ANTIDDOS_STATUS_CODES</code></td>
<td><code>429 403 444</code></td>
<td>global</td>
<td>non</td>
<td>HTTP status codes treated as suspicious for DDoS analysis.</td>
</tr>
<tr>
<td><code>ANTIDDOS_DISTINCT_IP</code></td>
<td><code>5</code></td>
<td>global</td>
<td>non</td>
<td>Minimum distinct IP count before enabling anti DDoS measures.</td>
</tr>
</tbody>
</table>
<h2 id="antibot">Antibot</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Les attaquants utilisent souvent des outils automatisés (bots) pour tenter d’exploiter votre site. Pour s’en protéger, BunkerWeb inclut une fonctionnalité « Antibot » qui demande aux utilisateurs de prouver qu’ils sont humains. Si un utilisateur réussit le défi, il obtient l’accès à votre site. Cette fonctionnalité est désactivée par défaut.</p>
<p>Comment ça marche :</p>
<ol>
<li>Lorsqu’un utilisateur visite votre site, BunkerWeb vérifie s’il a déjà réussi un défi antibot.</li>
<li>Sinon, l’utilisateur est redirigé vers une page de défi.</li>
<li>L’utilisateur doit compléter le défi (ex. résoudre un CAPTCHA, exécuter du JavaScript).</li>
<li>Si le défi est réussi, l’utilisateur est redirigé vers la page initialement demandée et peut naviguer normalement.</li>
</ol>
<h3 id="comment-lutiliser">Comment l’utiliser</h3>
<p>Suivez ces étapes pour activer et configurer Antibot :</p>
<ol>
<li>Choisir un type de défi : décidez du mécanisme à utiliser (ex. <a href="#__tabbed_3_3">captcha</a>, <a href="#__tabbed_3_5">hcaptcha</a>, <a href="#__tabbed_3_2">javascript</a>).</li>
<li>Activer la fonctionnalité : définissez le paramètre <code>USE_ANTIBOT</code> sur le type choisi dans votre configuration BunkerWeb.</li>
<li>Configurer les paramètres : ajustez les autres paramètres <code>ANTIBOT_*</code> si nécessaire. Pour reCAPTCHA, hCaptcha, Turnstile et mCaptcha, créez un compte auprès du service choisi et obtenez des clés API.</li>
<li>Important : assurez‑vous que <code>ANTIBOT_URI</code> est une URL unique de votre site et qu’elle n’est pas utilisée ailleurs.</li>
</ol>
<div class="admonition important">
<p class="admonition-title">À propos du paramètre <code>ANTIBOT_URI</code></p>
</div>
<p>Assurez‑vous que <code>ANTIBOT_URI</code> est une URL unique de votre site et qu’elle n’est pas utilisée ailleurs.</p>
<div class="admonition warning">
<p class="admonition-title">Sessions en environnement cluster</p>
</div>
<p>La fonction antibot utilise des cookies pour suivre si un utilisateur a complété le défi. Si vous exécutez BunkerWeb en cluster (plusieurs instances), vous devez configurer correctement la gestion des sessions : définissez <code>SESSIONS_SECRET</code> et <code>SESSIONS_NAME</code> avec les mêmes valeurs sur toutes les instances BunkerWeb. Sinon, les utilisateurs pourront être invités à répéter le défi. Plus d’informations sur la configuration des sessions <a href="#sessions">ici</a>.</p>
<h3 id="parametres-communs">Paramètres communs</h3>
<p>Les paramètres suivants sont partagés par tous les mécanismes de défi :</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_URI</code></td>
<td><code>/challenge</code></td>
<td>multisite</td>
<td>non</td>
<td>URL du défi : l’URL vers laquelle les utilisateurs sont redirigés pour compléter le défi. Veillez à ce que cette URL ne soit pas utilisée pour autre chose.</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_RESOLVE</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>non</td>
<td>Délai du défi : temps maximum (en secondes) pour compléter le défi. Au‑delà, un nouveau défi est généré.</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_VALID</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>non</td>
<td>Validité du défi : durée (en secondes) pendant laquelle un défi réussi reste valide. Passé ce délai, un nouveau défi sera requis.</td>
</tr>
</tbody>
</table>
<h3 id="exclure-du-trafic-des-defis">Exclure du trafic des défis</h3>
<p>BunkerWeb permet d’indiquer certains utilisateurs, IP ou requêtes qui doivent contourner totalement le défi antibot. Utile pour des services de confiance, réseaux internes ou des pages à laisser toujours accessibles :</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URL exclues : liste d’expressions régulières d’URI séparées par des espaces qui doivent contourner le défi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IP exclues : liste d’adresses IP ou de plages CIDR séparées par des espaces qui doivent contourner le défi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>rDNS exclu : liste de suffixes de DNS inversés séparés par des espaces qui doivent contourner le défi.</td>
</tr>
<tr>
<td><code>ANTIBOT_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>IP publiques uniquement : si <code>yes</code>, ne faire des vérifications rDNS que sur des IP publiques.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>ASN exclus : liste de numéros d’ASN séparés par des espaces qui doivent contourner le défi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>User‑Agents exclus : liste de motifs regex d’User‑Agent séparés par des espaces qui doivent contourner le défi.</td>
</tr>
</tbody>
</table>
<p>Exemples :</p>
<ul>
<li>
<p><code>ANTIBOT_IGNORE_URI: "^/api/ ^/webhook/ ^/assets/"</code>
  Exclut toutes les URI commençant par <code>/api/</code>, <code>/webhook/</code> ou <code>/assets/</code>.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_IP: "192.168.1.0/24 10.0.0.1"</code>
  Exclut le réseau interne <code>192.168.1.0/24</code> et l’IP spécifique <code>10.0.0.1</code>.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_RDNS: ".googlebot.com .bingbot.com"</code>
  Exclut les requêtes provenant d’hôtes dont le DNS inversé se termine par <code>googlebot.com</code> ou <code>bingbot.com</code>.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_ASN: "15169 8075"</code>
  Exclut les requêtes des ASN 15169 (Google) et 8075 (Microsoft).</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_USER_AGENT: "^Mozilla.+Chrome.+Safari"</code>
  Exclut les requêtes dont le User-Agent correspond au motif regex spécifié.</p>
</li>
</ul>
<h3 id="mecanismes-de-defi">Mécanismes de défi</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:7"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><input id="__tabbed_3_7" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Cookie</label><label for="__tabbed_3_2">JavaScript</label><label for="__tabbed_3_3">Captcha</label><label for="__tabbed_3_4">reCAPTCHA</label><label for="__tabbed_3_5">hCaptcha</label><label for="__tabbed_3_6">Turnstile</label><label for="__tabbed_3_7">mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Le défi Cookie est un mécanisme léger qui repose sur l’installation d’un cookie dans le navigateur de l’utilisateur. Lorsqu’un utilisateur accède au site, le serveur envoie un cookie au client. Lors des requêtes suivantes, le serveur vérifie la présence de ce cookie pour confirmer que l’utilisateur est légitime. Cette méthode est simple et efficace pour une protection de base contre les bots sans nécessiter d’interaction supplémentaire de l’utilisateur.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Le serveur génère un cookie unique et l’envoie au client.</li>
<li>Le client doit renvoyer le cookie dans les requêtes suivantes.</li>
<li>Si le cookie est manquant ou invalide, l’utilisateur est redirigé vers la page de défi.</li>
</ol>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot : définir sur <code>cookie</code> pour activer ce mécanisme.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Le défi JavaScript demande au client de résoudre une tâche de calcul en utilisant JavaScript. Ce mécanisme garantit que le client a activé JavaScript et peut exécuter le code requis, ce qui est généralement hors de portée de la plupart des bots.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Le serveur envoie un script JavaScript au client.</li>
<li>Le script effectue une tâche de calcul (par exemple, un hachage) et soumet le résultat au serveur.</li>
<li>Le serveur vérifie le résultat pour confirmer la légitimité du client.</li>
</ol>
<p><strong>Fonctionnalités clés :</strong></p>
<ul>
<li>Le défi génère dynamiquement une tâche unique pour chaque client.</li>
<li>La tâche de calcul implique un hachage avec des conditions spécifiques (par exemple, trouver un hachage avec un certain préfixe).</li>
</ul>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot : définir sur <code>javascript</code> pour activer ce mécanisme.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Le défi Captcha est un mécanisme maison qui génère des défis basés sur des images, entièrement hébergés dans votre environnement BunkerWeb. Il teste la capacité des utilisateurs à reconnaître et interpréter des caractères aléatoires, garantissant que les bots automatisés sont bloqués efficacement sans dépendre de services externes.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Le serveur génère une image CAPTCHA contenant des caractères aléatoires.</li>
<li>L’utilisateur doit saisir les caractères affichés dans l’image dans un champ de texte.</li>
<li>Le serveur valide la saisie de l’utilisateur par rapport au CAPTCHA généré.</li>
</ol>
<p><strong>Fonctionnalités clés :</strong></p>
<ul>
<li>Entièrement auto-hébergé, éliminant le besoin d’API tierces.</li>
<li>Les défis générés dynamiquement assurent l’unicité pour chaque session utilisateur.</li>
<li>Utilise un jeu de caractères personnalisable pour la génération du CAPTCHA.</li>
</ul>
<p><strong>Caractères pris en charge :</strong></p>
<p>Le système CAPTCHA prend en charge les types de caractères suivants :</p>
<ul>
<li><strong>Lettres :</strong> Toutes les lettres minuscules (a-z) et majuscules (A-Z)</li>
<li><strong>Chiffres :</strong> 2, 3, 4, 5, 6, 7, 8, 9 (exclut 0 et 1 pour éviter toute confusion)</li>
<li><strong>Caractères spéciaux :</strong> <code>+-/=%"'&amp;_(),.;:?!§`^ÄÖÜßäöüé''‚""„</code></li>
</ul>
<p>Pour obtenir la liste complète des caractères pris en charge, consultez la <a href="https://www.dafont.com/moms-typewriter.charmap?back=theme">table des caractères de la police</a> utilisée pour le CAPTCHA.</p>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer Antibot :</strong> définir sur <code>captcha</code> pour activer ce mécanisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_CAPTCHA_ALPHABET</code></td>
<td><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Alphabet du Captcha :</strong> une chaîne de caractères à utiliser pour générer le CAPTCHA. Caractères pris en charge : toutes les lettres (a-z, A-Z), les chiffres 2-9 (exclut 0 et 1), et les caractères spéciaux : <code>+-/=%"'&amp;_(),.;:?!§`^ÄÖÜßäöüé''‚""„</code></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>reCAPTCHA de Google propose une validation des utilisateurs qui s’exécute en arrière‑plan (v3) pour attribuer un score basé sur le comportement. Un score inférieur au seuil configuré déclenchera une vérification supplémentaire ou bloquera la requête. Pour les défis visibles (v2), les utilisateurs doivent interagir avec le widget reCAPTCHA avant de continuer.</p>
<p>Il existe désormais deux manières d’intégrer reCAPTCHA :
- La version classique (clés site/secret, point de terminaison de vérification v2/v3)
- La nouvelle version utilisant Google Cloud (ID de projet + clé API). La version classique reste disponible et peut être activée avec <code>ANTIBOT_RECAPTCHA_CLASSIC</code>.</p>
<p>Pour la version classique, obtenez vos clés de site et secrète depuis la <a href="https://www.google.com/recaptcha/admin">console d’administration de Google reCAPTCHA</a>.
Pour la nouvelle version, créez une clé reCAPTCHA dans votre projet Google Cloud et utilisez l’ID du projet ainsi qu’une clé API (voir la <a href="https://console.cloud.google.com/security/recaptcha">console reCAPTCHA de Google Cloud</a>). Une clé de site est toujours requise.</p>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot : définir sur <code>recaptcha</code> pour activer ce mécanisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_CLASSIC</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Utiliser reCAPTCHA classique. Mettre à <code>no</code> pour utiliser la nouvelle version basée sur Google Cloud.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé de site reCAPTCHA. Requise pour les deux versions.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé secrète reCAPTCHA. Requise pour la version classique uniquement.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_PROJECT_ID</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>ID de projet Google Cloud. Requis pour la nouvelle version uniquement.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_API_KEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé API Google Cloud utilisée pour appeler l’API reCAPTCHA Enterprise. Requise pour la nouvelle version uniquement.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA3</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Empreinte TLS JA3 optionnelle à inclure dans les évaluations Enterprise.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA4</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Empreinte TLS JA4 optionnelle à inclure dans les évaluations Enterprise.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SCORE</code></td>
<td><code>0.7</code></td>
<td>multisite</td>
<td>non</td>
<td>Score minimum requis pour passer (s’applique à la v3 classique et à la nouvelle version).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Lorsqu’il est activé, hCaptcha offre une alternative efficace à reCAPTCHA en vérifiant les interactions des utilisateurs sans reposer sur un mécanisme de score. Il met les utilisateurs au défi avec un test simple et interactif pour confirmer leur légitimité.</p>
<p>Pour intégrer hCaptcha avec BunkerWeb, vous devez obtenir les informations d’identification nécessaires depuis le tableau de bord hCaptcha sur <a href="https://www.hcaptcha.com">hCaptcha</a>. Ces informations incluent une clé de site et une clé secrète.</p>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot : définir sur <code>hcaptcha</code> pour activer ce mécanisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé site hCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé secrète hCaptcha.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Turnstile est un mécanisme de défi moderne et respectueux de la vie privée qui s’appuie sur la technologie de Cloudflare pour détecter et bloquer le trafic automatisé. Il valide les interactions des utilisateurs de manière transparente et en arrière-plan, réduisant les frictions pour les utilisateurs légitimes tout en décourageant efficacement les bots.</p>
<p>Pour intégrer Turnstile avec BunkerWeb, assurez-vous d’obtenir les informations d’identification nécessaires depuis <a href="https://www.cloudflare.com/turnstile">Cloudflare Turnstile</a>.</p>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot : définir sur <code>turnstile</code> pour activer ce mécanisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé site Turnstile (Cloudflare).</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé secrète Turnstile (Cloudflare).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>mCaptcha est un mécanisme de défi CAPTCHA alternatif qui vérifie la légitimité des utilisateurs en présentant un test interactif similaire à d’autres solutions antibot. Lorsqu’il est activé, il met les utilisateurs au défi avec un CAPTCHA fourni par mCaptcha, s’assurant que seuls les utilisateurs authentiques contournent les contrôles de sécurité automatisés.</p>
<p>mCaptcha est conçu dans le respect de la vie privée. Il est entièrement conforme au RGPD, garantissant que toutes les données des utilisateurs impliquées dans le processus de défi respectent des normes strictes de protection des données. De plus, mCaptcha offre la flexibilité d’être auto-hébergé, permettant aux organisations de garder un contrôle total sur leurs données et leur infrastructure. Cette capacité d’auto-hébergement améliore non seulement la confidentialité, mais optimise également les performances et la personnalisation pour répondre aux besoins spécifiques de déploiement.</p>
<p>Pour intégrer mCaptcha avec BunkerWeb, vous devez obtenir les informations d’identification nécessaires depuis la plateforme <a href="https://mcaptcha.org/">mCaptcha</a> ou votre propre fournisseur. Ces informations incluent une clé de site et une clé secrète pour la vérification.</p>
<p><strong>Paramètres :</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot : définir sur <code>mcaptcha</code> pour activer ce mécanisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé site mCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Clé secrète mCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_URL</code></td>
<td><code>https://demo.mcaptcha.org</code></td>
<td>multisite</td>
<td>non</td>
<td>Domaine à utiliser pour mCaptcha.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Reportez‑vous aux Paramètres communs pour les options supplémentaires.</p>
<h3 id="exemples-de-configuration_1">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Défi Cookie</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cookie&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Défi JavaScript</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;javascript&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Défi Captcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;captcha&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">ANTIBOT_CAPTCHA_ALPHABET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;23456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
</code></pre></div>
<p>Remarque : l’exemple ci‑dessus utilise les chiffres 2‑9 et toutes les lettres, fréquemment utilisés pour les CAPTCHA. Vous pouvez personnaliser l’alphabet pour inclure des caractères spéciaux si nécessaire.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:3"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Défi reCAPTCHA Classique</label><label for="__tabbed_7_2">Défi reCAPTCHA (nouveau)</label><label for="__tabbed_7_3">Défi hCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Exemple de configuration pour le reCAPTCHA classique (clés site/secret) :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple de configuration pour le nouveau reCAPTCHA basé sur Google Cloud (ID de projet + clé API) :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_PROJECT_ID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-project-id&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-api-key&quot;</span>
<span class="c1"># Empreintes optionnelles pour améliorer les évaluations Enterprise</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA3: &quot;&lt;empreinte-ja3&gt;&quot;</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA4: &quot;&lt;empreinte-ja4&gt;&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hcaptcha&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Défi Turnstile</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turnstile&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Défi mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mcaptcha&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://demo.mcaptcha.org&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<h2 id="auth-basic">Auth basic</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Auth Basic fournit une authentification HTTP Basic pour protéger votre site ou certaines ressources. Les utilisateurs doivent saisir un identifiant et un mot de passe avant d’accéder au contenu protégé. Simple à mettre en place et largement supporté par les navigateurs.</p>
<p>Comment ça marche :</p>
<ol>
<li>Sur une zone protégée, le serveur envoie un défi d’authentification.</li>
<li>Le navigateur affiche une boîte de connexion.</li>
<li>L’utilisateur saisit ses identifiants, envoyés au serveur.</li>
<li>Valides ? Accès accordé. Invalides ? Réponse 401 Unauthorized.</li>
</ol>
<h3 id="comment-lutiliser_1">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_AUTH_BASIC: yes</code>.</li>
<li>Portée : <code>AUTH_BASIC_LOCATION</code> = <code>sitewide</code> (tout le site) ou un chemin (ex. <code>/admin</code>).</li>
<li>Identifiants : configurez <code>AUTH_BASIC_USER</code> et <code>AUTH_BASIC_PASSWORD</code> (plusieurs paires possibles).</li>
<li>Message : optionnel, ajustez <code>AUTH_BASIC_TEXT</code>.</li>
</ol>
<h3 id="parametres">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_AUTH_BASIC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer l’authentification Basic.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_LOCATION</code></td>
<td><code>sitewide</code></td>
<td>multisite</td>
<td>non</td>
<td>Portée : <code>sitewide</code> ou un chemin (ex. <code>/admin</code>).</td>
</tr>
<tr>
<td><code>AUTH_BASIC_USER</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>oui</td>
<td>Nom d’utilisateur. Plusieurs paires peuvent être définies.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_PASSWORD</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>oui</td>
<td>Mot de passe correspondant à chaque utilisateur.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_TEXT</code></td>
<td><code>Restricted area</code></td>
<td>multisite</td>
<td>non</td>
<td>Message affiché dans l’invite d’authentification.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sécurité</p>
</div>
<p>Les identifiants sont encodés Base64, pas chiffrés. Utilisez toujours HTTPS avec l’authentification Basic.</p>
<div class="admonition tip">
<p class="admonition-title">Plusieurs comptes</p>
</div>
<p>Définissez des paires <code>AUTH_BASIC_USER[_n]</code>/<code>AUTH_BASIC_PASSWORD[_n]</code> pour gérer plusieurs utilisateurs.</p>
<h3 id="exemples">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Tout le site</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Zone spécifique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Utilisateurs multiples</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Staff</span><span class="nv"> </span><span class="s">Area&quot;</span>

<span class="c1"># Premier utilisateur</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin_password&quot;</span>

<span class="c1"># Deuxième utilisateur</span>
<span class="nt">AUTH_BASIC_USER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor_password&quot;</span>

<span class="c1"># Troisième utilisateur</span>
<span class="nt">AUTH_BASIC_USER_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer_password&quot;</span>
</code></pre></div>
<h2 id="backup">Backup</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Backup fournit des sauvegardes automatisées pour protéger vos données BunkerWeb. Il crée des sauvegardes régulières selon une planification définie, stockées dans un emplacement dédié, avec rotation automatique et commandes CLI pour gérer manuellement.</p>
<p>Comment ça marche :</p>
<ol>
<li>La base est sauvegardée automatiquement selon la fréquence (quotidienne, hebdomadaire, mensuelle).</li>
<li>Les sauvegardes sont stockées dans un répertoire dédié.</li>
<li>Les anciennes sauvegardes sont supprimées selon la politique de rétention.</li>
<li>Vous pouvez créer, lister et restaurer manuellement des sauvegardes.</li>
<li>Avant toute restauration, un snapshot de l’état courant est créé automatiquement.</li>
</ol>
<h3 id="comment-lutiliser_2">Comment l’utiliser</h3>
<ol>
<li>Activation : <code>USE_BACKUP</code> (activé par défaut).</li>
<li>Planification : <code>BACKUP_SCHEDULE</code>.</li>
<li>Rétention : <code>BACKUP_ROTATION</code>.</li>
<li>Emplacement : <code>BACKUP_DIRECTORY</code>.</li>
<li>CLI : utilisez <code>bwcli plugin backup</code>.</li>
</ol>
<h3 id="parametres_1">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Activer les sauvegardes automatiques.</td>
</tr>
<tr>
<td><code>BACKUP_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>non</td>
<td>Fréquence : <code>daily</code>, <code>weekly</code>, <code>monthly</code>.</td>
</tr>
<tr>
<td><code>BACKUP_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>non</td>
<td>Rétention : nombre de fichiers à conserver. Au‑delà, suppression automatique.</td>
</tr>
<tr>
<td><code>BACKUP_DIRECTORY</code></td>
<td><code>/var/lib/bunkerweb/backups</code></td>
<td>global</td>
<td>non</td>
<td>Répertoire de stockage des sauvegardes.</td>
</tr>
</tbody>
</table>
<h3 id="interface-en-ligne-de-commande">Interface en ligne de commande</h3>
<div class="highlight"><pre><span></span><code>bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>list<span class="w">        </span><span class="c1"># Lister</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w">        </span><span class="c1"># Sauvegarde manuelle</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w"> </span>--directory<span class="w"> </span>/chemin/perso<span class="w">   </span><span class="c1"># Emplacement personnalisé</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w">     </span><span class="c1"># Restaurer la plus récente</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w"> </span>/chemin/backup-sqlite-YYYY-MM-DD_HH-MM-SS.zip<span class="w">   </span><span class="c1"># Restaurer via fichier</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Sécurité</p>
</div>
<p>Avant toute restauration, un backup de l’état courant est créé automatiquement dans un emplacement temporaire.</p>
<div class="admonition warning">
<p class="admonition-title">Compatibilité bases</p>
</div>
<p>Supporte SQLite, MySQL/MariaDB, PostgreSQL. Oracle non pris en charge pour sauvegarde/restauration.</p>
<h3 id="exemples_1">Exemples</h3>
<p>=== "Quotidien, rétention 7 jours" (défaut)</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Hebdomadaire, rétention étendue</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;weekly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Mensuel, emplacement personnalisé</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/backup-drive/bunkerweb-backups&quot;</span>
</code></pre></div>
<h2 id="backup-s3-pro">Backup S3 <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Automatically backup your data to an S3 bucket</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP_S3</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable or disable the S3 backup feature</td>
</tr>
<tr>
<td><code>BACKUP_S3_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>non</td>
<td>The frequency of the backup</td>
</tr>
<tr>
<td><code>BACKUP_S3_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>non</td>
<td>The number of backups to keep</td>
</tr>
<tr>
<td><code>BACKUP_S3_ENDPOINT</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 endpoint</td>
</tr>
<tr>
<td><code>BACKUP_S3_BUCKET</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 bucket</td>
</tr>
<tr>
<td><code>BACKUP_S3_DIR</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 directory</td>
</tr>
<tr>
<td><code>BACKUP_S3_REGION</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 region</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_ID</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 access key ID</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_SECRET</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 access key secret</td>
</tr>
<tr>
<td><code>BACKUP_S3_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>global</td>
<td>non</td>
<td>The compression level of the backup zip file</td>
</tr>
</tbody>
</table>
<h2 id="bad-behavior">Bad behavior</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Bad Behavior protège votre site en détectant et bannissant automatiquement les IP qui génèrent trop d’erreurs (codes HTTP « mauvais ») sur une période donnée. Utile contre la force brute, les scrapers, scanners et activités malveillantes.</p>
<p>Les attaquants déclenchent fréquemment des codes « suspects » lors de sondes ou d’exploitation — bien plus qu’un utilisateur normal sur une même période. En détectant ce comportement, BunkerWeb bannit l’IP fautive.</p>
<p>Comment ça marche :</p>
<ol>
<li>Le plugin surveille les réponses HTTP.</li>
<li>À chaque code « mauvais » (400, 401, 403, 404, …), le compteur de l’IP augmente.</li>
<li>Au‑delà du seuil et dans la fenêtre configurée, l’IP est bannie.</li>
<li>Le bannissement peut être au niveau service (site) ou global (tous les sites).</li>
<li>Les bans expirent après la durée configurée (ou sont permanents avec <code>0</code>).</li>
</ol>
<h3 id="comment-lutiliser_3">Comment l’utiliser</h3>
<ol>
<li>Activation : <code>USE_BAD_BEHAVIOR</code> (activé par défaut).</li>
<li>Codes à compter : <code>BAD_BEHAVIOR_STATUS_CODES</code>.</li>
<li>Seuil : <code>BAD_BEHAVIOR_THRESHOLD</code>.</li>
<li>Fenêtre et durée de ban : <code>BAD_BEHAVIOR_COUNT_TIME</code>, <code>BAD_BEHAVIOR_BAN_TIME</code>.</li>
<li>Portée : <code>BAD_BEHAVIOR_BAN_SCOPE</code> (<code>service</code> ou <code>global</code>).</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Mode stream</p>
</div>
<p>En mode stream, seul <code>444</code> est considéré comme « mauvais ».</p>
<h3 id="parametres_2">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BAD_BEHAVIOR</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la détection et le bannissement.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_STATUS_CODES</code></td>
<td><code>400 401 403 404 405 429 444</code></td>
<td>multisite</td>
<td>non</td>
<td>Codes HTTP considérés « mauvais ».</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_THRESHOLD</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>non</td>
<td>Seuil de réponses « mauvaises » avant bannissement.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_COUNT_TIME</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>non</td>
<td>Fenêtre de comptage (secondes).</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_TIME</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>non</td>
<td>Durée du ban en secondes (<code>0</code> = permanent).</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_SCOPE</code></td>
<td><code>service</code></td>
<td>global</td>
<td>non</td>
<td>Portée du ban : site courant (<code>service</code>) ou global (<code>global</code>).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Faux positifs</p>
</div>
<p>Un seuil/fenêtre trop bas peut bannir des utilisateurs légitimes. Démarrez conservateur et ajustez.</p>
<h3 id="exemples_2">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Défaut</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Strict</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Tolérant</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">429&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">Ban permanent</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span>
</code></pre></div>
<h2 id="blacklist">Blacklist</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Blacklist protège votre site en bloquant l’accès selon divers attributs client. Cette fonctionnalité défend contre les entités malveillantes connues, les scanners et les visiteurs suspects en refusant l’accès en fonction des adresses IP, des réseaux, des entrées DNS inversées (rDNS), des ASN, des user-agents et de motifs d’URI spécifiques.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Le plugin vérifie les requêtes entrantes par rapport à plusieurs critères de liste noire (adresses IP, réseaux, rDNS, ASN, User-Agent ou motifs d’URI).</li>
<li>Les listes noires peuvent être spécifiées directement dans votre configuration ou chargées depuis des URL externes.</li>
<li>Si un visiteur correspond à une règle de la liste noire (et ne correspond à aucune règle d’ignorance), l’accès est refusé.</li>
<li>Les listes noires sont mises à jour automatiquement à intervalles réguliers à partir des URL configurées.</li>
<li>Vous pouvez personnaliser précisément quels critères sont vérifiés et ignorés en fonction de vos besoins de sécurité spécifiques.</li>
</ol>
<h3 id="comment-lutiliser_4">Comment l’utiliser</h3>
<p>Suivez ces étapes pour configurer et utiliser la fonctionnalité Blacklist :</p>
<ol>
<li><strong>Activer la fonctionnalité :</strong> La fonctionnalité Blacklist est activée par défaut. Si nécessaire, vous pouvez la contrôler avec le paramètre <code>USE_BLACKLIST</code>.</li>
<li><strong>Configurer les règles de blocage :</strong> Définissez quelles IP, quels réseaux, quels motifs rDNS, quels ASN, quels User-Agents ou quelles URI doivent être bloqués.</li>
<li><strong>Mettre en place des règles d’ignorance :</strong> Spécifiez les exceptions qui doivent contourner les vérifications de la liste noire.</li>
<li><strong>Ajouter des sources externes :</strong> Configurez des URL pour télécharger et mettre à jour automatiquement les données de la liste noire.</li>
<li><strong>Surveiller l’efficacité :</strong> Consultez l'<a href="../web-ui/">interface web</a> pour voir les statistiques sur les requêtes bloquées.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
</div>
<p>En mode stream, seules les vérifications par IP, rDNS et ASN seront effectuées.</p>
<h3 id="parametres-de-configuration_1">Paramètres de configuration</h3>
<p><strong>Général</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BLACKLIST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer la Blacklist :</strong> Mettre à <code>yes</code> pour activer la fonctionnalité de liste noire.</td>
</tr>
<tr>
<td><code>BLACKLIST_COMMUNITY_LISTS</code></td>
<td><code>ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Listes noires communautaires :</strong> Sélectionnez des listes noires pré-configurées et maintenues par la communauté à inclure dans le blocage.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">Listes noires communautaires</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Ce que ça fait :</strong> Vous permet d’ajouter rapidement des listes noires bien entretenues et sourcées par la communauté sans avoir à configurer manuellement les URL.</p>
<pre><code>Le paramètre `BLACKLIST_COMMUNITY_LISTS` vous permet de choisir parmi des sources de listes noires sélectionnées. Les options disponibles incluent :

| ID                                        | Description                                                                                                                                                                                                             | Source                                                                                                                         |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| `ip:laurent-minne-data-shield-aggressive` | Data-Shield IPv4 Blocklist. DST = Europa                                                                                                                                                                                | `https://raw.githubusercontent.com/duggytuxy/Data-Shield_IPv4_Blocklist/refs/heads/main/prod_data-shield_ipv4_blocklist.txt`   |
| `ip:danmeuk-tor-exit`                     | Adresses IP des nœuds de sortie Tor (dan.me.uk)                                                                                                                                                                         | `https://www.dan.me.uk/torlist/?exit`                                                                                          |
| `ua:mitchellkrogza-bad-user-agents`       | Nginx Block Bad Bots, Spam Referrer Blocker, Vulnerability Scanners, User-Agents, Malware, Adware, Ransomware, Malicious Sites, avec anti-DDOS, Wordpress Theme Detector Blocking et Fail2Ban Jail for Repeat Offenders | `https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list` |

**Configuration :** Spécifiez plusieurs listes séparées par des espaces. Par exemple :
```yaml
BLACKLIST_COMMUNITY_LISTS: "ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents"
```

!!! tip "Listes communautaires vs configuration manuelle"
    Les listes noires communautaires offrent un moyen pratique de démarrer avec des sources de listes noires éprouvées. Vous pouvez les utiliser en parallèle de configurations manuelles d’URL pour une flexibilité maximale.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="20:1"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">Adresse IP</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Ce que ça fait :</strong> Bloque les visiteurs en fonction de leur adresse IP ou de leur réseau.</p>
<pre><code>| Paramètre                  | Défaut                                | Contexte  | Multiple | Description                                                                                                                     |
| -------------------------- | ------------------------------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_IP`             |                                       | multisite | non      | **Liste noire d’IP :** Liste d’adresses IP ou de réseaux (notation CIDR) à bloquer, séparés par des espaces.                    |
| `BLACKLIST_IGNORE_IP`      |                                       | multisite | non      | **Liste d’ignorance d’IP :** Liste d’adresses IP ou de réseaux qui doivent contourner les vérifications de la liste noire d’IP. |
| `BLACKLIST_IP_URLS`        | `https://www.dan.me.uk/torlist/?exit` | multisite | non      | **URL de listes noires d’IP :** Liste d’URL contenant des adresses IP ou des réseaux à bloquer, séparés par des espaces.        |
| `BLACKLIST_IGNORE_IP_URLS` |                                       | multisite | non      | **URL de listes d’ignorance d’IP :** Liste d’URL contenant des adresses IP ou des réseaux à ignorer.                            |

Le paramètre par défaut `BLACKLIST_IP_URLS` inclut une URL qui fournit une **liste des nœuds de sortie Tor connus**. C’est une source courante de trafic malveillant et un bon point de départ pour de nombreux sites.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">Reverse DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Ce que ça fait :</strong> Bloque les visiteurs en fonction de leur nom de domaine inversé. C’est utile pour bloquer les scanners et les crawlers connus en se basant sur les domaines de leur organisation.</p>
<pre><code>| Paramètre                    | Défaut                  | Contexte  | Multiple | Description                                                                                                                    |
| ---------------------------- | ----------------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------ |
| `BLACKLIST_RDNS`             | `.shodan.io .censys.io` | multisite | non      | **Liste noire rDNS :** Liste de suffixes de DNS inversé à bloquer, séparés par des espaces.                                    |
| `BLACKLIST_RDNS_GLOBAL`      | `yes`                   | multisite | non      | **rDNS global uniquement :** N’effectue des vérifications rDNS que sur les adresses IP globales si mis à `yes`.                |
| `BLACKLIST_IGNORE_RDNS`      |                         | multisite | non      | **Liste d’ignorance rDNS :** Liste de suffixes de DNS inversé qui doivent contourner les vérifications de la liste noire rDNS. |
| `BLACKLIST_RDNS_URLS`        |                         | multisite | non      | **URL de listes noires rDNS :** Liste d’URL contenant des suffixes de DNS inversé à bloquer.                                   |
| `BLACKLIST_IGNORE_RDNS_URLS` |                         | multisite | non      | **URL de listes d’ignorance rDNS :** Liste d’URL contenant des suffixes de DNS inversé à ignorer.                              |

Le paramètre par défaut `BLACKLIST_RDNS` inclut des domaines de scanners courants comme **Shodan** et **Censys**. Ils sont souvent utilisés par des chercheurs en sécurité et des scanners pour identifier des sites vulnérables.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="22:1"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">ASN</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Ce que ça fait :</strong> Bloque les visiteurs provenant de fournisseurs de réseaux spécifiques. Les ASN sont comme des codes postaux pour Internet—ils identifient à quel fournisseur ou organisation une IP appartient.</p>
<pre><code>| Paramètre                   | Défaut | Contexte  | Multiple | Description                                                                                                 |
| --------------------------- | ------ | --------- | -------- | ----------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_ASN`             |        | multisite | non      | **Liste noire d’ASN :** Liste de numéros de systèmes autonomes à bloquer, séparés par des espaces.          |
| `BLACKLIST_IGNORE_ASN`      |        | multisite | non      | **Liste d’ignorance d’ASN :** Liste d’ASN qui doivent contourner les vérifications de la liste noire d’ASN. |
| `BLACKLIST_ASN_URLS`        |        | multisite | non      | **URL de listes noires d’ASN :** Liste d’URL contenant des ASN à bloquer.                                   |
| `BLACKLIST_IGNORE_ASN_URLS` |        | multisite | non      | **URL de listes d’ignorance d’ASN :** Liste d’URL contenant des ASN à ignorer.                              |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="23:1"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">User-Agent</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Ce que ça fait :</strong> Bloque les visiteurs en fonction du navigateur ou de l’outil qu’ils prétendent utiliser. C’est efficace contre les bots qui s’identifient honnêtement (comme "ScannerBot" ou "WebHarvestTool").</p>
<pre><code>| Paramètre                          | Défaut                                                                                                                         | Contexte  | Multiple | Description                                                                                                                                   |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ | --------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_USER_AGENT`             |                                                                                                                                | multisite | non      | **Liste noire de User-Agent :** Liste de motifs de User-Agent (regex PCRE) à bloquer, séparés par des espaces.                                |
| `BLACKLIST_IGNORE_USER_AGENT`      |                                                                                                                                | multisite | non      | **Liste d’ignorance de User-Agent :** Liste de motifs de User-Agent qui doivent contourner les vérifications de la liste noire de User-Agent. |
| `BLACKLIST_USER_AGENT_URLS`        | `https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list` | multisite | non      | **URL de listes noires de User-Agent :** Liste d’URL contenant des motifs de User-Agent à bloquer.                                            |
| `BLACKLIST_IGNORE_USER_AGENT_URLS` |                                                                                                                                | multisite | non      | **URL de listes d’ignorance de User-Agent :** Liste d’URL contenant des motifs de User-Agent à ignorer.                                       |

Le paramètre par défaut `BLACKLIST_USER_AGENT_URLS` inclut une URL qui fournit une **liste de user agents malveillants connus**. Ils sont souvent utilisés par des bots et des scanners malveillants pour identifier des sites vulnérables.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Ce que ça fait :</strong> Bloque les requêtes vers des URL spécifiques de votre site. C’est utile pour bloquer les tentatives d’accès aux pages d’administration, aux formulaires de connexion ou à d’autres zones sensibles qui pourraient être ciblées.</p>
<pre><code>| Paramètre                   | Défaut | Contexte  | Multiple | Description                                                                                                           |
| --------------------------- | ------ | --------- | -------- | --------------------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_URI`             |        | multisite | non      | **Liste noire d’URI :** Liste de motifs d’URI (regex PCRE) à bloquer, séparés par des espaces.                        |
| `BLACKLIST_IGNORE_URI`      |        | multisite | non      | **Liste d’ignorance d’URI :** Liste de motifs d’URI qui doivent contourner les vérifications de la liste noire d’URI. |
| `BLACKLIST_URI_URLS`        |        | multisite | non      | **URL de listes noires d’URI :** Liste d’URL contenant des motifs d’URI à bloquer.                                    |
| `BLACKLIST_IGNORE_URI_URLS` |        | multisite | non      | **URL de listes d’ignorance d’URI :** Liste d’URL contenant des motifs d’URI à ignorer.                               |
</code></pre>
<div class="admonition info">
<p class="admonition-title">Support des formats d’URL</p>
</div>
<p>Tous les paramètres <code>*_URLS</code> supportent les URL HTTP/HTTPS ainsi que les chemins de fichiers locaux en utilisant le préfixe <code>file:///</code>. L’authentification basique est supportée en utilisant le format <code>http://user:pass@url</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Mises à jour régulières</p>
</div>
<p>Les listes noires provenant d’URL sont automatiquement téléchargées et mises à jour toutes les heures pour garantir que votre protection reste à jour contre les dernières menaces.</p>
<h3 id="exemples-de-configuration_2">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="25:3"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><input id="__tabbed_25_2" name="__tabbed_25" type="radio" /><input id="__tabbed_25_3" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">Protection de base par IP et User-Agent</label><label for="__tabbed_25_2">Protection avancée avec des règles personnalisées</label><label for="__tabbed_25_3">Utilisation de fichiers locaux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple qui bloque les nœuds de sortie Tor connus et les user agents malveillants courants en utilisant les listes noires communautaires :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div>
<p>Alternativement, vous pouvez utiliser une configuration manuelle par URL :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Une configuration plus complète avec des entrées de liste noire personnalisées et des exceptions :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Entrées de liste noire personnalisées</span>
<span class="nt">BLACKLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.100</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">BLACKLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.shodan.io</span><span class="nv"> </span><span class="s">.censys.io</span><span class="nv"> </span><span class="s">.scanner.com&quot;</span>
<span class="nt">BLACKLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16509</span><span class="nv"> </span><span class="s">14618&quot;</span><span class="w">  </span><span class="c1"># ASN d&#39;AWS et d&#39;Amazon</span>
<span class="nt">BLACKLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)SemrushBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)AhrefsBot(?:\b)&quot;</span>
<span class="nt">BLACKLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/wp-login</span><span class="err">\</span><span class="s">.php$</span><span class="nv"> </span><span class="s">^/administrator/&quot;</span>

<span class="c1"># Règles d&#39;ignorance personnalisées</span>
<span class="nt">BLACKLIST_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.200</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>

<span class="c1"># Sources de listes noires externes</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit</span><span class="nv"> </span><span class="s">https://www.spamhaus.org/drop/drop.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant des fichiers locaux pour les listes noires :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/ip-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/rdns-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/asn-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/user-agent-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/uri-blacklist.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="brotli">Brotli</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Brotli active la compression des réponses HTTP avec l’algorithme Brotli. Il réduit l’usage de bande passante et accélère le chargement en compressant le contenu avant l’envoi au navigateur.</p>
<p>Par rapport à gzip, Brotli atteint généralement de meilleurs taux de compression, pour des fichiers plus petits et une livraison plus rapide.</p>
<p>Comment ça marche :</p>
<ol>
<li>À la requête d’un client, BunkerWeb vérifie si le navigateur supporte Brotli.</li>
<li>Si oui, la réponse est compressée au niveau configuré (<code>BROTLI_COMP_LEVEL</code>).</li>
<li>Les en‑têtes appropriés indiquent la compression Brotli.</li>
<li>Le navigateur décompresse avant affichage.</li>
<li>Bande passante et temps de chargement diminuent.</li>
</ol>
<h3 id="comment-lutiliser_5">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_BROTLI: yes</code> (désactivé par défaut).</li>
<li>Types MIME : définir les contenus à compresser via <code>BROTLI_TYPES</code>.</li>
<li>Taille minimale : <code>BROTLI_MIN_LENGTH</code> pour éviter de compresser les petites réponses.</li>
<li>Niveau de compression : <code>BROTLI_COMP_LEVEL</code> pour l’équilibre vitesse/ratio.</li>
</ol>
<h3 id="parametres_3">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BROTLI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la compression Brotli.</td>
</tr>
<tr>
<td><code>BROTLI_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>non</td>
<td>Types MIME compressés.</td>
</tr>
<tr>
<td><code>BROTLI_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>non</td>
<td>Taille minimale (octets) pour appliquer la compression.</td>
</tr>
<tr>
<td><code>BROTLI_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>multisite</td>
<td>non</td>
<td>Niveau 0–11 : plus haut = meilleure compression mais plus de CPU.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Niveau de compression</p>
</div>
<p><code>6</code> offre un bon compromis. Pour du statique et CPU disponible : 9–11. Pour du dynamique ou CPU contraint : 4–5.</p>
<h3 id="exemples_3">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">Basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="27:1"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">Compression maximale</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;11&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="28:1"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">Performance équilibrée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
</code></pre></div>
<h2 id="bunkernet">BunkerNet</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin BunkerNet permet le partage collectif de renseignements sur les menaces entre instances BunkerWeb, créant un réseau de protection contre les acteurs malveillants. En y participant, votre instance bénéficie d’une base mondiale de menaces et y contribue de façon anonyme.</p>
<p>Comment ça marche :</p>
<ol>
<li>Votre instance s’enregistre automatiquement auprès de l’API BunkerNet et reçoit un identifiant unique.</li>
<li>À chaque IP/comportement malveillant bloqué, l’information est signalée anonymement à BunkerNet.</li>
<li>BunkerNet agrège l’intelligence de toutes les instances et diffuse une base consolidée.</li>
<li>Votre instance télécharge régulièrement la base à jour.</li>
<li>Cette intelligence collective permet de bloquer proactivement des IP déjà malveillantes ailleurs.</li>
</ol>
<h3 id="comment-lutiliser_6">Comment l’utiliser</h3>
<ol>
<li>Activation : <code>USE_BUNKERNET</code> (activé par défaut).</li>
<li>Enregistrement initial : effectué automatiquement au premier démarrage.</li>
<li>Mises à jour : téléchargement automatique et régulier de la base.</li>
<li>Signalement : contribution automatique lors de blocages d’IP.</li>
<li>Suivi : statistiques visibles dans la <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_4">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BUNKERNET</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la participation BunkerNet.</td>
</tr>
<tr>
<td><code>BUNKERNET_SERVER</code></td>
<td><code>https://api.bunkerweb.io</code></td>
<td>global</td>
<td>non</td>
<td>URL de l’API BunkerNet.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Confidentialité</p>
</div>
<p>Seules les données nécessaires à l’identification de la menace sont partagées (IP, raison du blocage, contexte minimal).</p>
<h3 id="integration-crowdsec-console">Intégration CrowdSec Console</h3>
<p>Grâce au partenariat avec <a href="https://www.crowdsec.net/?utm_campaign=bunkerweb&amp;utm_source=doc">CrowdSec</a>, vous pouvez inscrire vos instances BunkerWeb dans votre <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">CrowdSec Console</a> et visualiser les attaques bloquées.</p>
<p>Étapes principales :</p>
<ol>
<li>Créez un compte CrowdSec Console et récupérez la clé d’enrôlement.</li>
<li>Récupérez votre BunkerNet ID (BunkerNet activé).</li>
<li>Commandez le service gratuit « BunkerNet / CrowdSec » sur le Panel et fournissez l’ID et la clé.</li>
<li>Acceptez le nouvel engine dans la Console.</li>
</ol>
<h3 id="exemples_4">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="29:1"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">Configuration par défaut (recommandée)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.bunkerweb.io&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="30:1"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">Désactivation</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="31:1"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">Serveur personnalisé</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://bunkernet.example.com&quot;</span>
</code></pre></div>
<h2 id="cors">CORS</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin CORS active le partage de ressources entre origines (Cross‑Origin Resource Sharing) de manière contrôlée. Il permet de partager vos ressources avec des domaines tiers de confiance en définissant précisément origines, méthodes et en‑têtes autorisés.</p>
<p>Comment ça marche :</p>
<ol>
<li>Pour une requête cross‑origin, le navigateur envoie d’abord une requête « preflight » <code>OPTIONS</code>.</li>
<li>BunkerWeb vérifie si l’origine est autorisée.</li>
<li>Si oui, il renvoie les en‑têtes CORS appropriés décrivant ce qui est permis.</li>
<li>Sinon, la requête est refusée ou servie sans en‑têtes CORS selon la configuration.</li>
<li>Des politiques supplémentaires (COEP/COOP/CORP) peuvent renforcer la sécurité.</li>
</ol>
<h3 id="comment-lutiliser_7">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_CORS: yes</code> (désactivé par défaut).</li>
<li>Origines : <code>CORS_ALLOW_ORIGIN</code> (regex PCRE, <code>*</code> tous, <code>self</code> même origine).</li>
<li>Méthodes : <code>CORS_ALLOW_METHODS</code>.</li>
<li>En‑têtes : <code>CORS_ALLOW_HEADERS</code>.</li>
<li>Identifiants : <code>CORS_ALLOW_CREDENTIALS</code> pour autoriser cookies/auth.</li>
</ol>
<h3 id="parametres_5">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CORS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer CORS.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_ORIGIN</code></td>
<td><code>self</code></td>
<td>multisite</td>
<td>non</td>
<td>Origines autorisées (regex PCRE). <code>*</code> = toute origine, <code>self</code> = même origine.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_METHODS</code></td>
<td><code>GET, POST, OPTIONS</code></td>
<td>multisite</td>
<td>non</td>
<td>Méthodes autorisées.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_HEADERS</code></td>
<td><code>DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range</code></td>
<td>multisite</td>
<td>non</td>
<td>En‑têtes autorisés côté requête.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_CREDENTIALS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Autoriser les identifiants (cookies, auth HTTP).</td>
</tr>
<tr>
<td><code>CORS_EXPOSE_HEADERS</code></td>
<td><code>Content-Length,Content-Range</code></td>
<td>multisite</td>
<td>non</td>
<td>En‑têtes exposés côté réponse.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_OPENER_POLICY</code></td>
<td><code>same-origin</code></td>
<td>multisite</td>
<td>non</td>
<td>Politique COOP.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_EMBEDDER_POLICY</code></td>
<td><code>require-corp</code></td>
<td>multisite</td>
<td>non</td>
<td>Politique COEP.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_RESOURCE_POLICY</code></td>
<td><code>same-site</code></td>
<td>multisite</td>
<td>non</td>
<td>Politique CORP.</td>
</tr>
<tr>
<td><code>CORS_MAX_AGE</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>non</td>
<td>Durée de cache du preflight (secondes).</td>
</tr>
<tr>
<td><code>CORS_DENY_REQUEST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Refuser les origines non autorisées avec un code d’erreur.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimiser le preflight</p>
</div>
<p>Augmenter <code>CORS_MAX_AGE</code> réduit la fréquence des preflights (par défaut 24h).</p>
<div class="admonition warning">
<p class="admonition-title">Sécurité</p>
</div>
<p>Soyez prudent avec <code>CORS_ALLOW_ORIGIN: *</code> et/ou <code>CORS_ALLOW_CREDENTIALS: yes</code>. Préférez lister explicitement les origines de confiance.</p>
<h3 id="exemples_5">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="32:1"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">Configuration basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;self&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="33:1"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">API publique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">X-API-Key&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="34:1"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">Plusieurs domaines de confiance</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(app|api|dashboard)\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Requested-With&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_EXPOSE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Length,</span><span class="nv"> </span><span class="s">Content-Range,</span><span class="nv"> </span><span class="s">X-RateLimit-Remaining&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="35:1"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">Wildcard sous‑domaine</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://.*\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="36:1"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">Multiples motifs de domaine</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(.*\\.example\\.com|.*\\.trusted-partner\\.org|api\\.third-party\\.net)$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Custom-Header&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<h2 id="client-cache">Client cache</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Client Cache optimise les performances en contrôlant la mise en cache des contenus statiques par les navigateurs. Il réduit la bande passante, la charge serveur et accélère les temps de chargement en instruisant les navigateurs à conserver localement images, CSS, JS, etc., plutôt que de les retélécharger à chaque visite.</p>
<p>Comment ça marche :</p>
<ol>
<li>Une fois activé, BunkerWeb ajoute des en‑têtes Cache-Control aux réponses des fichiers statiques.</li>
<li>Ces en‑têtes indiquent aux navigateurs pendant combien de temps conserver localement le contenu.</li>
<li>Pour les extensions spécifiées (images, CSS, JS…), BunkerWeb applique la politique de cache configurée.</li>
<li>Les ETags (optionnels) fournissent un mécanisme de validation supplémentaire.</li>
<li>Lors des visites suivantes, le navigateur réutilise les fichiers en cache, accélérant le chargement.</li>
</ol>
<h3 id="comment-lutiliser_8">Comment l’utiliser</h3>
<ol>
<li>Activer : mettez <code>USE_CLIENT_CACHE</code> à <code>yes</code> (désactivé par défaut).</li>
<li>Extensions : définissez <code>CLIENT_CACHE_EXTENSIONS</code> pour les types de fichiers à mettre en cache.</li>
<li>Directives Cache-Control : personnalisez <code>CLIENT_CACHE_CONTROL</code>.</li>
<li>ETag : activez ou non via <code>CLIENT_CACHE_ETAG</code>.</li>
</ol>
<h3 id="parametres_6">Paramètres</h3>
<p>| Paramètre                 | Défaut                     | Contexte  | Multiple | Description                                                  |
| ------------------------- | -------------------------- | --------- | -------- | ------------------------------------------------------------ | --- |
| <code>USE_CLIENT_CACHE</code>        | <code>no</code>                       | multisite | non      | Activer la mise en cache côté client des fichiers statiques. |
| <code>CLIENT_CACHE_EXTENSIONS</code> | <code>jpg                       | jpeg      | png      | bmp                                                          | ico | svg | tif | css | js | otf | ttf | eot | woff | woff2</code> | global | non | Extensions mises en cache (séparées par <code>|</code>). |
| <code>CLIENT_CACHE_CONTROL</code>    | <code>public, max-age=15552000</code> | multisite | non      | Valeur de l’en‑tête HTTP Cache-Control.                      |
| <code>CLIENT_CACHE_ETAG</code>       | <code>yes</code>                      | multisite | non      | Envoi d’un ETag pour les ressources statiques.               |</p>
<div class="admonition tip">
<p class="admonition-title">Optimiser le cache</p>
</div>
<p>Contenu fréquemment mis à jour : durée plus courte. Contenu versionné ou peu changeant : durée plus longue. La valeur par défaut (180 jours) convient souvent.</p>
<h3 id="exemples_6">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="37:1"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">Basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|gif|css|js|svg|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=86400&quot;</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="38:1"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">Agressif</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2|pdf|xml|txt&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=31536000,</span><span class="nv"> </span><span class="s">immutable&quot;</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="39:1"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">Mixte</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=604800&quot;</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<h2 id="country">Country</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Country active le géo‑blocage et permet de restreindre l’accès selon la localisation géographique des visiteurs. Utile pour la conformité régionale, limiter la fraude associée à des zones à risque et appliquer des restrictions de contenu selon les frontières.</p>
<p>Comment ça marche :</p>
<ol>
<li>À chaque visite, BunkerWeb détermine le pays d’origine via l’adresse IP.</li>
<li>Votre configuration définit une liste blanche (autorisés) ou noire (bloqués).</li>
<li>En liste blanche : seuls les pays listés sont autorisés.</li>
<li>En liste noire : les pays listés sont refusés.</li>
<li>Le résultat est mis en cache pour les visites répétées.</li>
</ol>
<h3 id="comment-lutiliser_9">Comment l’utiliser</h3>
<ol>
<li>Stratégie : choisir liste blanche (peu de pays autorisés) ou liste noire (bloquer certains pays).</li>
<li>Codes pays : ajoutez des codes ISO 3166‑1 alpha‑2 (US, GB, FR) à <code>WHITELIST_COUNTRY</code> ou <code>BLACKLIST_COUNTRY</code>.</li>
<li>Application : une fois configuré, la restriction s’applique à tous les visiteurs.</li>
<li>Suivi : consultez la <a href="../web-ui/">web UI</a> pour les statistiques par pays.</li>
</ol>
<h3 id="parametres_7">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Liste blanche : codes pays ISO 3166‑1 alpha‑2 séparés par des espaces. Seuls ces pays sont autorisés.</td>
</tr>
<tr>
<td><code>BLACKLIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Liste noire : codes pays ISO 3166‑1 alpha‑2 séparés par des espaces. Ces pays sont bloqués.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Liste blanche vs noire</p>
</div>
<p>Liste blanche : accès restreint à quelques pays. Liste noire : bloquer des régions problématiques et autoriser le reste.</p>
<div class="admonition warning">
<p class="admonition-title">Priorité</p>
</div>
<p>Si une liste blanche et une liste noire sont définies, la liste blanche a priorité : si le pays n’y figure pas, l’accès est refusé.</p>
<div class="admonition info">
<p class="admonition-title">Détection du pays</p>
</div>
<p>BunkerWeb utilise la base mmdb <a href="https://db-ip.com/db/download/ip-to-country-lite">db‑ip lite</a>.</p>
<h3 id="exemples_7">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="40:1"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">Liste blanche uniquement</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;US</span><span class="nv"> </span><span class="s">CA</span><span class="nv"> </span><span class="s">GB&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="41:1"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">Liste noire uniquement</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="42:1"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">UE uniquement</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AT</span><span class="nv"> </span><span class="s">BE</span><span class="nv"> </span><span class="s">BG</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">CY</span><span class="nv"> </span><span class="s">CZ</span><span class="nv"> </span><span class="s">DK</span><span class="nv"> </span><span class="s">EE</span><span class="nv"> </span><span class="s">FI</span><span class="nv"> </span><span class="s">FR</span><span class="nv"> </span><span class="s">DE</span><span class="nv"> </span><span class="s">GR</span><span class="nv"> </span><span class="s">HU</span><span class="nv"> </span><span class="s">IE</span><span class="nv"> </span><span class="s">IT</span><span class="nv"> </span><span class="s">LV</span><span class="nv"> </span><span class="s">LT</span><span class="nv"> </span><span class="s">LU</span><span class="nv"> </span><span class="s">MT</span><span class="nv"> </span><span class="s">NL</span><span class="nv"> </span><span class="s">PL</span><span class="nv"> </span><span class="s">PT</span><span class="nv"> </span><span class="s">RO</span><span class="nv"> </span><span class="s">SK</span><span class="nv"> </span><span class="s">SI</span><span class="nv"> </span><span class="s">ES</span><span class="nv"> </span><span class="s">SE&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="43:1"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">Blocage pays à risque</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP</span><span class="nv"> </span><span class="s">IR</span><span class="nv"> </span><span class="s">SY&quot;</span>
</code></pre></div>
<h2 id="crowdsec">CrowdSec</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<figure>
<p><img align="center," alt="Overview" src="../../assets/img/crowdsec.svg" width="600" /></p>
</figure>
<p>Le plugin CrowdSec intègre BunkerWeb avec le moteur de sécurité CrowdSec, fournissant une couche de protection supplémentaire contre diverses cybermenaces. Ce plugin agit comme un bouncer <a href="https://crowdsec.net/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">CrowdSec</a>, refusant les requêtes en fonction des décisions de l'API CrowdSec.</p>
<p>CrowdSec est un moteur de sécurité moderne et open-source qui détecte et bloque les adresses IP malveillantes en se basant sur l'analyse comportementale et l'intelligence collective de sa communauté. Vous pouvez également configurer des <a href="https://docs.crowdsec.net/docs/concepts?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">scénarios</a> pour bannir automatiquement les adresses IP en fonction de comportements suspects, bénéficiant ainsi d'une liste noire participative.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Le moteur CrowdSec analyse les journaux et détecte les activités suspectes sur votre infrastructure.</li>
<li>Lorsqu'une activité malveillante est détectée, CrowdSec crée une décision pour bloquer l'adresse IP incriminée.</li>
<li>BunkerWeb, agissant comme un bouncer, interroge l'API locale de CrowdSec pour obtenir des décisions concernant les requêtes entrantes.</li>
<li>Si l'adresse IP d'un client fait l'objet d'une décision de blocage active, BunkerWeb refuse l'accès aux services protégés.</li>
<li>En option, le composant de sécurité applicative (Application Security Component) peut effectuer une inspection approfondie des requêtes pour une sécurité renforcée.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Bénéfices clés</p>
<ol>
<li><strong>Sécurité communautaire :</strong> Bénéficiez des renseignements sur les menaces partagés par la communauté des utilisateurs de CrowdSec.</li>
<li><strong>Analyse comportementale :</strong> Détectez les attaques sophistiquées basées sur des modèles de comportement, et non uniquement sur des signatures.</li>
<li><strong>Intégration légère :</strong> Impact minimal sur les performances de votre instance BunkerWeb.</li>
<li><strong>Protection multi-niveaux :</strong> Combinez la défense périmétrique (blocage d'IP) avec la sécurité applicative pour une protection en profondeur.</li>
</ol>
</div>
<h3 id="mise-en-place">Mise en place</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="44:1"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">Docker</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Fichier d'acquisition</strong></p>
<pre><code>Vous devrez exécuter une instance de CrowdSec et la configurer pour analyser les journaux de BunkerWeb. Comme BunkerWeb est basé sur NGINX, vous pouvez utiliser la valeur `nginx` pour le paramètre `type` dans votre fichier d'acquisition (en supposant que les journaux de BunkerWeb sont stockés tels quels sans données supplémentaires) :

```yaml
filenames:
  - /var/log/bunkerweb.log
labels:
  type: nginx
```

**Composant de sécurité applicative (*optionnel*)**

CrowdSec fournit également un [Composant de sécurité applicative](https://docs.crowdsec.net/docs/appsec/intro?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs) qui peut être utilisé pour protéger votre application contre les attaques. Si vous souhaitez l'utiliser, vous devez créer un autre fichier d'acquisition pour le composant AppSec :

```yaml
appsec_config: crowdsecurity/appsec-default
labels:
  type: appsec
listen_addr: 0.0.0.0:7422
source: appsec
```

**Syslog**

Pour les intégrations basées sur des conteneurs, nous recommandons de rediriger les journaux du conteneur BunkerWeb vers un service syslog afin que CrowdSec puisse y accéder facilement. Voici un exemple de configuration pour syslog-ng qui stockera les journaux bruts provenant de BunkerWeb dans un fichier local `/var/log/bunkerweb.log` :

```syslog
@version: 4.8

source s_net {
    udp(
        ip("0.0.0.0")
    );
};

template t_imp {
    template("$MSG\n");
    template_escape(no);
};

destination d_file {
    file("/var/log/bunkerweb.log" template(t_imp));
};

log {
    source(s_net);
    destination(d_file);
};
```

**Docker Compose**

Voici le modèle docker-compose que vous pouvez utiliser (n'oubliez pas de mettre à jour la clé du bouncer) :

```yaml
x-bw-env: &amp;bw-env
  # Nous utilisons une ancre pour éviter de répéter les mêmes paramètres pour les deux services
  API_WHITELIST_IP: "127.0.0.0/8 10.20.30.0/24" # Assurez-vous de définir la bonne plage IP pour que le planificateur puisse envoyer la configuration à l'instance

services:
  bunkerweb:
    # C'est le nom qui sera utilisé pour identifier l'instance dans le planificateur
    image: bunkerity/bunkerweb:1.6.5-rc3
    ports:
      - "80:8080/tcp"
      - "443:8443/tcp"
      - "443:8443/udp" # Pour le support QUIC / HTTP3
    environment:
      &lt;&lt;: *bw-env # Nous utilisons l'ancre pour éviter de répéter les mêmes paramètres pour tous les services
    restart: "unless-stopped"
    networks:
      - bw-universe
      - bw-services
    logging:
      driver: syslog # Envoyer les journaux à syslog
      options:
        syslog-address: "udp://10.20.30.254:514" # L'adresse IP du service syslog

  bw-scheduler:
    image: bunkerity/bunkerweb-scheduler:1.6.5-rc3
    environment:
      &lt;&lt;: *bw-env
      BUNKERWEB_INSTANCES: "bunkerweb" # Assurez-vous de définir le nom correct de l'instance
      DATABASE_URI: "mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db" # N'oubliez pas de définir un mot de passe plus fort pour la base de données
      SERVER_NAME: ""
      MULTISITE: "yes"
      USE_CROWDSEC: "yes"
      CROWDSEC_API: "http://crowdsec:8080" # C'est l'adresse de l'API du conteneur CrowdSec dans le même réseau
      CROWDSEC_APPSEC_URL: "http://crowdsec:7422" # Commentez si vous ne voulez pas utiliser le composant AppSec
      CROWDSEC_API_KEY: "s3cr3tb0unc3rk3y" # N'oubliez pas de définir une clé plus forte pour le bouncer
    volumes:
      - bw-storage:/data # Ceci est utilisé pour persister le cache et d'autres données comme les sauvegardes
    restart: "unless-stopped"
    networks:
      - bw-universe
      - bw-db

  bw-db:
    image: mariadb:11
    # Nous définissons la taille maximale des paquets autorisés pour éviter les problèmes avec les grosses requêtes
    command: --max-allowed-packet=67108864
    environment:
      MYSQL_RANDOM_ROOT_PASSWORD: "yes"
      MYSQL_DATABASE: "db"
      MYSQL_USER: "bunkerweb"
      MYSQL_PASSWORD: "changeme" # N'oubliez pas de définir un mot de passe plus fort pour la base de données
    volumes:
      - bw-data:/var/lib/mysql
    restart: "unless-stopped"
    networks:
      - bw-db

  crowdsec:
    image: crowdsecurity/crowdsec:v1.7.0 # Utilisez la dernière version mais épinglez toujours la version pour une meilleure stabilité/sécurité
    volumes:
      - cs-data:/var/lib/crowdsec/data # Pour persister les données de CrowdSec
      - bw-logs:/var/log:ro # Les journaux de BunkerWeb à analyser par CrowdSec
      - ./acquis.yaml:/etc/crowdsec/acquis.yaml # Le fichier d'acquisition pour les journaux de BunkerWeb
      - ./appsec.yaml:/etc/crowdsec/acquis.d/appsec.yaml # Commentez si vous ne voulez pas utiliser le composant AppSec
    environment:
      BOUNCER_KEY_bunkerweb: "s3cr3tb0unc3rk3y" # N'oubliez pas de définir une clé plus forte pour le bouncer
      COLLECTIONS: "crowdsecurity/nginx crowdsecurity/appsec-virtual-patching crowdsecurity/appsec-generic-rules"
      #   COLLECTIONS: "crowdsecurity/nginx" # Si vous ne voulez pas utiliser le composant AppSec, utilisez plutôt cette ligne
    networks:
      - bw-universe

  syslog:
    image: balabit/syslog-ng:4.9.0
    cap_add:
      - NET_BIND_SERVICE  # Lier aux ports bas
      - NET_BROADCAST  # Envoyer des diffusions
      - NET_RAW  # Utiliser des sockets brutes
      - DAC_READ_SEARCH  # Lire les fichiers en contournant les autorisations
      - DAC_OVERRIDE  # Outrepasser les autorisations de fichiers
      - CHOWN  # Changer le propriétaire
      - SYSLOG  # Écrire dans les journaux système
    volumes:
      - bw-logs:/var/log/bunkerweb # C'est le volume utilisé pour stocker les journaux
      - ./syslog-ng.conf:/etc/syslog-ng/syslog-ng.conf # C'est le fichier de configuration de syslog-ng
    networks:
        bw-universe:
          ipv4_address: 10.20.30.254

volumes:
  bw-data:
  bw-storage:
  bw-logs:
  cs-data:

networks:
  bw-universe:
    name: bw-universe
    ipam:
      driver: default
      config:
        - subnet: 10.20.30.0/24 # Assurez-vous de définir la bonne plage IP pour que le planificateur puisse envoyer la configuration à l'instance
  bw-services:
    name: bw-services
  bw-db:
    name: bw-db
```
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="45:2"><input checked="checked" id="__tabbed_45_1" name="__tabbed_45" type="radio" /><input id="__tabbed_45_2" name="__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="__tabbed_45_1">Linux</label><label for="__tabbed_45_2">All-in-one</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Vous devez installer CrowdSec et le configurer pour analyser les journaux de BunkerWeb. Suivez la <a href="https://doc.crowdsec.net/docs/getting_started/install_crowdsec?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">documentation officielle</a>.</p>
<p>Pour permettre à CrowdSec d'analyser les journaux de BunkerWeb, ajoutez les lignes suivantes à votre fichier d'acquisition situé à <code>/etc/crowdsec/acquis.yaml</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/access.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/error.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/modsec_audit.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
</code></pre></div>
<p>Maintenant, ajoutez votre bouncer personnalisé à l'API CrowdSec en utilisant l'outil <code>cscli</code> :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>bouncers<span class="w"> </span>add<span class="w"> </span>crowdsec-bunkerweb-bouncer/v1.6
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Clé API</p>
<p>Conservez la clé générée par la commande <code>cscli</code> ; vous en aurez besoin plus tard.</p>
</div>
<p>Ensuite, redémarrez le service CrowdSec :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>Composant de sécurité applicative (<em>optionnel</em>)</strong></p>
<p>Si vous souhaitez utiliser le composant AppSec, vous devez créer un autre fichier d'acquisition pour celui-ci, situé à <code>/etc/crowdsec/acquis.d/appsec.yaml</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p>Vous devrez également installer les collections du composant AppSec :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-virtual-patching
sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-generic-rules
</code></pre></div>
<p>Enfin, redémarrez le service CrowdSec :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>Paramètres</strong></p>
<p>Configurez le plugin en ajoutant les paramètres suivants à votre fichier de configuration BunkerWeb :</p>
<div class="highlight"><pre><span></span><code>USE_CROWDSEC=yes
CROWDSEC_API=http://127.0.0.1:8080
CROWDSEC_API_KEY=&lt;La clé fournie par cscli&gt;
# Commentez si vous ne voulez pas utiliser le composant AppSec
CROWDSEC_APPSEC_URL=http://127.0.0.1:7422
</code></pre></div>
<p>Enfin, rechargez le service BunkerWeb :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>reload<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<p>L'image Docker BunkerWeb All-In-One (AIO) est livrée avec CrowdSec entièrement intégré. Vous n'avez pas besoin de configurer une instance CrowdSec séparée ou de configurer manuellement les fichiers d'acquisition pour les journaux de BunkerWeb lorsque vous utilisez l'agent CrowdSec interne.</p>
<p>Référez-vous à la <a href="../integrations/#crowdsec-integration">documentation d'intégration de l'image All-In-One (AIO)</a>.</p>
</div>
</div>
</div>
<h3 id="parametres-de-configuration_2">Paramètres de configuration</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CROWDSEC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer CrowdSec :</strong> Mettre à <code>yes</code> pour activer le bouncer CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_API</code></td>
<td><code>http://crowdsec:8080</code></td>
<td>global</td>
<td>no</td>
<td><strong>URL de l'API CrowdSec :</strong> L'adresse du service de l'API locale de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_API_KEY</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Clé API CrowdSec :</strong> La clé API pour s'authentifier auprès de l'API CrowdSec, obtenue avec <code>cscli bouncers add</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_MODE</code></td>
<td><code>live</code></td>
<td>global</td>
<td>no</td>
<td><strong>Mode de fonctionnement :</strong> Soit <code>live</code> (interroge l'API pour chaque requête) ou <code>stream</code> (met en cache périodiquement toutes les décisions).</td>
</tr>
<tr>
<td><code>CROWDSEC_ENABLE_INTERNAL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Trafic interne :</strong> Mettre à <code>yes</code> pour vérifier le trafic interne par rapport aux décisions de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_REQUEST_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>no</td>
<td><strong>Délai d'attente de la requête :</strong> Délai d'attente en millisecondes pour les requêtes HTTP vers l'API locale de CrowdSec en mode live.</td>
</tr>
<tr>
<td><code>CROWDSEC_EXCLUDE_LOCATION</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Emplacements exclus :</strong> Liste d'emplacements (URI) séparés par des virgules à exclure des vérifications de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_CACHE_EXPIRATION</code></td>
<td><code>1</code></td>
<td>global</td>
<td>no</td>
<td><strong>Expiration du cache :</strong> Le temps d'expiration du cache en secondes pour les décisions IP en mode live.</td>
</tr>
<tr>
<td><code>CROWDSEC_UPDATE_FREQUENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>no</td>
<td><strong>Fréquence de mise à jour :</strong> À quelle fréquence (en secondes) récupérer les décisions nouvelles/expirées de l'API CrowdSec en mode stream.</td>
</tr>
</tbody>
</table>
<h4 id="parametres-du-composant-de-securite-applicative">Paramètres du composant de sécurité applicative</h4>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CROWDSEC_APPSEC_URL</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>URL AppSec :</strong> L'URL du composant de sécurité applicative de CrowdSec. Laisser vide pour désactiver AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_FAILURE_ACTION</code></td>
<td><code>passthrough</code></td>
<td>global</td>
<td>no</td>
<td><strong>Action en cas d'échec :</strong> Action à entreprendre lorsque AppSec renvoie une erreur. Peut être <code>passthrough</code> ou <code>deny</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_CONNECT_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>Délai de connexion :</strong> Le délai d'attente en millisecondes pour se connecter au composant AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SEND_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>Délai d'envoi :</strong> Le délai d'attente en millisecondes pour envoyer des données au composant AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_PROCESS_TIMEOUT</code></td>
<td><code>500</code></td>
<td>global</td>
<td>no</td>
<td><strong>Délai de traitement :</strong> Le délai d'attente en millisecondes pour traiter la requête dans le composant AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_ALWAYS_SEND_TO_APPSEC</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Toujours envoyer :</strong> Mettre à <code>yes</code> pour toujours envoyer les requêtes à AppSec, même s'il y a une décision au niveau de l'IP.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SSL_VERIFY</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Vérification SSL :</strong> Mettre à <code>yes</code> pour vérifier le certificat SSL du composant AppSec.</td>
</tr>
</tbody>
</table>
<p>!!! info "À propos des modes de fonctionnement" - Le <strong>mode Live</strong> interroge l'API CrowdSec pour chaque requête entrante, offrant une protection en temps réel au prix d'une latence plus élevée. - Le <strong>mode Stream</strong> télécharge périodiquement toutes les décisions de l'API CrowdSec et les met en cache localement, réduisant la latence avec un léger retard dans l'application des nouvelles décisions.</p>
<h3 id="exemples-de-configurations">Exemples de configurations</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="46:2"><input checked="checked" id="__tabbed_46_1" name="__tabbed_46" type="radio" /><input id="__tabbed_46_2" name="__tabbed_46" type="radio" /><div class="tabbed-labels"><label for="__tabbed_46_1">Configuration de base</label><label for="__tabbed_46_2">Configuration avancée avec AppSec</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>C'est une configuration simple pour lorsque CrowdSec s'exécute sur le même hôte :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;live&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Une configuration plus complète incluant le composant de sécurité applicative :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">CROWDSEC_UPDATE_FREQUENCY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">CROWDSEC_EXCLUDE_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/health,/metrics&quot;</span>

<span class="c1"># Configuration AppSec</span>
<span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span>
<span class="nt">CROWDSEC_APPSEC_FAILURE_ACTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deny&quot;</span>
<span class="nt">CROWDSEC_ALWAYS_SEND_TO_APPSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_APPSEC_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="custom-ssl-certificate">Custom SSL certificate</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Certificat SSL personnalisé permet d’utiliser vos propres certificats SSL/TLS avec BunkerWeb, au lieu de ceux générés automatiquement. Utile si vous possédez déjà des certificats d’une AC de confiance, avez des besoins spécifiques ou centralisez la gestion des certificats.</p>
<p>Comment ça marche :</p>
<ol>
<li>Vous fournissez le certificat et la clé privée (chemins de fichiers ou données en base64/PEM).</li>
<li>BunkerWeb valide le format et l’utilisabilité des fichiers.</li>
<li>Lors d’une connexion sécurisée, BunkerWeb sert votre certificat personnalisé.</li>
<li>La validité est surveillée et des alertes sont émises avant expiration.</li>
<li>Vous gardez le contrôle total sur le cycle de vie des certificats.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Surveillance automatique</p>
</div>
<p>Avec <code>USE_CUSTOM_SSL: yes</code>, BunkerWeb surveille le certificat <code>CUSTOM_SSL_CERT</code>, détecte les changements et recharge NGINX si nécessaire.</p>
<h3 id="comment-lutiliser_10">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_CUSTOM_SSL: yes</code>.</li>
<li>Méthode : fichiers vs données, priorité via <code>CUSTOM_SSL_CERT_PRIORITY</code>.</li>
<li>Fichiers : fournissez les chemins du certificat et de la clé privée.</li>
<li>Données : fournissez les chaînes base64 ou PEM en clair.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Mode stream</p>
</div>
<p>En mode stream, configurez <code>LISTEN_STREAM_PORT_SSL</code> pour le port SSL/TLS.</p>
<h3 id="parametres_8">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CUSTOM_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer l’usage d’un certificat personnalisé.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_PRIORITY</code></td>
<td><code>file</code></td>
<td>multisite</td>
<td>non</td>
<td>Priorité des sources : <code>file</code> (fichiers) ou <code>data</code> (données).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin complet vers le certificat (ou bundle).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin complet vers la clé privée.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_DATA</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Données du certificat (base64 ou PEM en clair).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY_DATA</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Données de la clé privée (base64 ou PEM en clair).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sécurité</p>
</div>
<p>Protégez la clé privée (droits adaptés, lisible par le scheduler BunkerWeb uniquement).</p>
<div class="admonition tip">
<p class="admonition-title">Format</p>
</div>
<p>Les certificats doivent être au format PEM. Convertissez si nécessaire.</p>
<div class="admonition info">
<p class="admonition-title">Chaînes de certification</p>
</div>
<p>Si une chaîne intermédiaire est nécessaire, fournissez le bundle complet dans l’ordre (certificat puis intermédiaires).</p>
<h3 id="exemples_8">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="47:1"><input checked="checked" id="__tabbed_47_1" name="__tabbed_47" type="radio" /><div class="tabbed-labels"><label for="__tabbed_47_1">Fichiers</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="48:1"><input checked="checked" id="__tabbed_48_1" name="__tabbed_48" type="radio" /><div class="tabbed-labels"><label for="__tabbed_48_1">Données base64</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="49:1"><input checked="checked" id="__tabbed_49_1" name="__tabbed_49" type="radio" /><div class="tabbed-labels"><label for="__tabbed_49_1">PEM en clair</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN CERTIFICATE-----</span>
<span class="w">  </span><span class="no">MIIDdzCCAl+gAwIBAgIUJH...certificate content...AAAA</span>
<span class="w">  </span><span class="no">-----END CERTIFICATE-----</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN PRIVATE KEY-----</span>
<span class="w">  </span><span class="no">MIIEvQIBADAN...key content...AAAA</span>
<span class="w">  </span><span class="no">-----END PRIVATE KEY-----</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="50:1"><input checked="checked" id="__tabbed_50_1" name="__tabbed_50" type="radio" /><div class="tabbed-labels"><label for="__tabbed_50_1">Fallback</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...&quot;</span>
</code></pre></div>
<h2 id="dnsbl">DNSBL</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin DNSBL (Domain Name System Blacklist) protège contre les IP malveillantes connues en vérifiant l’adresse IP du client auprès de serveurs DNSBL externes. Cette fonctionnalité aide à se prémunir du spam, des botnets et de diverses menaces en s’appuyant on des listes communautaires d’IP problématiques.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Lorsqu’un client se connecte à votre site, BunkerWeb interroge les serveurs DNSBL que vous avez choisis via le protocole DNS.</li>
<li>La vérification s’effectue en envoyant une requête DNS inversée à chaque serveur DNSBL avec l’IP du client.</li>
<li>Si un serveur DNSBL confirme que l’IP du client est listée comme malveillante, BunkerWeb bannit automatiquement ce client, empêchant les menaces potentielles d’atteindre votre application.</li>
<li>Les résultats sont mis en cache pour améliorer les performances pour les visites répétées depuis la même IP.</li>
<li>Les recherches sont asynchrones pour minimiser l’impact sur le temps de chargement.</li>
</ol>
<h3 id="comment-lutiliser_11">Comment l’utiliser</h3>
<p>Suivez ces étapes pour configurer et utiliser la fonctionnalité DNSBL :</p>
<ol>
<li><strong>Activer la fonction :</strong> La fonction DNSBL est désactivée par défaut. Passez <code>USE_DNSBL</code> à <code>yes</code> pour l'activer.</li>
<li><strong>Configurer les serveurs DNSBL :</strong> Ajoutez les noms de domaine des services DNSBL que vous souhaitez utiliser dans le paramètre <code>DNSBL_LIST</code>.</li>
<li><strong>Appliquer les paramètres :</strong> Une fois configuré, BunkerWeb vérifiera automatiquement les connexions entrantes auprès des serveurs DNSBL spécifiés.</li>
<li><strong>Surveiller l'efficacité :</strong> Consultez la <a href="../web-ui/">web UI</a> pour voir les statistiques des requêtes bloquées par les vérifications DNSBL.</li>
</ol>
<h3 id="parametres-de-configuration_3">Paramètres de configuration</h3>
<p><strong>Général</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_DNSBL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer DNSBL : mettre à <code>yes</code> pour activer les vérifications DNSBL pour les connexions entrantes.</td>
</tr>
<tr>
<td><code>DNSBL_LIST</code></td>
<td><code>bl.blocklist.de sbl.spamhaus.org xbl.spamhaus.org</code></td>
<td>global</td>
<td>non</td>
<td>Serveurs DNSBL : liste des domaines de serveurs DNSBL à vérifier, séparés par des espaces.</td>
</tr>
</tbody>
</table>
<p><strong>Listes d’exception</strong></p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DNSBL_IGNORE_IP</code></td>
<td>``</td>
<td>multisite</td>
<td>oui</td>
<td>IP/CIDR séparés par des espaces pour lesquels ignorer les vérifications DNSBL (liste blanche).</td>
</tr>
<tr>
<td><code>DNSBL_IGNORE_IP_URLS</code></td>
<td>``</td>
<td>multisite</td>
<td>oui</td>
<td>URL séparées par des espaces fournissant des IP/CIDR à ignorer. Supporte <code>http(s)://</code> et <code>file://</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Choisir des serveurs DNSBL</p>
</div>
<p>Choisissez des fournisseurs DNSBL réputés pour minimiser les faux positifs. La liste par défaut inclut des services bien établis qui conviennent à la plupart des sites web :</p>
<pre><code>- **bl.blocklist.de :** Liste les IP qui ont été détectées en train d'attaquer d'autres serveurs.
- **sbl.spamhaus.org :** Se concentre sur les sources de spam et autres activités malveillantes.
- **xbl.spamhaus.org :** Cible les systèmes infectés, tels que les machines compromises ou les proxys ouverts.
</code></pre>
<div class="admonition info">
<p class="admonition-title">Principe de fonctionnement de DNSBL</p>
</div>
<p>Les serveurs DNSBL fonctionnent en répondant à des requêtes DNS spécialement formatées. Lorsque BunkerWeb vérifie une adresse IP, il inverse l'IP et y ajoute le nom de domaine du DNSBL. Si la requête DNS résultante renvoie une réponse de « succès », l'IP est considérée comme étant sur la liste noire.</p>
<div class="admonition warning">
<p class="admonition-title">Considérations sur la performance</p>
</div>
<p>Bien que BunkerWeb optimise les recherches DNSBL pour la performance, l'ajout d'un grand nombre de serveurs DNSBL pourrait potentiellement impacter les temps de réponse. Commencez avec quelques serveurs DNSBL réputés et surveillez la performance avant d'en ajouter d'autres.</p>
<h3 id="exemples-de-configuration_3">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="51:5"><input checked="checked" id="__tabbed_51_1" name="__tabbed_51" type="radio" /><input id="__tabbed_51_2" name="__tabbed_51" type="radio" /><input id="__tabbed_51_3" name="__tabbed_51" type="radio" /><input id="__tabbed_51_4" name="__tabbed_51" type="radio" /><input id="__tabbed_51_5" name="__tabbed_51" type="radio" /><div class="tabbed-labels"><label for="__tabbed_51_1">Configuration de base</label><label for="__tabbed_51_2">Configuration minimale</label><label for="__tabbed_51_3">Exclure des IP de confiance</label><label for="__tabbed_51_4">Utiliser des URL distantes</label><label for="__tabbed_51_5">Utiliser des fichiers locaux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple utilisant les serveurs DNSBL par défaut :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bl.blocklist.de</span><span class="nv"> </span><span class="s">sbl.spamhaus.org</span><span class="nv"> </span><span class="s">xbl.spamhaus.org&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Une configuration minimale se concentrant sur les services DNSBL les plus fiables :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
</code></pre></div>
<p>Cette configuration utilise uniquement :</p>
<ul>
<li><strong>zen.spamhaus.org</strong> : La liste combinée de Spamhaus est souvent considérée comme suffisante en tant que solution autonome en raison de sa large couverture et de sa réputation de précision. Elle combine les listes SBL, XBL et PBL en une seule requête, la rendant efficace et complète.</li>
</ul>
</div>
<div class="tabbed-block">
<p>Vous pouvez exclure certains clients des vérifications DNSBL via des valeurs statiques et/ou des fichiers distants :</p>
<ul>
<li><code>DNSBL_IGNORE_IP</code> : Ajoutez des IP et des plages CIDR séparées par des espaces. Exemple : <code>192.0.2.10 203.0.113.0/24 2001:db8::/32</code>.</li>
<li><code>DNSBL_IGNORE_IP_URLS</code> : Fournissez des URL dont le contenu liste une IP/CIDR par ligne. Les commentaires commençant par <code>#</code> ou <code>;</code> sont ignorés. Les entrées en double sont dédupliquées.</li>
</ul>
<p>Quand une IP cliente correspond à la liste d’exclusion, BunkerWeb saute les requêtes DNSBL et met en cache le résultat « ok » pour accélérer les requêtes suivantes.</p>
</div>
<div class="tabbed-block">
<p>La tâche <code>dnsbl-download</code> télécharge et met en cache les IP à ignorer toutes les heures :</p>
<ul>
<li>Protocoles : <code>https://</code>, <code>http://</code> et chemins locaux <code>file://</code>.</li>
<li>Un cache par URL avec une somme de contrôle empêche les téléchargements redondants (délai de grâce d'1 heure).</li>
<li>Fichier fusionné par service : <code>/var/cache/bunkerweb/dnsbl/&lt;service&gt;/IGNORE_IP.list</code>.</li>
<li>Chargé au démarrage et fusionné avec <code>DNSBL_IGNORE_IP</code>.</li>
</ul>
<p>Exemple combinant des sources statiques et des URL :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.0.0.0/8</span><span class="nv"> </span><span class="s">192.168.0.0/16</span><span class="nv"> </span><span class="s">2001:db8::/32&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://exemple.com/allow-cidrs.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/dnsbl/ignore.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Chargez des IP à ignorer depuis des fichiers locaux en utilisant des URL <code>file://</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///etc/bunkerweb/dnsbl/ignore.txt</span><span class="nv"> </span><span class="s">file:///opt/data/allow-cidrs.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="database">Database</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Base de données fournit une intégration robuste pour BunkerWeb en permettant le stockage centralisé et la gestion des données de configuration, des journaux et d’autres informations essentielles.</p>
<p>Ce composant cœur prend en charge plusieurs moteurs : SQLite, PostgreSQL, MySQL/MariaDB et Oracle, afin de choisir la solution la mieux adaptée à votre environnement et à vos besoins.</p>
<p>Comment ça marche :</p>
<ol>
<li>BunkerWeb se connecte à la base configurée via une URI au format SQLAlchemy.</li>
<li>Les données de configuration critiques, les informations d’exécution et les journaux des jobs sont stockés de manière sécurisée en base.</li>
<li>Des tâches de maintenance automatiques optimisent la base en gérant la croissance et en purgeant les enregistrements excédentaires.</li>
<li>Pour la haute disponibilité, vous pouvez configurer une URI en lecture seule servant de bascule et/ou pour délester les lectures.</li>
<li>Les opérations base de données sont journalisées selon le niveau de log spécifié, offrant la visibilité adaptée.</li>
</ol>
<h3 id="comment-lutiliser_12">Comment l’utiliser</h3>
<p>Étapes pour configurer la base de données :</p>
<ol>
<li>Choisir un moteur : SQLite (par défaut), PostgreSQL, MySQL/MariaDB ou Oracle.</li>
<li>Configurer l’URI : renseignez <code>DATABASE_URI</code> (format SQLAlchemy) pour la base principale.</li>
<li>Optionnel : <code>DATABASE_URI_READONLY</code> pour les opérations en lecture seule ou en secours.</li>
</ol>
<h3 id="parametres_9">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DATABASE_URI</code></td>
<td><code>sqlite:////var/lib/bunkerweb/db.sqlite3</code></td>
<td>global</td>
<td>non</td>
<td>URI principale de connexion (format SQLAlchemy).</td>
</tr>
<tr>
<td><code>DATABASE_URI_READONLY</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>URI optionnelle en lecture seule (offload/HA).</td>
</tr>
<tr>
<td><code>DATABASE_LOG_LEVEL</code></td>
<td><code>warning</code></td>
<td>global</td>
<td>non</td>
<td>Niveau de verbosité des logs DB : <code>debug</code>, <code>info</code>, <code>warn</code>, <code>warning</code>, <code>error</code>.</td>
</tr>
<tr>
<td><code>DATABASE_MAX_JOBS_RUNS</code></td>
<td><code>10000</code></td>
<td>global</td>
<td>non</td>
<td>Nombre max d’entrées de runs de jobs conservées avant purge automatique.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Choix du moteur" - SQLite (défaut) : simple et fichier unique, idéal mono‑nœud/tests. - PostgreSQL : recommandé en production multi‑instances (robustesse, concurrence). - MySQL/MariaDB : alternative solide aux capacités proches de PostgreSQL. - Oracle : adapté aux environnements d’entreprise standardisés sur Oracle.</p>
<p>!!! info "Format SQLAlchemy" - SQLite : <code>sqlite:////chemin/vers/database.sqlite3</code> - PostgreSQL : <code>postgresql://user:password@hôte:port/base</code> - MySQL/MariaDB : <code>mysql://user:password@hôte:port/base</code> ou <code>mariadb://user:password@hôte:port/base</code> - Oracle : <code>oracle://user:password@hôte:port/base</code></p>
<div class="admonition warning">
<p class="admonition-title">Maintenance</p>
</div>
<p>Une tâche quotidienne purge automatiquement les runs de jobs excédentaires selon <code>DATABASE_MAX_JOBS_RUNS</code> pour éviter une croissance illimitée tout en conservant un historique utile.</p>
<h2 id="easy-resolve-pro">Easy Resolve <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides a simpler way to fix false positives in reports.</p>
<h2 id="errors">Errors</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Errors fournit une gestion personnalisable des erreurs HTTP, afin de définir l’apparence des réponses d’erreur pour vos utilisateurs. Vous pouvez ainsi afficher des pages d’erreur claires et cohérentes avec votre identité, plutôt que les pages techniques par défaut du serveur.</p>
<p>Comment ça marche :</p>
<ol>
<li>Quand une erreur HTTP survient (ex. 400, 404, 500), BunkerWeb intercepte la réponse.</li>
<li>À la place de la page par défaut, BunkerWeb affiche une page personnalisée et soignée.</li>
<li>Les pages d’erreur sont configurables : vous pouvez fournir un fichier HTML par code d’erreur. Les fichiers doivent être placés dans le répertoire défini par <code>ROOT_FOLDER</code> (voir le plugin Misc).</li>
<li>Par défaut, <code>ROOT_FOLDER</code> vaut <code>/var/www/html/{server_name}</code>.</li>
<li>En mode multisite, chaque site a son propre <code>ROOT_FOLDER</code> ; placez les pages d’erreur dans le dossier correspondant à chaque site.</li>
<li>Les pages par défaut expliquent clairement le problème et suggèrent des actions possibles.</li>
</ol>
<h3 id="comment-lutiliser_13">Comment l’utiliser</h3>
<ol>
<li>Définir les pages personnalisées : utilisez <code>ERRORS</code> pour associer des codes HTTP à des fichiers HTML (dans <code>ROOT_FOLDER</code>).</li>
<li>Configurer vos pages : utilisez celles de BunkerWeb par défaut ou vos propres fichiers.</li>
<li>Définir les codes interceptés : avec <code>INTERCEPTED_ERROR_CODES</code>, choisissez les codes toujours gérés par BunkerWeb.</li>
<li>Laissez BunkerWeb faire le reste : la gestion d’erreurs sera appliquée automatiquement.</li>
</ol>
<h3 id="parametres_10">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ERRORS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Pages d’erreur personnalisées : paires <code>CODE=/chemin/page.html</code>.</td>
</tr>
<tr>
<td><code>INTERCEPTED_ERROR_CODES</code></td>
<td><code>400 401 403 404 405 413 429 500 501 502 503 504</code></td>
<td>multisite</td>
<td>non</td>
<td>Codes interceptés : liste de codes gérés avec la page par défaut si aucune page personnalisée n’est définie.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Conception des pages</p>
</div>
<p>Les pages par défaut sont claires et pédagogiques : description de l’erreur, causes possibles, actions suggérées et repères visuels.</p>
<p>!!! info "Types d’erreurs" - 4xx (côté client) : requêtes invalides, ressource inexistante, authentification manquante… - 5xx (côté serveur) : impossibilité de traiter une requête valide (erreur interne, indisponibilité temporaire…).</p>
<h3 id="exemples_9">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="52:1"><input checked="checked" id="__tabbed_52_1" name="__tabbed_52" type="radio" /><div class="tabbed-labels"><label for="__tabbed_52_1">Gestion par défaut</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="53:1"><input checked="checked" id="__tabbed_53_1" name="__tabbed_53" type="radio" /><div class="tabbed-labels"><label for="__tabbed_53_1">Pages personnalisées</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404=/custom/404.html</span><span class="nv"> </span><span class="s">500=/custom/500.html&quot;</span>
<span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="54:1"><input checked="checked" id="__tabbed_54_1" name="__tabbed_54" type="radio" /><div class="tabbed-labels"><label for="__tabbed_54_1">Gestion sélective</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404</span><span class="nv"> </span><span class="s">500&quot;</span>
</code></pre></div>
<h2 id="greylist">Greylist</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Greylist adopte une approche flexible : il autorise l’accès aux visiteurs correspondant à des critères donnés tout en maintenant les contrôles de sécurité. Contrairement aux listes noire/blanche, il crée un juste milieu.</p>
<p>Comment ça marche :</p>
<ol>
<li>Vous définissez des critères (IP, réseaux, rDNS, ASN, User‑Agent, motifs d’URI).</li>
<li>Un visiteur qui correspond est autorisé, mais reste soumis aux autres contrôles.</li>
<li>S’il ne correspond à aucun critère greylist, l’accès est refusé.</li>
<li>Des sources externes peuvent alimenter automatiquement la liste.</li>
</ol>
<h3 id="comment-lutiliser_14">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_GREYLIST: yes</code>.</li>
<li>Règles : définissez IP/réseaux, rDNS, ASN, User‑Agent ou URIs.</li>
<li>Sources externes : optionnel, configurez des URLs pour mises à jour.</li>
<li>Suivi : consultez la <a href="../web-ui/">web UI</a>.</li>
</ol>
<p>!!! tip "Comportement d’accès" - Visiteurs greylist : accès autorisé mais contrôles appliqués. - Autres visiteurs : accès refusé.</p>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
</div>
<p>En mode stream, seuls IP, rDNS et ASN sont pris en compte.</p>
<h3 id="parametres_11">Paramètres</h3>
<p>Général</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GREYLIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la greylist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="55:1"><input checked="checked" id="__tabbed_55_1" name="__tabbed_55" type="radio" /><div class="tabbed-labels"><label for="__tabbed_55_1">Adresse IP</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Liste d’IP/réseaux (CIDR) à greylist, séparés par des espaces.</td>
</tr>
<tr>
<td><code>GREYLIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des IP/réseaux à greylist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="56:1"><input checked="checked" id="__tabbed_56_1" name="__tabbed_56" type="radio" /><div class="tabbed-labels"><label for="__tabbed_56_1">Reverse DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suffixes de DNS inversés à greylist.</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Vérifier seulement les IP globales si <code>yes</code>.</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des suffixes rDNS à greylist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="57:1"><input checked="checked" id="__tabbed_57_1" name="__tabbed_57" type="radio" /><div class="tabbed-labels"><label for="__tabbed_57_1">ASN</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Numéros d’AS à greylist (séparés par des espaces).</td>
</tr>
<tr>
<td><code>GREYLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des AS à greylist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="58:1"><input checked="checked" id="__tabbed_58_1" name="__tabbed_58" type="radio" /><div class="tabbed-labels"><label for="__tabbed_58_1">User‑Agent</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs (regex PCRE) d’User‑Agent à greylist.</td>
</tr>
<tr>
<td><code>GREYLIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des motifs d’User‑Agent à greylist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="59:1"><input checked="checked" id="__tabbed_59_1" name="__tabbed_59" type="radio" /><div class="tabbed-labels"><label for="__tabbed_59_1">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs d’URI (regex PCRE) à greylist.</td>
</tr>
<tr>
<td><code>GREYLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des motifs d’URI à greylist.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Format d’URL</p>
</div>
<p>Les paramètres <code>*_URLS</code> supportent HTTP/HTTPS et <code>file:///</code>. Auth basique possible avec <code>http://user:pass@url</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Mises à jour</p>
</div>
<p>Les listes récupérées par URL sont mises à jour automatiquement toutes les heures.</p>
<h2 id="gzip">Gzip</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin GZIP compresse les réponses HTTP avec l’algorithme gzip pour réduire la bande passante et accélérer le chargement des pages.</p>
<h3 id="fonctionnement">Fonctionnement</h3>
<ol>
<li>BunkerWeb détecte si le client supporte gzip.</li>
<li>Si oui, la réponse est compressée au niveau configuré.</li>
<li>Les en‑têtes indiquent l’usage de gzip.</li>
<li>Le navigateur décompresse avant l’affichage.</li>
</ol>
<h3 id="comment-lutiliser_15">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_GZIP: yes</code> (désactivé par défaut).</li>
<li>Types MIME : définir <code>GZIP_TYPES</code>.</li>
<li>Taille minimale : <code>GZIP_MIN_LENGTH</code> pour éviter les très petits fichiers.</li>
<li>Niveau de compression : <code>GZIP_COMP_LEVEL</code> (1–9).</li>
<li>Contenu proxifié : ajuster <code>GZIP_PROXIED</code>.</li>
</ol>
<h3 id="parametres_12">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GZIP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la compression gzip.</td>
</tr>
<tr>
<td><code>GZIP_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>non</td>
<td>Types MIME compressés.</td>
</tr>
<tr>
<td><code>GZIP_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>non</td>
<td>Taille minimale (octets) pour appliquer la compression.</td>
</tr>
<tr>
<td><code>GZIP_COMP_LEVEL</code></td>
<td><code>5</code></td>
<td>multisite</td>
<td>non</td>
<td>Niveau 1–9 : plus haut = meilleure compression mais plus de CPU.</td>
</tr>
<tr>
<td><code>GZIP_PROXIED</code></td>
<td><code>no-cache no-store private expired auth</code></td>
<td>multisite</td>
<td>non</td>
<td>Précise quels contenus proxifiés doivent être compressés selon les en‑têtes de réponse.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Niveau de compression</p>
</div>
<p><code>5</code> est un bon compromis. Statique/CPU dispo : 7–9. Dynamique/CPU limité : 1–3.</p>
<h3 id="exemples_10">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="60:1"><input checked="checked" id="__tabbed_60_1" name="__tabbed_60" type="radio" /><div class="tabbed-labels"><label for="__tabbed_60_1">Basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="61:1"><input checked="checked" id="__tabbed_61_1" name="__tabbed_61" type="radio" /><div class="tabbed-labels"><label for="__tabbed_61_1">Compression maximale</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="62:1"><input checked="checked" id="__tabbed_62_1" name="__tabbed_62" type="radio" /><div class="tabbed-labels"><label for="__tabbed_62_1">Performance équilibrée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no-cache</span><span class="nv"> </span><span class="s">no-store</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">expired&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="63:1"><input checked="checked" id="__tabbed_63_1" name="__tabbed_63" type="radio" /><div class="tabbed-labels"><label for="__tabbed_63_1">Contenu proxifié</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
<h2 id="html-injection">HTML injection</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin d’injection HTML permet d’ajouter du code HTML personnalisé dans les pages de votre site juste avant <code>&lt;/body&gt;</code> ou <code>&lt;/head&gt;</code>. Idéal pour intégrer des scripts d’analytics, pixels de tracking, JS/CSS personnalisés ou des intégrations tierces sans modifier le code source de votre application.</p>
<p>Comment ça marche :</p>
<ol>
<li>À la livraison d’une page, BunkerWeb inspecte la réponse HTML.</li>
<li>Si l’injection « body » est configurée, il insère votre HTML juste avant <code>&lt;/body&gt;</code>.</li>
<li>Si l’injection « head » est configurée, il insère votre HTML juste avant <code>&lt;/head&gt;</code>.</li>
<li>L’insertion s’applique automatiquement à toutes les pages HTML servies.</li>
</ol>
<h3 id="comment-lutiliser_16">Comment l’utiliser</h3>
<ol>
<li>Préparez votre HTML personnalisé.</li>
<li>Choisissez l’emplacement : <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code>, ou les deux.</li>
<li>Renseignez <code>INJECT_HEAD</code> et/ou <code>INJECT_BODY</code> avec votre code.</li>
</ol>
<h3 id="parametres_13">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INJECT_HEAD</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Code HTML injecté avant <code>&lt;/head&gt;</code>.</td>
</tr>
<tr>
<td><code>INJECT_BODY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Code HTML injecté avant <code>&lt;/body&gt;</code>.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Bonnes pratiques" - Placez de préférence les scripts JS en fin de body pour éviter de bloquer le rendu. - Mettez le CSS et le JS critique dans le head pour éviter le flash de contenu non stylé. - Attention au contenu injecté qui pourrait casser le site.</p>
<h3 id="exemples_11">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="64:1"><input checked="checked" id="__tabbed_64_1" name="__tabbed_64" type="radio" /><div class="tabbed-labels"><label for="__tabbed_64_1">Google Analytics</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;script</span><span class="nv"> </span><span class="s">async</span><span class="nv"> </span><span class="s">src=&quot;https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX&quot;&gt;&lt;/script&gt;&lt;script&gt;window.dataLayer</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">window.dataLayer</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">[];function</span><span class="nv"> </span><span class="s">gtag(){dataLayer.push(arguments);}gtag(</span><span class="se">&#39;&#39;</span><span class="s">js</span><span class="se">&#39;&#39;</span><span class="s">,</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">Date());gtag(</span><span class="se">&#39;&#39;</span><span class="s">config</span><span class="se">&#39;&#39;</span><span class="s">,</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">G-XXXXXXXXXX</span><span class="se">&#39;&#39;</span><span class="s">);&lt;/script&gt;&#39;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="65:1"><input checked="checked" id="__tabbed_65_1" name="__tabbed_65" type="radio" /><div class="tabbed-labels"><label for="__tabbed_65_1">Styles personnalisés</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.custom-element</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">blue;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="66:1"><input checked="checked" id="__tabbed_66_1" name="__tabbed_66" type="radio" /><div class="tabbed-labels"><label for="__tabbed_66_1">Intégrations multiples</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.notification-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f8f9fa;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;script</span><span class="nv"> </span><span class="s">src=&quot;https://cdn.example.com/js/widget.js&quot;&gt;&lt;/script&gt;&lt;script&gt;initializeWidget(</span><span class="se">&#39;&#39;</span><span class="s">your-api-key</span><span class="se">&#39;&#39;</span><span class="s">);&lt;/script&gt;&#39;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="67:1"><input checked="checked" id="__tabbed_67_1" name="__tabbed_67" type="radio" /><div class="tabbed-labels"><label for="__tabbed_67_1">Bandeau cookies</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;.cookie-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">position:</span><span class="nv"> </span><span class="s">fixed;</span><span class="nv"> </span><span class="s">bottom:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">left:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">right:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f1f1f1;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">z-index:</span><span class="nv"> </span><span class="s">1000;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.cookie-banner</span><span class="nv"> </span><span class="s">button</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#4CAF50;</span><span class="nv"> </span><span class="s">border:</span><span class="nv"> </span><span class="s">none;</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">white;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">cursor:</span><span class="nv"> </span><span class="s">pointer;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;div</span><span class="nv"> </span><span class="s">id=&quot;cookie-banner&quot;</span><span class="nv"> </span><span class="s">class=&quot;cookie-banner&quot;&gt;This</span><span class="nv"> </span><span class="s">website</span><span class="nv"> </span><span class="s">uses</span><span class="nv"> </span><span class="s">cookies</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">get</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">best</span><span class="nv"> </span><span class="s">experience.</span><span class="nv"> </span><span class="s">&lt;button</span><span class="nv"> </span><span class="s">onclick=&quot;acceptCookies()&quot;&gt;Accept&lt;/button&gt;&lt;/div&gt;&lt;script&gt;function</span><span class="nv"> </span><span class="s">acceptCookies()</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(</span><span class="se">&#39;&#39;</span><span class="s">cookie-banner</span><span class="se">&#39;&#39;</span><span class="s">).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">none</span><span class="se">&#39;&#39;</span><span class="s">;</span><span class="nv"> </span><span class="s">localStorage.setItem(</span><span class="se">&#39;&#39;</span><span class="s">cookies-accepted</span><span class="se">&#39;&#39;</span><span class="s">,</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">true</span><span class="se">&#39;&#39;</span><span class="s">);</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">if(localStorage.getItem(</span><span class="se">&#39;&#39;</span><span class="s">cookies-accepted</span><span class="se">&#39;&#39;</span><span class="s">)</span><span class="nv"> </span><span class="s">===</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">true</span><span class="se">&#39;&#39;</span><span class="s">)</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(</span><span class="se">&#39;&#39;</span><span class="s">cookie-banner</span><span class="se">&#39;&#39;</span><span class="s">).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">none</span><span class="se">&#39;&#39;</span><span class="s">;</span><span class="nv"> </span><span class="s">}&lt;/script&gt;&#39;</span>
</code></pre></div>
<h2 id="headers">Headers</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Les en-têtes HTTP jouent un rôle crucial dans la sécurité. Le plugin Headers offre une gestion robuste des en-têtes HTTP standards et personnalisés, améliorant ainsi la sécurité et les fonctionnalités. Il applique dynamiquement des mesures de sécurité, telles que <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Strict-Transport-Security">HSTS</a>, <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Content-Security-Policy">CSP</a> (y compris un mode de rapport seul), et l'injection d'en-têtes personnalisés, tout en empêchant les fuites d'informations.</p>
<p><strong>Comment ça marche</strong></p>
<ol>
<li>Lorsqu'un client demande du contenu depuis votre site web, BunkerWeb traite les en-têtes de la réponse.</li>
<li>Les en-têtes de sécurité sont appliqués conformément à votre configuration.</li>
<li>Des en-têtes personnalisés peuvent être ajoutés pour fournir des informations ou des fonctionnalités supplémentaires aux clients.</li>
<li>Les en-têtes indésirables qui pourraient révéler des informations sur le serveur sont automatiquement supprimés.</li>
<li>Les cookies sont modifiés pour inclure les attributs de sécurité appropriés en fonction de vos paramètres.</li>
<li>Les en-têtes des serveurs en amont peuvent être préservés de manière sélective lorsque cela est nécessaire.</li>
</ol>
<h3 id="comment-lutiliser_17">Comment l’utiliser</h3>
<p>Suivez ces étapes pour configurer et utiliser la fonctionnalité Headers :</p>
<ol>
<li><strong>Configurer les en-têtes de sécurité :</strong> Définissez des valeurs pour les en-têtes courants.</li>
<li><strong>Ajouter des en-têtes personnalisés :</strong> Définissez les en-têtes personnalisés à l'aide du paramètre <code>CUSTOM_HEADER</code>.</li>
<li><strong>Supprimer les en-têtes indésirables :</strong> Utilisez <code>REMOVE_HEADERS</code> pour vous assurer que les en-têtes qui pourraient exposer des détails sur le serveur sont supprimés.</li>
<li><strong>Définir la sécurité des cookies :</strong> Activez une sécurité robuste des cookies en configurant <code>COOKIE_FLAGS</code> et en réglant <code>COOKIE_AUTO_SECURE_FLAG</code> sur <code>yes</code> pour que l'attribut Secure soit automatiquement ajouté sur les connexions HTTPS.</li>
<li><strong>Préserver les en-têtes en amont :</strong> Spécifiez les en-têtes en amont à conserver en utilisant <code>KEEP_UPSTREAM_HEADERS</code>.</li>
<li><strong>Tirer parti de l'application conditionnelle des en-têtes :</strong> Si vous souhaitez tester des politiques sans interruption, activez le mode <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only">CSP Report-Only</a> via <code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code>.</li>
</ol>
<h3 id="guide-de-configuration">Guide de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="68:3"><input checked="checked" id="__tabbed_68_1" name="__tabbed_68" type="radio" /><input id="__tabbed_68_2" name="__tabbed_68" type="radio" /><input id="__tabbed_68_3" name="__tabbed_68" type="radio" /><div class="tabbed-labels"><label for="__tabbed_68_1">En-têtes de sécurité</label><label for="__tabbed_68_2">Paramètres des cookies</label><label for="__tabbed_68_3">En-têtes personnalisés</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Aperçu</strong></p>
<p>Les en-têtes de sécurité renforcent la communication sécurisée, restreignent le chargement des ressources et préviennent les attaques comme le clickjacking et l'injection. Des en-têtes correctement configurés créent une couche de défense robuste pour votre site web.</p>
<div class="admonition success">
<p class="admonition-title">Avantages des en-têtes de sécurité</p>
<ul>
<li><strong>HSTS :</strong> Assure que toutes les connexions sont chiffrées, protégeant contre les attaques de rétrogradation de protocole.</li>
<li><strong>CSP :</strong> Empêche l'exécution de scripts malveillants, réduisant le risque d'attaques XSS.</li>
<li><strong>X-Frame-Options :</strong> Bloque les tentatives de clickjacking en contrôlant l'intégration des iframes.</li>
<li><strong>Referrer Policy :</strong> Limite les fuites d'informations sensibles via les en-têtes referrer.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>STRICT_TRANSPORT_SECURITY</code></td>
<td><code>max-age=63072000; includeSubDomains; preload</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>HSTS :</strong> Force les connexions HTTPS sécurisées, réduisant les risques d'attaques de type "man-in-the-middle".</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY</code></td>
<td><code>object-src 'none'; form-action 'self'; frame-ancestors 'self';</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>CSP :</strong> Restreint le chargement des ressources aux sources de confiance, atténuant les attaques de type cross-site scripting et d'injection de données.</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Mode rapport CSP :</strong> Signale les violations sans bloquer le contenu, aidant à tester les politiques de sécurité tout en capturant les journaux.</td>
</tr>
<tr>
<td><code>X_FRAME_OPTIONS</code></td>
<td><code>SAMEORIGIN</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>X-Frame-Options :</strong> Empêche le clickjacking en contrôlant si votre site peut être intégré dans une frame.</td>
</tr>
<tr>
<td><code>X_CONTENT_TYPE_OPTIONS</code></td>
<td><code>nosniff</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>X-Content-Type-Options :</strong> Empêche les navigateurs de "MIME-sniffer", protégeant contre les attaques de type "drive-by download".</td>
</tr>
<tr>
<td><code>X_DNS_PREFETCH_CONTROL</code></td>
<td><code>off</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>X-DNS-Prefetch-Control :</strong> Régule le préchargement DNS pour réduire les requêtes réseau involontaires et améliorer la confidentialité.</td>
</tr>
<tr>
<td><code>REFERRER_POLICY</code></td>
<td><code>strict-origin-when-cross-origin</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Politique de Referrer :</strong> Contrôle la quantité d'informations de référent envoyées, protégeant la vie privée de l'utilisateur.</td>
</tr>
<tr>
<td><code>PERMISSIONS_POLICY</code></td>
<td><code>accelerometer=(), ambient-light-sensor=(), attribution-reporting=(), autoplay=(), battery=(), ...</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Politique de permissions :</strong> Restreint l'accès aux fonctionnalités du navigateur, réduisant les vecteurs d'attaque potentiels.</td>
</tr>
<tr>
<td><code>KEEP_UPSTREAM_HEADERS</code></td>
<td><code>Content-Security-Policy Permissions-Policy X-Frame-Options</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Conserver les en-têtes :</strong> Préserve les en-têtes en amont sélectionnés, facilitant l'intégration héritée tout en maintenant la sécurité.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Révisez et mettez à jour régulièrement vos en-têtes de sécurité pour vous conformer aux normes de sécurité en constante évolution.</li>
<li>Utilisez des outils comme <a href="https://observatory.mozilla.org/">Mozilla Observatory</a> pour valider la configuration de vos en-têtes.</li>
<li>Testez la CSP en mode <code>Report-Only</code> avant de l'appliquer pour éviter de casser des fonctionnalités.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Aperçu</strong></p>
<p>Des paramètres de cookies appropriés garantissent la sécurité des sessions utilisateur en empêchant le détournement, la fixation et le cross-site scripting. Les cookies sécurisés maintiennent l'intégrité de la session sur HTTPS et améliorent la protection globale des données des utilisateurs.</p>
<div class="admonition success">
<p class="admonition-title">Avantages des cookies sécurisés</p>
<ul>
<li><strong>Attribut HttpOnly :</strong> Empêche les scripts côté client d'accéder aux cookies, atténuant les risques XSS.</li>
<li><strong>Attribut SameSite :</strong> Réduit les attaques CSRF en restreignant l'utilisation des cookies inter-origines.</li>
<li><strong>Attribut Secure :</strong> Assure que les cookies ne sont transmis que sur des connexions HTTPS chiffrées.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COOKIE_FLAGS</code></td>
<td><code>* HttpOnly SameSite=Lax</code></td>
<td>multisite</td>
<td>oui</td>
<td><strong>Attributs de cookie :</strong> Ajoute automatiquement des attributs de sécurité tels que HttpOnly et SameSite, protégeant les cookies de l'accès par des scripts côté client et des attaques CSRF.</td>
</tr>
<tr>
<td><code>COOKIE_AUTO_SECURE_FLAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Attribut Secure automatique :</strong> Assure que les cookies ne sont envoyés que sur des connexions HTTPS sécurisées en ajoutant automatiquement l'attribut Secure.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Utilisez <code>SameSite=Strict</code> pour les cookies sensibles afin d'empêcher l'accès inter-origines.</li>
<li>Auditez régulièrement vos paramètres de cookies pour assurer la conformité avec les réglementations de sécurité et de confidentialité.</li>
<li>Évitez de définir des cookies sans l'attribut Secure dans les environnements de production.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Aperçu</strong></p>
<p>Les en-têtes personnalisés vous permettent d'ajouter des en-têtes HTTP spécifiques pour répondre aux exigences de l'application ou de performance. Ils offrent de la flexibilité mais doivent être configurés avec soin pour éviter d'exposer des détails sensibles du serveur.</p>
<div class="admonition success">
<p class="admonition-title">Avantages des en-têtes personnalisés</p>
<ul>
<li>Améliorez la sécurité en supprimant les en-têtes inutiles qui pourraient divulguer des détails sur le serveur.</li>
<li>Ajoutez des en-têtes spécifiques à l'application pour améliorer la fonctionnalité ou le débogage.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CUSTOM_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td><strong>En-tête personnalisé :</strong> Permet d'ajouter des en-têtes définis par l'utilisateur au format NomEnTete: ValeurEnTete pour des améliorations de sécurité ou de performance spécialisées.</td>
</tr>
<tr>
<td><code>REMOVE_HEADERS</code></td>
<td><code>Server Expect-CT X-Powered-By X-AspNet-Version X-AspNetMvc-Version Public-Key-Pins</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Supprimer les en-têtes :</strong> Spécifie les en-têtes à supprimer, réduisant ainsi le risque d'exposer des détails internes du serveur et des vulnérabilités connues.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Considérations de sécurité</p>
<ul>
<li>Évitez d'exposer des informations sensibles via des en-têtes personnalisés.</li>
<li>Révisez et mettez à jour régulièrement les en-têtes personnalisés pour les aligner sur les exigences de votre application.</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Utilisez <code>REMOVE_HEADERS</code> pour supprimer les en-têtes comme <code>Server</code> et <code>X-Powered-By</code> afin de réduire les risques de prise d'empreintes.</li>
<li>Testez les en-têtes personnalisés dans un environnement de pré-production avant de les déployer en production.</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="exemples-de-configuration_4">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="69:4"><input checked="checked" id="__tabbed_69_1" name="__tabbed_69" type="radio" /><input id="__tabbed_69_2" name="__tabbed_69" type="radio" /><input id="__tabbed_69_3" name="__tabbed_69" type="radio" /><input id="__tabbed_69_4" name="__tabbed_69" type="radio" /><div class="tabbed-labels"><label for="__tabbed_69_1">En-têtes de sécurité de base</label><label for="__tabbed_69_2">Sécurité des cookies renforcée</label><label for="__tabbed_69_3">En-têtes personnalisés pour API</label><label for="__tabbed_69_4">Content Security Policy - Mode rapport</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration standard avec les en-têtes de sécurité essentiels :</p>
<div class="highlight"><pre><span></span><code><span class="nt">STRICT_TRANSPORT_SECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max-age=63072000;</span><span class="nv"> </span><span class="s">includeSubDomains;</span><span class="nv"> </span><span class="s">preload&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;&quot;</span>
<span class="nt">X_FRAME_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SAMEORIGIN&quot;</span>
<span class="nt">X_CONTENT_TYPE_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nosniff&quot;</span>
<span class="nt">REFERRER_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;strict-origin-when-cross-origin&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec des paramètres de sécurité des cookies robustes :</p>
<div class="highlight"><pre><span></span><code><span class="nt">COOKIE_FLAGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict</span><span class="nv"> </span><span class="s">Max-Age=3600&quot;</span>
<span class="nt">COOKIE_AUTO_SECURE_FLAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour un service API avec des en-têtes personnalisés :</p>
<div class="highlight"><pre><span></span><code><span class="nt">CUSTOM_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API-Version:</span><span class="nv"> </span><span class="s">1.2.3&quot;</span>
<span class="nt">CUSTOM_HEADER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Max-Age:</span><span class="nv"> </span><span class="s">86400&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;none&#39;&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version</span><span class="nv"> </span><span class="s">X-Runtime&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour tester la CSP sans casser les fonctionnalités :</p>
<div class="highlight"><pre><span></span><code><span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">img-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">https://*.example.com;</span><span class="nv"> </span><span class="s">style-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">&#39;unsafe-inline&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">connect-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://api.example.com;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">form-action</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">base-uri</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">report-uri</span><span class="nv"> </span><span class="s">https://example.com/csp-reports&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY_REPORT_ONLY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="lets-encrypt">Let's Encrypt</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Let’s Encrypt simplifie la gestion des certificats SSL/TLS en automatisant la création, le renouvellement et la configuration de certificats gratuits de Let's Encrypt. Cette fonctionnalité active les connexions HTTPS sécurisées pour vos sites web sans la complexité de la gestion manuelle des certificats, réduisant ainsi les coûts et la charge administrative.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Une fois activé, BunkerWeb détecte automatiquement les domaines configurés pour votre site.</li>
<li>BunkerWeb demande des certificats SSL/TLS gratuits à l'autorité de certification de Let's Encrypt.</li>
<li>La propriété du domaine est vérifiée par des défis HTTP (prouvant que vous contrôlez le site) ou des défis DNS (prouvant que vous contrôlez le DNS de votre domaine).</li>
<li>Les certificats sont automatiquement installés et configurés pour vos domaines.</li>
<li>BunkerWeb gère les renouvellements de certificats en arrière-plan avant leur expiration, assurant une disponibilité HTTPS continue.</li>
<li>L'ensemble du processus est entièrement automatisé, ne nécessitant qu'une intervention minimale après la configuration initiale.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Prérequis</p>
</div>
<p>Pour utiliser cette fonctionnalité, assurez-vous que des enregistrements DNS <strong>A</strong> corrects sont configurés pour chaque domaine, pointant vers la ou les IP publiques où BunkerWeb est accessible. Sans une configuration DNS correcte, le processus de vérification de domaine échouera.</p>
<h3 id="comment-lutiliser_18">Comment l’utiliser</h3>
<p>Suivez ces étapes pour configurer et utiliser la fonctionnalité Let's Encrypt :</p>
<ol>
<li><strong>Activer la fonctionnalité :</strong> Mettez le paramètre <code>AUTO_LETS_ENCRYPT</code> à <code>yes</code> pour activer l'émission et le renouvellement automatiques des certificats.</li>
<li><strong>Fournir un e-mail de contact :</strong> Saisissez votre adresse e-mail dans le paramètre <code>EMAIL_LETS_ENCRYPT</code> pour recevoir les notifications importantes concernant vos certificats.</li>
<li><strong>Choisir le type de défi :</strong> Sélectionnez la vérification <code>http</code> ou <code>dns</code> avec le paramètre <code>LETS_ENCRYPT_CHALLENGE</code>.</li>
<li><strong>Configurer le fournisseur DNS :</strong> Si vous utilisez les défis DNS, spécifiez votre fournisseur DNS et vos identifiants.</li>
<li><strong>Sélectionner un profil de certificat :</strong> Choisissez votre profil de certificat préféré avec le paramètre <code>LETS_ENCRYPT_PROFILE</code> (classic, tlsserver ou shortlived).</li>
<li><strong>Laissez BunkerWeb s'occuper du reste :</strong> Une fois configuré, les certificats sont automatiquement émis, installés et renouvelés selon les besoins.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Profils de certificat</p>
</div>
<p>Let's Encrypt propose différents profils de certificat pour différents cas d'usage : - <strong>classic</strong> : Certificats à usage général avec une validité de 90 jours (par défaut) - <strong>tlsserver</strong> : Optimisé pour l'authentification de serveur TLS avec une validité de 90 jours et une charge utile plus petite - <strong>shortlived</strong> : Sécurité renforcée avec une validité de 7 jours pour les environnements automatisés - <strong>custom</strong> : Si votre serveur ACME prend en charge un profil différent, définissez-le avec <code>LETS_ENCRYPT_CUSTOM_PROFILE</code>.</p>
<div class="admonition info">
<p class="admonition-title">Disponibilité des profils</p>
</div>
<p>Notez que les profils <code>tlsserver</code> et <code>shortlived</code> peuvent ne pas être disponibles dans tous les environnements ou avec tous les clients ACME pour le moment. Le profil <code>classic</code> a la compatibilité la plus large et est recommandé pour la plupart des utilisateurs. Si un profil sélectionné n'est pas disponible, le système basculera automatiquement sur le profil <code>classic</code>.</p>
<h3 id="parametres-de-configuration_4">Paramètres de configuration</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTO_LETS_ENCRYPT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer Let's Encrypt :</strong> Mettre à <code>yes</code> pour activer l'émission et le renouvellement automatiques des certificats.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PASSTHROUGH</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Passer à travers Let's Encrypt :</strong> Mettre à <code>yes</code> pour passer les requêtes Let's Encrypt au serveur web. Utile si BunkerWeb est derrière un autre reverse proxy gérant le SSL.</td>
</tr>
<tr>
<td><code>EMAIL_LETS_ENCRYPT</code></td>
<td><code>contact@{FIRST_SERVER}</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>E-mail de contact :</strong> Adresse e-mail utilisée pour les notifications Let's Encrypt et incluse dans les certificats.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CHALLENGE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Type de défi :</strong> Méthode utilisée pour vérifier la propriété du domaine. Options : <code>http</code> ou <code>dns</code>.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROVIDER</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Fournisseur DNS :</strong> Pour les défis DNS, le fournisseur à utiliser (ex. : cloudflare, route53, digitalocean).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROPAGATION</code></td>
<td><code>default</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Propagation DNS :</strong> Le temps d'attente en secondes pour la propagation DNS. Si aucune valeur n'est fournie, le temps par défaut du fournisseur est utilisé.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Élément d'identification :</strong> Éléments de configuration pour l'authentification du fournisseur DNS (ex. : <code>cloudflare_api_token 123456</code>). Les valeurs peuvent être du texte brut, encodées en base64 ou un objet JSON.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_WILDCARD</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Certificats Wildcard :</strong> Si mis à <code>yes</code>, crée des certificats wildcard pour tous les domaines. Uniquement disponible avec les défis DNS.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_STAGING</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utiliser Staging :</strong> Si mis à <code>yes</code>, utilise l'environnement de staging de Let's Encrypt pour les tests. Les limites de débit y sont plus élevées mais les certificats ne sont pas fiables.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CLEAR_OLD_CERTS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Effacer les anciens certificats :</strong> Si mis à <code>yes</code>, supprime les anciens certificats inutiles lors du renouvellement.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PROFILE</code></td>
<td><code>classic</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Profil de certificat :</strong> Sélectionnez le profil à utiliser. Options : <code>classic</code> (général), <code>tlsserver</code> (optimisé TLS), ou <code>shortlived</code> (7 jours).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CUSTOM_PROFILE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Profil de certificat personnalisé :</strong> Saisissez un profil personnalisé si votre serveur ACME le supporte. Remplace <code>LETS_ENCRYPT_PROFILE</code> s'il est défini.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_MAX_RETRIES</code></td>
<td><code>3</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tentatives maximales :</strong> Nombre de tentatives de génération de certificat en cas d'échec. <code>0</code> pour désactiver. Utile pour les problèmes réseau temporaires.</td>
</tr>
</tbody>
</table>
<p>!!! info "Information et comportement" - Le paramètre <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> est un paramètre multiple et peut être utilisé pour définir plusieurs éléments pour le fournisseur DNS. Les éléments seront enregistrés dans un fichier de cache, et Certbot lira les informations d'identification à partir de celui-ci. - Si aucun paramètre <code>LETS_ENCRYPT_DNS_PROPAGATION</code> n'est fourni, le temps de propagation par défaut du fournisseur est utilisé. - L'automatisation complète de Let's Encrypt avec le défi <code>http</code> fonctionne en mode stream tant que vous ouvrez le port <code>80/tcp</code> depuis l'extérieur. Utilisez le paramètre <code>LISTEN_STREAM_PORT_SSL</code> pour choisir votre port d'écoute SSL/TLS. - Si <code>LETS_ENCRYPT_PASSTHROUGH</code> est mis à <code>yes</code>, BunkerWeb ne gérera pas les requêtes de défi ACME lui-même mais les transmettra au serveur web backend. Ceci est utile dans les scénarios où BunkerWeb agit comme un reverse proxy devant un autre serveur configuré pour gérer les défis Let's Encrypt.</p>
<div class="admonition tip">
<p class="admonition-title">Défis HTTP vs. DNS</p>
</div>
<p><strong>Les défis HTTP</strong> sont plus simples à configurer et fonctionnent bien pour la plupart des sites web :</p>
<pre><code>- Nécessite que votre site soit publiquement accessible sur le port 80
- Configuré automatiquement par BunkerWeb
- Ne peut pas être utilisé pour les certificats wildcard

**Les défis DNS** offrent plus de flexibilité et sont requis pour les certificats wildcard :

- Fonctionne même si votre site n'est pas publiquement accessible
- Nécessite les identifiants de l'API de votre fournisseur DNS
- Requis pour les certificats wildcard (ex. : *.example.com)
- Utile lorsque le port 80 est bloqué ou indisponible
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Certificats wildcard</p>
</div>
<p>Les certificats wildcard ne sont disponibles qu'avec les défis DNS. Si vous souhaitez les utiliser, vous devez mettre le paramètre <code>USE_LETS_ENCRYPT_WILDCARD</code> à <code>yes</code> et configurer correctement les identifiants de votre fournisseur DNS.</p>
<div class="admonition warning">
<p class="admonition-title">Limites de débit</p>
</div>
<p>Let's Encrypt impose des limites de débit sur l'émission de certificats. Lors du test de configurations, utilisez l'environnement de staging en mettant <code>USE_LETS_ENCRYPT_STAGING</code> à <code>yes</code> pour éviter d'atteindre les limites de production. Les certificats de staging ne sont pas reconnus par les navigateurs mais sont utiles pour valider votre configuration.</p>
<h3 id="fournisseurs-dns-supportes">Fournisseurs DNS supportés</h3>
<p>Le plugin Let's Encrypt prend en charge un large éventail de fournisseurs DNS pour les défis DNS. Chaque fournisseur nécessite des informations d'identification spécifiques qui doivent être fournies via le paramètre <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code>.</p>
<table>
<thead>
<tr>
<th>Fournisseur</th>
<th>Description</th>
<th>Paramètres obligatoires</th>
<th>Paramètres optionnels</th>
<th>Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bunny</code></td>
<td>bunny.net</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://github.com/mwt/certbot-dns-bunny/blob/main/README.rst">Documentation</a></td>
</tr>
<tr>
<td><code>cloudflare</code></td>
<td>Cloudflare</td>
<td>soit <code>api_token</code><br>soit <code>email</code> et <code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-cloudflare.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>desec</code></td>
<td>deSEC</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/desec-io/certbot-dns-desec/blob/main/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>digitalocean</code></td>
<td>DigitalOcean</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-digitalocean.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>domainoffensive</code></td>
<td>Domain-Offensive</td>
<td><code>api_token</code></td>
<td></td>
<td><a href="https://github.com/domainoffensive/certbot-dns-domainoffensive/blob/master/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>dnsimple</code></td>
<td>DNSimple</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsimple.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>dnsmadeeasy</code></td>
<td>DNS Made Easy</td>
<td><code>api_key</code><br><code>secret_key</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsmadeeasy.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>dynu</code></td>
<td>Dynu</td>
<td><code>auth_token</code></td>
<td></td>
<td><a href="https://github.com/bikram990/certbot-dns-dynu/blob/main/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>gehirn</code></td>
<td>Gehirn DNS</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-gehirn.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>google</code></td>
<td>Google Cloud</td>
<td><code>project_id</code><br><code>private_key_id</code><br><code>private_key</code><br><code>client_email</code><br><code>client_id</code><br><code>client_x509_cert_url</code></td>
<td><code>type</code> (défaut : <code>service_account</code>)<br><code>auth_uri</code> (défaut : <code>https://accounts.google.com/o/oauth2/auth</code>)<br><code>token_uri</code> (défaut : <code>https://accounts.google.com/o/oauth2/token</code>)<br><code>auth_provider_x509_cert_url</code> (défaut : <code>https://www.googleapis.com/oauth2/v1/certs</code>)</td>
<td><a href="https://certbot-dns-google.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>infomaniak</code></td>
<td>Infomaniak</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/infomaniak/certbot-dns-infomaniak/blob/main/README.rst">Documentation</a></td>
</tr>
<tr>
<td><code>ionos</code></td>
<td>IONOS</td>
<td><code>prefix</code><br><code>secret</code></td>
<td><code>endpoint</code> (défaut : <code>https://api.hosting.ionos.com</code>)</td>
<td><a href="https://github.com/helgeerbe/certbot-dns-ionos/blob/master/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>linode</code></td>
<td>Linode</td>
<td><code>key</code></td>
<td></td>
<td><a href="https://certbot-dns-linode.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>luadns</code></td>
<td>LuaDNS</td>
<td><code>email</code><br><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-luadns.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>njalla</code></td>
<td>Njalla</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/chaptergy/certbot-dns-njalla/blob/main/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>nsone</code></td>
<td>NS1</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-nsone.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>ovh</code></td>
<td>OVH</td>
<td><code>application_key</code><br><code>application_secret</code><br><code>consumer_key</code></td>
<td><code>endpoint</code> (défaut : <code>ovh-eu</code>)</td>
<td><a href="https://certbot-dns-ovh.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>rfc2136</code></td>
<td>RFC 2136</td>
<td><code>server</code><br><code>name</code><br><code>secret</code></td>
<td><code>port</code> (défaut : <code>53</code>)<br><code>algorithm</code> (défaut : <code>HMAC-SHA512</code>)<br><code>sign_query</code> (défaut : <code>false</code>)</td>
<td><a href="https://certbot-dns-rfc2136.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>route53</code></td>
<td>Amazon Route 53</td>
<td><code>access_key_id</code><br><code>secret_access_key</code></td>
<td></td>
<td><a href="https://certbot-dns-route53.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>sakuracloud</code></td>
<td>Sakura Cloud</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-sakuracloud.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>scaleway</code></td>
<td>Scaleway</td>
<td><code>application_token</code></td>
<td></td>
<td><a href="https://github.com/vanonox/certbot-dns-scaleway/blob/main/README.rst">Documentation</a></td>
</tr>
</tbody>
</table>
<h3 id="exemples-de-configuration_5">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="70:6"><input checked="checked" id="__tabbed_70_1" name="__tabbed_70" type="radio" /><input id="__tabbed_70_2" name="__tabbed_70" type="radio" /><input id="__tabbed_70_3" name="__tabbed_70" type="radio" /><input id="__tabbed_70_4" name="__tabbed_70" type="radio" /><input id="__tabbed_70_5" name="__tabbed_70" type="radio" /><input id="__tabbed_70_6" name="__tabbed_70" type="radio" /><div class="tabbed-labels"><label for="__tabbed_70_1">Défi HTTP de base</label><label for="__tabbed_70_2">DNS Cloudflare avec Wildcard</label><label for="__tabbed_70_3">Configuration AWS Route53</label><label for="__tabbed_70_4">Test avec l'environnement de Staging et tentatives</label><label for="__tabbed_70_5">DigitalOcean avec temps de propagation personnalisé</label><label for="__tabbed_70_6">Google Cloud DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuration simple utilisant les défis HTTP pour un seul domaine :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour les certificats wildcard utilisant le DNS de Cloudflare :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cloudflare&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api_token</span><span class="nv"> </span><span class="s">VOTRE_JETON_API&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_WILDCARD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant Amazon Route53 pour les défis DNS :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;route53&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_access_key_id</span><span class="nv"> </span><span class="s">VOTRE_CLE_ACCES&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_secret_access_key</span><span class="nv"> </span><span class="s">VOTRE_CLE_SECRETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour tester la configuration avec l'environnement de staging et des paramètres de tentatives améliorés :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_STAGING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LETS_ENCRYPT_MAX_RETRIES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant le DNS de DigitalOcean avec un temps d'attente de propagation plus long :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;digitalocean&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;token</span><span class="nv"> </span><span class="s">VOTRE_JETON_API&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROPAGATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant Google Cloud DNS avec les informations d'identification d'un compte de service :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;google&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;project_id</span><span class="nv"> </span><span class="s">votre-id-projet&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key_id</span><span class="nv"> </span><span class="s">votre-id-cle-privee&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key</span><span class="nv"> </span><span class="s">votre-cle-privee&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_email</span><span class="nv"> </span><span class="s">votre-email-compte-service&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_5</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_id</span><span class="nv"> </span><span class="s">votre-id-client&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_6</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_x509_cert_url</span><span class="nv"> </span><span class="s">votre-url-cert&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="limit">Limit</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Limit permet d’appliquer des politiques de limitation pour garantir un usage équitable et protéger vos ressources contre les abus, les attaques par déni de service (DoS) et la surconsommation. Ces politiques incluent :</p>
<ul>
<li><strong>Le nombre de connexions simultanées par adresse IP</strong> (support STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" />)</li>
<li><strong>Le nombre de requêtes par adresse IP et par URL sur une période donnée</strong> (support STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" />)</li>
</ul>
<h3 id="fonctionnement_1">Fonctionnement</h3>
<ol>
<li><strong>Limitation de débit :</strong> Suit le nombre de requêtes de chaque adresse IP cliente vers des URL spécifiques. Si un client dépasse la limite de débit configurée, les requêtes suivantes sont temporairement refusées.</li>
<li><strong>Limitation de connexions :</strong> Surveille et restreint le nombre de connexions simultanées de chaque adresse IP cliente. Différentes limites de connexion peuvent être appliquées en fonction du protocole utilisé (HTTP/1, HTTP/2, HTTP/3 ou stream).</li>
<li>Dans les deux cas, les clients qui dépassent les limites définies reçoivent un code de statut HTTP <strong>« 429 - Too Many Requests »</strong>, ce qui aide à prévenir la surcharge du serveur.</li>
</ol>
<h3 id="utilisation">Utilisation</h3>
<ol>
<li><strong>Activer la limitation de débit de requêtes :</strong> Utilisez <code>USE_LIMIT_REQ</code> pour activer la limitation de débit de requêtes et définissez des motifs d'URL avec leurs limites correspondantes.</li>
<li><strong>Activer la limitation de connexions :</strong> Utilisez <code>USE_LIMIT_CONN</code> pour activer la limitation de connexions et définissez le nombre maximum de connexions simultanées pour différents protocoles.</li>
<li><strong>Appliquer un contrôle granulaire :</strong> Créez plusieurs règles de limitation de débit pour différentes URL afin de fournir des niveaux de protection variés sur votre site.</li>
<li><strong>Suivre l'efficacité :</strong> Utilisez l'<a href="../web-ui/">interface web</a> pour consulter les statistiques sur les requêtes et les connexions limitées.</li>
</ol>
<h3 id="parametres_14">Paramètres</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="71:1"><input checked="checked" id="__tabbed_71_1" name="__tabbed_71" type="radio" /><div class="tabbed-labels"><label for="__tabbed_71_1">Limitation de requêtes</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_REQ</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer la limitation de requêtes :</strong> Mettre à <code>yes</code> pour activer la fonctionnalité de limitation de débit par requêtes.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>oui</td>
<td><strong>Motif d’URL :</strong> Motif d’URL (regex PCRE) auquel la limite de débit sera appliquée ; utilisez <code>/</code> pour l'appliquer à toutes les requêtes.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_RATE</code></td>
<td><code>2r/s</code></td>
<td>multisite</td>
<td>oui</td>
<td><strong>Limite de débit :</strong> Taux de requêtes maximal au format <code>Nr/t</code>, où N est le nombre de requêtes et t est l'unité de temps : s (seconde), m (minute), h (heure), ou d (jour).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Format de la limitation de débit</p>
</div>
<p>Le format de la limite de débit est spécifié comme <code>Nr/t</code> où :</p>
<pre><code>- `N` est le nombre de requêtes autorisées
- `r` est la lettre littérale 'r' (pour 'requêtes')
- `/` est une barre oblique littérale
- `t` est l'unité de temps : `s` (seconde), `m` (minute), `h` (heure), ou `d` (jour)

Par exemple, `5r/m` signifie que 5 requêtes par minute sont autorisées pour chaque adresse IP.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="72:1"><input checked="checked" id="__tabbed_72_1" name="__tabbed_72" type="radio" /><div class="tabbed-labels"><label for="__tabbed_72_1">Limitation de connexions</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_CONN</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer la limitation de connexions :</strong> Mettre à <code>yes</code> pour activer la limitation de connexions simultanées.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP1</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Connexions HTTP/1.X :</strong> Nombre maximal de connexions HTTP/1.X simultanées par adresse IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP2</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Flux HTTP/2 :</strong> Nombre maximal de flux HTTP/2 simultanés par adresse IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP3</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Flux HTTP/3 :</strong> Nombre maximal de flux HTTP/3 simultanés par adresse IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_STREAM</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Connexions Stream :</strong> Nombre maximal de connexions stream simultanées par adresse IP.</td>
</tr>
</tbody>
</table>
<p>!!! info "Limitation de connexions vs de requêtes" - La <strong>limitation de connexions</strong> restreint le nombre de connexions simultanées qu'une seule adresse IP peut maintenir. - La <strong>limitation de débit de requêtes</strong> restreint le nombre de requêtes qu'une adresse IP peut effectuer dans une période de temps définie.</p>
<pre><code>L'utilisation des deux méthodes offre une protection complète contre divers types d'abus.
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Réglages adaptés</p>
</div>
<p>Des limites trop strictes peuvent impacter des clients légitimes, notamment pour HTTP/2 et HTTP/3 où les navigateurs utilisent souvent plusieurs flux. Les valeurs par défaut sont équilibrées pour la plupart des cas d'utilisation, mais envisagez de les ajuster en fonction des besoins de votre application et du comportement des utilisateurs.</p>
<h3 id="exemples-de-configuration_6">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="73:4"><input checked="checked" id="__tabbed_73_1" name="__tabbed_73" type="radio" /><input id="__tabbed_73_2" name="__tabbed_73" type="radio" /><input id="__tabbed_73_3" name="__tabbed_73" type="radio" /><input id="__tabbed_73_4" name="__tabbed_73" type="radio" /><div class="tabbed-labels"><label for="__tabbed_73_1">Protection de base</label><label for="__tabbed_73_2">Protection d'endpoints spécifiques</label><label for="__tabbed_73_3">Configuration pour site à fort trafic</label><label for="__tabbed_73_4">Configuration pour serveur d'API</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple utilisant les paramètres par défaut pour protéger l'ensemble de votre site :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec différentes limites de débit pour divers endpoints :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Règle par défaut pour toutes les requêtes</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/s&quot;</span>

<span class="c1"># Limite plus stricte pour la page de connexion</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/login&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1r/s&quot;</span>

<span class="c1"># Limite plus stricte pour l&#39;API</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration optimisée pour les sites à fort trafic avec des limites plus permissives :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Limite générale</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30r/s&quot;</span>

<span class="c1"># Protection de la zone d&#39;administration</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/admin/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;50&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration optimisée pour un serveur d'API avec des limites de débit exprimées en requêtes par minute :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Endpoints de l&#39;API publique</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/public/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120r/m&quot;</span>

<span class="c1"># Endpoints de l&#39;API privée</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/private/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300r/m&quot;</span>

<span class="c1"># Endpoint d&#39;authentification</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/auth&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/m&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="load-balancer-pro">Load Balancer <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides load balancing feature to group of upstreams with optional healthchecks.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_DICT_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>non</td>
<td>Shared dict size (datastore for all healthchecks).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_NAME</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>Name of the upstream (used in REVERSE_PROXY_HOST).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_SERVERS</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>List of servers/IPs in the server group.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_MODE</code></td>
<td><code>round-robin</code></td>
<td>global</td>
<td>oui</td>
<td>Load balancing mode (round-robin or sticky).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_STICKY_METHOD</code></td>
<td><code>ip</code></td>
<td>global</td>
<td>oui</td>
<td>Sticky session method (ip or cookie).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_RESOLVE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>oui</td>
<td>Dynamically resolve upstream hostnames.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>global</td>
<td>oui</td>
<td>Keepalive timeout for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIME</code></td>
<td><code>1h</code></td>
<td>global</td>
<td>oui</td>
<td>Keepalive time for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_URL</code></td>
<td><code>/status</code></td>
<td>global</td>
<td>oui</td>
<td>The healthcheck URL.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_INTERVAL</code></td>
<td><code>2000</code></td>
<td>global</td>
<td>oui</td>
<td>Healthcheck interval in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>oui</td>
<td>Healthcheck timeout in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_FALL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>oui</td>
<td>Number of failed healthchecks before marking the server as down.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_RISE</code></td>
<td><code>1</code></td>
<td>global</td>
<td>oui</td>
<td>Number of successful healthchecks before marking the server as up.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_VALID_STATUSES</code></td>
<td><code>200</code></td>
<td>global</td>
<td>oui</td>
<td>HTTP status considered valid in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_CONCURRENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>oui</td>
<td>Maximum number of concurrent healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TYPE</code></td>
<td><code>http</code></td>
<td>global</td>
<td>oui</td>
<td>Type of healthcheck (http or https).</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>oui</td>
<td>Verify SSL certificate in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_HOST</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>Host header for healthchecks (useful for HTTPS).</td>
</tr>
</tbody>
</table>
<h2 id="metrics">Metrics</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Metrics offre une collecte/visualisation des indicateurs de votre instance BunkerWeb : performances, événements de sécurité, statistiques système…</p>
<p>Comment ça marche :</p>
<ol>
<li>BunkerWeb collecte des métriques lors du traitement des requêtes/réponses.</li>
<li>Compteurs de requêtes bloquées, mesures de perfs et stats sécurité sont enregistrés.</li>
<li>Stockage en mémoire avec limites configurables pour contenir l’usage de ressources.</li>
<li>En multi‑instances, Redis permet d’agréger/centraliser les données.</li>
<li>Accès via API ou <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_15">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_METRICS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la collecte et l’accès aux métriques.</td>
</tr>
<tr>
<td><code>METRICS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>non</td>
<td>Taille du stockage interne (ex. <code>16m</code>, <code>32m</code>).</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>non</td>
<td>Max de requêtes bloquées conservées par worker.</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code></td>
<td><code>100000</code></td>
<td>global</td>
<td>non</td>
<td>Max de requêtes bloquées conservées dans Redis.</td>
</tr>
<tr>
<td><code>METRICS_SAVE_TO_REDIS</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Sauvegarder compteurs/tableaux dans Redis pour agrégation cluster.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Dimensionnement mémoire</p>
</div>
<p>Ajustez <code>METRICS_MEMORY_SIZE</code> selon le trafic et le nombre d’instances.</p>
<div class="admonition info">
<p class="admonition-title">Intégration Redis</p>
</div>
<p>Avec <a href="#redis">Redis</a>, les requêtes bloquées sont synchronisées pour une vue centralisée multi‑nœuds.</p>
<div class="admonition warning">
<p class="admonition-title">Performance</p>
</div>
<p>Des valeurs trop élevées augmentent l’usage mémoire. Surveillez et ajustez.</p>
<h3 id="exemples_12">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="74:1"><input checked="checked" id="__tabbed_74_1" name="__tabbed_74" type="radio" /><div class="tabbed-labels"><label for="__tabbed_74_1">Configuration par défaut</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="75:1"><input checked="checked" id="__tabbed_75_1" name="__tabbed_75" type="radio" /><div class="tabbed-labels"><label for="__tabbed_75_1">Ressources limitées</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="76:1"><input checked="checked" id="__tabbed_76_1" name="__tabbed_76" type="radio" /><div class="tabbed-labels"><label for="__tabbed_76_1">Fort trafic</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="77:1"><input checked="checked" id="__tabbed_77_1" name="__tabbed_77" type="radio" /><div class="tabbed-labels"><label for="__tabbed_77_1">Désactivation</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<h2 id="migration-pro">Migration <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Migration of BunkerWeb configuration between instances made easy via the web UI</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Divers (Miscellaneous) fournit des <strong>paramètres de base essentiels</strong> qui aident à maintenir la sécurité et la fonctionnalité de votre site web. Ce composant central offre des contrôles complets pour :</p>
<ul>
<li><strong>Le comportement du serveur</strong> - Configurez la manière dont votre serveur répond à diverses requêtes</li>
<li><strong>Les paramètres HTTP</strong> - Gérez les méthodes, la taille des requêtes et les options de protocole</li>
<li><strong>La gestion des fichiers</strong> - Contrôlez le service des fichiers statiques et optimisez leur livraison</li>
<li><strong>Le support des protocoles</strong> - Activez les protocoles HTTP modernes pour de meilleures performances</li>
<li><strong>Les configurations système</strong> - Étendez les fonctionnalités et améliorez la sécurité</li>
</ul>
<p>Que vous ayez besoin de restreindre les méthodes HTTP, de gérer la taille des requêtes, d'optimiser la mise en cache des fichiers ou de contrôler la manière dont votre serveur répond à diverses requêtes, ce plugin vous donne les outils pour <strong>affiner le comportement de votre service web</strong> tout en optimisant à la fois la performance et la sécurité.</p>
<h3 id="fonctionnalites-cles">Fonctionnalités clés</h3>
<table>
<thead>
<tr>
<th>Catégorie de fonctionnalité</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Contrôle des méthodes HTTP</strong></td>
<td>Définissez quelles méthodes HTTP sont acceptables pour votre application</td>
</tr>
<tr>
<td><strong>Protection du serveur par défaut</strong></td>
<td>Empêchez l'accès non autorisé par des noms d'hôte incorrects et forcez le SNI pour les connexions sécurisées</td>
</tr>
<tr>
<td><strong>Gestion de la taille des requêtes</strong></td>
<td>Définissez des limites pour le corps des requêtes client et les téléversements de fichiers</td>
</tr>
<tr>
<td><strong>Service de fichiers statiques</strong></td>
<td>Configurez et optimisez la livraison de contenu statique depuis des dossiers racine personnalisés</td>
</tr>
<tr>
<td><strong>Mise en cache des fichiers</strong></td>
<td>Améliorez les performances grâce à des mécanismes avancés de mise en cache des descripteurs de fichiers</td>
</tr>
<tr>
<td><strong>Support des protocoles</strong></td>
<td>Configurez les options des protocoles HTTP modernes (HTTP2/HTTP3) et les paramètres de port Alt-Svc</td>
</tr>
<tr>
<td><strong>Rapport anonyme</strong></td>
<td>Rapport de statistiques d'utilisation optionnel pour aider à améliorer BunkerWeb</td>
</tr>
<tr>
<td><strong>Support des plugins externes</strong></td>
<td>Étendez les fonctionnalités en intégrant des plugins externes via des URL</td>
</tr>
<tr>
<td><strong>Contrôle du statut HTTP</strong></td>
<td>Configurez la réponse de votre serveur lors du refus de requêtes (y compris la fermeture de connexion)</td>
</tr>
</tbody>
</table>
<h3 id="guide-de-configuration_1">Guide de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="78:8"><input checked="checked" id="__tabbed_78_1" name="__tabbed_78" type="radio" /><input id="__tabbed_78_2" name="__tabbed_78" type="radio" /><input id="__tabbed_78_3" name="__tabbed_78" type="radio" /><input id="__tabbed_78_4" name="__tabbed_78" type="radio" /><input id="__tabbed_78_5" name="__tabbed_78" type="radio" /><input id="__tabbed_78_6" name="__tabbed_78" type="radio" /><input id="__tabbed_78_7" name="__tabbed_78" type="radio" /><input id="__tabbed_78_8" name="__tabbed_78" type="radio" /><div class="tabbed-labels"><label for="__tabbed_78_1">Sécurité du serveur par défaut</label><label for="__tabbed_78_2">Statut HTTP en cas de refus</label><label for="__tabbed_78_3">Méthodes HTTP</label><label for="__tabbed_78_4">Limites de taille des requêtes</label><label for="__tabbed_78_5">Support des protocoles</label><label for="__tabbed_78_6">Service de fichiers statiques</label><label for="__tabbed_78_7">Paramètres système</label><label for="__tabbed_78_8">Mise en cache des fichiers</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Contrôles du serveur par défaut</strong></p>
<p>En HTTP, l'en-tête <code>Host</code> spécifie le serveur cible, mais il peut être manquant ou inconnu, souvent à cause de bots recherchant des vulnérabilités.</p>
<p>Pour bloquer de telles requêtes :</p>
<ul>
<li>Mettez <code>DISABLE_DEFAULT_SERVER</code> à <code>yes</code> pour refuser silencieusement ces requêtes en utilisant le <a href="https://http.dev/444">code de statut <code>444</code> de NGINX</a>.</li>
<li>Pour une sécurité plus stricte, activez <code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code> pour rejeter les connexions SSL/TLS sans SNI valide.</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Avantages en matière de sécurité</p>
<ul>
<li>Bloque la manipulation de l'en-tête Host et le scan des hôtes virtuels</li>
<li>Atténue les risques de contrebande de requêtes HTTP (HTTP request smuggling)</li>
<li>Supprime le serveur par défaut comme vecteur d'attaque</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DISABLE_DEFAULT_SERVER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Serveur par défaut :</strong> Mettre à <code>yes</code> pour désactiver le serveur par défaut lorsqu'aucun nom d'hôte ne correspond à la requête.</td>
</tr>
<tr>
<td><code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>SNI Strict :</strong> Si mis à <code>yes</code>, requiert le SNI pour les connexions HTTPS et rejette les connexions sans SNI valide.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Application du SNI</p>
<p>Activer la validation stricte du SNI offre une sécurité renforcée mais peut causer des problèmes si BunkerWeb est derrière un proxy inverse qui transmet les requêtes HTTPS sans préserver les informations SNI. Testez minutieusement avant d'activer en production.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Contrôle du statut HTTP</strong></p>
<p>La première étape dans la gestion de l'accès refusé à un client est de définir l'action appropriée. Cela peut être configuré avec le paramètre <code>DENY_HTTP_STATUS</code>. Lorsque BunkerWeb refuse une requête, vous pouvez contrôler sa réponse. Par défaut, il renvoie un statut <code>403 Forbidden</code>, affichant une page web ou un contenu personnalisé.</p>
<p>Alternativement, le régler sur <code>444</code> ferme immédiatement la connexion sans envoyer de réponse. Ce <a href="https://http.dev/444">code de statut non standard</a>, spécifique à NGINX, est utile pour ignorer silencieusement les requêtes indésirables.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DENY_HTTP_STATUS</code></td>
<td><code>403</code></td>
<td>global</td>
<td>no</td>
<td><strong>Statut HTTP de refus :</strong> Code de statut HTTP à envoyer quand une requête est refusée (403 ou 444). Le code 444 ferme la connexion.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Considérations sur le code de statut 444</p>
<p>Comme les clients ne reçoivent aucun retour, le dépannage peut être plus difficile. Régler sur <code>444</code> est recommandé uniquement si vous avez minutieusement traité les faux positifs, êtes expérimenté avec BunkerWeb et exigez un niveau de sécurité plus élevé.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
<p>En <strong>mode stream</strong>, ce paramètre est toujours appliqué comme <code>444</code>, ce qui signifie que la connexion sera fermée, quelle que soit la valeur configurée.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Contrôle des méthodes HTTP</strong></p>
<p>Restreindre les méthodes HTTP à celles requises par votre application est une mesure de sécurité fondamentale qui respecte le principe du moindre privilège. En définissant explicitement les méthodes acceptables, vous minimisez le risque d'exploitation via des méthodes inutilisées ou dangereuses.</p>
<p>Cette fonctionnalité est configurée avec <code>ALLOWED_METHODS</code>, où les méthodes sont listées et séparées par un <code>|</code> (défaut : <code>GET|POST|HEAD</code>). Si un client tente une méthode non listée, le serveur répondra avec un statut <strong>405 - Method Not Allowed</strong>.</p>
<p>Pour la plupart des sites web, le défaut <code>GET|POST|HEAD</code> est suffisant. Si votre application utilise des API RESTful, vous devrez peut-être inclure <code>PUT</code> et <code>DELETE</code>.</p>
<div class="admonition success">
<p class="admonition-title">Avantages en matière de sécurité</p>
<ul>
<li>Empêche l'exploitation de méthodes HTTP inutilisées ou inutiles</li>
<li>Réduit la surface d'attaque en désactivant les méthodes potentiellement dangereuses</li>
<li>Bloque les techniques d'énumération de méthodes HTTP utilisées par les attaquants</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALLOWED_METHODS</code></td>
<td><code>GET   | POST     | HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Méthodes HTTP :</strong> Liste des méthodes HTTP autorisées, séparées par des barres verticales (<code>|</code>).</td>
</tr>
</tbody>
</table>
<div class="admonition abstract">
<p class="admonition-title">CORS et requêtes pre-flight</p>
<p>Si votre application prend en charge le <a href="#cors">Cross-Origin Resource Sharing (CORS)</a>, vous devriez inclure la méthode <code>OPTIONS</code> dans <code>ALLOWED_METHODS</code> pour gérer les requêtes pre-flight. Cela garantit le bon fonctionnement pour les navigateurs effectuant des requêtes inter-origines.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Considérations de sécurité</p>
<ul>
<li><strong>Évitez d'activer <code>TRACE</code> ou <code>CONNECT</code> :</strong> Ces méthodes sont rarement nécessaires et peuvent introduire des risques de sécurité importants, comme le Cross-Site Tracing (XST) ou les attaques par tunnelisation.</li>
<li><strong>Révisez régulièrement les méthodes autorisées :</strong> Auditez périodiquement <code>ALLOWED_METHODS</code> pour vous assurer qu'il correspond aux besoins actuels de votre application.</li>
<li><strong>Testez minutieusement avant le déploiement :</strong> Les changements de restrictions de méthodes HTTP peuvent impacter la fonctionnalité de l'application. Validez votre configuration dans un environnement de pré-production.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Limites de taille des requêtes</strong></p>
<p>La taille maximale du corps d'une requête peut être contrôlée avec <code>MAX_CLIENT_SIZE</code> (défaut : <code>10m</code>). Les valeurs acceptées suivent la syntaxe décrite <a href="https://nginx.org/en/docs/syntax.html">ici</a>.</p>
<div class="admonition success">
<p class="admonition-title">Avantages en matière de sécurité</p>
<ul>
<li>Protège contre les attaques par déni de service causées par des charges utiles excessives</li>
<li>Atténue les vulnérabilités de débordement de tampon (buffer overflow)</li>
<li>Empêche les attaques par téléversement de fichiers</li>
<li>Réduit le risque d'épuisement des ressources du serveur</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MAX_CLIENT_SIZE</code></td>
<td><code>10m</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Taille maximale des requêtes :</strong> La taille maximale autorisée pour le corps des requêtes client (ex. : téléversements).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques de configuration de la taille des requêtes</p>
<p>Si vous devez autoriser un corps de requête de taille illimitée, vous pouvez mettre la valeur <code>MAX_CLIENT_SIZE</code> à <code>0</code>. Cependant, ce n'est <strong>pas recommandé</strong> en raison des risques potentiels de sécurité et de performance.</p>
<p><strong>Bonnes pratiques :</strong></p>
<ul>
<li>Configurez toujours <code>MAX_CLIENT_SIZE</code> à la plus petite valeur répondant aux besoins légitimes de votre application.</li>
<li>Révisez et ajustez régulièrement ce paramètre pour l'aligner sur les besoins évolutifs de votre application.</li>
<li>Évitez de mettre <code>0</code> sauf en cas de nécessité absolue, car cela peut exposer votre serveur à des attaques par déni de service et à l'épuisement des ressources.</li>
</ul>
<p>En gérant soigneusement ce paramètre, vous pouvez garantir une sécurité et des performances optimales pour votre application.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Paramètres des protocoles HTTP</strong></p>
<p>Les protocoles HTTP modernes comme HTTP/2 et HTTP/3 améliorent la performance et la sécurité. BunkerWeb permet une configuration facile de ces protocoles.</p>
<div class="admonition success">
<p class="admonition-title">Avantages en matière de sécurité et de performance</p>
<ul>
<li><strong>Avantages de sécurité :</strong> Les protocoles modernes comme HTTP/2 et HTTP/3 imposent TLS/HTTPS par défaut, réduisent la sensibilité à certaines attaques et améliorent la confidentialité grâce aux en-têtes chiffrés (HTTP/3).</li>
<li><strong>Avantages de performance :</strong> Des fonctionnalités comme le multiplexage, la compression des en-têtes, le server push et le transfert de données binaires améliorent la vitesse et l'efficacité.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Écoute HTTP :</strong> Répondre aux requêtes HTTP (non sécurisées) si mis à <code>yes</code>.</td>
</tr>
<tr>
<td><code>HTTP2</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP2 :</strong> Supporte le protocole HTTP2 lorsque HTTPS est activé.</td>
</tr>
<tr>
<td><code>HTTP3</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP3 :</strong> Supporte le protocole HTTP3 lorsque HTTPS est activé.</td>
</tr>
<tr>
<td><code>HTTP3_ALT_SVC_PORT</code></td>
<td><code>443</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Port Alt-Svc HTTP3 :</strong> Port à utiliser dans l'en-tête Alt-Svc pour HTTP3.</td>
</tr>
</tbody>
</table>
<div class="admonition example">
<p class="admonition-title">À propos de HTTP/3</p>
<p>HTTP/3, la dernière version du protocole Hypertext Transfer, utilise QUIC sur UDP au lieu de TCP, résolvant des problèmes comme le blocage en tête de ligne pour des connexions plus rapides et plus fiables.</p>
<p>NGINX a introduit un support expérimental pour HTTP/3 et QUIC à partir de la version 1.25.0. Cependant, cette fonctionnalité est encore expérimentale, et la prudence est de mise pour une utilisation en production. Pour plus de détails, consultez la <a href="https://nginx.org/en/docs/quic.html">documentation officielle de NGINX</a>.</p>
<p>Des tests approfondis sont recommandés avant d'activer HTTP/3 en production.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration du service de fichiers</strong></p>
<p>BunkerWeb peut servir des fichiers statiques directement ou agir comme un proxy inverse vers un serveur d'application. Par défaut, les fichiers sont servis depuis <code>/var/www/html/{server_name}</code>.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVE_FILES</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Servir des fichiers :</strong> Si <code>yes</code>, BunkerWeb servira les fichiers statiques depuis le dossier racine configuré.</td>
</tr>
<tr>
<td><code>ROOT_FOLDER</code></td>
<td><code>/var/www/html/{server_name}</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Dossier racine :</strong> Le répertoire depuis lequel servir les fichiers statiques. Vide signifie utiliser l'emplacement par défaut.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques pour le service de fichiers statiques</p>
<ul>
<li><strong>Service direct :</strong> Activez le service de fichiers (<code>SERVE_FILES=yes</code>) lorsque BunkerWeb est responsable de servir directement les fichiers statiques.</li>
<li><strong>Proxy inverse :</strong> Si BunkerWeb agit comme un proxy inverse, <strong>désactivez le service de fichiers</strong> (<code>SERVE_FILES=no</code>) pour réduire la surface d'attaque et éviter d'exposer des répertoires inutiles.</li>
<li><strong>Permissions :</strong> Assurez-vous que les permissions de fichiers et les configurations de chemin sont correctes pour empêcher tout accès non autorisé.</li>
<li><strong>Sécurité :</strong> Évitez d'exposer des répertoires ou des fichiers sensibles par des mauvaises configurations.</li>
</ul>
<p>En gérant soigneusement le service de fichiers statiques, vous pouvez optimiser les performances tout en maintenant un environnement sécurisé.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Gestion des plugins et du système</strong></p>
<p>Ces paramètres gèrent l'interaction de BunkerWeb avec des systèmes externes et contribuent à l'amélioration du produit via des statistiques d'utilisation anonymes optionnelles.</p>
<p><strong>Rapport anonyme</strong></p>
<p>Le rapport anonyme fournit à l'équipe de BunkerWeb des informations sur la manière dont le logiciel est utilisé. Cela aide à identifier les domaines d'amélioration et à prioriser le développement de fonctionnalités. Les rapports sont strictement statistiques et n'incluent aucune information sensible ou personnellement identifiable. Ils couvrent :</p>
<ul>
<li>Les fonctionnalités activées</li>
<li>Les schémas de configuration généraux</li>
</ul>
<p>Vous pouvez désactiver cette fonctionnalité si vous le souhaitez en mettant <code>SEND_ANONYMOUS_REPORT</code> à <code>no</code>.</p>
<p><strong>Plugins externes</strong></p>
<p>Les plugins externes vous permettent d'étendre les fonctionnalités de BunkerWeb en intégrant des modules tiers. Cela permet une personnalisation supplémentaire et des cas d'utilisation avancés.</p>
<div class="admonition danger">
<p class="admonition-title">Sécurité des plugins externes</p>
<p><strong>Les plugins externes peuvent introduire des risques de sécurité s'ils ne sont pas correctement vérifiés.</strong> Suivez ces bonnes pratiques pour minimiser les menaces potentielles :</p>
<ul>
<li>N'utilisez que des plugins provenant de sources fiables.</li>
<li>Vérifiez l'intégrité des plugins à l'aide de sommes de contrôle (checksums) lorsqu'elles sont disponibles.</li>
<li>Révisez et mettez à jour régulièrement les plugins pour garantir la sécurité et la compatibilité.</li>
</ul>
<p>Pour plus de détails, consultez la <a href="../plugins/">documentation des Plugins</a>.</p>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SEND_ANONYMOUS_REPORT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Rapports anonymes :</strong> Envoyer des rapports d'utilisation anonymes aux mainteneurs de BunkerWeb.</td>
</tr>
<tr>
<td><code>EXTERNAL_PLUGIN_URLS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Plugins externes :</strong> URL pour télécharger des plugins externes (séparées par des espaces).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Optimisation du cache de fichiers</strong></p>
<p>Le cache de fichiers ouverts améliore les performances en stockant les descripteurs de fichiers et les métadonnées en mémoire, réduisant ainsi le besoin d'opérations répétées sur le système de fichiers.</p>
<div class="admonition success">
<p class="admonition-title">Avantages de la mise en cache de fichiers</p>
<ul>
<li><strong>Performance :</strong> Réduit les E/S du système de fichiers, diminue la latence et abaisse l'utilisation du CPU pour les opérations sur les fichiers.</li>
<li><strong>Sécurité :</strong> Atténue les attaques par synchronisation (timing attacks) en mettant en cache les réponses d'erreur et réduit l'impact des attaques DoS ciblant le système de fichiers.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_OPEN_FILE_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer le cache :</strong> Activer la mise en cache des descripteurs de fichiers et des métadonnées pour améliorer les performances.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE</code></td>
<td><code>max=1000 inactive=20s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Configuration du cache :</strong> Configurez le cache de fichiers ouverts (ex. : nombre max d'entrées et délai d'inactivité).</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Mettre en cache les erreurs :</strong> Met en cache les erreurs de recherche de descripteurs de fichiers ainsi que les recherches réussies.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utilisations minimales :</strong> Nombre minimum d'accès pendant la période d'inactivité pour qu'un fichier reste en cache.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_VALID</code></td>
<td><code>30s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validité du cache :</strong> Temps après lequel les éléments mis en cache sont revalidés.</td>
</tr>
</tbody>
</table>
<p><strong>Guide de configuration</strong></p>
<p>Pour activer et configurer la mise en cache des fichiers :
1. Mettez <code>USE_OPEN_FILE_CACHE</code> à <code>yes</code>.
2. Ajustez les paramètres <code>OPEN_FILE_CACHE</code> pour définir le nombre maximum d'entrées et leur délai d'inactivité.
3. Utilisez <code>OPEN_FILE_CACHE_ERRORS</code> pour mettre en cache les recherches réussies et échouées.
4. Réglez <code>OPEN_FILE_CACHE_MIN_USES</code> pour spécifier le nombre d'accès requis pour qu'un fichier reste en cache.
5. Définissez la période de validité du cache avec <code>OPEN_FILE_CACHE_VALID</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Activez la mise en cache pour les sites web avec de nombreux fichiers statiques pour améliorer les performances.</li>
<li>Révisez et affinez régulièrement les paramètres de cache pour équilibrer performance et utilisation des ressources.</li>
<li>Dans les environnements dynamiques où les fichiers changent fréquemment, envisagez de réduire la période de validité du cache ou de désactiver la fonctionnalité pour garantir la fraîcheur du contenu.</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="exemples-de-configuration_7">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="79:7"><input checked="checked" id="__tabbed_79_1" name="__tabbed_79" type="radio" /><input id="__tabbed_79_2" name="__tabbed_79" type="radio" /><input id="__tabbed_79_3" name="__tabbed_79" type="radio" /><input id="__tabbed_79_4" name="__tabbed_79" type="radio" /><input id="__tabbed_79_5" name="__tabbed_79" type="radio" /><input id="__tabbed_79_6" name="__tabbed_79" type="radio" /><input id="__tabbed_79_7" name="__tabbed_79" type="radio" /><div class="tabbed-labels"><label for="__tabbed_79_1">Sécurité du serveur par défaut</label><label for="__tabbed_79_2">Statut HTTP en cas de refus</label><label for="__tabbed_79_3">Méthodes HTTP</label><label for="__tabbed_79_4">Limites de taille des requêtes</label><label for="__tabbed_79_5">Support des protocoles</label><label for="__tabbed_79_6">Service de fichiers statiques</label><label for="__tabbed_79_7">Mise en cache des fichiers</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Exemple pour désactiver le serveur par défaut et forcer le SNI strict :</p>
<div class="highlight"><pre><span></span><code><span class="nt">DISABLE_DEFAULT_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DISABLE_DEFAULT_SERVER_STRICT_SNI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour ignorer silencieusement les requêtes indésirables :</p>
<div class="highlight"><pre><span></span><code><span class="nt">DENY_HTTP_STATUS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;444&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour restreindre les méthodes HTTP à celles requises par une API RESTful :</p>
<div class="highlight"><pre><span></span><code><span class="nt">ALLOWED_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET|POST|PUT|DELETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour limiter la taille maximale du corps d'une requête :</p>
<div class="highlight"><pre><span></span><code><span class="nt">MAX_CLIENT_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5m&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour activer HTTP/2 et HTTP/3 avec un port Alt-Svc personnalisé :</p>
<div class="highlight"><pre><span></span><code><span class="nt">HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3_ALT_SVC_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;443&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour servir des fichiers statiques depuis un dossier racine personnalisé :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVE_FILES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROOT_FOLDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/custom-folder&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour activer et optimiser la mise en cache des fichiers :</p>
<p>```yaml
USE_OPEN_FILE_CACHE: "yes"
OPEN_FILE_CACHE: "max=2000 inactive=30s"
OPEN_FILE_CACHE_ERRORS: "yes"
OPEN_FILE_CACHE_MIN_USES: "3"
OPEN_FILE_CACHE_VALID: "60s"</p>
</div>
</div>
</div>
<h2 id="modsecurity">ModSecurity</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin ModSecurity intègre le puissant pare-feu applicatif web (WAF) <a href="https://modsecurity.org">ModSecurity</a> dans BunkerWeb. Cette intégration offre une protection robuste contre un large éventail d'attaques web en s'appuyant sur le <a href="https://coreruleset.org">Jeu de Règles de Base OWASP (CRS)</a> pour détecter et bloquer des menaces telles que l'injection SQL, le cross-site scripting (XSS), l'inclusion de fichiers locaux, et bien plus encore.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Lorsqu'une requête est reçue, ModSecurity l'évalue par rapport au jeu de règles actif.</li>
<li>Le Jeu de Règles de Base OWASP inspecte les en-têtes, les cookies, les paramètres d'URL et le contenu du corps de la requête.</li>
<li>Chaque violation détectée contribue à un score d'anomalie global.</li>
<li>Si ce score dépasse le seuil configuré, la requête est bloquée.</li>
<li>Des journaux détaillés sont créés pour aider à diagnostiquer quelles règles ont été déclenchées et pourquoi.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Bénéfices clés</p>
<ol>
<li><strong>Protection standard de l'industrie :</strong> Utilise le pare-feu open-source ModSecurity largement répandu.</li>
<li><strong>Jeu de Règles de Base OWASP :</strong> Emploie des règles maintenues par la communauté couvrant le Top Dix de l'OWASP et plus encore.</li>
<li><strong>Niveaux de sécurité configurables :</strong> Ajustez les niveaux de paranoïa pour équilibrer la sécurité avec les faux positifs potentiels.</li>
<li><strong>Journalisation détaillée :</strong> Fournit des journaux d'audit complets pour l'analyse des attaques.</li>
<li><strong>Support des plugins :</strong> Étendez la protection avec des plugins CRS optionnels adaptés à vos applications.</li>
</ol>
</div>
<h3 id="comment-lutiliser_19">Comment l’utiliser</h3>
<p>Suivez ces étapes pour configurer et utiliser ModSecurity :</p>
<ol>
<li><strong>Activer la fonctionnalité :</strong> ModSecurity est activé par défaut. Cela peut être contrôlé via le paramètre <code>USE_MODSECURITY</code>.</li>
<li><strong>Sélectionner une version du CRS :</strong> Choisissez une version du Jeu de Règles de Base OWASP (v3, v4, ou nightly).</li>
<li><strong>Ajouter des plugins :</strong> Activez optionnellement des plugins CRS pour améliorer la couverture des règles.</li>
<li><strong>Surveiller et ajuster :</strong> Utilisez les journaux et l'<a href="../web-ui/">interface web</a> pour identifier les faux positifs et ajuster les paramètres.</li>
</ol>
<h3 id="parametres-de-configuration_5">Paramètres de configuration</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MODSECURITY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer ModSecurity :</strong> Active la protection du pare-feu applicatif web ModSecurity.</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utiliser le Core Rule Set :</strong> Active le Jeu de Règles de Base OWASP pour ModSecurity.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_VERSION</code></td>
<td><code>4</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Version du CRS :</strong> La version du Jeu de Règles de Base OWASP à utiliser. Options : <code>3</code>, <code>4</code>, ou <code>nightly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_RULE_ENGINE</code></td>
<td><code>On</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Moteur de règles :</strong> Contrôle si les règles sont appliquées. Options : <code>On</code>, <code>DetectionOnly</code>, ou <code>Off</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_ENGINE</code></td>
<td><code>RelevantOnly</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Moteur d'audit :</strong> Contrôle le fonctionnement de la journalisation d'audit. Options : <code>On</code>, <code>Off</code>, ou <code>RelevantOnly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_LOG_PARTS</code></td>
<td><code>ABIJDEFHZ</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Parties du journal d'audit :</strong> Quelles parties des requêtes/réponses inclure dans les journaux d'audit.</td>
</tr>
<tr>
<td><code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code></td>
<td><code>131072</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Limite du corps de requête (sans fichiers) :</strong> Taille maximale pour les corps de requête sans téléversement de fichiers. Accepte les octets bruts ou un suffixe lisible (<code>k</code>, <code>m</code>, <code>g</code>).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS_PLUGINS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer les plugins CRS :</strong> Active des jeux de règles de plugins supplémentaires pour le Core Rule Set.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_PLUGINS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Liste des plugins CRS :</strong> Liste de plugins séparés par des espaces à télécharger et installer (<code>nom-plugin[/tag]</code> ou URL).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_GLOBAL_CRS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>CRS Global :</strong> Si activé, applique les règles CRS globalement au niveau HTTP plutôt que par serveur.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">ModSecurity et le Jeu de Règles de Base OWASP</p>
</div>
<p><strong>Nous recommandons vivement de garder ModSecurity et le Jeu de Règles de Base OWASP (CRS) activés</strong> pour fournir une protection robuste contre les vulnérabilités web courantes. Bien que des faux positifs occasionnels puissent se produire, ils peuvent être résolus avec un peu d'effort en affinant les règles ou en utilisant des exclusions prédéfinies.</p>
<pre><code>L'équipe du CRS maintient activement une liste d'exclusions pour des applications populaires telles que WordPress, Nextcloud, Drupal et Cpanel, facilitant ainsi l'intégration sans impacter la fonctionnalité. Les avantages en matière de sécurité l'emportent de loin sur l'effort de configuration minimal requis pour traiter les faux positifs.
</code></pre>
<h3 id="versions-du-crs-disponibles">Versions du CRS disponibles</h3>
<p>Sélectionnez une version du CRS pour répondre au mieux à vos besoins de sécurité :</p>
<ul>
<li><strong><code>3</code></strong> : Stable <a href="https://github.com/coreruleset/coreruleset/releases/tag/v3.3.7">v3.3.7</a>.</li>
<li><strong><code>4</code></strong> : Stable <a href="https://github.com/coreruleset/coreruleset/releases/tag/v4.18.0">v4.18.0</a> (<strong>par défaut</strong>).</li>
<li><strong><code>nightly</code></strong> : <a href="https://github.com/coreruleset/coreruleset/releases/tag/nightly">Version de nuit</a> offrant les dernières mises à jour de règles.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Version de nuit (Nightly Build)</p>
</div>
<p>La <strong>version de nuit</strong> contient les règles les plus à jour, offrant les dernières protections contre les menaces émergentes. Cependant, comme elle est mise à jour quotidiennement et peut inclure des changements expérimentaux ou non testés, il est recommandé d'utiliser d'abord la version de nuit dans un <strong>environnement de pré-production</strong> avant de la déployer en production.</p>
<div class="admonition tip">
<p class="admonition-title">Niveaux de paranoïa</p>
</div>
<p>Le Jeu de Règles de Base OWASP utilise des "niveaux de paranoïa" (PL) pour contrôler la rigueur des règles :</p>
<pre><code>- **PL1 (défaut) :** Protection de base avec un minimum de faux positifs
- **PL2 :** Sécurité renforcée avec une correspondance de motifs plus stricte
- **PL3 :** Sécurité améliorée avec une validation plus stricte
- **PL4 :** Sécurité maximale avec des règles très strictes (peut causer de nombreux faux positifs)

Vous pouvez définir le niveau de paranoïa en ajoutant un fichier de configuration personnalisé dans `/etc/bunkerweb/configs/modsec-crs/`.
</code></pre>
<h3 id="configurations-personnalisees">Configurations personnalisées</h3>
<p>L'ajustement de ModSecurity et du Jeu de Règles de Base OWASP (CRS) peut être réalisé grâce à des configurations personnalisées. Celles-ci vous permettent de personnaliser le comportement à des étapes spécifiques du traitement des règles de sécurité :</p>
<ul>
<li><strong><code>modsec-crs</code></strong> : Appliqué <strong>avant</strong> le chargement du Jeu de Règles de Base OWASP.</li>
<li><strong><code>modsec</code></strong> : Appliqué <strong>après</strong> le chargement du Jeu de Règles de Base OWASP. Également utilisé si le CRS n'est pas chargé du tout.</li>
<li><strong><code>crs-plugins-before</code></strong> : Appliqué <strong>avant</strong> le chargement des plugins CRS.</li>
<li><strong><code>crs-plugins-after</code></strong> : Appliqué <strong>après</strong> le chargement des plugins CRS.</li>
</ul>
<p>Cette structure offre une grande flexibilité, vous permettant d'affiner les paramètres de ModSecurity et du CRS pour répondre aux besoins spécifiques de votre application tout en maintenant un flux de configuration clair.</p>
<h4 id="ajout-dexclusions-crs-avec-modsec-crs">Ajout d'exclusions CRS avec <code>modsec-crs</code></h4>
<p>Vous pouvez utiliser une configuration personnalisée de type <code>modsec-crs</code> pour ajouter des exclusions pour des cas d'usage spécifiques, comme l'activation d'exclusions prédéfinies pour WordPress :</p>
<div class="highlight"><pre><span></span><code>SecAction \
 &quot;id:900130,\
  phase:1,\
  nolog,\
  pass,\
  t:none,\
  setvar:tx.crs_exclusions_wordpress=1&quot;
</code></pre></div>
<p>Dans cet exemple :</p>
<ul>
<li>L'action est exécutée en <strong>Phase 1</strong> (tôt dans le cycle de vie de la requête).</li>
<li>Elle active les exclusions spécifiques à WordPress du CRS en définissant la variable <code>tx.crs_exclusions_wordpress</code>.</li>
</ul>
<h4 id="mise-a-jour-des-regles-crs-avec-modsec">Mise à jour des règles CRS avec <code>modsec</code></h4>
<p>Pour affiner les règles CRS chargées, vous pouvez utiliser une configuration personnalisée de type <code>modsec</code>. Par exemple, vous pouvez supprimer des règles ou des balises spécifiques pour certains chemins de requête :</p>
<div class="highlight"><pre><span></span><code>SecRule REQUEST_FILENAME &quot;/wp-admin/admin-ajax.php&quot; &quot;id:1,ctl:ruleRemoveByTag=attack-xss,ctl:ruleRemoveByTag=attack-rce&quot;
SecRule REQUEST_FILENAME &quot;/wp-admin/options.php&quot; &quot;id:2,ctl:ruleRemoveByTag=attack-xss&quot;
SecRule REQUEST_FILENAME &quot;^/wp-json/yoast&quot; &quot;id:3,ctl:ruleRemoveById=930120&quot;
</code></pre></div>
<p>Dans cet exemple :</p>
<ul>
<li><strong>Règle 1</strong> : Supprime les règles avec les balises <code>attack-xss</code> et <code>attack-rce</code> pour les requêtes vers <code>/wp-admin/admin-ajax.php</code>.</li>
<li><strong>Règle 2</strong> : Supprime les règles avec la balise <code>attack-xss</code> pour les requêtes vers <code>/wp-admin/options.php</code>.</li>
<li><strong>Règle 3</strong> : Supprime une règle spécifique (ID <code>930120</code>) pour les requêtes correspondant à <code>/wp-json/yoast</code>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Ordre d'exécution</p>
</div>
<p>L'ordre d'exécution pour ModSecurity dans BunkerWeb est le suivant, assurant une progression claire et logique de l'application des règles :</p>
<pre><code>1.  **Configuration OWASP CRS** : Configuration de base pour le Jeu de Règles de Base OWASP.
2.  **Configuration des plugins personnalisés (`crs-plugins-before`)** : Paramètres spécifiques aux plugins, appliqués avant toute règle CRS.
3.  **Règles des plugins personnalisés (avant les règles CRS) (`crs-plugins-before`)** : Règles personnalisées pour les plugins exécutées avant les règles CRS.
4.  **Configuration des plugins téléchargés** : Configuration pour les plugins téléchargés en externe.
5.  **Règles des plugins téléchargés (avant les règles CRS)** : Règles pour les plugins téléchargés exécutées avant les règles CRS.
6.  **Règles CRS personnalisées (`modsec-crs`)** : Règles définies par l'utilisateur appliquées avant le chargement des règles CRS.
7.  **Règles OWASP CRS** : Le jeu de règles de sécurité de base fourni par l'OWASP.
8.  **Règles des plugins personnalisés (après les règles CRS) (`crs-plugins-after`)** : Règles de plugins personnalisés exécutées après les règles CRS.
9.  **Règles des plugins téléchargés (après les règles CRS)** : Règles pour les plugins téléchargés exécutées après les règles CRS.
10. **Règles personnalisées (`modsec`)** : Règles définies par l'utilisateur appliquées après toutes les règles CRS et de plugins.

**Notes clés** :
- Les personnalisations **pré-CRS** (`crs-plugins-before`, `modsec-crs`) vous permettent de définir des exceptions ou des règles préparatoires avant le chargement des règles CRS de base.
- Les personnalisations **post-CRS** (`crs-plugins-after`, `modsec`) sont idéales pour outrepasser ou étendre des règles après l'application des règles CRS et de plugins.
- Cette structure offre une flexibilité maximale, permettant un contrôle précis de l'exécution et de la personnalisation des règles tout en maintenant une base de sécurité solide.
</code></pre>
<h3 id="plugins-owasp-crs">Plugins OWASP CRS</h3>
<p>Le Jeu de Règles de Base OWASP prend également en charge une gamme de <strong>plugins</strong> conçus pour étendre ses fonctionnalités et améliorer la compatibilité avec des applications ou des environnements spécifiques. Ces plugins peuvent aider à affiner le CRS pour une utilisation avec des plateformes populaires telles que WordPress, Nextcloud et Drupal, ou même des configurations personnalisées. Pour plus d'informations et une liste des plugins disponibles, consultez le <a href="https://github.com/coreruleset/plugin-registry">registre des plugins OWASP CRS</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Téléchargement de plugins</p>
</div>
<p>Le paramètre <code>MODSECURITY_CRS_PLUGINS</code> vous permet de télécharger et d'installer des plugins pour étendre les fonctionnalités du Jeu de Règles de Base OWASP (CRS). Ce paramètre accepte une liste de noms de plugins avec des balises ou des URL optionnelles, facilitant l'intégration de fonctionnalités de sécurité supplémentaires adaptées à vos besoins spécifiques.</p>
<pre><code>Voici une liste non exhaustive des valeurs acceptées pour le paramètre `MODSECURITY_CRS_PLUGINS` :

*   `fake-bot` - Télécharge la dernière version du plugin.
*   `wordpress-rule-exclusions/v1.0.0` - Télécharge la version 1.0.0 du plugin.
*   `https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip` - Télécharge le plugin directement depuis l'URL.
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Faux positifs</p>
</div>
<p>Des paramètres de sécurité plus élevés peuvent bloquer le trafic légitime. Commencez avec les paramètres par défaut et surveillez les journaux avant d'augmenter les niveaux de sécurité. Soyez prêt à ajouter des règles d'exclusion pour les besoins spécifiques de votre application.</p>
<h3 id="exemples-de-configuration_8">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="80:6"><input checked="checked" id="__tabbed_80_1" name="__tabbed_80" type="radio" /><input id="__tabbed_80_2" name="__tabbed_80" type="radio" /><input id="__tabbed_80_3" name="__tabbed_80" type="radio" /><input id="__tabbed_80_4" name="__tabbed_80" type="radio" /><input id="__tabbed_80_5" name="__tabbed_80" type="radio" /><input id="__tabbed_80_6" name="__tabbed_80" type="radio" /><div class="tabbed-labels"><label for="__tabbed_80_1">Configuration de base</label><label for="__tabbed_80_2">Mode détection uniquement</label><label for="__tabbed_80_3">Configuration avancée avec plugins</label><label for="__tabbed_80_4">Configuration héritée</label><label for="__tabbed_80_5">ModSecurity Global</label><label for="__tabbed_80_6">Version de nuit avec plugins personnalisés</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration standard avec ModSecurity et CRS v4 activés :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour surveiller les menaces potentielles sans bloquer :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DetectionOnly&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_LOG_PARTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ABIJDEFHZ&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec CRS v4 et des plugins activés pour une protection supplémentaire :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions</span><span class="nv"> </span><span class="s">fake-bot&quot;</span>
<span class="nt">MODSECURITY_REQ_BODY_NO_FILES_LIMIT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;262144&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant CRS v3 pour la compatibilité avec des installations plus anciennes :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration appliquant ModSecurity globalement à toutes les connexions HTTP :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">USE_MODSECURITY_GLOBAL_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant la version de nuit du CRS avec des plugins personnalisés :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nightly&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions/v1.0.0</span><span class="nv"> </span><span class="s">https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Valeurs de taille lisibles</p>
</div>
<p>Pour les paramètres de taille comme <code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code>, les suffixes <code>k</code>, <code>m</code>, et <code>g</code> (insensibles à la casse) sont pris en charge et représentent les kibioctets, mébioctets et gibioctets (multiples de 1024). Exemples : <code>256k</code> = 262144, <code>1m</code> = 1048576, <code>2g</code> = 2147483648.</p>
<h2 id="monitoring-pro">Monitoring <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>BunkerWeb monitoring pro system. This plugin is a prerequisite for some other plugins.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MONITORING</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Enable monitoring of BunkerWeb.</td>
</tr>
<tr>
<td><code>MONITORING_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>non</td>
<td>Size of the dict to store monitoring metrics.</td>
</tr>
<tr>
<td><code>MONITORING_IGNORE_URLS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>List of URLs to ignore when monitoring separated with spaces (e.g. /health)</td>
</tr>
</tbody>
</table>
<h2 id="php">PHP</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin PHP fournit l’intégration PHP‑FPM avec BunkerWeb pour exécuter du PHP dynamiquement. Il prend en charge des instances locales (même machine) et distantes, offrant de la flexibilité dans l’architecture.</p>
<p>Comment ça marche :</p>
<ol>
<li>À la demande d’un fichier PHP, BunkerWeb route la requête vers l’instance PHP‑FPM configurée.</li>
<li>En local, la communication se fait via un socket Unix.</li>
<li>À distance, la communication utilise FastCGI vers l’hôte et le port indiqués.</li>
<li>PHP‑FPM exécute le script et renvoie la réponse à BunkerWeb qui la livre au client.</li>
<li>La réécriture d’URL est automatiquement configurée pour les frameworks/applications qui utilisent des « pretty URLs ».</li>
</ol>
<h3 id="comment-lutiliser_20">Comment l’utiliser</h3>
<ol>
<li>Choisissez local vs distant.</li>
<li>Connexion : chemin du socket (local) ou hôte+port (distant).</li>
<li>Racine de documents : pointez vers le dossier contenant vos fichiers PHP.</li>
</ol>
<h3 id="parametres_16">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REMOTE_PHP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Hôte PHP‑FPM distant. Laissez vide pour utiliser le local.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin racine des fichiers côté PHP‑FPM distant.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PORT</code></td>
<td><code>9000</code></td>
<td>multisite</td>
<td>non</td>
<td>Port PHP‑FPM distant.</td>
</tr>
<tr>
<td><code>LOCAL_PHP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin du socket PHP‑FPM local. Laissez vide pour utiliser un PHP‑FPM distant.</td>
</tr>
<tr>
<td><code>LOCAL_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin racine des fichiers côté PHP‑FPM local.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Local vs distant</p>
</div>
<p>Local : meilleures perfs (socket). Distant : flexibilité et scalabilité.</p>
<div class="admonition warning">
<p class="admonition-title">Chemins</p>
</div>
<p><code>REMOTE_PHP_PATH</code>/<code>LOCAL_PHP_PATH</code> doivent correspondre au chemin réel des fichiers sous peine d’erreurs « File not found ».</p>
<div class="admonition info">
<p class="admonition-title">Réécriture d’URL</p>
</div>
<p>Le plugin configure automatiquement la réécriture pour diriger les requêtes vers <code>index.php</code> si le fichier demandé n’existe pas.</p>
<h3 id="exemples_13">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="81:1"><input checked="checked" id="__tabbed_81_1" name="__tabbed_81" type="radio" /><div class="tabbed-labels"><label for="__tabbed_81_1">PHP‑FPM local</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="82:1"><input checked="checked" id="__tabbed_82_1" name="__tabbed_82" type="radio" /><div class="tabbed-labels"><label for="__tabbed_82_1">PHP‑FPM distant</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9000&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="83:1"><input checked="checked" id="__tabbed_83_1" name="__tabbed_83" type="radio" /><div class="tabbed-labels"><label for="__tabbed_83_1">Port personnalisé</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9001&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="84:1"><input checked="checked" id="__tabbed_84_1" name="__tabbed_84" type="radio" /><div class="tabbed-labels"><label for="__tabbed_84_1">WordPress</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html/wordpress&quot;</span>
</code></pre></div>
<h2 id="pro">Pro</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Pro regroupe des fonctionnalités avancées pour les déploiements entreprise de BunkerWeb. Il déverrouille des capacités supplémentaires, des plugins premium et des extensions qui complètent la plateforme BunkerWeb, pour plus de sécurité, de performance et d’options de gestion.</p>
<p>Comment ça marche :</p>
<ol>
<li>Avec une clé de licence Pro valide, BunkerWeb contacte l’API Pro pour valider votre abonnement.</li>
<li>Une fois authentifié, le plugin télécharge et installe automatiquement les plugins et extensions exclusifs Pro.</li>
<li>Le statut Pro est vérifié périodiquement afin d’assurer l’accès continu aux fonctionnalités premium.</li>
<li>Les plugins premium s’intègrent de façon transparente à votre configuration existante.</li>
<li>Les fonctionnalités Pro complètent le cœur open‑source, elles ne le remplacent pas.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Bénéfices clés</p>
<ol>
<li>Extensions premium : accès à des plugins et fonctions exclusives.</li>
<li>Performances accrues : configurations optimisées et mécanismes avancés de cache.</li>
<li>Support entreprise : assistance prioritaire et canaux dédiés.</li>
<li>Intégration fluide : cohabite avec l’édition communautaire sans conflits.</li>
<li>Mises à jour automatiques : plugins premium téléchargés et tenus à jour automatiquement.</li>
</ol>
</div>
<h3 id="comment-lutiliser_21">Comment l’utiliser</h3>
<ol>
<li>Obtenir une licence : achetez une licence Pro depuis le <a href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a>.</li>
<li>Configurer la licence : définissez <code>PRO_LICENSE_KEY</code> avec votre clé.</li>
<li>Laissez BunkerWeb faire le reste : les plugins Pro sont téléchargés et activés automatiquement.</li>
<li>Surveiller le statut Pro : vérifiez les indicateurs de santé dans l’interface <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_17">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PRO_LICENSE_KEY</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Clé de licence BunkerWeb Pro (authentification).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Gestion de licence</p>
</div>
<p>La licence est liée à votre environnement de déploiement. Pour un transfert ou une question d’abonnement, contactez le support via le <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a>.</p>
<div class="admonition info">
<p class="admonition-title">Fonctionnalités Pro</p>
</div>
<p>Le périmètre des fonctionnalités peut évoluer. Le plugin Pro gère automatiquement l’installation et la configuration des capacités disponibles.</p>
<div class="admonition warning">
<p class="admonition-title">Accès réseau</p>
</div>
<p>Le plugin Pro requiert un accès Internet sortant pour contacter l’API BunkerWeb (vérification de licence) et télécharger les plugins premium. Autorisez les connexions HTTPS vers <code>api.bunkerweb.io:443</code>.</p>
<h3 id="faq">FAQ</h3>
<p>Q : Que se passe‑t‑il si ma licence Pro expire ?</p>
<p>R : L’accès aux fonctionnalités premium est désactivé, mais votre installation continue de fonctionner avec l’édition communautaire. Pour réactiver les fonctionnalités Pro, renouvelez la licence.</p>
<p>Q : Les fonctionnalités Pro peuvent‑elles perturber ma configuration existante ?</p>
<p>R : Non. Elles sont conçues pour s’intégrer sans modifier votre configuration actuelle.</p>
<p>Q : Puis‑je essayer Pro avant achat ?</p>
<p>R : Oui. Deux offres existent :</p>
<ul>
<li>BunkerWeb PRO Standard : accès complet, sans support technique.</li>
<li>BunkerWeb PRO Enterprise : accès complet, avec support dédié.</li>
</ul>
<p>Un essai gratuit d’1 mois est disponible avec le code <code>freetrial</code>. Rendez‑vous sur le <a href="https://panel.bunkerweb.io/?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a> pour l’activer.</p>
<h2 id="prometheus-exporter-pro">Prometheus exporter <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Prometheus exporter for BunkerWeb internal metrics.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROMETHEUS_EXPORTER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable the Prometheus export.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>non</td>
<td>Listening IP of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_PORT</code></td>
<td><code>9113</code></td>
<td>global</td>
<td>non</td>
<td>Listening port of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_URL</code></td>
<td><code>/metrics</code></td>
<td>global</td>
<td>non</td>
<td>HTTP URL of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_ALLOW_IP</code></td>
<td><code>127.0.0.0/8 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16</code></td>
<td>global</td>
<td>non</td>
<td>List of IP/networks allowed to contact the Prometheus exporter endpoint.</td>
</tr>
</tbody>
</table>
<h2 id="real-ip">Real IP</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Real IP garantit que BunkerWeb identifie correctement l’adresse IP du client même derrière des proxys. Indispensable pour appliquer les règles de sécurité, la limitation de débit et des logs fiables : sinon toutes les requêtes sembleraient venir de l’IP du proxy.</p>
<p>Comment ça marche :</p>
<ol>
<li>Activé, BunkerWeb inspecte les en‑têtes (ex. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-For"><code>X-Forwarded-For</code></a>) contenant l’IP d’origine.</li>
<li>Il vérifie que l’IP source figure dans <code>REAL_IP_FROM</code> (liste de proxys de confiance) pour n’accepter que les proxys légitimes.</li>
<li>L’IP client est extraite de l’en‑tête <code>REAL_IP_HEADER</code> et utilisée pour l’évaluation sécurité et la journalisation.</li>
<li>En chaînes d’IPs, une recherche récursive peut déterminer l’IP d’origine via <code>REAL_IP_RECURSIVE</code>.</li>
<li>Le support du <a href="https://netnut.io/what-is-proxy-protocol-and-how-does-it-work/">PROXY protocol</a> peut être activé pour recevoir l’IP client directement depuis des proxys compatibles (ex. <a href="https://www.haproxy.org/">HAProxy</a>).</li>
<li>Les listes d’IP de proxys de confiance peuvent être téléchargées automatiquement via des URLs.</li>
</ol>
<h3 id="comment-lutiliser_22">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_REAL_IP: yes</code>.</li>
<li>Proxys de confiance : renseignez IP/plages dans <code>REAL_IP_FROM</code>.</li>
<li>En‑tête : indiquez lequel porte l’IP réelle via <code>REAL_IP_HEADER</code>.</li>
<li>Récursif : activez <code>REAL_IP_RECURSIVE</code> si nécessaire.</li>
<li>Sources URL : utilisez <code>REAL_IP_FROM_URLS</code> pour télécharger des listes.</li>
<li>PROXY protocol : activez <code>USE_PROXY_PROTOCOL</code> si l’amont le supporte.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Avertissement PROXY protocol</p>
</div>
<p>Activer <code>USE_PROXY_PROTOCOL</code> sans un amont correctement configuré pour l’émettre cassera votre application. Assurez‑vous de l’avoir configuré avant activation.</p>
<h3 id="parametres_18">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REAL_IP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la récupération de l’IP réelle depuis les en‑têtes ou le PROXY protocol.</td>
</tr>
<tr>
<td><code>REAL_IP_FROM</code></td>
<td><code>192.168.0.0/16 172.16.0.0/12 10.0.0.0/8</code></td>
<td>multisite</td>
<td>non</td>
<td>Proxys de confiance : liste d’IP/réseaux séparés par des espaces.</td>
</tr>
<tr>
<td><code>REAL_IP_HEADER</code></td>
<td><code>X-Forwarded-For</code></td>
<td>multisite</td>
<td>non</td>
<td>En‑tête porteur de l’IP réelle ou valeur spéciale <code>proxy_protocol</code>.</td>
</tr>
<tr>
<td><code>REAL_IP_RECURSIVE</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Recherche récursive dans un en‑tête contenant plusieurs IPs.</td>
</tr>
<tr>
<td><code>REAL_IP_FROM_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs fournissant des IPs/réseaux de proxys de confiance (supporte <code>file://</code>).</td>
</tr>
<tr>
<td><code>USE_PROXY_PROTOCOL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Activer le support PROXY protocol pour la communication directe proxy→BunkerWeb.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Fournisseurs cloud</p>
</div>
<p>Ajoutez les IP de vos load balancers (AWS/GCP/Azure…) à <code>REAL_IP_FROM</code> pour une identification correcte.</p>
<div class="admonition danger">
<p class="admonition-title">Considérations sécurité</p>
</div>
<p>N’ajoutez que des sources de confiance, sinon risque d’usurpation d’IP via en‑têtes manipulés.</p>
<div class="admonition info">
<p class="admonition-title">Multiples adresses</p>
</div>
<p>Avec <code>REAL_IP_RECURSIVE</code>, si l’en‑tête contient plusieurs IPs, la première non listée comme proxy de confiance est retenue comme IP client.</p>
<h3 id="exemples_14">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="85:1"><input checked="checked" id="__tabbed_85_1" name="__tabbed_85" type="radio" /><div class="tabbed-labels"><label for="__tabbed_85_1">Basique (derrière reverse proxy)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.5&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
</code></pre></div>
<h2 id="redirect">Redirect</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Redirect fournit des redirections HTTP simples et efficaces. Il permet de rediriger des visiteurs d’une URL à une autre, pour un domaine entier, des chemins précis, avec ou sans conservation du chemin d’origine.</p>
<p>Comment ça marche :</p>
<ol>
<li>À l’accès d’un visiteur, BunkerWeb vérifie si une redirection est définie.</li>
<li>Si activée, il redirige vers l’URL de destination.</li>
<li>Vous pouvez préserver le chemin d’origine (<code>REDIRECT_TO_REQUEST_URI: yes</code>).</li>
<li>Le code HTTP peut être <code>301</code> (permanent) ou <code>302</code> (temporaire).</li>
<li>Idéal pour migrations, canonicals, URLs obsolètes.</li>
</ol>
<h3 id="comment-lutiliser_23">Comment l’utiliser</h3>
<ol>
<li>Source : <code>REDIRECT_FROM</code> (ex. <code>/</code>, <code>/old-page</code>).</li>
<li>Destination : <code>REDIRECT_TO</code>.</li>
<li>Type : <code>REDIRECT_TO_REQUEST_URI</code> pour conserver le chemin.</li>
<li>Code : <code>REDIRECT_TO_STATUS_CODE</code> (<code>301</code> ou <code>302</code>).</li>
</ol>
<h3 id="parametres_19">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_FROM</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>oui</td>
<td>Chemin source à rediriger.</td>
</tr>
<tr>
<td><code>REDIRECT_TO</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de destination. Laisser vide pour désactiver.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_REQUEST_URI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>oui</td>
<td>Conserver le chemin d’origine en l’ajoutant à l’URL de destination.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_STATUS_CODE</code></td>
<td><code>301</code></td>
<td>multisite</td>
<td>oui</td>
<td>Code de statut HTTP : <code>301</code> (permanent) ou <code>302</code> (temporaire).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Choisir le bon code</p>
</div>
<p><code>301</code> pour une redirection permanente (migrations, canonicals). <code>302</code> pour temporaire.</p>
<div class="admonition info">
<p class="admonition-title">Conservation du chemin</p>
</div>
<p>Avec <code>REDIRECT_TO_REQUEST_URI: yes</code>, <code>/blog/post-1</code> vers <code>https://new.com</code> devient <code>https://new.com/blog/post-1</code>.</p>
<h3 id="exemples_15">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="86:1"><input checked="checked" id="__tabbed_86_1" name="__tabbed_86" type="radio" /><div class="tabbed-labels"><label for="__tabbed_86_1">Multiples chemins</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/blog/&quot;</span>
<span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://blog.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="nt">REDIRECT_FROM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/shop/&quot;</span>
<span class="nt">REDIRECT_TO_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://shop.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="nt">REDIRECT_FROM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REDIRECT_TO_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="87:1"><input checked="checked" id="__tabbed_87_1" name="__tabbed_87" type="radio" /><div class="tabbed-labels"><label for="__tabbed_87_1">Domaine entier</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="88:1"><input checked="checked" id="__tabbed_88_1" name="__tabbed_88" type="radio" /><div class="tabbed-labels"><label for="__tabbed_88_1">Conserver le chemin</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="89:1"><input checked="checked" id="__tabbed_89_1" name="__tabbed_89" type="radio" /><div class="tabbed-labels"><label for="__tabbed_89_1">Temporaire</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://maintenance.example.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;302&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="90:1"><input checked="checked" id="__tabbed_90_1" name="__tabbed_90" type="radio" /><div class="tabbed-labels"><label for="__tabbed_90_1">Sous‑domaine → chemin</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/support&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
<h2 id="redis">Redis</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Redis intègre <a href="https://redis.io/">Redis</a> ou <a href="https://valkey.io/">Valkey</a> à BunkerWeb pour la mise en cache et l’accès rapide aux données. Essentiel en haute disponibilité pour partager sessions, métriques et autres informations entre plusieurs nœuds.</p>
<p>Comment ça marche :</p>
<ol>
<li>Activé, BunkerWeb se connecte au serveur Redis/Valkey configuré.</li>
<li>Les données critiques (sessions, métriques, sécurité) y sont stockées.</li>
<li>Plusieurs instances partagent ces données pour un clustering fluide.</li>
<li>Prend en charge déploiements standalone, auth par mot de passe, SSL/TLS et Redis Sentinel.</li>
<li>Reconnexion automatique et timeouts configurables pour la robustesse.</li>
</ol>
<h3 id="comment-lutiliser_24">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_REDIS: yes</code>.</li>
<li>Connexion : hôte/IP et port.</li>
<li>Sécurité : identifiants si requis.</li>
<li>Avancé : base, SSL et timeouts.</li>
<li>Haute dispo : configurez Sentinel si utilisé.</li>
</ol>
<h3 id="parametres_20">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REDIS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Activer l’intégration Redis/Valkey (mode cluster).</td>
</tr>
<tr>
<td><code>REDIS_HOST</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Hôte/IP du serveur Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_PORT</code></td>
<td><code>6379</code></td>
<td>global</td>
<td>non</td>
<td>Port Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_DATABASE</code></td>
<td><code>0</code></td>
<td>global</td>
<td>non</td>
<td>Numéro de base (0–15).</td>
</tr>
<tr>
<td><code>REDIS_SSL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Activer SSL/TLS.</td>
</tr>
<tr>
<td><code>REDIS_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Vérifier le certificat SSL du serveur.</td>
</tr>
<tr>
<td><code>REDIS_TIMEOUT</code></td>
<td><code>5</code></td>
<td>global</td>
<td>non</td>
<td>Timeout (secondes).</td>
</tr>
<tr>
<td><code>REDIS_USERNAME</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Nom d’utilisateur (Redis ≥ 6.0).</td>
</tr>
<tr>
<td><code>REDIS_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Mot de passe.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_HOSTS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Hôtes Sentinel (séparés par espaces, <code>hôte:port</code>).</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_USERNAME</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Utilisateur Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Mot de passe Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_MASTER</code></td>
<td><code>mymaster</code></td>
<td>global</td>
<td>non</td>
<td>Nom du master Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_IDLE</code></td>
<td><code>300</code></td>
<td>global</td>
<td>non</td>
<td>Intervalle keepalive TCP (secondes) pour connexions inactives.</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_POOL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>non</td>
<td>Nb max de connexions conservées dans le pool.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Haute disponibilité</p>
</div>
<p>Configurez Redis Sentinel pour un failover automatique en production.</p>
<p>!!! warning "Sécurité" - Mots de passe forts pour Redis et Sentinel - Envisagez SSL/TLS - Ne pas exposer Redis sur Internet - Restreignez l’accès au port Redis (pare‑feu, segmentation)</p>
<h3 id="exemples_16">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="91:1"><input checked="checked" id="__tabbed_91_1" name="__tabbed_91" type="radio" /><div class="tabbed-labels"><label for="__tabbed_91_1">Configuration basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="92:1"><input checked="checked" id="__tabbed_92_1" name="__tabbed_92" type="radio" /><div class="tabbed-labels"><label for="__tabbed_92_1">Configuration sécurisée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="93:1"><input checked="checked" id="__tabbed_93_1" name="__tabbed_93" type="radio" /><div class="tabbed-labels"><label for="__tabbed_93_1">Redis Sentinel</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SENTINEL_HOSTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel1:26379</span><span class="nv"> </span><span class="s">sentinel2:26379</span><span class="nv"> </span><span class="s">sentinel3:26379&quot;</span>
<span class="nt">REDIS_SENTINEL_MASTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mymaster&quot;</span>
<span class="nt">REDIS_SENTINEL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel-password&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis-password&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="94:1"><input checked="checked" id="__tabbed_94_1" name="__tabbed_94" type="radio" /><div class="tabbed-labels"><label for="__tabbed_94_1">Tuning avancé</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_KEEPALIVE_IDLE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">REDIS_KEEPALIVE_POOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
<h2 id="reporting-pro">Reporting <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Regular reporting of important data from BunkerWeb (global, attacks, bans, requests, reasons, AS...). Monitoring pro plugin needed to work.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REPORTING_SMTP</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable sending the report via email.</td>
</tr>
<tr>
<td><code>USE_REPORTING_WEBHOOK</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable sending the report via webhook.</td>
</tr>
<tr>
<td><code>REPORTING_SCHEDULE</code></td>
<td><code>weekly</code></td>
<td>global</td>
<td>non</td>
<td>The frequency at which reports are sent.</td>
</tr>
<tr>
<td><code>REPORTING_WEBHOOK_URLS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>List of webhook URLs to receive the report in Markdown (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_EMAILS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>List of email addresses to receive the report in HTML format (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_HOST</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The host server used for SMTP sending.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_PORT</code></td>
<td><code>465</code></td>
<td>global</td>
<td>non</td>
<td>The port used for SMTP. Please note that there are different standards depending on the type of connection (SSL = 465, TLS = 587).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_EMAIL</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The email address used as the sender. Note that 2FA must be disabled for this email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_USER</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The user authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The password authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SSL</code></td>
<td><code>SSL</code></td>
<td>global</td>
<td>non</td>
<td>Determine whether or not to use a secure connection for SMTP.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SUBJECT</code></td>
<td><code>BunkerWeb Report</code></td>
<td>global</td>
<td>non</td>
<td>The subject line of the email.</td>
</tr>
</tbody>
</table>
<h2 id="reverse-proxy">Reverse proxy</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Reverse Proxy offre des capacités de proxy transparentes pour BunkerWeb, vous permettant de router les requêtes vers des serveurs et services backend. Cette fonctionnalité permet à BunkerWeb d'agir comme une façade sécurisée pour vos applications tout en offrant des avantages supplémentaires tels que la terminaison SSL et le filtrage de sécurité.</p>
<p><strong>Comment ça marche :</strong></p>
<ol>
<li>Lorsqu'un client envoie une requête à BunkerWeb, le plugin Reverse Proxy la transmet à votre serveur backend configuré.</li>
<li>BunkerWeb ajoute des en-têtes de sécurité, applique des règles WAF et effectue d'autres contrôles de sécurité avant de transmettre les requêtes à votre application.</li>
<li>Le serveur backend traite la requête et renvoie une réponse à BunkerWeb.</li>
<li>BunkerWeb applique des mesures de sécurité supplémentaires à la réponse avant de la renvoyer au client.</li>
<li>Le plugin prend en charge le proxying de flux HTTP et TCP/UDP, permettant un large éventail d'applications, y compris les WebSockets et d'autres protocoles non-HTTP.</li>
</ol>
<h3 id="comment-lutiliser_25">Comment l’utiliser</h3>
<p>Suivez ces étapes pour configurer et utiliser la fonctionnalité Reverse Proxy :</p>
<ol>
<li><strong>Activer la fonctionnalité :</strong> Mettez le paramètre <code>USE_REVERSE_PROXY</code> à <code>yes</code> pour activer la fonctionnalité de reverse proxy.</li>
<li><strong>Configurer vos serveurs backend :</strong> Spécifiez les serveurs en amont à l'aide du paramètre <code>REVERSE_PROXY_HOST</code>.</li>
<li><strong>Ajuster les paramètres du proxy :</strong> Affinez le comportement avec des paramètres optionnels pour les délais d'attente, les tailles de tampon, et d'autres paramètres.</li>
<li><strong>Configurer les options spécifiques au protocole :</strong> Pour les WebSockets ou des exigences HTTP spéciales, ajustez les paramètres correspondants.</li>
<li><strong>Mettre en place la mise en cache (optionnel) :</strong> Activez et configurez la mise en cache du proxy pour améliorer les performances pour le contenu fréquemment accédé.</li>
</ol>
<h3 id="guide-de-configuration_2">Guide de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="95:8"><input checked="checked" id="__tabbed_95_1" name="__tabbed_95" type="radio" /><input id="__tabbed_95_2" name="__tabbed_95" type="radio" /><input id="__tabbed_95_3" name="__tabbed_95" type="radio" /><input id="__tabbed_95_4" name="__tabbed_95" type="radio" /><input id="__tabbed_95_5" name="__tabbed_95" type="radio" /><input id="__tabbed_95_6" name="__tabbed_95" type="radio" /><input id="__tabbed_95_7" name="__tabbed_95" type="radio" /><input id="__tabbed_95_8" name="__tabbed_95" type="radio" /><div class="tabbed-labels"><label for="__tabbed_95_1">Configuration de base</label><label for="__tabbed_95_2">Paramètres de connexion</label><label for="__tabbed_95_3">Configuration SSL/TLS</label><label for="__tabbed_95_4">Support des protocoles</label><label for="__tabbed_95_5">Gestion des en-têtes</label><label for="__tabbed_95_6">Authentification</label><label for="__tabbed_95_7">Configuration avancée</label><label for="__tabbed_95_8">Configuration du cache</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Paramètres principaux</strong></p>
<p>Les paramètres de configuration essentiels activent et contrôlent la fonctionnalité de base du reverse proxy.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices du Reverse Proxy</p>
<ul>
<li><strong>Amélioration de la sécurité :</strong> Tout le trafic passe par les couches de sécurité de BunkerWeb avant d'atteindre vos applications</li>
<li><strong>Terminaison SSL :</strong> Gérez les certificats SSL/TLS de manière centralisée tandis que les services backend peuvent utiliser des connexions non chiffrées</li>
<li><strong>Gestion des protocoles :</strong> Prise en charge de HTTP, HTTPS, WebSockets, et d'autres protocoles</li>
<li><strong>Interception des erreurs :</strong> Personnalisez les pages d'erreur pour une expérience utilisateur cohérente</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_PROXY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer le Reverse Proxy :</strong> Mettre à <code>yes</code> pour activer la fonctionnalité de reverse proxy.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HOST</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Hôte Backend :</strong> URL complète de la ressource proxifiée (proxy_pass).</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL d'emplacement :</strong> Chemin qui sera proxifié vers le serveur backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_BUFFERING</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Mise en tampon de la réponse :</strong> Active ou désactive la mise en tampon des réponses de la ressource proxifiée.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_KEEPALIVE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Keep-Alive :</strong> Active ou désactive les connexions keepalive avec la ressource proxifiée.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_CUSTOM_HOST</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Hôte personnalisé :</strong> Remplace l'en-tête Host envoyé au serveur en amont.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_INTERCEPT_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Intercepter les erreurs :</strong> Intercepte et réécrit les réponses d'erreur du backend.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Spécifiez toujours l'URL complète dans <code>REVERSE_PROXY_HOST</code>, y compris le protocole (http:// ou https://)</li>
<li>Utilisez <code>REVERSE_PROXY_INTERCEPT_ERRORS</code> pour fournir des pages d'erreur cohérentes sur tous vos services</li>
<li>Lors de la configuration de plusieurs backends, utilisez le format de suffixe numéroté (par exemple, <code>REVERSE_PROXY_HOST_2</code>, <code>REVERSE_PROXY_URL_2</code>)</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration des connexions et des délais d'attente</strong></p>
<p>Ces paramètres contrôlent le comportement des connexions, la mise en tampon et les valeurs de délai d'attente pour les connexions proxifiées.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Performance optimisée :</strong> Ajustez les tailles de tampon et les paramètres de connexion en fonction des besoins de votre application</li>
<li><strong>Gestion des ressources :</strong> Contrôlez l'utilisation de la mémoire grâce à des configurations de tampon appropriées</li>
<li><strong>Fiabilité :</strong> Configurez des délais d'attente appropriés pour gérer les connexions lentes ou les problèmes de backend</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_CONNECT_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Délai de connexion :</strong> Temps maximum pour établir une connexion avec le serveur backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_READ_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Délai de lecture :</strong> Temps maximum entre les transmissions de deux paquets successifs depuis le serveur backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SEND_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Délai d'envoi :</strong> Temps maximum entre les transmissions de deux paquets successifs vers le serveur backend.</td>
</tr>
<tr>
<td><code>PROXY_BUFFERS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tampons :</strong> Nombre et taille des tampons pour lire la réponse du serveur backend.</td>
</tr>
<tr>
<td><code>PROXY_BUFFER_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Taille du tampon :</strong> Taille du tampon pour lire la première partie de la réponse du serveur backend.</td>
</tr>
<tr>
<td><code>PROXY_BUSY_BUFFERS_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Taille des tampons occupés :</strong> Taille des tampons qui peuvent être occupés à envoyer une réponse au client.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Considérations sur les délais d'attente</p>
<ul>
<li>Des délais trop courts peuvent interrompre des connexions légitimes mais lentes</li>
<li>Des délais trop longs peuvent laisser des connexions ouvertes inutilement, épuisant potentiellement les ressources</li>
<li>Pour les applications WebSocket, augmentez considérablement les délais de lecture et d'envoi (300s ou plus recommandé)</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Paramètres SSL/TLS pour les connexions Backend</strong></p>
<p>Ces paramètres contrôlent la manière dont BunkerWeb établit des connexions sécurisées avec les serveurs backend.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Chiffrement de bout en bout :</strong> Maintenez des connexions chiffrées du client au backend</li>
<li><strong>Validation des certificats :</strong> Contrôlez la validation des certificats des serveurs backend</li>
<li><strong>Support SNI :</strong> Spécifiez l'indication du nom du serveur (SNI) pour les backends hébergeant plusieurs sites</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>SSL SNI :</strong> Active ou désactive l'envoi du SNI (Server Name Indication) à l'amont.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI_NAME</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Nom SSL SNI :</strong> Définit le nom d'hôte SNI à envoyer à l'amont lorsque le SSL SNI est activé.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Explication du SNI</p>
<p>L'Indication du Nom du Serveur (SNI) est une extension TLS qui permet à un client de spécifier le nom d'hôte auquel il tente de se connecter pendant la négociation. Cela permet aux serveurs de présenter plusieurs certificats sur la même adresse IP et le même port, permettant ainsi de servir plusieurs sites web sécurisés (HTTPS) à partir d'une seule adresse IP sans que tous ces sites n'utilisent le même certificat.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration spécifique aux protocoles</strong></p>
<p>Configurez la gestion de protocoles spéciaux, notamment pour les WebSockets et autres protocoles non-HTTP.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Flexibilité des protocoles :</strong> Le support des WebSockets permet des applications en temps réel</li>
<li><strong>Applications web modernes :</strong> Activez des fonctionnalités interactives nécessitant une communication bidirectionnelle</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_WS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Support WebSocket :</strong> Active le protocole WebSocket sur la ressource.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Configuration WebSocket</p>
<ul>
<li>Lors de l'activation des WebSockets avec <code>REVERSE_PROXY_WS: "yes"</code>, envisagez d'augmenter les valeurs des délais d'attente</li>
<li>Les connexions WebSocket restent ouvertes plus longtemps que les connexions HTTP typiques</li>
<li>Pour les applications WebSocket, une configuration recommandée est :
  <div class="highlight"><pre><span></span><code><span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div></li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration des en-têtes HTTP</strong></p>
<p>Contrôlez quels en-têtes sont envoyés aux serveurs backend et aux clients, vous permettant d'ajouter, de modifier ou de préserver des en-têtes HTTP.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Contrôle de l'information :</strong> Gérez précisément les informations partagées entre les clients et les backends</li>
<li><strong>Amélioration de la sécurité :</strong> Ajoutez des en-têtes liés à la sécurité ou supprimez ceux qui pourraient divulguer des informations sensibles</li>
<li><strong>Support d'intégration :</strong> Fournissez les en-têtes nécessaires à l'authentification et au bon fonctionnement du backend</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_HEADERS</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>En-têtes personnalisés :</strong> En-têtes HTTP à envoyer au backend, séparés par des points-virgules.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HIDE_HEADERS</code></td>
<td><code>Upgrade</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Cacher les en-têtes :</strong> En-têtes HTTP à cacher aux clients lorsqu'ils sont reçus du backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HEADERS_CLIENT</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>En-têtes client :</strong> En-têtes HTTP à envoyer au client, séparés par des points-virgules.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_UNDERSCORES_IN_HEADERS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Underscores dans les en-têtes :</strong> Active ou désactive la directive <code>underscores_in_headers</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Considérations de sécurité</p>
<p>Lors de l'utilisation de la fonctionnalité de reverse proxy, soyez prudent quant aux en-têtes que vous transmettez à vos applications backend. Certains en-têtes peuvent exposer des informations sensibles sur votre infrastructure ou contourner les contrôles de sécurité.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Exemples de format d'en-tête</p>
<p>En-têtes personnalisés vers les serveurs backend :
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS: &quot;X-Real-IP $remote_addr;X-Forwarded-For $proxy_add_x_forwarded_for;X-Forwarded-Proto $scheme&quot;
</code></pre></div></p>
<p>En-têtes personnalisés vers les clients :
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS_CLIENT: &quot;X-Powered-By BunkerWeb;X-Frame-Options SAMEORIGIN&quot;
</code></pre></div></p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration de l'authentification externe</strong></p>
<p>Intégrez avec des systèmes d'authentification externes pour centraliser la logique d'autorisation à travers vos applications.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Authentification centralisée :</strong> Mettez en œuvre un point d'authentification unique pour plusieurs applications</li>
<li><strong>Sécurité cohérente :</strong> Appliquez des politiques d'authentification uniformes sur différents services</li>
<li><strong>Contrôle amélioré :</strong> Transmettez les détails d'authentification aux applications backend via des en-têtes ou des variables</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Requête d'authentification :</strong> Active l'authentification via un fournisseur externe.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL de connexion :</strong> Redirige les clients vers l'URL de connexion en cas d'échec de l'authentification.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SET</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Variables d'authentification :</strong> Variables à définir à partir du fournisseur d'authentification.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Intégration de l'authentification</p>
<ul>
<li>La fonctionnalité de requête d'authentification permet la mise en œuvre de microservices d'authentification centralisés</li>
<li>Votre service d'authentification doit renvoyer un code de statut 200 pour une authentification réussie ou 401/403 en cas d'échec</li>
<li>Utilisez la directive auth_request_set pour extraire et transmettre des informations du service d'authentification</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Options de configuration supplémentaires</strong></p>
<p>Ces paramètres offrent une personnalisation plus poussée du comportement du reverse proxy pour des scénarios spécialisés.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Personnalisation :</strong> Incluez des extraits de configuration supplémentaires pour des exigences complexes</li>
<li><strong>Optimisation des performances :</strong> Affinez la gestion des requêtes pour des cas d'usage spécifiques</li>
<li><strong>Flexibilité :</strong> Adaptez-vous aux exigences uniques de l'application avec des configurations spécialisées</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_INCLUDES</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Configurations supplémentaires :</strong> Incluez des configurations additionnelles dans le bloc location.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_PASS_REQUEST_BODY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Passer le corps de la requête :</strong> Active ou désactive la transmission du corps de la requête.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Considérations de sécurité</p>
<p>Soyez prudent lorsque vous incluez des extraits de configuration personnalisés car ils peuvent outrepasser les paramètres de sécurité de BunkerWeb ou introduire des vulnérabilités s'ils ne sont pas correctement configurés.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Paramètres de mise en cache des réponses</strong></p>
<p>Améliorez les performances en mettant en cache les réponses des serveurs backend, réduisant ainsi la charge et améliorant les temps de réponse.</p>
<div class="admonition success">
<p class="admonition-title">Bénéfices</p>
<ul>
<li><strong>Performance :</strong> Réduisez la charge sur les serveurs backend en servant du contenu mis en cache</li>
<li><strong>Latence réduite :</strong> Temps de réponse plus rapides pour le contenu fréquemment demandé</li>
<li><strong>Économies de bande passante :</strong> Minimisez le trafic réseau interne en mettant en cache les réponses</li>
<li><strong>Personnalisation :</strong> Configurez exactement quoi, quand et comment le contenu est mis en cache</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROXY_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer le cache :</strong> Mettre à <code>yes</code> pour activer la mise en cache des réponses du backend.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_LEVELS</code></td>
<td><code>1:2</code></td>
<td>global</td>
<td>no</td>
<td><strong>Niveaux de chemin du cache :</strong> Comment structurer la hiérarchie du répertoire de cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_ZONE_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Taille de la zone de cache :</strong> Taille de la zone de mémoire partagée utilisée pour les métadonnées du cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_PARAMS</code></td>
<td><code>max_size=100m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Paramètres du chemin de cache :</strong> Paramètres supplémentaires pour le chemin de cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_METHODS</code></td>
<td><code>GET HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Méthodes de cache :</strong> Méthodes HTTP qui peuvent être mises en cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utilisations min. pour cache :</strong> Nombre minimum de requêtes avant qu'une réponse ne soit mise en cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_KEY</code></td>
<td><code>$scheme$host$request_uri</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clé de cache :</strong> La clé utilisée pour identifier de manière unique une réponse mise en cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_VALID</code></td>
<td><code>200=24h 301=1h 302=24h</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validité du cache :</strong> Durée de mise en cache pour des codes de réponse spécifiques.</td>
</tr>
<tr>
<td><code>PROXY_NO_CACHE</code></td>
<td><code>$http_pragma $http_authorization</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Pas de cache :</strong> Conditions pour ne pas mettre en cache les réponses même si elles sont normalement cachables.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_BYPASS</code></td>
<td><code>0</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Contournement du cache :</strong> Conditions sous lesquelles contourner le cache.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques de mise en cache</p>
<ul>
<li>Ne mettez en cache que le contenu qui ne change pas fréquemment ou qui n'est pas personnalisé</li>
<li>Utilisez des durées de cache appropriées en fonction du type de contenu (les ressources statiques peuvent être mises en cache plus longtemps)</li>
<li>Configurez <code>PROXY_NO_CACHE</code> pour éviter de mettre en cache du contenu sensible ou personnalisé</li>
<li>Surveillez les taux de réussite du cache et ajustez les paramètres en conséquence</li>
</ul>
</div>
</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">Utilisateurs de Docker Compose - Variables NGINX</p>
</div>
<p>Lorsque vous utilisez Docker Compose avec des variables NGINX dans vos configurations, vous devez échapper le signe dollar (<code>$</code>) en utilisant des doubles signes dollar (<code>$$</code>). Cela s'applique à tous les paramètres contenant des variables NGINX comme <code>$remote_addr</code>, <code>$proxy_add_x_forwarded_for</code>, etc.</p>
<pre><code>Sans cet échappement, Docker Compose essaiera de substituer ces variables par des variables d'environnement, qui n'existent généralement pas, ce qui entraînera des valeurs vides dans votre configuration NGINX.
</code></pre>
<h3 id="exemples-de-configuration_9">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="96:6"><input checked="checked" id="__tabbed_96_1" name="__tabbed_96" type="radio" /><input id="__tabbed_96_2" name="__tabbed_96" type="radio" /><input id="__tabbed_96_3" name="__tabbed_96" type="radio" /><input id="__tabbed_96_4" name="__tabbed_96" type="radio" /><input id="__tabbed_96_5" name="__tabbed_96" type="radio" /><input id="__tabbed_96_6" name="__tabbed_96" type="radio" /><div class="tabbed-labels"><label for="__tabbed_96_1">Proxy HTTP de base</label><label for="__tabbed_96_2">Application WebSocket</label><label for="__tabbed_96_3">Emplacements multiples</label><label for="__tabbed_96_4">Configuration du cache</label><label for="__tabbed_96_5">Gestion avancée des en-têtes</label><label for="__tabbed_96_6">Intégration de l'authentification</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple pour proxifier les requêtes HTTP vers un serveur d'application backend :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration optimisée pour une application WebSocket avec des délais d'attente plus longs :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://websocket-app:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour router différents chemins vers différents services backend :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Backend API</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://api-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/&quot;</span>

<span class="c1"># Backend Admin</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://admin-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>

<span class="c1"># Application Frontend</span>
<span class="nt">REVERSE_PROXY_HOST_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://frontend:3000&quot;</span>
<span class="nt">REVERSE_PROXY_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec mise en cache du proxy activée pour de meilleures performances :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">USE_PROXY_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">PROXY_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200=24h</span><span class="nv"> </span><span class="s">301=1h</span><span class="nv"> </span><span class="s">302=24h&quot;</span>
<span class="nt">PROXY_CACHE_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET</span><span class="nv"> </span><span class="s">HEAD&quot;</span>
<span class="nt">PROXY_NO_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$http_authorization&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec manipulation personnalisée des en-têtes :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># En-têtes personnalisés vers le backend</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP</span><span class="nv"> </span><span class="s">$remote_addr;X-Forwarded-For</span><span class="nv"> </span><span class="s">$proxy_add_x_forwarded_for;X-Forwarded-Proto</span><span class="nv"> </span><span class="s">$scheme&quot;</span>

<span class="c1"># En-têtes personnalisés vers le client</span>
<span class="nt">REVERSE_PROXY_HEADERS_CLIENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Powered-By</span><span class="nv"> </span><span class="s">BunkerWeb;X-Frame-Options</span><span class="nv"> </span><span class="s">SAMEORIGIN&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec authentification externe :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># Configuration de l&#39;authentification</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://login.example.com&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$auth_user</span><span class="nv"> </span><span class="s">$upstream_http_x_user;$auth_role</span><span class="nv"> </span><span class="s">$upstream_http_x_role&quot;</span>

<span class="c1"># Backend du service d&#39;authentification</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://auth-service:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="reverse-scan">Reverse scan</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Reverse Scan protège contre les tentatives de contournement via proxy en scannant certains ports côté client pour détecter des proxys/serveurs ouverts. Il aide à identifier et bloquer les clients qui tentent de masquer leur identité ou leur origine.</p>
<p>Comment ça marche :</p>
<ol>
<li>À la connexion d’un client, BunkerWeb tente de scanner des ports spécifiques sur l’IP du client.</li>
<li>Les ports de proxy courants (80, 443, 8080, etc.) sont vérifiés.</li>
<li>Si des ports ouverts sont détectés (signe d’un proxy), la connexion est refusée.</li>
<li>Cela ajoute une couche contre bots/outils automatisés et utilisateurs malveillants.</li>
</ol>
<h3 id="comment-lutiliser_26">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_REVERSE_SCAN: yes</code>.</li>
<li>Ports : personnalisez <code>REVERSE_SCAN_PORTS</code>.</li>
<li>Timeout : ajustez <code>REVERSE_SCAN_TIMEOUT</code> pour l’équilibre sécurité/performance.</li>
<li>Suivi : consultez les logs et la <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_21">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_SCAN</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer l’analyse des ports côté client.</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_PORTS</code></td>
<td><code>22 80 443 3128 8000 8080</code></td>
<td>multisite</td>
<td>non</td>
<td>Ports à vérifier (séparés par des espaces).</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_TIMEOUT</code></td>
<td><code>500</code></td>
<td>multisite</td>
<td>non</td>
<td>Délai max par port en millisecondes.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Performance</p>
</div>
<p>Scanner de nombreux ports ajoute de la latence. Limitez la liste et adaptez le timeout.</p>
<div class="admonition info">
<p class="admonition-title">Ports de proxy courants</p>
</div>
<p>La configuration par défaut inclut 80, 443, 8080, 3128 et SSH (22). Adaptez selon votre modèle de menace.</p>
<h3 id="exemples_17">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="97:1"><input checked="checked" id="__tabbed_97_1" name="__tabbed_97" type="radio" /><div class="tabbed-labels"><label for="__tabbed_97_1">Basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="98:1"><input checked="checked" id="__tabbed_98_1" name="__tabbed_98" type="radio" /><div class="tabbed-labels"><label for="__tabbed_98_1">Approfondi</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">8081&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="99:1"><input checked="checked" id="__tabbed_99_1" name="__tabbed_99" type="radio" /><div class="tabbed-labels"><label for="__tabbed_99_1">Optimisé performance</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="100:1"><input checked="checked" id="__tabbed_100_1" name="__tabbed_100" type="radio" /><div class="tabbed-labels"><label for="__tabbed_100_1">Haute sécurité</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">25</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">4444</span><span class="nv"> </span><span class="s">5555</span><span class="nv"> </span><span class="s">6588</span><span class="nv"> </span><span class="s">6666</span><span class="nv"> </span><span class="s">7777</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8081</span><span class="nv"> </span><span class="s">8800</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">9999&quot;</span>
</code></pre></div>
<h2 id="robotstxt">Robots.txt</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Robots.txt gère le fichier <a href="https://www.robotstxt.org/">robots.txt</a> de votre site, indiquant aux robots les zones autorisées/interdites.</p>
<p>Comment ça marche :</p>
<p>Activé, BunkerWeb génère dynamiquement <code>/robots.txt</code> à la racine. Les règles sont agrégées dans l’ordre :</p>
<ol>
<li>DarkVisitors (si <code>ROBOTSTXT_DARKVISITORS_TOKEN</code>) : bloque des bots/IA connus selon <code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code> et <code>ROBOTSTXT_DARKVISITORS_DISALLOW</code>.</li>
<li>Listes communautaires (<code>ROBOTSTXT_COMMUNITY_LISTS</code>).</li>
<li>URLs personnalisées (<code>ROBOTSTXT_URLS</code>).</li>
<li>Règles manuelles (<code>ROBOTSTXT_RULE[_N]</code>).</li>
</ol>
<p>Ensuite, les règles à ignorer (<code>ROBOTSTXT_IGNORE_RULE[_N]</code>, PCRE) sont filtrées. S’il ne reste rien, un <code>User-agent: *</code> + <code>Disallow: /</code> par défaut est appliqué. Des sitemaps (<code>ROBOTSTXT_SITEMAP[_N]</code>) peuvent être ajoutés.</p>
<h3 id="darkvisitors">DarkVisitors</h3>
<p><a href="https://darkvisitors.com/">DarkVisitors</a> fournit un <code>robots.txt</code> dynamique pour bloquer des bots/IA. Inscrivez‑vous et obtenez un bearer token.</p>
<h3 id="comment-lutiliser_27">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_ROBOTSTXT: yes</code>.</li>
<li>Règles : via DarkVisitors, listes communautaires, URLs ou variables <code>ROBOTSTXT_RULE</code>.</li>
<li>Filtrer (optionnel) : <code>ROBOTSTXT_IGNORE_RULE_N</code>.</li>
<li>Sitemaps (optionnel) : <code>ROBOTSTXT_SITEMAP_N</code>.</li>
<li>Accès : <code>http(s)://votre-domaine/robots.txt</code>.</li>
</ol>
<h3 id="parametres_22">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ROBOTSTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Active/désactive la fonctionnalité.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_TOKEN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Jeton Bearer pour l’API DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Types d’agents (séparés par virgules) à inclure depuis DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_DISALLOW</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>non</td>
<td>Valeur du champ Disallow envoyée à l’API DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_COMMUNITY_LISTS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IDs de listes communautaires (séparés par espaces).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs supplémentaires (supporte <code>file://</code> et auth basique).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_RULE</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Règle individuelle <code>robots.txt</code>.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>En‑tête (peut être encodé Base64).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_FOOTER</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Pied de page (peut être encodé Base64).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_IGNORE_RULE</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Motif PCRE d’ignorance de règles.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_SITEMAP</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de sitemap.</td>
</tr>
</tbody>
</table>
<h3 id="exemples_18">Exemples</h3>
<p>Basique (manuel)</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p>Sources dynamiques (DarkVisitors + liste)</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-darkvisitors-token-here&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_AGENT_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AI</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Scraper&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots-disallowed&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
</code></pre></div>
<p>Combiné</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-darkvisitors-token-here&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-robots-txt&quot;</span>
<span class="nt">ROBOTSTXT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/my-custom-rules.txt&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">MyOwnBot&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/admin&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p>En‑tête/Pied de page</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">header&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_FOOTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">footer&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p>Pour en savoir plus : <a href="https://www.robotstxt.org/robotstxt.html">documentation robots.txt</a>.</p>
<h2 id="ssl">SSL</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin SSL fournit un chiffrement SSL/TLS robuste pour vos sites protégés par BunkerWeb. Il permet des connexions HTTPS sécurisées en configurant protocoles, suites cryptographiques et paramètres associés.</p>
<p>Comment ça marche :</p>
<ol>
<li>Lors d’une connexion HTTPS, BunkerWeb gère la négociation SSL/TLS selon vos réglages.</li>
<li>Le plugin impose des protocoles modernes et des suites fortes, et désactive les options vulnérables.</li>
<li>Des paramètres de session optimisés améliorent les performances sans sacrifier la sécurité.</li>
<li>La présentation des certificats suit les bonnes pratiques pour compatibilité et sécurité.</li>
</ol>
<h3 id="comment-lutiliser_28">Comment l’utiliser</h3>
<ol>
<li>Protocoles : choisissez les versions via <code>SSL_PROTOCOLS</code>.</li>
<li>Suites : sélectionnez un niveau via <code>SSL_CIPHERS_LEVEL</code> ou des suites personnalisées via <code>SSL_CIPHERS_CUSTOM</code>.</li>
<li>Redirections : configurez la redirection HTTP→HTTPS avec <code>AUTO_REDIRECT_HTTP_TO_HTTPS</code> et/ou <code>REDIRECT_HTTP_TO_HTTPS</code>.</li>
</ol>
<h3 id="parametres_23">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Rediriger tout HTTP vers HTTPS.</td>
</tr>
<tr>
<td><code>AUTO_REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Redirection auto si HTTPS détecté.</td>
</tr>
<tr>
<td><code>SSL_PROTOCOLS</code></td>
<td><code>TLSv1.2 TLSv1.3</code></td>
<td>multisite</td>
<td>non</td>
<td>Protocoles SSL/TLS supportés (séparés par des espaces).</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_LEVEL</code></td>
<td><code>modern</code></td>
<td>multisite</td>
<td>non</td>
<td>Niveau de sécurité des suites (<code>modern</code>, <code>intermediate</code>, <code>old</code>).</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_CUSTOM</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suites personnalisées (liste séparée par <code>:</code>) qui remplacent le niveau.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Test SSL Labs</p>
</div>
<p>Testez votre configuration via <a href="https://www.ssllabs.com/ssltest/">Qualys SSL Labs</a>. Une configuration BunkerWeb bien réglée atteint généralement A+.</p>
<div class="admonition warning">
<p class="admonition-title">Protocoles anciens</p>
</div>
<p>SSLv3, TLSv1.0 et TLSv1.1 sont désactivés par défaut (vulnérabilités connues). Activez‑les uniquement si nécessaire pour clients hérités.</p>
<h3 id="exemples_19">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="101:1"><input checked="checked" id="__tabbed_101_1" name="__tabbed_101" type="radio" /><div class="tabbed-labels"><label for="__tabbed_101_1">Sécurité moderne (défaut)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="102:1"><input checked="checked" id="__tabbed_102_1" name="__tabbed_102" type="radio" /><div class="tabbed-labels"><label for="__tabbed_102_1">Sécurité maximale</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="103:1"><input checked="checked" id="__tabbed_103_1" name="__tabbed_103" type="radio" /><div class="tabbed-labels"><label for="__tabbed_103_1">Compatibilité héritée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="104:1"><input checked="checked" id="__tabbed_104_1" name="__tabbed_104" type="radio" /><div class="tabbed-labels"><label for="__tabbed_104_1">Suites personnalisées</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_CUSTOM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<h2 id="securitytxt">Security.txt</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Security.txt met en œuvre le standard <a href="https://securitytxt.org/">Security.txt</a> (<a href="https://www.rfc-editor.org/rfc/rfc9116">RFC 9116</a>) sur votre site. Il facilite l’accès aux politiques de sécurité et fournit un moyen standardisé de signaler des vulnérabilités.</p>
<p>Comment ça marche :</p>
<ol>
<li>Une fois activé, BunkerWeb expose <code>/.well-known/security.txt</code> à la racine du site.</li>
<li>Le fichier contient vos politiques, contacts et informations pertinentes.</li>
<li>Les chercheurs en sécurité et outils automatisés le trouvent à l’emplacement standard.</li>
<li>Le contenu est défini via des paramètres simples (contacts, clés de chiffrement, politiques, remerciements…).</li>
<li>BunkerWeb formate automatiquement selon la RFC 9116.</li>
</ol>
<h3 id="comment-lutiliser_29">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>USE_SECURITYTXT: yes</code>.</li>
<li>Contacts : précisez au moins un moyen de contact via <code>SECURITYTXT_CONTACT</code>.</li>
<li>Informations additionnelles : configurez expiration, chiffrement, remerciements, URL de politique…</li>
</ol>
<h3 id="parametres_24">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_SECURITYTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer le fichier security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_URI</code></td>
<td><code>/.well-known/security.txt</code></td>
<td>multisite</td>
<td>non</td>
<td>URI d’accès au fichier.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CONTACT</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Moyens de contact (ex. <code>mailto:security@example.com</code>).</td>
</tr>
<tr>
<td><code>SECURITYTXT_EXPIRES</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Date d’expiration (format ISO 8601).</td>
</tr>
<tr>
<td><code>SECURITYTXT_ENCRYPTION</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de clés de chiffrement pour échanges sécurisés.</td>
</tr>
<tr>
<td><code>SECURITYTXT_ACKNOWLEDGEMENTS</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de remerciements pour les chercheurs.</td>
</tr>
<tr>
<td><code>SECURITYTXT_POLICY</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de la politique de sécurité (procédure de signalement).</td>
</tr>
<tr>
<td><code>SECURITYTXT_HIRING</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL d’offres d’emploi sécurité.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CANONICAL</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL canonique du fichier security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_PREFERRED_LANG</code></td>
<td><code>en</code></td>
<td>multisite</td>
<td>non</td>
<td>Langue préférée (code ISO 639‑1).</td>
</tr>
<tr>
<td><code>SECURITYTXT_CSAF</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Lien vers le provider-metadata.json du fournisseur CSAF.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Expiration requise</p>
</div>
<p>Le champ <code>Expires</code> est obligatoire. Si absent, BunkerWeb définit par défaut une expiration à un an.</p>
<div class="admonition info">
<p class="admonition-title">Contacts essentiels</p>
</div>
<p>Fournissez au moins un moyen de contact : email, formulaire, téléphone, etc.</p>
<div class="admonition warning">
<p class="admonition-title">HTTPS obligatoire</p>
</div>
<p>Toutes les URLs (sauf <code>mailto:</code> et <code>tel:</code>) DOIVENT utiliser HTTPS. BunkerWeb convertit les URL non‑HTTPS pour la conformité.</p>
<h3 id="exemples_20">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="105:1"><input checked="checked" id="__tabbed_105_1" name="__tabbed_105" type="radio" /><div class="tabbed-labels"><label for="__tabbed_105_1">Basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="106:1"><input checked="checked" id="__tabbed_106_1" name="__tabbed_106" type="radio" /><div class="tabbed-labels"><label for="__tabbed_106_1">Complet</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-contact-form&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-12-31T23:59:59+00:00&quot;</span>
<span class="nt">SECURITYTXT_ENCRYPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/pgp-key.txt&quot;</span>
<span class="nt">SECURITYTXT_ACKNOWLEDGEMENTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/hall-of-fame&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_HIRING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/jobs/security&quot;</span>
<span class="nt">SECURITYTXT_CANONICAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/.well-known/security.txt&quot;</span>
<span class="nt">SECURITYTXT_PREFERRED_LANG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="nt">SECURITYTXT_CSAF</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/provider-metadata.json&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="107:1"><input checked="checked" id="__tabbed_107_1" name="__tabbed_107" type="radio" /><div class="tabbed-labels"><label for="__tabbed_107_1">Contacts multiples</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tel:+1-201-555-0123&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-form&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-06-30T23:59:59+00:00&quot;</span>
</code></pre></div>
<h2 id="self-signed-certificate">Self-signed certificate</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Certificat auto‑signé génère et gère automatiquement des certificats SSL/TLS directement dans BunkerWeb, pour activer HTTPS sans autorité de certification externe. Idéal en développement, réseaux internes ou déploiements rapides d’HTTPS.</p>
<p>Comment ça marche :</p>
<ol>
<li>Une fois activé, BunkerWeb génère un certificat auto‑signé pour vos domaines configurés.</li>
<li>Le certificat inclut tous les noms de serveurs définis, assurant une validation correcte.</li>
<li>Les certificats sont stockés de façon sécurisée et chiffrent tout le trafic HTTPS.</li>
<li>Le renouvellement est automatique avant expiration.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Avertissements navigateurs</p>
</div>
<p>Les navigateurs afficheront des alertes de sécurité car un certificat auto‑signé n’est pas émis par une AC de confiance. En production, préférez <a href="#lets-encrypt">Let’s Encrypt</a>.</p>
<h3 id="comment-lutiliser_30">Comment l’utiliser</h3>
<ol>
<li>Activer : <code>GENERATE_SELF_SIGNED_SSL: yes</code>.</li>
<li>Algorithme : choisissez via <code>SELF_SIGNED_SSL_ALGORITHM</code>.</li>
<li>Validité : durée en jours via <code>SELF_SIGNED_SSL_EXPIRY</code>.</li>
<li>Sujet : champ subject via <code>SELF_SIGNED_SSL_SUBJ</code>.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Mode stream</p>
</div>
<p>En mode stream, configurez <code>LISTEN_STREAM_PORT_SSL</code> pour définir le port d’écoute SSL/TLS.</p>
<h3 id="parametres_25">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GENERATE_SELF_SIGNED_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la génération automatique de certificats auto‑signés.</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_ALGORITHM</code></td>
<td><code>ec-prime256v1</code></td>
<td>multisite</td>
<td>non</td>
<td>Algorithme : <code>ec-prime256v1</code>, <code>ec-secp384r1</code>, <code>rsa-2048</code>, <code>rsa-4096</code>.</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_EXPIRY</code></td>
<td><code>365</code></td>
<td>multisite</td>
<td>non</td>
<td>Validité (jours).</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_SUBJ</code></td>
<td><code>/CN=www.example.com/</code></td>
<td>multisite</td>
<td>non</td>
<td>Sujet du certificat (identifiant le domaine).</td>
</tr>
</tbody>
</table>
<h3 id="exemples_21">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="108:1"><input checked="checked" id="__tabbed_108_1" name="__tabbed_108" type="radio" /><div class="tabbed-labels"><label for="__tabbed_108_1">Basique</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=mysite.local/&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="109:1"><input checked="checked" id="__tabbed_109_1" name="__tabbed_109" type="radio" /><div class="tabbed-labels"><label for="__tabbed_109_1">Certificats courte durée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;90&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=dev.example.com/&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="110:1"><input checked="checked" id="__tabbed_110_1" name="__tabbed_110" type="radio" /><div class="tabbed-labels"><label for="__tabbed_110_1">Test en RSA</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test.example.com&quot;</span>
<span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rsa-4096&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=test.example.com/&quot;</span>
</code></pre></div>
<h2 id="sessions">Sessions</h2>
<p>Prise en charge STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Sessions fournit une gestion robuste des sessions HTTP dans BunkerWeb pour suivre de manière sécurisée l’état utilisateur entre requêtes. Indispensable pour la persistance d’authentification et des fonctionnalités comme la <a href="#antibot">protection antibot</a>.</p>
<p>Comment ça marche :</p>
<ol>
<li>À la première interaction, BunkerWeb crée un identifiant de session unique.</li>
<li>Il est stocké de manière sécurisée dans un cookie navigateur.</li>
<li>Aux requêtes suivantes, l’identifiant permet d’accéder aux données de session.</li>
<li>Le stockage peut être local ou dans <a href="#redis">Redis</a> en environnement distribué.</li>
<li>Les sessions sont gérées automatiquement avec des timeouts configurables.</li>
<li>Un secret cryptographique signe les cookies de session.</li>
</ol>
<h3 id="comment-lutiliser_31">Comment l’utiliser</h3>
<ol>
<li>Secret : définissez un <code>SESSIONS_SECRET</code> fort et unique.</li>
<li>Nom : personnalisez <code>SESSIONS_NAME</code> si souhaité.</li>
<li>Délais : ajustez <code>SESSIONS_IDLING_TIMEOUT</code>, <code>SESSIONS_ROLLING_TIMEOUT</code>, <code>SESSIONS_ABSOLUTE_TIMEOUT</code>.</li>
<li>Cluster : activez <code>USE_REDIS: yes</code> et configurez Redis pour partager les sessions entre nœuds.</li>
</ol>
<h3 id="parametres_26">Paramètres</h3>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SESSIONS_SECRET</code></td>
<td><code>random</code></td>
<td>global</td>
<td>non</td>
<td>Clé de signature des cookies (forte, aléatoire, unique).</td>
</tr>
<tr>
<td><code>SESSIONS_NAME</code></td>
<td><code>random</code></td>
<td>global</td>
<td>non</td>
<td>Nom du cookie de session.</td>
</tr>
<tr>
<td><code>SESSIONS_IDLING_TIMEOUT</code></td>
<td><code>1800</code></td>
<td>global</td>
<td>non</td>
<td>Inactivité max (secondes) avant invalidation.</td>
</tr>
<tr>
<td><code>SESSIONS_ROLLING_TIMEOUT</code></td>
<td><code>3600</code></td>
<td>global</td>
<td>non</td>
<td>Durée max (secondes) avant renouvellement obligatoire.</td>
</tr>
<tr>
<td><code>SESSIONS_ABSOLUTE_TIMEOUT</code></td>
<td><code>86400</code></td>
<td>global</td>
<td>non</td>
<td>Durée max (secondes) avant destruction, activité ou non.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_IP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Détruire la session si l’IP change.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_USER_AGENT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Détruire la session si l’User‑Agent change.</td>
</tr>
</tbody>
</table>
<p>!!! warning "Sécurité" - <code>SESSIONS_SECRET</code> doit être fort (≥32 caractères), confidentiel et identique sur toutes les instances. - Utilisez des variables d’environnement/secrets pour éviter le clair.</p>
<p>!!! tip "Clusters" - <code>USE_REDIS: yes</code> et même <code>SESSIONS_SECRET</code>/<code>SESSIONS_NAME</code> sur tous les nœuds.</p>
<h3 id="exemples_22">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="111:1"><input checked="checked" id="__tabbed_111_1" name="__tabbed_111" type="radio" /><div class="tabbed-labels"><label for="__tabbed_111_1">Basique (instance unique)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myappsession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="112:1"><input checked="checked" id="__tabbed_112_1" name="__tabbed_112" type="radio" /><div class="tabbed-labels"><label for="__tabbed_112_1">Sécurité renforcée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-very-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;securesession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;900&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;43200&quot;</span>
<span class="nt">SESSIONS_CHECK_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SESSIONS_CHECK_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="113:1"><input checked="checked" id="__tabbed_113_1" name="__tabbed_113" type="radio" /><div class="tabbed-labels"><label for="__tabbed_113_1">Cluster + Redis</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clustersession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="c1"># Configurez la connexion Redis</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="114:1"><input checked="checked" id="__tabbed_114_1" name="__tabbed_114" type="radio" /><div class="tabbed-labels"><label for="__tabbed_114_1">Sessions longue durée</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;persistentsession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;172800&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span>
</code></pre></div>
<h2 id="ui">UI</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Integrate easily the BunkerWeb UI.</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_UI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Use UI</td>
</tr>
<tr>
<td><code>UI_HOST</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Address of the web UI used for initial setup</td>
</tr>
</tbody>
</table>
<h2 id="user-manager-pro">User Manager <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Add the possibility to manage users on the web interface</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Valeur par défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USERS_REQUIRE_2FA</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Require two-factor authentication for all users</td>
</tr>
</tbody>
</table>
<h2 id="whitelist">Whitelist</h2>
<p>Prise en charge STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Whitelist vous permet de définir des clients de confiance qui contournent les autres filtres de sécurité. Les visiteurs correspondant aux règles sont immédiatement autorisés et passent avant les autres contrôles. Pour bloquer des clients indésirables, voir <a href="#blacklist">Blacklist</a>.</p>
<p>Comment ça marche :</p>
<ol>
<li>Vous définissez des critères (IP/réseaux, rDNS, ASN, User‑Agent, URI).</li>
<li>Si un visiteur correspond à une règle (et pas à une règle d’ignore), il est autorisé et bypass tous les contrôles.</li>
<li>Sinon, il suit le parcours de sécurité standard.</li>
<li>Les listes peuvent être mises à jour automatiquement depuis des sources externes.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
</div>
<p>En stream, uniquement IP, rDNS et ASN sont évalués.</p>
<h3 id="parametres_27">Paramètres</h3>
<p>Général</p>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_WHITELIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la whitelist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="115:1"><input checked="checked" id="__tabbed_115_1" name="__tabbed_115" type="radio" /><div class="tabbed-labels"><label for="__tabbed_115_1">Adresse IP</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IP/réseaux (CIDR) autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IP/réseaux ignorés (bypassent les vérifications IP).</td>
</tr>
<tr>
<td><code>WHITELIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant IP/réseaux à autoriser.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant IP/réseaux à ignorer.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="116:1"><input checked="checked" id="__tabbed_116_1" name="__tabbed_116" type="radio" /><div class="tabbed-labels"><label for="__tabbed_116_1">Reverse DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suffixes rDNS autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Vérifier seulement les IP globales si <code>yes</code>.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suffixes rDNS ignorés.</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des suffixes rDNS autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des suffixes rDNS à ignorer.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="117:1"><input checked="checked" id="__tabbed_117_1" name="__tabbed_117" type="radio" /><div class="tabbed-labels"><label for="__tabbed_117_1">ASN</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Numéros d’AS autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>AS ignorés (bypassent la vérif ASN).</td>
</tr>
<tr>
<td><code>WHITELIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de listes d’AS autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de listes d’AS à ignorer.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="118:1"><input checked="checked" id="__tabbed_118_1" name="__tabbed_118" type="radio" /><div class="tabbed-labels"><label for="__tabbed_118_1">User‑Agent</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs (regex PCRE) de User‑Agent autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs ignorés.</td>
</tr>
<tr>
<td><code>WHITELIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs User‑Agent autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs User‑Agent à ignorer.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="119:1"><input checked="checked" id="__tabbed_119_1" name="__tabbed_119" type="radio" /><div class="tabbed-labels"><label for="__tabbed_119_1">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Paramètre</th>
<th>Défaut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs d’URI (regex PCRE) autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs d’URI ignorés.</td>
</tr>
<tr>
<td><code>WHITELIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs d’URI autorisés.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs d’URI à ignorer.</td>
</tr>
</tbody>
</table>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Bunkerity
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/fTf46FmtyD" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/bunkerity" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/bunkerity/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/r/BunkerWeb/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/bunkerweb/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/bunkerity" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": {"provider": "mike", "version": "latest"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="https://chatbot.bunkerweb.io/static/js/chatbot.js"></script>
      
    
  </body>
</html>