
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BunkerWeb, the open source and next generation WAF.">
      
      
      
        <link rel="canonical" href="https://docs.bunkerweb.io/latest/fr/features/">
      
      
        <link rel="prev" href="../quickstart-guide/">
      
      
        <link rel="next" href="../advanced/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Fonctionnalit√©s - Documentation BunkerWeb</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
    <script async
            defer
            data-domain="docs.bunkerweb.io"
            src="https://data.bunkerity.com/js/script.js"></script>

    <script defer>
      window.addEventListener('DOMContentLoaded', (e) => {

        const customHeaders = document.querySelectorAll('[data-custom-header]')
        customHeaders.forEach(header => {
          const getHeaders = document.querySelectorAll(`#${header.getAttribute('id')}`);
          getHeaders.forEach(el => {

            if(!el.hasAttribute('data-custom-header')) el.remove()
        })})
      })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script>

    <script defer>
  // Lazy load images and embed youtube videos
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-src]").forEach((el) => {
      el.setAttribute("src", el.getAttribute("data-src"));
    });
  });
  // Add missing label
  try {
    document
      .querySelector('div.md-search[data-md-component="search"][role="dialog"]')
      .setAttribute("aria-label", "Search in documentation");
  } catch (err) {}
    </script>

    <script defer>
      window.addEventListener('DOMContentLoaded', () => {
        const bannerEl = document.querySelector('aside.md-banner');
        let defaultContent = [{ "content" : '<p>Get the most of BunkerWeb by upgrading to the PRO version. Click <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&utm_source=doc">here</a> and use the <strong>freetrial</strong> promo code to get started.</p>'},
        { "content" : '<p>Need premium support or tailored consulting around BunkerWeb ? Check out our <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc#services">professional services</a>.</p>'},
        { "content" : '<p>Be part of the Bunker community by joining the <a style="text-decoration:underline; color: white;" href="https://discord.bunkerweb.io">Discord chat</a> and following us on <a style="text-decoration:underline; color: white;" href="https://www.linkedin.com/company/bunkerity/">LinkedIn</a>.</p>'}
        ]

      function setBannerStyle() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        bannerEl.style.backgroundColor = "#2eac68";
        bannerItem.style.textAlign = "center";
        bannerItem.style.transition = "all 0.5s ease-out";
      }

      function setDefault() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        const clone = bannerItem.cloneNode(true);
        clone.innerHTML = defaultContent[0]["content"];
        bannerEl.replaceChild(clone, bannerItem);
      }

      function startBannerLoop() {
        const switchDelay = 7000;
        let i = 0;

        setInterval(() => {
          // Update or reset index
          if(i + 1 === defaultContent.length) {
            i = 0;
          } else {
            i++;
          }

          // Prepare data with next el with opacity 0 too
          const currItem = bannerEl.querySelector('.md-banner__inner');
          currItem.style.opacity = 0;
          const clone = currItem.cloneNode(true);
          clone.innerHTML = defaultContent[i]["content"];
          setTimeout(() => {
            bannerEl.replaceChild(clone, currItem);
            setTimeout(() => {
              const newItem = bannerEl.querySelector('.md-banner__inner');
              newItem.style.opacity = 1;
            }, 20);
          }, 600);

        }, switchDelay);
      }

      function runBanner() {
        startBannerLoop();
        // Try to get dynamic content
        // Else keep static ones
        // fetch("https://www.bunkerweb.io/api/bw-ui-news")
        // .then((res) => {
        //   return res.json();
        // })
        // .then((res) => {
        //   defaultContent = res.data[0].data;
        //   startBannerLoop();
        // })
        // .catch((e) => {
        //   startBannerLoop();
        // });
      }

        setBannerStyle();
        setDefault();
        runBanner()

      })
    </script>

    
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Fonctionnalit√©s - Documentation BunkerWeb" >
      
        <meta  property="og:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  property="og:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/fr/features.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.bunkerweb.io/latest/fr/features/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Fonctionnalit√©s - Documentation BunkerWeb" >
      
        <meta  name="twitter:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  name="twitter:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/fr/features.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fonctionnalites" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    üì¢ Looking for BunkerWeb CLOUD, PRO version, technical support or tailored services ? Visit the
    <a href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc"
       style="color: #3f6ec6;
              text-decoration: underline">BunkerWeb Panel</a>
    for more information on our enterprise offers.

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    You're not viewing the
    documentation of the latest version.
    <a href="../../..">
        <strong>Click here to view latest.</strong>
    </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-t√™te">
    <a href="../" title="Documentation BunkerWeb" class="md-header__button md-logo" aria-label="Documentation BunkerWeb" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation BunkerWeb
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fonctionnalit√©s
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="S√©lectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../features/" hreflang="en" class="md-select__link">
              English - üá¨üáß
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Fran√ßais - üá´üá∑
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../de/features/" hreflang="de" class="md-select__link">
              Deutsch - üá©üá™
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/features/" hreflang="es" class="md-select__link">
              Espa√±ol - üá™üá∏
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh/features/" hreflang="zh" class="md-select__link">
              ‰∏≠Êñá - üá®üá≥
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bunkerity/bunkerweb" title="Aller au d√©p√¥t" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        
  
  
    
  
  Concepts

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../integrations/" class="md-tabs__link">
        
  
  
    
  
  Int√©grations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-guide/" class="md-tabs__link">
        
  
  
    
  
  Guide de d√©marrage rapide

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Fonctionnalit√©s

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/" class="md-tabs__link">
        
  
  
    
  
  Utilisations avanc√©es

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../web-ui/" class="md-tabs__link">
        
  
  
    
  
  Interface Web

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../upgrading/" class="md-tabs__link">
        
  
  
    
  
  Mise √† niveau

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  D√©pannage

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
  
    
  
  Plugins

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../professional-services/" class="md-tabs__link">
        
  
  
    
  
  Services professionnels

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
  
    
  
  √Ä propos

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="Documentation BunkerWeb" class="md-nav__button md-logo" aria-label="Documentation BunkerWeb" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Documentation BunkerWeb
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bunkerity/bunkerweb" title="Aller au d√©p√¥t" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Int√©grations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guide de d√©marrage rapide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Fonctionnalit√©s
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Fonctionnalit√©s
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des mati√®res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des mati√®res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parametres-globaux" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres globaux
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Param√®tres globaux">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode-multisite" class="md-nav__link">
    <span class="md-ellipsis">
      Mode multisite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-multiples" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres multiples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Modes de s√©curit√©
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-ddos-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Anti DDoS (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antibot" class="md-nav__link">
    <span class="md-ellipsis">
      Antibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-communs" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres communs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclure-du-trafic-des-defis" class="md-nav__link">
    <span class="md-ellipsis">
      Exclure du trafic des d√©fis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mecanismes-de-defi" class="md-nav__link">
    <span class="md-ellipsis">
      M√©canismes de d√©fi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-basic" class="md-nav__link">
    <span class="md-ellipsis">
      Auth basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_1" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_2" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_1" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-en-ligne-de-commande" class="md-nav__link">
    <span class="md-ellipsis">
      Interface en ligne de commande
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_1" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-s3-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Backup S3 (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bad-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Bad behavior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bad behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_3" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_2" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_2" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blacklist" class="md-nav__link">
    <span class="md-ellipsis">
      Blacklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blacklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_4" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#travailler-avec-des-fichiers-de-listes-locaux" class="md-nav__link">
    <span class="md-ellipsis">
      Travailler avec des fichiers de listes locaux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brotli" class="md-nav__link">
    <span class="md-ellipsis">
      Brotli
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Brotli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_5" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_3" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_3" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkernet" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerNet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerNet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_6" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_4" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-crowdsec-console" class="md-nav__link">
    <span class="md-ellipsis">
      Int√©gration CrowdSec Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_4" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_7" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_5" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_5" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Client cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_8" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_6" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_6" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Country">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_9" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_7" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_7" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crowdsec" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CrowdSec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequis" class="md-nav__link">
    <span class="md-ellipsis">
      Pr√©requis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parcours-dintegration" class="md-nav__link">
    <span class="md-ellipsis">
      Parcours d‚Äôint√©gration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etape-1-preparer-crowdsec-a-ingerer-les-journaux-bunkerweb" class="md-nav__link">
    <span class="md-ellipsis">
      √âtape&nbsp;1 ‚Äì Pr√©parer CrowdSec √† ing√©rer les journaux BunkerWeb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etape-2-configurer-les-parametres-de-bunkerweb" class="md-nav__link">
    <span class="md-ellipsis">
      √âtape&nbsp;2 ‚Äì Configurer les param√®tres de BunkerWeb
    </span>
  </a>
  
    <nav class="md-nav" aria-label="√âtape¬†2 ‚Äì Configurer les param√®tres de BunkerWeb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parametres-du-composant-de-securite-applicative" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres du composant de s√©curit√© applicative
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configurations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etape-3-valider-lintegration" class="md-nav__link">
    <span class="md-ellipsis">
      √âtape&nbsp;3 ‚Äì Valider l‚Äôint√©gration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-ssl-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Custom SSL certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom SSL certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_10" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_8" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_8" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dnsbl" class="md-nav__link">
    <span class="md-ellipsis">
      DNSBL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNSBL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_11" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_3" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_12" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_9" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easy-resolve-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Easy Resolve (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#errors" class="md-nav__link">
    <span class="md-ellipsis">
      Errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_13" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_10" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_9" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#greylist" class="md-nav__link">
    <span class="md-ellipsis">
      Greylist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Greylist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_14" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_11" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#travailler-avec-des-fichiers-de-listes-locaux_1" class="md-nav__link">
    <span class="md-ellipsis">
      Travailler avec des fichiers de listes locaux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gzip" class="md-nav__link">
    <span class="md-ellipsis">
      Gzip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gzip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fonctionnement" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_15" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_12" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_10" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#html-injection" class="md-nav__link">
    <span class="md-ellipsis">
      HTML injection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTML injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_16" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_13" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_11" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headers" class="md-nav__link">
    <span class="md-ellipsis">
      Headers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_17" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-de-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Guide de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_4" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Encrypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Let&#39;s Encrypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_18" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_3" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fournisseurs-dns-supportes" class="md-nav__link">
    <span class="md-ellipsis">
      Fournisseurs DNS support√©s
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_5" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limit" class="md-nav__link">
    <span class="md-ellipsis">
      Limit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Limit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fonctionnement_1" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_14" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_6" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancer-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Load Balancer (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parametres_15" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_12" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Migration (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fonctionnalites-cles" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnalit√©s cl√©s
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-de-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Guide de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_7" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modsecurity" class="md-nav__link">
    <span class="md-ellipsis">
      ModSecurity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModSecurity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_19" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres-de-configuration_4" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#versions-du-crs-disponibles" class="md-nav__link">
    <span class="md-ellipsis">
      Versions du CRS disponibles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Configurations personnalis√©es
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configurations personnalis√©es">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ajout-dexclusions-crs-avec-modsec-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Ajout d'exclusions CRS avec modsec-crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mise-a-jour-des-regles-crs-avec-modsec" class="md-nav__link">
    <span class="md-ellipsis">
      Mise √† jour des r√®gles CRS avec modsec
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugins-owasp-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Plugins OWASP CRS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_8" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#php" class="md-nav__link">
    <span class="md-ellipsis">
      PHP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PHP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_20" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_16" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_13" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pro" class="md-nav__link">
    <span class="md-ellipsis">
      Pro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_21" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_17" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      FAQ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prometheus-exporter-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus exporter (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Real IP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real IP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_22" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_18" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_14" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirect" class="md-nav__link">
    <span class="md-ellipsis">
      Redirect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redirect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_23" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_19" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_15" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_24" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_20" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_16" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse proxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_25" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-de-configuration_2" class="md-nav__link">
    <span class="md-ellipsis">
      Guide de configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-configuration_9" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse scan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse scan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_26" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_21" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_17" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robotstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Robots.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Robots.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#darkvisitors" class="md-nav__link">
    <span class="md-ellipsis">
      DarkVisitors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_27" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_22" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_18" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssl" class="md-nav__link">
    <span class="md-ellipsis">
      SSL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_28" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_23" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_19" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securitytxt" class="md-nav__link">
    <span class="md-ellipsis">
      Security.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_29" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_24" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_20" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#self-signed-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Self-signed certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Self-signed certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_30" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_25" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_21" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Sessions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sessions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comment-lutiliser_31" class="md-nav__link">
    <span class="md-ellipsis">
      Comment l‚Äôutiliser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametres_26" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples_22" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-manager-pro" class="md-nav__link">
    <span class="md-ellipsis">
      User Manager (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whitelist" class="md-nav__link">
    <span class="md-ellipsis">
      Whitelist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Whitelist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parametres_27" class="md-nav__link">
    <span class="md-ellipsis">
      Param√®tres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#travailler-avec-des-fichiers-de-listes-locaux_2" class="md-nav__link">
    <span class="md-ellipsis">
      Travailler avec des fichiers de listes locaux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilisations avanc√©es
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interface Web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mise √† niveau
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    D√©pannage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../professional-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Services professionnels
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    √Ä propos
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="fonctionnalites">Fonctionnalit√©s</h1>
<p>Cette section contient la liste compl√®te des param√®tres pris en charge par BunkerWeb. Si vous n‚Äô√™tes pas encore familier avec BunkerWeb, commencez par lire la section <a href="../concepts/">concepts</a> de la documentation. Suivez ensuite les instructions de votre <a href="../integrations/">int√©gration</a> pour appliquer les param√®tres.</p>
<h2 id="parametres-globaux">Param√®tres globaux</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin General fournit le cadre de configuration de base de BunkerWeb, vous permettant de d√©finir les param√®tres essentiels qui r√©gissent la protection et la distribution de vos services web. Ce plugin fondamental g√®re des aspects cl√©s tels que les modes de s√©curit√©, les valeurs par d√©faut du serveur, le comportement de journalisation et les param√®tres op√©rationnels critiques pour l‚Äôensemble de l‚Äô√©cosyst√®me BunkerWeb.</p>
<p>Comment √ßa marche :</p>
<ol>
<li>Au d√©marrage de BunkerWeb, le plugin General charge et applique vos param√®tres de configuration principaux.</li>
<li>Les modes de s√©curit√© sont d√©finis globalement ou par site, d√©terminant le niveau de protection appliqu√©.</li>
<li>Les param√®tres par d√©faut du serveur √©tablissent des valeurs de repli pour toute configuration multisite non sp√©cifi√©e.</li>
<li>Les param√®tres de journalisation contr√¥lent les informations enregistr√©es et leur format.</li>
<li>Ces param√®tres constituent la base sur laquelle s‚Äôappuient tous les autres plugins et fonctionnalit√©s de BunkerWeb.</li>
</ol>
<h3 id="mode-multisite">Mode multisite</h3>
<p>Lorsque <code>MULTISITE</code> vaut <code>yes</code>, BunkerWeb peut h√©berger et prot√©ger plusieurs sites web, chacun avec sa propre configuration. Ce mode est utile notamment pour :</p>
<ul>
<li>H√©berger plusieurs domaines aux configurations distinctes</li>
<li>Ex√©cuter plusieurs applications avec des exigences de s√©curit√© diff√©rentes</li>
<li>Appliquer des politiques de s√©curit√© adapt√©es √† diff√©rents services</li>
</ul>
<p>En mode multisite, chaque site est identifi√© par un <code>SERVER_NAME</code> unique. Pour appliquer des param√®tres sp√©cifiques √† un site, pr√©fixez le nom du param√®tre par le <code>SERVER_NAME</code> principal. Par exemple :</p>
<ul>
<li><code>www.example.com_USE_ANTIBOT=captcha</code> active le CAPTCHA pour <code>www.example.com</code>.</li>
<li><code>myapp.example.com_USE_GZIP=yes</code> active la compression GZIP pour <code>myapp.example.com</code>.</li>
</ul>
<p>Cette approche garantit que les param√®tres sont appliqu√©s au bon site dans un environnement multisite.</p>
<h3 id="parametres-multiples">Param√®tres multiples</h3>
<p>Certains param√®tres de BunkerWeb supportent plusieurs configurations pour une m√™me fonctionnalit√©. Pour d√©finir plusieurs groupes de param√®tres, ajoutez un suffixe num√©rique au nom du param√®tre. Par exemple :</p>
<ul>
<li><code>REVERSE_PROXY_URL_1=/subdir</code> et <code>REVERSE_PROXY_HOST_1=http://myhost1</code> d√©finissent le premier reverse proxy.</li>
<li><code>REVERSE_PROXY_URL_2=/anotherdir</code> et <code>REVERSE_PROXY_HOST_2=http://myhost2</code> d√©finissent le second reverse proxy.</li>
</ul>
<p>Ce mod√®le permet de g√©rer plusieurs configurations pour des fonctionnalit√©s comme les reverse proxies, les ports, ou d‚Äôautres param√®tres n√©cessitant des valeurs distinctes selon les cas d‚Äôusage.</p>
<h3 id="security-modes">Modes de s√©curit√©</h3>
<p>Le param√®tre <code>SECURITY_MODE</code> d√©termine la fa√ßon dont BunkerWeb g√®re les menaces d√©tect√©es. Ce m√©canisme flexible vous permet de choisir entre la surveillance et le blocage actif des activit√©s suspectes, selon vos besoins :</p>
<ul>
<li><code>detect</code> : Enregistre les menaces potentielles sans les bloquer. Utile pour analyser les faux positifs sans perturber les utilisateurs l√©gitimes.</li>
<li><code>block</code> (par d√©faut) : Bloque activement les menaces d√©tect√©es tout en journalisant les incidents pour prot√©ger votre application.</li>
</ul>
<p>Passer en mode <code>detect</code> aide √† identifier et corriger les faux positifs sans impacter les clients l√©gitimes. Une fois ces probl√®mes r√©solus, repassez en mode <code>block</code> pour une protection compl√®te.</p>
<h3 id="parametres-de-configuration">Param√®tres de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:9"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Param√®tres principaux</label><label for="__tabbed_1_2">Param√®tres API</label><label for="__tabbed_1_3">Param√®tres r√©seau et ports</label><label for="__tabbed_1_4">Param√®tres serveur Stream</label><label for="__tabbed_1_5">Param√®tres des workers</label><label for="__tabbed_1_6">Param√®tres m√©moire</label><label for="__tabbed_1_7">Param√®tres de journalisation</label><label for="__tabbed_1_8">Param√®tres d‚Äôint√©gration</label><label for="__tabbed_1_9">Param√®tres Nginx</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVER_NAME</code></td>
<td><code>www.example.com</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Domaine principal :</strong> Nom de domaine principal pour ce site. Requis en mode multisite.</td>
</tr>
<tr>
<td><code>BUNKERWEB_INSTANCES</code></td>
<td><code>127.0.0.1</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Instances BunkerWeb :</strong> Liste des instances BunkerWeb s√©par√©es par des espaces.</td>
</tr>
<tr>
<td><code>MULTISITE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Sites multiples :</strong> D√©finir √† <code>yes</code> pour h√©berger plusieurs sites avec des configurations diff√©rentes.</td>
</tr>
<tr>
<td><code>SECURITY_MODE</code></td>
<td><code>block</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Niveau de s√©curit√© :</strong> <code>detect</code> ou <code>block</code> pour contr√¥ler l‚Äôapplication de la s√©curit√©.</td>
</tr>
<tr>
<td><code>SERVER_TYPE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Type de serveur :</strong> D√©finit si le serveur est de type <code>http</code> ou <code>stream</code>.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_API</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Activer l‚ÄôAPI :</strong> Active l‚ÄôAPI pour piloter BunkerWeb.</td>
</tr>
<tr>
<td><code>API_HTTP_PORT</code></td>
<td><code>5000</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Port de l‚ÄôAPI :</strong> Num√©ro de port d‚Äô√©coute de l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_HTTPS_PORT</code></td>
<td><code>5443</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Port HTTPS de l‚ÄôAPI :</strong> Num√©ro de port d‚Äô√©coute (TLS) de l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>Non</td>
<td><strong>√âcoute HTTP de l‚ÄôAPI :</strong> Active l‚Äô√©coute HTTP pour l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTPS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>√âcoute HTTPS de l‚ÄôAPI :</strong> Active l‚Äô√©coute HTTPS (TLS) pour l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_LISTEN_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>Non</td>
<td><strong>IP d‚Äô√©coute de l‚ÄôAPI :</strong> Adresse IP d‚Äô√©coute de l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_SERVER_NAME</code></td>
<td><code>bwapi</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Nom de serveur de l‚ÄôAPI :</strong> Nom de serveur (vhost) pour l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_WHITELIST_IP</code></td>
<td><code>127.0.0.0/8</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Liste blanche API :</strong> Liste IP/r√©seaux autoris√©s √† contacter l‚ÄôAPI.</td>
</tr>
<tr>
<td><code>API_TOKEN</code></td>
<td></td>
<td>global</td>
<td>Non</td>
<td><strong>Jeton d‚Äôacc√®s API (optionnel) :</strong> Si d√©fini, chaque requ√™te API doit inclure <code>Authorization: Bearer &lt;token&gt;</code>.</td>
</tr>
</tbody>
</table>
<p>Remarque : pour des raisons d‚Äôamor√ßage, si vous activez <code>API_TOKEN</code>, vous devez le d√©finir dans l‚Äôenvironnement √† la fois de l‚Äôinstance BunkerWeb et du Scheduler. Le Scheduler ajoute automatiquement l‚Äôen-t√™te <code>Authorization</code> quand <code>API_TOKEN</code> est pr√©sent dans son environnement. S‚Äôil n‚Äôest pas d√©fini, aucun en-t√™te n‚Äôest envoy√© et BunkerWeb n‚Äôapplique pas l‚Äôauthentification par jeton. Vous pouvez exposer l‚ÄôAPI en HTTPS en d√©finissant <code>API_LISTEN_HTTPS=yes</code> (port : <code>API_HTTPS_PORT</code>, <code>5443</code> par d√©faut).</p>
<p>Exemple de test avec curl (remplacez le jeton et l‚Äôh√¥te) :</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://&lt;bunkerweb-host&gt;:5000/ping

curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--insecure<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>https://&lt;bunkerweb-host&gt;:5443/ping
</code></pre></div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HTTP_PORT</code></td>
<td><code>8080</code></td>
<td>global</td>
<td>Oui</td>
<td><strong>Port HTTP :</strong> Num√©ro de port pour le trafic HTTP.</td>
</tr>
<tr>
<td><code>HTTPS_PORT</code></td>
<td><code>8443</code></td>
<td>global</td>
<td>Oui</td>
<td><strong>Port HTTPS :</strong> Num√©ro de port pour le trafic HTTPS.</td>
</tr>
<tr>
<td><code>USE_IPV6</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Support IPv6 :</strong> Active la connectivit√© IPv6.</td>
</tr>
<tr>
<td><code>DNS_RESOLVERS</code></td>
<td><code>127.0.0.11</code></td>
<td>global</td>
<td>Non</td>
<td><strong>R√©solveurs DNS :</strong> Adresses des r√©solveurs √† utiliser.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_STREAM</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>√âcoute stream :</strong> Active l‚Äô√©coute non-ssl (pass-through).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT</code></td>
<td><code>1337</code></td>
<td>multisite</td>
<td>Oui</td>
<td><strong>Port stream :</strong> Port d‚Äô√©coute pour le non-ssl (pass-through).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT_SSL</code></td>
<td><code>4242</code></td>
<td>multisite</td>
<td>Oui</td>
<td><strong>Port stream SSL :</strong> Port d‚Äô√©coute pour le SSL (pass-through).</td>
</tr>
<tr>
<td><code>USE_TCP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>√âcoute TCP :</strong> Active l‚Äô√©coute TCP (stream).</td>
</tr>
<tr>
<td><code>USE_UDP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>Non</td>
<td><strong>√âcoute UDP :</strong> Active l‚Äô√©coute UDP (stream).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKER_PROCESSES</code></td>
<td><code>auto</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Processus workers :</strong> Nombre de processus workers. <code>auto</code> utilise le nombre de c≈ìurs.</td>
</tr>
<tr>
<td><code>WORKER_CONNECTIONS</code></td>
<td><code>1024</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Connexions par worker :</strong> Nombre maximal de connexions par worker.</td>
</tr>
<tr>
<td><code>WORKER_RLIMIT_NOFILE</code></td>
<td><code>2048</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Limite descripteurs :</strong> Nombre maximal de fichiers ouverts par worker.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKERLOCK_MEMORY_SIZE</code></td>
<td><code>48k</code></td>
<td>global</td>
<td>Non</td>
<td><strong>M√©moire workerlock :</strong> Taille de lua_shared_dict pour l‚Äôinitialisation des workers.</td>
</tr>
<tr>
<td><code>DATASTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>M√©moire datastore :</strong> Taille du datastore interne.</td>
</tr>
<tr>
<td><code>CACHESTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>M√©moire cachestore :</strong> Taille du cache interne.</td>
</tr>
<tr>
<td><code>CACHESTORE_IPC_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>M√©moire cachestore IPC :</strong> Taille du cache interne (IPC).</td>
</tr>
<tr>
<td><code>CACHESTORE_MISS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>M√©moire cachestore miss :</strong> Taille du cache interne (miss).</td>
</tr>
<tr>
<td><code>CACHESTORE_LOCKS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Non</td>
<td><strong>M√©moire cachestore locks :</strong> Taille du cache interne (locks).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOG_FORMAT</code></td>
<td><code>$host $remote_addr - $request_id $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\"</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Format des logs :</strong> Format utilis√© pour les logs d‚Äôacc√®s.</td>
</tr>
<tr>
<td><code>LOG_LEVEL</code></td>
<td><code>notice</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Niveau de logs :</strong> Verbosit√© des logs d‚Äôerreur. Options : <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
<tr>
<td><code>TIMERS_LOG_LEVEL</code></td>
<td><code>debug</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Niveau des timers :</strong> Niveau de log pour les timers. Options : <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>err</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques de journalisation</p>
<ul>
<li>En production, utilisez les niveaux <code>notice</code>, <code>warn</code> ou <code>error</code> pour limiter le volume de logs.</li>
<li>Pour le d√©pannage, passez temporairement le niveau √† <code>debug</code> pour obtenir plus de d√©tails.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTOCONF_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mode Autoconf :</strong> Active l‚Äôint√©gration Docker Autoconf.</td>
</tr>
<tr>
<td><code>SWARM_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mode Swarm :</strong> Active l‚Äôint√©gration Docker Swarm.</td>
</tr>
<tr>
<td><code>KUBERNETES_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Mode Kubernetes :</strong> Active l‚Äôint√©gration Kubernetes.</td>
</tr>
<tr>
<td><code>USE_TEMPLATE</code></td>
<td></td>
<td>multisite</td>
<td>Non</td>
<td><strong>Utiliser un template :</strong> Mod√®le de configuration qui surcharge les valeurs par d√©faut de certains param√®tres.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NGINX_PREFIX</code></td>
<td><code>/etc/nginx/</code></td>
<td>global</td>
<td>Non</td>
<td><strong>Pr√©fixe Nginx :</strong> R√©pertoire o√π NGINX va chercher les configurations.</td>
</tr>
<tr>
<td><code>SERVER_NAMES_HASH_BUCKET_SIZE</code></td>
<td></td>
<td>global</td>
<td>Non</td>
<td><strong>Taille du hash :</strong> Valeur pour la directive server_names_hash_bucket_size.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h3 id="exemples-de-configuration">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Configuration de base (production)</label><label for="__tabbed_2_2">Mode d√©veloppement</label><label for="__tabbed_2_3">Configuration multisite</label><label for="__tabbed_2_4">Configuration serveur Stream</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuration standard pour un site de production avec une s√©curit√© stricte :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notice&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour un environnement de d√©veloppement avec journalisation d√©taill√©e :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dev.example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;debug&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour h√©berger plusieurs sites :</p>
<div class="highlight"><pre><span></span><code><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Premier site</span>
<span class="nt">site1.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site1.example.com&quot;</span>
<span class="nt">site1.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>

<span class="c1"># Second site</span>
<span class="nt">site2.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site2.example.com&quot;</span>
<span class="nt">site2.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour un serveur TCP/UDP :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream.example.com&quot;</span>
<span class="nt">LISTEN_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LISTEN_STREAM_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1337&quot;</span>
<span class="nt">USE_TCP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_UDP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="anti-ddos-pro">Anti DDoS <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides enhanced protection against DDoS attacks by analyzing and filtering suspicious traffic.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIDDOS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable or disable anti DDoS protection to mitigate high traffic spikes.</td>
</tr>
<tr>
<td><code>ANTIDDOS_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>non</td>
<td>Size of in-memory storage for DDoS metrics (e.g., 10M, 500k).</td>
</tr>
<tr>
<td><code>ANTIDDOS_THRESHOLD</code></td>
<td><code>100</code></td>
<td>global</td>
<td>non</td>
<td>Maximum suspicious requests allowed from a single IP before blocking.</td>
</tr>
<tr>
<td><code>ANTIDDOS_WINDOW_TIME</code></td>
<td><code>10</code></td>
<td>global</td>
<td>non</td>
<td>Time window (seconds) to detect abnormal request patterns.</td>
</tr>
<tr>
<td><code>ANTIDDOS_STATUS_CODES</code></td>
<td><code>429 403 444</code></td>
<td>global</td>
<td>non</td>
<td>HTTP status codes treated as suspicious for DDoS analysis.</td>
</tr>
<tr>
<td><code>ANTIDDOS_DISTINCT_IP</code></td>
<td><code>5</code></td>
<td>global</td>
<td>non</td>
<td>Minimum distinct IP count before enabling anti DDoS measures.</td>
</tr>
</tbody>
</table>
<h2 id="antibot">Antibot</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Les attaquants utilisent souvent des outils automatis√©s (bots) pour tenter d‚Äôexploiter votre site. Pour s‚Äôen prot√©ger, BunkerWeb inclut une fonctionnalit√© ¬´ Antibot ¬ª qui demande aux utilisateurs de prouver qu‚Äôils sont humains. Si un utilisateur r√©ussit le d√©fi, il obtient l‚Äôacc√®s √† votre site. Cette fonctionnalit√© est d√©sactiv√©e par d√©faut.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Lorsqu‚Äôun utilisateur visite votre site, BunkerWeb v√©rifie s‚Äôil a d√©j√† r√©ussi un d√©fi antibot.</li>
<li>Sinon, l‚Äôutilisateur est redirig√© vers une page de d√©fi.</li>
<li>L‚Äôutilisateur doit compl√©ter le d√©fi (ex. r√©soudre un CAPTCHA, ex√©cuter du JavaScript).</li>
<li>Si le d√©fi est r√©ussi, l‚Äôutilisateur est redirig√© vers la page initialement demand√©e et peut naviguer normalement.</li>
</ol>
<h3 id="comment-lutiliser">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour activer et configurer Antibot¬†:</p>
<ol>
<li>Choisir un type de d√©fi¬†: d√©cidez du m√©canisme √† utiliser (ex. <a href="#__tabbed_3_3">captcha</a>, <a href="#__tabbed_3_5">hcaptcha</a>, <a href="#__tabbed_3_2">javascript</a>).</li>
<li>Activer la fonctionnalit√©¬†: d√©finissez le param√®tre <code>USE_ANTIBOT</code> sur le type choisi dans votre configuration BunkerWeb.</li>
<li>Configurer les param√®tres¬†: ajustez les autres param√®tres <code>ANTIBOT_*</code> si n√©cessaire. Pour reCAPTCHA, hCaptcha, Turnstile et mCaptcha, cr√©ez un compte aupr√®s du service choisi et obtenez des cl√©s API.</li>
<li>Important¬†: assurez‚Äëvous que <code>ANTIBOT_URI</code> est une URL unique de votre site et qu‚Äôelle n‚Äôest pas utilis√©e ailleurs.</li>
</ol>
<div class="admonition important">
<p class="admonition-title">√Ä propos du param√®tre <code>ANTIBOT_URI</code></p>
<p>Assurez‚Äëvous que <code>ANTIBOT_URI</code> est une URL unique de votre site et qu‚Äôelle n‚Äôest pas utilis√©e ailleurs.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Sessions en environnement cluster</p>
<p>La fonction antibot utilise des cookies pour suivre si un utilisateur a compl√©t√© le d√©fi. Si vous ex√©cutez BunkerWeb en cluster (plusieurs instances), vous devez configurer correctement la gestion des sessions¬†: d√©finissez <code>SESSIONS_SECRET</code> et <code>SESSIONS_NAME</code> avec les m√™mes valeurs sur toutes les instances BunkerWeb. Sinon, les utilisateurs pourront √™tre invit√©s √† r√©p√©ter le d√©fi. Plus d‚Äôinformations sur la configuration des sessions <a href="#sessions">ici</a>.</p>
</div>
<h3 id="parametres-communs">Param√®tres communs</h3>
<p>Les param√®tres suivants sont partag√©s par tous les m√©canismes de d√©fi¬†:</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_URI</code></td>
<td><code>/challenge</code></td>
<td>multisite</td>
<td>non</td>
<td>URL du d√©fi¬†: l‚ÄôURL vers laquelle les utilisateurs sont redirig√©s pour compl√©ter le d√©fi. Veillez √† ce que cette URL ne soit pas utilis√©e pour autre chose.</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_RESOLVE</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>non</td>
<td>D√©lai du d√©fi¬†: temps maximum (en secondes) pour compl√©ter le d√©fi. Au‚Äëdel√†, un nouveau d√©fi est g√©n√©r√©.</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_VALID</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>non</td>
<td>Validit√© du d√©fi¬†: dur√©e (en secondes) pendant laquelle un d√©fi r√©ussi reste valide. Pass√© ce d√©lai, un nouveau d√©fi sera requis.</td>
</tr>
</tbody>
</table>
<h3 id="exclure-du-trafic-des-defis">Exclure du trafic des d√©fis</h3>
<p>BunkerWeb permet d‚Äôindiquer certains utilisateurs, IP ou requ√™tes qui doivent contourner totalement le d√©fi antibot. Utile pour des services de confiance, r√©seaux internes ou des pages √† laisser toujours accessibles¬†:</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URL exclues¬†: liste d‚Äôexpressions r√©guli√®res d‚ÄôURI s√©par√©es par des espaces qui doivent contourner le d√©fi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IP exclues¬†: liste d‚Äôadresses IP ou de plages CIDR s√©par√©es par des espaces qui doivent contourner le d√©fi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>rDNS exclu¬†: liste de suffixes de DNS invers√©s s√©par√©s par des espaces qui doivent contourner le d√©fi.</td>
</tr>
<tr>
<td><code>ANTIBOT_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>IP publiques uniquement¬†: si <code>yes</code>, ne faire des v√©rifications rDNS que sur des IP publiques.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>ASN exclus¬†: liste de num√©ros d‚ÄôASN s√©par√©s par des espaces qui doivent contourner le d√©fi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>User‚ÄëAgents exclus¬†: liste de motifs regex d‚ÄôUser‚ÄëAgent s√©par√©s par des espaces qui doivent contourner le d√©fi.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Pays exclus¬†: liste de codes pays ISO 3166-1 alpha-2 s√©par√©s par des espaces qui doivent contourner le d√©fi.</td>
</tr>
<tr>
<td><code>ANTIBOT_ONLY_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Pays cibl√©s¬†: liste de codes pays ISO 3166-1 alpha-2 qui doivent r√©soudre le d√©fi. Les autres pays sont ignor√©s.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Comportement des param√®tres bas√©s sur le pays</p>
<ul>
<li>Lorsque <code>ANTIBOT_IGNORE_COUNTRY</code> et <code>ANTIBOT_ONLY_COUNTRY</code> sont d√©finis, la liste d‚Äôexclusion est prioritaire¬†: un pays pr√©sent dans les deux listes contourne le d√©fi.</li>
<li>Les adresses IP priv√©es ou inconnues contournent le d√©fi lorsque <code>ANTIBOT_ONLY_COUNTRY</code> est d√©fini, car aucun code pays ne peut √™tre d√©termin√©.</li>
</ul>
</div>
<p>Exemples¬†:</p>
<ul>
<li>
<p><code>ANTIBOT_IGNORE_URI: "^/api/ ^/webhook/ ^/assets/"</code>
  Exclut toutes les URI commen√ßant par <code>/api/</code>, <code>/webhook/</code> ou <code>/assets/</code>.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_IP: "192.168.1.0/24 10.0.0.1"</code>
  Exclut le r√©seau interne <code>192.168.1.0/24</code> et l‚ÄôIP sp√©cifique <code>10.0.0.1</code>.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_RDNS: ".googlebot.com .bingbot.com"</code>
  Exclut les requ√™tes provenant d‚Äôh√¥tes dont le DNS invers√© se termine par <code>googlebot.com</code> ou <code>bingbot.com</code>.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_ASN: "15169 8075"</code>
  Exclut les requ√™tes des ASN 15169 (Google) et 8075 (Microsoft).</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_USER_AGENT: "^Mozilla.+Chrome.+Safari"</code>
  Exclut les requ√™tes dont le User-Agent correspond au motif regex sp√©cifi√©.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_COUNTRY: "US CA"</code>
  Contourne le d√©fi antibot pour les visiteurs situ√©s aux √âtats-Unis ou au Canada.</p>
</li>
<li>
<p><code>ANTIBOT_ONLY_COUNTRY: "CN RU"</code>
  Ne d√©fie que les visiteurs provenant de Chine ou de Russie. Les requ√™tes d‚Äôautres pays (ou d‚Äôadresses IP priv√©es) contournent le d√©fi.</p>
</li>
</ul>
<h3 id="mecanismes-de-defi">M√©canismes de d√©fi</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:7"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><input id="__tabbed_3_7" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Cookie</label><label for="__tabbed_3_2">JavaScript</label><label for="__tabbed_3_3">Captcha</label><label for="__tabbed_3_4">reCAPTCHA</label><label for="__tabbed_3_5">hCaptcha</label><label for="__tabbed_3_6">Turnstile</label><label for="__tabbed_3_7">mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Le d√©fi Cookie est un m√©canisme l√©ger qui repose sur l‚Äôinstallation d‚Äôun cookie dans le navigateur de l‚Äôutilisateur. Lorsqu‚Äôun utilisateur acc√®de au site, le serveur envoie un cookie au client. Lors des requ√™tes suivantes, le serveur v√©rifie la pr√©sence de ce cookie pour confirmer que l‚Äôutilisateur est l√©gitime. Cette m√©thode est simple et efficace pour une protection de base contre les bots sans n√©cessiter d‚Äôinteraction suppl√©mentaire de l‚Äôutilisateur.</p>
<p><strong>Comment √ßa marche¬†:</strong></p>
<ol>
<li>Le serveur g√©n√®re un cookie unique et l‚Äôenvoie au client.</li>
<li>Le client doit renvoyer le cookie dans les requ√™tes suivantes.</li>
<li>Si le cookie est manquant ou invalide, l‚Äôutilisateur est redirig√© vers la page de d√©fi.</li>
</ol>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot¬†: d√©finir sur <code>cookie</code> pour activer ce m√©canisme.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Le d√©fi JavaScript demande au client de r√©soudre une t√¢che de calcul en utilisant JavaScript. Ce m√©canisme garantit que le client a activ√© JavaScript et peut ex√©cuter le code requis, ce qui est g√©n√©ralement hors de port√©e de la plupart des bots.</p>
<p><strong>Comment √ßa marche¬†:</strong></p>
<ol>
<li>Le serveur envoie un script JavaScript au client.</li>
<li>Le script effectue une t√¢che de calcul (par exemple, un hachage) et soumet le r√©sultat au serveur.</li>
<li>Le serveur v√©rifie le r√©sultat pour confirmer la l√©gitimit√© du client.</li>
</ol>
<p><strong>Fonctionnalit√©s cl√©s¬†:</strong></p>
<ul>
<li>Le d√©fi g√©n√®re dynamiquement une t√¢che unique pour chaque client.</li>
<li>La t√¢che de calcul implique un hachage avec des conditions sp√©cifiques (par exemple, trouver un hachage avec un certain pr√©fixe).</li>
</ul>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot¬†: d√©finir sur <code>javascript</code> pour activer ce m√©canisme.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Le d√©fi Captcha est un m√©canisme maison qui g√©n√®re des d√©fis bas√©s sur des images, enti√®rement h√©berg√©s dans votre environnement BunkerWeb. Il teste la capacit√© des utilisateurs √† reconna√Ætre et interpr√©ter des caract√®res al√©atoires, garantissant que les bots automatis√©s sont bloqu√©s efficacement sans d√©pendre de services externes.</p>
<p><strong>Comment √ßa marche¬†:</strong></p>
<ol>
<li>Le serveur g√©n√®re une image CAPTCHA contenant des caract√®res al√©atoires.</li>
<li>L‚Äôutilisateur doit saisir les caract√®res affich√©s dans l‚Äôimage dans un champ de texte.</li>
<li>Le serveur valide la saisie de l‚Äôutilisateur par rapport au CAPTCHA g√©n√©r√©.</li>
</ol>
<p><strong>Fonctionnalit√©s cl√©s¬†:</strong></p>
<ul>
<li>Enti√®rement auto-h√©berg√©, √©liminant le besoin d‚ÄôAPI tierces.</li>
<li>Les d√©fis g√©n√©r√©s dynamiquement assurent l‚Äôunicit√© pour chaque session utilisateur.</li>
<li>Utilise un jeu de caract√®res personnalisable pour la g√©n√©ration du CAPTCHA.</li>
</ul>
<p><strong>Caract√®res pris en charge¬†:</strong></p>
<p>Le syst√®me CAPTCHA prend en charge les types de caract√®res suivants¬†:</p>
<ul>
<li><strong>Lettres¬†:</strong> Toutes les lettres minuscules (a-z) et majuscules (A-Z)</li>
<li><strong>Chiffres¬†:</strong> 2, 3, 4, 5, 6, 7, 8, 9 (exclut 0 et 1 pour √©viter toute confusion)</li>
<li><strong>Caract√®res sp√©ciaux¬†:</strong> <code>+-/=%"'&amp;_(),.;:?!¬ß`^√Ñ√ñ√ú√ü√§√∂√º√©''‚Äö""‚Äû</code></li>
</ul>
<p>Pour obtenir la liste compl√®te des caract√®res pris en charge, consultez la <a href="https://www.dafont.com/moms-typewriter.charmap?back=theme">table des caract√®res de la police</a> utilis√©e pour le CAPTCHA.</p>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer Antibot¬†:</strong> d√©finir sur <code>captcha</code> pour activer ce m√©canisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_CAPTCHA_ALPHABET</code></td>
<td><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Alphabet du Captcha¬†:</strong> une cha√Æne de caract√®res √† utiliser pour g√©n√©rer le CAPTCHA. Caract√®res pris en charge¬†: toutes les lettres (a-z, A-Z), les chiffres 2-9 (exclut 0 et 1), et les caract√®res sp√©ciaux¬†: <code>+-/=%"'&amp;_(),.;:?!¬ß`^√Ñ√ñ√ú√ü√§√∂√º√©''‚Äö""‚Äû</code></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>reCAPTCHA de Google propose une validation des utilisateurs qui s‚Äôex√©cute en arri√®re‚Äëplan (v3) pour attribuer un score bas√© sur le comportement. Un score inf√©rieur au seuil configur√© d√©clenchera une v√©rification suppl√©mentaire ou bloquera la requ√™te. Pour les d√©fis visibles (v2), les utilisateurs doivent interagir avec le widget reCAPTCHA avant de continuer.</p>
<p>Il existe d√©sormais deux mani√®res d‚Äôint√©grer reCAPTCHA¬†:
- La version classique (cl√©s site/secret, point de terminaison de v√©rification v2/v3)
- La nouvelle version utilisant Google Cloud (ID de projet + cl√© API). La version classique reste disponible et peut √™tre activ√©e avec <code>ANTIBOT_RECAPTCHA_CLASSIC</code>.</p>
<p>Pour la version classique, obtenez vos cl√©s de site et secr√®te depuis la <a href="https://www.google.com/recaptcha/admin">console d‚Äôadministration de Google reCAPTCHA</a>.
Pour la nouvelle version, cr√©ez une cl√© reCAPTCHA dans votre projet Google Cloud et utilisez l‚ÄôID du projet ainsi qu‚Äôune cl√© API (voir la <a href="https://console.cloud.google.com/security/recaptcha">console reCAPTCHA de Google Cloud</a>). Une cl√© de site est toujours requise.</p>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot¬†: d√©finir sur <code>recaptcha</code> pour activer ce m√©canisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_CLASSIC</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Utiliser reCAPTCHA classique. Mettre √† <code>no</code> pour utiliser la nouvelle version bas√©e sur Google Cloud.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© de site reCAPTCHA. Requise pour les deux versions.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© secr√®te reCAPTCHA. Requise pour la version classique uniquement.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_PROJECT_ID</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>ID de projet Google Cloud. Requis pour la nouvelle version uniquement.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_API_KEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© API Google Cloud utilis√©e pour appeler l‚ÄôAPI reCAPTCHA Enterprise. Requise pour la nouvelle version uniquement.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA3</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Empreinte TLS JA3 optionnelle √† inclure dans les √©valuations Enterprise.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA4</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Empreinte TLS JA4 optionnelle √† inclure dans les √©valuations Enterprise.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SCORE</code></td>
<td><code>0.7</code></td>
<td>multisite</td>
<td>non</td>
<td>Score minimum requis pour passer (s‚Äôapplique √† la v3 classique et √† la nouvelle version).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Lorsqu‚Äôil est activ√©, hCaptcha offre une alternative efficace √† reCAPTCHA en v√©rifiant les interactions des utilisateurs sans reposer sur un m√©canisme de score. Il met les utilisateurs au d√©fi avec un test simple et interactif pour confirmer leur l√©gitimit√©.</p>
<p>Pour int√©grer hCaptcha avec BunkerWeb, vous devez obtenir les informations d‚Äôidentification n√©cessaires depuis le tableau de bord hCaptcha sur <a href="https://www.hcaptcha.com">hCaptcha</a>. Ces informations incluent une cl√© de site et une cl√© secr√®te.</p>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot¬†: d√©finir sur <code>hcaptcha</code> pour activer ce m√©canisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© site hCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© secr√®te hCaptcha.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Turnstile est un m√©canisme de d√©fi moderne et respectueux de la vie priv√©e qui s‚Äôappuie sur la technologie de Cloudflare pour d√©tecter et bloquer le trafic automatis√©. Il valide les interactions des utilisateurs de mani√®re transparente et en arri√®re-plan, r√©duisant les frictions pour les utilisateurs l√©gitimes tout en d√©courageant efficacement les bots.</p>
<p>Pour int√©grer Turnstile avec BunkerWeb, assurez-vous d‚Äôobtenir les informations d‚Äôidentification n√©cessaires depuis <a href="https://www.cloudflare.com/turnstile">Cloudflare Turnstile</a>.</p>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot¬†: d√©finir sur <code>turnstile</code> pour activer ce m√©canisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© site Turnstile (Cloudflare).</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© secr√®te Turnstile (Cloudflare).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>mCaptcha est un m√©canisme de d√©fi CAPTCHA alternatif qui v√©rifie la l√©gitimit√© des utilisateurs en pr√©sentant un test interactif similaire √† d‚Äôautres solutions antibot. Lorsqu‚Äôil est activ√©, il met les utilisateurs au d√©fi avec un CAPTCHA fourni par mCaptcha, s‚Äôassurant que seuls les utilisateurs authentiques contournent les contr√¥les de s√©curit√© automatis√©s.</p>
<p>mCaptcha est con√ßu dans le respect de la vie priv√©e. Il est enti√®rement conforme au RGPD, garantissant que toutes les donn√©es des utilisateurs impliqu√©es dans le processus de d√©fi respectent des normes strictes de protection des donn√©es. De plus, mCaptcha offre la flexibilit√© d‚Äô√™tre auto-h√©berg√©, permettant aux organisations de garder un contr√¥le total sur leurs donn√©es et leur infrastructure. Cette capacit√© d‚Äôauto-h√©bergement am√©liore non seulement la confidentialit√©, mais optimise √©galement les performances et la personnalisation pour r√©pondre aux besoins sp√©cifiques de d√©ploiement.</p>
<p>Pour int√©grer mCaptcha avec BunkerWeb, vous devez obtenir les informations d‚Äôidentification n√©cessaires depuis la plateforme <a href="https://mcaptcha.org/">mCaptcha</a> ou votre propre fournisseur. Ces informations incluent une cl√© de site et une cl√© secr√®te pour la v√©rification.</p>
<p><strong>Param√®tres¬†:</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer Antibot¬†: d√©finir sur <code>mcaptcha</code> pour activer ce m√©canisme.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© site mCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Cl√© secr√®te mCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_URL</code></td>
<td><code>https://demo.mcaptcha.org</code></td>
<td>multisite</td>
<td>non</td>
<td>Domaine √† utiliser pour mCaptcha.</td>
</tr>
</tbody>
</table>
<p>Reportez‚Äëvous aux Param√®tres communs pour les options suppl√©mentaires.</p>
</div>
</div>
</div>
<h3 id="exemples-de-configuration_1">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:8"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><input id="__tabbed_4_5" name="__tabbed_4" type="radio" /><input id="__tabbed_4_6" name="__tabbed_4" type="radio" /><input id="__tabbed_4_7" name="__tabbed_4" type="radio" /><input id="__tabbed_4_8" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">D√©fi Cookie</label><label for="__tabbed_4_2">D√©fi JavaScript</label><label for="__tabbed_4_3">D√©fi Captcha</label><label for="__tabbed_4_4">D√©fi reCAPTCHA Classique</label><label for="__tabbed_4_5">D√©fi reCAPTCHA (nouveau)</label><label for="__tabbed_4_6">D√©fi hCaptcha</label><label for="__tabbed_4_7">D√©fi Turnstile</label><label for="__tabbed_4_8">D√©fi mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cookie&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;javascript&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;captcha&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">ANTIBOT_CAPTCHA_ALPHABET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;23456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
</code></pre></div>
<p>Remarque¬†: l‚Äôexemple ci‚Äëdessus utilise les chiffres 2‚Äë9 et toutes les lettres, fr√©quemment utilis√©s pour les CAPTCHA. Vous pouvez personnaliser l‚Äôalphabet pour inclure des caract√®res sp√©ciaux si n√©cessaire.</p>
</div>
<div class="tabbed-block">
<p>Exemple de configuration pour le reCAPTCHA classique (cl√©s site/secret) :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple de configuration pour le nouveau reCAPTCHA bas√© sur Google Cloud (ID de projet + cl√© API) :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_PROJECT_ID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-project-id&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-api-key&quot;</span>
<span class="c1"># Empreintes optionnelles pour am√©liorer les √©valuations Enterprise</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA3: &quot;&lt;empreinte-ja3&gt;&quot;</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA4: &quot;&lt;empreinte-ja4&gt;&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hcaptcha&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turnstile&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mcaptcha&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://demo.mcaptcha.org&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="auth-basic">Auth basic</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Auth Basic fournit une authentification HTTP Basic pour prot√©ger votre site ou certaines ressources. Les utilisateurs doivent saisir un identifiant et un mot de passe avant d‚Äôacc√©der au contenu prot√©g√©. Simple √† mettre en place et largement support√© par les navigateurs.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Sur une zone prot√©g√©e, le serveur envoie un d√©fi d‚Äôauthentification.</li>
<li>Le navigateur affiche une bo√Æte de connexion.</li>
<li>L‚Äôutilisateur saisit ses identifiants, envoy√©s au serveur.</li>
<li>Valides¬†? Acc√®s accord√©. Invalides¬†? R√©ponse 401 Unauthorized.</li>
</ol>
<h3 id="comment-lutiliser_1">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_AUTH_BASIC: yes</code>.</li>
<li>Port√©e¬†: <code>AUTH_BASIC_LOCATION</code> = <code>sitewide</code> (tout le site) ou un chemin (ex. <code>/admin</code>).</li>
<li>Identifiants¬†: configurez <code>AUTH_BASIC_USER</code> et <code>AUTH_BASIC_PASSWORD</code> (plusieurs paires possibles).</li>
<li>Message¬†: optionnel, ajustez <code>AUTH_BASIC_TEXT</code>.</li>
<li>Co√ªt du hash (facultatif)¬†: ajustez <code>AUTH_BASIC_ROUNDS</code> (1000-999999999) pour √©quilibrer rapidit√© d‚Äôauthentification et puissance du hachage.</li>
</ol>
<h3 id="parametres">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_AUTH_BASIC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer l‚Äôauthentification Basic.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_LOCATION</code></td>
<td><code>sitewide</code></td>
<td>multisite</td>
<td>non</td>
<td>Port√©e¬†: <code>sitewide</code> ou un chemin (ex. <code>/admin</code>).</td>
</tr>
<tr>
<td><code>AUTH_BASIC_USER</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>oui</td>
<td>Nom d‚Äôutilisateur. Plusieurs paires peuvent √™tre d√©finies.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_PASSWORD</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>oui</td>
<td>Mot de passe correspondant √† chaque utilisateur.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_ROUNDS</code></td>
<td><code>656000</code></td>
<td>multisite</td>
<td>oui</td>
<td>Nombre de tours SHA-512 appliqu√©s lors de la g√©n√©ration du fichier htpasswd (doit rester entre 1000 et 999999999). Moins de tours = connexion plus rapide mais hachage moins co√ªteux.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_TEXT</code></td>
<td><code>Restricted area</code></td>
<td>multisite</td>
<td>non</td>
<td>Message affich√© dans l‚Äôinvite d‚Äôauthentification.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">S√©curit√©</p>
<p>Les identifiants sont encod√©s Base64, pas chiffr√©s. Utilisez toujours HTTPS avec l‚Äôauthentification Basic.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Plusieurs comptes</p>
<p>D√©finissez des paires <code>AUTH_BASIC_USER[_n]</code>/<code>AUTH_BASIC_PASSWORD[_n]</code> pour g√©rer plusieurs utilisateurs.</p>
</div>
<h3 id="exemples">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Tout le site</label><label for="__tabbed_5_2">Zone sp√©cifique</label><label for="__tabbed_5_3">Utilisateurs multiples</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Staff</span><span class="nv"> </span><span class="s">Area&quot;</span>

<span class="c1"># Premier utilisateur</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin_password&quot;</span>

<span class="c1"># Deuxi√®me utilisateur</span>
<span class="nt">AUTH_BASIC_USER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor_password&quot;</span>

<span class="c1"># Troisi√®me utilisateur</span>
<span class="nt">AUTH_BASIC_USER_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer_password&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup">Backup</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Backup fournit des sauvegardes automatis√©es pour prot√©ger vos donn√©es BunkerWeb. Il cr√©e des sauvegardes r√©guli√®res selon une planification d√©finie, stock√©es dans un emplacement d√©di√©, avec rotation automatique et commandes CLI pour g√©rer manuellement.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>La base est sauvegard√©e automatiquement selon la fr√©quence (quotidienne, hebdomadaire, mensuelle).</li>
<li>Les sauvegardes sont stock√©es dans un r√©pertoire d√©di√©.</li>
<li>Les anciennes sauvegardes sont supprim√©es selon la politique de r√©tention.</li>
<li>Vous pouvez cr√©er, lister et restaurer manuellement des sauvegardes.</li>
<li>Avant toute restauration, un snapshot de l‚Äô√©tat courant est cr√©√© automatiquement.</li>
</ol>
<h3 id="comment-lutiliser_2">Comment l‚Äôutiliser</h3>
<ol>
<li>Activation¬†: <code>USE_BACKUP</code> (activ√© par d√©faut).</li>
<li>Planification¬†: <code>BACKUP_SCHEDULE</code>.</li>
<li>R√©tention¬†: <code>BACKUP_ROTATION</code>.</li>
<li>Emplacement¬†: <code>BACKUP_DIRECTORY</code>.</li>
<li>CLI¬†: utilisez <code>bwcli plugin backup</code>.</li>
</ol>
<h3 id="parametres_1">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Activer les sauvegardes automatiques.</td>
</tr>
<tr>
<td><code>BACKUP_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>non</td>
<td>Fr√©quence¬†: <code>daily</code>, <code>weekly</code>, <code>monthly</code>.</td>
</tr>
<tr>
<td><code>BACKUP_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>non</td>
<td>R√©tention¬†: nombre de fichiers √† conserver. Au‚Äëdel√†, suppression automatique.</td>
</tr>
<tr>
<td><code>BACKUP_DIRECTORY</code></td>
<td><code>/var/lib/bunkerweb/backups</code></td>
<td>global</td>
<td>non</td>
<td>R√©pertoire de stockage des sauvegardes.</td>
</tr>
</tbody>
</table>
<h3 id="interface-en-ligne-de-commande">Interface en ligne de commande</h3>
<div class="highlight"><pre><span></span><code>bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>list<span class="w">        </span><span class="c1"># Lister</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w">        </span><span class="c1"># Sauvegarde manuelle</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w"> </span>--directory<span class="w"> </span>/chemin/perso<span class="w">   </span><span class="c1"># Emplacement personnalis√©</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w">     </span><span class="c1"># Restaurer la plus r√©cente</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w"> </span>/chemin/backup-sqlite-YYYY-MM-DD_HH-MM-SS.zip<span class="w">   </span><span class="c1"># Restaurer via fichier</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">S√©curit√©</p>
<p>Avant toute restauration, un backup de l‚Äô√©tat courant est cr√©√© automatiquement dans un emplacement temporaire.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Compatibilit√© bases</p>
<p>Supporte SQLite, MySQL/MariaDB, PostgreSQL. Oracle non pris en charge pour sauvegarde/restauration.</p>
</div>
<h3 id="exemples_1">Exemples</h3>
<p>=== "Quotidien, r√©tention 7 jours" (d√©faut)</p>
<pre><code>```yaml
USE_BACKUP: "yes"
BACKUP_SCHEDULE: "daily"
BACKUP_ROTATION: "7"
BACKUP_DIRECTORY: "/var/lib/bunkerweb/backups"
```
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Hebdomadaire, r√©tention √©tendue</label><label for="__tabbed_6_2">Mensuel, emplacement personnalis√©</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;weekly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/backup-drive/bunkerweb-backups&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup-s3-pro">Backup S3 <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Automatically backup your data to an S3 bucket</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP_S3</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable or disable the S3 backup feature</td>
</tr>
<tr>
<td><code>BACKUP_S3_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>non</td>
<td>The frequency of the backup</td>
</tr>
<tr>
<td><code>BACKUP_S3_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>non</td>
<td>The number of backups to keep</td>
</tr>
<tr>
<td><code>BACKUP_S3_ENDPOINT</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 endpoint</td>
</tr>
<tr>
<td><code>BACKUP_S3_BUCKET</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 bucket</td>
</tr>
<tr>
<td><code>BACKUP_S3_DIR</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 directory</td>
</tr>
<tr>
<td><code>BACKUP_S3_REGION</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 region</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_ID</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 access key ID</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_SECRET</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The S3 access key secret</td>
</tr>
<tr>
<td><code>BACKUP_S3_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>global</td>
<td>non</td>
<td>The compression level of the backup zip file</td>
</tr>
</tbody>
</table>
<h2 id="bad-behavior">Bad behavior</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Bad Behavior prot√®ge votre site en d√©tectant et bannissant automatiquement les IP qui g√©n√®rent trop d‚Äôerreurs (codes HTTP ¬´¬†mauvais¬†¬ª) sur une p√©riode donn√©e. Utile contre la force brute, les scrapers, scanners et activit√©s malveillantes.</p>
<p>Les attaquants d√©clenchent fr√©quemment des codes ¬´¬†suspects¬†¬ª lors de sondes ou d‚Äôexploitation ‚Äî bien plus qu‚Äôun utilisateur normal sur une m√™me p√©riode. En d√©tectant ce comportement, BunkerWeb bannit l‚ÄôIP fautive.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Le plugin surveille les r√©ponses HTTP.</li>
<li>√Ä chaque code ¬´¬†mauvais¬†¬ª (400, 401, 403, 404, ‚Ä¶), le compteur de l‚ÄôIP augmente.</li>
<li>Au‚Äëdel√† du seuil et dans la fen√™tre configur√©e, l‚ÄôIP est bannie.</li>
<li>Le bannissement peut √™tre au niveau service (site) ou global (tous les sites).</li>
<li>Les bans expirent apr√®s la dur√©e configur√©e (ou sont permanents avec <code>0</code>).</li>
</ol>
<h3 id="comment-lutiliser_3">Comment l‚Äôutiliser</h3>
<ol>
<li>Activation¬†: <code>USE_BAD_BEHAVIOR</code> (activ√© par d√©faut).</li>
<li>Codes √† compter¬†: <code>BAD_BEHAVIOR_STATUS_CODES</code>.</li>
<li>Seuil¬†: <code>BAD_BEHAVIOR_THRESHOLD</code>.</li>
<li>Fen√™tre et dur√©e de ban¬†: <code>BAD_BEHAVIOR_COUNT_TIME</code>, <code>BAD_BEHAVIOR_BAN_TIME</code>.</li>
<li>Port√©e¬†: <code>BAD_BEHAVIOR_BAN_SCOPE</code> (<code>service</code> ou <code>global</code>).</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Mode stream</p>
<p>En mode stream, seul <code>444</code> est consid√©r√© comme ¬´¬†mauvais¬†¬ª.</p>
</div>
<h3 id="parametres_2">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BAD_BEHAVIOR</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la d√©tection et le bannissement.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_STATUS_CODES</code></td>
<td><code>400 401 403 404 405 429 444</code></td>
<td>multisite</td>
<td>non</td>
<td>Codes HTTP consid√©r√©s ¬´¬†mauvais¬†¬ª.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_THRESHOLD</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>non</td>
<td>Seuil de r√©ponses ¬´¬†mauvaises¬†¬ª avant bannissement.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_COUNT_TIME</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>non</td>
<td>Fen√™tre de comptage (secondes).</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_TIME</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>non</td>
<td>Dur√©e du ban en secondes (<code>0</code>¬†= permanent).</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_SCOPE</code></td>
<td><code>service</code></td>
<td>global</td>
<td>non</td>
<td>Port√©e du ban¬†: site courant (<code>service</code>) ou global (<code>global</code>).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Faux positifs</p>
<p>Un seuil/fen√™tre trop bas peut bannir des utilisateurs l√©gitimes. D√©marrez conservateur et ajustez.</p>
</div>
<h3 id="exemples_2">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">D√©faut</label><label for="__tabbed_7_2">Strict</label><label for="__tabbed_7_3">Tol√©rant</label><label for="__tabbed_7_4">Ban permanent</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">429&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="blacklist">Blacklist</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Blacklist prot√®ge votre site en bloquant l‚Äôacc√®s selon divers attributs client. Cette fonctionnalit√© d√©fend contre les entit√©s malveillantes connues, les scanners et les visiteurs suspects en refusant l‚Äôacc√®s en fonction des adresses IP, des r√©seaux, des entr√©es DNS invers√©es (rDNS), des ASN, des user-agents et de motifs d‚ÄôURI sp√©cifiques.</p>
<p><strong>Comment √ßa marche¬†:</strong></p>
<ol>
<li>Le plugin v√©rifie les requ√™tes entrantes par rapport √† plusieurs crit√®res de liste noire (adresses IP, r√©seaux, rDNS, ASN, User-Agent ou motifs d‚ÄôURI).</li>
<li>Les listes noires peuvent √™tre sp√©cifi√©es directement dans votre configuration ou charg√©es depuis des URL externes.</li>
<li>Si un visiteur correspond √† une r√®gle de la liste noire (et ne correspond √† aucune r√®gle d‚Äôignorance), l‚Äôacc√®s est refus√©.</li>
<li>Les listes noires sont mises √† jour automatiquement √† intervalles r√©guliers √† partir des URL configur√©es.</li>
<li>Vous pouvez personnaliser pr√©cis√©ment quels crit√®res sont v√©rifi√©s et ignor√©s en fonction de vos besoins de s√©curit√© sp√©cifiques.</li>
</ol>
<h3 id="comment-lutiliser_4">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour configurer et utiliser la fonctionnalit√© Blacklist¬†:</p>
<ol>
<li><strong>Activer la fonctionnalit√©¬†:</strong> La fonctionnalit√© Blacklist est activ√©e par d√©faut. Si n√©cessaire, vous pouvez la contr√¥ler avec le param√®tre <code>USE_BLACKLIST</code>.</li>
<li><strong>Configurer les r√®gles de blocage¬†:</strong> D√©finissez quelles IP, quels r√©seaux, quels motifs rDNS, quels ASN, quels User-Agents ou quelles URI doivent √™tre bloqu√©s.</li>
<li><strong>Mettre en place des r√®gles d‚Äôignorance¬†:</strong> Sp√©cifiez les exceptions qui doivent contourner les v√©rifications de la liste noire.</li>
<li><strong>Ajouter des sources externes¬†:</strong> Configurez des URL pour t√©l√©charger et mettre √† jour automatiquement les donn√©es de la liste noire.</li>
<li><strong>Surveiller l‚Äôefficacit√©¬†:</strong> Consultez l'<a href="../web-ui/">interface web</a> pour voir les statistiques sur les requ√™tes bloqu√©es.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
<p>En mode stream, seules les v√©rifications par IP, rDNS et ASN seront effectu√©es.</p>
</div>
<h3 id="parametres-de-configuration_1">Param√®tres de configuration</h3>
<p><strong>G√©n√©ral</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BLACKLIST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer la Blacklist¬†:</strong> Mettre √† <code>yes</code> pour activer la fonctionnalit√© de liste noire.</td>
</tr>
<tr>
<td><code>BLACKLIST_COMMUNITY_LISTS</code></td>
<td><code>ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Listes noires communautaires¬†:</strong> S√©lectionnez des listes noires pr√©-configur√©es et maintenues par la communaut√© √† inclure dans le blocage.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="8:6"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><input id="__tabbed_8_4" name="__tabbed_8" type="radio" /><input id="__tabbed_8_5" name="__tabbed_8" type="radio" /><input id="__tabbed_8_6" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Listes noires communautaires</label><label for="__tabbed_8_2">Adresse IP</label><label for="__tabbed_8_3">Reverse DNS</label><label for="__tabbed_8_4">ASN</label><label for="__tabbed_8_5">User-Agent</label><label for="__tabbed_8_6">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Ce que √ßa fait¬†:</strong> Vous permet d‚Äôajouter rapidement des listes noires bien entretenues et sourc√©es par la communaut√© sans avoir √† configurer manuellement les URL.</p>
<p>Le param√®tre <code>BLACKLIST_COMMUNITY_LISTS</code> vous permet de choisir parmi des sources de listes noires s√©lectionn√©es. Les options disponibles incluent¬†:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Description</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ip:laurent-minne-data-shield-aggressive</code></td>
<td>Data-Shield IPv4 Blocklist. DST = Europa</td>
<td><code>https://raw.githubusercontent.com/duggytuxy/Data-Shield_IPv4_Blocklist/refs/heads/main/prod_data-shield_ipv4_blocklist.txt</code></td>
</tr>
<tr>
<td><code>ip:danmeuk-tor-exit</code></td>
<td>Adresses IP des n≈ìuds de sortie Tor (dan.me.uk)</td>
<td><code>https://www.dan.me.uk/torlist/?exit</code></td>
</tr>
<tr>
<td><code>ua:mitchellkrogza-bad-user-agents</code></td>
<td>Nginx Block Bad Bots, Spam Referrer Blocker, Vulnerability Scanners, User-Agents, Malware, Adware, Ransomware, Malicious Sites, avec anti-DDOS, Wordpress Theme Detector Blocking et Fail2Ban Jail for Repeat Offenders</td>
<td><code>https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list</code></td>
</tr>
</tbody>
</table>
<p><strong>Configuration¬†:</strong> Sp√©cifiez plusieurs listes s√©par√©es par des espaces. Par exemple¬†:
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Listes communautaires vs configuration manuelle</p>
<p>Les listes noires communautaires offrent un moyen pratique de d√©marrer avec des sources de listes noires √©prouv√©es. Vous pouvez les utiliser en parall√®le de configurations manuelles d‚ÄôURL pour une flexibilit√© maximale.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Ce que √ßa fait¬†:</strong> Bloque les visiteurs en fonction de leur adresse IP ou de leur r√©seau.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste noire d‚ÄôIP¬†:</strong> Liste d‚Äôadresses IP ou de r√©seaux (notation CIDR) √† bloquer, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste d‚Äôignorance d‚ÄôIP¬†:</strong> Liste d‚Äôadresses IP ou de r√©seaux qui doivent contourner les v√©rifications de la liste noire d‚ÄôIP.</td>
</tr>
<tr>
<td><code>BLACKLIST_IP_URLS</code></td>
<td><code>https://www.dan.me.uk/torlist/?exit</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes noires d‚ÄôIP¬†:</strong> Liste d‚ÄôURL contenant des adresses IP ou des r√©seaux √† bloquer, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes d‚Äôignorance d‚ÄôIP¬†:</strong> Liste d‚ÄôURL contenant des adresses IP ou des r√©seaux √† ignorer.</td>
</tr>
</tbody>
</table>
<p>Le param√®tre par d√©faut <code>BLACKLIST_IP_URLS</code> inclut une URL qui fournit une <strong>liste des n≈ìuds de sortie Tor connus</strong>. C‚Äôest une source courante de trafic malveillant et un bon point de d√©part pour de nombreux sites.</p>
</div>
<div class="tabbed-block">
<p><strong>Ce que √ßa fait¬†:</strong> Bloque les visiteurs en fonction de leur nom de domaine invers√©. C‚Äôest utile pour bloquer les scanners et les crawlers connus en se basant sur les domaines de leur organisation.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_RDNS</code></td>
<td><code>.shodan.io .censys.io</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste noire rDNS¬†:</strong> Liste de suffixes de DNS invers√© √† bloquer, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>BLACKLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>rDNS global uniquement¬†:</strong> N‚Äôeffectue des v√©rifications rDNS que sur les adresses IP globales si mis √† <code>yes</code>.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste d‚Äôignorance rDNS¬†:</strong> Liste de suffixes de DNS invers√© qui doivent contourner les v√©rifications de la liste noire rDNS.</td>
</tr>
<tr>
<td><code>BLACKLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes noires rDNS¬†:</strong> Liste d‚ÄôURL contenant des suffixes de DNS invers√© √† bloquer.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes d‚Äôignorance rDNS¬†:</strong> Liste d‚ÄôURL contenant des suffixes de DNS invers√© √† ignorer.</td>
</tr>
</tbody>
</table>
<p>Le param√®tre par d√©faut <code>BLACKLIST_RDNS</code> inclut des domaines de scanners courants comme <strong>Shodan</strong> et <strong>Censys</strong>. Ils sont souvent utilis√©s par des chercheurs en s√©curit√© et des scanners pour identifier des sites vuln√©rables.</p>
</div>
<div class="tabbed-block">
<p><strong>Ce que √ßa fait¬†:</strong> Bloque les visiteurs provenant de fournisseurs de r√©seaux sp√©cifiques. Les ASN sont comme des codes postaux pour Internet‚Äîils identifient √† quel fournisseur ou organisation une IP appartient.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste noire d‚ÄôASN¬†:</strong> Liste de num√©ros de syst√®mes autonomes √† bloquer, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste d‚Äôignorance d‚ÄôASN¬†:</strong> Liste d‚ÄôASN qui doivent contourner les v√©rifications de la liste noire d‚ÄôASN.</td>
</tr>
<tr>
<td><code>BLACKLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes noires d‚ÄôASN¬†:</strong> Liste d‚ÄôURL contenant des ASN √† bloquer.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes d‚Äôignorance d‚ÄôASN¬†:</strong> Liste d‚ÄôURL contenant des ASN √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Ce que √ßa fait¬†:</strong> Bloque les visiteurs en fonction du navigateur ou de l‚Äôoutil qu‚Äôils pr√©tendent utiliser. C‚Äôest efficace contre les bots qui s‚Äôidentifient honn√™tement (comme "ScannerBot" ou "WebHarvestTool").</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste noire de User-Agent¬†:</strong> Liste de motifs de User-Agent (regex PCRE) √† bloquer, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste d‚Äôignorance de User-Agent¬†:</strong> Liste de motifs de User-Agent qui doivent contourner les v√©rifications de la liste noire de User-Agent.</td>
</tr>
<tr>
<td><code>BLACKLIST_USER_AGENT_URLS</code></td>
<td><code>https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes noires de User-Agent¬†:</strong> Liste d‚ÄôURL contenant des motifs de User-Agent √† bloquer.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes d‚Äôignorance de User-Agent¬†:</strong> Liste d‚ÄôURL contenant des motifs de User-Agent √† ignorer.</td>
</tr>
</tbody>
</table>
<p>Le param√®tre par d√©faut <code>BLACKLIST_USER_AGENT_URLS</code> inclut une URL qui fournit une <strong>liste de user agents malveillants connus</strong>. Ils sont souvent utilis√©s par des bots et des scanners malveillants pour identifier des sites vuln√©rables.</p>
</div>
<div class="tabbed-block">
<p><strong>Ce que √ßa fait¬†:</strong> Bloque les requ√™tes vers des URL sp√©cifiques de votre site. C‚Äôest utile pour bloquer les tentatives d‚Äôacc√®s aux pages d‚Äôadministration, aux formulaires de connexion ou √† d‚Äôautres zones sensibles qui pourraient √™tre cibl√©es.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste noire d‚ÄôURI¬†:</strong> Liste de motifs d‚ÄôURI (regex PCRE) √† bloquer, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>Liste d‚Äôignorance d‚ÄôURI¬†:</strong> Liste de motifs d‚ÄôURI qui doivent contourner les v√©rifications de la liste noire d‚ÄôURI.</td>
</tr>
<tr>
<td><code>BLACKLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes noires d‚ÄôURI¬†:</strong> Liste d‚ÄôURL contenant des motifs d‚ÄôURI √† bloquer.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td><strong>URL de listes d‚Äôignorance d‚ÄôURI¬†:</strong> Liste d‚ÄôURL contenant des motifs d‚ÄôURI √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Support des formats d‚ÄôURL</p>
<p>Tous les param√®tres <code>*_URLS</code> supportent les URL HTTP/HTTPS ainsi que les chemins de fichiers locaux en utilisant le pr√©fixe <code>file:///</code>. L‚Äôauthentification basique est support√©e en utilisant le format <code>http://user:pass@url</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Mises √† jour r√©guli√®res</p>
<p>Les listes noires provenant d‚ÄôURL sont automatiquement t√©l√©charg√©es et mises √† jour toutes les heures pour garantir que votre protection reste √† jour contre les derni√®res menaces.</p>
</div>
<h3 id="exemples-de-configuration_2">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Protection de base par IP et User-Agent</label><label for="__tabbed_9_2">Protection avanc√©e avec des r√®gles personnalis√©es</label><label for="__tabbed_9_3">Utilisation de fichiers locaux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple qui bloque les n≈ìuds de sortie Tor connus et les user agents malveillants courants en utilisant les listes noires communautaires¬†:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div>
<p>Alternativement, vous pouvez utiliser une configuration manuelle par URL¬†:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Une configuration plus compl√®te avec des entr√©es de liste noire personnalis√©es et des exceptions¬†:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Entr√©es de liste noire personnalis√©es</span>
<span class="nt">BLACKLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.100</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">BLACKLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.shodan.io</span><span class="nv"> </span><span class="s">.censys.io</span><span class="nv"> </span><span class="s">.scanner.com&quot;</span>
<span class="nt">BLACKLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16509</span><span class="nv"> </span><span class="s">14618&quot;</span><span class="w">  </span><span class="c1"># ASN d&#39;AWS et d&#39;Amazon</span>
<span class="nt">BLACKLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)SemrushBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)AhrefsBot(?:\b)&quot;</span>
<span class="nt">BLACKLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/wp-login</span><span class="err">\</span><span class="s">.php$</span><span class="nv"> </span><span class="s">^/administrator/&quot;</span>

<span class="c1"># R√®gles d&#39;ignorance personnalis√©es</span>
<span class="nt">BLACKLIST_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.200</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>

<span class="c1"># Sources de listes noires externes</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit</span><span class="nv"> </span><span class="s">https://www.spamhaus.org/drop/drop.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant des fichiers locaux pour les listes noires¬†:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/ip-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/rdns-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/asn-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/user-agent-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/uri-blacklist.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="travailler-avec-des-fichiers-de-listes-locaux">Travailler avec des fichiers de listes locaux</h3>
<p>Les param√®tres <code>*_URLS</code> fournis par les plugins Whitelist, Greylist et Blacklist utilisent le m√™me t√©l√©chargeur. Lorsque vous r√©f√©rencez une URL <code>file:///</code>¬†:</p>
<ul>
<li>Le chemin est r√©solu dans le conteneur du <strong>scheduler</strong> (dans un d√©ploiement Docker il s‚Äôagit g√©n√©ralement de <code>bunkerweb-scheduler</code>). Montez-y vos fichiers et v√©rifiez que l‚Äôutilisateur scheduler poss√®de un acc√®s en lecture.</li>
<li>Chaque fichier est un texte encod√© en UTF-8 avec une entr√©e par ligne. Les lignes vides sont ignor√©es et les commentaires doivent commencer par <code>#</code> ou <code>;</code>. Les commentaires <code>//</code> ne sont pas pris en charge.</li>
<li>Valeur attendue selon le type de liste¬†:</li>
<li><strong>Listes IP</strong> acceptent des adresses IPv4/IPv6 ou des r√©seaux CIDR (par exemple <code>192.0.2.10</code> ou <code>2001:db8::/48</code>).</li>
<li><strong>Listes rDNS</strong> attendent un suffixe sans espaces (par exemple <code>.search.msn.com</code>). Les valeurs sont automatiquement converties en minuscules.</li>
<li><strong>Listes ASN</strong> peuvent contenir uniquement le num√©ro (<code>32934</code>) ou le num√©ro pr√©fix√© par <code>AS</code> (<code>AS15169</code>).</li>
<li><strong>Listes User-Agent</strong> sont trait√©es comme des motifs PCRE et la ligne compl√®te est conserv√©e (espaces compris). Placez vos commentaires sur une ligne s√©par√©e pour √©viter qu‚Äôils ne soient interpr√©t√©s comme motif.</li>
<li><strong>Listes URI</strong> doivent commencer par <code>/</code> et peuvent utiliser des jetons PCRE tels que <code>^</code> ou <code>$</code>.</li>
</ul>
<p>Exemples de fichiers conformes¬†:</p>
<div class="highlight"><pre><span></span><code># /etc/bunkerweb/lists/ip-blacklist.txt
192.0.2.10
198.51.100.0/24

# /etc/bunkerweb/lists/ua-blacklist.txt
(?:^|\s)FriendlyScanner(?:\s|$)
TrustedMonitor/\d+\.\d+
</code></pre></div>
<h2 id="brotli">Brotli</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Brotli active la compression des r√©ponses HTTP avec l‚Äôalgorithme Brotli. Il r√©duit l‚Äôusage de bande passante et acc√©l√®re le chargement en compressant le contenu avant l‚Äôenvoi au navigateur.</p>
<p>Par rapport √† gzip, Brotli atteint g√©n√©ralement de meilleurs taux de compression, pour des fichiers plus petits et une livraison plus rapide.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä la requ√™te d‚Äôun client, BunkerWeb v√©rifie si le navigateur supporte Brotli.</li>
<li>Si oui, la r√©ponse est compress√©e au niveau configur√© (<code>BROTLI_COMP_LEVEL</code>).</li>
<li>Les en‚Äët√™tes appropri√©s indiquent la compression Brotli.</li>
<li>Le navigateur d√©compresse avant affichage.</li>
<li>Bande passante et temps de chargement diminuent.</li>
</ol>
<h3 id="comment-lutiliser_5">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_BROTLI: yes</code> (d√©sactiv√© par d√©faut).</li>
<li>Types MIME¬†: d√©finir les contenus √† compresser via <code>BROTLI_TYPES</code>.</li>
<li>Taille minimale¬†: <code>BROTLI_MIN_LENGTH</code> pour √©viter de compresser les petites r√©ponses.</li>
<li>Niveau de compression¬†: <code>BROTLI_COMP_LEVEL</code> pour l‚Äô√©quilibre vitesse/ratio.</li>
</ol>
<h3 id="parametres_3">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BROTLI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la compression Brotli.</td>
</tr>
<tr>
<td><code>BROTLI_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>non</td>
<td>Types MIME compress√©s.</td>
</tr>
<tr>
<td><code>BROTLI_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>non</td>
<td>Taille minimale (octets) pour appliquer la compression.</td>
</tr>
<tr>
<td><code>BROTLI_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>multisite</td>
<td>non</td>
<td>Niveau 0‚Äì11¬†: plus haut = meilleure compression mais plus de CPU.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Niveau de compression</p>
<p><code>6</code> offre un bon compromis. Pour du statique et CPU disponible¬†: 9‚Äì11. Pour du dynamique ou CPU contraint¬†: 4‚Äì5.</p>
</div>
<h3 id="exemples_3">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="10:3"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Basique</label><label for="__tabbed_10_2">Compression maximale</label><label for="__tabbed_10_3">Performance √©quilibr√©e</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;11&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="bunkernet">BunkerNet</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin BunkerNet permet le partage collectif de renseignements sur les menaces entre instances BunkerWeb, cr√©ant un r√©seau de protection contre les acteurs malveillants. En y participant, votre instance b√©n√©ficie d‚Äôune base mondiale de menaces et y contribue de fa√ßon anonyme.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Votre instance s‚Äôenregistre automatiquement aupr√®s de l‚ÄôAPI BunkerNet et re√ßoit un identifiant unique.</li>
<li>√Ä chaque IP/comportement malveillant bloqu√©, l‚Äôinformation est signal√©e anonymement √† BunkerNet.</li>
<li>BunkerNet agr√®ge l‚Äôintelligence de toutes les instances et diffuse une base consolid√©e.</li>
<li>Votre instance t√©l√©charge r√©guli√®rement la base √† jour.</li>
<li>Cette intelligence collective permet de bloquer proactivement des IP d√©j√† malveillantes ailleurs.</li>
</ol>
<h3 id="comment-lutiliser_6">Comment l‚Äôutiliser</h3>
<ol>
<li>Activation¬†: <code>USE_BUNKERNET</code> (activ√© par d√©faut).</li>
<li>Enregistrement initial¬†: effectu√© automatiquement au premier d√©marrage.</li>
<li>Mises √† jour¬†: t√©l√©chargement automatique et r√©gulier de la base.</li>
<li>Signalement¬†: contribution automatique lors de blocages d‚ÄôIP.</li>
<li>Suivi¬†: statistiques visibles dans la <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_4">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BUNKERNET</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la participation BunkerNet.</td>
</tr>
<tr>
<td><code>BUNKERNET_SERVER</code></td>
<td><code>https://api.bunkerweb.io</code></td>
<td>global</td>
<td>non</td>
<td>URL de l‚ÄôAPI BunkerNet.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Confidentialit√©</p>
<p>Seules les donn√©es n√©cessaires √† l‚Äôidentification de la menace sont partag√©es (IP, raison du blocage, contexte minimal).</p>
</div>
<h3 id="integration-crowdsec-console">Int√©gration CrowdSec Console</h3>
<p>Gr√¢ce au partenariat avec <a href="https://www.crowdsec.net/?utm_campaign=bunkerweb&amp;utm_source=doc">CrowdSec</a>, vous pouvez inscrire vos instances BunkerWeb dans votre <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">CrowdSec Console</a> et visualiser les attaques bloqu√©es.</p>
<p>√âtapes principales¬†:</p>
<ol>
<li>Cr√©ez un compte CrowdSec Console et r√©cup√©rez la cl√© d‚Äôenr√¥lement.</li>
<li>R√©cup√©rez votre BunkerNet ID (BunkerNet activ√©).</li>
<li>Commandez le service gratuit ¬´¬†BunkerNet / CrowdSec¬†¬ª sur le Panel et fournissez l‚ÄôID et la cl√©.</li>
<li>Acceptez le nouvel engine dans la Console.</li>
</ol>
<h3 id="exemples_4">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="11:3"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Configuration par d√©faut (recommand√©e)</label><label for="__tabbed_11_2">D√©sactivation</label><label for="__tabbed_11_3">Serveur personnalis√©</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.bunkerweb.io&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://bunkernet.example.com&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="cors">CORS</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin CORS active le partage de ressources entre origines (Cross‚ÄëOrigin Resource Sharing) de mani√®re contr√¥l√©e. Il permet de partager vos ressources avec des domaines tiers de confiance en d√©finissant pr√©cis√©ment origines, m√©thodes et en‚Äët√™tes autoris√©s.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Pour une requ√™te cross‚Äëorigin, le navigateur envoie d‚Äôabord une requ√™te ¬´¬†preflight¬†¬ª <code>OPTIONS</code>.</li>
<li>BunkerWeb v√©rifie si l‚Äôorigine est autoris√©e.</li>
<li>Si oui, il renvoie les en‚Äët√™tes CORS appropri√©s d√©crivant ce qui est permis.</li>
<li>Sinon, la requ√™te est refus√©e ou servie sans en‚Äët√™tes CORS selon la configuration.</li>
<li>Des politiques suppl√©mentaires (COEP/COOP/CORP) peuvent renforcer la s√©curit√©.</li>
</ol>
<h3 id="comment-lutiliser_7">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_CORS: yes</code> (d√©sactiv√© par d√©faut).</li>
<li>Origines¬†: <code>CORS_ALLOW_ORIGIN</code> (regex PCRE, <code>*</code> tous, <code>self</code> m√™me origine).</li>
<li>M√©thodes¬†: <code>CORS_ALLOW_METHODS</code>.</li>
<li>En‚Äët√™tes¬†: <code>CORS_ALLOW_HEADERS</code>.</li>
<li>Identifiants¬†: <code>CORS_ALLOW_CREDENTIALS</code> pour autoriser cookies/auth.</li>
</ol>
<h3 id="parametres_5">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CORS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer CORS.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_ORIGIN</code></td>
<td><code>self</code></td>
<td>multisite</td>
<td>non</td>
<td>Origines autoris√©es (regex PCRE). <code>*</code> = toute origine, <code>self</code> = m√™me origine.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_METHODS</code></td>
<td><code>GET, POST, OPTIONS</code></td>
<td>multisite</td>
<td>non</td>
<td>M√©thodes autoris√©es.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_HEADERS</code></td>
<td><code>DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range</code></td>
<td>multisite</td>
<td>non</td>
<td>En‚Äët√™tes autoris√©s c√¥t√© requ√™te.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_CREDENTIALS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Autoriser les identifiants (cookies, auth HTTP).</td>
</tr>
<tr>
<td><code>CORS_EXPOSE_HEADERS</code></td>
<td><code>Content-Length,Content-Range</code></td>
<td>multisite</td>
<td>non</td>
<td>En‚Äët√™tes expos√©s c√¥t√© r√©ponse.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_OPENER_POLICY</code></td>
<td><code>same-origin</code></td>
<td>multisite</td>
<td>non</td>
<td>Politique COOP.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_EMBEDDER_POLICY</code></td>
<td><code>require-corp</code></td>
<td>multisite</td>
<td>non</td>
<td>Politique COEP.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_RESOURCE_POLICY</code></td>
<td><code>same-site</code></td>
<td>multisite</td>
<td>non</td>
<td>Politique CORP.</td>
</tr>
<tr>
<td><code>CORS_MAX_AGE</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>non</td>
<td>Dur√©e de cache du preflight (secondes).</td>
</tr>
<tr>
<td><code>CORS_DENY_REQUEST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Refuser les origines non autoris√©es avec un code d‚Äôerreur.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimiser le preflight</p>
<p>Augmenter <code>CORS_MAX_AGE</code> r√©duit la fr√©quence des preflights (par d√©faut 24h).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">S√©curit√©</p>
<p>Soyez prudent avec <code>CORS_ALLOW_ORIGIN: *</code> et/ou <code>CORS_ALLOW_CREDENTIALS: yes</code>. Pr√©f√©rez lister explicitement les origines de confiance.</p>
</div>
<h3 id="exemples_5">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="12:5"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><input id="__tabbed_12_4" name="__tabbed_12" type="radio" /><input id="__tabbed_12_5" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Configuration basique</label><label for="__tabbed_12_2">API publique</label><label for="__tabbed_12_3">Plusieurs domaines de confiance</label><label for="__tabbed_12_4">Wildcard sous‚Äëdomaine</label><label for="__tabbed_12_5">Multiples motifs de domaine</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;self&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">X-API-Key&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(app|api|dashboard)\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Requested-With&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_EXPOSE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Length,</span><span class="nv"> </span><span class="s">Content-Range,</span><span class="nv"> </span><span class="s">X-RateLimit-Remaining&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://.*\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(.*\\.example\\.com|.*\\.trusted-partner\\.org|api\\.third-party\\.net)$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Custom-Header&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="client-cache">Client cache</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Client Cache optimise les performances en contr√¥lant la mise en cache des contenus statiques par les navigateurs. Il r√©duit la bande passante, la charge serveur et acc√©l√®re les temps de chargement en instruisant les navigateurs √† conserver localement images, CSS, JS, etc., plut√¥t que de les ret√©l√©charger √† chaque visite.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Une fois activ√©, BunkerWeb ajoute des en‚Äët√™tes Cache-Control aux r√©ponses des fichiers statiques.</li>
<li>Ces en‚Äët√™tes indiquent aux navigateurs pendant combien de temps conserver localement le contenu.</li>
<li>Pour les extensions sp√©cifi√©es (images, CSS, JS‚Ä¶), BunkerWeb applique la politique de cache configur√©e.</li>
<li>Les ETags (optionnels) fournissent un m√©canisme de validation suppl√©mentaire.</li>
<li>Lors des visites suivantes, le navigateur r√©utilise les fichiers en cache, acc√©l√©rant le chargement.</li>
</ol>
<h3 id="comment-lutiliser_8">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: mettez <code>USE_CLIENT_CACHE</code> √† <code>yes</code> (d√©sactiv√© par d√©faut).</li>
<li>Extensions¬†: d√©finissez <code>CLIENT_CACHE_EXTENSIONS</code> pour les types de fichiers √† mettre en cache.</li>
<li>Directives Cache-Control¬†: personnalisez <code>CLIENT_CACHE_CONTROL</code>.</li>
<li>ETag¬†: activez ou non via <code>CLIENT_CACHE_ETAG</code>.</li>
</ol>
<h3 id="parametres_6">Param√®tres</h3>
<p>| Param√®tre                 | D√©faut                     | Contexte  | Multiple | Description                                                  |
| ------------------------- | -------------------------- | --------- | -------- | ------------------------------------------------------------ | --- |
| <code>USE_CLIENT_CACHE</code>        | <code>no</code>                       | multisite | non      | Activer la mise en cache c√¥t√© client des fichiers statiques. |
| <code>CLIENT_CACHE_EXTENSIONS</code> | <code>jpg                       | jpeg      | png      | bmp                                                          | ico | svg | tif | css | js | otf | ttf | eot | woff | woff2</code> | global | non | Extensions mises en cache (s√©par√©es par <code>|</code>). |
| <code>CLIENT_CACHE_CONTROL</code>    | <code>public, max-age=15552000</code> | multisite | non      | Valeur de l‚Äôen‚Äët√™te HTTP Cache-Control.                      |
| <code>CLIENT_CACHE_ETAG</code>       | <code>yes</code>                      | multisite | non      | Envoi d‚Äôun ETag pour les ressources statiques.               |</p>
<div class="admonition tip">
<p class="admonition-title">Optimiser le cache</p>
<p>Contenu fr√©quemment mis √† jour¬†: dur√©e plus courte. Contenu versionn√© ou peu changeant¬†: dur√©e plus longue. La valeur par d√©faut (180¬†jours) convient souvent.</p>
</div>
<h3 id="exemples_6">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="13:3"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><input id="__tabbed_13_3" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Basique</label><label for="__tabbed_13_2">Agressif</label><label for="__tabbed_13_3">Mixte</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|gif|css|js|svg|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=86400&quot;</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2|pdf|xml|txt&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=31536000,</span><span class="nv"> </span><span class="s">immutable&quot;</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=604800&quot;</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="country">Country</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Country active le g√©o‚Äëblocage et permet de restreindre l‚Äôacc√®s selon la localisation g√©ographique des visiteurs. Utile pour la conformit√© r√©gionale, limiter la fraude associ√©e √† des zones √† risque et appliquer des restrictions de contenu selon les fronti√®res.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä chaque visite, BunkerWeb d√©termine le pays d‚Äôorigine via l‚Äôadresse IP.</li>
<li>Votre configuration d√©finit une liste blanche (autoris√©s) ou noire (bloqu√©s).</li>
<li>En liste blanche¬†: seuls les pays list√©s sont autoris√©s.</li>
<li>En liste noire¬†: les pays list√©s sont refus√©s.</li>
<li>Le r√©sultat est mis en cache pour les visites r√©p√©t√©es.</li>
</ol>
<h3 id="comment-lutiliser_9">Comment l‚Äôutiliser</h3>
<ol>
<li>Strat√©gie¬†: choisir liste blanche (peu de pays autoris√©s) ou liste noire (bloquer certains pays).</li>
<li>Codes pays¬†: ajoutez des codes ISO¬†3166‚Äë1 alpha‚Äë2 (US, GB, FR) √† <code>WHITELIST_COUNTRY</code> ou <code>BLACKLIST_COUNTRY</code>.</li>
<li>Application¬†: une fois configur√©, la restriction s‚Äôapplique √† tous les visiteurs.</li>
<li>Suivi¬†: consultez la <a href="../web-ui/">web UI</a> pour les statistiques par pays.</li>
</ol>
<h3 id="parametres_7">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Liste blanche¬†: codes pays ISO¬†3166‚Äë1 alpha‚Äë2 s√©par√©s par des espaces. Seuls ces pays sont autoris√©s.</td>
</tr>
<tr>
<td><code>BLACKLIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Liste noire¬†: codes pays ISO¬†3166‚Äë1 alpha‚Äë2 s√©par√©s par des espaces. Ces pays sont bloqu√©s.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Liste blanche vs noire</p>
<p>Liste blanche¬†: acc√®s restreint √† quelques pays. Liste noire¬†: bloquer des r√©gions probl√©matiques et autoriser le reste.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Priorit√©</p>
<p>Si une liste blanche et une liste noire sont d√©finies, la liste blanche a priorit√©¬†: si le pays n‚Äôy figure pas, l‚Äôacc√®s est refus√©.</p>
</div>
<div class="admonition info">
<p class="admonition-title">D√©tection du pays</p>
<p>BunkerWeb utilise la base mmdb <a href="https://db-ip.com/db/download/ip-to-country-lite">db‚Äëip lite</a>.</p>
</div>
<h3 id="exemples_7">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="14:4"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><input id="__tabbed_14_4" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Liste blanche uniquement</label><label for="__tabbed_14_2">Liste noire uniquement</label><label for="__tabbed_14_3">UE uniquement</label><label for="__tabbed_14_4">Blocage pays √† risque</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;US</span><span class="nv"> </span><span class="s">CA</span><span class="nv"> </span><span class="s">GB&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AT</span><span class="nv"> </span><span class="s">BE</span><span class="nv"> </span><span class="s">BG</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">CY</span><span class="nv"> </span><span class="s">CZ</span><span class="nv"> </span><span class="s">DK</span><span class="nv"> </span><span class="s">EE</span><span class="nv"> </span><span class="s">FI</span><span class="nv"> </span><span class="s">FR</span><span class="nv"> </span><span class="s">DE</span><span class="nv"> </span><span class="s">GR</span><span class="nv"> </span><span class="s">HU</span><span class="nv"> </span><span class="s">IE</span><span class="nv"> </span><span class="s">IT</span><span class="nv"> </span><span class="s">LV</span><span class="nv"> </span><span class="s">LT</span><span class="nv"> </span><span class="s">LU</span><span class="nv"> </span><span class="s">MT</span><span class="nv"> </span><span class="s">NL</span><span class="nv"> </span><span class="s">PL</span><span class="nv"> </span><span class="s">PT</span><span class="nv"> </span><span class="s">RO</span><span class="nv"> </span><span class="s">SK</span><span class="nv"> </span><span class="s">SI</span><span class="nv"> </span><span class="s">ES</span><span class="nv"> </span><span class="s">SE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP</span><span class="nv"> </span><span class="s">IR</span><span class="nv"> </span><span class="s">SY&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="crowdsec">CrowdSec</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<figure>
<p><img align="center," alt="Overview" src="../../assets/img/crowdsec.svg" width="600" /></p>
</figure>
<p>Le plugin CrowdSec int√®gre BunkerWeb avec le moteur de s√©curit√© CrowdSec, fournissant une couche de protection suppl√©mentaire contre diverses cybermenaces. Ce plugin agit comme un bouncer <a href="https://crowdsec.net/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">CrowdSec</a>, refusant les requ√™tes en fonction des d√©cisions de l'API CrowdSec.</p>
<p>CrowdSec est un moteur de s√©curit√© moderne et open-source qui d√©tecte et bloque les adresses IP malveillantes en se basant sur l'analyse comportementale et l'intelligence collective de sa communaut√©. Vous pouvez √©galement configurer des <a href="https://docs.crowdsec.net/docs/concepts?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">sc√©narios</a> pour bannir automatiquement les adresses IP en fonction de comportements suspects, b√©n√©ficiant ainsi d'une liste noire participative.</p>
<p><strong>Comment √ßa marche¬†:</strong></p>
<ol>
<li>Le moteur CrowdSec analyse les journaux et d√©tecte les activit√©s suspectes sur votre infrastructure.</li>
<li>Lorsqu'une activit√© malveillante est d√©tect√©e, CrowdSec cr√©e une d√©cision pour bloquer l'adresse IP incrimin√©e.</li>
<li>BunkerWeb, agissant comme un bouncer, interroge l'API locale de CrowdSec pour obtenir des d√©cisions concernant les requ√™tes entrantes.</li>
<li>Si l'adresse IP d'un client fait l'objet d'une d√©cision de blocage active, BunkerWeb refuse l'acc√®s aux services prot√©g√©s.</li>
<li>En option, le composant de s√©curit√© applicative (Application Security Component) peut effectuer une inspection approfondie des requ√™tes pour une s√©curit√© renforc√©e.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices cl√©s</p>
<ol>
<li><strong>S√©curit√© communautaire :</strong> B√©n√©ficiez des renseignements sur les menaces partag√©s par la communaut√© des utilisateurs de CrowdSec.</li>
<li><strong>Analyse comportementale :</strong> D√©tectez les attaques sophistiqu√©es bas√©es sur des mod√®les de comportement, et non uniquement sur des signatures.</li>
<li><strong>Int√©gration l√©g√®re :</strong> Impact minimal sur les performances de votre instance BunkerWeb.</li>
<li><strong>Protection multi-niveaux :</strong> Combinez la d√©fense p√©rim√©trique (blocage d'IP) avec la s√©curit√© applicative pour une protection en profondeur.</li>
</ol>
</div>
<h3 id="prerequis">Pr√©requis</h3>
<ul>
<li>Une API locale CrowdSec accessible par BunkerWeb (g√©n√©ralement l‚Äôagent ex√©cut√© sur la m√™me machine ou dans le m√™me r√©seau Docker).</li>
<li>L‚Äôacc√®s aux journaux d‚Äôacc√®s de BunkerWeb (<code>/var/log/bunkerweb/access.log</code> par d√©faut) pour que l‚Äôagent CrowdSec puisse analyser les requ√™tes.</li>
<li>L‚Äôacc√®s √† <code>cscli</code> sur l‚Äôh√¥te CrowdSec afin d‚Äôenregistrer la cl√© du bouncer BunkerWeb.</li>
</ul>
<h3 id="parcours-dintegration">Parcours d‚Äôint√©gration</h3>
<ol>
<li>Pr√©parer l‚Äôagent CrowdSec pour ing√©rer les journaux BunkerWeb.</li>
<li>Configurer BunkerWeb pour interroger l‚ÄôAPI locale CrowdSec.</li>
<li>Valider le lien via l‚ÄôAPI <code>/crowdsec/ping</code> ou la carte CrowdSec dans l‚Äôinterface d‚Äôadministration.</li>
</ol>
<p>Les sections suivantes d√©taillent chacune de ces √©tapes.</p>
<h3 id="etape-1-preparer-crowdsec-a-ingerer-les-journaux-bunkerweb">√âtape&nbsp;1 ‚Äì Pr√©parer CrowdSec √† ing√©rer les journaux BunkerWeb</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Docker</label><label for="__tabbed_15_2">Linux</label><label for="__tabbed_15_3">All-in-one</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Fichier d'acquisition</strong></p>
<p>Vous devrez ex√©cuter une instance de CrowdSec et la configurer pour analyser les journaux de BunkerWeb. Utilisez la valeur d√©di√©e <code>bunkerweb</code> pour le param√®tre <code>type</code> dans votre fichier d'acquisition (en supposant que les journaux de BunkerWeb sont stock√©s tels quels sans donn√©es suppl√©mentaires) :</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
</code></pre></div>
<p>Si la collection n'appara√Æt pas dans le conteneur CrowdSec, ex√©cutez <code>docker exec -it &lt;crowdsec-container&gt; cscli hub update</code>, puis red√©marrez ce conteneur (<code>docker restart &lt;crowdsec-container&gt;</code>) afin que les nouveaux artefacts soient disponibles. Remplacez <code>&lt;crowdsec-container&gt;</code> par le nom de votre conteneur CrowdSec.</p>
<p><strong>Composant de s√©curit√© applicative (<em>optionnel</em>)</strong></p>
<p>CrowdSec fournit √©galement un <a href="https://docs.crowdsec.net/docs/appsec/intro?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">Composant de s√©curit√© applicative</a> qui peut √™tre utilis√© pour prot√©ger votre application contre les attaques. Si vous souhaitez l'utiliser, vous devez cr√©er un autre fichier d'acquisition pour le composant AppSec :</p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p><strong>Syslog</strong></p>
<p>Pour les int√©grations bas√©es sur des conteneurs, nous recommandons de rediriger les journaux du conteneur BunkerWeb vers un service syslog afin que CrowdSec puisse y acc√©der facilement. Voici un exemple de configuration pour syslog-ng qui stockera les journaux bruts provenant de BunkerWeb dans un fichier local <code>/var/log/bunkerweb.log</code> :</p>
<div class="highlight"><pre><span></span><code>@version: 4.8

source s_net {
    udp(
        ip(&quot;0.0.0.0&quot;)
    );
};

template t_imp {
    template(&quot;$MSG\n&quot;);
    template_escape(no);
};

destination d_file {
    file(&quot;/var/log/bunkerweb.log&quot; template(t_imp));
};

log {
    source(s_net);
    destination(d_file);
};
</code></pre></div>
<p><strong>Docker Compose</strong></p>
<p>Voici le mod√®le docker-compose que vous pouvez utiliser (n'oubliez pas de mettre √† jour la cl√© du bouncer) :</p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-env</span>
<span class="w">  </span><span class="c1"># Nous utilisons une ancre pour √©viter de r√©p√©ter les m√™mes param√®tres pour les deux services</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span><span class="w"> </span><span class="c1"># Assurez-vous de d√©finir la bonne plage IP pour que le planificateur puisse envoyer la configuration √† l&#39;instance</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># C&#39;est le nom qui sera utilis√© pour identifier l&#39;instance dans le planificateur</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span><span class="w"> </span><span class="c1"># Pour le support QUIC / HTTP3</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span><span class="w"> </span><span class="c1"># Nous utilisons l&#39;ancre pour √©viter de r√©p√©ter les m√™mes param√®tres pour tous les services</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">logging</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">syslog</span><span class="w"> </span><span class="c1"># Envoyer les journaux √† syslog</span>
<span class="w">      </span><span class="nt">options</span><span class="p">:</span>
<span class="w">        </span><span class="nt">syslog-address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;udp://10.20.30.254:514&quot;</span><span class="w"> </span><span class="c1"># L&#39;adresse IP du service syslog</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span><span class="w"> </span><span class="c1"># Assurez-vous de d√©finir le nom correct de l&#39;instance</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># N&#39;oubliez pas de d√©finir un mot de passe plus fort pour la base de donn√©es</span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span><span class="w"> </span><span class="c1"># C&#39;est l&#39;adresse de l&#39;API du conteneur CrowdSec dans le m√™me r√©seau</span>
<span class="w">      </span><span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span><span class="w"> </span><span class="c1"># Commentez si vous ne voulez pas utiliser le composant AppSec</span>
<span class="w">      </span><span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3cr3tb0unc3rk3y&quot;</span><span class="w"> </span><span class="c1"># N&#39;oubliez pas de d√©finir une cl√© plus forte pour le bouncer</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Ceci est utilis√© pour persister le cache et d&#39;autres donn√©es comme les sauvegardes</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb:11</span>
<span class="w">    </span><span class="c1"># Nous d√©finissons la taille maximale des paquets autoris√©s pour √©viter les probl√®mes avec les grosses requ√™tes</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--max-allowed-packet=67108864</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;db&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changeme&quot;</span><span class="w"> </span><span class="c1"># N&#39;oubliez pas de d√©finir un mot de passe plus fort pour la base de donn√©es</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">crowdsec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/crowdsec:v1.7.3</span><span class="w"> </span><span class="c1"># Utilisez la derni√®re version mais √©pinglez toujours la version pour une meilleure stabilit√©/s√©curit√©</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cs-data:/var/lib/crowdsec/data</span><span class="w"> </span><span class="c1"># Pour persister les donn√©es de CrowdSec</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-logs:/var/log:ro</span><span class="w"> </span><span class="c1"># Les journaux de BunkerWeb √† analyser par CrowdSec</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./acquis.yaml:/etc/crowdsec/acquis.yaml</span><span class="w"> </span><span class="c1"># Le fichier d&#39;acquisition pour les journaux de BunkerWeb</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./appsec.yaml:/etc/crowdsec/acquis.d/appsec.yaml</span><span class="w"> </span><span class="c1"># Commentez si vous ne voulez pas utiliser le composant AppSec</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">BOUNCER_KEY_bunkerweb</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3cr3tb0unc3rk3y&quot;</span><span class="w"> </span><span class="c1"># N&#39;oubliez pas de d√©finir une cl√© plus forte pour le bouncer</span>
<span class="w">      </span><span class="nt">COLLECTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerity/bunkerweb</span><span class="nv"> </span><span class="s">crowdsecurity/appsec-virtual-patching</span><span class="nv"> </span><span class="s">crowdsecurity/appsec-generic-rules&quot;</span>
<span class="w">      </span><span class="c1">#   COLLECTIONS: &quot;bunkerity/bunkerweb&quot; # Si vous ne voulez pas utiliser le composant AppSec, utilisez plut√¥t cette ligne</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>

<span class="w">  </span><span class="nt">syslog</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">balabit/syslog-ng:4.9.0</span>
<span class="w">    </span><span class="nt">cap_add</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_BIND_SERVICE</span><span class="w">  </span><span class="c1"># Lier aux ports bas</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_BROADCAST</span><span class="w">  </span><span class="c1"># Envoyer des diffusions</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_RAW</span><span class="w">  </span><span class="c1"># Utiliser des sockets brutes</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAC_READ_SEARCH</span><span class="w">  </span><span class="c1"># Lire les fichiers en contournant les autorisations</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAC_OVERRIDE</span><span class="w">  </span><span class="c1"># Outrepasser les autorisations de fichiers</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CHOWN</span><span class="w">  </span><span class="c1"># Changer le propri√©taire</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SYSLOG</span><span class="w">  </span><span class="c1"># √âcrire dans les journaux syst√®me</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-logs:/var/log/bunkerweb</span><span class="w"> </span><span class="c1"># C&#39;est le volume utilis√© pour stocker les journaux</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./syslog-ng.conf:/etc/syslog-ng/syslog-ng.conf</span><span class="w"> </span><span class="c1"># C&#39;est le fichier de configuration de syslog-ng</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ipv4_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.254</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-logs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cs-data</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span><span class="w"> </span><span class="c1"># Assurez-vous de d√©finir la bonne plage IP pour que le planificateur puisse envoyer la configuration √† l&#39;instance</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Vous devez installer CrowdSec et le configurer pour analyser les journaux de BunkerWeb. Suivez la <a href="https://doc.crowdsec.net/docs/getting_started/install_crowdsec?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">documentation officielle</a>.</p>
<p>Pour permettre √† CrowdSec d'analyser les journaux de BunkerWeb, ajoutez les lignes suivantes √† votre fichier d'acquisition situ√© √† <code>/etc/crowdsec/acquis.yaml</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/access.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/error.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/modsec_audit.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
</code></pre></div>
<p>Mettez √† jour le hub CrowdSec et installez la collection BunkerWeb :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>hub<span class="w"> </span>update
sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>bunkerity/bunkerweb
</code></pre></div>
<p>Maintenant, ajoutez votre bouncer personnalis√© √† l'API CrowdSec en utilisant l'outil <code>cscli</code> :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>bouncers<span class="w"> </span>add<span class="w"> </span>crowdsec-bunkerweb-bouncer/v1.6
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Cl√© API</p>
<p>Conservez la cl√© g√©n√©r√©e par la commande <code>cscli</code> ; vous en aurez besoin plus tard.</p>
</div>
<p>Ensuite, red√©marrez le service CrowdSec :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>Composant de s√©curit√© applicative (<em>optionnel</em>)</strong></p>
<p>Si vous souhaitez utiliser le composant AppSec, vous devez cr√©er un autre fichier d'acquisition pour celui-ci, situ√© √† <code>/etc/crowdsec/acquis.d/appsec.yaml</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p>Vous devrez √©galement installer les collections du composant AppSec :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-virtual-patching
sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-generic-rules
</code></pre></div>
<p>Enfin, red√©marrez le service CrowdSec :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>Param√®tres</strong></p>
<p>Configurez le plugin en ajoutant les param√®tres suivants √† votre fichier de configuration BunkerWeb :</p>
<div class="highlight"><pre><span></span><code>USE_CROWDSEC=yes
CROWDSEC_API=http://127.0.0.1:8080
CROWDSEC_API_KEY=&lt;La cl√© fournie par cscli&gt;
# Commentez si vous ne voulez pas utiliser le composant AppSec
CROWDSEC_APPSEC_URL=http://127.0.0.1:7422
</code></pre></div>
<p>Enfin, rechargez le service BunkerWeb :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>reload<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<p>L'image Docker BunkerWeb All-In-One (AIO) est livr√©e avec CrowdSec enti√®rement int√©gr√©. Vous n'avez pas besoin de configurer une instance CrowdSec s√©par√©e ou de configurer manuellement les fichiers d'acquisition pour les journaux de BunkerWeb lorsque vous utilisez l'agent CrowdSec interne.</p>
<p>R√©f√©rez-vous √† la <a href="../integrations/#crowdsec-integration">documentation d'int√©gration de l'image All-In-One (AIO)</a>.</p>
</div>
</div>
</div>
<h3 id="etape-2-configurer-les-parametres-de-bunkerweb">√âtape&nbsp;2 ‚Äì Configurer les param√®tres de BunkerWeb</h3>
<p>Appliquez les variables d‚Äôenvironnement suivantes (ou leurs √©quivalents via le scheduler) pour permettre √† votre instance BunkerWeb de communiquer avec l‚ÄôAPI locale CrowdSec. Au minimum, <code>USE_CROWDSEC</code>, <code>CROWDSEC_API</code> et une cl√© valide g√©n√©r√©e avec <code>cscli bouncers add</code> sont n√©cessaires.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CROWDSEC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer CrowdSec :</strong> Mettre √† <code>yes</code> pour activer le bouncer CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_API</code></td>
<td><code>http://crowdsec:8080</code></td>
<td>global</td>
<td>no</td>
<td><strong>URL de l'API CrowdSec :</strong> L'adresse du service de l'API locale de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_API_KEY</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Cl√© API CrowdSec :</strong> La cl√© API pour s'authentifier aupr√®s de l'API CrowdSec, obtenue avec <code>cscli bouncers add</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_MODE</code></td>
<td><code>live</code></td>
<td>global</td>
<td>no</td>
<td><strong>Mode de fonctionnement :</strong> Soit <code>live</code> (interroge l'API pour chaque requ√™te) ou <code>stream</code> (met en cache p√©riodiquement toutes les d√©cisions).</td>
</tr>
<tr>
<td><code>CROWDSEC_ENABLE_INTERNAL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Trafic interne :</strong> Mettre √† <code>yes</code> pour v√©rifier le trafic interne par rapport aux d√©cisions de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_REQUEST_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>no</td>
<td><strong>D√©lai d'attente de la requ√™te :</strong> D√©lai d'attente en millisecondes pour les requ√™tes HTTP vers l'API locale de CrowdSec en mode live.</td>
</tr>
<tr>
<td><code>CROWDSEC_EXCLUDE_LOCATION</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Emplacements exclus :</strong> Liste d'emplacements (URI) s√©par√©s par des virgules √† exclure des v√©rifications de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_CACHE_EXPIRATION</code></td>
<td><code>1</code></td>
<td>global</td>
<td>no</td>
<td><strong>Expiration du cache :</strong> Le temps d'expiration du cache en secondes pour les d√©cisions IP en mode live.</td>
</tr>
<tr>
<td><code>CROWDSEC_UPDATE_FREQUENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>no</td>
<td><strong>Fr√©quence de mise √† jour :</strong> √Ä quelle fr√©quence (en secondes) r√©cup√©rer les d√©cisions nouvelles/expir√©es de l'API CrowdSec en mode stream.</td>
</tr>
</tbody>
</table>
<h4 id="parametres-du-composant-de-securite-applicative">Param√®tres du composant de s√©curit√© applicative</h4>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CROWDSEC_APPSEC_URL</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>URL AppSec :</strong> L'URL du composant de s√©curit√© applicative de CrowdSec. Laisser vide pour d√©sactiver AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_FAILURE_ACTION</code></td>
<td><code>passthrough</code></td>
<td>global</td>
<td>no</td>
<td><strong>Action en cas d'√©chec :</strong> Action √† entreprendre lorsque AppSec renvoie une erreur. Peut √™tre <code>passthrough</code> ou <code>deny</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_CONNECT_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>D√©lai de connexion :</strong> Le d√©lai d'attente en millisecondes pour se connecter au composant AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SEND_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>D√©lai d'envoi :</strong> Le d√©lai d'attente en millisecondes pour envoyer des donn√©es au composant AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_PROCESS_TIMEOUT</code></td>
<td><code>500</code></td>
<td>global</td>
<td>no</td>
<td><strong>D√©lai de traitement :</strong> Le d√©lai d'attente en millisecondes pour traiter la requ√™te dans le composant AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_ALWAYS_SEND_TO_APPSEC</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Toujours envoyer :</strong> Mettre √† <code>yes</code> pour toujours envoyer les requ√™tes √† AppSec, m√™me s'il y a une d√©cision au niveau de l'IP.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SSL_VERIFY</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>V√©rification SSL :</strong> Mettre √† <code>yes</code> pour v√©rifier le certificat SSL du composant AppSec.</td>
</tr>
</tbody>
</table>
<p>!!! info "√Ä propos des modes de fonctionnement" - Le <strong>mode Live</strong> interroge l'API CrowdSec pour chaque requ√™te entrante, offrant une protection en temps r√©el au prix d'une latence plus √©lev√©e. - Le <strong>mode Stream</strong> t√©l√©charge p√©riodiquement toutes les d√©cisions de l'API CrowdSec et les met en cache localement, r√©duisant la latence avec un l√©ger retard dans l'application des nouvelles d√©cisions.</p>
<h3 id="exemples-de-configurations">Exemples de configurations</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Configuration de base</label><label for="__tabbed_16_2">Configuration avanc√©e avec AppSec</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>C'est une configuration simple pour lorsque CrowdSec s'ex√©cute sur le m√™me h√¥te :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;live&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Une configuration plus compl√®te incluant le composant de s√©curit√© applicative :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">CROWDSEC_UPDATE_FREQUENCY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">CROWDSEC_EXCLUDE_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/health,/metrics&quot;</span>

<span class="c1"># Configuration AppSec</span>
<span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span>
<span class="nt">CROWDSEC_APPSEC_FAILURE_ACTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deny&quot;</span>
<span class="nt">CROWDSEC_ALWAYS_SEND_TO_APPSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_APPSEC_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="etape-3-valider-lintegration">√âtape&nbsp;3 ‚Äì Valider l‚Äôint√©gration</h3>
<ul>
<li>Dans les journaux du planificateur, recherchez les entr√©es <code>CrowdSec configuration successfully generated</code> et <code>CrowdSec bouncer denied request</code> afin de v√©rifier que le plugin est actif.</li>
<li>C√¥t√© CrowdSec, surveillez <code>cscli metrics show</code> ou la console CrowdSec pour vous assurer que les d√©cisions BunkerWeb apparaissent comme pr√©vu.</li>
<li>Dans l‚Äôinterface BunkerWeb, ouvrez la page du plugin CrowdSec pour voir l‚Äô√©tat de l‚Äôint√©gration.</li>
</ul>
<h2 id="custom-ssl-certificate">Custom SSL certificate</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Certificat SSL personnalis√© permet d‚Äôutiliser vos propres certificats SSL/TLS avec BunkerWeb, au lieu de ceux g√©n√©r√©s automatiquement. Utile si vous poss√©dez d√©j√† des certificats d‚Äôune AC de confiance, avez des besoins sp√©cifiques ou centralisez la gestion des certificats.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Vous fournissez le certificat et la cl√© priv√©e (chemins de fichiers ou donn√©es en base64/PEM).</li>
<li>BunkerWeb valide le format et l‚Äôutilisabilit√© des fichiers.</li>
<li>Lors d‚Äôune connexion s√©curis√©e, BunkerWeb sert votre certificat personnalis√©.</li>
<li>La validit√© est surveill√©e et des alertes sont √©mises avant expiration.</li>
<li>Vous gardez le contr√¥le total sur le cycle de vie des certificats.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Surveillance automatique</p>
<p>Avec <code>USE_CUSTOM_SSL: yes</code>, BunkerWeb surveille le certificat <code>CUSTOM_SSL_CERT</code>, d√©tecte les changements et recharge NGINX si n√©cessaire.</p>
</div>
<h3 id="comment-lutiliser_10">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_CUSTOM_SSL: yes</code>.</li>
<li>M√©thode¬†: fichiers vs donn√©es, priorit√© via <code>CUSTOM_SSL_CERT_PRIORITY</code>.</li>
<li>Fichiers¬†: fournissez les chemins du certificat et de la cl√© priv√©e.</li>
<li>Donn√©es¬†: fournissez les cha√Ænes base64 ou PEM en clair.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Mode stream</p>
<p>En mode stream, configurez <code>LISTEN_STREAM_PORT_SSL</code> pour le port SSL/TLS.</p>
</div>
<h3 id="parametres_8">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CUSTOM_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer l‚Äôusage d‚Äôun certificat personnalis√©.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_PRIORITY</code></td>
<td><code>file</code></td>
<td>multisite</td>
<td>non</td>
<td>Priorit√© des sources¬†: <code>file</code> (fichiers) ou <code>data</code> (donn√©es).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin complet vers le certificat (ou bundle).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin complet vers la cl√© priv√©e.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_DATA</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Donn√©es du certificat (base64 ou PEM en clair).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY_DATA</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Donn√©es de la cl√© priv√©e (base64 ou PEM en clair).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">S√©curit√©</p>
<p>Prot√©gez la cl√© priv√©e (droits adapt√©s, lisible par le scheduler BunkerWeb uniquement).</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Format</p>
<p>Les certificats doivent √™tre au format PEM. Convertissez si n√©cessaire.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Cha√Ænes de certification</p>
<p>Si une cha√Æne interm√©diaire est n√©cessaire, fournissez le bundle complet dans l‚Äôordre (certificat puis interm√©diaires).</p>
</div>
<h3 id="exemples_8">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="17:4"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><input id="__tabbed_17_4" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Fichiers</label><label for="__tabbed_17_2">Donn√©es base64</label><label for="__tabbed_17_3">PEM en clair</label><label for="__tabbed_17_4">Fallback</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="l l-Scalar l-Scalar-Plain">-----BEGIN CERTIFICATE-----</span>
<span class="l l-Scalar l-Scalar-Plain">MIIDdzCCAl+gAwIBAgIUJH...certificate content...AAAA</span>
<span class="l l-Scalar l-Scalar-Plain">-----END CERTIFICATE-----</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="l l-Scalar l-Scalar-Plain">-----BEGIN PRIVATE KEY-----</span>
<span class="l l-Scalar l-Scalar-Plain">MIIEvQIBADAN...key content...AAAA</span>
<span class="l l-Scalar l-Scalar-Plain">-----END PRIVATE KEY-----</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="dnsbl">DNSBL</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin DNSBL (Domain Name System Blacklist) prot√®ge contre les IP malveillantes connues en v√©rifiant l‚Äôadresse IP du client aupr√®s de serveurs DNSBL externes. Cette fonctionnalit√© aide √† se pr√©munir du spam, des botnets et de diverses menaces en s‚Äôappuyant on des listes communautaires d‚ÄôIP probl√©matiques.</p>
<p><strong>Comment √ßa marche¬†:</strong></p>
<ol>
<li>Lorsqu‚Äôun client se connecte √† votre site, BunkerWeb interroge les serveurs DNSBL que vous avez choisis via le protocole DNS.</li>
<li>La v√©rification s‚Äôeffectue en envoyant une requ√™te DNS invers√©e √† chaque serveur DNSBL avec l‚ÄôIP du client.</li>
<li>Si un serveur DNSBL confirme que l‚ÄôIP du client est list√©e comme malveillante, BunkerWeb bannit automatiquement ce client, emp√™chant les menaces potentielles d‚Äôatteindre votre application.</li>
<li>Les r√©sultats sont mis en cache pour am√©liorer les performances pour les visites r√©p√©t√©es depuis la m√™me IP.</li>
<li>Les recherches sont asynchrones pour minimiser l‚Äôimpact sur le temps de chargement.</li>
</ol>
<h3 id="comment-lutiliser_11">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour configurer et utiliser la fonctionnalit√© DNSBL :</p>
<ol>
<li><strong>Activer la fonction :</strong> La fonction DNSBL est d√©sactiv√©e par d√©faut. Passez <code>USE_DNSBL</code> √† <code>yes</code> pour l'activer.</li>
<li><strong>Configurer les serveurs DNSBL :</strong> Ajoutez les noms de domaine des services DNSBL que vous souhaitez utiliser dans le param√®tre <code>DNSBL_LIST</code>.</li>
<li><strong>Appliquer les param√®tres :</strong> Une fois configur√©, BunkerWeb v√©rifiera automatiquement les connexions entrantes aupr√®s des serveurs DNSBL sp√©cifi√©s.</li>
<li><strong>Surveiller l'efficacit√© :</strong> Consultez la <a href="../web-ui/">web UI</a> pour voir les statistiques des requ√™tes bloqu√©es par les v√©rifications DNSBL.</li>
</ol>
<h3 id="parametres-de-configuration_2">Param√®tres de configuration</h3>
<p><strong>G√©n√©ral</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_DNSBL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer DNSBL : mettre √† <code>yes</code> pour activer les v√©rifications DNSBL pour les connexions entrantes.</td>
</tr>
<tr>
<td><code>DNSBL_LIST</code></td>
<td><code>bl.blocklist.de sbl.spamhaus.org xbl.spamhaus.org</code></td>
<td>global</td>
<td>non</td>
<td>Serveurs DNSBL : liste des domaines de serveurs DNSBL √† v√©rifier, s√©par√©s par des espaces.</td>
</tr>
</tbody>
</table>
<p><strong>Listes d‚Äôexception</strong></p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DNSBL_IGNORE_IP</code></td>
<td>``</td>
<td>multisite</td>
<td>oui</td>
<td>IP/CIDR s√©par√©s par des espaces pour lesquels ignorer les v√©rifications DNSBL (liste blanche).</td>
</tr>
<tr>
<td><code>DNSBL_IGNORE_IP_URLS</code></td>
<td>``</td>
<td>multisite</td>
<td>oui</td>
<td>URL s√©par√©es par des espaces fournissant des IP/CIDR √† ignorer. Supporte <code>http(s)://</code> et <code>file://</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Choisir des serveurs DNSBL</p>
<p>Choisissez des fournisseurs DNSBL r√©put√©s pour minimiser les faux positifs. La liste par d√©faut inclut des services bien √©tablis qui conviennent √† la plupart des sites web :</p>
<ul>
<li><strong>bl.blocklist.de :</strong> Liste les IP qui ont √©t√© d√©tect√©es en train d'attaquer d'autres serveurs.</li>
<li><strong>sbl.spamhaus.org :</strong> Se concentre sur les sources de spam et autres activit√©s malveillantes.</li>
<li><strong>xbl.spamhaus.org :</strong> Cible les syst√®mes infect√©s, tels que les machines compromises ou les proxys ouverts.</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Principe de fonctionnement de DNSBL</p>
<p>Les serveurs DNSBL fonctionnent en r√©pondant √† des requ√™tes DNS sp√©cialement format√©es. Lorsque BunkerWeb v√©rifie une adresse IP, il inverse l'IP et y ajoute le nom de domaine du DNSBL. Si la requ√™te DNS r√©sultante renvoie une r√©ponse de ¬´ succ√®s ¬ª, l'IP est consid√©r√©e comme √©tant sur la liste noire.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Consid√©rations sur la performance</p>
<p>Bien que BunkerWeb optimise les recherches DNSBL pour la performance, l'ajout d'un grand nombre de serveurs DNSBL pourrait potentiellement impacter les temps de r√©ponse. Commencez avec quelques serveurs DNSBL r√©put√©s et surveillez la performance avant d'en ajouter d'autres.</p>
</div>
<h3 id="exemples-de-configuration_3">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="18:5"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><input id="__tabbed_18_3" name="__tabbed_18" type="radio" /><input id="__tabbed_18_4" name="__tabbed_18" type="radio" /><input id="__tabbed_18_5" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">Configuration de base</label><label for="__tabbed_18_2">Configuration minimale</label><label for="__tabbed_18_3">Exclure des IP de confiance</label><label for="__tabbed_18_4">Utiliser des URL distantes</label><label for="__tabbed_18_5">Utiliser des fichiers locaux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple utilisant les serveurs DNSBL par d√©faut :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bl.blocklist.de</span><span class="nv"> </span><span class="s">sbl.spamhaus.org</span><span class="nv"> </span><span class="s">xbl.spamhaus.org&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Une configuration minimale se concentrant sur les services DNSBL les plus fiables :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
</code></pre></div>
<p>Cette configuration utilise uniquement :</p>
<ul>
<li><strong>zen.spamhaus.org</strong> : La liste combin√©e de Spamhaus est souvent consid√©r√©e comme suffisante en tant que solution autonome en raison de sa large couverture et de sa r√©putation de pr√©cision. Elle combine les listes SBL, XBL et PBL en une seule requ√™te, la rendant efficace et compl√®te.</li>
</ul>
</div>
<div class="tabbed-block">
<p>Vous pouvez exclure certains clients des v√©rifications DNSBL via des valeurs statiques et/ou des fichiers distants :</p>
<ul>
<li><code>DNSBL_IGNORE_IP</code> : Ajoutez des IP et des plages CIDR s√©par√©es par des espaces. Exemple : <code>192.0.2.10 203.0.113.0/24 2001:db8::/32</code>.</li>
<li><code>DNSBL_IGNORE_IP_URLS</code> : Fournissez des URL dont le contenu liste une IP/CIDR par ligne. Les commentaires commen√ßant par <code>#</code> ou <code>;</code> sont ignor√©s. Les entr√©es en double sont d√©dupliqu√©es.</li>
</ul>
<p>Quand une IP cliente correspond √† la liste d‚Äôexclusion, BunkerWeb saute les requ√™tes DNSBL et met en cache le r√©sultat ¬´ ok ¬ª pour acc√©l√©rer les requ√™tes suivantes.</p>
</div>
<div class="tabbed-block">
<p>La t√¢che <code>dnsbl-download</code> t√©l√©charge et met en cache les IP √† ignorer toutes les heures :</p>
<ul>
<li>Protocoles : <code>https://</code>, <code>http://</code> et chemins locaux <code>file://</code>.</li>
<li>Un cache par URL avec une somme de contr√¥le emp√™che les t√©l√©chargements redondants (d√©lai de gr√¢ce d'1 heure).</li>
<li>Fichier fusionn√© par service : <code>/var/cache/bunkerweb/dnsbl/&lt;service&gt;/IGNORE_IP.list</code>.</li>
<li>Charg√© au d√©marrage et fusionn√© avec <code>DNSBL_IGNORE_IP</code>.</li>
</ul>
<p>Exemple combinant des sources statiques et des URL :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.0.0.0/8</span><span class="nv"> </span><span class="s">192.168.0.0/16</span><span class="nv"> </span><span class="s">2001:db8::/32&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://exemple.com/allow-cidrs.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/dnsbl/ignore.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Chargez des IP √† ignorer depuis des fichiers locaux en utilisant des URL <code>file://</code> :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///etc/bunkerweb/dnsbl/ignore.txt</span><span class="nv"> </span><span class="s">file:///opt/data/allow-cidrs.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="database">Database</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Base de donn√©es fournit une int√©gration robuste pour BunkerWeb en permettant le stockage centralis√© et la gestion des donn√©es de configuration, des journaux et d‚Äôautres informations essentielles.</p>
<p>Ce composant c≈ìur prend en charge plusieurs moteurs¬†: SQLite, PostgreSQL, MySQL/MariaDB et Oracle, afin de choisir la solution la mieux adapt√©e √† votre environnement et √† vos besoins.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>BunkerWeb se connecte √† la base configur√©e via une URI au format SQLAlchemy.</li>
<li>Les donn√©es de configuration critiques, les informations d‚Äôex√©cution et les journaux des jobs sont stock√©s de mani√®re s√©curis√©e en base.</li>
<li>Des t√¢ches de maintenance automatiques optimisent la base en g√©rant la croissance et en purgeant les enregistrements exc√©dentaires.</li>
<li>Pour la haute disponibilit√©, vous pouvez configurer une URI en lecture seule servant de bascule et/ou pour d√©lester les lectures.</li>
<li>Les op√©rations base de donn√©es sont journalis√©es selon le niveau de log sp√©cifi√©, offrant la visibilit√© adapt√©e.</li>
</ol>
<h3 id="comment-lutiliser_12">Comment l‚Äôutiliser</h3>
<p>√âtapes pour configurer la base de donn√©es¬†:</p>
<ol>
<li>Choisir un moteur¬†: SQLite (par d√©faut), PostgreSQL, MySQL/MariaDB ou Oracle.</li>
<li>Configurer l‚ÄôURI¬†: renseignez <code>DATABASE_URI</code> (format SQLAlchemy) pour la base principale.</li>
<li>Optionnel¬†: <code>DATABASE_URI_READONLY</code> pour les op√©rations en lecture seule ou en secours.</li>
</ol>
<h3 id="parametres_9">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DATABASE_URI</code></td>
<td><code>sqlite:////var/lib/bunkerweb/db.sqlite3</code></td>
<td>global</td>
<td>non</td>
<td>URI principale de connexion (format SQLAlchemy).</td>
</tr>
<tr>
<td><code>DATABASE_URI_READONLY</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>URI optionnelle en lecture seule (offload/HA).</td>
</tr>
<tr>
<td><code>DATABASE_LOG_LEVEL</code></td>
<td><code>warning</code></td>
<td>global</td>
<td>non</td>
<td>Niveau de verbosit√© des logs DB¬†: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>warning</code>, <code>error</code>.</td>
</tr>
<tr>
<td><code>DATABASE_MAX_JOBS_RUNS</code></td>
<td><code>10000</code></td>
<td>global</td>
<td>non</td>
<td>Nombre max d‚Äôentr√©es de runs de jobs conserv√©es avant purge automatique.</td>
</tr>
<tr>
<td><code>DATABASE_MAX_SESSION_AGE_DAYS</code></td>
<td><code>14</code></td>
<td>global</td>
<td>non</td>
<td>Dur√©e max de conservation des sessions UI (en jours) avant purge automatique.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Choix du moteur" - SQLite (d√©faut)¬†: simple et fichier unique, id√©al mono‚Äën≈ìud/tests. - PostgreSQL¬†: recommand√© en production multi‚Äëinstances (robustesse, concurrence). - MySQL/MariaDB¬†: alternative solide aux capacit√©s proches de PostgreSQL. - Oracle¬†: adapt√© aux environnements d‚Äôentreprise standardis√©s sur Oracle.</p>
<p>!!! info "Format SQLAlchemy" - SQLite¬†: <code>sqlite:////chemin/vers/database.sqlite3</code> - PostgreSQL¬†: <code>postgresql://user:password@h√¥te:port/base</code> - MySQL/MariaDB¬†: <code>mysql://user:password@h√¥te:port/base</code> ou <code>mariadb://user:password@h√¥te:port/base</code> - Oracle¬†: <code>oracle://user:password@h√¥te:port/base</code></p>
<div class="admonition warning">
<p class="admonition-title">Maintenance</p>
<p>Des t√¢ches quotidiennes assurent la maintenance automatique¬†:</p>
</div>
<ul>
<li><strong>Purge des runs de jobs exc√©dentaires</strong>¬†: supprime l‚Äôhistorique au-del√† de <code>DATABASE_MAX_JOBS_RUNS</code>.</li>
<li><strong>Purge des sessions UI expir√©es</strong>¬†: enl√®ve les sessions plus anciennes que <code>DATABASE_MAX_SESSION_AGE_DAYS</code>.</li>
</ul>
<p>Ces jobs √©vitent la croissance illimit√©e tout en conservant un historique d‚Äôexploitation pertinent.</p>
<h2 id="easy-resolve-pro">Easy Resolve <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides a simpler way to fix false positives in reports.</p>
<h2 id="errors">Errors</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Errors fournit une gestion personnalisable des erreurs HTTP, afin de d√©finir l‚Äôapparence des r√©ponses d‚Äôerreur pour vos utilisateurs. Vous pouvez ainsi afficher des pages d‚Äôerreur claires et coh√©rentes avec votre identit√©, plut√¥t que les pages techniques par d√©faut du serveur.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Quand une erreur HTTP survient (ex. 400, 404, 500), BunkerWeb intercepte la r√©ponse.</li>
<li>√Ä la place de la page par d√©faut, BunkerWeb affiche une page personnalis√©e et soign√©e.</li>
<li>Les pages d‚Äôerreur sont configurables¬†: vous pouvez fournir un fichier HTML par code d‚Äôerreur. Les fichiers doivent √™tre plac√©s dans le r√©pertoire d√©fini par <code>ROOT_FOLDER</code> (voir le plugin Misc).</li>
<li>Par d√©faut, <code>ROOT_FOLDER</code> vaut <code>/var/www/html/{server_name}</code>.</li>
<li>En mode multisite, chaque site a son propre <code>ROOT_FOLDER</code>¬†; placez les pages d‚Äôerreur dans le dossier correspondant √† chaque site.</li>
<li>Les pages par d√©faut expliquent clairement le probl√®me et sugg√®rent des actions possibles.</li>
</ol>
<h3 id="comment-lutiliser_13">Comment l‚Äôutiliser</h3>
<ol>
<li>D√©finir les pages personnalis√©es¬†: utilisez <code>ERRORS</code> pour associer des codes HTTP √† des fichiers HTML (dans <code>ROOT_FOLDER</code>).</li>
<li>Configurer vos pages¬†: utilisez celles de BunkerWeb par d√©faut ou vos propres fichiers.</li>
<li>D√©finir les codes intercept√©s¬†: avec <code>INTERCEPTED_ERROR_CODES</code>, choisissez les codes toujours g√©r√©s par BunkerWeb.</li>
<li>Laissez BunkerWeb faire le reste¬†: la gestion d‚Äôerreurs sera appliqu√©e automatiquement.</li>
</ol>
<h3 id="parametres_10">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ERRORS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Pages d‚Äôerreur personnalis√©es¬†: paires <code>CODE=/chemin/page.html</code>.</td>
</tr>
<tr>
<td><code>INTERCEPTED_ERROR_CODES</code></td>
<td><code>400 401 403 404 405 413 429 500 501 502 503 504</code></td>
<td>multisite</td>
<td>non</td>
<td>Codes intercept√©s¬†: liste de codes g√©r√©s avec la page par d√©faut si aucune page personnalis√©e n‚Äôest d√©finie.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Conception des pages</p>
<p>Les pages par d√©faut sont claires et p√©dagogiques¬†: description de l‚Äôerreur, causes possibles, actions sugg√©r√©es et rep√®res visuels.</p>
</div>
<p>!!! info "Types d‚Äôerreurs" - 4xx (c√¥t√© client)¬†: requ√™tes invalides, ressource inexistante, authentification manquante‚Ä¶ - 5xx (c√¥t√© serveur)¬†: impossibilit√© de traiter une requ√™te valide (erreur interne, indisponibilit√© temporaire‚Ä¶).</p>
<h3 id="exemples_9">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="19:3"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">Gestion par d√©faut</label><label for="__tabbed_19_2">Pages personnalis√©es</label><label for="__tabbed_19_3">Gestion s√©lective</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404=/custom/404.html</span><span class="nv"> </span><span class="s">500=/custom/500.html&quot;</span>
<span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404</span><span class="nv"> </span><span class="s">500&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="greylist">Greylist</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Greylist adopte une approche flexible¬†: il autorise l‚Äôacc√®s aux visiteurs correspondant √† des crit√®res donn√©s tout en maintenant les contr√¥les de s√©curit√©. Contrairement aux listes noire/blanche, il cr√©e un juste milieu.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Vous d√©finissez des crit√®res (IP, r√©seaux, rDNS, ASN, User‚ÄëAgent, motifs d‚ÄôURI).</li>
<li>Un visiteur qui correspond est autoris√©, mais reste soumis aux autres contr√¥les.</li>
<li>S‚Äôil ne correspond √† aucun crit√®re greylist, l‚Äôacc√®s est refus√©.</li>
<li>Des sources externes peuvent alimenter automatiquement la liste.</li>
</ol>
<h3 id="comment-lutiliser_14">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_GREYLIST: yes</code>.</li>
<li>R√®gles¬†: d√©finissez IP/r√©seaux, rDNS, ASN, User‚ÄëAgent ou URIs.</li>
<li>Sources externes¬†: optionnel, configurez des URLs pour mises √† jour.</li>
<li>Suivi¬†: consultez la <a href="../web-ui/">web UI</a>.</li>
</ol>
<p>!!! tip "Comportement d‚Äôacc√®s" - Visiteurs greylist¬†: acc√®s autoris√© mais contr√¥les appliqu√©s. - Autres visiteurs¬†: acc√®s refus√©.</p>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
<p>En mode stream, seuls IP, rDNS et ASN sont pris en compte.</p>
</div>
<h3 id="parametres_11">Param√®tres</h3>
<p>G√©n√©ral</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GREYLIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la greylist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="20:5"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><input id="__tabbed_20_3" name="__tabbed_20" type="radio" /><input id="__tabbed_20_4" name="__tabbed_20" type="radio" /><input id="__tabbed_20_5" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">Adresse IP</label><label for="__tabbed_20_2">Reverse DNS</label><label for="__tabbed_20_3">ASN</label><label for="__tabbed_20_4">User‚ÄëAgent</label><label for="__tabbed_20_5">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Liste d‚ÄôIP/r√©seaux (CIDR) √† greylist, s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>GREYLIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des IP/r√©seaux √† greylist.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suffixes de DNS invers√©s √† greylist.</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>V√©rifier seulement les IP globales si <code>yes</code>.</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des suffixes rDNS √† greylist.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Num√©ros d‚ÄôAS √† greylist (s√©par√©s par des espaces).</td>
</tr>
<tr>
<td><code>GREYLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des AS √† greylist.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs (regex PCRE) d‚ÄôUser‚ÄëAgent √† greylist.</td>
</tr>
<tr>
<td><code>GREYLIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des motifs d‚ÄôUser‚ÄëAgent √† greylist.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs d‚ÄôURI (regex PCRE) √† greylist.</td>
</tr>
<tr>
<td><code>GREYLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des motifs d‚ÄôURI √† greylist.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Format d‚ÄôURL</p>
<p>Les param√®tres <code>*_URLS</code> supportent HTTP/HTTPS et <code>file:///</code>. Auth basique possible avec <code>http://user:pass@url</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Mises √† jour</p>
<p>Les listes r√©cup√©r√©es par URL sont mises √† jour automatiquement toutes les heures.</p>
</div>
<h3 id="travailler-avec-des-fichiers-de-listes-locaux_1">Travailler avec des fichiers de listes locaux</h3>
<p>Les param√®tres <code>*_URLS</code> fournis par les plugins Whitelist, Greylist et Blacklist utilisent le m√™me t√©l√©chargeur. Lorsque vous r√©f√©rencez une URL <code>file:///</code>¬†:</p>
<ul>
<li>Le chemin est r√©solu dans le conteneur du <strong>scheduler</strong> (dans un d√©ploiement Docker il s‚Äôagit g√©n√©ralement de <code>bunkerweb-scheduler</code>). Montez-y vos fichiers et v√©rifiez que l‚Äôutilisateur scheduler poss√®de un acc√®s en lecture.</li>
<li>Chaque fichier est un texte encod√© en UTF-8 avec une entr√©e par ligne. Les lignes vides sont ignor√©es et les commentaires doivent commencer par <code>#</code> ou <code>;</code>. Les commentaires <code>//</code> ne sont pas pris en charge.</li>
<li>Valeur attendue selon le type de liste¬†:</li>
<li><strong>Listes IP</strong> acceptent des adresses IPv4/IPv6 ou des r√©seaux CIDR (par exemple <code>192.0.2.10</code> ou <code>2001:db8::/48</code>).</li>
<li><strong>Listes rDNS</strong> attendent un suffixe sans espaces (par exemple <code>.search.msn.com</code>). Les valeurs sont automatiquement converties en minuscules.</li>
<li><strong>Listes ASN</strong> peuvent contenir uniquement le num√©ro (<code>32934</code>) ou le num√©ro pr√©fix√© par <code>AS</code> (<code>AS15169</code>).</li>
<li><strong>Listes User-Agent</strong> sont trait√©es comme des motifs PCRE et la ligne compl√®te est conserv√©e (espaces compris). Placez vos commentaires sur une ligne s√©par√©e pour √©viter qu‚Äôils ne soient interpr√©t√©s comme motif.</li>
<li><strong>Listes URI</strong> doivent commencer par <code>/</code> et peuvent utiliser des jetons PCRE tels que <code>^</code> ou <code>$</code>.</li>
</ul>
<p>Exemples de fichiers conformes¬†:</p>
<div class="highlight"><pre><span></span><code># /etc/bunkerweb/lists/ip-greylist.txt
192.0.2.10
198.51.100.0/24

# /etc/bunkerweb/lists/ua-greylist.txt
(?:^|\s)FriendlyScanner(?:\s|$)
TrustedMonitor/\d+\.\d+
</code></pre></div>
<h2 id="gzip">Gzip</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin GZIP compresse les r√©ponses HTTP avec l‚Äôalgorithme gzip pour r√©duire la bande passante et acc√©l√©rer le chargement des pages.</p>
<h3 id="fonctionnement">Fonctionnement</h3>
<ol>
<li>BunkerWeb d√©tecte si le client supporte gzip.</li>
<li>Si oui, la r√©ponse est compress√©e au niveau configur√©.</li>
<li>Les en‚Äët√™tes indiquent l‚Äôusage de gzip.</li>
<li>Le navigateur d√©compresse avant l‚Äôaffichage.</li>
</ol>
<h3 id="comment-lutiliser_15">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_GZIP: yes</code> (d√©sactiv√© par d√©faut).</li>
<li>Types MIME¬†: d√©finir <code>GZIP_TYPES</code>.</li>
<li>Taille minimale¬†: <code>GZIP_MIN_LENGTH</code> pour √©viter les tr√®s petits fichiers.</li>
<li>Niveau de compression¬†: <code>GZIP_COMP_LEVEL</code> (1‚Äì9).</li>
<li>Contenu proxifi√©¬†: ajuster <code>GZIP_PROXIED</code>.</li>
</ol>
<h3 id="parametres_12">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GZIP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la compression gzip.</td>
</tr>
<tr>
<td><code>GZIP_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>non</td>
<td>Types MIME compress√©s.</td>
</tr>
<tr>
<td><code>GZIP_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>non</td>
<td>Taille minimale (octets) pour appliquer la compression.</td>
</tr>
<tr>
<td><code>GZIP_COMP_LEVEL</code></td>
<td><code>5</code></td>
<td>multisite</td>
<td>non</td>
<td>Niveau 1‚Äì9¬†: plus haut = meilleure compression mais plus de CPU.</td>
</tr>
<tr>
<td><code>GZIP_PROXIED</code></td>
<td><code>no-cache no-store private expired auth</code></td>
<td>multisite</td>
<td>non</td>
<td>Pr√©cise quels contenus proxifi√©s doivent √™tre compress√©s selon les en‚Äët√™tes de r√©ponse.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Niveau de compression</p>
<p><code>5</code> est un bon compromis. Statique/CPU dispo¬†: 7‚Äì9. Dynamique/CPU limit√©¬†: 1‚Äì3.</p>
</div>
<h3 id="exemples_10">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="21:4"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><input id="__tabbed_21_2" name="__tabbed_21" type="radio" /><input id="__tabbed_21_3" name="__tabbed_21" type="radio" /><input id="__tabbed_21_4" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">Basique</label><label for="__tabbed_21_2">Compression maximale</label><label for="__tabbed_21_3">Performance √©quilibr√©e</label><label for="__tabbed_21_4">Contenu proxifi√©</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no-cache</span><span class="nv"> </span><span class="s">no-store</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">expired&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="html-injection">HTML injection</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin d‚Äôinjection HTML permet d‚Äôajouter du code HTML personnalis√© dans les pages de votre site juste avant <code>&lt;/body&gt;</code> ou <code>&lt;/head&gt;</code>. Id√©al pour int√©grer des scripts d‚Äôanalytics, pixels de tracking, JS/CSS personnalis√©s ou des int√©grations tierces sans modifier le code source de votre application.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä la livraison d‚Äôune page, BunkerWeb inspecte la r√©ponse HTML.</li>
<li>Si l‚Äôinjection ¬´¬†body¬†¬ª est configur√©e, il ins√®re votre HTML juste avant <code>&lt;/body&gt;</code>.</li>
<li>Si l‚Äôinjection ¬´¬†head¬†¬ª est configur√©e, il ins√®re votre HTML juste avant <code>&lt;/head&gt;</code>.</li>
<li>L‚Äôinsertion s‚Äôapplique automatiquement √† toutes les pages HTML servies.</li>
</ol>
<h3 id="comment-lutiliser_16">Comment l‚Äôutiliser</h3>
<ol>
<li>Pr√©parez votre HTML personnalis√©.</li>
<li>Choisissez l‚Äôemplacement¬†: <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code>, ou les deux.</li>
<li>Renseignez <code>INJECT_HEAD</code> et/ou <code>INJECT_BODY</code> avec votre code.</li>
</ol>
<h3 id="parametres_13">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INJECT_HEAD</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Code HTML inject√© avant <code>&lt;/head&gt;</code>.</td>
</tr>
<tr>
<td><code>INJECT_BODY</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Code HTML inject√© avant <code>&lt;/body&gt;</code>.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Bonnes pratiques" - Placez de pr√©f√©rence les scripts JS en fin de body pour √©viter de bloquer le rendu. - Mettez le CSS et le JS critique dans le head pour √©viter le flash de contenu non styl√©. - Attention au contenu inject√© qui pourrait casser le site.</p>
<h3 id="exemples_11">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="22:4"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><input id="__tabbed_22_2" name="__tabbed_22" type="radio" /><input id="__tabbed_22_3" name="__tabbed_22" type="radio" /><input id="__tabbed_22_4" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">Google Analytics</label><label for="__tabbed_22_2">Styles personnalis√©s</label><label for="__tabbed_22_3">Int√©grations multiples</label><label for="__tabbed_22_4">Bandeau cookies</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;script</span><span class="nv"> </span><span class="s">async</span><span class="nv"> </span><span class="s">src=&quot;https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX&quot;&gt;&lt;/script&gt;&lt;script&gt;window.dataLayer</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">window.dataLayer</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">[];function</span><span class="nv"> </span><span class="s">gtag(){dataLayer.push(arguments);}gtag(</span><span class="se">&#39;&#39;</span><span class="s">js</span><span class="se">&#39;&#39;</span><span class="s">,</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">Date());gtag(</span><span class="se">&#39;&#39;</span><span class="s">config</span><span class="se">&#39;&#39;</span><span class="s">,</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">G-XXXXXXXXXX</span><span class="se">&#39;&#39;</span><span class="s">);&lt;/script&gt;&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.custom-element</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">blue;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.notification-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f8f9fa;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;script</span><span class="nv"> </span><span class="s">src=&quot;https://cdn.example.com/js/widget.js&quot;&gt;&lt;/script&gt;&lt;script&gt;initializeWidget(</span><span class="se">&#39;&#39;</span><span class="s">your-api-key</span><span class="se">&#39;&#39;</span><span class="s">);&lt;/script&gt;&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;.cookie-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">position:</span><span class="nv"> </span><span class="s">fixed;</span><span class="nv"> </span><span class="s">bottom:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">left:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">right:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f1f1f1;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">z-index:</span><span class="nv"> </span><span class="s">1000;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.cookie-banner</span><span class="nv"> </span><span class="s">button</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#4CAF50;</span><span class="nv"> </span><span class="s">border:</span><span class="nv"> </span><span class="s">none;</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">white;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">cursor:</span><span class="nv"> </span><span class="s">pointer;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;div</span><span class="nv"> </span><span class="s">id=&quot;cookie-banner&quot;</span><span class="nv"> </span><span class="s">class=&quot;cookie-banner&quot;&gt;This</span><span class="nv"> </span><span class="s">website</span><span class="nv"> </span><span class="s">uses</span><span class="nv"> </span><span class="s">cookies</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">get</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">best</span><span class="nv"> </span><span class="s">experience.</span><span class="nv"> </span><span class="s">&lt;button</span><span class="nv"> </span><span class="s">onclick=&quot;acceptCookies()&quot;&gt;Accept&lt;/button&gt;&lt;/div&gt;&lt;script&gt;function</span><span class="nv"> </span><span class="s">acceptCookies()</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(</span><span class="se">&#39;&#39;</span><span class="s">cookie-banner</span><span class="se">&#39;&#39;</span><span class="s">).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">none</span><span class="se">&#39;&#39;</span><span class="s">;</span><span class="nv"> </span><span class="s">localStorage.setItem(</span><span class="se">&#39;&#39;</span><span class="s">cookies-accepted</span><span class="se">&#39;&#39;</span><span class="s">,</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">true</span><span class="se">&#39;&#39;</span><span class="s">);</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">if(localStorage.getItem(</span><span class="se">&#39;&#39;</span><span class="s">cookies-accepted</span><span class="se">&#39;&#39;</span><span class="s">)</span><span class="nv"> </span><span class="s">===</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">true</span><span class="se">&#39;&#39;</span><span class="s">)</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(</span><span class="se">&#39;&#39;</span><span class="s">cookie-banner</span><span class="se">&#39;&#39;</span><span class="s">).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="se">&#39;&#39;</span><span class="s">none</span><span class="se">&#39;&#39;</span><span class="s">;</span><span class="nv"> </span><span class="s">}&lt;/script&gt;&#39;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="headers">Headers</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Les en-t√™tes HTTP jouent un r√¥le crucial dans la s√©curit√©. Le plugin Headers offre une gestion robuste des en-t√™tes HTTP standards et personnalis√©s, am√©liorant ainsi la s√©curit√© et les fonctionnalit√©s. Il applique dynamiquement des mesures de s√©curit√©, telles que <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Strict-Transport-Security">HSTS</a>, <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Content-Security-Policy">CSP</a> (y compris un mode de rapport seul), et l'injection d'en-t√™tes personnalis√©s, tout en emp√™chant les fuites d'informations.</p>
<p><strong>Comment √ßa marche</strong></p>
<ol>
<li>Lorsqu'un client demande du contenu depuis votre site web, BunkerWeb traite les en-t√™tes de la r√©ponse.</li>
<li>Les en-t√™tes de s√©curit√© sont appliqu√©s conform√©ment √† votre configuration.</li>
<li>Des en-t√™tes personnalis√©s peuvent √™tre ajout√©s pour fournir des informations ou des fonctionnalit√©s suppl√©mentaires aux clients.</li>
<li>Les en-t√™tes ind√©sirables qui pourraient r√©v√©ler des informations sur le serveur sont automatiquement supprim√©s.</li>
<li>Les cookies sont modifi√©s pour inclure les attributs de s√©curit√© appropri√©s en fonction de vos param√®tres.</li>
<li>Les en-t√™tes des serveurs en amont peuvent √™tre pr√©serv√©s de mani√®re s√©lective lorsque cela est n√©cessaire.</li>
</ol>
<h3 id="comment-lutiliser_17">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour configurer et utiliser la fonctionnalit√© Headers :</p>
<ol>
<li><strong>Configurer les en-t√™tes de s√©curit√© :</strong> D√©finissez des valeurs pour les en-t√™tes courants.</li>
<li><strong>Ajouter des en-t√™tes personnalis√©s :</strong> D√©finissez les en-t√™tes personnalis√©s √† l'aide du param√®tre <code>CUSTOM_HEADER</code>.</li>
<li><strong>Supprimer les en-t√™tes ind√©sirables :</strong> Utilisez <code>REMOVE_HEADERS</code> pour vous assurer que les en-t√™tes qui pourraient exposer des d√©tails sur le serveur sont supprim√©s.</li>
<li><strong>D√©finir la s√©curit√© des cookies :</strong> Activez une s√©curit√© robuste des cookies en configurant <code>COOKIE_FLAGS</code> et en r√©glant <code>COOKIE_AUTO_SECURE_FLAG</code> sur <code>yes</code> pour que l'attribut Secure soit automatiquement ajout√© sur les connexions HTTPS.</li>
<li><strong>Pr√©server les en-t√™tes en amont :</strong> Sp√©cifiez les en-t√™tes en amont √† conserver en utilisant <code>KEEP_UPSTREAM_HEADERS</code>.</li>
<li><strong>Tirer parti de l'application conditionnelle des en-t√™tes :</strong> Si vous souhaitez tester des politiques sans interruption, activez le mode <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only">CSP Report-Only</a> via <code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code>.</li>
</ol>
<h3 id="guide-de-configuration">Guide de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="23:3"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">En-t√™tes de s√©curit√©</label><label for="__tabbed_23_2">Param√®tres des cookies</label><label for="__tabbed_23_3">En-t√™tes personnalis√©s</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Aper√ßu</strong></p>
<p>Les en-t√™tes de s√©curit√© renforcent la communication s√©curis√©e, restreignent le chargement des ressources et pr√©viennent les attaques comme le clickjacking et l'injection. Des en-t√™tes correctement configur√©s cr√©ent une couche de d√©fense robuste pour votre site web.</p>
<div class="admonition success">
<p class="admonition-title">Avantages des en-t√™tes de s√©curit√©</p>
<ul>
<li><strong>HSTS :</strong> Assure que toutes les connexions sont chiffr√©es, prot√©geant contre les attaques de r√©trogradation de protocole.</li>
<li><strong>CSP :</strong> Emp√™che l'ex√©cution de scripts malveillants, r√©duisant le risque d'attaques XSS.</li>
<li><strong>X-Frame-Options :</strong> Bloque les tentatives de clickjacking en contr√¥lant l'int√©gration des iframes.</li>
<li><strong>Referrer Policy :</strong> Limite les fuites d'informations sensibles via les en-t√™tes referrer.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>STRICT_TRANSPORT_SECURITY</code></td>
<td><code>max-age=63072000; includeSubDomains; preload</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>HSTS :</strong> Force les connexions HTTPS s√©curis√©es, r√©duisant les risques d'attaques de type "man-in-the-middle".</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY</code></td>
<td><code>object-src 'none'; form-action 'self'; frame-ancestors 'self';</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>CSP :</strong> Restreint le chargement des ressources aux sources de confiance, att√©nuant les attaques de type cross-site scripting et d'injection de donn√©es.</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Mode rapport CSP :</strong> Signale les violations sans bloquer le contenu, aidant √† tester les politiques de s√©curit√© tout en capturant les journaux.</td>
</tr>
<tr>
<td><code>X_FRAME_OPTIONS</code></td>
<td><code>SAMEORIGIN</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>X-Frame-Options :</strong> Emp√™che le clickjacking en contr√¥lant si votre site peut √™tre int√©gr√© dans une frame.</td>
</tr>
<tr>
<td><code>X_CONTENT_TYPE_OPTIONS</code></td>
<td><code>nosniff</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>X-Content-Type-Options :</strong> Emp√™che les navigateurs de "MIME-sniffer", prot√©geant contre les attaques de type "drive-by download".</td>
</tr>
<tr>
<td><code>X_DNS_PREFETCH_CONTROL</code></td>
<td><code>off</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>X-DNS-Prefetch-Control :</strong> R√©gule le pr√©chargement DNS pour r√©duire les requ√™tes r√©seau involontaires et am√©liorer la confidentialit√©.</td>
</tr>
<tr>
<td><code>REFERRER_POLICY</code></td>
<td><code>strict-origin-when-cross-origin</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Politique de Referrer :</strong> Contr√¥le la quantit√© d'informations de r√©f√©rent envoy√©es, prot√©geant la vie priv√©e de l'utilisateur.</td>
</tr>
<tr>
<td><code>PERMISSIONS_POLICY</code></td>
<td><code>accelerometer=(), ambient-light-sensor=(), attribution-reporting=(), autoplay=(), battery=(), ...</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Politique de permissions :</strong> Restreint l'acc√®s aux fonctionnalit√©s du navigateur, r√©duisant les vecteurs d'attaque potentiels.</td>
</tr>
<tr>
<td><code>KEEP_UPSTREAM_HEADERS</code></td>
<td><code>Content-Security-Policy Permissions-Policy X-Frame-Options</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Conserver les en-t√™tes :</strong> Pr√©serve les en-t√™tes en amont s√©lectionn√©s, facilitant l'int√©gration h√©rit√©e tout en maintenant la s√©curit√©.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>R√©visez et mettez √† jour r√©guli√®rement vos en-t√™tes de s√©curit√© pour vous conformer aux normes de s√©curit√© en constante √©volution.</li>
<li>Utilisez des outils comme <a href="https://observatory.mozilla.org/">Mozilla Observatory</a> pour valider la configuration de vos en-t√™tes.</li>
<li>Testez la CSP en mode <code>Report-Only</code> avant de l'appliquer pour √©viter de casser des fonctionnalit√©s.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Aper√ßu</strong></p>
<p>Des param√®tres de cookies appropri√©s garantissent la s√©curit√© des sessions utilisateur en emp√™chant le d√©tournement, la fixation et le cross-site scripting. Les cookies s√©curis√©s maintiennent l'int√©grit√© de la session sur HTTPS et am√©liorent la protection globale des donn√©es des utilisateurs.</p>
<div class="admonition success">
<p class="admonition-title">Avantages des cookies s√©curis√©s</p>
<ul>
<li><strong>Attribut HttpOnly :</strong> Emp√™che les scripts c√¥t√© client d'acc√©der aux cookies, att√©nuant les risques XSS.</li>
<li><strong>Attribut SameSite :</strong> R√©duit les attaques CSRF en restreignant l'utilisation des cookies inter-origines.</li>
<li><strong>Attribut Secure :</strong> Assure que les cookies ne sont transmis que sur des connexions HTTPS chiffr√©es.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COOKIE_FLAGS</code></td>
<td><code>* HttpOnly SameSite=Lax</code></td>
<td>multisite</td>
<td>oui</td>
<td><strong>Attributs de cookie :</strong> Ajoute automatiquement des attributs de s√©curit√© tels que HttpOnly et SameSite, prot√©geant les cookies de l'acc√®s par des scripts c√¥t√© client et des attaques CSRF.</td>
</tr>
<tr>
<td><code>COOKIE_AUTO_SECURE_FLAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Attribut Secure automatique :</strong> Assure que les cookies ne sont envoy√©s que sur des connexions HTTPS s√©curis√©es en ajoutant automatiquement l'attribut Secure.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Utilisez <code>SameSite=Strict</code> pour les cookies sensibles afin d'emp√™cher l'acc√®s inter-origines.</li>
<li>Auditez r√©guli√®rement vos param√®tres de cookies pour assurer la conformit√© avec les r√©glementations de s√©curit√© et de confidentialit√©.</li>
<li>√âvitez de d√©finir des cookies sans l'attribut Secure dans les environnements de production.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Aper√ßu</strong></p>
<p>Les en-t√™tes personnalis√©s vous permettent d'ajouter des en-t√™tes HTTP sp√©cifiques pour r√©pondre aux exigences de l'application ou de performance. Ils offrent de la flexibilit√© mais doivent √™tre configur√©s avec soin pour √©viter d'exposer des d√©tails sensibles du serveur.</p>
<div class="admonition success">
<p class="admonition-title">Avantages des en-t√™tes personnalis√©s</p>
<ul>
<li>Am√©liorez la s√©curit√© en supprimant les en-t√™tes inutiles qui pourraient divulguer des d√©tails sur le serveur.</li>
<li>Ajoutez des en-t√™tes sp√©cifiques √† l'application pour am√©liorer la fonctionnalit√© ou le d√©bogage.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CUSTOM_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td><strong>En-t√™te personnalis√© :</strong> Permet d'ajouter des en-t√™tes d√©finis par l'utilisateur au format NomEnTete: ValeurEnTete pour des am√©liorations de s√©curit√© ou de performance sp√©cialis√©es.</td>
</tr>
<tr>
<td><code>REMOVE_HEADERS</code></td>
<td><code>Server Expect-CT X-Powered-By X-AspNet-Version X-AspNetMvc-Version Public-Key-Pins</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Supprimer les en-t√™tes :</strong> Sp√©cifie les en-t√™tes √† supprimer, r√©duisant ainsi le risque d'exposer des d√©tails internes du serveur et des vuln√©rabilit√©s connues.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consid√©rations de s√©curit√©</p>
<ul>
<li>√âvitez d'exposer des informations sensibles via des en-t√™tes personnalis√©s.</li>
<li>R√©visez et mettez √† jour r√©guli√®rement les en-t√™tes personnalis√©s pour les aligner sur les exigences de votre application.</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Utilisez <code>REMOVE_HEADERS</code> pour supprimer les en-t√™tes comme <code>Server</code> et <code>X-Powered-By</code> afin de r√©duire les risques de prise d'empreintes.</li>
<li>Testez les en-t√™tes personnalis√©s dans un environnement de pr√©-production avant de les d√©ployer en production.</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="exemples-de-configuration_4">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="24:4"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><input id="__tabbed_24_2" name="__tabbed_24" type="radio" /><input id="__tabbed_24_3" name="__tabbed_24" type="radio" /><input id="__tabbed_24_4" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">En-t√™tes de s√©curit√© de base</label><label for="__tabbed_24_2">S√©curit√© des cookies renforc√©e</label><label for="__tabbed_24_3">En-t√™tes personnalis√©s pour API</label><label for="__tabbed_24_4">Content Security Policy - Mode rapport</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration standard avec les en-t√™tes de s√©curit√© essentiels :</p>
<div class="highlight"><pre><span></span><code><span class="nt">STRICT_TRANSPORT_SECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max-age=63072000;</span><span class="nv"> </span><span class="s">includeSubDomains;</span><span class="nv"> </span><span class="s">preload&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;&quot;</span>
<span class="nt">X_FRAME_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SAMEORIGIN&quot;</span>
<span class="nt">X_CONTENT_TYPE_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nosniff&quot;</span>
<span class="nt">REFERRER_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;strict-origin-when-cross-origin&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec des param√®tres de s√©curit√© des cookies robustes :</p>
<div class="highlight"><pre><span></span><code><span class="nt">COOKIE_FLAGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict</span><span class="nv"> </span><span class="s">Max-Age=3600&quot;</span>
<span class="nt">COOKIE_AUTO_SECURE_FLAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour un service API avec des en-t√™tes personnalis√©s :</p>
<div class="highlight"><pre><span></span><code><span class="nt">CUSTOM_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API-Version:</span><span class="nv"> </span><span class="s">1.2.3&quot;</span>
<span class="nt">CUSTOM_HEADER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Max-Age:</span><span class="nv"> </span><span class="s">86400&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;none&#39;&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version</span><span class="nv"> </span><span class="s">X-Runtime&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour tester la CSP sans casser les fonctionnalit√©s :</p>
<div class="highlight"><pre><span></span><code><span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">img-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">https://*.example.com;</span><span class="nv"> </span><span class="s">style-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">&#39;unsafe-inline&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">connect-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://api.example.com;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">form-action</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">base-uri</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">report-uri</span><span class="nv"> </span><span class="s">https://example.com/csp-reports&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY_REPORT_ONLY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="lets-encrypt">Let's Encrypt</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Let‚Äôs Encrypt simplifie la gestion des certificats SSL/TLS en automatisant la cr√©ation, le renouvellement et la configuration de certificats gratuits de Let's Encrypt. Cette fonctionnalit√© active les connexions HTTPS s√©curis√©es pour vos sites web sans la complexit√© de la gestion manuelle des certificats, r√©duisant ainsi les co√ªts et la charge administrative.</p>
<p><strong>Comment √ßa marche :</strong></p>
<ol>
<li>Une fois activ√©, BunkerWeb d√©tecte automatiquement les domaines configur√©s pour votre site.</li>
<li>BunkerWeb demande des certificats SSL/TLS gratuits √† l'autorit√© de certification de Let's Encrypt.</li>
<li>La propri√©t√© du domaine est v√©rifi√©e par des d√©fis HTTP (prouvant que vous contr√¥lez le site) ou des d√©fis DNS (prouvant que vous contr√¥lez le DNS de votre domaine).</li>
<li>Les certificats sont automatiquement install√©s et configur√©s pour vos domaines.</li>
<li>BunkerWeb g√®re les renouvellements de certificats en arri√®re-plan avant leur expiration, assurant une disponibilit√© HTTPS continue.</li>
<li>L'ensemble du processus est enti√®rement automatis√©, ne n√©cessitant qu'une intervention minimale apr√®s la configuration initiale.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Pr√©requis</p>
<p>Pour utiliser cette fonctionnalit√©, assurez-vous que des enregistrements DNS <strong>A</strong> corrects sont configur√©s pour chaque domaine, pointant vers la ou les IP publiques o√π BunkerWeb est accessible. Sans une configuration DNS correcte, le processus de v√©rification de domaine √©chouera.</p>
</div>
<h3 id="comment-lutiliser_18">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour configurer et utiliser la fonctionnalit√© Let's Encrypt :</p>
<ol>
<li><strong>Activer la fonctionnalit√© :</strong> Mettez le param√®tre <code>AUTO_LETS_ENCRYPT</code> √† <code>yes</code> pour activer l'√©mission et le renouvellement automatiques des certificats.</li>
<li><strong>Fournir un e-mail de contact (recommand√©) :</strong> Saisissez votre adresse e-mail dans le param√®tre <code>EMAIL_LETS_ENCRYPT</code> pour que Let's Encrypt puisse vous pr√©venir avant l'expiration d'un certificat. Si vous laissez ce champ vide, BunkerWeb s'enregistrera sans adresse (option Certbot <code>--register-unsafely-without-email</code>) et vous ne recevrez aucun rappel ni e-mail de r√©cup√©ration.</li>
<li><strong>Choisir le type de d√©fi :</strong> S√©lectionnez la v√©rification <code>http</code> ou <code>dns</code> avec le param√®tre <code>LETS_ENCRYPT_CHALLENGE</code>.</li>
<li><strong>Configurer le fournisseur DNS :</strong> Si vous utilisez les d√©fis DNS, sp√©cifiez votre fournisseur DNS et vos identifiants.</li>
<li><strong>S√©lectionner un profil de certificat :</strong> Choisissez votre profil de certificat pr√©f√©r√© avec le param√®tre <code>LETS_ENCRYPT_PROFILE</code> (classic, tlsserver ou shortlived).</li>
<li><strong>Laissez BunkerWeb s'occuper du reste :</strong> Une fois configur√©, les certificats sont automatiquement √©mis, install√©s et renouvel√©s selon les besoins.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Profils de certificat</p>
<p>Let's Encrypt propose diff√©rents profils de certificat pour diff√©rents cas d'usage : - <strong>classic</strong> : Certificats √† usage g√©n√©ral avec une validit√© de 90 jours (par d√©faut) - <strong>tlsserver</strong> : Optimis√© pour l'authentification de serveur TLS avec une validit√© de 90 jours et une charge utile plus petite - <strong>shortlived</strong> : S√©curit√© renforc√©e avec une validit√© de 7 jours pour les environnements automatis√©s - <strong>custom</strong> : Si votre serveur ACME prend en charge un profil diff√©rent, d√©finissez-le avec <code>LETS_ENCRYPT_CUSTOM_PROFILE</code>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Disponibilit√© des profils</p>
<p>Notez que les profils <code>tlsserver</code> et <code>shortlived</code> peuvent ne pas √™tre disponibles dans tous les environnements ou avec tous les clients ACME pour le moment. Le profil <code>classic</code> a la compatibilit√© la plus large et est recommand√© pour la plupart des utilisateurs. Si un profil s√©lectionn√© n'est pas disponible, le syst√®me basculera automatiquement sur le profil <code>classic</code>.</p>
</div>
<h3 id="parametres-de-configuration_3">Param√®tres de configuration</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTO_LETS_ENCRYPT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer Let's Encrypt :</strong> Mettre √† <code>yes</code> pour activer l'√©mission et le renouvellement automatiques des certificats.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PASSTHROUGH</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Passer √† travers Let's Encrypt :</strong> Mettre √† <code>yes</code> pour passer les requ√™tes Let's Encrypt au serveur web. Utile si BunkerWeb est derri√®re un autre reverse proxy g√©rant le SSL.</td>
</tr>
<tr>
<td><code>EMAIL_LETS_ENCRYPT</code></td>
<td><code>-</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>E-mail de contact :</strong> Adresse e-mail utilis√©e pour les rappels Let's Encrypt. Ne laissez ce champ vide que si vous acceptez de ne recevoir aucun avertissement ni e-mail de r√©cup√©ration (Certbot s'enregistre avec <code>--register-unsafely-without-email</code>).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CHALLENGE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Type de d√©fi :</strong> M√©thode utilis√©e pour v√©rifier la propri√©t√© du domaine. Options : <code>http</code> ou <code>dns</code>.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROVIDER</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Fournisseur DNS :</strong> Pour les d√©fis DNS, le fournisseur √† utiliser (ex. : cloudflare, route53, digitalocean).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROPAGATION</code></td>
<td><code>default</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Propagation DNS :</strong> Le temps d'attente en secondes pour la propagation DNS. Si aucune valeur n'est fournie, le temps par d√©faut du fournisseur est utilis√©.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>√âl√©ment d'identification :</strong> √âl√©ments de configuration pour l'authentification du fournisseur DNS (ex. : <code>cloudflare_api_token 123456</code>). Les valeurs peuvent √™tre du texte brut, encod√©es en base64 ou un objet JSON.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_WILDCARD</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Certificats Wildcard :</strong> Si mis √† <code>yes</code>, cr√©e des certificats wildcard pour tous les domaines. Uniquement disponible avec les d√©fis DNS.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_STAGING</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utiliser Staging :</strong> Si mis √† <code>yes</code>, utilise l'environnement de staging de Let's Encrypt pour les tests. Les limites de d√©bit y sont plus √©lev√©es mais les certificats ne sont pas fiables.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CLEAR_OLD_CERTS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Effacer les anciens certificats :</strong> Si mis √† <code>yes</code>, supprime les anciens certificats inutiles lors du renouvellement.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PROFILE</code></td>
<td><code>classic</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Profil de certificat :</strong> S√©lectionnez le profil √† utiliser. Options : <code>classic</code> (g√©n√©ral), <code>tlsserver</code> (optimis√© TLS), ou <code>shortlived</code> (7 jours).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CUSTOM_PROFILE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Profil de certificat personnalis√© :</strong> Saisissez un profil personnalis√© si votre serveur ACME le supporte. Remplace <code>LETS_ENCRYPT_PROFILE</code> s'il est d√©fini.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_MAX_RETRIES</code></td>
<td><code>3</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tentatives maximales :</strong> Nombre de tentatives de g√©n√©ration de certificat en cas d'√©chec. <code>0</code> pour d√©sactiver. Utile pour les probl√®mes r√©seau temporaires.</td>
</tr>
</tbody>
</table>
<p>!!! info "Information et comportement" - Le param√®tre <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> est un param√®tre multiple et peut √™tre utilis√© pour d√©finir plusieurs √©l√©ments pour le fournisseur DNS. Les √©l√©ments seront enregistr√©s dans un fichier de cache, et Certbot lira les informations d'identification √† partir de celui-ci. - Si aucun param√®tre <code>LETS_ENCRYPT_DNS_PROPAGATION</code> n'est fourni, le temps de propagation par d√©faut du fournisseur est utilis√©. - L'automatisation compl√®te de Let's Encrypt avec le d√©fi <code>http</code> fonctionne en mode stream tant que vous ouvrez le port <code>80/tcp</code> depuis l'ext√©rieur. Utilisez le param√®tre <code>LISTEN_STREAM_PORT_SSL</code> pour choisir votre port d'√©coute SSL/TLS. - Si <code>LETS_ENCRYPT_PASSTHROUGH</code> est mis √† <code>yes</code>, BunkerWeb ne g√©rera pas les requ√™tes de d√©fi ACME lui-m√™me mais les transmettra au serveur web backend. Ceci est utile dans les sc√©narios o√π BunkerWeb agit comme un reverse proxy devant un autre serveur configur√© pour g√©rer les d√©fis Let's Encrypt.</p>
<div class="admonition tip">
<p class="admonition-title">D√©fis HTTP vs. DNS</p>
<p><strong>Les d√©fis HTTP</strong> sont plus simples √† configurer et fonctionnent bien pour la plupart des sites web :</p>
<ul>
<li>N√©cessite que votre site soit publiquement accessible sur le port 80</li>
<li>Configur√© automatiquement par BunkerWeb</li>
<li>Ne peut pas √™tre utilis√© pour les certificats wildcard</li>
</ul>
<p><strong>Les d√©fis DNS</strong> offrent plus de flexibilit√© et sont requis pour les certificats wildcard :</p>
<ul>
<li>Fonctionne m√™me si votre site n'est pas publiquement accessible</li>
<li>N√©cessite les identifiants de l'API de votre fournisseur DNS</li>
<li>Requis pour les certificats wildcard (ex. : *.example.com)</li>
<li>Utile lorsque le port 80 est bloqu√© ou indisponible</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Certificats wildcard</p>
<p>Les certificats wildcard ne sont disponibles qu'avec les d√©fis DNS. Si vous souhaitez les utiliser, vous devez mettre le param√®tre <code>USE_LETS_ENCRYPT_WILDCARD</code> √† <code>yes</code> et configurer correctement les identifiants de votre fournisseur DNS.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Limites de d√©bit</p>
<p>Let's Encrypt impose des limites de d√©bit sur l'√©mission de certificats. Lors du test de configurations, utilisez l'environnement de staging en mettant <code>USE_LETS_ENCRYPT_STAGING</code> √† <code>yes</code> pour √©viter d'atteindre les limites de production. Les certificats de staging ne sont pas reconnus par les navigateurs mais sont utiles pour valider votre configuration.</p>
</div>
<h3 id="fournisseurs-dns-supportes">Fournisseurs DNS support√©s</h3>
<p>Le plugin Let's Encrypt prend en charge un large √©ventail de fournisseurs DNS pour les d√©fis DNS. Chaque fournisseur n√©cessite des informations d'identification sp√©cifiques qui doivent √™tre fournies via le param√®tre <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code>.</p>
<table>
<thead>
<tr>
<th>Fournisseur</th>
<th>Description</th>
<th>Param√®tres obligatoires</th>
<th>Param√®tres optionnels</th>
<th>Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bunny</code></td>
<td>bunny.net</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://github.com/mwt/certbot-dns-bunny/blob/main/README.rst">Documentation</a></td>
</tr>
<tr>
<td><code>cloudflare</code></td>
<td>Cloudflare</td>
<td>soit <code>api_token</code><br>soit <code>email</code> et <code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-cloudflare.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>desec</code></td>
<td>deSEC</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/desec-io/certbot-dns-desec/blob/main/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>digitalocean</code></td>
<td>DigitalOcean</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-digitalocean.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>domainoffensive</code></td>
<td>Domain-Offensive</td>
<td><code>api_token</code></td>
<td></td>
<td><a href="https://github.com/domainoffensive/certbot-dns-domainoffensive/blob/master/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>dnsimple</code></td>
<td>DNSimple</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsimple.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>dnsmadeeasy</code></td>
<td>DNS Made Easy</td>
<td><code>api_key</code><br><code>secret_key</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsmadeeasy.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>duckdns</code></td>
<td>DuckDNS</td>
<td><code>duckdns_token</code></td>
<td></td>
<td><a href="https://github.com/infinityofspace/certbot_dns_duckdns/blob/main/Readme.md">Documentation</a></td>
</tr>
<tr>
<td><code>dynu</code></td>
<td>Dynu</td>
<td><code>auth_token</code></td>
<td></td>
<td><a href="https://github.com/bikram990/certbot-dns-dynu/blob/main/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>gehirn</code></td>
<td>Gehirn DNS</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-gehirn.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>google</code></td>
<td>Google Cloud</td>
<td><code>project_id</code><br><code>private_key_id</code><br><code>private_key</code><br><code>client_email</code><br><code>client_id</code><br><code>client_x509_cert_url</code></td>
<td><code>type</code> (d√©faut : <code>service_account</code>)<br><code>auth_uri</code> (d√©faut : <code>https://accounts.google.com/o/oauth2/auth</code>)<br><code>token_uri</code> (d√©faut : <code>https://accounts.google.com/o/oauth2/token</code>)<br><code>auth_provider_x509_cert_url</code> (d√©faut : <code>https://www.googleapis.com/oauth2/v1/certs</code>)</td>
<td><a href="https://certbot-dns-google.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>infomaniak</code></td>
<td>Infomaniak</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/infomaniak/certbot-dns-infomaniak/blob/main/README.rst">Documentation</a></td>
</tr>
<tr>
<td><code>ionos</code></td>
<td>IONOS</td>
<td><code>prefix</code><br><code>secret</code></td>
<td><code>endpoint</code> (d√©faut : <code>https://api.hosting.ionos.com</code>)</td>
<td><a href="https://github.com/helgeerbe/certbot-dns-ionos/blob/master/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>linode</code></td>
<td>Linode</td>
<td><code>key</code></td>
<td></td>
<td><a href="https://certbot-dns-linode.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>luadns</code></td>
<td>LuaDNS</td>
<td><code>email</code><br><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-luadns.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>njalla</code></td>
<td>Njalla</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/chaptergy/certbot-dns-njalla/blob/main/README.md">Documentation</a></td>
</tr>
<tr>
<td><code>nsone</code></td>
<td>NS1</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-nsone.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>ovh</code></td>
<td>OVH</td>
<td><code>application_key</code><br><code>application_secret</code><br><code>consumer_key</code></td>
<td><code>endpoint</code> (d√©faut : <code>ovh-eu</code>)</td>
<td><a href="https://certbot-dns-ovh.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>rfc2136</code></td>
<td>RFC 2136</td>
<td><code>server</code><br><code>name</code><br><code>secret</code></td>
<td><code>port</code> (d√©faut : <code>53</code>)<br><code>algorithm</code> (d√©faut : <code>HMAC-SHA512</code>)<br><code>sign_query</code> (d√©faut : <code>false</code>)</td>
<td><a href="https://certbot-dns-rfc2136.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>route53</code></td>
<td>Amazon Route 53</td>
<td><code>access_key_id</code><br><code>secret_access_key</code></td>
<td></td>
<td><a href="https://certbot-dns-route53.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>sakuracloud</code></td>
<td>Sakura Cloud</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-sakuracloud.readthedocs.io/en/stable/">Documentation</a></td>
</tr>
<tr>
<td><code>scaleway</code></td>
<td>Scaleway</td>
<td><code>application_token</code></td>
<td></td>
<td><a href="https://github.com/vanonox/certbot-dns-scaleway/blob/main/README.rst">Documentation</a></td>
</tr>
</tbody>
</table>
<h3 id="exemples-de-configuration_5">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="25:6"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><input id="__tabbed_25_2" name="__tabbed_25" type="radio" /><input id="__tabbed_25_3" name="__tabbed_25" type="radio" /><input id="__tabbed_25_4" name="__tabbed_25" type="radio" /><input id="__tabbed_25_5" name="__tabbed_25" type="radio" /><input id="__tabbed_25_6" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">D√©fi HTTP de base</label><label for="__tabbed_25_2">DNS Cloudflare avec Wildcard</label><label for="__tabbed_25_3">Configuration AWS Route53</label><label for="__tabbed_25_4">Test avec l'environnement de Staging et tentatives</label><label for="__tabbed_25_5">DigitalOcean avec temps de propagation personnalis√©</label><label for="__tabbed_25_6">Google Cloud DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuration simple utilisant les d√©fis HTTP pour un seul domaine :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour les certificats wildcard utilisant le DNS de Cloudflare :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cloudflare&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api_token</span><span class="nv"> </span><span class="s">VOTRE_JETON_API&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_WILDCARD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant Amazon Route53 pour les d√©fis DNS :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;route53&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_access_key_id</span><span class="nv"> </span><span class="s">VOTRE_CLE_ACCES&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_secret_access_key</span><span class="nv"> </span><span class="s">VOTRE_CLE_SECRETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour tester la configuration avec l'environnement de staging et des param√®tres de tentatives am√©lior√©s :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_STAGING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LETS_ENCRYPT_MAX_RETRIES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant le DNS de DigitalOcean avec un temps d'attente de propagation plus long :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;digitalocean&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;token</span><span class="nv"> </span><span class="s">VOTRE_JETON_API&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROPAGATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant Google Cloud DNS avec les informations d'identification d'un compte de service :</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;google&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;project_id</span><span class="nv"> </span><span class="s">votre-id-projet&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key_id</span><span class="nv"> </span><span class="s">votre-id-cle-privee&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key</span><span class="nv"> </span><span class="s">votre-cle-privee&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_email</span><span class="nv"> </span><span class="s">votre-email-compte-service&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_5</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_id</span><span class="nv"> </span><span class="s">votre-id-client&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_6</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_x509_cert_url</span><span class="nv"> </span><span class="s">votre-url-cert&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="limit">Limit</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Limit permet d‚Äôappliquer des politiques de limitation pour garantir un usage √©quitable et prot√©ger vos ressources contre les abus, les attaques par d√©ni de service (DoS) et la surconsommation. Ces politiques incluent :</p>
<ul>
<li><strong>Le nombre de connexions simultan√©es par adresse IP</strong> (support STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" />)</li>
<li><strong>Le nombre de requ√™tes par adresse IP et par URL sur une p√©riode donn√©e</strong> (support STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" />)</li>
</ul>
<h3 id="fonctionnement_1">Fonctionnement</h3>
<ol>
<li><strong>Limitation de d√©bit :</strong> Suit le nombre de requ√™tes de chaque adresse IP cliente vers des URL sp√©cifiques. Si un client d√©passe la limite de d√©bit configur√©e, les requ√™tes suivantes sont temporairement refus√©es.</li>
<li><strong>Limitation de connexions :</strong> Surveille et restreint le nombre de connexions simultan√©es de chaque adresse IP cliente. Diff√©rentes limites de connexion peuvent √™tre appliqu√©es en fonction du protocole utilis√© (HTTP/1, HTTP/2, HTTP/3 ou stream).</li>
<li>Dans les deux cas, les clients qui d√©passent les limites d√©finies re√ßoivent un code de statut HTTP <strong>¬´ 429 - Too Many Requests ¬ª</strong>, ce qui aide √† pr√©venir la surcharge du serveur.</li>
</ol>
<h3 id="utilisation">Utilisation</h3>
<ol>
<li><strong>Activer la limitation de d√©bit de requ√™tes :</strong> Utilisez <code>USE_LIMIT_REQ</code> pour activer la limitation de d√©bit de requ√™tes et d√©finissez des motifs d'URL avec leurs limites correspondantes.</li>
<li><strong>Activer la limitation de connexions :</strong> Utilisez <code>USE_LIMIT_CONN</code> pour activer la limitation de connexions et d√©finissez le nombre maximum de connexions simultan√©es pour diff√©rents protocoles.</li>
<li><strong>Appliquer un contr√¥le granulaire :</strong> Cr√©ez plusieurs r√®gles de limitation de d√©bit pour diff√©rentes URL afin de fournir des niveaux de protection vari√©s sur votre site.</li>
<li><strong>Suivre l'efficacit√© :</strong> Utilisez l'<a href="../web-ui/">interface web</a> pour consulter les statistiques sur les requ√™tes et les connexions limit√©es.</li>
</ol>
<h3 id="parametres_14">Param√®tres</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">Limitation de requ√™tes</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_REQ</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer la limitation de requ√™tes :</strong> Mettre √† <code>yes</code> pour activer la fonctionnalit√© de limitation de d√©bit par requ√™tes.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>oui</td>
<td><strong>Motif d‚ÄôURL :</strong> Motif d‚ÄôURL (regex PCRE) auquel la limite de d√©bit sera appliqu√©e ; utilisez <code>/</code> pour l'appliquer √† toutes les requ√™tes.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_RATE</code></td>
<td><code>2r/s</code></td>
<td>multisite</td>
<td>oui</td>
<td><strong>Limite de d√©bit :</strong> Taux de requ√™tes maximal au format <code>Nr/t</code>, o√π N est le nombre de requ√™tes et t est l'unit√© de temps : s (seconde), m (minute), h (heure), ou d (jour).</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Format de la limitation de d√©bit</p>
<p>Le format de la limite de d√©bit est sp√©cifi√© comme <code>Nr/t</code> o√π :</p>
<ul>
<li><code>N</code> est le nombre de requ√™tes autoris√©es</li>
<li><code>r</code> est la lettre litt√©rale 'r' (pour 'requ√™tes')</li>
<li><code>/</code> est une barre oblique litt√©rale</li>
<li><code>t</code> est l'unit√© de temps : <code>s</code> (seconde), <code>m</code> (minute), <code>h</code> (heure), ou <code>d</code> (jour)</li>
</ul>
<p>Par exemple, <code>5r/m</code> signifie que 5 requ√™tes par minute sont autoris√©es pour chaque adresse IP.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="27:1"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">Limitation de connexions</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_CONN</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Activer la limitation de connexions :</strong> Mettre √† <code>yes</code> pour activer la limitation de connexions simultan√©es.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP1</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Connexions HTTP/1.X :</strong> Nombre maximal de connexions HTTP/1.X simultan√©es par adresse IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP2</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Flux HTTP/2 :</strong> Nombre maximal de flux HTTP/2 simultan√©s par adresse IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP3</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Flux HTTP/3 :</strong> Nombre maximal de flux HTTP/3 simultan√©s par adresse IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_STREAM</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>non</td>
<td><strong>Connexions Stream :</strong> Nombre maximal de connexions stream simultan√©es par adresse IP.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>!!! info "Limitation de connexions vs de requ√™tes" - La <strong>limitation de connexions</strong> restreint le nombre de connexions simultan√©es qu'une seule adresse IP peut maintenir. - La <strong>limitation de d√©bit de requ√™tes</strong> restreint le nombre de requ√™tes qu'une adresse IP peut effectuer dans une p√©riode de temps d√©finie.</p>
<pre><code>L'utilisation des deux m√©thodes offre une protection compl√®te contre divers types d'abus.
</code></pre>
<div class="admonition warning">
<p class="admonition-title">R√©glages adapt√©s</p>
<p>Des limites trop strictes peuvent impacter des clients l√©gitimes, notamment pour HTTP/2 et HTTP/3 o√π les navigateurs utilisent souvent plusieurs flux. Les valeurs par d√©faut sont √©quilibr√©es pour la plupart des cas d'utilisation, mais envisagez de les ajuster en fonction des besoins de votre application et du comportement des utilisateurs.</p>
</div>
<h3 id="exemples-de-configuration_6">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="28:4"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><input id="__tabbed_28_3" name="__tabbed_28" type="radio" /><input id="__tabbed_28_4" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">Protection de base</label><label for="__tabbed_28_2">Protection d'endpoints sp√©cifiques</label><label for="__tabbed_28_3">Configuration pour site √† fort trafic</label><label for="__tabbed_28_4">Configuration pour serveur d'API</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple utilisant les param√®tres par d√©faut pour prot√©ger l'ensemble de votre site :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec diff√©rentes limites de d√©bit pour divers endpoints :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># R√®gle par d√©faut pour toutes les requ√™tes</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/s&quot;</span>

<span class="c1"># Limite plus stricte pour la page de connexion</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/login&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1r/s&quot;</span>

<span class="c1"># Limite plus stricte pour l&#39;API</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration optimis√©e pour les sites √† fort trafic avec des limites plus permissives :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Limite g√©n√©rale</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30r/s&quot;</span>

<span class="c1"># Protection de la zone d&#39;administration</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/admin/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;50&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration optimis√©e pour un serveur d'API avec des limites de d√©bit exprim√©es en requ√™tes par minute :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Endpoints de l&#39;API publique</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/public/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120r/m&quot;</span>

<span class="c1"># Endpoints de l&#39;API priv√©e</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/private/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300r/m&quot;</span>

<span class="c1"># Endpoint d&#39;authentification</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/auth&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/m&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="load-balancer-pro">Load Balancer <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p align='center'><iframe style='display: block;' width='560' height='315' data-src='https://www.youtube-nocookie.com/embed/cOVp0rAt5nw' title='√âquilibreur de charge' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe></p>

<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides load balancing feature to group of upstreams with optional healthchecks.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_DICT_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>non</td>
<td>Shared dict size (datastore for all healthchecks).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_NAME</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>Name of the upstream (used in REVERSE_PROXY_HOST).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_SERVERS</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>List of servers/IPs in the server group.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_MODE</code></td>
<td><code>round-robin</code></td>
<td>global</td>
<td>oui</td>
<td>Load balancing mode (round-robin or sticky).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_STICKY_METHOD</code></td>
<td><code>ip</code></td>
<td>global</td>
<td>oui</td>
<td>Sticky session method (ip or cookie).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_RESOLVE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>oui</td>
<td>Dynamically resolve upstream hostnames.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>Number of keepalive connections to cache per worker.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>global</td>
<td>oui</td>
<td>Keepalive timeout for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIME</code></td>
<td><code>1h</code></td>
<td>global</td>
<td>oui</td>
<td>Keepalive time for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_URL</code></td>
<td><code>/status</code></td>
<td>global</td>
<td>oui</td>
<td>The healthcheck URL.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_INTERVAL</code></td>
<td><code>2000</code></td>
<td>global</td>
<td>oui</td>
<td>Healthcheck interval in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>oui</td>
<td>Healthcheck timeout in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_FALL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>oui</td>
<td>Number of failed healthchecks before marking the server as down.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_RISE</code></td>
<td><code>1</code></td>
<td>global</td>
<td>oui</td>
<td>Number of successful healthchecks before marking the server as up.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_VALID_STATUSES</code></td>
<td><code>200</code></td>
<td>global</td>
<td>oui</td>
<td>HTTP status considered valid in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_CONCURRENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>oui</td>
<td>Maximum number of concurrent healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TYPE</code></td>
<td><code>http</code></td>
<td>global</td>
<td>oui</td>
<td>Type of healthcheck (http or https).</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>oui</td>
<td>Verify SSL certificate in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_HOST</code></td>
<td></td>
<td>global</td>
<td>oui</td>
<td>Host header for healthchecks (useful for HTTPS).</td>
</tr>
</tbody>
</table>
<h2 id="metrics">Metrics</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Metrics offre une collecte/visualisation des indicateurs de votre instance BunkerWeb¬†: performances, √©v√©nements de s√©curit√©, statistiques syst√®me‚Ä¶</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>BunkerWeb collecte des m√©triques lors du traitement des requ√™tes/r√©ponses.</li>
<li>Compteurs de requ√™tes bloqu√©es, mesures de perfs et stats s√©curit√© sont enregistr√©s.</li>
<li>Stockage en m√©moire avec limites configurables pour contenir l‚Äôusage de ressources.</li>
<li>En multi‚Äëinstances, Redis permet d‚Äôagr√©ger/centraliser les donn√©es.</li>
<li>Acc√®s via API ou <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_15">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_METRICS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la collecte et l‚Äôacc√®s aux m√©triques.</td>
</tr>
<tr>
<td><code>METRICS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>non</td>
<td>Taille du stockage interne (ex. <code>16m</code>, <code>32m</code>).</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>non</td>
<td>Max de requ√™tes bloqu√©es conserv√©es par worker.</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code></td>
<td><code>100000</code></td>
<td>global</td>
<td>non</td>
<td>Max de requ√™tes bloqu√©es conserv√©es dans Redis.</td>
</tr>
<tr>
<td><code>METRICS_SAVE_TO_REDIS</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Sauvegarder compteurs/tableaux dans Redis pour agr√©gation cluster.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Dimensionnement m√©moire</p>
<p>Ajustez <code>METRICS_MEMORY_SIZE</code> selon le trafic et le nombre d‚Äôinstances.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Int√©gration Redis</p>
<p>Avec <a href="#redis">Redis</a>, les requ√™tes bloqu√©es sont synchronis√©es pour une vue centralis√©e multi‚Äën≈ìuds.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Performance</p>
<p>Des valeurs trop √©lev√©es augmentent l‚Äôusage m√©moire. Surveillez et ajustez.</p>
</div>
<h3 id="exemples_12">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="29:4"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><input id="__tabbed_29_2" name="__tabbed_29" type="radio" /><input id="__tabbed_29_3" name="__tabbed_29" type="radio" /><input id="__tabbed_29_4" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">Configuration par d√©faut</label><label for="__tabbed_29_2">Ressources limit√©es</label><label for="__tabbed_29_3">Fort trafic</label><label for="__tabbed_29_4">D√©sactivation</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="migration-pro">Migration <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Migration of BunkerWeb configuration between instances made easy via the web UI</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Divers (Miscellaneous) fournit des <strong>param√®tres de base essentiels</strong> qui aident √† maintenir la s√©curit√© et la fonctionnalit√© de votre site web. Ce composant central offre des contr√¥les complets pour :</p>
<ul>
<li><strong>Le comportement du serveur</strong> - Configurez la mani√®re dont votre serveur r√©pond √† diverses requ√™tes</li>
<li><strong>Les param√®tres HTTP</strong> - G√©rez les m√©thodes, la taille des requ√™tes et les options de protocole</li>
<li><strong>La gestion des fichiers</strong> - Contr√¥lez le service des fichiers statiques et optimisez leur livraison</li>
<li><strong>Le support des protocoles</strong> - Activez les protocoles HTTP modernes pour de meilleures performances</li>
<li><strong>Les configurations syst√®me</strong> - √âtendez les fonctionnalit√©s et am√©liorez la s√©curit√©</li>
</ul>
<p>Que vous ayez besoin de restreindre les m√©thodes HTTP, de g√©rer la taille des requ√™tes, d'optimiser la mise en cache des fichiers ou de contr√¥ler la mani√®re dont votre serveur r√©pond √† diverses requ√™tes, ce plugin vous donne les outils pour <strong>affiner le comportement de votre service web</strong> tout en optimisant √† la fois la performance et la s√©curit√©.</p>
<h3 id="fonctionnalites-cles">Fonctionnalit√©s cl√©s</h3>
<table>
<thead>
<tr>
<th>Cat√©gorie de fonctionnalit√©</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Contr√¥le des m√©thodes HTTP</strong></td>
<td>D√©finissez quelles m√©thodes HTTP sont acceptables pour votre application</td>
</tr>
<tr>
<td><strong>Protection du serveur par d√©faut</strong></td>
<td>Emp√™chez l'acc√®s non autoris√© par des noms d'h√¥te incorrects et forcez le SNI pour les connexions s√©curis√©es</td>
</tr>
<tr>
<td><strong>Gestion de la taille des requ√™tes</strong></td>
<td>D√©finissez des limites pour le corps des requ√™tes client et les t√©l√©versements de fichiers</td>
</tr>
<tr>
<td><strong>Service de fichiers statiques</strong></td>
<td>Configurez et optimisez la livraison de contenu statique depuis des dossiers racine personnalis√©s</td>
</tr>
<tr>
<td><strong>Mise en cache des fichiers</strong></td>
<td>Am√©liorez les performances gr√¢ce √† des m√©canismes avanc√©s de mise en cache des descripteurs de fichiers</td>
</tr>
<tr>
<td><strong>Support des protocoles</strong></td>
<td>Configurez les options des protocoles HTTP modernes (HTTP2/HTTP3) et les param√®tres de port Alt-Svc</td>
</tr>
<tr>
<td><strong>Rapport anonyme</strong></td>
<td>Rapport de statistiques d'utilisation optionnel pour aider √† am√©liorer BunkerWeb</td>
</tr>
<tr>
<td><strong>Support des plugins externes</strong></td>
<td>√âtendez les fonctionnalit√©s en int√©grant des plugins externes via des URL</td>
</tr>
<tr>
<td><strong>Contr√¥le du statut HTTP</strong></td>
<td>Configurez la r√©ponse de votre serveur lors du refus de requ√™tes (y compris la fermeture de connexion)</td>
</tr>
</tbody>
</table>
<h3 id="guide-de-configuration_1">Guide de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="30:8"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><input id="__tabbed_30_2" name="__tabbed_30" type="radio" /><input id="__tabbed_30_3" name="__tabbed_30" type="radio" /><input id="__tabbed_30_4" name="__tabbed_30" type="radio" /><input id="__tabbed_30_5" name="__tabbed_30" type="radio" /><input id="__tabbed_30_6" name="__tabbed_30" type="radio" /><input id="__tabbed_30_7" name="__tabbed_30" type="radio" /><input id="__tabbed_30_8" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">S√©curit√© du serveur par d√©faut</label><label for="__tabbed_30_2">Statut HTTP en cas de refus</label><label for="__tabbed_30_3">M√©thodes HTTP</label><label for="__tabbed_30_4">Limites de taille des requ√™tes</label><label for="__tabbed_30_5">Support des protocoles</label><label for="__tabbed_30_6">Service de fichiers statiques</label><label for="__tabbed_30_7">Param√®tres syst√®me</label><label for="__tabbed_30_8">Mise en cache des fichiers</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Contr√¥les du serveur par d√©faut</strong></p>
<p>En HTTP, l'en-t√™te <code>Host</code> sp√©cifie le serveur cible, mais il peut √™tre manquant ou inconnu, souvent √† cause de bots recherchant des vuln√©rabilit√©s.</p>
<p>Pour bloquer de telles requ√™tes :</p>
<ul>
<li>Mettez <code>DISABLE_DEFAULT_SERVER</code> √† <code>yes</code> pour refuser silencieusement ces requ√™tes en utilisant le <a href="https://http.dev/444">code de statut <code>444</code> de NGINX</a>.</li>
<li>Pour une s√©curit√© plus stricte, activez <code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code> pour rejeter les connexions SSL/TLS sans SNI valide.</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Avantages en mati√®re de s√©curit√©</p>
<ul>
<li>Bloque la manipulation de l'en-t√™te Host et le scan des h√¥tes virtuels</li>
<li>Att√©nue les risques de contrebande de requ√™tes HTTP (HTTP request smuggling)</li>
<li>Supprime le serveur par d√©faut comme vecteur d'attaque</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DISABLE_DEFAULT_SERVER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Serveur par d√©faut :</strong> Mettre √† <code>yes</code> pour d√©sactiver le serveur par d√©faut lorsqu'aucun nom d'h√¥te ne correspond √† la requ√™te.</td>
</tr>
<tr>
<td><code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>SNI Strict :</strong> Si mis √† <code>yes</code>, requiert le SNI pour les connexions HTTPS et rejette les connexions sans SNI valide.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Application du SNI</p>
<p>Activer la validation stricte du SNI offre une s√©curit√© renforc√©e mais peut causer des probl√®mes si BunkerWeb est derri√®re un proxy inverse qui transmet les requ√™tes HTTPS sans pr√©server les informations SNI. Testez minutieusement avant d'activer en production.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Contr√¥le du statut HTTP</strong></p>
<p>La premi√®re √©tape dans la gestion de l'acc√®s refus√© √† un client est de d√©finir l'action appropri√©e. Cela peut √™tre configur√© avec le param√®tre <code>DENY_HTTP_STATUS</code>. Lorsque BunkerWeb refuse une requ√™te, vous pouvez contr√¥ler sa r√©ponse. Par d√©faut, il renvoie un statut <code>403 Forbidden</code>, affichant une page web ou un contenu personnalis√©.</p>
<p>Alternativement, le r√©gler sur <code>444</code> ferme imm√©diatement la connexion sans envoyer de r√©ponse. Ce <a href="https://http.dev/444">code de statut non standard</a>, sp√©cifique √† NGINX, est utile pour ignorer silencieusement les requ√™tes ind√©sirables.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DENY_HTTP_STATUS</code></td>
<td><code>403</code></td>
<td>global</td>
<td>no</td>
<td><strong>Statut HTTP de refus :</strong> Code de statut HTTP √† envoyer quand une requ√™te est refus√©e (403 ou 444). Le code 444 ferme la connexion.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consid√©rations sur le code de statut 444</p>
<p>Comme les clients ne re√ßoivent aucun retour, le d√©pannage peut √™tre plus difficile. R√©gler sur <code>444</code> est recommand√© uniquement si vous avez minutieusement trait√© les faux positifs, √™tes exp√©riment√© avec BunkerWeb et exigez un niveau de s√©curit√© plus √©lev√©.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
<p>En <strong>mode stream</strong>, ce param√®tre est toujours appliqu√© comme <code>444</code>, ce qui signifie que la connexion sera ferm√©e, quelle que soit la valeur configur√©e.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Contr√¥le des m√©thodes HTTP</strong></p>
<p>Restreindre les m√©thodes HTTP √† celles requises par votre application est une mesure de s√©curit√© fondamentale qui respecte le principe du moindre privil√®ge. En d√©finissant explicitement les m√©thodes acceptables, vous minimisez le risque d'exploitation via des m√©thodes inutilis√©es ou dangereuses.</p>
<p>Cette fonctionnalit√© est configur√©e avec <code>ALLOWED_METHODS</code>, o√π les m√©thodes sont list√©es et s√©par√©es par un <code>|</code> (d√©faut : <code>GET|POST|HEAD</code>). Si un client tente une m√©thode non list√©e, le serveur r√©pondra avec un statut <strong>405 - Method Not Allowed</strong>.</p>
<p>Pour la plupart des sites web, le d√©faut <code>GET|POST|HEAD</code> est suffisant. Si votre application utilise des API RESTful, vous devrez peut-√™tre inclure <code>PUT</code> et <code>DELETE</code>.</p>
<div class="admonition success">
<p class="admonition-title">Avantages en mati√®re de s√©curit√©</p>
<ul>
<li>Emp√™che l'exploitation de m√©thodes HTTP inutilis√©es ou inutiles</li>
<li>R√©duit la surface d'attaque en d√©sactivant les m√©thodes potentiellement dangereuses</li>
<li>Bloque les techniques d'√©num√©ration de m√©thodes HTTP utilis√©es par les attaquants</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALLOWED_METHODS</code></td>
<td><code>GET   | POST     | HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>M√©thodes HTTP :</strong> Liste des m√©thodes HTTP autoris√©es, s√©par√©es par des barres verticales (<code>|</code>).</td>
</tr>
</tbody>
</table>
<div class="admonition abstract">
<p class="admonition-title">CORS et requ√™tes pre-flight</p>
<p>Si votre application prend en charge le <a href="#cors">Cross-Origin Resource Sharing (CORS)</a>, vous devriez inclure la m√©thode <code>OPTIONS</code> dans <code>ALLOWED_METHODS</code> pour g√©rer les requ√™tes pre-flight. Cela garantit le bon fonctionnement pour les navigateurs effectuant des requ√™tes inter-origines.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Consid√©rations de s√©curit√©</p>
<ul>
<li><strong>√âvitez d'activer <code>TRACE</code> ou <code>CONNECT</code> :</strong> Ces m√©thodes sont rarement n√©cessaires et peuvent introduire des risques de s√©curit√© importants, comme le Cross-Site Tracing (XST) ou les attaques par tunnelisation.</li>
<li><strong>R√©visez r√©guli√®rement les m√©thodes autoris√©es :</strong> Auditez p√©riodiquement <code>ALLOWED_METHODS</code> pour vous assurer qu'il correspond aux besoins actuels de votre application.</li>
<li><strong>Testez minutieusement avant le d√©ploiement :</strong> Les changements de restrictions de m√©thodes HTTP peuvent impacter la fonctionnalit√© de l'application. Validez votre configuration dans un environnement de pr√©-production.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Limites de taille des requ√™tes</strong></p>
<p>La taille maximale du corps d'une requ√™te peut √™tre contr√¥l√©e avec <code>MAX_CLIENT_SIZE</code> (d√©faut : <code>10m</code>). Les valeurs accept√©es suivent la syntaxe d√©crite <a href="https://nginx.org/en/docs/syntax.html">ici</a>.</p>
<div class="admonition success">
<p class="admonition-title">Avantages en mati√®re de s√©curit√©</p>
<ul>
<li>Prot√®ge contre les attaques par d√©ni de service caus√©es par des charges utiles excessives</li>
<li>Att√©nue les vuln√©rabilit√©s de d√©bordement de tampon (buffer overflow)</li>
<li>Emp√™che les attaques par t√©l√©versement de fichiers</li>
<li>R√©duit le risque d'√©puisement des ressources du serveur</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MAX_CLIENT_SIZE</code></td>
<td><code>10m</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Taille maximale des requ√™tes :</strong> La taille maximale autoris√©e pour le corps des requ√™tes client (ex. : t√©l√©versements).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques de configuration de la taille des requ√™tes</p>
<p>Si vous devez autoriser un corps de requ√™te de taille illimit√©e, vous pouvez mettre la valeur <code>MAX_CLIENT_SIZE</code> √† <code>0</code>. Cependant, ce n'est <strong>pas recommand√©</strong> en raison des risques potentiels de s√©curit√© et de performance.</p>
<p><strong>Bonnes pratiques :</strong></p>
<ul>
<li>Configurez toujours <code>MAX_CLIENT_SIZE</code> √† la plus petite valeur r√©pondant aux besoins l√©gitimes de votre application.</li>
<li>R√©visez et ajustez r√©guli√®rement ce param√®tre pour l'aligner sur les besoins √©volutifs de votre application.</li>
<li>√âvitez de mettre <code>0</code> sauf en cas de n√©cessit√© absolue, car cela peut exposer votre serveur √† des attaques par d√©ni de service et √† l'√©puisement des ressources.</li>
</ul>
<p>En g√©rant soigneusement ce param√®tre, vous pouvez garantir une s√©curit√© et des performances optimales pour votre application.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Param√®tres des protocoles HTTP</strong></p>
<p>Les protocoles HTTP modernes comme HTTP/2 et HTTP/3 am√©liorent la performance et la s√©curit√©. BunkerWeb permet une configuration facile de ces protocoles.</p>
<div class="admonition success">
<p class="admonition-title">Avantages en mati√®re de s√©curit√© et de performance</p>
<ul>
<li><strong>Avantages de s√©curit√© :</strong> Les protocoles modernes comme HTTP/2 et HTTP/3 imposent TLS/HTTPS par d√©faut, r√©duisent la sensibilit√© √† certaines attaques et am√©liorent la confidentialit√© gr√¢ce aux en-t√™tes chiffr√©s (HTTP/3).</li>
<li><strong>Avantages de performance :</strong> Des fonctionnalit√©s comme le multiplexage, la compression des en-t√™tes, le server push et le transfert de donn√©es binaires am√©liorent la vitesse et l'efficacit√©.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>√âcoute HTTP :</strong> R√©pondre aux requ√™tes HTTP (non s√©curis√©es) si mis √† <code>yes</code>.</td>
</tr>
<tr>
<td><code>HTTP2</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP2 :</strong> Supporte le protocole HTTP2 lorsque HTTPS est activ√©.</td>
</tr>
<tr>
<td><code>HTTP3</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP3 :</strong> Supporte le protocole HTTP3 lorsque HTTPS est activ√©.</td>
</tr>
<tr>
<td><code>HTTP3_ALT_SVC_PORT</code></td>
<td><code>443</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Port Alt-Svc HTTP3 :</strong> Port √† utiliser dans l'en-t√™te Alt-Svc pour HTTP3.</td>
</tr>
</tbody>
</table>
<div class="admonition example">
<p class="admonition-title">√Ä propos de HTTP/3</p>
<p>HTTP/3, la derni√®re version du protocole Hypertext Transfer, utilise QUIC sur UDP au lieu de TCP, r√©solvant des probl√®mes comme le blocage en t√™te de ligne pour des connexions plus rapides et plus fiables.</p>
<p>NGINX a introduit un support exp√©rimental pour HTTP/3 et QUIC √† partir de la version 1.25.0. Cependant, cette fonctionnalit√© est encore exp√©rimentale, et la prudence est de mise pour une utilisation en production. Pour plus de d√©tails, consultez la <a href="https://nginx.org/en/docs/quic.html">documentation officielle de NGINX</a>.</p>
<p>Des tests approfondis sont recommand√©s avant d'activer HTTP/3 en production.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration du service de fichiers</strong></p>
<p>BunkerWeb peut servir des fichiers statiques directement ou agir comme un proxy inverse vers un serveur d'application. Par d√©faut, les fichiers sont servis depuis <code>/var/www/html/{server_name}</code>.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVE_FILES</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Servir des fichiers :</strong> Si <code>yes</code>, BunkerWeb servira les fichiers statiques depuis le dossier racine configur√©.</td>
</tr>
<tr>
<td><code>ROOT_FOLDER</code></td>
<td><code>/var/www/html/{server_name}</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Dossier racine :</strong> Le r√©pertoire depuis lequel servir les fichiers statiques. Vide signifie utiliser l'emplacement par d√©faut.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques pour le service de fichiers statiques</p>
<ul>
<li><strong>Service direct :</strong> Activez le service de fichiers (<code>SERVE_FILES=yes</code>) lorsque BunkerWeb est responsable de servir directement les fichiers statiques.</li>
<li><strong>Proxy inverse :</strong> Si BunkerWeb agit comme un proxy inverse, <strong>d√©sactivez le service de fichiers</strong> (<code>SERVE_FILES=no</code>) pour r√©duire la surface d'attaque et √©viter d'exposer des r√©pertoires inutiles.</li>
<li><strong>Permissions :</strong> Assurez-vous que les permissions de fichiers et les configurations de chemin sont correctes pour emp√™cher tout acc√®s non autoris√©.</li>
<li><strong>S√©curit√© :</strong> √âvitez d'exposer des r√©pertoires ou des fichiers sensibles par des mauvaises configurations.</li>
</ul>
<p>En g√©rant soigneusement le service de fichiers statiques, vous pouvez optimiser les performances tout en maintenant un environnement s√©curis√©.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Gestion des plugins et du syst√®me</strong></p>
<p>Ces param√®tres g√®rent l'interaction de BunkerWeb avec des syst√®mes externes et contribuent √† l'am√©lioration du produit via des statistiques d'utilisation anonymes optionnelles.</p>
<p><strong>Rapport anonyme</strong></p>
<p>Le rapport anonyme fournit √† l'√©quipe de BunkerWeb des informations sur la mani√®re dont le logiciel est utilis√©. Cela aide √† identifier les domaines d'am√©lioration et √† prioriser le d√©veloppement de fonctionnalit√©s. Les rapports sont strictement statistiques et n'incluent aucune information sensible ou personnellement identifiable. Ils couvrent :</p>
<ul>
<li>Les fonctionnalit√©s activ√©es</li>
<li>Les sch√©mas de configuration g√©n√©raux</li>
</ul>
<p>Vous pouvez d√©sactiver cette fonctionnalit√© si vous le souhaitez en mettant <code>SEND_ANONYMOUS_REPORT</code> √† <code>no</code>.</p>
<p><strong>Plugins externes</strong></p>
<p>Les plugins externes vous permettent d'√©tendre les fonctionnalit√©s de BunkerWeb en int√©grant des modules tiers. Cela permet une personnalisation suppl√©mentaire et des cas d'utilisation avanc√©s.</p>
<div class="admonition danger">
<p class="admonition-title">S√©curit√© des plugins externes</p>
<p><strong>Les plugins externes peuvent introduire des risques de s√©curit√© s'ils ne sont pas correctement v√©rifi√©s.</strong> Suivez ces bonnes pratiques pour minimiser les menaces potentielles :</p>
<ul>
<li>N'utilisez que des plugins provenant de sources fiables.</li>
<li>V√©rifiez l'int√©grit√© des plugins √† l'aide de sommes de contr√¥le (checksums) lorsqu'elles sont disponibles.</li>
<li>R√©visez et mettez √† jour r√©guli√®rement les plugins pour garantir la s√©curit√© et la compatibilit√©.</li>
</ul>
<p>Pour plus de d√©tails, consultez la <a href="../plugins/">documentation des Plugins</a>.</p>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SEND_ANONYMOUS_REPORT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Rapports anonymes :</strong> Envoyer des rapports d'utilisation anonymes aux mainteneurs de BunkerWeb.</td>
</tr>
<tr>
<td><code>EXTERNAL_PLUGIN_URLS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Plugins externes :</strong> URL pour t√©l√©charger des plugins externes (s√©par√©es par des espaces).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Optimisation du cache de fichiers</strong></p>
<p>Le cache de fichiers ouverts am√©liore les performances en stockant les descripteurs de fichiers et les m√©tadonn√©es en m√©moire, r√©duisant ainsi le besoin d'op√©rations r√©p√©t√©es sur le syst√®me de fichiers.</p>
<div class="admonition success">
<p class="admonition-title">Avantages de la mise en cache de fichiers</p>
<ul>
<li><strong>Performance :</strong> R√©duit les E/S du syst√®me de fichiers, diminue la latence et abaisse l'utilisation du CPU pour les op√©rations sur les fichiers.</li>
<li><strong>S√©curit√© :</strong> Att√©nue les attaques par synchronisation (timing attacks) en mettant en cache les r√©ponses d'erreur et r√©duit l'impact des attaques DoS ciblant le syst√®me de fichiers.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_OPEN_FILE_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer le cache :</strong> Activer la mise en cache des descripteurs de fichiers et des m√©tadonn√©es pour am√©liorer les performances.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE</code></td>
<td><code>max=1000 inactive=20s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Configuration du cache :</strong> Configurez le cache de fichiers ouverts (ex. : nombre max d'entr√©es et d√©lai d'inactivit√©).</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Mettre en cache les erreurs :</strong> Met en cache les erreurs de recherche de descripteurs de fichiers ainsi que les recherches r√©ussies.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utilisations minimales :</strong> Nombre minimum d'acc√®s pendant la p√©riode d'inactivit√© pour qu'un fichier reste en cache.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_VALID</code></td>
<td><code>30s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validit√© du cache :</strong> Temps apr√®s lequel les √©l√©ments mis en cache sont revalid√©s.</td>
</tr>
</tbody>
</table>
<p><strong>Guide de configuration</strong></p>
<p>Pour activer et configurer la mise en cache des fichiers :
1. Mettez <code>USE_OPEN_FILE_CACHE</code> √† <code>yes</code>.
2. Ajustez les param√®tres <code>OPEN_FILE_CACHE</code> pour d√©finir le nombre maximum d'entr√©es et leur d√©lai d'inactivit√©.
3. Utilisez <code>OPEN_FILE_CACHE_ERRORS</code> pour mettre en cache les recherches r√©ussies et √©chou√©es.
4. R√©glez <code>OPEN_FILE_CACHE_MIN_USES</code> pour sp√©cifier le nombre d'acc√®s requis pour qu'un fichier reste en cache.
5. D√©finissez la p√©riode de validit√© du cache avec <code>OPEN_FILE_CACHE_VALID</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Activez la mise en cache pour les sites web avec de nombreux fichiers statiques pour am√©liorer les performances.</li>
<li>R√©visez et affinez r√©guli√®rement les param√®tres de cache pour √©quilibrer performance et utilisation des ressources.</li>
<li>Dans les environnements dynamiques o√π les fichiers changent fr√©quemment, envisagez de r√©duire la p√©riode de validit√© du cache ou de d√©sactiver la fonctionnalit√© pour garantir la fra√Æcheur du contenu.</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="exemples-de-configuration_7">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="31:7"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><input id="__tabbed_31_2" name="__tabbed_31" type="radio" /><input id="__tabbed_31_3" name="__tabbed_31" type="radio" /><input id="__tabbed_31_4" name="__tabbed_31" type="radio" /><input id="__tabbed_31_5" name="__tabbed_31" type="radio" /><input id="__tabbed_31_6" name="__tabbed_31" type="radio" /><input id="__tabbed_31_7" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">S√©curit√© du serveur par d√©faut</label><label for="__tabbed_31_2">Statut HTTP en cas de refus</label><label for="__tabbed_31_3">M√©thodes HTTP</label><label for="__tabbed_31_4">Limites de taille des requ√™tes</label><label for="__tabbed_31_5">Support des protocoles</label><label for="__tabbed_31_6">Service de fichiers statiques</label><label for="__tabbed_31_7">Mise en cache des fichiers</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Exemple pour d√©sactiver le serveur par d√©faut et forcer le SNI strict :</p>
<div class="highlight"><pre><span></span><code><span class="nt">DISABLE_DEFAULT_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DISABLE_DEFAULT_SERVER_STRICT_SNI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour ignorer silencieusement les requ√™tes ind√©sirables :</p>
<div class="highlight"><pre><span></span><code><span class="nt">DENY_HTTP_STATUS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;444&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour restreindre les m√©thodes HTTP √† celles requises par une API RESTful :</p>
<div class="highlight"><pre><span></span><code><span class="nt">ALLOWED_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET|POST|PUT|DELETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour limiter la taille maximale du corps d'une requ√™te :</p>
<div class="highlight"><pre><span></span><code><span class="nt">MAX_CLIENT_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5m&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour activer HTTP/2 et HTTP/3 avec un port Alt-Svc personnalis√© :</p>
<div class="highlight"><pre><span></span><code><span class="nt">HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3_ALT_SVC_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;443&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour servir des fichiers statiques depuis un dossier racine personnalis√© :</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVE_FILES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROOT_FOLDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/custom-folder&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Exemple pour activer et optimiser la mise en cache des fichiers :</p>
<p>```yaml
USE_OPEN_FILE_CACHE: "yes"
OPEN_FILE_CACHE: "max=2000 inactive=30s"
OPEN_FILE_CACHE_ERRORS: "yes"
OPEN_FILE_CACHE_MIN_USES: "3"
OPEN_FILE_CACHE_VALID: "60s"</p>
</div>
</div>
</div>
<h2 id="modsecurity">ModSecurity</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin ModSecurity int√®gre le puissant pare-feu applicatif web (WAF) <a href="https://modsecurity.org">ModSecurity</a> dans BunkerWeb. Cette int√©gration offre une protection robuste contre un large √©ventail d'attaques web en s'appuyant sur le <a href="https://coreruleset.org">Jeu de R√®gles de Base OWASP (CRS)</a> pour d√©tecter et bloquer des menaces telles que l'injection SQL, le cross-site scripting (XSS), l'inclusion de fichiers locaux, et bien plus encore.</p>
<p><strong>Comment √ßa marche :</strong></p>
<ol>
<li>Lorsqu'une requ√™te est re√ßue, ModSecurity l'√©value par rapport au jeu de r√®gles actif.</li>
<li>Le Jeu de R√®gles de Base OWASP inspecte les en-t√™tes, les cookies, les param√®tres d'URL et le contenu du corps de la requ√™te.</li>
<li>Chaque violation d√©tect√©e contribue √† un score d'anomalie global.</li>
<li>Si ce score d√©passe le seuil configur√©, la requ√™te est bloqu√©e.</li>
<li>Des journaux d√©taill√©s sont cr√©√©s pour aider √† diagnostiquer quelles r√®gles ont √©t√© d√©clench√©es et pourquoi.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices cl√©s</p>
<ol>
<li><strong>Protection standard de l'industrie :</strong> Utilise le pare-feu open-source ModSecurity largement r√©pandu.</li>
<li><strong>Jeu de R√®gles de Base OWASP :</strong> Emploie des r√®gles maintenues par la communaut√© couvrant le Top Dix de l'OWASP et plus encore.</li>
<li><strong>Niveaux de s√©curit√© configurables :</strong> Ajustez les niveaux de parano√Øa pour √©quilibrer la s√©curit√© avec les faux positifs potentiels.</li>
<li><strong>Journalisation d√©taill√©e :</strong> Fournit des journaux d'audit complets pour l'analyse des attaques.</li>
<li><strong>Support des plugins :</strong> √âtendez la protection avec des plugins CRS optionnels adapt√©s √† vos applications.</li>
</ol>
</div>
<h3 id="comment-lutiliser_19">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour configurer et utiliser ModSecurity :</p>
<ol>
<li><strong>Activer la fonctionnalit√© :</strong> ModSecurity est activ√© par d√©faut. Cela peut √™tre contr√¥l√© via le param√®tre <code>USE_MODSECURITY</code>.</li>
<li><strong>S√©lectionner une version du CRS :</strong> Choisissez une version du Jeu de R√®gles de Base OWASP (v3, v4, ou nightly).</li>
<li><strong>Ajouter des plugins :</strong> Activez optionnellement des plugins CRS pour am√©liorer la couverture des r√®gles.</li>
<li><strong>Surveiller et ajuster :</strong> Utilisez les journaux et l'<a href="../web-ui/">interface web</a> pour identifier les faux positifs et ajuster les param√®tres.</li>
</ol>
<h3 id="parametres-de-configuration_4">Param√®tres de configuration</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MODSECURITY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer ModSecurity :</strong> Active la protection du pare-feu applicatif web ModSecurity.</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utiliser le Core Rule Set :</strong> Active le Jeu de R√®gles de Base OWASP pour ModSecurity.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_VERSION</code></td>
<td><code>4</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Version du CRS :</strong> La version du Jeu de R√®gles de Base OWASP √† utiliser. Options : <code>3</code>, <code>4</code>, ou <code>nightly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_RULE_ENGINE</code></td>
<td><code>On</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Moteur de r√®gles :</strong> Contr√¥le si les r√®gles sont appliqu√©es. Options : <code>On</code>, <code>DetectionOnly</code>, ou <code>Off</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_ENGINE</code></td>
<td><code>RelevantOnly</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Moteur d'audit :</strong> Contr√¥le le fonctionnement de la journalisation d'audit. Options : <code>On</code>, <code>Off</code>, ou <code>RelevantOnly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_LOG_PARTS</code></td>
<td><code>ABIJDEFHZ</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Parties du journal d'audit :</strong> Quelles parties des requ√™tes/r√©ponses inclure dans les journaux d'audit.</td>
</tr>
<tr>
<td><code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code></td>
<td><code>131072</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Limite du corps de requ√™te (sans fichiers) :</strong> Taille maximale pour les corps de requ√™te sans t√©l√©versement de fichiers. Accepte les octets bruts ou un suffixe lisible (<code>k</code>, <code>m</code>, <code>g</code>).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS_PLUGINS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer les plugins CRS :</strong> Active des jeux de r√®gles de plugins suppl√©mentaires pour le Core Rule Set.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_PLUGINS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Liste des plugins CRS :</strong> Liste de plugins s√©par√©s par des espaces √† t√©l√©charger et installer (<code>nom-plugin[/tag]</code> ou URL).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_GLOBAL_CRS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>CRS Global :</strong> Si activ√©, applique les r√®gles CRS globalement au niveau HTTP plut√¥t que par serveur.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">ModSecurity et le Jeu de R√®gles de Base OWASP</p>
<p><strong>Nous recommandons vivement de garder ModSecurity et le Jeu de R√®gles de Base OWASP (CRS) activ√©s</strong> pour fournir une protection robuste contre les vuln√©rabilit√©s web courantes. Bien que des faux positifs occasionnels puissent se produire, ils peuvent √™tre r√©solus avec un peu d'effort en affinant les r√®gles ou en utilisant des exclusions pr√©d√©finies.</p>
<p>L'√©quipe du CRS maintient activement une liste d'exclusions pour des applications populaires telles que WordPress, Nextcloud, Drupal et Cpanel, facilitant ainsi l'int√©gration sans impacter la fonctionnalit√©. Les avantages en mati√®re de s√©curit√© l'emportent de loin sur l'effort de configuration minimal requis pour traiter les faux positifs.</p>
</div>
<h3 id="versions-du-crs-disponibles">Versions du CRS disponibles</h3>
<p>S√©lectionnez une version du CRS pour r√©pondre au mieux √† vos besoins de s√©curit√© :</p>
<ul>
<li><strong><code>3</code></strong> : Stable <a href="https://github.com/coreruleset/coreruleset/releases/tag/v3.3.7">v3.3.7</a>.</li>
<li><strong><code>4</code></strong> : Stable <a href="https://github.com/coreruleset/coreruleset/releases/tag/v4.20.0">v4.20.0</a> (<strong>par d√©faut</strong>).</li>
<li><strong><code>nightly</code></strong> : <a href="https://github.com/coreruleset/coreruleset/releases/tag/nightly">Version de nuit</a> offrant les derni√®res mises √† jour de r√®gles.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Version de nuit (Nightly Build)</p>
<p>La <strong>version de nuit</strong> contient les r√®gles les plus √† jour, offrant les derni√®res protections contre les menaces √©mergentes. Cependant, comme elle est mise √† jour quotidiennement et peut inclure des changements exp√©rimentaux ou non test√©s, il est recommand√© d'utiliser d'abord la version de nuit dans un <strong>environnement de pr√©-production</strong> avant de la d√©ployer en production.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Niveaux de parano√Øa</p>
<p>Le Jeu de R√®gles de Base OWASP utilise des "niveaux de parano√Øa" (PL) pour contr√¥ler la rigueur des r√®gles :</p>
<ul>
<li><strong>PL1 (d√©faut) :</strong> Protection de base avec un minimum de faux positifs</li>
<li><strong>PL2 :</strong> S√©curit√© renforc√©e avec une correspondance de motifs plus stricte</li>
<li><strong>PL3 :</strong> S√©curit√© am√©lior√©e avec une validation plus stricte</li>
<li><strong>PL4 :</strong> S√©curit√© maximale avec des r√®gles tr√®s strictes (peut causer de nombreux faux positifs)</li>
</ul>
<p>Vous pouvez d√©finir le niveau de parano√Øa en ajoutant un fichier de configuration personnalis√© dans <code>/etc/bunkerweb/configs/modsec-crs/</code>.</p>
</div>
<h3 id="custom-configurations">Configurations personnalis√©es</h3>
<p>L'ajustement de ModSecurity et du Jeu de R√®gles de Base OWASP (CRS) peut √™tre r√©alis√© gr√¢ce √† des configurations personnalis√©es. Celles-ci vous permettent de personnaliser le comportement √† des √©tapes sp√©cifiques du traitement des r√®gles de s√©curit√© :</p>
<ul>
<li><strong><code>modsec-crs</code></strong> : Appliqu√© <strong>avant</strong> le chargement du Jeu de R√®gles de Base OWASP.</li>
<li><strong><code>modsec</code></strong> : Appliqu√© <strong>apr√®s</strong> le chargement du Jeu de R√®gles de Base OWASP. √âgalement utilis√© si le CRS n'est pas charg√© du tout.</li>
<li><strong><code>crs-plugins-before</code></strong> : Appliqu√© <strong>avant</strong> le chargement des plugins CRS.</li>
<li><strong><code>crs-plugins-after</code></strong> : Appliqu√© <strong>apr√®s</strong> le chargement des plugins CRS.</li>
</ul>
<p>Cette structure offre une grande flexibilit√©, vous permettant d'affiner les param√®tres de ModSecurity et du CRS pour r√©pondre aux besoins sp√©cifiques de votre application tout en maintenant un flux de configuration clair.</p>
<h4 id="ajout-dexclusions-crs-avec-modsec-crs">Ajout d'exclusions CRS avec <code>modsec-crs</code></h4>
<p>Vous pouvez utiliser une configuration personnalis√©e de type <code>modsec-crs</code> pour ajouter des exclusions pour des cas d'usage sp√©cifiques, comme l'activation d'exclusions pr√©d√©finies pour WordPress :</p>
<div class="highlight"><pre><span></span><code>SecAction \
 &quot;id:900130,\
  phase:1,\
  nolog,\
  pass,\
  t:none,\
  setvar:tx.crs_exclusions_wordpress=1&quot;
</code></pre></div>
<p>Dans cet exemple :</p>
<ul>
<li>L'action est ex√©cut√©e en <strong>Phase 1</strong> (t√¥t dans le cycle de vie de la requ√™te).</li>
<li>Elle active les exclusions sp√©cifiques √† WordPress du CRS en d√©finissant la variable <code>tx.crs_exclusions_wordpress</code>.</li>
</ul>
<h4 id="mise-a-jour-des-regles-crs-avec-modsec">Mise √† jour des r√®gles CRS avec <code>modsec</code></h4>
<p>Pour affiner les r√®gles CRS charg√©es, vous pouvez utiliser une configuration personnalis√©e de type <code>modsec</code>. Par exemple, vous pouvez supprimer des r√®gles ou des balises sp√©cifiques pour certains chemins de requ√™te :</p>
<div class="highlight"><pre><span></span><code>SecRule REQUEST_FILENAME &quot;/wp-admin/admin-ajax.php&quot; &quot;id:1,ctl:ruleRemoveByTag=attack-xss,ctl:ruleRemoveByTag=attack-rce&quot;
SecRule REQUEST_FILENAME &quot;/wp-admin/options.php&quot; &quot;id:2,ctl:ruleRemoveByTag=attack-xss&quot;
SecRule REQUEST_FILENAME &quot;^/wp-json/yoast&quot; &quot;id:3,ctl:ruleRemoveById=930120&quot;
</code></pre></div>
<p>Dans cet exemple :</p>
<ul>
<li><strong>R√®gle 1</strong> : Supprime les r√®gles avec les balises <code>attack-xss</code> et <code>attack-rce</code> pour les requ√™tes vers <code>/wp-admin/admin-ajax.php</code>.</li>
<li><strong>R√®gle 2</strong> : Supprime les r√®gles avec la balise <code>attack-xss</code> pour les requ√™tes vers <code>/wp-admin/options.php</code>.</li>
<li><strong>R√®gle 3</strong> : Supprime une r√®gle sp√©cifique (ID <code>930120</code>) pour les requ√™tes correspondant √† <code>/wp-json/yoast</code>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Ordre d'ex√©cution</p>
<p>L'ordre d'ex√©cution pour ModSecurity dans BunkerWeb est le suivant, assurant une progression claire et logique de l'application des r√®gles :</p>
<ol>
<li><strong>Configuration OWASP CRS</strong> : Configuration de base pour le Jeu de R√®gles de Base OWASP.</li>
<li><strong>Configuration des plugins personnalis√©s (<code>crs-plugins-before</code>)</strong> : Param√®tres sp√©cifiques aux plugins, appliqu√©s avant toute r√®gle CRS.</li>
<li><strong>R√®gles des plugins personnalis√©s (avant les r√®gles CRS) (<code>crs-plugins-before</code>)</strong> : R√®gles personnalis√©es pour les plugins ex√©cut√©es avant les r√®gles CRS.</li>
<li><strong>Configuration des plugins t√©l√©charg√©s</strong> : Configuration pour les plugins t√©l√©charg√©s en externe.</li>
<li><strong>R√®gles des plugins t√©l√©charg√©s (avant les r√®gles CRS)</strong> : R√®gles pour les plugins t√©l√©charg√©s ex√©cut√©es avant les r√®gles CRS.</li>
<li><strong>R√®gles CRS personnalis√©es (<code>modsec-crs</code>)</strong> : R√®gles d√©finies par l'utilisateur appliqu√©es avant le chargement des r√®gles CRS.</li>
<li><strong>R√®gles OWASP CRS</strong> : Le jeu de r√®gles de s√©curit√© de base fourni par l'OWASP.</li>
<li><strong>R√®gles des plugins personnalis√©s (apr√®s les r√®gles CRS) (<code>crs-plugins-after</code>)</strong> : R√®gles de plugins personnalis√©s ex√©cut√©es apr√®s les r√®gles CRS.</li>
<li><strong>R√®gles des plugins t√©l√©charg√©s (apr√®s les r√®gles CRS)</strong> : R√®gles pour les plugins t√©l√©charg√©s ex√©cut√©es apr√®s les r√®gles CRS.</li>
<li><strong>R√®gles personnalis√©es (<code>modsec</code>)</strong> : R√®gles d√©finies par l'utilisateur appliqu√©es apr√®s toutes les r√®gles CRS et de plugins.</li>
</ol>
<p><strong>Notes cl√©s</strong> :
- Les personnalisations <strong>pr√©-CRS</strong> (<code>crs-plugins-before</code>, <code>modsec-crs</code>) vous permettent de d√©finir des exceptions ou des r√®gles pr√©paratoires avant le chargement des r√®gles CRS de base.
- Les personnalisations <strong>post-CRS</strong> (<code>crs-plugins-after</code>, <code>modsec</code>) sont id√©ales pour outrepasser ou √©tendre des r√®gles apr√®s l'application des r√®gles CRS et de plugins.
- Cette structure offre une flexibilit√© maximale, permettant un contr√¥le pr√©cis de l'ex√©cution et de la personnalisation des r√®gles tout en maintenant une base de s√©curit√© solide.</p>
</div>
<h3 id="plugins-owasp-crs">Plugins OWASP CRS</h3>
<p>Le Jeu de R√®gles de Base OWASP prend √©galement en charge une gamme de <strong>plugins</strong> con√ßus pour √©tendre ses fonctionnalit√©s et am√©liorer la compatibilit√© avec des applications ou des environnements sp√©cifiques. Ces plugins peuvent aider √† affiner le CRS pour une utilisation avec des plateformes populaires telles que WordPress, Nextcloud et Drupal, ou m√™me des configurations personnalis√©es. Pour plus d'informations et une liste des plugins disponibles, consultez le <a href="https://github.com/coreruleset/plugin-registry">registre des plugins OWASP CRS</a>.</p>
<div class="admonition tip">
<p class="admonition-title">T√©l√©chargement de plugins</p>
<p>Le param√®tre <code>MODSECURITY_CRS_PLUGINS</code> vous permet de t√©l√©charger et d'installer des plugins pour √©tendre les fonctionnalit√©s du Jeu de R√®gles de Base OWASP (CRS). Ce param√®tre accepte une liste de noms de plugins avec des balises ou des URL optionnelles, facilitant l'int√©gration de fonctionnalit√©s de s√©curit√© suppl√©mentaires adapt√©es √† vos besoins sp√©cifiques.</p>
<p>Voici une liste non exhaustive des valeurs accept√©es pour le param√®tre <code>MODSECURITY_CRS_PLUGINS</code> :</p>
<ul>
<li><code>fake-bot</code> - T√©l√©charge la derni√®re version du plugin.</li>
<li><code>wordpress-rule-exclusions/v1.0.0</code> - T√©l√©charge la version 1.0.0 du plugin.</li>
<li><code>https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip</code> - T√©l√©charge le plugin directement depuis l'URL.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Faux positifs</p>
<p>Des param√®tres de s√©curit√© plus √©lev√©s peuvent bloquer le trafic l√©gitime. Commencez avec les param√®tres par d√©faut et surveillez les journaux avant d'augmenter les niveaux de s√©curit√©. Soyez pr√™t √† ajouter des r√®gles d'exclusion pour les besoins sp√©cifiques de votre application.</p>
</div>
<h3 id="exemples-de-configuration_8">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="32:6"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><input id="__tabbed_32_2" name="__tabbed_32" type="radio" /><input id="__tabbed_32_3" name="__tabbed_32" type="radio" /><input id="__tabbed_32_4" name="__tabbed_32" type="radio" /><input id="__tabbed_32_5" name="__tabbed_32" type="radio" /><input id="__tabbed_32_6" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">Configuration de base</label><label for="__tabbed_32_2">Mode d√©tection uniquement</label><label for="__tabbed_32_3">Configuration avanc√©e avec plugins</label><label for="__tabbed_32_4">Configuration h√©rit√©e</label><label for="__tabbed_32_5">ModSecurity Global</label><label for="__tabbed_32_6">Version de nuit avec plugins personnalis√©s</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration standard avec ModSecurity et CRS v4 activ√©s :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour surveiller les menaces potentielles sans bloquer :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DetectionOnly&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_LOG_PARTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ABIJDEFHZ&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec CRS v4 et des plugins activ√©s pour une protection suppl√©mentaire :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions</span><span class="nv"> </span><span class="s">fake-bot&quot;</span>
<span class="nt">MODSECURITY_REQ_BODY_NO_FILES_LIMIT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;262144&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant CRS v3 pour la compatibilit√© avec des installations plus anciennes :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration appliquant ModSecurity globalement √† toutes les connexions HTTP :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">USE_MODSECURITY_GLOBAL_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration utilisant la version de nuit du CRS avec des plugins personnalis√©s :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nightly&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions/v1.0.0</span><span class="nv"> </span><span class="s">https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Valeurs de taille lisibles</p>
<p>Pour les param√®tres de taille comme <code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code>, les suffixes <code>k</code>, <code>m</code>, et <code>g</code> (insensibles √† la casse) sont pris en charge et repr√©sentent les kibioctets, m√©bioctets et gibioctets (multiples de 1024). Exemples : <code>256k</code> = 262144, <code>1m</code> = 1048576, <code>2g</code> = 2147483648.</p>
</div>
<h2 id="monitoring-pro">Monitoring <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>BunkerWeb monitoring pro system. This plugin is a prerequisite for some other plugins.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MONITORING</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>Enable monitoring of BunkerWeb.</td>
</tr>
<tr>
<td><code>MONITORING_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>non</td>
<td>Size of the dict to store monitoring metrics.</td>
</tr>
<tr>
<td><code>MONITORING_IGNORE_URLS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>List of URLs to ignore when monitoring separated with spaces (e.g. /health)</td>
</tr>
</tbody>
</table>
<h2 id="php">PHP</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin PHP fournit l‚Äôint√©gration PHP‚ÄëFPM avec BunkerWeb pour ex√©cuter du PHP dynamiquement. Il prend en charge des instances locales (m√™me machine) et distantes, offrant de la flexibilit√© dans l‚Äôarchitecture.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä la demande d‚Äôun fichier PHP, BunkerWeb route la requ√™te vers l‚Äôinstance PHP‚ÄëFPM configur√©e.</li>
<li>En local, la communication se fait via un socket Unix.</li>
<li>√Ä distance, la communication utilise FastCGI vers l‚Äôh√¥te et le port indiqu√©s.</li>
<li>PHP‚ÄëFPM ex√©cute le script et renvoie la r√©ponse √† BunkerWeb qui la livre au client.</li>
<li>La r√©√©criture d‚ÄôURL est automatiquement configur√©e pour les frameworks/applications qui utilisent des ¬´¬†pretty URLs¬†¬ª.</li>
</ol>
<h3 id="comment-lutiliser_20">Comment l‚Äôutiliser</h3>
<ol>
<li>Choisissez local vs distant.</li>
<li>Connexion¬†: chemin du socket (local) ou h√¥te+port (distant).</li>
<li>Racine de documents¬†: pointez vers le dossier contenant vos fichiers PHP.</li>
</ol>
<h3 id="parametres_16">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REMOTE_PHP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>H√¥te PHP‚ÄëFPM distant. Laissez vide pour utiliser le local.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin racine des fichiers c√¥t√© PHP‚ÄëFPM distant.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PORT</code></td>
<td><code>9000</code></td>
<td>multisite</td>
<td>non</td>
<td>Port PHP‚ÄëFPM distant.</td>
</tr>
<tr>
<td><code>LOCAL_PHP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin du socket PHP‚ÄëFPM local. Laissez vide pour utiliser un PHP‚ÄëFPM distant.</td>
</tr>
<tr>
<td><code>LOCAL_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Chemin racine des fichiers c√¥t√© PHP‚ÄëFPM local.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Local vs distant</p>
<p>Local¬†: meilleures perfs (socket). Distant¬†: flexibilit√© et scalabilit√©.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Chemins</p>
<p><code>REMOTE_PHP_PATH</code>/<code>LOCAL_PHP_PATH</code> doivent correspondre au chemin r√©el des fichiers sous peine d‚Äôerreurs ¬´¬†File not found¬†¬ª.</p>
</div>
<div class="admonition info">
<p class="admonition-title">R√©√©criture d‚ÄôURL</p>
<p>Le plugin configure automatiquement la r√©√©criture pour diriger les requ√™tes vers <code>index.php</code> si le fichier demand√© n‚Äôexiste pas.</p>
</div>
<h3 id="exemples_13">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="33:4"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><input id="__tabbed_33_3" name="__tabbed_33" type="radio" /><input id="__tabbed_33_4" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">PHP‚ÄëFPM local</label><label for="__tabbed_33_2">PHP‚ÄëFPM distant</label><label for="__tabbed_33_3">Port personnalis√©</label><label for="__tabbed_33_4">WordPress</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9000&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9001&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html/wordpress&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="pro">Pro</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Pro regroupe des fonctionnalit√©s avanc√©es pour les d√©ploiements entreprise de BunkerWeb. Il d√©verrouille des capacit√©s suppl√©mentaires, des plugins premium et des extensions qui compl√®tent la plateforme BunkerWeb, pour plus de s√©curit√©, de performance et d‚Äôoptions de gestion.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Avec une cl√© de licence Pro valide, BunkerWeb contacte l‚ÄôAPI Pro pour valider votre abonnement.</li>
<li>Une fois authentifi√©, le plugin t√©l√©charge et installe automatiquement les plugins et extensions exclusifs Pro.</li>
<li>Le statut Pro est v√©rifi√© p√©riodiquement afin d‚Äôassurer l‚Äôacc√®s continu aux fonctionnalit√©s premium.</li>
<li>Les plugins premium s‚Äôint√®grent de fa√ßon transparente √† votre configuration existante.</li>
<li>Les fonctionnalit√©s Pro compl√®tent le c≈ìur open‚Äësource, elles ne le remplacent pas.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices cl√©s</p>
<ol>
<li>Extensions premium¬†: acc√®s √† des plugins et fonctions exclusives.</li>
<li>Performances accrues¬†: configurations optimis√©es et m√©canismes avanc√©s de cache.</li>
<li>Support entreprise¬†: assistance prioritaire et canaux d√©di√©s.</li>
<li>Int√©gration fluide¬†: cohabite avec l‚Äô√©dition communautaire sans conflits.</li>
<li>Mises √† jour automatiques¬†: plugins premium t√©l√©charg√©s et tenus √† jour automatiquement.</li>
</ol>
</div>
<h3 id="comment-lutiliser_21">Comment l‚Äôutiliser</h3>
<ol>
<li>Obtenir une licence¬†: achetez une licence Pro depuis le <a href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a>.</li>
<li>Configurer la licence¬†: d√©finissez <code>PRO_LICENSE_KEY</code> avec votre cl√©.</li>
<li>Laissez BunkerWeb faire le reste¬†: les plugins Pro sont t√©l√©charg√©s et activ√©s automatiquement.</li>
<li>Surveiller le statut Pro¬†: v√©rifiez les indicateurs de sant√© dans l‚Äôinterface <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_17">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PRO_LICENSE_KEY</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Cl√© de licence BunkerWeb Pro (authentification).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Gestion de licence</p>
<p>La licence est li√©e √† votre environnement de d√©ploiement. Pour un transfert ou une question d‚Äôabonnement, contactez le support via le <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Fonctionnalit√©s Pro</p>
<p>Le p√©rim√®tre des fonctionnalit√©s peut √©voluer. Le plugin Pro g√®re automatiquement l‚Äôinstallation et la configuration des capacit√©s disponibles.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Acc√®s r√©seau</p>
<p>Le plugin Pro requiert un acc√®s Internet sortant pour contacter l‚ÄôAPI BunkerWeb (v√©rification de licence) et t√©l√©charger les plugins premium. Autorisez les connexions HTTPS vers <code>api.bunkerweb.io:443</code>.</p>
</div>
<h3 id="faq">FAQ</h3>
<p>Q¬†: Que se passe‚Äët‚Äëil si ma licence Pro expire¬†?</p>
<p>R¬†: L‚Äôacc√®s aux fonctionnalit√©s premium est d√©sactiv√©, mais votre installation continue de fonctionner avec l‚Äô√©dition communautaire. Pour r√©activer les fonctionnalit√©s Pro, renouvelez la licence.</p>
<p>Q¬†: Les fonctionnalit√©s Pro peuvent‚Äëelles perturber ma configuration existante¬†?</p>
<p>R¬†: Non. Elles sont con√ßues pour s‚Äôint√©grer sans modifier votre configuration actuelle.</p>
<p>Q¬†: Puis‚Äëje essayer Pro avant achat¬†?</p>
<p>R¬†: Oui. Deux offres existent¬†:</p>
<ul>
<li>BunkerWeb PRO Standard¬†: acc√®s complet, sans support technique.</li>
<li>BunkerWeb PRO Enterprise¬†: acc√®s complet, avec support d√©di√©.</li>
</ul>
<p>Un essai gratuit d‚Äô1¬†mois est disponible avec le code <code>freetrial</code>. Rendez‚Äëvous sur le <a href="https://panel.bunkerweb.io/?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a> pour l‚Äôactiver.</p>
<h2 id="prometheus-exporter-pro">Prometheus exporter <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Prometheus exporter for BunkerWeb internal metrics.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROMETHEUS_EXPORTER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable the Prometheus export.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>non</td>
<td>Listening IP of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_PORT</code></td>
<td><code>9113</code></td>
<td>global</td>
<td>non</td>
<td>Listening port of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_URL</code></td>
<td><code>/metrics</code></td>
<td>global</td>
<td>non</td>
<td>HTTP URL of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_ALLOW_IP</code></td>
<td><code>127.0.0.0/8 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16</code></td>
<td>global</td>
<td>non</td>
<td>List of IP/networks allowed to contact the Prometheus exporter endpoint.</td>
</tr>
</tbody>
</table>
<h2 id="real-ip">Real IP</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Real IP garantit que BunkerWeb identifie correctement l‚Äôadresse IP du client m√™me derri√®re des proxys. Indispensable pour appliquer les r√®gles de s√©curit√©, la limitation de d√©bit et des logs fiables¬†: sinon toutes les requ√™tes sembleraient venir de l‚ÄôIP du proxy.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Activ√©, BunkerWeb inspecte les en‚Äët√™tes (ex. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-For"><code>X-Forwarded-For</code></a>) contenant l‚ÄôIP d‚Äôorigine.</li>
<li>Il v√©rifie que l‚ÄôIP source figure dans <code>REAL_IP_FROM</code> (liste de proxys de confiance) pour n‚Äôaccepter que les proxys l√©gitimes.</li>
<li>L‚ÄôIP client est extraite de l‚Äôen‚Äët√™te <code>REAL_IP_HEADER</code> et utilis√©e pour l‚Äô√©valuation s√©curit√© et la journalisation.</li>
<li>En cha√Ænes d‚ÄôIPs, une recherche r√©cursive peut d√©terminer l‚ÄôIP d‚Äôorigine via <code>REAL_IP_RECURSIVE</code>.</li>
<li>Le support du <a href="https://netnut.io/what-is-proxy-protocol-and-how-does-it-work/">PROXY protocol</a> peut √™tre activ√© pour recevoir l‚ÄôIP client directement depuis des proxys compatibles (ex. <a href="https://www.haproxy.org/">HAProxy</a>).</li>
<li>Les listes d‚ÄôIP de proxys de confiance peuvent √™tre t√©l√©charg√©es automatiquement via des URLs.</li>
</ol>
<h3 id="comment-lutiliser_22">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_REAL_IP: yes</code>.</li>
<li>Proxys de confiance¬†: renseignez IP/plages dans <code>REAL_IP_FROM</code>.</li>
<li>En‚Äët√™te¬†: indiquez lequel porte l‚ÄôIP r√©elle via <code>REAL_IP_HEADER</code>.</li>
<li>R√©cursif¬†: activez <code>REAL_IP_RECURSIVE</code> si n√©cessaire.</li>
<li>Sources URL¬†: utilisez <code>REAL_IP_FROM_URLS</code> pour t√©l√©charger des listes.</li>
<li>PROXY protocol¬†: activez <code>USE_PROXY_PROTOCOL</code> si l‚Äôamont le supporte.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Avertissement PROXY protocol</p>
<p>Activer <code>USE_PROXY_PROTOCOL</code> sans un amont correctement configur√© pour l‚Äô√©mettre cassera votre application. Assurez‚Äëvous de l‚Äôavoir configur√© avant activation.</p>
</div>
<h3 id="parametres_18">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REAL_IP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la r√©cup√©ration de l‚ÄôIP r√©elle depuis les en‚Äët√™tes ou le PROXY protocol.</td>
</tr>
<tr>
<td><code>REAL_IP_FROM</code></td>
<td><code>192.168.0.0/16 172.16.0.0/12 10.0.0.0/8</code></td>
<td>multisite</td>
<td>non</td>
<td>Proxys de confiance¬†: liste d‚ÄôIP/r√©seaux s√©par√©s par des espaces.</td>
</tr>
<tr>
<td><code>REAL_IP_HEADER</code></td>
<td><code>X-Forwarded-For</code></td>
<td>multisite</td>
<td>non</td>
<td>En‚Äët√™te porteur de l‚ÄôIP r√©elle ou valeur sp√©ciale <code>proxy_protocol</code>.</td>
</tr>
<tr>
<td><code>REAL_IP_RECURSIVE</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Recherche r√©cursive dans un en‚Äët√™te contenant plusieurs IPs.</td>
</tr>
<tr>
<td><code>REAL_IP_FROM_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs fournissant des IPs/r√©seaux de proxys de confiance (supporte <code>file://</code>).</td>
</tr>
<tr>
<td><code>USE_PROXY_PROTOCOL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Activer le support PROXY protocol pour la communication directe proxy‚ÜíBunkerWeb.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Fournisseurs cloud</p>
<p>Ajoutez les IP de vos load balancers (AWS/GCP/Azure‚Ä¶) √† <code>REAL_IP_FROM</code> pour une identification correcte.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Consid√©rations s√©curit√©</p>
<p>N‚Äôajoutez que des sources de confiance, sinon risque d‚Äôusurpation d‚ÄôIP via en‚Äët√™tes manipul√©s.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Multiples adresses</p>
<p>Avec <code>REAL_IP_RECURSIVE</code>, si l‚Äôen‚Äët√™te contient plusieurs IPs, la premi√®re non list√©e comme proxy de confiance est retenue comme IP client.</p>
</div>
<h3 id="exemples_14">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="34:1"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">Basique (derri√®re reverse proxy)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.5&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redirect">Redirect</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Le plugin Redirect fournit des redirections HTTP simples et efficaces. Il permet de rediriger des visiteurs d‚Äôune URL √† une autre, pour un domaine entier, des chemins pr√©cis, avec ou sans conservation du chemin d‚Äôorigine.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä l‚Äôacc√®s d‚Äôun visiteur, BunkerWeb v√©rifie si une redirection est d√©finie.</li>
<li>Si activ√©e, il redirige vers l‚ÄôURL de destination.</li>
<li>Vous pouvez pr√©server le chemin d‚Äôorigine (<code>REDIRECT_TO_REQUEST_URI: yes</code>).</li>
<li>Le code HTTP peut √™tre <code>301</code> (permanent) ou <code>302</code> (temporaire).</li>
<li>Id√©al pour migrations, canonicals, URLs obsol√®tes.</li>
</ol>
<h3 id="comment-lutiliser_23">Comment l‚Äôutiliser</h3>
<ol>
<li>Source¬†: <code>REDIRECT_FROM</code> (ex. <code>/</code>, <code>/old-page</code>).</li>
<li>Destination¬†: <code>REDIRECT_TO</code>.</li>
<li>Type¬†: <code>REDIRECT_TO_REQUEST_URI</code> pour conserver le chemin.</li>
<li>Code¬†: <code>REDIRECT_TO_STATUS_CODE</code> (<code>301</code> ou <code>302</code>).</li>
</ol>
<h3 id="parametres_19">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_FROM</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>oui</td>
<td>Chemin source √† rediriger.</td>
</tr>
<tr>
<td><code>REDIRECT_TO</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de destination. Laisser vide pour d√©sactiver.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_REQUEST_URI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>oui</td>
<td>Conserver le chemin d‚Äôorigine en l‚Äôajoutant √† l‚ÄôURL de destination.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_STATUS_CODE</code></td>
<td><code>301</code></td>
<td>multisite</td>
<td>oui</td>
<td>Code de statut HTTP¬†: <code>301</code> (permanent) ou <code>302</code> (temporaire).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Choisir le bon code</p>
<p><code>301</code> pour une redirection permanente (migrations, canonicals). <code>302</code> pour temporaire.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Conservation du chemin</p>
<p>Avec <code>REDIRECT_TO_REQUEST_URI: yes</code>, <code>/blog/post-1</code> vers <code>https://new.com</code> devient <code>https://new.com/blog/post-1</code>.</p>
</div>
<h3 id="exemples_15">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="35:5"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><input id="__tabbed_35_2" name="__tabbed_35" type="radio" /><input id="__tabbed_35_3" name="__tabbed_35" type="radio" /><input id="__tabbed_35_4" name="__tabbed_35" type="radio" /><input id="__tabbed_35_5" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">Multiples chemins</label><label for="__tabbed_35_2">Domaine entier</label><label for="__tabbed_35_3">Conserver le chemin</label><label for="__tabbed_35_4">Temporaire</label><label for="__tabbed_35_5">Sous‚Äëdomaine ‚Üí chemin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/blog/&quot;</span>
<span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://blog.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="nt">REDIRECT_FROM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/shop/&quot;</span>
<span class="nt">REDIRECT_TO_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://shop.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="nt">REDIRECT_FROM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REDIRECT_TO_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://maintenance.example.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;302&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/support&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redis">Redis</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Redis int√®gre <a href="https://redis.io/">Redis</a> ou <a href="https://valkey.io/">Valkey</a> √† BunkerWeb pour la mise en cache et l‚Äôacc√®s rapide aux donn√©es. Essentiel en haute disponibilit√© pour partager sessions, m√©triques et autres informations entre plusieurs n≈ìuds.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Activ√©, BunkerWeb se connecte au serveur Redis/Valkey configur√©.</li>
<li>Les donn√©es critiques (sessions, m√©triques, s√©curit√©) y sont stock√©es.</li>
<li>Plusieurs instances partagent ces donn√©es pour un clustering fluide.</li>
<li>Prend en charge d√©ploiements standalone, auth par mot de passe, SSL/TLS et Redis Sentinel.</li>
<li>Reconnexion automatique et timeouts configurables pour la robustesse.</li>
</ol>
<h3 id="comment-lutiliser_24">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_REDIS: yes</code>.</li>
<li>Connexion¬†: h√¥te/IP et port.</li>
<li>S√©curit√©¬†: identifiants si requis.</li>
<li>Avanc√©¬†: base, SSL et timeouts.</li>
<li>Haute dispo¬†: configurez Sentinel si utilis√©.</li>
</ol>
<h3 id="parametres_20">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REDIS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Activer l‚Äôint√©gration Redis/Valkey (mode cluster).</td>
</tr>
<tr>
<td><code>REDIS_HOST</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>H√¥te/IP du serveur Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_PORT</code></td>
<td><code>6379</code></td>
<td>global</td>
<td>non</td>
<td>Port Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_DATABASE</code></td>
<td><code>0</code></td>
<td>global</td>
<td>non</td>
<td>Num√©ro de base (0‚Äì15).</td>
</tr>
<tr>
<td><code>REDIS_SSL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Activer SSL/TLS.</td>
</tr>
<tr>
<td><code>REDIS_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>V√©rifier le certificat SSL du serveur.</td>
</tr>
<tr>
<td><code>REDIS_TIMEOUT</code></td>
<td><code>5</code></td>
<td>global</td>
<td>non</td>
<td>Timeout (secondes).</td>
</tr>
<tr>
<td><code>REDIS_USERNAME</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Nom d‚Äôutilisateur (Redis¬†‚â•¬†6.0).</td>
</tr>
<tr>
<td><code>REDIS_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Mot de passe.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_HOSTS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>H√¥tes Sentinel (s√©par√©s par espaces, <code>h√¥te:port</code>).</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_USERNAME</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Utilisateur Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Mot de passe Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_MASTER</code></td>
<td><code>mymaster</code></td>
<td>global</td>
<td>non</td>
<td>Nom du master Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_IDLE</code></td>
<td><code>300</code></td>
<td>global</td>
<td>non</td>
<td>Intervalle keepalive TCP (secondes) pour connexions inactives.</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_POOL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>non</td>
<td>Nb max de connexions conserv√©es dans le pool.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Haute disponibilit√©</p>
<p>Configurez Redis Sentinel pour un failover automatique en production.</p>
</div>
<p>!!! warning "S√©curit√©" - Mots de passe forts pour Redis et Sentinel - Envisagez SSL/TLS - Ne pas exposer Redis sur Internet - Restreignez l‚Äôacc√®s au port Redis (pare‚Äëfeu, segmentation)</p>
<h3 id="exemples_16">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="36:4"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><input id="__tabbed_36_2" name="__tabbed_36" type="radio" /><input id="__tabbed_36_3" name="__tabbed_36" type="radio" /><input id="__tabbed_36_4" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">Configuration basique</label><label for="__tabbed_36_2">Configuration s√©curis√©e</label><label for="__tabbed_36_3">Redis Sentinel</label><label for="__tabbed_36_4">Tuning avanc√©</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SENTINEL_HOSTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel1:26379</span><span class="nv"> </span><span class="s">sentinel2:26379</span><span class="nv"> </span><span class="s">sentinel3:26379&quot;</span>
<span class="nt">REDIS_SENTINEL_MASTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mymaster&quot;</span>
<span class="nt">REDIS_SENTINEL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel-password&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis-password&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_KEEPALIVE_IDLE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">REDIS_KEEPALIVE_POOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="reporting-pro">Reporting <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Regular reporting of important data from BunkerWeb (global, attacks, bans, requests, reasons, AS...). Monitoring pro plugin needed to work.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REPORTING_SMTP</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable sending the report via email.</td>
</tr>
<tr>
<td><code>USE_REPORTING_WEBHOOK</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Enable sending the report via webhook.</td>
</tr>
<tr>
<td><code>REPORTING_SCHEDULE</code></td>
<td><code>weekly</code></td>
<td>global</td>
<td>non</td>
<td>The frequency at which reports are sent.</td>
</tr>
<tr>
<td><code>REPORTING_WEBHOOK_URLS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>List of webhook URLs to receive the report in Markdown (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_EMAILS</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>List of email addresses to receive the report in HTML format (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_HOST</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The host server used for SMTP sending.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_PORT</code></td>
<td><code>465</code></td>
<td>global</td>
<td>non</td>
<td>The port used for SMTP. Please note that there are different standards depending on the type of connection (SSL = 465, TLS = 587).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_EMAIL</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The email address used as the sender. Note that 2FA must be disabled for this email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_USER</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The user authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>The password authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SSL</code></td>
<td><code>SSL</code></td>
<td>global</td>
<td>non</td>
<td>Determine whether or not to use a secure connection for SMTP.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SUBJECT</code></td>
<td><code>BunkerWeb Report</code></td>
<td>global</td>
<td>non</td>
<td>The subject line of the email.</td>
</tr>
</tbody>
</table>
<h2 id="reverse-proxy">Reverse proxy</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Reverse Proxy offre des capacit√©s de proxy transparentes pour BunkerWeb, vous permettant de router les requ√™tes vers des serveurs et services backend. Cette fonctionnalit√© permet √† BunkerWeb d'agir comme une fa√ßade s√©curis√©e pour vos applications tout en offrant des avantages suppl√©mentaires tels que la terminaison SSL et le filtrage de s√©curit√©.</p>
<p><strong>Comment √ßa marche :</strong></p>
<ol>
<li>Lorsqu'un client envoie une requ√™te √† BunkerWeb, le plugin Reverse Proxy la transmet √† votre serveur backend configur√©.</li>
<li>BunkerWeb ajoute des en-t√™tes de s√©curit√©, applique des r√®gles WAF et effectue d'autres contr√¥les de s√©curit√© avant de transmettre les requ√™tes √† votre application.</li>
<li>Le serveur backend traite la requ√™te et renvoie une r√©ponse √† BunkerWeb.</li>
<li>BunkerWeb applique des mesures de s√©curit√© suppl√©mentaires √† la r√©ponse avant de la renvoyer au client.</li>
<li>Le plugin prend en charge le proxying de flux HTTP et TCP/UDP, permettant un large √©ventail d'applications, y compris les WebSockets et d'autres protocoles non-HTTP.</li>
</ol>
<h3 id="comment-lutiliser_25">Comment l‚Äôutiliser</h3>
<p>Suivez ces √©tapes pour configurer et utiliser la fonctionnalit√© Reverse Proxy :</p>
<ol>
<li><strong>Activer la fonctionnalit√© :</strong> Mettez le param√®tre <code>USE_REVERSE_PROXY</code> √† <code>yes</code> pour activer la fonctionnalit√© de reverse proxy.</li>
<li><strong>Configurer vos serveurs backend :</strong> Sp√©cifiez les serveurs en amont √† l'aide du param√®tre <code>REVERSE_PROXY_HOST</code>.</li>
<li><strong>Ajuster les param√®tres du proxy :</strong> Affinez le comportement avec des param√®tres optionnels pour les d√©lais d'attente, les tailles de tampon, et d'autres param√®tres.</li>
<li><strong>Configurer les options sp√©cifiques au protocole :</strong> Pour les WebSockets ou des exigences HTTP sp√©ciales, ajustez les param√®tres correspondants.</li>
<li><strong>Mettre en place la mise en cache (optionnel) :</strong> Activez et configurez la mise en cache du proxy pour am√©liorer les performances pour le contenu fr√©quemment acc√©d√©.</li>
</ol>
<h3 id="guide-de-configuration_2">Guide de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="37:8"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><input id="__tabbed_37_2" name="__tabbed_37" type="radio" /><input id="__tabbed_37_3" name="__tabbed_37" type="radio" /><input id="__tabbed_37_4" name="__tabbed_37" type="radio" /><input id="__tabbed_37_5" name="__tabbed_37" type="radio" /><input id="__tabbed_37_6" name="__tabbed_37" type="radio" /><input id="__tabbed_37_7" name="__tabbed_37" type="radio" /><input id="__tabbed_37_8" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">Configuration de base</label><label for="__tabbed_37_2">Param√®tres de connexion</label><label for="__tabbed_37_3">Configuration SSL/TLS</label><label for="__tabbed_37_4">Support des protocoles</label><label for="__tabbed_37_5">Gestion des en-t√™tes</label><label for="__tabbed_37_6">Authentification</label><label for="__tabbed_37_7">Configuration avanc√©e</label><label for="__tabbed_37_8">Configuration du cache</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Param√®tres principaux</strong></p>
<p>Les param√®tres de configuration essentiels activent et contr√¥lent la fonctionnalit√© de base du reverse proxy.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices du Reverse Proxy</p>
<ul>
<li><strong>Am√©lioration de la s√©curit√© :</strong> Tout le trafic passe par les couches de s√©curit√© de BunkerWeb avant d'atteindre vos applications</li>
<li><strong>Terminaison SSL :</strong> G√©rez les certificats SSL/TLS de mani√®re centralis√©e tandis que les services backend peuvent utiliser des connexions non chiffr√©es</li>
<li><strong>Gestion des protocoles :</strong> Prise en charge de HTTP, HTTPS, WebSockets, et d'autres protocoles</li>
<li><strong>Interception des erreurs :</strong> Personnalisez les pages d'erreur pour une exp√©rience utilisateur coh√©rente</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_PROXY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer le Reverse Proxy :</strong> Mettre √† <code>yes</code> pour activer la fonctionnalit√© de reverse proxy.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HOST</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>H√¥te Backend :</strong> URL compl√®te de la ressource proxifi√©e (proxy_pass).</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL d'emplacement :</strong> Chemin qui sera proxifi√© vers le serveur backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_BUFFERING</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Mise en tampon de la r√©ponse :</strong> Active ou d√©sactive la mise en tampon des r√©ponses de la ressource proxifi√©e.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_KEEPALIVE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Keep-Alive :</strong> Active ou d√©sactive les connexions keepalive avec la ressource proxifi√©e.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_CUSTOM_HOST</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>H√¥te personnalis√© :</strong> Remplace l'en-t√™te Host envoy√© au serveur en amont.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_INTERCEPT_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Intercepter les erreurs :</strong> Intercepte et r√©√©crit les r√©ponses d'erreur du backend.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques</p>
<ul>
<li>Sp√©cifiez toujours l'URL compl√®te dans <code>REVERSE_PROXY_HOST</code>, y compris le protocole (http:// ou https://)</li>
<li>Utilisez <code>REVERSE_PROXY_INTERCEPT_ERRORS</code> pour fournir des pages d'erreur coh√©rentes sur tous vos services</li>
<li>Lors de la configuration de plusieurs backends, utilisez le format de suffixe num√©rot√© (par exemple, <code>REVERSE_PROXY_HOST_2</code>, <code>REVERSE_PROXY_URL_2</code>)</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration des connexions et des d√©lais d'attente</strong></p>
<p>Ces param√®tres contr√¥lent le comportement des connexions, la mise en tampon et les valeurs de d√©lai d'attente pour les connexions proxifi√©es.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Performance optimis√©e :</strong> Ajustez les tailles de tampon et les param√®tres de connexion en fonction des besoins de votre application</li>
<li><strong>Gestion des ressources :</strong> Contr√¥lez l'utilisation de la m√©moire gr√¢ce √† des configurations de tampon appropri√©es</li>
<li><strong>Fiabilit√© :</strong> Configurez des d√©lais d'attente appropri√©s pour g√©rer les connexions lentes ou les probl√®mes de backend</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_CONNECT_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>D√©lai de connexion :</strong> Temps maximum pour √©tablir une connexion avec le serveur backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_READ_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>D√©lai de lecture :</strong> Temps maximum entre les transmissions de deux paquets successifs depuis le serveur backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SEND_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>D√©lai d'envoi :</strong> Temps maximum entre les transmissions de deux paquets successifs vers le serveur backend.</td>
</tr>
<tr>
<td><code>PROXY_BUFFERS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tampons :</strong> Nombre et taille des tampons pour lire la r√©ponse du serveur backend.</td>
</tr>
<tr>
<td><code>PROXY_BUFFER_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Taille du tampon :</strong> Taille du tampon pour lire la premi√®re partie de la r√©ponse du serveur backend.</td>
</tr>
<tr>
<td><code>PROXY_BUSY_BUFFERS_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Taille des tampons occup√©s :</strong> Taille des tampons qui peuvent √™tre occup√©s √† envoyer une r√©ponse au client.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consid√©rations sur les d√©lais d'attente</p>
<ul>
<li>Des d√©lais trop courts peuvent interrompre des connexions l√©gitimes mais lentes</li>
<li>Des d√©lais trop longs peuvent laisser des connexions ouvertes inutilement, √©puisant potentiellement les ressources</li>
<li>Pour les applications WebSocket, augmentez consid√©rablement les d√©lais de lecture et d'envoi (300s ou plus recommand√©)</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Param√®tres SSL/TLS pour les connexions Backend</strong></p>
<p>Ces param√®tres contr√¥lent la mani√®re dont BunkerWeb √©tablit des connexions s√©curis√©es avec les serveurs backend.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Chiffrement de bout en bout :</strong> Maintenez des connexions chiffr√©es du client au backend</li>
<li><strong>Validation des certificats :</strong> Contr√¥lez la validation des certificats des serveurs backend</li>
<li><strong>Support SNI :</strong> Sp√©cifiez l'indication du nom du serveur (SNI) pour les backends h√©bergeant plusieurs sites</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>SSL SNI :</strong> Active ou d√©sactive l'envoi du SNI (Server Name Indication) √† l'amont.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI_NAME</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Nom SSL SNI :</strong> D√©finit le nom d'h√¥te SNI √† envoyer √† l'amont lorsque le SSL SNI est activ√©.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Explication du SNI</p>
<p>L'Indication du Nom du Serveur (SNI) est une extension TLS qui permet √† un client de sp√©cifier le nom d'h√¥te auquel il tente de se connecter pendant la n√©gociation. Cela permet aux serveurs de pr√©senter plusieurs certificats sur la m√™me adresse IP et le m√™me port, permettant ainsi de servir plusieurs sites web s√©curis√©s (HTTPS) √† partir d'une seule adresse IP sans que tous ces sites n'utilisent le m√™me certificat.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration sp√©cifique aux protocoles</strong></p>
<p>Configurez la gestion de protocoles sp√©ciaux, notamment pour les WebSockets et autres protocoles non-HTTP.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Flexibilit√© des protocoles :</strong> Le support des WebSockets permet des applications en temps r√©el</li>
<li><strong>Applications web modernes :</strong> Activez des fonctionnalit√©s interactives n√©cessitant une communication bidirectionnelle</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_WS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Support WebSocket :</strong> Active le protocole WebSocket sur la ressource.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Configuration WebSocket</p>
<ul>
<li>Lors de l'activation des WebSockets avec <code>REVERSE_PROXY_WS: "yes"</code>, envisagez d'augmenter les valeurs des d√©lais d'attente</li>
<li>Les connexions WebSocket restent ouvertes plus longtemps que les connexions HTTP typiques</li>
<li>Pour les applications WebSocket, une configuration recommand√©e est :
  <div class="highlight"><pre><span></span><code><span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div></li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration des en-t√™tes HTTP</strong></p>
<p>Contr√¥lez quels en-t√™tes sont envoy√©s aux serveurs backend et aux clients, vous permettant d'ajouter, de modifier ou de pr√©server des en-t√™tes HTTP.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Contr√¥le de l'information :</strong> G√©rez pr√©cis√©ment les informations partag√©es entre les clients et les backends</li>
<li><strong>Am√©lioration de la s√©curit√© :</strong> Ajoutez des en-t√™tes li√©s √† la s√©curit√© ou supprimez ceux qui pourraient divulguer des informations sensibles</li>
<li><strong>Support d'int√©gration :</strong> Fournissez les en-t√™tes n√©cessaires √† l'authentification et au bon fonctionnement du backend</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_HEADERS</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>En-t√™tes personnalis√©s :</strong> En-t√™tes HTTP √† envoyer au backend, s√©par√©s par des points-virgules.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HIDE_HEADERS</code></td>
<td><code>Upgrade</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Cacher les en-t√™tes :</strong> En-t√™tes HTTP √† cacher aux clients lorsqu'ils sont re√ßus du backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HEADERS_CLIENT</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>En-t√™tes client :</strong> En-t√™tes HTTP √† envoyer au client, s√©par√©s par des points-virgules.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_UNDERSCORES_IN_HEADERS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Underscores dans les en-t√™tes :</strong> Active ou d√©sactive la directive <code>underscores_in_headers</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consid√©rations de s√©curit√©</p>
<p>Lors de l'utilisation de la fonctionnalit√© de reverse proxy, soyez prudent quant aux en-t√™tes que vous transmettez √† vos applications backend. Certains en-t√™tes peuvent exposer des informations sensibles sur votre infrastructure ou contourner les contr√¥les de s√©curit√©.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Exemples de format d'en-t√™te</p>
<p>En-t√™tes personnalis√©s vers les serveurs backend :
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS: &quot;X-Real-IP $remote_addr;X-Forwarded-For $proxy_add_x_forwarded_for;X-Forwarded-Proto $scheme&quot;
</code></pre></div></p>
<p>En-t√™tes personnalis√©s vers les clients :
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS_CLIENT: &quot;X-Powered-By BunkerWeb;X-Frame-Options SAMEORIGIN&quot;
</code></pre></div></p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Configuration de l'authentification externe</strong></p>
<p>Int√©grez avec des syst√®mes d'authentification externes pour centraliser la logique d'autorisation √† travers vos applications.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Authentification centralis√©e :</strong> Mettez en ≈ìuvre un point d'authentification unique pour plusieurs applications</li>
<li><strong>S√©curit√© coh√©rente :</strong> Appliquez des politiques d'authentification uniformes sur diff√©rents services</li>
<li><strong>Contr√¥le am√©lior√© :</strong> Transmettez les d√©tails d'authentification aux applications backend via des en-t√™tes ou des variables</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Requ√™te d'authentification :</strong> Active l'authentification via un fournisseur externe.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL de connexion :</strong> Redirige les clients vers l'URL de connexion en cas d'√©chec de l'authentification.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SET</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Variables d'authentification :</strong> Variables √† d√©finir √† partir du fournisseur d'authentification.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Int√©gration de l'authentification</p>
<ul>
<li>La fonctionnalit√© de requ√™te d'authentification permet la mise en ≈ìuvre de microservices d'authentification centralis√©s</li>
<li>Votre service d'authentification doit renvoyer un code de statut 200 pour une authentification r√©ussie ou 401/403 en cas d'√©chec</li>
<li>Utilisez la directive auth_request_set pour extraire et transmettre des informations du service d'authentification</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Options de configuration suppl√©mentaires</strong></p>
<p>Ces param√®tres offrent une personnalisation plus pouss√©e du comportement du reverse proxy pour des sc√©narios sp√©cialis√©s.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Personnalisation :</strong> Incluez des extraits de configuration suppl√©mentaires pour des exigences complexes</li>
<li><strong>Optimisation des performances :</strong> Affinez la gestion des requ√™tes pour des cas d'usage sp√©cifiques</li>
<li><strong>Flexibilit√© :</strong> Adaptez-vous aux exigences uniques de l'application avec des configurations sp√©cialis√©es</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_INCLUDES</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Configurations suppl√©mentaires :</strong> Incluez des configurations additionnelles dans le bloc location.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_PASS_REQUEST_BODY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Passer le corps de la requ√™te :</strong> Active ou d√©sactive la transmission du corps de la requ√™te.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consid√©rations de s√©curit√©</p>
<p>Soyez prudent lorsque vous incluez des extraits de configuration personnalis√©s car ils peuvent outrepasser les param√®tres de s√©curit√© de BunkerWeb ou introduire des vuln√©rabilit√©s s'ils ne sont pas correctement configur√©s.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Param√®tres de mise en cache des r√©ponses</strong></p>
<p>Am√©liorez les performances en mettant en cache les r√©ponses des serveurs backend, r√©duisant ainsi la charge et am√©liorant les temps de r√©ponse.</p>
<div class="admonition success">
<p class="admonition-title">B√©n√©fices</p>
<ul>
<li><strong>Performance :</strong> R√©duisez la charge sur les serveurs backend en servant du contenu mis en cache</li>
<li><strong>Latence r√©duite :</strong> Temps de r√©ponse plus rapides pour le contenu fr√©quemment demand√©</li>
<li><strong>√âconomies de bande passante :</strong> Minimisez le trafic r√©seau interne en mettant en cache les r√©ponses</li>
<li><strong>Personnalisation :</strong> Configurez exactement quoi, quand et comment le contenu est mis en cache</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROXY_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Activer le cache :</strong> Mettre √† <code>yes</code> pour activer la mise en cache des r√©ponses du backend.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_LEVELS</code></td>
<td><code>1:2</code></td>
<td>global</td>
<td>no</td>
<td><strong>Niveaux de chemin du cache :</strong> Comment structurer la hi√©rarchie du r√©pertoire de cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_ZONE_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Taille de la zone de cache :</strong> Taille de la zone de m√©moire partag√©e utilis√©e pour les m√©tadonn√©es du cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_PARAMS</code></td>
<td><code>max_size=100m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Param√®tres du chemin de cache :</strong> Param√®tres suppl√©mentaires pour le chemin de cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_METHODS</code></td>
<td><code>GET HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>M√©thodes de cache :</strong> M√©thodes HTTP qui peuvent √™tre mises en cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Utilisations min. pour cache :</strong> Nombre minimum de requ√™tes avant qu'une r√©ponse ne soit mise en cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_KEY</code></td>
<td><code>$scheme$host$request_uri</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Cl√© de cache :</strong> La cl√© utilis√©e pour identifier de mani√®re unique une r√©ponse mise en cache.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_VALID</code></td>
<td><code>200=24h 301=1h 302=24h</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validit√© du cache :</strong> Dur√©e de mise en cache pour des codes de r√©ponse sp√©cifiques.</td>
</tr>
<tr>
<td><code>PROXY_NO_CACHE</code></td>
<td><code>$http_pragma $http_authorization</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Pas de cache :</strong> Conditions pour ne pas mettre en cache les r√©ponses m√™me si elles sont normalement cachables.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_BYPASS</code></td>
<td><code>0</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Contournement du cache :</strong> Conditions sous lesquelles contourner le cache.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bonnes pratiques de mise en cache</p>
<ul>
<li>Ne mettez en cache que le contenu qui ne change pas fr√©quemment ou qui n'est pas personnalis√©</li>
<li>Utilisez des dur√©es de cache appropri√©es en fonction du type de contenu (les ressources statiques peuvent √™tre mises en cache plus longtemps)</li>
<li>Configurez <code>PROXY_NO_CACHE</code> pour √©viter de mettre en cache du contenu sensible ou personnalis√©</li>
<li>Surveillez les taux de r√©ussite du cache et ajustez les param√®tres en cons√©quence</li>
</ul>
</div>
</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">Utilisateurs de Docker Compose - Variables NGINX</p>
<p>Lorsque vous utilisez Docker Compose avec des variables NGINX dans vos configurations, vous devez √©chapper le signe dollar (<code>$</code>) en utilisant des doubles signes dollar (<code>$$</code>). Cela s'applique √† tous les param√®tres contenant des variables NGINX comme <code>$remote_addr</code>, <code>$proxy_add_x_forwarded_for</code>, etc.</p>
<p>Sans cet √©chappement, Docker Compose essaiera de substituer ces variables par des variables d'environnement, qui n'existent g√©n√©ralement pas, ce qui entra√Ænera des valeurs vides dans votre configuration NGINX.</p>
</div>
<h3 id="exemples-de-configuration_9">Exemples de configuration</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="38:6"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><input id="__tabbed_38_2" name="__tabbed_38" type="radio" /><input id="__tabbed_38_3" name="__tabbed_38" type="radio" /><input id="__tabbed_38_4" name="__tabbed_38" type="radio" /><input id="__tabbed_38_5" name="__tabbed_38" type="radio" /><input id="__tabbed_38_6" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">Proxy HTTP de base</label><label for="__tabbed_38_2">Application WebSocket</label><label for="__tabbed_38_3">Emplacements multiples</label><label for="__tabbed_38_4">Configuration du cache</label><label for="__tabbed_38_5">Gestion avanc√©e des en-t√™tes</label><label for="__tabbed_38_6">Int√©gration de l'authentification</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Une configuration simple pour proxifier les requ√™tes HTTP vers un serveur d'application backend :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration optimis√©e pour une application WebSocket avec des d√©lais d'attente plus longs :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://websocket-app:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration pour router diff√©rents chemins vers diff√©rents services backend :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Backend API</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://api-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/&quot;</span>

<span class="c1"># Backend Admin</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://admin-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>

<span class="c1"># Application Frontend</span>
<span class="nt">REVERSE_PROXY_HOST_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://frontend:3000&quot;</span>
<span class="nt">REVERSE_PROXY_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec mise en cache du proxy activ√©e pour de meilleures performances :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">USE_PROXY_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">PROXY_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200=24h</span><span class="nv"> </span><span class="s">301=1h</span><span class="nv"> </span><span class="s">302=24h&quot;</span>
<span class="nt">PROXY_CACHE_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET</span><span class="nv"> </span><span class="s">HEAD&quot;</span>
<span class="nt">PROXY_NO_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$http_authorization&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec manipulation personnalis√©e des en-t√™tes :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># En-t√™tes personnalis√©s vers le backend</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP</span><span class="nv"> </span><span class="s">$remote_addr;X-Forwarded-For</span><span class="nv"> </span><span class="s">$proxy_add_x_forwarded_for;X-Forwarded-Proto</span><span class="nv"> </span><span class="s">$scheme&quot;</span>

<span class="c1"># En-t√™tes personnalis√©s vers le client</span>
<span class="nt">REVERSE_PROXY_HEADERS_CLIENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Powered-By</span><span class="nv"> </span><span class="s">BunkerWeb;X-Frame-Options</span><span class="nv"> </span><span class="s">SAMEORIGIN&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuration avec authentification externe :</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># Configuration de l&#39;authentification</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://login.example.com&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$auth_user</span><span class="nv"> </span><span class="s">$upstream_http_x_user;$auth_role</span><span class="nv"> </span><span class="s">$upstream_http_x_role&quot;</span>

<span class="c1"># Backend du service d&#39;authentification</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://auth-service:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="reverse-scan">Reverse scan</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Reverse Scan prot√®ge contre les tentatives de contournement via proxy en scannant certains ports c√¥t√© client pour d√©tecter des proxys/serveurs ouverts. Il aide √† identifier et bloquer les clients qui tentent de masquer leur identit√© ou leur origine.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä la connexion d‚Äôun client, BunkerWeb tente de scanner des ports sp√©cifiques sur l‚ÄôIP du client.</li>
<li>Les ports de proxy courants (80, 443, 8080, etc.) sont v√©rifi√©s.</li>
<li>Si des ports ouverts sont d√©tect√©s (signe d‚Äôun proxy), la connexion est refus√©e.</li>
<li>Cela ajoute une couche contre bots/outils automatis√©s et utilisateurs malveillants.</li>
</ol>
<h3 id="comment-lutiliser_26">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_REVERSE_SCAN: yes</code>.</li>
<li>Ports¬†: personnalisez <code>REVERSE_SCAN_PORTS</code>.</li>
<li>Timeout¬†: ajustez <code>REVERSE_SCAN_TIMEOUT</code> pour l‚Äô√©quilibre s√©curit√©/performance.</li>
<li>Suivi¬†: consultez les logs et la <a href="../web-ui/">web UI</a>.</li>
</ol>
<h3 id="parametres_21">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_SCAN</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer l‚Äôanalyse des ports c√¥t√© client.</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_PORTS</code></td>
<td><code>22 80 443 3128 8000 8080</code></td>
<td>multisite</td>
<td>non</td>
<td>Ports √† v√©rifier (s√©par√©s par des espaces).</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_TIMEOUT</code></td>
<td><code>500</code></td>
<td>multisite</td>
<td>non</td>
<td>D√©lai max par port en millisecondes.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Performance</p>
<p>Scanner de nombreux ports ajoute de la latence. Limitez la liste et adaptez le timeout.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Ports de proxy courants</p>
<p>La configuration par d√©faut inclut 80, 443, 8080, 3128 et SSH¬†(22). Adaptez selon votre mod√®le de menace.</p>
</div>
<h3 id="exemples_17">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="39:4"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><input id="__tabbed_39_2" name="__tabbed_39" type="radio" /><input id="__tabbed_39_3" name="__tabbed_39" type="radio" /><input id="__tabbed_39_4" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">Basique</label><label for="__tabbed_39_2">Approfondi</label><label for="__tabbed_39_3">Optimis√© performance</label><label for="__tabbed_39_4">Haute s√©curit√©</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">8081&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">25</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">4444</span><span class="nv"> </span><span class="s">5555</span><span class="nv"> </span><span class="s">6588</span><span class="nv"> </span><span class="s">6666</span><span class="nv"> </span><span class="s">7777</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8081</span><span class="nv"> </span><span class="s">8800</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">9999&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="robotstxt">Robots.txt</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Robots.txt g√®re le fichier <a href="https://www.robotstxt.org/">robots.txt</a> de votre site, indiquant aux robots les zones autoris√©es/interdites.</p>
<p>Comment √ßa marche¬†:</p>
<p>Activ√©, BunkerWeb g√©n√®re dynamiquement <code>/robots.txt</code> √† la racine. Les r√®gles sont agr√©g√©es dans l‚Äôordre¬†:</p>
<ol>
<li>DarkVisitors (si <code>ROBOTSTXT_DARKVISITORS_TOKEN</code>)¬†: bloque des bots/IA connus selon <code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code> et <code>ROBOTSTXT_DARKVISITORS_DISALLOW</code>.</li>
<li>Listes communautaires (<code>ROBOTSTXT_COMMUNITY_LISTS</code>).</li>
<li>URLs personnalis√©es (<code>ROBOTSTXT_URLS</code>).</li>
<li>R√®gles manuelles (<code>ROBOTSTXT_RULE[_N]</code>).</li>
</ol>
<p>Ensuite, les r√®gles √† ignorer (<code>ROBOTSTXT_IGNORE_RULE[_N]</code>, PCRE) sont filtr√©es. S‚Äôil ne reste rien, un <code>User-agent: *</code> + <code>Disallow: /</code> par d√©faut est appliqu√©. Des sitemaps (<code>ROBOTSTXT_SITEMAP[_N]</code>) peuvent √™tre ajout√©s.</p>
<h3 id="darkvisitors">DarkVisitors</h3>
<p><a href="https://darkvisitors.com/">DarkVisitors</a> fournit un <code>robots.txt</code> dynamique pour bloquer des bots/IA. Inscrivez‚Äëvous et obtenez un bearer token.</p>
<h3 id="comment-lutiliser_27">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_ROBOTSTXT: yes</code>.</li>
<li>R√®gles¬†: via DarkVisitors, listes communautaires, URLs ou variables <code>ROBOTSTXT_RULE</code>.</li>
<li>Filtrer (optionnel)¬†: <code>ROBOTSTXT_IGNORE_RULE_N</code>.</li>
<li>Sitemaps (optionnel)¬†: <code>ROBOTSTXT_SITEMAP_N</code>.</li>
<li>Acc√®s¬†: <code>http(s)://votre-domaine/robots.txt</code>.</li>
</ol>
<h3 id="parametres_22">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ROBOTSTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Active/d√©sactive la fonctionnalit√©.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_TOKEN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Jeton Bearer pour l‚ÄôAPI DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Types d‚Äôagents (s√©par√©s par virgules) √† inclure depuis DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_DISALLOW</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>non</td>
<td>Valeur du champ Disallow envoy√©e √† l‚ÄôAPI DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_COMMUNITY_LISTS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IDs de listes communautaires (s√©par√©s par espaces).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs suppl√©mentaires (supporte <code>file://</code> et auth basique).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_RULE</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>R√®gle individuelle <code>robots.txt</code>.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>En‚Äët√™te (peut √™tre encod√© Base64).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_FOOTER</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Pied de page (peut √™tre encod√© Base64).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_IGNORE_RULE</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Motif PCRE d‚Äôignorance de r√®gles.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_SITEMAP</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de sitemap.</td>
</tr>
</tbody>
</table>
<h3 id="exemples_18">Exemples</h3>
<p>Basique (manuel)</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p>Sources dynamiques (DarkVisitors + liste)</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-darkvisitors-token-here&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_AGENT_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AI</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Scraper&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots-disallowed&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
</code></pre></div>
<p>Combin√©</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-darkvisitors-token-here&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-robots-txt&quot;</span>
<span class="nt">ROBOTSTXT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/my-custom-rules.txt&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">MyOwnBot&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/admin&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p>En‚Äët√™te/Pied de page</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">header&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_FOOTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">footer&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p>Pour en savoir plus¬†: <a href="https://www.robotstxt.org/robotstxt.html">documentation robots.txt</a>.</p>
<h2 id="ssl">SSL</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin SSL fournit un chiffrement SSL/TLS robuste pour vos sites prot√©g√©s par BunkerWeb. Il permet des connexions HTTPS s√©curis√©es en configurant protocoles, suites cryptographiques et param√®tres associ√©s.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Lors d‚Äôune connexion HTTPS, BunkerWeb g√®re la n√©gociation SSL/TLS selon vos r√©glages.</li>
<li>Le plugin impose des protocoles modernes et des suites fortes, et d√©sactive les options vuln√©rables.</li>
<li>Des param√®tres de session optimis√©s am√©liorent les performances sans sacrifier la s√©curit√©.</li>
<li>La pr√©sentation des certificats suit les bonnes pratiques pour compatibilit√© et s√©curit√©.</li>
</ol>
<h3 id="comment-lutiliser_28">Comment l‚Äôutiliser</h3>
<ol>
<li>Protocoles¬†: choisissez les versions via <code>SSL_PROTOCOLS</code>.</li>
<li>Suites¬†: s√©lectionnez un niveau via <code>SSL_CIPHERS_LEVEL</code> ou des suites personnalis√©es via <code>SSL_CIPHERS_CUSTOM</code>.</li>
<li>Redirections¬†: configurez la redirection HTTP‚ÜíHTTPS avec <code>AUTO_REDIRECT_HTTP_TO_HTTPS</code> et/ou <code>REDIRECT_HTTP_TO_HTTPS</code>.</li>
</ol>
<h3 id="parametres_23">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Rediriger tout HTTP vers HTTPS.</td>
</tr>
<tr>
<td><code>AUTO_REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>Redirection auto si HTTPS d√©tect√©.</td>
</tr>
<tr>
<td><code>SSL_PROTOCOLS</code></td>
<td><code>TLSv1.2 TLSv1.3</code></td>
<td>multisite</td>
<td>non</td>
<td>Protocoles SSL/TLS support√©s (s√©par√©s par des espaces).</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_LEVEL</code></td>
<td><code>modern</code></td>
<td>multisite</td>
<td>non</td>
<td>Niveau de s√©curit√© des suites (<code>modern</code>, <code>intermediate</code>, <code>old</code>).</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_CUSTOM</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suites personnalis√©es (liste s√©par√©e par <code>:</code>) qui remplacent le niveau.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Test SSL Labs</p>
<p>Testez votre configuration via <a href="https://www.ssllabs.com/ssltest/">Qualys SSL Labs</a>. Une configuration BunkerWeb bien r√©gl√©e atteint g√©n√©ralement A+.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Protocoles anciens</p>
<p>SSLv3, TLSv1.0 et TLSv1.1 sont d√©sactiv√©s par d√©faut (vuln√©rabilit√©s connues). Activez‚Äëles uniquement si n√©cessaire pour clients h√©rit√©s.</p>
</div>
<h3 id="exemples_19">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="40:4"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><input id="__tabbed_40_2" name="__tabbed_40" type="radio" /><input id="__tabbed_40_3" name="__tabbed_40" type="radio" /><input id="__tabbed_40_4" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">S√©curit√© moderne (d√©faut)</label><label for="__tabbed_40_2">S√©curit√© maximale</label><label for="__tabbed_40_3">Compatibilit√© h√©rit√©e</label><label for="__tabbed_40_4">Suites personnalis√©es</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_CUSTOM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="securitytxt">Security.txt</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Security.txt met en ≈ìuvre le standard <a href="https://securitytxt.org/">Security.txt</a> (<a href="https://www.rfc-editor.org/rfc/rfc9116">RFC¬†9116</a>) sur votre site. Il facilite l‚Äôacc√®s aux politiques de s√©curit√© et fournit un moyen standardis√© de signaler des vuln√©rabilit√©s.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Une fois activ√©, BunkerWeb expose <code>/.well-known/security.txt</code> √† la racine du site.</li>
<li>Le fichier contient vos politiques, contacts et informations pertinentes.</li>
<li>Les chercheurs en s√©curit√© et outils automatis√©s le trouvent √† l‚Äôemplacement standard.</li>
<li>Le contenu est d√©fini via des param√®tres simples (contacts, cl√©s de chiffrement, politiques, remerciements‚Ä¶).</li>
<li>BunkerWeb formate automatiquement selon la RFC¬†9116.</li>
</ol>
<h3 id="comment-lutiliser_29">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>USE_SECURITYTXT: yes</code>.</li>
<li>Contacts¬†: pr√©cisez au moins un moyen de contact via <code>SECURITYTXT_CONTACT</code>.</li>
<li>Informations additionnelles¬†: configurez expiration, chiffrement, remerciements, URL de politique‚Ä¶</li>
</ol>
<h3 id="parametres_24">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_SECURITYTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer le fichier security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_URI</code></td>
<td><code>/.well-known/security.txt</code></td>
<td>multisite</td>
<td>non</td>
<td>URI d‚Äôacc√®s au fichier.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CONTACT</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Moyens de contact (ex. <code>mailto:security@example.com</code>).</td>
</tr>
<tr>
<td><code>SECURITYTXT_EXPIRES</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Date d‚Äôexpiration (format ISO¬†8601).</td>
</tr>
<tr>
<td><code>SECURITYTXT_ENCRYPTION</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de cl√©s de chiffrement pour √©changes s√©curis√©s.</td>
</tr>
<tr>
<td><code>SECURITYTXT_ACKNOWLEDGEMENTS</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de remerciements pour les chercheurs.</td>
</tr>
<tr>
<td><code>SECURITYTXT_POLICY</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL de la politique de s√©curit√© (proc√©dure de signalement).</td>
</tr>
<tr>
<td><code>SECURITYTXT_HIRING</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL d‚Äôoffres d‚Äôemploi s√©curit√©.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CANONICAL</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>URL canonique du fichier security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_PREFERRED_LANG</code></td>
<td><code>en</code></td>
<td>multisite</td>
<td>non</td>
<td>Langue pr√©f√©r√©e (code ISO¬†639‚Äë1).</td>
</tr>
<tr>
<td><code>SECURITYTXT_CSAF</code></td>
<td></td>
<td>multisite</td>
<td>oui</td>
<td>Lien vers le provider-metadata.json du fournisseur CSAF.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Expiration requise</p>
<p>Le champ <code>Expires</code> est obligatoire. Si absent, BunkerWeb d√©finit par d√©faut une expiration √† un an.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Contacts essentiels</p>
<p>Fournissez au moins un moyen de contact¬†: email, formulaire, t√©l√©phone, etc.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">HTTPS obligatoire</p>
<p>Toutes les URLs (sauf <code>mailto:</code> et <code>tel:</code>) DOIVENT utiliser HTTPS. BunkerWeb convertit les URL non‚ÄëHTTPS pour la conformit√©.</p>
</div>
<h3 id="exemples_20">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="41:3"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><input id="__tabbed_41_2" name="__tabbed_41" type="radio" /><input id="__tabbed_41_3" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">Basique</label><label for="__tabbed_41_2">Complet</label><label for="__tabbed_41_3">Contacts multiples</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-contact-form&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-12-31T23:59:59+00:00&quot;</span>
<span class="nt">SECURITYTXT_ENCRYPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/pgp-key.txt&quot;</span>
<span class="nt">SECURITYTXT_ACKNOWLEDGEMENTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/hall-of-fame&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_HIRING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/jobs/security&quot;</span>
<span class="nt">SECURITYTXT_CANONICAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/.well-known/security.txt&quot;</span>
<span class="nt">SECURITYTXT_PREFERRED_LANG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="nt">SECURITYTXT_CSAF</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/provider-metadata.json&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tel:+1-201-555-0123&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-form&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-06-30T23:59:59+00:00&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="self-signed-certificate">Self-signed certificate</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Certificat auto‚Äësign√© g√©n√®re et g√®re automatiquement des certificats SSL/TLS directement dans BunkerWeb, pour activer HTTPS sans autorit√© de certification externe. Id√©al en d√©veloppement, r√©seaux internes ou d√©ploiements rapides d‚ÄôHTTPS.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Une fois activ√©, BunkerWeb g√©n√®re un certificat auto‚Äësign√© pour vos domaines configur√©s.</li>
<li>Le certificat inclut tous les noms de serveurs d√©finis, assurant une validation correcte.</li>
<li>Les certificats sont stock√©s de fa√ßon s√©curis√©e et chiffrent tout le trafic HTTPS.</li>
<li>Le renouvellement est automatique avant expiration.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Avertissements navigateurs</p>
<p>Les navigateurs afficheront des alertes de s√©curit√© car un certificat auto‚Äësign√© n‚Äôest pas √©mis par une AC de confiance. En production, pr√©f√©rez <a href="#lets-encrypt">Let‚Äôs Encrypt</a>.</p>
</div>
<h3 id="comment-lutiliser_30">Comment l‚Äôutiliser</h3>
<ol>
<li>Activer¬†: <code>GENERATE_SELF_SIGNED_SSL: yes</code>.</li>
<li>Algorithme¬†: choisissez via <code>SELF_SIGNED_SSL_ALGORITHM</code>.</li>
<li>Validit√©¬†: dur√©e en jours via <code>SELF_SIGNED_SSL_EXPIRY</code>.</li>
<li>Sujet¬†: champ subject via <code>SELF_SIGNED_SSL_SUBJ</code>.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Mode stream</p>
<p>En mode stream, configurez <code>LISTEN_STREAM_PORT_SSL</code> pour d√©finir le port d‚Äô√©coute SSL/TLS.</p>
</div>
<h3 id="parametres_25">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GENERATE_SELF_SIGNED_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la g√©n√©ration automatique de certificats auto‚Äësign√©s.</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_ALGORITHM</code></td>
<td><code>ec-prime256v1</code></td>
<td>multisite</td>
<td>non</td>
<td>Algorithme¬†: <code>ec-prime256v1</code>, <code>ec-secp384r1</code>, <code>rsa-2048</code>, <code>rsa-4096</code>.</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_EXPIRY</code></td>
<td><code>365</code></td>
<td>multisite</td>
<td>non</td>
<td>Validit√© (jours).</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_SUBJ</code></td>
<td><code>/CN=www.example.com/</code></td>
<td>multisite</td>
<td>non</td>
<td>Sujet du certificat (identifiant le domaine).</td>
</tr>
</tbody>
</table>
<h3 id="exemples_21">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="42:3"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><input id="__tabbed_42_2" name="__tabbed_42" type="radio" /><input id="__tabbed_42_3" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">Basique</label><label for="__tabbed_42_2">Certificats courte dur√©e</label><label for="__tabbed_42_3">Test en RSA</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=mysite.local/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;90&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=dev.example.com/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test.example.com&quot;</span>
<span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rsa-4096&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=test.example.com/&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="sessions">Sessions</h2>
<p>Prise en charge STREAM <img alt="‚úÖ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Le plugin Sessions fournit une gestion robuste des sessions HTTP dans BunkerWeb pour suivre de mani√®re s√©curis√©e l‚Äô√©tat utilisateur entre requ√™tes. Indispensable pour la persistance d‚Äôauthentification et des fonctionnalit√©s comme la <a href="#antibot">protection antibot</a>.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>√Ä la premi√®re interaction, BunkerWeb cr√©e un identifiant de session unique.</li>
<li>Il est stock√© de mani√®re s√©curis√©e dans un cookie navigateur.</li>
<li>Aux requ√™tes suivantes, l‚Äôidentifiant permet d‚Äôacc√©der aux donn√©es de session.</li>
<li>Le stockage peut √™tre local ou dans <a href="#redis">Redis</a> en environnement distribu√©.</li>
<li>Les sessions sont g√©r√©es automatiquement avec des timeouts configurables.</li>
<li>Un secret cryptographique signe les cookies de session.</li>
</ol>
<h3 id="comment-lutiliser_31">Comment l‚Äôutiliser</h3>
<ol>
<li>Secret¬†: d√©finissez un <code>SESSIONS_SECRET</code> fort et unique.</li>
<li>Nom¬†: personnalisez <code>SESSIONS_NAME</code> si souhait√©.</li>
<li>D√©lais¬†: ajustez <code>SESSIONS_IDLING_TIMEOUT</code>, <code>SESSIONS_ROLLING_TIMEOUT</code>, <code>SESSIONS_ABSOLUTE_TIMEOUT</code>.</li>
<li>Cluster¬†: activez <code>USE_REDIS: yes</code> et configurez Redis pour partager les sessions entre n≈ìuds.</li>
</ol>
<h3 id="parametres_26">Param√®tres</h3>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SESSIONS_SECRET</code></td>
<td><code>random</code></td>
<td>global</td>
<td>non</td>
<td>Cl√© de signature des cookies (forte, al√©atoire, unique).</td>
</tr>
<tr>
<td><code>SESSIONS_NAME</code></td>
<td><code>random</code></td>
<td>global</td>
<td>non</td>
<td>Nom du cookie de session.</td>
</tr>
<tr>
<td><code>SESSIONS_IDLING_TIMEOUT</code></td>
<td><code>1800</code></td>
<td>global</td>
<td>non</td>
<td>Inactivit√© max (secondes) avant invalidation.</td>
</tr>
<tr>
<td><code>SESSIONS_ROLLING_TIMEOUT</code></td>
<td><code>3600</code></td>
<td>global</td>
<td>non</td>
<td>Dur√©e max (secondes) avant renouvellement obligatoire.</td>
</tr>
<tr>
<td><code>SESSIONS_ABSOLUTE_TIMEOUT</code></td>
<td><code>86400</code></td>
<td>global</td>
<td>non</td>
<td>Dur√©e max (secondes) avant destruction, activit√© ou non.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_IP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>D√©truire la session si l‚ÄôIP change.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_USER_AGENT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>non</td>
<td>D√©truire la session si l‚ÄôUser‚ÄëAgent change.</td>
</tr>
</tbody>
</table>
<p>!!! warning "S√©curit√©" - <code>SESSIONS_SECRET</code> doit √™tre fort (‚â•32¬†caract√®res), confidentiel et identique sur toutes les instances. - Utilisez des variables d‚Äôenvironnement/secrets pour √©viter le clair.</p>
<p>!!! tip "Clusters" - <code>USE_REDIS: yes</code> et m√™me <code>SESSIONS_SECRET</code>/<code>SESSIONS_NAME</code> sur tous les n≈ìuds.</p>
<h3 id="exemples_22">Exemples</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="43:4"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><input id="__tabbed_43_2" name="__tabbed_43" type="radio" /><input id="__tabbed_43_3" name="__tabbed_43" type="radio" /><input id="__tabbed_43_4" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">Basique (instance unique)</label><label for="__tabbed_43_2">S√©curit√© renforc√©e</label><label for="__tabbed_43_3">Cluster + Redis</label><label for="__tabbed_43_4">Sessions longue dur√©e</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myappsession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-very-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;securesession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;900&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;43200&quot;</span>
<span class="nt">SESSIONS_CHECK_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SESSIONS_CHECK_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clustersession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="c1"># Configurez la connexion Redis</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;persistentsession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;172800&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="ui">UI</h2>
<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Integrate easily the BunkerWeb UI.</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_UI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Use UI</td>
</tr>
<tr>
<td><code>UI_HOST</code></td>
<td></td>
<td>global</td>
<td>non</td>
<td>Address of the web UI used for initial setup</td>
</tr>
</tbody>
</table>
<h2 id="user-manager-pro">User Manager <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p align='center'><iframe style='display: block;' width='560' height='315' data-src='https://www.youtube-nocookie.com/embed/EIohiUf9Fg4' title='Gestionnaire d'utilisateurs' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe></p>

<p>Prise en charge STREAM <img alt="‚ùå" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Add the possibility to manage users on the web interface</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>Valeur par d√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USERS_REQUIRE_2FA</code></td>
<td><code>no</code></td>
<td>global</td>
<td>non</td>
<td>Require two-factor authentication for all users</td>
</tr>
</tbody>
</table>
<h2 id="whitelist">Whitelist</h2>
<p>Prise en charge STREAM <img alt="‚ö†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Le plugin Whitelist vous permet de d√©finir des clients de confiance qui contournent les autres filtres de s√©curit√©. Les visiteurs correspondant aux r√®gles sont imm√©diatement autoris√©s et passent avant les autres contr√¥les. Pour bloquer des clients ind√©sirables, voir <a href="#blacklist">Blacklist</a>.</p>
<p>Comment √ßa marche¬†:</p>
<ol>
<li>Vous d√©finissez des crit√®res (IP/r√©seaux, rDNS, ASN, User‚ÄëAgent, URI).</li>
<li>Si un visiteur correspond √† une r√®gle (et pas √† une r√®gle d‚Äôignore), il est autoris√© et bypass tous les contr√¥les.</li>
<li>Sinon, il suit le parcours de s√©curit√© standard.</li>
<li>Les listes peuvent √™tre mises √† jour automatiquement depuis des sources externes.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Mode stream</p>
<p>En stream, uniquement IP, rDNS et ASN sont √©valu√©s.</p>
</div>
<h3 id="parametres_27">Param√®tres</h3>
<p>G√©n√©ral</p>
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_WHITELIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>non</td>
<td>Activer la whitelist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="44:5"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><input id="__tabbed_44_2" name="__tabbed_44" type="radio" /><input id="__tabbed_44_3" name="__tabbed_44" type="radio" /><input id="__tabbed_44_4" name="__tabbed_44" type="radio" /><input id="__tabbed_44_5" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">Adresse IP</label><label for="__tabbed_44_2">Reverse DNS</label><label for="__tabbed_44_3">ASN</label><label for="__tabbed_44_4">User‚ÄëAgent</label><label for="__tabbed_44_5">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IP/r√©seaux (CIDR) autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>IP/r√©seaux ignor√©s (bypassent les v√©rifications IP).</td>
</tr>
<tr>
<td><code>WHITELIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant IP/r√©seaux √† autoriser.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant IP/r√©seaux √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suffixes rDNS autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>non</td>
<td>V√©rifier seulement les IP globales si <code>yes</code>.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Suffixes rDNS ignor√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des suffixes rDNS autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs contenant des suffixes rDNS √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Num√©ros d‚ÄôAS autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>AS ignor√©s (bypassent la v√©rif ASN).</td>
</tr>
<tr>
<td><code>WHITELIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de listes d‚ÄôAS autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de listes d‚ÄôAS √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs (regex PCRE) de User‚ÄëAgent autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs ignor√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs User‚ÄëAgent autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs User‚ÄëAgent √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Param√®tre</th>
<th>D√©faut</th>
<th>Contexte</th>
<th>Multiple</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs d‚ÄôURI (regex PCRE) autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>Motifs d‚ÄôURI ignor√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs d‚ÄôURI autoris√©s.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>non</td>
<td>URLs de motifs d‚ÄôURI √† ignorer.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h3 id="travailler-avec-des-fichiers-de-listes-locaux_2">Travailler avec des fichiers de listes locaux</h3>
<p>Les param√®tres <code>*_URLS</code> fournis par les plugins Whitelist, Greylist et Blacklist utilisent le m√™me t√©l√©chargeur. Lorsque vous r√©f√©rencez une URL <code>file:///</code>¬†:</p>
<ul>
<li>Le chemin est r√©solu dans le conteneur du <strong>scheduler</strong> (dans un d√©ploiement Docker il s‚Äôagit g√©n√©ralement de <code>bunkerweb-scheduler</code>). Montez-y vos fichiers et v√©rifiez que l‚Äôutilisateur scheduler poss√®de un acc√®s en lecture.</li>
<li>Chaque fichier est un texte encod√© en UTF-8 avec une entr√©e par ligne. Les lignes vides sont ignor√©es et les commentaires doivent commencer par <code>#</code> ou <code>;</code>. Les commentaires <code>//</code> ne sont pas pris en charge.</li>
<li>Valeur attendue selon le type de liste¬†:</li>
<li><strong>Listes IP</strong> acceptent des adresses IPv4/IPv6 ou des r√©seaux CIDR (par exemple <code>192.0.2.10</code> ou <code>2001:db8::/48</code>).</li>
<li><strong>Listes rDNS</strong> attendent un suffixe sans espaces (par exemple <code>.search.msn.com</code>). Les valeurs sont automatiquement converties en minuscules.</li>
<li><strong>Listes ASN</strong> peuvent contenir uniquement le num√©ro (<code>32934</code>) ou le num√©ro pr√©fix√© par <code>AS</code> (<code>AS15169</code>).</li>
<li><strong>Listes User-Agent</strong> sont trait√©es comme des motifs PCRE et la ligne compl√®te est conserv√©e (espaces compris). Placez vos commentaires sur une ligne s√©par√©e pour √©viter qu‚Äôils ne soient interpr√©t√©s comme motif.</li>
<li><strong>Listes URI</strong> doivent commencer par <code>/</code> et peuvent utiliser des jetons PCRE tels que <code>^</code> ou <code>$</code>.</li>
</ul>
<p>Exemples de fichiers conformes¬†:</p>
<div class="highlight"><pre><span></span><code># /etc/bunkerweb/lists/ip-whitelist.txt
192.0.2.10
198.51.100.0/24

# /etc/bunkerweb/lists/ua-whitelist.txt
(?:^|\s)FriendlyScanner(?:\s|$)
TrustedMonitor/\d+\.\d+
</code></pre></div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Bunkerity
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/fTf46FmtyD" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/bunkerity" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/bunkerity/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/r/BunkerWeb/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/bunkerweb/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/bunkerity" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": {"provider": "mike", "version": "latest"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="https://chatbot.bunkerweb.io/static/js/chatbot.js"></script>
      
        <script src="../../assets/preserve-version-on-language-switch.js"></script>
      
        <script src="../../assets/toc-dropdown.js"></script>
      
    
  </body>
</html>