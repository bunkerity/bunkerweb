
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BunkerWeb, the open source and next generation WAF.">
      
      
      
        <link rel="canonical" href="https://docs.bunkerweb.io/latest/de/integrations/">
      
      
        <link rel="prev" href="../concepts/">
      
      
        <link rel="next" href="../quickstart-guide/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Integrationen - BunkerWeb Dokumentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
    <script async
            defer
            data-domain="docs.bunkerweb.io"
            src="https://data.bunkerity.com/js/script.js"></script>

    <script defer>
      window.addEventListener('DOMContentLoaded', (e) => {

        const customHeaders = document.querySelectorAll('[data-custom-header]')
        customHeaders.forEach(header => {
          const getHeaders = document.querySelectorAll(`#${header.getAttribute('id')}`);
          getHeaders.forEach(el => {

            if(!el.hasAttribute('data-custom-header')) el.remove()
        })})
      })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script>

    <script defer>
  // Lazy load images and embed youtube videos
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-src]").forEach((el) => {
      el.setAttribute("src", el.getAttribute("data-src"));
    });
  });
  // Add missing label
  try {
    document
      .querySelector('div.md-search[data-md-component="search"][role="dialog"]')
      .setAttribute("aria-label", "Search in documentation");
  } catch (err) {}
    </script>

    <script defer>
      window.addEventListener('DOMContentLoaded', () => {
        const bannerEl = document.querySelector('aside.md-banner');
        let defaultContent = [{ "content" : '<p>Get the most of BunkerWeb by upgrading to the PRO version. Click <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&utm_source=doc">here</a> and use the <strong>freetrial</strong> promo code to get started.</p>'},
        { "content" : '<p>Need premium support or tailored consulting around BunkerWeb ? Check out our <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc#services">professional services</a>.</p>'},
        { "content" : '<p>Be part of the Bunker community by joining the <a style="text-decoration:underline; color: white;" href="https://discord.bunkerweb.io">Discord chat</a> and following us on <a style="text-decoration:underline; color: white;" href="https://www.linkedin.com/company/bunkerity/">LinkedIn</a>.</p>'}
        ]

      function setBannerStyle() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        bannerEl.style.backgroundColor = "#2eac68";
        bannerItem.style.textAlign = "center";
        bannerItem.style.transition = "all 0.5s ease-out";
      }

      function setDefault() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        const clone = bannerItem.cloneNode(true);
        clone.innerHTML = defaultContent[0]["content"];
        bannerEl.replaceChild(clone, bannerItem);
      }

      function startBannerLoop() {
        const switchDelay = 7000;
        let i = 0;

        setInterval(() => {
          // Update or reset index
          if(i + 1 === defaultContent.length) {
            i = 0;
          } else {
            i++;
          }

          // Prepare data with next el with opacity 0 too
          const currItem = bannerEl.querySelector('.md-banner__inner');
          currItem.style.opacity = 0;
          const clone = currItem.cloneNode(true);
          clone.innerHTML = defaultContent[i]["content"];
          setTimeout(() => {
            bannerEl.replaceChild(clone, currItem);
            setTimeout(() => {
              const newItem = bannerEl.querySelector('.md-banner__inner');
              newItem.style.opacity = 1;
            }, 20);
          }, 600);

        }, switchDelay);
      }

      function runBanner() {
        startBannerLoop();
        // Try to get dynamic content
        // Else keep static ones
        // fetch("https://www.bunkerweb.io/api/bw-ui-news")
        // .then((res) => {
        //   return res.json();
        // })
        // .then((res) => {
        //   defaultContent = res.data[0].data;
        //   startBannerLoop();
        // })
        // .catch((e) => {
        //   startBannerLoop();
        // });
      }

        setBannerStyle();
        setDefault();
        runBanner()

      })
    </script>

    
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Integrationen - BunkerWeb Dokumentation" >
      
        <meta  property="og:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  property="og:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/de/integrations.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.bunkerweb.io/latest/de/integrations/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Integrationen - BunkerWeb Dokumentation" >
      
        <meta  name="twitter:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  name="twitter:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/de/integrations.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#integrationen" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    ðŸ“¢ Looking for BunkerWeb CLOUD, PRO version, technical support or tailored services ? Visit the
    <a href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc"
       style="color: #3f6ec6;
              text-decoration: underline">BunkerWeb Panel</a>
    for more information on our enterprise offers.

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    You're not viewing the
    documentation of the latest version.
    <a href="../../..">
        <strong>Click here to view latest.</strong>
    </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href="../" title="BunkerWeb Dokumentation" class="md-header__button md-logo" aria-label="BunkerWeb Dokumentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BunkerWeb Dokumentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Integrationen
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sprache wechseln">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../integrations/" hreflang="en" class="md-select__link">
              English - ðŸ‡¬ðŸ‡§
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../fr/integrations/" hreflang="fr" class="md-select__link">
              FranÃ§ais - ðŸ‡«ðŸ‡·
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="de" class="md-select__link">
              Deutsch - ðŸ‡©ðŸ‡ª
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/integrations/" hreflang="es" class="md-select__link">
              EspaÃ±ol - ðŸ‡ªðŸ‡¸
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh/integrations/" hreflang="zh" class="md-select__link">
              ä¸­æ–‡ - ðŸ‡¨ðŸ‡³
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="ZurÃ¼cksetzen" aria-label="ZurÃ¼cksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bunkerity/bunkerweb" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  EinfÃ¼hrung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        
  
  
    
  
  Konzepte

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Integrationen

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-guide/" class="md-tabs__link">
        
  
  
    
  
  Schnellstart

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../features/" class="md-tabs__link">
        
  
  
    
  
  Funktionen

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/" class="md-tabs__link">
        
  
  
    
  
  Erweiterte Nutzung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../web-ui/" class="md-tabs__link">
        
  
  
    
  
  WeboberflÃ¤che

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../upgrading/" class="md-tabs__link">
        
  
  
    
  
  Aktualisierung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  Fehlerbehebung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
  
    
  
  Plugins

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../professional-services/" class="md-tabs__link">
        
  
  
    
  
  Professionelle Dienste

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
  
    
  
  Ãœber

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="BunkerWeb Dokumentation" class="md-nav__button md-logo" aria-label="BunkerWeb Dokumentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    BunkerWeb Dokumentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bunkerity/bunkerweb" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EinfÃ¼hrung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Konzepte
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Integrationen
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Integrationen
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bunkerweb-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerWeb Cloud
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerWeb Cloud">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hauptvorteile" class="md-nav__link">
    <span class="md-ellipsis">
      Hauptvorteile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architekturubersicht" class="md-nav__link">
    <span class="md-ellipsis">
      ArchitekturÃ¼bersicht
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ArchitekturÃ¼bersicht">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einfache-architektur-einzelner-dienst" class="md-nav__link">
    <span class="md-ellipsis">
      Einfache Architektur - Einzelner Dienst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#komplexe-architektur-multi-dienste" class="md-nav__link">
    <span class="md-ellipsis">
      Komplexe Architektur - Multi-Dienste
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erstkonfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Erstkonfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Erstkonfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-zugang-zur-verwaltungsoberflache" class="md-nav__link">
    <span class="md-ellipsis">
      1. Zugang zur VerwaltungsoberflÃ¤che
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-erste-verbindung" class="md-nav__link">
    <span class="md-ellipsis">
      2. Erste Verbindung
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-konfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      DNS-Konfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNS-Konfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verkehrsumleitung-zu-bunkerweb-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      Verkehrsumleitung zu BunkerWeb Cloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsuberprufung" class="md-nav__link">
    <span class="md-ellipsis">
      KonfigurationsÃ¼berprÃ¼fung
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dienstkonfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Dienstkonfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dienstkonfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einzelner-dienst" class="md-nav__link">
    <span class="md-ellipsis">
      Einzelner Dienst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-dienste-mit-sni" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Dienste mit SNI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Dienste mit SNI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#warum-sni-aktivieren" class="md-nav__link">
    <span class="md-ellipsis">
      Warum SNI aktivieren?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sni-konfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      SNI-Konfiguration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#technische-details-zu-sni" class="md-nav__link">
    <span class="md-ellipsis">
      Technische Details zu SNI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssltls-und-sni-management" class="md-nav__link">
    <span class="md-ellipsis">
      SSL/TLS- und SNI-Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL/TLS- und SNI-Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssl-zertifikate" class="md-nav__link">
    <span class="md-ellipsis">
      SSL-Zertifikate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL-Zertifikate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auf-seite-von-bunkerweb-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      Auf Seite von BunkerWeb Cloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auf-seite-der-client-infrastruktur" class="md-nav__link">
    <span class="md-ellipsis">
      Auf Seite der Client-Infrastruktur
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detaillierte-sni-konfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Detaillierte SNI-Konfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detaillierte SNI-Konfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anwendungsfall-infrastruktur-mit-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Anwendungsfall: Infrastruktur mit Gateway
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-gateway-konfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Client-Gateway-Konfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client-Gateway-Konfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubersicht" class="md-nav__link">
    <span class="md-ellipsis">
      Ãœbersicht
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationen-nach-technologie" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationen nach Technologie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Konfigurationen nach Technologie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traefik" class="md-nav__link">
    <span class="md-ellipsis">
      Traefik
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache" class="md-nav__link">
    <span class="md-ellipsis">
      Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validierung-der-ssl-konfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Validierung der SSL-Konfiguration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-fur-gateways" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices fÃ¼r Gateways
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bunkerweb-cloud-ip-whitelist" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerWeb Cloud IP-Whitelist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerWeb Cloud IP-Whitelist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#warum-eine-whitelist-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Warum eine Whitelist konfigurieren?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bunkerweb-cloud-ip-adressen-zur-whitelist-hinzufugen" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerWeb Cloud IP-Adressen zur Whitelist hinzufÃ¼gen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whitelist-konfiguration-nach-technologie" class="md-nav__link">
    <span class="md-ellipsis">
      Whitelist-Konfiguration nach Technologie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Whitelist-Konfiguration nach Technologie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traefik_1" class="md-nav__link">
    <span class="md-ellipsis">
      Traefik
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache_1" class="md-nav__link">
    <span class="md-ellipsis">
      Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxy_1" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-firewall-iptables" class="md-nav__link">
    <span class="md-ellipsis">
      System-Firewall (iptables)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whitelist-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Whitelist Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real_ip-konfiguration-und-client-adresswiederherstellung" class="md-nav__link">
    <span class="md-ellipsis">
      REAL_IP-Konfiguration und Client-Adresswiederherstellung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REAL_IP-Konfiguration und Client-Adresswiederherstellung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#warum-real_ip-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Warum REAL_IP konfigurieren?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfiguration-auf-seite-von-bunkerweb-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      Konfiguration auf Seite von BunkerWeb Cloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfiguration-auf-seite-der-client-infrastruktur" class="md-nav__link">
    <span class="md-ellipsis">
      Konfiguration auf Seite der Client-Infrastruktur
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Konfiguration auf Seite der Client-Infrastruktur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx_2" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache_2" class="md-nav__link">
    <span class="md-ellipsis">
      Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxy_2" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traefik_2" class="md-nav__link">
    <span class="md-ellipsis">
      Traefik
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tests-und-validierung" class="md-nav__link">
    <span class="md-ellipsis">
      Tests und Validierung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tests und Validierung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#konfigurationsuberprufung_1" class="md-nav__link">
    <span class="md-ellipsis">
      KonfigurationsÃ¼berprÃ¼fung
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real_ip-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      REAL_IP Best Practices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real_ip-fehlerbehebung" class="md-nav__link">
    <span class="md-ellipsis">
      REAL_IP-Fehlerbehebung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REAL_IP-Fehlerbehebung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haufige-probleme" class="md-nav__link">
    <span class="md-ellipsis">
      HÃ¤ufige Probleme
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagnosebefehle" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnosebefehle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uberwachung-und-observabilitat" class="md-nav__link">
    <span class="md-ellipsis">
      Ãœberwachung und ObservabilitÃ¤t
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ãœberwachung und ObservabilitÃ¤t">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grafana-zugang" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana-Zugang
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grafana-Zugang">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verfugbare-metriken" class="md-nav__link">
    <span class="md-ellipsis">
      VerfÃ¼gbare Metriken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verfugbare-protokolle" class="md-nav__link">
    <span class="md-ellipsis">
      VerfÃ¼gbare Protokolle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alarmkonfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      Alarmkonfiguration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sicherheit" class="md-nav__link">
    <span class="md-ellipsis">
      Sicherheit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leistung" class="md-nav__link">
    <span class="md-ellipsis">
      Leistung
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fehlerbehebung" class="md-nav__link">
    <span class="md-ellipsis">
      Fehlerbehebung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fehlerbehebung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haufige-probleme_1" class="md-nav__link">
    <span class="md-ellipsis">
      HÃ¤ufige Probleme
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HÃ¤ufige Probleme">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ssltls-fehler" class="md-nav__link">
    <span class="md-ellipsis">
      1. SSL/TLS-Fehler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-backend-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      2. Backend-Timeout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-routing-probleme" class="md-nav__link">
    <span class="md-ellipsis">
      3. Routing-Probleme
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagnosebefehle_1" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnosebefehle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#technischer-support" class="md-nav__link">
    <span class="md-ellipsis">
      Technischer Support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-in-one-aio-image" class="md-nav__link">
    <span class="md-ellipsis">
      All-In-One (AIO) Image
    </span>
  </a>
  
    <nav class="md-nav" aria-label="All-In-One (AIO) Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Bereitstellung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      API-Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zugriff-auf-den-einrichtungsassistenten" class="md-nav__link">
    <span class="md-ellipsis">
      Zugriff auf den Einrichtungsassistenten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Redis-Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crowdsec-integration" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec-Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CrowdSec-Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hinzufugen-zusatzlicher-sammlungen" class="md-nav__link">
    <span class="md-ellipsis">
      HinzufÃ¼gen zusÃ¤tzlicher Sammlungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deaktivieren-bestimmter-parser" class="md-nav__link">
    <span class="md-ellipsis">
      Deaktivieren bestimmter Parser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appsec-umschalter" class="md-nav__link">
    <span class="md-ellipsis">
      AppSec-Umschalter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externe-crowdsec-api" class="md-nav__link">
    <span class="md-ellipsis">
      Externe CrowdSec-API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#umgebungsvariablen" class="md-nav__link">
    <span class="md-ellipsis">
      Umgebungsvariablen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verwendung-von-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung von Docker-Secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netzwerke" class="md-nav__link">
    <span class="md-ellipsis">
      Netzwerke
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vollstandige-compose-datei" class="md-nav__link">
    <span class="md-ellipsis">
      VollstÃ¤ndige Compose-Datei
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aus-dem-quellcode-erstellen" class="md-nav__link">
    <span class="md-ellipsis">
      Aus dem Quellcode erstellen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      Linux
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einfaches-installationsskript" class="md-nav__link">
    <span class="md-ellipsis">
      Einfaches Installationsskript
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Einfaches Installationsskript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schnellstart" class="md-nav__link">
    <span class="md-ellipsis">
      Schnellstart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wie-es-funktioniert" class="md-nav__link">
    <span class="md-ellipsis">
      Wie es funktioniert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interaktive-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Interaktive Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befehlszeilenoptionen" class="md-nav__link">
    <span class="md-ellipsis">
      Befehlszeilenoptionen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crowdsec-integration-with-the-script" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec-Integration mit dem Skript
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rhel-uberlegungen" class="md-nav__link">
    <span class="md-ellipsis">
      RHEL-Ãœberlegungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nach-der-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Nach der Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-uber-den-paketmanager" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Ã¼ber den Paketmanager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfiguration-und-dienst" class="md-nav__link">
    <span class="md-ellipsis">
      Konfiguration und Dienst
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Konfiguration und Dienst">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worker" class="md-nav__link">
    <span class="md-ellipsis">
      Worker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Web-UI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-autoconf" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Autoconf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker Autoconf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autoconf-dienste" class="md-nav__link">
    <span class="md-ellipsis">
      Autoconf-Dienste
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installationsmethoden" class="md-nav__link">
    <span class="md-ellipsis">
      Installationsmethoden
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installationsmethoden">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung-des-helm-charts-empfohlen" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung des Helm-Charts (empfohlen)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sidecar-container-helm" class="md-nav__link">
    <span class="md-ellipsis">
      Sidecar Container + Helm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sidecar Container + Helm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sidecar-discovery-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Sidecar Discovery Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sidecar Discovery Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode-1-automatic-discovery-controller-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Mode 1: Automatic Discovery (Controller - Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-2-manual-configuration-bunkerweb_instances" class="md-nav__link">
    <span class="md-ellipsis">
      Mode 2: Manual Configuration (BUNKERWEB_INSTANCES)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-scheduler-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Scheduler Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1: Scheduler Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-with-controller-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Option A: With Controller (Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-b-manual-configuration-with-bunkerweb_instances" class="md-nav__link">
    <span class="md-ellipsis">
      Option B: Manual Configuration with BUNKERWEB_INSTANCES
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-creating-the-deployment-with-sidecar" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Creating the Deployment with Sidecar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2: Creating the Deployment with Sidecar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-structure-with-controller-automatic-mode-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Structure with Controller (Automatic Mode - Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-structure-without-controller-manual-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Structure without Controller (Manual Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Important Environment Variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-creating-services" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Creating Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3: Creating Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterip-service-external-exposure" class="md-nav__link">
    <span class="md-ellipsis">
      ClusterIP Service (external exposure)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headless-service-internal-api-conditional" class="md-nav__link">
    <span class="md-ellipsis">
      Headless Service (internal API) - Conditional
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-reverse-proxy-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Reverse Proxy Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 4: Reverse Proxy Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-via-web-interface-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Option A: Via Web Interface (UI)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-b-via-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Option B: Via Environment Variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Deployment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 5: Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-controller-automatic-mode-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      With Controller (Automatic Mode - Recommended)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#without-controller-manual-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Without Controller (Manual Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-new-application" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New Application
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding a New Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-controller-automatic-mode" class="md-nav__link">
    <span class="md-ellipsis">
      With Controller (Automatic Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#without-controller-manual-mode_1" class="md-nav__link">
    <span class="md-ellipsis">
      Without Controller (Manual Mode)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices_1" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vollstandige-yaml-dateien" class="md-nav__link">
    <span class="md-ellipsis">
      VollstÃ¤ndige YAML-Dateien
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-ressourcen" class="md-nav__link">
    <span class="md-ellipsis">
      Ingress-Ressourcen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces_1" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-klasse" class="md-nav__link">
    <span class="md-ellipsis">
      Ingress-Klasse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benutzerdefinierter-domainname" class="md-nav__link">
    <span class="md-ellipsis">
      Benutzerdefinierter Domainname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verwendung-mit-einem-vorhandenen-ingress-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung mit einem vorhandenen Ingress-Controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verwendung mit einem vorhandenen Ingress-Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx-ingress-controller-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx-Ingress-Controller-Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swarm" class="md-nav__link">
    <span class="md-ellipsis">
      Swarm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Swarm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#swarm-dienste" class="md-nav__link">
    <span class="md-ellipsis">
      Swarm-Dienste
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces_2" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#microsoft-azure" class="md-nav__link">
    <span class="md-ellipsis">
      Microsoft Azure
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schnellstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funktionen
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Erweiterte Nutzung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WeboberflÃ¤che
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aktualisierung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fehlerbehebung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../professional-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Professionelle Dienste
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ãœber
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="integrationen">Integrationen</h1>
<h2 id="bunkerweb-cloud">BunkerWeb Cloud</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/bunkerweb-cloud.png" width="600" />
  </p>
<figcaption>BunkerWeb Cloud</figcaption>
</figure>
<p>BunkerWeb Cloud ist eine verwaltete Web Application Firewall (WAF) und Reverse-Proxy-LÃ¶sung, mit der Sie Ihre Webanwendungen sichern kÃ¶nnen, ohne BunkerWeb in Ihrer Infrastruktur zu installieren. Wenn Sie BunkerWeb Cloud abonnieren, profitieren Sie von einem vollstÃ¤ndigen BunkerWeb-Stack, der in der Cloud gehostet wird und Ã¼ber dedizierte Ressourcen verfÃ¼gt (8 GB RAM, 2 CPU <strong>pro</strong> Instanz, repliziert auf 2 Instanzen fÃ¼r HochverfÃ¼gbarkeit, Standardangebot).</p>
<h3 id="hauptvorteile">Hauptvorteile</h3>
<p>Bestellen Sie Ihre <a href="https://panel.bunkerweb.io/store/bunkerweb-cloud?utm_campaign=self&amp;utm_source=doc">BunkerWeb Cloud-Instanz</a> und erhalten Sie Zugriff auf:</p>
<ul>
<li><strong>Sofortige Bereitstellung</strong>: Keine Installation in Ihrer Infrastruktur erforderlich</li>
<li><strong>HochverfÃ¼gbarkeit</strong>: Replizierte Instanzen mit automatischem Lastausgleich</li>
<li><strong>Integrierte Ãœberwachung</strong>: Zugriff auf Grafana zur Visualisierung von Protokollen und Metriken</li>
<li><strong>Skalierbarkeit</strong>: Dedizierte Ressourcen, die an hohe Arbeitslasten angepasst sind</li>
<li><strong>ErhÃ¶hte Sicherheit</strong>: Echtzeit-WAF-Schutz vor Webbedrohungen</li>
</ul>
<p>Wenn Sie am BunkerWeb Cloud-Angebot interessiert sind, zÃ¶gern Sie nicht, uns zu <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">kontaktieren</a>, damit wir Ihre BedÃ¼rfnisse besprechen kÃ¶nnen.</p>
<h3 id="architekturubersicht">ArchitekturÃ¼bersicht</h3>
<h4 id="einfache-architektur-einzelner-dienst">Einfache Architektur - Einzelner Dienst</h4>
<pre class="mermaid"><code>graph LR
    A[Client] --&gt;|HTTPS| B[beispiel.de]
    B --&gt;|DNS-AuflÃ¶sung| C[Load Balancer54984654.bunkerweb.cloud]
    C --&gt;|Verkehr| D[BunkerWeb CloudWAF + Reverse Proxy]
    D --&gt;|HTTPS/HTTP| E[Server beispiel.deClient-Infrastruktur]

    style C fill:#e1f5fe,color:#222
    style D fill:#f3e5f5,color:#222
    style E fill:#e8f5e8,color:#222</code></pre>
<h4 id="komplexe-architektur-multi-dienste">Komplexe Architektur - Multi-Dienste</h4>
<pre class="mermaid"><code>graph LR
    A[Clients] --&gt;|HTTPS| B[beispiel.deanderes-beispiel.deein-anderes-beispiel.de]
    B --&gt;|DNS-AuflÃ¶sung| C[Load Balancer54984654.bunkerweb.cloud]
    C --&gt;|Verkehr| D[BunkerWeb CloudWAF + Reverse ProxySSL SNI Aktiviert]
    D --&gt;|HTTPS mit SNI| E[Client GatewayReverse Proxy/LB]
    E --&gt;|Internes Routing| F[Dienst 1]
    E --&gt;|Internes Routing| G[Dienst 2]
    E --&gt;|Internes Routing| H[Dienst N]

    style C fill:#e1f5fe,color:#222
    style D fill:#f3e5f5,color:#222
    style E fill:#fff3e0,color:#222
    style F fill:#e8f5e8,color:#222
    style G fill:#e8f5e8,color:#222
    style H fill:#e8f5e8,color:#222</code></pre>
<h3 id="erstkonfiguration">Erstkonfiguration</h3>
<h4 id="1-zugang-zur-verwaltungsoberflache">1. Zugang zur VerwaltungsoberflÃ¤che</h4>
<p>Nach dem Abonnement von BunkerWeb Cloud erhalten Sie:</p>
<ul>
<li><strong>URL fÃ¼r BunkerWeb-UI-Zugriff</strong>: Schnittstelle zur Konfiguration Ihrer Dienste</li>
<li><strong>Load Balancer-Endpunkt</strong>: Eindeutige URL im Format <code>http://[ID].bunkerweb.cloud</code></li>
<li><strong>Grafana-Zugang</strong>: Ãœberwachungsschnittstelle und Visualisierung von Metriken</li>
<li><strong>Zugewiesene Ressourcen</strong>: 2 Instanzen mit je 16 GB RAM und 4 CPUs</li>
</ul>
<h4 id="2-erste-verbindung">2. Erste Verbindung</h4>
<ol>
<li>Verbinden Sie sich mit der BunkerWeb Cloud-Schnittstelle</li>
<li>Konfigurieren Sie Ihre zu schÃ¼tzenden Dienste</li>
<li>Greifen Sie auf Grafana zu, um Ihre BunkerWeb-Protokolle und Metriken zu visualisieren</li>
</ol>
<h3 id="dns-konfiguration">DNS-Konfiguration</h3>
<h4 id="verkehrsumleitung-zu-bunkerweb-cloud">Verkehrsumleitung zu BunkerWeb Cloud</h4>
<p>Damit der Datenverkehr Ihrer Domain von BunkerWeb Cloud verarbeitet wird, mÃ¼ssen Sie Ihre DNS-EintrÃ¤ge konfigurieren:</p>
<p><strong>Erforderliche Konfiguration:</strong></p>
<div class="highlight"><pre><span></span><code>beispiel.de.        IN  CNAME  54984654.bunkerweb.cloud.
www.beispiel.de.    IN  CNAME  54984654.bunkerweb.cloud.
</code></pre></div>
<p><strong>Wichtig:</strong> Ersetzen Sie <code>54984654</code> durch Ihre Load Balancer-Kennung, die Sie beim Abonnement erhalten haben.</p>
<h4 id="konfigurationsuberprufung">KonfigurationsÃ¼berprÃ¼fung</h4>
<p>ÃœberprÃ¼fen Sie die DNS-AuflÃ¶sung:</p>
<div class="highlight"><pre><span></span><code>dig<span class="w"> </span>beispiel.de
nslookup<span class="w"> </span>beispiel.de
</code></pre></div>
<p>Das Ergebnis sollte auf Ihren BunkerWeb Cloud-Endpunkt verweisen.</p>
<h3 id="dienstkonfiguration">Dienstkonfiguration</h3>
<h4 id="einzelner-dienst">Einzelner Dienst</h4>
<p>FÃ¼r einen einfachen Dienst, der auf Ihrer Infrastruktur gehostet wird:</p>
<p><strong>Konfiguration in der BunkerWeb-UI:</strong></p>
<ol>
<li><strong>Server Name</strong>: <code>beispiel.de</code></li>
<li><strong>Use Reverse Proxy</strong>: <code>yes</code></li>
<li><strong>Reverse Proxy Host</strong>: <code>185.87.1.100:443</code> (Ihre Server-IP)</li>
</ol>
<p>Sie finden alle Konfigurationsoptionen in der <a href="https://docs.bunkerweb.io/latest/settings/#reverse-proxy">Reverse-Proxy-Dokumentation</a></p>
<h4 id="multi-dienste-mit-sni">Multi-Dienste mit SNI</h4>
<h5 id="warum-sni-aktivieren">Warum SNI aktivieren?</h5>
<p>Server Name Indication (SNI) ist <strong>essenziell</strong>, wenn:</p>
<ul>
<li>Mehrere Domains auf dieselbe Backend-Infrastruktur zeigen</li>
<li>Ihre Infrastruktur mehrere Dienste mit unterschiedlichen SSL-Zertifikaten hostet</li>
<li>Sie einen Reverse Proxy/Gateway auf Client-Seite verwenden</li>
</ul>
<h5 id="sni-konfiguration">SNI-Konfiguration</h5>
<p><strong>In der BunkerWeb-UI, fÃ¼r jeden Dienst:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Dienst 1</span>
<span class="nt">SERVICE_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">beispiel-de</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">beispiel.de</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://gateway.intern.domain.com</span>
<span class="nt">REVERSE_PROXY_PORT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="nt">REVERSE_PROXY_SSL_SNI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="nt">REVERSE_PROXY_SSL_SNI_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">beispiel.de</span>

<span class="c1"># Dienst 2</span>
<span class="nt">SERVICE_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anderes-beispiel-de</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anderes-beispiel.de</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://gateway.intern.domain.com</span>
<span class="nt">REVERSE_PROXY_PORT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="nt">REVERSE_PROXY_SSL_SNI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="nt">REVERSE_PROXY_SSL_SNI_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anderes-beispiel.de</span>
</code></pre></div>
<p>Sie finden alle Konfigurationsoptionen in der <a href="https://docs.bunkerweb.io/latest/settings/#reverse-proxy">Reverse-Proxy-Dokumentation</a></p>
<h5 id="technische-details-zu-sni">Technische Details zu SNI</h5>
<p>SNI ermÃ¶glicht BunkerWeb Cloud:</p>
<ol>
<li><strong>Den Zieldienst zu identifizieren</strong> wÃ¤hrend der TLS-Verbindung</li>
<li><strong>Den korrekten Domainnamen</strong> an das Backend zu Ã¼bermitteln</li>
<li><strong>Dem Client-Gateway zu ermÃ¶glichen</strong>, das richtige Zertifikat auszuwÃ¤hlen</li>
<li><strong>Korrekt</strong> zum entsprechenden Dienst zu routen</li>
</ol>
<p><strong>Ohne aktiviertes SNI:</strong></p>
<pre class="mermaid"><code>graph LR
    A[Client] --&gt; B[BunkerWeb]
    B --&gt; C["Gateway (Standardzertifikat)"]
    C --&gt; D[SSL-Fehler]

    style B fill:#f3e5f5,color:#222
    style C fill:#fff3e0,color:#222
    style D fill:#ff4d4d,color:#fff,stroke:#b30000,stroke-width:2px</code></pre>
<p><strong>Mit aktiviertem SNI:</strong></p>
<pre class="mermaid"><code>graph LR
    A[Client] --&gt; B[BunkerWeb]
    B --&gt; C["Gateway (beispiel.de spezifisches Zertifikat)"]
    C --&gt; D[Korrekter Dienst]

    style B fill:#f3e5f5,color:#222
    style C fill:#e8f5e8,color:#222
    style D fill:#e8f5e8,color:#222</code></pre>
<h3 id="ssltls-und-sni-management">SSL/TLS- und SNI-Management</h3>
<h4 id="ssl-zertifikate">SSL-Zertifikate</h4>
<h5 id="auf-seite-von-bunkerweb-cloud">Auf Seite von BunkerWeb Cloud</h5>
<p>BunkerWeb Cloud verwaltet automatisch:</p>
<ul>
<li>Let's Encrypt-Zertifikate fÃ¼r Ihre Domains</li>
<li>Automatische Erneuerung</li>
<li>Optimierte TLS-Konfiguration</li>
</ul>
<h5 id="auf-seite-der-client-infrastruktur">Auf Seite der Client-Infrastruktur</h5>
<p><strong>Wichtige Empfehlungen:</strong></p>
<ol>
<li><strong>Verwenden Sie HTTPS</strong> fÃ¼r die Kommunikation zwischen BunkerWeb und Ihren Diensten</li>
<li><strong>Verwalten Sie Ihre eigenen Zertifikate</strong> auf Ihrer Infrastruktur</li>
<li><strong>Konfigurieren Sie SNI ordnungsgemÃ¤ÃŸ</strong> auf Ihrem Gateway/Reverse Proxy</li>
</ol>
<h4 id="detaillierte-sni-konfiguration">Detaillierte SNI-Konfiguration</h4>
<h5 id="anwendungsfall-infrastruktur-mit-gateway">Anwendungsfall: Infrastruktur mit Gateway</h5>
<p>Wenn Ihre Architektur so aussieht:</p>
<pre class="mermaid"><code>graph LR
    A[BunkerWeb Cloud] --&gt; B[Client Gateway]
    B --&gt; C[Dienst 1]
    B --&gt; D[Dienst 2]
    B --&gt; E[Dienst 3]

    style A fill:#f3e5f5,color:#222
    style B fill:#fff3e0,color:#222
    style C fill:#e8f5e8,color:#222
    style D fill:#e8f5e8,color:#222
    style E fill:#e8f5e8,color:#222</code></pre>
<p><strong>Erforderliche Konfiguration auf BunkerWeb-Seite:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Konfiguration fÃ¼r beispiel.de</span>
<span class="nt">REVERSE_PROXY_SSL_SNI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="nt">REVERSE_PROXY_SSL_SNI_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">beispiel.de</span>
<span class="nt">REVERSE_PROXY_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span><span class="w">  </span><span class="c1"># Bei selbstsigniertem Zertifikat auf Client-Seite</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Host $host</span>

<span class="c1"># Konfiguration fÃ¼r api.beispiel.de</span>
<span class="nt">REVERSE_PROXY_SSL_SNI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="nt">REVERSE_PROXY_SSL_SNI_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.beispiel.de</span>
<span class="nt">REVERSE_PROXY_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Host $host</span>
</code></pre></div>
<h3 id="client-gateway-konfiguration">Client-Gateway-Konfiguration</h3>
<h4 id="ubersicht">Ãœbersicht</h4>
<p>Wenn Ihre Architektur ein Gateway/Reverse Proxy auf der Client-Seite verwendet, um den Verkehr zu mehreren Diensten zu leiten, ist eine spezifische Konfiguration erforderlich, um SNI zu unterstÃ¼tzen und eine sichere Kommunikation mit BunkerWeb Cloud zu gewÃ¤hrleisten.</p>
<h4 id="konfigurationen-nach-technologie">Konfigurationen nach Technologie</h4>
<h5 id="nginx">Nginx</h5>
<details>
<summary>Nginx-Konfiguration</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># Konfiguration zur UnterstÃ¼tzung von SNI mit mehreren Diensten</span>
<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="w"> </span><span class="s">http2</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">beispiel.de</span><span class="p">;</span>

<span class="w">    </span><span class="kn">ssl_certificate</span><span class="w"> </span><span class="s">/path/to/beispiel.de.crt</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w"> </span><span class="s">/path/to/beispiel.de.key</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_protocols</span><span class="w"> </span><span class="s">TLSv1.2</span><span class="w"> </span><span class="s">TLSv1.3</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_ciphers</span><span class="w"> </span><span class="s">ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_prefer_server_ciphers</span><span class="w"> </span><span class="no">off</span><span class="p">;</span>

<span class="w">    </span><span class="c1"># Sicherheits-Header</span>
<span class="w">    </span><span class="kn">add_header</span><span class="w"> </span><span class="s">X-Frame-Options</span><span class="w"> </span><span class="s">DENY</span><span class="p">;</span>
<span class="w">    </span><span class="kn">add_header</span><span class="w"> </span><span class="s">X-Content-Type-Options</span><span class="w"> </span><span class="s">nosniff</span><span class="p">;</span>
<span class="w">    </span><span class="kn">add_header</span><span class="w"> </span><span class="s">X-XSS-Protection</span><span class="w"> </span><span class="s">&quot;1</span><span class="p">;</span><span class="w"> </span><span class="kn">mode=block&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://service1:8080</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Real-IP</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Proto</span><span class="w"> </span><span class="nv">$scheme</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Server</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>

<span class="w">        </span><span class="c1"># Timeouts</span>
<span class="w">        </span><span class="kn">proxy_connect_timeout</span><span class="w"> </span><span class="s">60s</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_send_timeout</span><span class="w"> </span><span class="s">60s</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_read_timeout</span><span class="w"> </span><span class="s">60s</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="w"> </span><span class="s">http2</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">api.beispiel.de</span><span class="p">;</span>

<span class="w">    </span><span class="kn">ssl_certificate</span><span class="w"> </span><span class="s">/path/to/api.beispiel.de.crt</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w"> </span><span class="s">/path/to/api.beispiel.de.key</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_protocols</span><span class="w"> </span><span class="s">TLSv1.2</span><span class="w"> </span><span class="s">TLSv1.3</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_ciphers</span><span class="w"> </span><span class="s">ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_prefer_server_ciphers</span><span class="w"> </span><span class="no">off</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://api-service:3000</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Real-IP</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Proto</span><span class="w"> </span><span class="nv">$scheme</span><span class="p">;</span>

<span class="w">        </span><span class="c1"># API-spezifische Konfiguration</span>
<span class="w">        </span><span class="kn">proxy_buffering</span><span class="w"> </span><span class="no">off</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_request_buffering</span><span class="w"> </span><span class="no">off</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h5 id="traefik">Traefik</h5>
<details>
<summary>Traefik-Konfiguration</summary>

**Mit Docker Compose:**

<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">traefik</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik:v3.0</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--api.dashboard=true</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker=true</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.file.filename=/etc/traefik/dynamic.yml</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.websecure.address=:443</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.myresolver.acme.tlschallenge=true</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.myresolver.acme.email=admin@beispiel.de</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.myresolver.acme.storage=/letsencrypt/acme.json</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:443&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8080:8080&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./letsencrypt:/letsencrypt</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./dynamic.yml:/etc/traefik/dynamic.yml:ro</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.enable=true&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.dashboard.rule=Host(`traefik.beispiel.de`)&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.dashboard.tls.certresolver=myresolver&quot;</span>

<span class="w">  </span><span class="nt">service1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-app:latest</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.enable=true&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.service1.rule=Host(`beispiel.de`)&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.service1.entrypoints=websecure&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.service1.tls.certresolver=myresolver&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.services.service1.loadbalancer.server.port=8080&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.service1.middlewares=security-headers&quot;</span>

<span class="w">  </span><span class="nt">api-service</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-api:latest</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.enable=true&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.api.rule=Host(`api.beispiel.de`)&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.api.entrypoints=websecure&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.api.tls.certresolver=myresolver&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.services.api.loadbalancer.server.port=3000&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.api.middlewares=security-headers,rate-limit&quot;</span>
</code></pre></div>

**Dynamische Konfiguration (dynamic.yml):**

<div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
<span class="w">  </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">    </span><span class="nt">security-headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">        </span><span class="nt">frameDeny</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">contentTypeNosniff</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">browserXssFilter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">forceSTSHeader</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">stsIncludeSubdomains</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">stsPreload</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">stsSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">31536000</span>
<span class="w">        </span><span class="nt">customRequestHeaders</span><span class="p">:</span>
<span class="w">          </span><span class="nt">X-Forwarded-Proto</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https&quot;</span>

<span class="w">    </span><span class="nt">rate-limit</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rateLimit</span><span class="p">:</span>
<span class="w">        </span><span class="nt">burst</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">        </span><span class="nt">average</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>

<span class="w">  </span><span class="nt">routers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">service1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Host(`beispiel.de`)&quot;</span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service1&quot;</span>
<span class="w">      </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">        </span><span class="nt">certResolver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myresolver&quot;</span>
<span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;security-headers&quot;</span>

<span class="w">    </span><span class="nt">api</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Host(`api.beispiel.de`)&quot;</span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api-service&quot;</span>
<span class="w">      </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">        </span><span class="nt">certResolver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myresolver&quot;</span>
<span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;security-headers&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;rate-limit&quot;</span>

<span class="w">  </span><span class="nt">services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">service1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">loadBalancer</span><span class="p">:</span>
<span class="w">        </span><span class="nt">servers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://service1:8080&quot;</span>
<span class="w">        </span><span class="nt">healthCheck</span><span class="p">:</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/health&quot;</span>
<span class="w">          </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30s&quot;</span>

<span class="w">    </span><span class="nt">api-service</span><span class="p">:</span>
<span class="w">      </span><span class="nt">loadBalancer</span><span class="p">:</span>
<span class="w">        </span><span class="nt">servers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://api-service:3000&quot;</span>
<span class="w">        </span><span class="nt">healthCheck</span><span class="p">:</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/health&quot;</span>
<span class="w">          </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30s&quot;</span>
</code></pre></div>

</details>

<h5 id="apache">Apache</h5>
<details>
<summary>Apache-Konfiguration</summary>

<div class="highlight"><pre><span></span><code><span class="c"># Apache-Konfiguration mit SNI</span>
<span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:443</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>beispiel.de
<span class="w">    </span><span class="nb">DocumentRoot</span><span class="w"> </span><span class="sx">/var/www/html</span>

<span class="w">    </span><span class="c"># SSL-Konfiguration</span>
<span class="w">    </span><span class="nb">SSLEngine</span><span class="w"> </span><span class="k">on</span>
<span class="w">    </span><span class="nb">SSLProtocol</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>-SSLv3<span class="w"> </span>-TLSv1<span class="w"> </span>-TLSv1.1
<span class="w">    </span><span class="nb">SSLCipherSuite</span><span class="w"> </span>ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
<span class="w">    </span><span class="nb">SSLHonorCipherOrder</span><span class="w"> </span><span class="k">off</span>
<span class="w">    </span><span class="nb">SSLCertificateFile</span><span class="w"> </span><span class="sx">/path/to/beispiel.de.crt</span>
<span class="w">    </span><span class="nb">SSLCertificateKeyFile</span><span class="w"> </span><span class="sx">/path/to/beispiel.de.key</span>

<span class="w">    </span><span class="c"># Sicherheits-Header</span>
<span class="w">    </span><span class="nb">Header</span><span class="w"> </span>always<span class="w"> </span>set<span class="w"> </span>X-Frame-Options<span class="w"> </span>DENY
<span class="w">    </span><span class="nb">Header</span><span class="w"> </span>always<span class="w"> </span>set<span class="w"> </span>X-Content-Type-Options<span class="w"> </span>nosniff
<span class="w">    </span><span class="nb">Header</span><span class="w"> </span>always<span class="w"> </span>set<span class="w"> </span>X-XSS-Protection<span class="w"> </span><span class="s2">&quot;1; mode=block&quot;</span>
<span class="w">    </span><span class="nb">Header</span><span class="w"> </span>always<span class="w"> </span>set<span class="w"> </span>Strict-Transport-Security<span class="w"> </span><span class="s2">&quot;max-age=31536000; includeSubDomains&quot;</span>

<span class="w">    </span><span class="c"># Reverse-Proxy-Konfiguration</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPreserveHost</span><span class="w"> </span><span class="k">On</span>

<span class="w">    </span><span class="c"># Benutzerdefinierte Header</span>
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPassReverseInterpolateEnv</span><span class="w"> </span><span class="k">On</span>

<span class="w">    </span><span class="nt">&lt;Proxy</span><span class="w"> </span><span class="s">*</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="w">    </span><span class="nt">&lt;/Proxy&gt;</span>

<span class="w">    </span><span class="c"># Protokolle</span>
<span class="w">    </span><span class="nb">ErrorLog</span><span class="w"> </span>${APACHE_LOG_DIR}/beispiel.de_error.log
<span class="w">    </span><span class="nb">CustomLog</span><span class="w"> </span>${APACHE_LOG_DIR}/beispiel.de_access.log<span class="w"> </span>combined
<span class="nt">&lt;/VirtualHost&gt;</span>

<span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:443</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>api.beispiel.de

<span class="w">    </span><span class="nb">SSLEngine</span><span class="w"> </span><span class="k">on</span>
<span class="w">    </span><span class="nb">SSLProtocol</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>-SSLv3<span class="w"> </span>-TLSv1<span class="w"> </span>-TLSv1.1
<span class="w">    </span><span class="nb">SSLCipherSuite</span><span class="w"> </span>ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
<span class="w">    </span><span class="nb">SSLCertificateFile</span><span class="w"> </span><span class="sx">/path/to/api.beispiel.de.crt</span>
<span class="w">    </span><span class="nb">SSLCertificateKeyFile</span><span class="w"> </span><span class="sx">/path/to/api.beispiel.de.key</span>

<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>/<span class="w"> </span>http://api-service:3000/
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://api-service:3000/
<span class="w">    </span><span class="nb">ProxyPreserveHost</span><span class="w"> </span><span class="k">On</span>

<span class="w">    </span><span class="c"># API-spezifische Konfiguration</span>
<span class="w">    </span><span class="nb">ProxyTimeout</span><span class="w"> </span><span class="m">300</span>
<span class="w">    </span><span class="nb">ProxyBadHeader</span><span class="w"> </span>Ignore

<span class="w">    </span><span class="nb">ErrorLog</span><span class="w"> </span>${APACHE_LOG_DIR}/api.beispiel.de_error.log
<span class="w">    </span><span class="nb">CustomLog</span><span class="w"> </span>${APACHE_LOG_DIR}/api.beispiel.de_access.log<span class="w"> </span>combined
<span class="nt">&lt;/VirtualHost&gt;</span>

<span class="c"># Erforderliche Modulkonfiguration</span>
<span class="nb">LoadModule</span><span class="w"> </span>ssl_module<span class="w"> </span>modules/mod_ssl.so
<span class="nb">LoadModule</span><span class="w"> </span>proxy_module<span class="w"> </span>modules/mod_proxy.so
<span class="nb">LoadModule</span><span class="w"> </span>proxy_http_module<span class="w"> </span>modules/mod_proxy_http.so
<span class="nb">LoadModule</span><span class="w"> </span>headers_module<span class="w"> </span>modules/mod_headers.so
</code></pre></div>

</details>

<h5 id="haproxy">HAProxy</h5>
<details>
<summary>HAProxy-Konfiguration</summary>

<div class="highlight"><pre><span></span><code>global
    maxconn 4096
    log stdout local0
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

    # SSL-Konfiguration
    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    option dontlognull
    option redispatch
    retries 3
    maxconn 2000

frontend https_frontend
    bind *:443 ssl crt /etc/ssl/certs/beispiel.de.pem crt /etc/ssl/certs/api.beispiel.de.pem

    # Sicherheits-Header
    http-response set-header X-Frame-Options DENY
    http-response set-header X-Content-Type-Options nosniff
    http-response set-header X-XSS-Protection &quot;1; mode=block&quot;
    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;

    # SNI-basiertes Routing
    acl is_beispiel hdr(host) -i beispiel.de
    acl is_api hdr(host) -i api.beispiel.de

    use_backend service1_backend if is_beispiel
    use_backend api_backend if is_api

    default_backend service1_backend

backend service1_backend
    balance roundrobin
    option httpchk GET /health
    http-check expect status 200

    server service1-1 service1:8080 check
    server service1-2 service1-backup:8080 check backup

backend api_backend
    balance roundrobin
    option httpchk GET /api/health
    http-check expect status 200

    server api-1 api-service:3000 check
    server api-2 api-service-backup:3000 check backup

# Statistik-Schnittstelle (optional)
listen stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE
</code></pre></div>

</details>

<h4 id="validierung-der-ssl-konfiguration">Validierung der SSL-Konfiguration</h4>
<p>SSL-Konfiguration testen:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># SSL-KonnektivitÃ¤tstest</span>
openssl<span class="w"> </span>s_client<span class="w"> </span>-connect<span class="w"> </span>ihre-domain.de:443<span class="w"> </span>-servername<span class="w"> </span>ihre-domain.de

<span class="c1"># Header-ÃœberprÃ¼fung</span>
curl<span class="w"> </span>-I<span class="w"> </span>https://ihre-domain.de

<span class="c1"># SNI-Test</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: beispiel.de&quot;</span><span class="w"> </span>https://54984654.bunkerweb.cloud
</code></pre></div>
<h4 id="best-practices-fur-gateways">Best Practices fÃ¼r Gateways</h4>
<ol>
<li><strong>Health Checks</strong>: Konfigurieren Sie IntegritÃ¤tsprÃ¼fungen fÃ¼r Ihre Dienste</li>
<li><strong>Lastenausgleich</strong>: Verwenden Sie mehrere Instanzen fÃ¼r HochverfÃ¼gbarkeit</li>
<li><strong>Ãœberwachung</strong>: Ãœberwachen Sie Ihre Gateway-Metriken</li>
<li><strong>Sicherheits-Header</strong>: FÃ¼gen Sie geeignete Sicherheits-Header hinzu</li>
<li><strong>Timeouts</strong>: Konfigurieren Sie angemessene Timeouts, um Blockierungen zu vermeiden</li>
</ol>
<h3 id="bunkerweb-cloud-ip-whitelist">BunkerWeb Cloud IP-Whitelist</h3>
<h4 id="warum-eine-whitelist-konfigurieren">Warum eine Whitelist konfigurieren?</h4>
<p>Um Ihre Infrastruktur weiter zu sichern, wird empfohlen, eine Whitelist von BunkerWeb Cloud-IP-Adressen auf der Seite der Client-Infrastruktur zu konfigurieren. Dadurch wird sichergestellt, dass nur Datenverkehr von BunkerWeb Cloud Ihre Backend-Dienste erreichen kann.</p>
<p>Wir empfehlen das Whitelisting auf Firewall-Ebene (iptables usw.).</p>
<h4 id="bunkerweb-cloud-ip-adressen-zur-whitelist-hinzufugen">BunkerWeb Cloud IP-Adressen zur Whitelist hinzufÃ¼gen</h4>
<p><strong>Liste der zuzulassenden IP-Adressen:</strong></p>
<p>Aktualisierte Liste ist hier verfÃ¼gbar: https://repo.bunkerweb.io/cloud/ips</p>
<div class="highlight"><pre><span></span><code># BunkerWeb Cloud IP-Adressen
4.233.128.18
20.19.161.132
</code></pre></div>
<h4 id="whitelist-konfiguration-nach-technologie">Whitelist-Konfiguration nach Technologie</h4>
<h5 id="nginx_1">Nginx</h5>
<details>
<summary>Nginx-Konfiguration</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># In Ihrer Serverkonfiguration</span>
<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">beispiel.de</span><span class="p">;</span>

<span class="w">    </span><span class="c1"># BunkerWeb Cloud IP-Whitelist</span>
<span class="w">    </span><span class="kn">allow</span><span class="w"> </span><span class="mi">192</span><span class="s">.168.1.0/24</span><span class="p">;</span>
<span class="w">    </span><span class="kn">allow</span><span class="w"> </span><span class="mi">10</span><span class="s">.0.0.0/16</span><span class="p">;</span>
<span class="w">    </span><span class="kn">allow</span><span class="w"> </span><span class="mi">172</span><span class="s">.16.0.0/12</span><span class="p">;</span>
<span class="w">    </span><span class="kn">deny</span><span class="w"> </span><span class="s">all</span><span class="p">;</span>

<span class="w">    </span><span class="kn">ssl_certificate</span><span class="w"> </span><span class="s">/path/to/beispiel.de.crt</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w"> </span><span class="s">/path/to/beispiel.de.key</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://service1:8080</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Real-IP</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Konfiguration mit Geo-Modul fÃ¼r mehr FlexibilitÃ¤t</span>
<span class="k">geo</span><span class="w"> </span><span class="nv">$bunkerweb_ip</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kn">192.168.1.0/24</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">10.0.0.0/16</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kn">172.16.0.0/12</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">beispiel.de</span><span class="p">;</span>

<span class="w">    </span><span class="kn">if</span><span class="w"> </span><span class="s">(</span><span class="nv">$bunkerweb_ip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="s">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">return</span><span class="w"> </span><span class="mi">403</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1"># ... Rest der Konfiguration</span>
<span class="p">}</span>
</code></pre></div>

</details>

<h5 id="traefik_1">Traefik</h5>
<details>
<summary>Traefik-Konfiguration</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># Konfiguration in dynamic.yml</span>
<span class="nt">http</span><span class="p">:</span>
<span class="w">  </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bunkerweb-whitelist</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ipWhiteList</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sourceRange</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;10.0.0.0/16&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;172.16.0.0/12&quot;</span>
<span class="w">        </span><span class="nt">ipStrategy</span><span class="p">:</span>
<span class="w">          </span><span class="nt">depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">  </span><span class="nt">routers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">beispiel-router</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Host(`beispiel.de`)&quot;</span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;beispiel-service&quot;</span>
<span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb-whitelist&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;security-headers&quot;</span>
<span class="w">      </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">        </span><span class="nt">certResolver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myresolver&quot;</span>

<span class="w">    </span><span class="nt">api-router</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Host(`api.beispiel.de`)&quot;</span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api-service&quot;</span>
<span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb-whitelist&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;security-headers&quot;</span>
<span class="w">      </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">        </span><span class="nt">certResolver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myresolver&quot;</span>
</code></pre></div>

**Mit Docker Compose-Labels:**

<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">service1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-app:latest</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.enable=true&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.service1.rule=Host(`beispiel.de`)&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.service1.middlewares=bunkerweb-whitelist&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.middlewares.bunkerweb-whitelist.ipwhitelist.sourcerange=192.168.1.0/24,10.0.0.0/16,172.16.0.0/12&quot;</span>
</code></pre></div>

</details>

<h5 id="apache_1">Apache</h5>
<details>
<summary>Apache-Konfiguration</summary>

<div class="highlight"><pre><span></span><code><span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:443</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>beispiel.de

<span class="w">    </span><span class="c"># BunkerWeb Cloud IP-Whitelist</span>
<span class="w">    </span><span class="nt">&lt;RequireAll&gt;</span>
<span class="w">        </span><span class="nb">Require</span><span class="w"> </span>ip<span class="w"> </span><span class="m">192.168.1.0/24</span>
<span class="w">        </span><span class="nb">Require</span><span class="w"> </span>ip<span class="w"> </span><span class="m">10.0.0.0/16</span>
<span class="w">        </span><span class="nb">Require</span><span class="w"> </span>ip<span class="w"> </span><span class="m">172.16.0.0/12</span>
<span class="w">    </span><span class="nt">&lt;/RequireAll&gt;</span>

<span class="w">    </span><span class="nb">SSLEngine</span><span class="w"> </span><span class="k">on</span>
<span class="w">    </span><span class="nb">SSLCertificateFile</span><span class="w"> </span><span class="sx">/path/to/beispiel.de.crt</span>
<span class="w">    </span><span class="nb">SSLCertificateKeyFile</span><span class="w"> </span><span class="sx">/path/to/beispiel.de.key</span>

<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPreserveHost</span><span class="w"> </span><span class="k">On</span>

<span class="w">    </span><span class="c"># Konfiguration fÃ¼r verweigerte Zugriffsprotokolle</span>
<span class="w">    </span><span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %O \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot;</span><span class="w"> </span>combined
<span class="w">    </span><span class="nb">CustomLog</span><span class="w"> </span>logs/access.log<span class="w"> </span>combined
<span class="w">    </span><span class="nb">ErrorLog</span><span class="w"> </span>logs/error.log
<span class="nt">&lt;/VirtualHost&gt;</span>

<span class="c"># Alternative Konfiguration mit mod_authz_core</span>
<span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:443</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>api.beispiel.de

<span class="w">    </span><span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;RequireAny&gt;</span>
<span class="w">            </span><span class="nb">Require</span><span class="w"> </span>ip<span class="w"> </span><span class="m">192.168.1.0/24</span>
<span class="w">            </span><span class="nb">Require</span><span class="w"> </span>ip<span class="w"> </span><span class="m">10.0.0.0/16</span>
<span class="w">            </span><span class="nb">Require</span><span class="w"> </span>ip<span class="w"> </span><span class="m">172.16.0.0/12</span>
<span class="w">        </span><span class="nt">&lt;/RequireAny&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Directory&gt;</span>

<span class="w">    </span><span class="c"># ... Rest der Konfiguration</span>
<span class="nt">&lt;/VirtualHost&gt;</span>
</code></pre></div>

</details>

<h5 id="haproxy_1">HAProxy</h5>
<details>
<summary>HAProxy-Konfiguration</summary>

<div class="highlight"><pre><span></span><code># Konfiguration in haproxy.cfg
frontend bunkerweb_frontend
    bind *:443 ssl crt /path/to/certificates/

    # ACL fÃ¼r BunkerWeb Cloud Whitelist
    acl bunkerweb_ips src 192.168.1.0/24 10.0.0.0/16 172.16.0.0/12

    # Alles blockieren auÃŸer BunkerWeb Cloud
    http-request deny unless bunkerweb_ips

    # Sicherheits-Header
    http-response set-header X-Frame-Options DENY
    http-response set-header X-Content-Type-Options nosniff

    # Routing
    acl is_beispiel hdr(host) -i beispiel.de
    acl is_api hdr(host) -i api.beispiel.de

    use_backend app_servers if is_beispiel
    use_backend api_servers if is_api

    default_backend app_servers

backend app_servers
    balance roundrobin
    server app1 service1:8080 check
    server app2 service2:8080 check

backend api_servers
    balance roundrobin
    server api1 api-service:3000 check
    server api2 api-service-backup:3000 check
</code></pre></div>

</details>

<h5 id="system-firewall-iptables">System-Firewall (iptables)</h5>
<details>
<summary>iptables-Konfiguration</summary>

<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># iptables-Konfigurationsskript fÃ¼r BunkerWeb Cloud Whitelist</span>

<span class="c1"># Vorhandene Regeln lÃ¶schen</span>
iptables<span class="w"> </span>-F
iptables<span class="w"> </span>-X

<span class="c1"># Standardrichtlinien</span>
iptables<span class="w"> </span>-P<span class="w"> </span>INPUT<span class="w"> </span>DROP
iptables<span class="w"> </span>-P<span class="w"> </span>FORWARD<span class="w"> </span>DROP
iptables<span class="w"> </span>-P<span class="w"> </span>OUTPUT<span class="w"> </span>ACCEPT

<span class="c1"># Loopback zulassen</span>
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-i<span class="w"> </span>lo<span class="w"> </span>-j<span class="w"> </span>ACCEPT

<span class="c1"># Etablierte Verbindungen zulassen</span>
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-m<span class="w"> </span>state<span class="w"> </span>--state<span class="w"> </span>ESTABLISHED,RELATED<span class="w"> </span>-j<span class="w"> </span>ACCEPT

<span class="c1"># BunkerWeb Cloud-IPs fÃ¼r HTTPS zulassen</span>
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">443</span><span class="w"> </span>-s<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>-j<span class="w"> </span>ACCEPT
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">443</span><span class="w"> </span>-s<span class="w"> </span><span class="m">10</span>.0.0.0/16<span class="w"> </span>-j<span class="w"> </span>ACCEPT
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">443</span><span class="w"> </span>-s<span class="w"> </span><span class="m">172</span>.16.0.0/12<span class="w"> </span>-j<span class="w"> </span>ACCEPT

<span class="c1"># HTTP fÃ¼r Let&#39;s Encrypt zulassen (optional)</span>
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">80</span><span class="w"> </span>-j<span class="w"> </span>ACCEPT

<span class="c1"># SSH zulassen (an Ihre BedÃ¼rfnisse anpassen)</span>
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-p<span class="w"> </span>tcp<span class="w"> </span>--dport<span class="w"> </span><span class="m">22</span><span class="w"> </span>-j<span class="w"> </span>ACCEPT

<span class="c1"># Protokolle fÃ¼r Debugging</span>
iptables<span class="w"> </span>-A<span class="w"> </span>INPUT<span class="w"> </span>-j<span class="w"> </span>LOG<span class="w"> </span>--log-prefix<span class="w"> </span><span class="s2">&quot;DROPPED: &quot;</span>

<span class="c1"># Regeln speichern</span>
iptables-save<span class="w"> </span>&gt;<span class="w"> </span>/etc/iptables/rules.v4

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;iptables-Konfiguration erfolgreich angewendet&quot;</span>
</code></pre></div>

</details>

<h4 id="whitelist-best-practices">Whitelist Best Practices</h4>
<ol>
<li><strong>Ablehnungen Ã¼berwachen</strong>: Ãœberwachen Sie blockierte Zugriffsversuche</li>
<li><strong>RegelmÃ¤ÃŸige Updates</strong>: Halten Sie die IP-Liste aktuell</li>
<li><strong>RegelmÃ¤ÃŸige Tests</strong>: Validieren Sie, dass die Whitelist korrekt funktioniert</li>
<li><strong>Dokumentation</strong>: Dokumentieren Sie IP-Ã„nderungen</li>
<li><strong>Alarmierung</strong>: Konfigurieren Sie Alarme fÃ¼r BunkerWeb-IP-Ã„nderungen</li>
<li><strong>Backup</strong>: Bewahren Sie eine Backup-Konfiguration fÃ¼r den Fall von Problemen auf</li>
</ol>
<h3 id="real_ip-konfiguration-und-client-adresswiederherstellung">REAL_IP-Konfiguration und Client-Adresswiederherstellung</h3>
<h4 id="warum-real_ip-konfigurieren">Warum REAL_IP konfigurieren?</h4>
<p>Wenn Sie BunkerWeb Cloud als Reverse Proxy verwenden, sind die IP-Adressen, die Ihre Backend-Anwendungen sehen, die von BunkerWeb Cloud und nicht die der echten Clients. Um die echten Client-IP-Adressen abzurufen, ist eine spezifische Konfiguration erforderlich.</p>
<h4 id="konfiguration-auf-seite-von-bunkerweb-cloud">Konfiguration auf Seite von BunkerWeb Cloud</h4>
<p>In der BunkerWeb-UI konfigurieren Sie Real IP:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"> </span><span class="c1"># Standard ist no</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.0/16 172.16.0.0/12 10.0.0.0/8</span><span class="w"> </span><span class="c1"># Standard</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X-Forwarded-For</span><span class="w"> </span><span class="c1"># Standard</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"> </span><span class="c1"># Standard</span>
<span class="c1"># Beispiel, wenn Sie auch Cloudflare Proxy vor BunkerWeb verwenden</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://www.cloudflare.com/ips-v4/ https://www.cloudflare.com/ips-v6/</span>
</code></pre></div>
<p>Sie finden alle Konfigurationsoptionen in der <a href="https://docs.bunkerweb.io/latest/settings/#real-ip">Dokumentation Real Ip</a></p>
<h4 id="konfiguration-auf-seite-der-client-infrastruktur">Konfiguration auf Seite der Client-Infrastruktur</h4>
<h5 id="nginx_2">Nginx</h5>
<details>
<summary>Nginx-Konfiguration fÃ¼r REAL_IP</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># VertrauenswÃ¼rdige IP-Adressen konfigurieren (BunkerWeb Cloud)</span>
<span class="k">set_real_ip_from</span><span class="w"> </span><span class="mi">4</span><span class="s">.233.128.18/32</span>
<span class="s">set_real_ip_from</span><span class="w"> </span><span class="mi">20</span><span class="s">.19.161.132/32</span>

<span class="c1"># Header zur Ermittlung der echten IP verwenden</span>
<span class="s">real_ip_header</span><span class="w"> </span><span class="s">X-Real-IP</span><span class="p">;</span>

<span class="c1"># Alternative mit X-Forwarded-For</span>
<span class="c1"># real_ip_header X-Forwarded-For;</span>

<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="w"> </span><span class="s">http2</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">beispiel.de</span><span class="p">;</span>

<span class="w">    </span><span class="c1"># SSL-Konfiguration</span>
<span class="w">    </span><span class="kn">ssl_certificate</span><span class="w"> </span><span class="s">/path/to/beispiel.de.crt</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w"> </span><span class="s">/path/to/beispiel.de.key</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://service1:8080</span><span class="p">;</span>

<span class="w">        </span><span class="c1"># Echte IP-Header an das Backend weiterleiten</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Real-IP</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Proto</span><span class="w"> </span><span class="nv">$scheme</span><span class="p">;</span>

<span class="w">        </span><span class="c1"># Protokoll mit echter Client-IP</span>
<span class="w">        </span><span class="kn">access_log</span><span class="w"> </span><span class="s">/var/log/nginx/access.log</span><span class="w"> </span><span class="s">combined</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Benutzerdefiniertes Protokollformat mit echter IP</span>
<span class="k">log_format</span><span class="w"> </span><span class="s">real_ip</span><span class="w"> </span><span class="s">&#39;</span><span class="nv">$remote_addr</span><span class="w"> </span><span class="s">-</span><span class="w"> </span><span class="nv">$remote_user</span><span class="w"> </span><span class="s">[</span><span class="nv">$time_local]</span><span class="w"> </span><span class="s">&#39;</span>
<span class="w">                   </span><span class="s">&#39;&quot;</span><span class="nv">$request&quot;</span><span class="w"> </span><span class="nv">$status</span><span class="w"> </span><span class="nv">$body_bytes_sent</span><span class="w"> </span><span class="s">&#39;</span>
<span class="w">                   </span><span class="s">&#39;&quot;</span><span class="nv">$http_referer&quot;</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$http_user_agent&quot;</span><span class="w"> </span><span class="s">&#39;</span>
<span class="w">                   </span><span class="s">&#39;real_ip=&quot;</span><span class="nv">$realip_remote_addr&quot;&#39;</span><span class="p">;</span>
</code></pre></div>

</details>

<h5 id="apache_2">Apache</h5>
<details>
<summary>Apache-Konfiguration fÃ¼r REAL_IP</summary>

<div class="highlight"><pre><span></span><code><span class="c"># Modul mod_remoteip laden</span>
<span class="nb">LoadModule</span><span class="w"> </span>remoteip_module<span class="w"> </span>modules/mod_remoteip.so

<span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:443</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>beispiel.de

<span class="w">    </span><span class="c"># SSL-Konfiguration</span>
<span class="w">    </span><span class="nb">SSLEngine</span><span class="w"> </span><span class="k">on</span>
<span class="w">    </span><span class="nb">SSLCertificateFile</span><span class="w"> </span><span class="sx">/path/to/beispiel.de.crt</span>
<span class="w">    </span><span class="nb">SSLCertificateKeyFile</span><span class="w"> </span><span class="sx">/path/to/beispiel.de.key</span>

<span class="w">    </span><span class="c"># VertrauenswÃ¼rdige IP-Adressen konfigurieren</span>
<span class="w">    </span><span class="nb">RemoteIPHeader</span><span class="w"> </span>X-Real-IP
<span class="w">    </span><span class="nb">RemoteIPTrustedProxy</span><span class="w"> </span><span class="m">4.233.128.18/32</span>
<span class="w">    </span><span class="nb">RemoteIPTrustedProxy</span><span class="w"> </span><span class="m">20.19.161.132/32</span>

<span class="w">    </span><span class="c"># Alternative mit X-Forwarded-For</span>
<span class="w">    </span><span class="c"># RemoteIPHeader X-Forwarded-For</span>

<span class="w">    </span><span class="c"># Reverse-Proxy-Konfiguration</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPreserveHost</span><span class="w"> </span><span class="k">On</span>

<span class="w">    </span><span class="c"># IP-Header weiterleiten</span>
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://service1:8080/
<span class="w">    </span><span class="nb">ProxyPassReverseInterpolateEnv</span><span class="w"> </span><span class="k">On</span>

<span class="w">    </span><span class="c"># Protokolle mit echter IP</span>
<span class="w">    </span><span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%a %l %u %t \&quot;%r\&quot; %&gt;s %O \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot;</span><span class="w"> </span>combined_real_ip
<span class="w">    </span><span class="nb">CustomLog</span><span class="w"> </span>logs/access.log<span class="w"> </span>combined_real_ip
<span class="w">    </span><span class="nb">ErrorLog</span><span class="w"> </span>logs/error.log
<span class="nt">&lt;/VirtualHost&gt;</span>
</code></pre></div>

</details>

<h5 id="haproxy_2">HAProxy</h5>
<details>
<summary>HAProxy-Konfiguration fÃ¼r REAL_IP</summary>

<div class="highlight"><pre><span></span><code>global
    maxconn 4096
    log stdout local0

defaults
    mode http
    option httplog
    option dontlognull
    option forwardfor

    # Protokollformat mit echter IP
    log-format &quot;%ci:%cp [%t] %ft %b/%s %Tq/%Tw/%Tc/%Tr/%Ta %ST %B %CC %CS %tsc %ac/%fc/%bc/%sc/%rc %sq/%bq %hr %hs %{+Q}r&quot;

frontend https_frontend
    bind *:443 ssl crt /etc/ssl/certs/

    # BunkerWeb Cloud IP-Whitelist
    acl bunkerweb_ips src 4.233.128.18/32 20.19.161.132/32
    http-request deny unless bunkerweb_ips

    # Echte IP aus Headern erfassen
    capture request header X-Real-IP len 15
    capture request header X-Forwarded-For len 50

    # Routing
    acl is_beispiel hdr(host) -i beispiel.de
    use_backend app_servers if is_beispiel

    default_backend app_servers

backend app_servers
    balance roundrobin

    # Echte IP-Header hinzufÃ¼gen/erhalten
    http-request set-header X-Original-Forwarded-For %[req.hdr(X-Forwarded-For)]
    http-request set-header X-Client-IP %[req.hdr(X-Real-IP)]

    server app1 service1:8080 check
    server app2 service2:8080 check backup
</code></pre></div>

</details>

<h5 id="traefik_2">Traefik</h5>
<details>
<summary>Traefik-Konfiguration fÃ¼r REAL_IP</summary>

<div class="highlight"><pre><span></span><code><span class="c1"># Konfiguration in dynamic.yml</span>
<span class="nt">http</span><span class="p">:</span>
<span class="w">  </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">    </span><span class="nt">real-ip</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ipWhiteList</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sourceRange</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;4.233.128.18/32&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;20.19.161.132/32&quot;</span>
<span class="w">        </span><span class="nt">ipStrategy</span><span class="p">:</span>
<span class="w">          </span><span class="nt">depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">  </span><span class="c1"># Anzahl der vertrauenswÃ¼rdigen Proxies</span>
<span class="w">          </span><span class="nt">excludedIPs</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;127.0.0.1/32&quot;</span>

<span class="w">  </span><span class="nt">routers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">beispiel-router</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Host(`beispiel.de`)&quot;</span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;beispiel-service&quot;</span>
<span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;real-ip&quot;</span>
<span class="w">      </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">        </span><span class="nt">certResolver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myresolver&quot;</span>

<span class="w">  </span><span class="nt">services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">beispiel-service</span><span class="p">:</span>
<span class="w">      </span><span class="nt">loadBalancer</span><span class="p">:</span>
<span class="w">        </span><span class="nt">servers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://service1:8080&quot;</span>
<span class="w">        </span><span class="nt">passHostHeader</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>

**Konfiguration in traefik.yml (statisch):**

<div class="highlight"><pre><span></span><code><span class="nt">entryPoints</span><span class="p">:</span>
<span class="w">  </span><span class="nt">websecure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;:443&quot;</span>
<span class="w">    </span><span class="nt">forwardedHeaders</span><span class="p">:</span>
<span class="w">      </span><span class="nt">trustedIPs</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;4.233.128.18/32&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;20.19.161.132/32&quot;</span>
<span class="w">      </span><span class="nt">insecure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">accessLog</span><span class="p">:</span>
<span class="w">  </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">  </span><span class="nt">fields</span><span class="p">:</span>
<span class="w">    </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keep</span>
<span class="w">    </span><span class="nt">names</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ClientUsername</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drop</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keep</span>
<span class="w">      </span><span class="nt">names</span><span class="p">:</span>
<span class="w">        </span><span class="nt">X-Real-IP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keep</span>
<span class="w">        </span><span class="nt">X-Forwarded-For</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keep</span>
</code></pre></div>

</details>

<h4 id="tests-und-validierung">Tests und Validierung</h4>
<h5 id="konfigurationsuberprufung_1">KonfigurationsÃ¼berprÃ¼fung</h5>
<div class="highlight"><pre><span></span><code><span class="c1"># Test 1: Empfangene Header prÃ¼fen</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Real-IP: 203.0.113.1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;X-Forwarded-For: 203.0.113.1, 192.168.1.100&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>https://beispiel.de/test-ip

<span class="c1"># Test 2: Protokolle analysieren</span>
tail<span class="w"> </span>-f<span class="w"> </span>/var/log/nginx/access.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;203.0.113.1&quot;</span>

<span class="c1"># Test 3: Test von verschiedenen Quellen</span>
curl<span class="w"> </span>-v<span class="w"> </span>https://beispiel.de/whatismyip
</code></pre></div>
<h4 id="real_ip-best-practices">REAL_IP Best Practices</h4>
<ol>
<li><strong>Sicherheit</strong>: Vertrauen Sie nur IP-Headern von bekannten Quellen (BunkerWeb Cloud)</li>
<li><strong>Validierung</strong>: Validieren Sie immer die in Headern empfangenen IP-Adressen</li>
<li><strong>Protokollierung</strong>: Protokollieren Sie sowohl Proxy-IP als auch echte IP fÃ¼r das Debugging</li>
<li><strong>Fallback</strong>: Haben Sie immer einen Standardwert, wenn Header fehlen</li>
<li><strong>Tests</strong>: Testen Sie regelmÃ¤ÃŸig, ob die IP-Erkennung korrekt funktioniert</li>
<li><strong>Ãœberwachung</strong>: Ãœberwachen Sie IP-Muster, um Anomalien zu erkennen</li>
</ol>
<h4 id="real_ip-fehlerbehebung">REAL_IP-Fehlerbehebung</h4>
<h5 id="haufige-probleme">HÃ¤ufige Probleme</h5>
<ol>
<li><strong>IP zeigt immer die von BunkerWeb</strong>: ÃœberprÃ¼fen Sie die Konfiguration der vertrauenswÃ¼rdigen Proxies</li>
<li><strong>Fehlende Header</strong>: ÃœberprÃ¼fen Sie die Konfiguration auf Seite von BunkerWeb Cloud</li>
<li><strong>UngÃ¼ltige IPs</strong>: Implementieren Sie eine strikte IP-Validierung</li>
<li><strong>Falsche Protokolle</strong>: ÃœberprÃ¼fen Sie das Protokollformat und die real_ip-Modulkonfiguration</li>
</ol>
<h5 id="diagnosebefehle">Diagnosebefehle</h5>
<p><strong>IP-Erkennung testen</strong></p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Real-IP: 1.2.3.4&quot;</span><span class="w"> </span>https://ihre-domain.de/debug-headers
</code></pre></div>
<h3 id="uberwachung-und-observabilitat">Ãœberwachung und ObservabilitÃ¤t</h3>
<h4 id="grafana-zugang">Grafana-Zugang</h4>
<p>Ihre verwaltete Grafana-Instanz gibt Ihnen Zugriff auf:</p>
<h5 id="verfugbare-metriken">VerfÃ¼gbare Metriken</h5>
<ol>
<li>
<p><strong>VerkehrsÃ¼bersicht</strong></p>
</li>
<li>
<p>Anfragen pro Sekunde</p>
</li>
<li>HTTP-Statuscodes</li>
<li>Anfragen-Geolokalisierung</li>
<li>
<p><strong>Sicherheit</strong></p>
</li>
<li>
<p>Blockierte Angriffsversuche</p>
</li>
<li>Erkannte Bedrohungstypen</li>
<li>AusgelÃ¶ste WAF-Regeln</li>
<li>
<p><strong>Leistungsmetriken</strong></p>
</li>
<li>
<p>Anfragelatenz</p>
</li>
<li>Backend-Antwortzeit</li>
<li>Ressourcennutzung</li>
</ol>
<h5 id="verfugbare-protokolle">VerfÃ¼gbare Protokolle</h5>
<ol>
<li><strong>Access Logs</strong>: Alle HTTP/HTTPS-Anfragen</li>
<li><strong>Security Logs</strong>: Sicherheitsereignisse und Blockierungen</li>
<li><strong>Error Logs</strong>: Anwendungs- und Systemfehler</li>
</ol>
<h5 id="alarmkonfiguration">Alarmkonfiguration</h5>
<p>Konfigurieren Sie Grafana-Alarme fÃ¼r:</p>
<ul>
<li>Abnormale Verkehrsspitzen</li>
<li>Anstieg von 5xx-Fehlern</li>
<li>Erkennung von DDoS-Angriffen</li>
<li>Backend-Gesundheitsfehler</li>
</ul>
<h3 id="best-practices">Best Practices</h3>
<h4 id="sicherheit">Sicherheit</h4>
<ol>
<li><strong>Verwenden Sie HTTPS</strong> fÃ¼r die gesamte Backend-Kommunikation</li>
<li><strong>Implementieren Sie eine IP-Whitelist</strong>, wenn mÃ¶glich</li>
<li><strong>Konfigurieren Sie angemessene Timeouts</strong></li>
<li><strong>Aktivieren Sie Komprimierung</strong>, um die Leistung zu optimieren</li>
</ol>
<h4 id="leistung">Leistung</h4>
<ol>
<li><strong>Optimieren Sie die Cache-Konfiguration</strong></li>
<li><strong>Verwenden Sie HTTP/2</strong> auf Client-Seite</li>
<li><strong>Konfigurieren Sie Health Checks</strong> fÃ¼r Ihre Backends</li>
<li><strong>Ãœberwachen Sie Metriken</strong> regelmÃ¤ÃŸig</li>
</ol>
<h3 id="fehlerbehebung">Fehlerbehebung</h3>
<h4 id="haufige-probleme_1">HÃ¤ufige Probleme</h4>
<h5 id="1-ssltls-fehler">1. SSL/TLS-Fehler</h5>
<p><strong>Symptom:</strong> SSL-Zertifikatsfehler</p>
<p><strong>LÃ¶sungen:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># SNI-Konfiguration prÃ¼fen</span>
openssl<span class="w"> </span>s_client<span class="w"> </span>-connect<span class="w"> </span>backend.com:443<span class="w"> </span>-servername<span class="w"> </span>beispiel.de

<span class="c1"># Backend-Zertifikate prÃ¼fen</span>
openssl<span class="w"> </span>x509<span class="w"> </span>-in<span class="w"> </span>certificate.crt<span class="w"> </span>-text<span class="w"> </span>-noout
</code></pre></div>
<h5 id="2-backend-timeout">2. Backend-Timeout</h5>
<p><strong>Symptom:</strong> 504 Gateway Timeout-Fehler</p>
<p><strong>LÃ¶sungen:</strong></p>
<ul>
<li>ErhÃ¶hen Sie <code>REVERSE_PROXY_CONNECT_TIMEOUT</code> &amp; <code>REVERSE_PROXY_SEND_TIMEOUT</code></li>
<li>ÃœberprÃ¼fen Sie die Backend-Gesundheit</li>
<li>Optimieren Sie die Anwendungsleistung</li>
</ul>
<h5 id="3-routing-probleme">3. Routing-Probleme</h5>
<p><strong>Symptom:</strong> Falscher Dienst wird bereitgestellt</p>
<p><strong>LÃ¶sungen:</strong></p>
<ul>
<li>ÃœberprÃ¼fen Sie die <code>SERVER_NAME</code>-Konfiguration</li>
<li>Validieren Sie die SNI-Konfiguration</li>
<li>ÃœberprÃ¼fen Sie die <code>Host</code>-Header</li>
</ul>
<h4 id="diagnosebefehle_1">Diagnosebefehle</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># KonnektivitÃ¤tstest</span>
curl<span class="w"> </span>-v<span class="w"> </span>https://ihre-domain.de

<span class="c1"># Test mit benutzerdefinierten Headern</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: beispiel.de&quot;</span><span class="w"> </span>-v<span class="w"> </span>https://54984654.bunkerweb.cloud

<span class="c1"># DNS-ÃœberprÃ¼fung</span>
dig<span class="w"> </span>+trace<span class="w"> </span>beispiel.de

<span class="c1"># SSL-Test</span>
openssl<span class="w"> </span>s_client<span class="w"> </span>-connect<span class="w"> </span>beispiel.de:443<span class="w"> </span>-servername<span class="w"> </span>beispiel.de
</code></pre></div>
<h4 id="technischer-support">Technischer Support</h4>
<p>FÃ¼r technische UnterstÃ¼tzung:</p>
<ol>
<li><strong>ÃœberprÃ¼fen Sie die Protokolle</strong> in Grafana</li>
<li><strong>ÃœberprÃ¼fen Sie die Konfiguration</strong> in der BunkerWeb-UI</li>
<li><strong>Kontaktieren Sie den Support</strong> mit Konfigurationsdetails und Fehlerprotokollen</li>
</ol>
<h2 id="all-in-one-aio-image">All-In-One (AIO) Image</h2>
<figure>
<p><img align="center," alt="AIO Architekturdiagramm Platzhalter" src="../../assets/img/aio-graph-placeholder.png" width="600" />
  </p>
<figcaption>BunkerWeb All-In-One Architektur (AIO)</figcaption>
</figure>
<h3 id="deployment">Bereitstellung</h3>
<p>Um den All-in-One-Container bereitzustellen, mÃ¼ssen Sie nur den folgenden Befehl ausfÃ¼hren:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>bunkerweb-aio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>bw-storage:/data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">80</span>:8080/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/udp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bunkerity/bunkerweb-all-in-one:testing
</code></pre></div>
<p>StandardmÃ¤ÃŸig stellt der Container Folgendes bereit:</p>
<ul>
<li>8080/tcp fÃ¼r HTTP</li>
<li>8443/tcp fÃ¼r HTTPS</li>
<li>8443/udp fÃ¼r QUIC</li>
<li>7000/tcp fÃ¼r den Zugriff auf die Web-UI ohne BunkerWeb davor (nicht fÃ¼r die Produktion empfohlen)</li>
<li>8888/tcp fÃ¼r die API, wenn <code>SERVICE_API=yes</code> (interne Verwendung; vorzugsweise Ã¼ber BunkerWeb als Reverse-Proxy bereitstellen, anstatt direkt zu verÃ¶ffentlichen)</li>
</ul>
<p>Ein benanntes Volume (oder Bind-Mount) ist erforderlich, um die unter <code>/data</code> gespeicherten SQLite-Datenbanken, Caches und Backups zu persistieren:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb-aio</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-all-in-one:testing</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span>
<span class="nn">...</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Verwendung eines lokalen Ordners fÃ¼r persistente Daten</p>
<p>Der All-In-One-Container fÃ¼hrt seine Dienste als <strong>unprivilegierter Benutzer mit der UID 101 und GID 101</strong> aus. Das erhÃ¶ht die Sicherheit: Selbst wenn eine Komponente kompromittiert wird, erhÃ¤lt sie keine Root-Rechte (UID/GID 0) auf dem Host.</p>
<p>Wenn Sie einen <strong>lokalen Ordner</strong> einbinden, stellen Sie sicher, dass die Verzeichnisberechtigungen es diesem unprivilegierten Benutzer erlauben, darin zu schreiben:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chown<span class="w"> </span>root:101<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
<p>Oder, falls der Ordner bereits existiert:</p>
<div class="highlight"><pre><span></span><code>chown<span class="w"> </span>-R<span class="w"> </span>root:101<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
<p>Bei Verwendung von <a href="https://docs.docker.com/engine/security/rootless">Docker im rootless-Modus</a> oder <a href="https://podman.io/">Podman</a> werden Container-UIDs/GIDs auf andere Werte des Hosts abgebildet. PrÃ¼fen Sie daher zuerst Ihre subuid-/subgid-Bereiche:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>^<span class="k">$(</span>whoami<span class="k">)</span>:<span class="w"> </span>/etc/subuid<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
grep<span class="w"> </span>^<span class="k">$(</span>whoami<span class="k">)</span>:<span class="w"> </span>/etc/subgid
</code></pre></div>
<p>Beginnt der Bereich beispielsweise bei <strong>100000</strong>, lautet die zugeordnete UID/GID <strong>100100</strong> (100000 + 100):</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chgrp<span class="w"> </span><span class="m">100100</span><span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
<p>Oder, wenn der Ordner bereits existiert:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>chgrp<span class="w"> </span>-R<span class="w"> </span><span class="m">100100</span><span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
</div>
<p>Das All-In-One-Image enthÃ¤lt mehrere integrierte Dienste, die Ã¼ber Umgebungsvariablen gesteuert werden kÃ¶nnen:</p>
<ul>
<li><code>SERVICE_UI=yes</code> (Standard) - Aktiviert den Web-UI-Dienst</li>
<li><code>SERVICE_SCHEDULER=yes</code> (Standard) - Aktiviert den Scheduler-Dienst</li>
<li><code>SERVICE_API=no</code> (Standard) - Aktiviert den API-Dienst (FastAPI-Steuerungsebene)</li>
<li><code>AUTOCONF_MODE=no</code> (Standard) - Aktiviert den Autoconf-Dienst</li>
<li><code>USE_REDIS=yes</code> (Standard) - Aktiviert die integrierte <a href="#redis-integration">Redis-Instanz</a></li>
<li><code>USE_CROWDSEC=no</code> (Standard) - Die <a href="#crowdsec-integration">CrowdSec-Integration</a> ist standardmÃ¤ÃŸig deaktiviert</li>
<li><code>HIDE_SERVICE_LOGS=</code> (optional) - Kommagetrennte Liste von Diensten, deren Ausgaben in den Container-Logs unterdrÃ¼ckt werden. UnterstÃ¼tzte Werte: <code>api</code>, <code>autoconf</code>, <code>bunkerweb</code>, <code>crowdsec</code>, <code>redis</code>, <code>scheduler</code>, <code>ui</code>, <code>nginx.access</code>, <code>nginx.error</code>, <code>modsec</code>. Die Dateien in <code>/var/log/bunkerweb/&lt;service&gt;.log</code> werden weiterhin beschrieben.</li>
</ul>
<h3 id="api-integration">API-Integration</h3>
<p>Das All-In-One-Image enthÃ¤lt die BunkerWeb-API. Sie ist standardmÃ¤ÃŸig deaktiviert und kann durch Setzen von <code>SERVICE_API=yes</code> aktiviert werden.</p>
<div class="admonition warning">
<p class="admonition-title">Sicherheit</p>
<p>Die API ist eine privilegierte Steuerungsebene. Setzen Sie sie nicht direkt dem Internet aus. Halten Sie sie in einem internen Netzwerk, beschrÃ¤nken Sie die Quell-IPs mit <code>API_WHITELIST_IPS</code>, erfordern Sie eine Authentifizierung (<code>API_TOKEN</code> oder API-Benutzer + Biscuit) und greifen Sie vorzugsweise Ã¼ber BunkerWeb als Reverse-Proxy auf einem nicht erratbaren Pfad darauf zu.</p>
</div>
<p>Schnelle Aktivierung (eigenstÃ¤ndig) â€” verÃ¶ffentlicht den API-Port; nur zu Testzwecken:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>bunkerweb-aio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>bw-storage:/data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">SERVICE_API</span><span class="o">=</span>yes<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">API_WHITELIST_IPS</span><span class="o">=</span><span class="s2">&quot;127.0.0.0/8&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">API_USERNAME</span><span class="o">=</span>changeme<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">API_PASSWORD</span><span class="o">=</span>StrongP@ssw0rd<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">80</span>:8080/tcp<span class="w"> </span>-p<span class="w"> </span><span class="m">443</span>:8443/tcp<span class="w"> </span>-p<span class="w"> </span><span class="m">443</span>:8443/udp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">8888</span>:8888/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bunkerity/bunkerweb-all-in-one:testing
</code></pre></div>
<p>Empfohlen (hinter BunkerWeb) â€” verÃ¶ffentlichen Sie <code>8888</code> nicht; verwenden Sie stattdessen einen Reverse-Proxy:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb-aio</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-all-in-one:testing</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-aio</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api.example.com&quot;</span>
<span class="w">      </span><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">DISABLE_DEFAULT_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">api.example.com_USE_TEMPLATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bw-api&quot;</span>
<span class="w">      </span><span class="nt">api.example.com_USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">api.example.com_REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api-&lt;unguessable&gt;&quot;</span>
<span class="w">      </span><span class="nt">api.example.com_REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://127.0.0.1:8888&quot;</span><span class="w"> </span><span class="c1"># Interner API-Endpunkt</span>

<span class="w">      </span><span class="c1"># API-Einstellungen</span>
<span class="w">      </span><span class="nt">SERVICE_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="c1"># Verwenden Sie starke Zugangsdaten und erlauben Sie nur vertrauenswÃ¼rdige IPs/Netze (Details unten)</span>
<span class="w">      </span><span class="nt">API_USERNAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changeme&quot;</span>
<span class="w">      </span><span class="nt">API_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;StrongP@ssw0rd&quot;</span>
<span class="w">      </span><span class="nt">API_ROOT_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api-&lt;unguessable&gt;&quot;</span><span class="w"> </span><span class="c1"># Muss mit REVERSE_PROXY_URL Ã¼bereinstimmen</span>

<span class="w">      </span><span class="c1"># Wir deaktivieren die UI â€“ zum Aktivieren auf &quot;yes&quot; setzen</span>
<span class="w">      </span><span class="nt">SERVICE_UI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
</code></pre></div>
<p>Details zu Authentifizierung, Berechtigungen (ACL), Ratenbegrenzung, TLS und Konfigurationsoptionen finden Sie in der <a href="../api/">API-Dokumentation</a>.</p>
<h3 id="zugriff-auf-den-einrichtungsassistenten">Zugriff auf den Einrichtungsassistenten</h3>
<p>StandardmÃ¤ÃŸig wird der Einrichtungsassistent automatisch gestartet, wenn Sie den AIO-Container zum ersten Mal ausfÃ¼hren. Um darauf zuzugreifen, fÃ¼hren Sie die folgenden Schritte aus:</p>
<ol>
<li><strong>Starten Sie den AIO-Container</strong> wie <a href="#deployment">oben</a> beschrieben und stellen Sie sicher, dass <code>SERVICE_UI=yes</code> (Standard) ist.</li>
<li><strong>Greifen Sie auf die UI</strong> Ã¼ber Ihren Haupt-BunkerWeb-Endpunkt zu, z. B. <code>https://ihre-domain</code>.</li>
</ol>
<blockquote>
<p>Folgen Sie den nÃ¤chsten Schritten im <a href="../quickstart-guide/#complete-the-setup-wizard">Schnellstart-Leitfaden</a>, um die Web-UI einzurichten.</p>
</blockquote>
<h3 id="redis-integration">Redis-Integration</h3>
<p>Das BunkerWeb <strong>All-In-One</strong>-Image enthÃ¤lt standardmÃ¤ÃŸig Redis fÃ¼r die <a href="../advanced/#persistence-of-bans-and-reports">Persistenz von Sperren und Berichten</a>. Beachten Sie dabei:</p>
<ul>
<li>Der eingebettete Redis-Dienst startet nur, wenn <code>USE_REDIS=yes</code> <strong>und</strong> <code>REDIS_HOST</code> auf dem Standardwert (<code>127.0.0.1</code>/<code>localhost</code>) bleibt.</li>
<li>Er lauscht auf dem Loopback-Interface des Containers und ist daher nur aus dem Container heraus erreichbar â€“ nicht von anderen Containern oder vom Host.</li>
<li>Ãœberschreiben Sie <code>REDIS_HOST</code> nur, wenn ein externer Redis-/Valkey-Endpunkt verfÃ¼gbar ist; andernfalls wird die eingebettete Instanz nicht gestartet.</li>
<li>Um Redis vollstÃ¤ndig zu deaktivieren, setzen Sie <code>USE_REDIS=no</code>.</li>
<li>Redis-Protokolle erscheinen mit dem PrÃ¤fix <code>[REDIS]</code> in den Docker-Protokollen sowie in <code>/var/log/bunkerweb/redis.log</code>.</li>
</ul>
<h3 id="crowdsec-integration">CrowdSec-Integration</h3>
<p>Das BunkerWeb <strong>All-In-One</strong>-Docker-Image wird mit vollstÃ¤ndig integriertem CrowdSec geliefert â€“ keine zusÃ¤tzlichen Container oder manuelle Einrichtung erforderlich. Befolgen Sie die nachstehenden Schritte, um CrowdSec in Ihrer Bereitstellung zu aktivieren, zu konfigurieren und zu erweitern.</p>
<p>StandardmÃ¤ÃŸig ist CrowdSec <strong>deaktiviert</strong>. Um es zu aktivieren, fÃ¼gen Sie einfach die Umgebungsvariable <code>USE_CROWDSEC</code> hinzu:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>bunkerweb-aio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>bw-storage:/data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">USE_CROWDSEC</span><span class="o">=</span>yes<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">80</span>:8080/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/udp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bunkerity/bunkerweb-all-in-one:testing<span class="sb">```</span>

*<span class="w"> </span>Wenn<span class="w"> </span><span class="sb">`</span><span class="nv">USE_CROWDSEC</span><span class="o">=</span>yes<span class="sb">`</span>,<span class="w"> </span>wird<span class="w"> </span>das<span class="w"> </span>Einstiegsskript:

<span class="w">    </span><span class="m">1</span>.<span class="w"> </span>Den<span class="w"> </span>lokalen<span class="w"> </span>CrowdSec-Agenten<span class="w"> </span>**registrieren**<span class="w"> </span>und<span class="w"> </span>**starten**<span class="w"> </span><span class="o">(</span>Ã¼ber<span class="w"> </span><span class="sb">`</span>cscli<span class="sb">`</span><span class="o">)</span>.
<span class="w">    </span><span class="m">2</span>.<span class="w"> </span>Standard-Sammlungen<span class="w"> </span>und<span class="w"> </span>-Parser<span class="w"> </span>**installieren<span class="w"> </span>oder<span class="w"> </span>aktualisieren**.
<span class="w">    </span><span class="m">3</span>.<span class="w"> </span>Den<span class="w"> </span>Bouncer<span class="w"> </span><span class="sb">`</span>crowdsec-bunkerweb-bouncer/v1.6<span class="sb">`</span><span class="w"> </span>**konfigurieren**.

---

<span class="c1">#### Standard-Sammlungen &amp; Parser</span>

Beim<span class="w"> </span>ersten<span class="w"> </span>Start<span class="w"> </span><span class="o">(</span>oder<span class="w"> </span>nach<span class="w"> </span>einem<span class="w"> </span>Upgrade<span class="o">)</span><span class="w"> </span>werden<span class="w"> </span>diese<span class="w"> </span>Assets<span class="w"> </span>automatisch<span class="w"> </span>installiert<span class="w"> </span>und<span class="w"> </span>auf<span class="w"> </span>dem<span class="w"> </span>neuesten<span class="w"> </span>Stand<span class="w"> </span>gehalten:

<span class="p">|</span><span class="w"> </span>Typ<span class="w">          </span><span class="p">|</span><span class="w"> </span>Name<span class="w">                                    </span><span class="p">|</span><span class="w"> </span>Zweck<span class="w">                                                                                                                                                                                                                                              </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>------------<span class="w"> </span><span class="p">|</span><span class="w"> </span>---------------------------------------<span class="w"> </span><span class="p">|</span><span class="w"> </span>--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>**Sammlung**<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="sb">`</span>bunkerity/bunkerweb<span class="sb">`</span><span class="w">                   </span><span class="p">|</span><span class="w"> </span>Verteidigt<span class="w"> </span>Nginx-Server<span class="w"> </span>gegen<span class="w"> </span>eine<span class="w"> </span>breite<span class="w"> </span>Palette<span class="w"> </span>von<span class="w"> </span>HTTP-basierten<span class="w"> </span>Angriffen,<span class="w"> </span>von<span class="w"> </span>Brute-Force-<span class="w"> </span>bis<span class="w"> </span>zu<span class="w"> </span>Injektionsversuchen.<span class="w">                                                                                                                       </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>**Sammlung**<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="sb">`</span>crowdsecurity/appsec-virtual-patching<span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Liefert<span class="w"> </span>einen<span class="w"> </span>dynamisch<span class="w"> </span>aktualisierten<span class="w"> </span>WAF-artigen<span class="w"> </span>Regelsatz,<span class="w"> </span>der<span class="w"> </span>auf<span class="w"> </span>bekannte<span class="w"> </span>CVEs<span class="w"> </span>abzielt<span class="w"> </span>und<span class="w"> </span>tÃ¤glich<span class="w"> </span>automatisch<span class="w"> </span>gepatcht<span class="w"> </span>wird,<span class="w"> </span>um<span class="w"> </span>Webanwendungen<span class="w"> </span>vor<span class="w"> </span>neu<span class="w"> </span>entdeckten<span class="w"> </span>Schwachstellen<span class="w"> </span>zu<span class="w"> </span>schÃ¼tzen.<span class="w">                                                </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>**Sammlung**<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="sb">`</span>crowdsecurity/appsec-generic-rules<span class="sb">`</span><span class="w">    </span><span class="p">|</span><span class="w"> </span>ErgÃ¤nzt<span class="w"> </span><span class="sb">`</span>crowdsecurity/appsec-virtual-patching<span class="sb">`</span><span class="w"> </span>mit<span class="w"> </span>Heuristiken<span class="w"> </span>fÃ¼r<span class="w"> </span>generische<span class="w"> </span>Angriffsmuster<span class="w"> </span>auf<span class="w"> </span>Anwendungsebene<span class="w"> </span>â€“<span class="w"> </span>wie<span class="w"> </span>Enumeration,<span class="w"> </span>Pfad-Traversal<span class="w"> </span>und<span class="w"> </span>automatisierte<span class="w"> </span>Sonden<span class="w"> </span>â€“<span class="w"> </span>und<span class="w"> </span>fÃ¼llt<span class="w"> </span>LÃ¼cken,<span class="w"> </span>wo<span class="w"> </span>CVE-spezifische<span class="w"> </span>Regeln<span class="w"> </span>noch<span class="w"> </span>nicht<span class="w"> </span>existieren.<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w"> </span>**Parser**<span class="w">   </span><span class="p">|</span><span class="w"> </span><span class="sb">`</span>crowdsecurity/geoip-enrich<span class="sb">`</span><span class="w">            </span><span class="p">|</span><span class="w"> </span>Bereichert<span class="w"> </span>Ereignisse<span class="w"> </span>mit<span class="w"> </span>GeoIP-Kontext<span class="w">                                                                                                                                                                                                            </span><span class="p">|</span>

&lt;details&gt;
&lt;summary&gt;&lt;strong&gt;Wie<span class="w"> </span>es<span class="w"> </span>intern<span class="w"> </span>funktioniert&lt;/strong&gt;&lt;/summary&gt;

Das<span class="w"> </span>Einstiegsskript<span class="w"> </span>ruft<span class="w"> </span>auf:

<span class="sb">```</span>bash
cscli<span class="w"> </span>hub<span class="w"> </span>update
cscli<span class="w"> </span>install<span class="w"> </span>collection<span class="w"> </span>bunkerity/bunkerweb
cscli<span class="w"> </span>install<span class="w"> </span>collection<span class="w"> </span>crowdsecurity/appsec-virtual-patching
cscli<span class="w"> </span>install<span class="w"> </span>collection<span class="w"> </span>crowdsecurity/appsec-generic-rules
cscli<span class="w"> </span>install<span class="w"> </span>parser<span class="w">     </span>crowdsecurity/geoip-enrich
</code></pre></div>
</details>
<div class="admonition info">
<p class="admonition-title">Sammlung fehlt in Docker?</p>
<p>Wenn <code>cscli collections list</code> im Container <code>bunkerity/bunkerweb</code> weiterhin nicht anzeigt, fÃ¼hren Sie <code>docker exec -it bunkerweb-aio cscli hub update</code> aus und starten Sie anschlieÃŸend den Container neu (<code>docker restart bunkerweb-aio</code>), um den lokalen Hub-Cache zu aktualisieren.</p>
</div>
<hr />
<h4 id="hinzufugen-zusatzlicher-sammlungen">HinzufÃ¼gen zusÃ¤tzlicher Sammlungen</h4>
<p>BenÃ¶tigen Sie mehr Abdeckung? Definieren Sie <code>CROWDSEC_EXTRA_COLLECTIONS</code> mit einer durch Leerzeichen getrennten Liste von Hub-Sammlungen:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>bunkerweb-aio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>bw-storage:/data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">USE_CROWDSEC</span><span class="o">=</span>yes<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">CROWDSEC_EXTRA_COLLECTIONS</span><span class="o">=</span><span class="s2">&quot;crowdsecurity/apache2 crowdsecurity/mysql&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">80</span>:8080/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/udp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bunkerity/bunkerweb-all-in-one:testing
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Wie es intern funktioniert</p>
<p>Das Skript durchlÃ¤uft jeden Namen und installiert oder aktualisiert ihn nach Bedarf â€“ keine manuellen Schritte erforderlich.</p>
</div>
<hr />
<h4 id="deaktivieren-bestimmter-parser">Deaktivieren bestimmter Parser</h4>
<p>Wenn Sie die Standardeinrichtung beibehalten, aber einen oder mehrere Parser explizit deaktivieren mÃ¶chten, geben Sie eine durch Leerzeichen getrennte Liste Ã¼ber <code>CROWDSEC_DISABLED_PARSERS</code> an:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>bunkerweb-aio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>bw-storage:/data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">USE_CROWDSEC</span><span class="o">=</span>yes<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">CROWDSEC_DISABLED_PARSERS</span><span class="o">=</span><span class="s2">&quot;crowdsecurity/geoip-enrich foo/bar-parser&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">80</span>:8080/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/udp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bunkerity/bunkerweb-all-in-one:testing
</code></pre></div>
<p>Hinweise:
- Die Liste wird angewendet, nachdem die erforderlichen Elemente installiert/aktualisiert wurden; nur die von Ihnen aufgelisteten Parser werden entfernt.
- Verwenden Sie Hub-Slugs, wie sie von <code>cscli parsers list</code> angezeigt werden (z. B. <code>crowdsecurity/geoip-enrich</code>).</p>
<hr />
<h4 id="appsec-umschalter">AppSec-Umschalter</h4>
<p>CrowdSec <a href="https://docs.crowdsec.net/docs/appsec/intro/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">AppSec</a>-Funktionen â€“ angetrieben durch die Sammlungen <code>appsec-virtual-patching</code> und <code>appsec-generic-rules</code> â€“ sind <strong>standardmÃ¤ÃŸig aktiviert</strong>.</p>
<p>Um alle AppSec-Funktionen (WAF/virtuelles Patchen) zu <strong>deaktivieren</strong>, setzen Sie:</p>
<div class="highlight"><pre><span></span><code>-e<span class="w"> </span><span class="nv">CROWDSEC_APPSEC_URL</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</code></pre></div>
<p>Dies schaltet den AppSec-Endpunkt effektiv aus, sodass keine Regeln angewendet werden.</p>
<hr />
<h4 id="externe-crowdsec-api">Externe CrowdSec-API</h4>
<p>Wenn Sie eine entfernte CrowdSec-Instanz betreiben, verweisen Sie den Container auf Ihre API:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>bunkerweb-aio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>bw-storage:/data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">USE_CROWDSEC</span><span class="o">=</span>yes<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="nv">CROWDSEC_API</span><span class="o">=</span><span class="s2">&quot;https://crowdsec.example.com:8000&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">80</span>:8080/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/tcp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">443</span>:8443/udp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bunkerity/bunkerweb-all-in-one:testing
</code></pre></div>
<ul>
<li>Die <strong>lokale Registrierung</strong> wird Ã¼bersprungen, wenn <code>CROWDSEC_API</code> nicht <code>127.0.0.1</code> oder <code>localhost</code> ist.</li>
<li><strong>AppSec</strong> ist standardmÃ¤ÃŸig deaktiviert, wenn eine externe API verwendet wird. Um es zu aktivieren, setzen Sie <code>CROWDSEC_APPSEC_URL</code> auf Ihren gewÃ¼nschten Endpunkt.</li>
<li>Die Bouncer-Registrierung erfolgt weiterhin gegen die entfernte API.</li>
<li>Um einen vorhandenen Bouncer-SchlÃ¼ssel wiederzuverwenden, geben Sie <code>CROWDSEC_API_KEY</code> mit Ihrem vorab generierten Token an.</li>
</ul>
<hr />
<div class="admonition tip">
<p class="admonition-title">Weitere Optionen</p>
<p>Eine vollstÃ¤ndige Ãœbersicht Ã¼ber alle CrowdSec-Optionen (benutzerdefinierte Szenarien, Protokolle, Fehlerbehebung und mehr) finden Sie in der <a href="../features/#crowdsec">BunkerWeb CrowdSec-Plugin-Dokumentation</a> oder besuchen Sie die <a href="https://www.crowdsec.net/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">offizielle CrowdSec-Website</a>.</p>
</div>
<h2 id="docker">Docker</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/integration-docker.svg" width="600" />
  </p>
<figcaption>Docker-Integration</figcaption>
</figure>
<p>Die Verwendung von BunkerWeb als <a href="https://www.docker.com/">Docker</a>-Container bietet einen bequemen und unkomplizierten Ansatz zum Testen und Nutzen der LÃ¶sung, insbesondere wenn Sie bereits mit der Docker-Technologie vertraut sind.</p>
<p>Um Ihre Docker-Bereitstellung zu erleichtern, stellen wir auf <a href="https://hub.docker.com/r/bunkerity/bunkerweb">Docker Hub</a> vorgefertigte Images zur VerfÃ¼gung, die mehrere Architekturen unterstÃ¼tzen. Diese vorgefertigten Images sind fÃ¼r die Verwendung auf den folgenden Architekturen optimiert und vorbereitet:</p>
<ul>
<li>x64 (64-Bit)</li>
<li>x86</li>
<li>armv8 (ARM 64-Bit)</li>
<li>armv7 (ARM 32-Bit)</li>
</ul>
<p>Durch den Zugriff auf diese vorgefertigten Images von Docker Hub kÃ¶nnen Sie BunkerWeb schnell in Ihrer Docker-Umgebung ziehen und ausfÃ¼hren, wodurch umfangreiche Konfigurations- oder Einrichtungsprozesse entfallen. Dieser optimierte Ansatz ermÃ¶glicht es Ihnen, sich auf die Nutzung der Funktionen von BunkerWeb zu konzentrieren, ohne unnÃ¶tige KomplexitÃ¤t.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>pull<span class="w"> </span>bunkerity/bunkerweb:testing
</code></pre></div>
<p>Docker-Images sind auch auf <a href="https://github.com/orgs/bunkerity/packages?repo_name=bunkerweb">GitHub-Paketen</a> verfÃ¼gbar und kÃ¶nnen Ã¼ber die Repository-Adresse <code>ghcr.io</code> heruntergeladen werden:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/bunkerity/bunkerweb:testing
</code></pre></div>
<p>SchlÃ¼sselkonzepte fÃ¼r die Docker-Integration sind:</p>
<ul>
<li><strong>Umgebungsvariablen</strong>: Konfigurieren Sie BunkerWeb einfach Ã¼ber Umgebungsvariablen. Mit diesen Variablen kÃ¶nnen Sie verschiedene Aspekte des Verhaltens von BunkerWeb anpassen, z. B. Netzwerkeinstellungen, Sicherheitsoptionen und andere Parameter.</li>
<li><strong>Scheduler-Container</strong>: Verwalten Sie die Konfiguration und fÃ¼hren Sie Jobs mit einem dedizierten Container namens <a href="../concepts/#scheduler">Scheduler</a> aus.</li>
<li><strong>Netzwerke</strong>: Docker-Netzwerke spielen eine wichtige Rolle bei der Integration von BunkerWeb. Diese Netzwerke dienen zwei Hauptzwecken: dem Bereitstellen von Ports fÃ¼r Clients und dem Verbinden mit Upstream-Webdiensten. Durch das Bereitstellen von Ports kann BunkerWeb eingehende Anfragen von Clients annehmen und ihnen den Zugriff auf die geschÃ¼tzten Webdienste ermÃ¶glichen. DarÃ¼ber hinaus kann BunkerWeb durch die Verbindung mit Upstream-Webdiensten den Datenverkehr effizient weiterleiten und verwalten und so eine verbesserte Sicherheit und Leistung bieten.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Datenbank-Backend</p>
<p>Bitte beachten Sie, dass unsere Anweisungen davon ausgehen, dass Sie SQLite als Standard-Datenbank-Backend verwenden, wie durch die Einstellung <code>DATABASE_URI</code> konfiguriert. Es werden jedoch auch andere Datenbank-Backends unterstÃ¼tzt. Weitere Informationen finden Sie in den docker-compose-Dateien im Ordner <a href="https://github.com/bunkerity/bunkerweb/tree/vtesting/misc/integrations">misc/integrations</a> des Repositorys.</p>
</div>
<h3 id="umgebungsvariablen">Umgebungsvariablen</h3>
<p>Einstellungen werden dem Scheduler Ã¼ber Docker-Umgebungsvariablen Ã¼bergeben:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MY_SETTING=value</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ANOTHER_SETTING=another value</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Wird verwendet, um den Cache und andere Daten wie Backups zu persistieren</span>
<span class="nn">...</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">VollstÃ¤ndige Liste</p>
<p>Die vollstÃ¤ndige Liste der Umgebungsvariablen finden Sie im <a href="../features/">Einstellungsbereich</a> der Dokumentation.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Beschriftete Container Ã¼berspringen</p>
<p>Wenn ein Container von autoconf ignoriert werden soll, setzen Sie <code>DOCKER_IGNORE_LABELS</code> auf dem Controller. Geben Sie eine durch Leerzeichen oder Kommas getrennte Liste von Label-SchlÃ¼sseln an (zum Beispiel <code>bunkerweb.SERVER_NAME</code>) oder nur das Suffix (<code>SERVER_NAME</code>). Jeder Container oder jede benutzerdefinierte Konfigurationsquelle mit einem Ã¼bereinstimmenden Label wird bei der Erkennung Ã¼bersprungen, und das Label wird bei der Ãœbersetzung der Einstellungen ignoriert.</p>
</div>
<h3 id="verwendung-von-docker-secrets">Verwendung von Docker-Secrets</h3>
<p>Anstatt sensible Einstellungen Ã¼ber Umgebungsvariablen zu Ã¼bergeben, kÃ¶nnen Sie sie als Docker-Secrets speichern. Erstellen Sie fÃ¼r jede Einstellung, die Sie sichern mÃ¶chten, ein Docker-Secret mit dem Namen, der dem EinstellungsschlÃ¼ssel entspricht (in GroÃŸbuchstaben). Die Einstiegsskripte von BunkerWeb laden Secrets automatisch aus <code>/run/secrets</code> und exportieren sie als Umgebungsvariablen.</p>
<p>Beispiel:
<div class="highlight"><pre><span></span><code><span class="c1"># Ein Docker-Secret fÃ¼r ADMIN_PASSWORD erstellen</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;S3cr3tP@ssw0rd&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>secret<span class="w"> </span>create<span class="w"> </span>ADMIN_PASSWORD<span class="w"> </span>-
</code></pre></div></p>
<p>Mounten Sie die Secrets bei der Bereitstellung:
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-ui</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secrets</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ADMIN_PASSWORD</span>
<span class="nn">...</span>
<span class="nt">secrets</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ADMIN_PASSWORD</span><span class="p">:</span>
<span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p>Dadurch wird sichergestellt, dass sensible Einstellungen aus der Umgebung und den Protokollen herausgehalten werden.</p>
<h3 id="scheduler">Scheduler</h3>
<p>Der <a href="../concepts/#scheduler">Scheduler</a> lÃ¤uft in seinem eigenen Container, der auch auf Docker Hub verfÃ¼gbar ist:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>pull<span class="w"> </span>bunkerity/bunkerweb-scheduler:testing
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">BunkerWeb-Einstellungen</p>
<p>Seit Version <code>1.6.0</code> ist der Scheduler-Container der Ort, an dem Sie die Einstellungen fÃ¼r BunkerWeb definieren. Der Scheduler pusht die Konfiguration dann an den BunkerWeb-Container.</p>
<p>âš  <strong>Wichtig</strong>: Alle API-bezogenen Einstellungen (wie <code>API_HTTP_PORT</code>, <code>API_LISTEN_IP</code>, <code>API_SERVER_NAME</code>, <code>API_WHITELIST_IP</code> und <code>API_TOKEN</code>, wenn Sie es verwenden) <strong>mÃ¼ssen auch im BunkerWeb-Container definiert werden</strong>. Die Einstellungen mÃ¼ssen in beiden Containern gespiegelt werden; andernfalls akzeptiert der BunkerWeb-Container keine API-Anfragen vom Scheduler.</p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-api-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-api-env</span>
<span class="w">  </span><span class="c1"># Wir verwenden einen Anker, um die Wiederholung derselben Einstellungen fÃ¼r beide Container zu vermeiden</span>
<span class="w">  </span><span class="nt">API_HTTP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5000&quot;</span><span class="w"> </span><span class="c1"># Standardwert</span>
<span class="w">  </span><span class="nt">API_LISTEN_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.0.0.0&quot;</span><span class="w"> </span><span class="c1"># Standardwert</span>
<span class="w">  </span><span class="nt">API_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bwapi&quot;</span><span class="w"> </span><span class="c1"># Standardwert</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/24</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span><span class="w"> </span><span class="c1"># Setzen Sie dies entsprechend Ihren Netzwerkeinstellungen</span>
<span class="w">  </span><span class="c1"># Optionaler Token; wenn gesetzt, sendet der Scheduler Authorization: Bearer &lt;token&gt;</span>
<span class="w">  </span><span class="nt">API_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Dies setzt die API-Einstellungen fÃ¼r den BunkerWeb-Container</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-api-env</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Dies setzt die API-Einstellungen fÃ¼r den Scheduler-Container</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-api-env</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Wird verwendet, um den Cache und andere Daten wie Backups zu persistieren</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="nn">...</span>
</code></pre></div>
</div>
<p>Ein Volume wird benÃ¶tigt, um die vom Scheduler verwendete SQLite-Datenbank und Backups zu speichern:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span>
<span class="nn">...</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Verwendung eines lokalen Ordners fÃ¼r persistente Daten</p>
<p>Der Scheduler lÃ¤uft als <strong>unprivilegierter Benutzer mit UID 101 und GID 101</strong> im Container. Dies erhÃ¶ht die Sicherheit: Im Falle einer ausgenutzten Schwachstelle hat der Angreifer keine vollen Root-Rechte (UID/GID 0).</p>
<p>Wenn Sie jedoch einen <strong>lokalen Ordner fÃ¼r persistente Daten</strong> verwenden, mÃ¼ssen Sie <strong>die richtigen Berechtigungen festlegen</strong>, damit der unprivilegierte Benutzer Daten darin schreiben kann. Zum Beispiel:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chown<span class="w"> </span>root:101<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
<p>Alternativ, wenn der Ordner bereits existiert:</p>
<div class="highlight"><pre><span></span><code>chown<span class="w"> </span>-R<span class="w"> </span>root:101<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
<p>Wenn Sie <a href="https://docs.docker.com/engine/security/rootless">Docker im rootless-Modus</a> oder <a href="https://podman.io/">Podman</a> verwenden, werden UIDs und GIDs im Container auf andere auf dem Host abgebildet. Sie mÃ¼ssen zuerst Ihre anfÃ¤ngliche subuid und subgid Ã¼berprÃ¼fen:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>^<span class="k">$(</span>whoami<span class="k">)</span>:<span class="w"> </span>/etc/subuid<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
grep<span class="w"> </span>^<span class="k">$(</span>whoami<span class="k">)</span>:<span class="w"> </span>/etc/subgid
</code></pre></div>
<p>Wenn Sie beispielsweise einen Wert von <strong>100000</strong> haben, ist die abgebildete UID/GID <strong>100100</strong> (100000 + 100):</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chgrp<span class="w"> </span><span class="m">100100</span><span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
<p>Oder wenn der Ordner bereits existiert:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>chgrp<span class="w"> </span>-R<span class="w"> </span><span class="m">100100</span><span class="w"> </span>bw-data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">770</span><span class="w"> </span>bw-data
</code></pre></div>
</div>
<h3 id="netzwerke">Netzwerke</h3>
<p>StandardmÃ¤ÃŸig lauscht der BunkerWeb-Container (innerhalb des Containers) auf <strong>8080/tcp</strong> fÃ¼r <strong>HTTP</strong>, <strong>8443/tcp</strong> fÃ¼r <strong>HTTPS</strong> und <strong>8443/udp</strong> fÃ¼r <strong>QUIC</strong>.</p>
<div class="admonition warning">
<p class="admonition-title">Privilegierte Ports im rootless-Modus oder bei Verwendung von Podman</p>
<p>Wenn Sie <a href="https://docs.docker.com/engine/security/rootless">Docker im rootless-Modus</a> verwenden und privilegierte Ports (&lt; 1024) wie 80 und 443 an BunkerWeb weiterleiten mÃ¶chten, beachten Sie bitte die Voraussetzungen <a href="https://docs.docker.com/engine/security/rootless/#exposing-privileged-ports">hier</a>.</p>
<p>Wenn Sie <a href="https://podman.io/">Podman</a> verwenden, kÃ¶nnen Sie die Mindestanzahl fÃ¼r unprivilegierte Ports senken:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>sysctl<span class="w"> </span>net.ipv4.ip_unprivileged_port_start<span class="o">=</span><span class="m">1</span>
</code></pre></div></p>
</div>
<p>Der typische BunkerWeb-Stack bei Verwendung der Docker-Integration enthÃ¤lt die folgenden Container:</p>
<ul>
<li>BunkerWeb</li>
<li>Scheduler</li>
<li>Ihre Dienste</li>
</ul>
<p>Aus GrÃ¼nden der Tiefenverteidigung empfehlen wir dringend, mindestens drei verschiedene Docker-Netzwerke zu erstellen:</p>
<ul>
<li><code>bw-services</code>: fÃ¼r BunkerWeb und Ihre Webdienste</li>
<li><code>bw-universe</code>: fÃ¼r BunkerWeb und den Scheduler</li>
<li><code>bw-db</code>: fÃ¼r die Datenbank (wenn Sie eine verwenden)</li>
</ul>
<p>Um die Kommunikation zwischen dem Scheduler und der BunkerWeb-API zu sichern, <strong>autorisieren Sie API-Aufrufe</strong>. Verwenden Sie die Einstellung <code>API_WHITELIST_IP</code>, um zulÃ¤ssige IP-Adressen und Subnetze anzugeben. FÃ¼r einen stÃ¤rkeren Schutz setzen Sie <code>API_TOKEN</code> in beiden Containern; der Scheduler wird automatisch <code>Authorization: Bearer &lt;token&gt;</code> einschlieÃŸen.</p>
<p><strong>Es wird dringend empfohlen, ein statisches Subnetz fÃ¼r das <code>bw-universe</code>-Netzwerk zu verwenden</strong>, um die Sicherheit zu erhÃ¶hen. Durch die Umsetzung dieser MaÃŸnahmen kÃ¶nnen Sie sicherstellen, dass nur autorisierte Quellen auf die BunkerWeb-API zugreifen kÃ¶nnen, was das Risiko von unbefugtem Zugriff oder bÃ¶swilligen AktivitÃ¤ten verringert:</p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-api-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-api-env</span>
<span class="w">  </span><span class="c1"># Wir verwenden einen Anker, um die Wiederholung derselben Einstellungen fÃ¼r beide Container zu vermeiden</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/24</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span>
<span class="w">  </span><span class="nt">API_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># Optionaler API-Token</span>
<span class="w">  </span><span class="c1"># Optionaler API-Token fÃ¼r authentifizierten API-Zugriff</span>
<span class="w">  </span><span class="nt">API_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span><span class="w"> </span><span class="c1"># QUIC</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-api-env</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="nn">...</span>
<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-api-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span><span class="w"> </span><span class="c1"># Diese Einstellung ist obligatorisch, um die BunkerWeb-Instanz anzugeben</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Wird verwendet, um den Cache und andere Daten wie Backups zu persistieren</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="nn">...</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span><span class="w"> </span><span class="c1"># Statisches Subnetz, damit nur autorisierte Quellen auf die BunkerWeb-API zugreifen kÃ¶nnen</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
</code></pre></div>
<h3 id="vollstandige-compose-datei">VollstÃ¤ndige Compose-Datei</h3>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-api-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-api-env</span>
<span class="w">  </span><span class="c1"># Wir verwenden einen Anker, um die Wiederholung derselben Einstellungen fÃ¼r beide Container zu vermeiden</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/24</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span><span class="w"> </span><span class="c1"># QUIC</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-api-env</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-api-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span><span class="w"> </span><span class="c1"># Diese Einstellung ist obligatorisch, um die BunkerWeb-Instanz anzugeben</span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;www.example.com&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Wird verwendet, um den Cache und andere Daten wie Backups zu persistieren</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span><span class="w"> </span><span class="c1"># Statisches Subnetz, damit nur autorisierte Quellen auf die BunkerWeb-API zugreifen kÃ¶nnen</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
</code></pre></div>
<h3 id="aus-dem-quellcode-erstellen">Aus dem Quellcode erstellen</h3>
<p>Alternativ, wenn Sie einen praxisorientierteren Ansatz bevorzugen, haben Sie die MÃ¶glichkeit, das Docker-Image direkt aus dem <a href="https://github.com/bunkerity/bunkerweb">Quellcode</a> zu erstellen. Das Erstellen des Images aus dem Quellcode gibt Ihnen mehr Kontrolle und AnpassungsmÃ¶glichkeiten Ã¼ber den Bereitstellungsprozess. Bitte beachten Sie jedoch, dass diese Methode je nach Ihrer Hardwarekonfiguration einige Zeit in Anspruch nehmen kann (Sie kÃ¶nnen bei Bedarf einen Kaffee â˜• trinken).</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/bunkerity/bunkerweb.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span><span class="w"> </span>bunkerweb<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>bw<span class="w"> </span>-f<span class="w"> </span>src/bw/Dockerfile<span class="w"> </span>.<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>bw-scheduler<span class="w"> </span>-f<span class="w"> </span>src/scheduler/Dockerfile<span class="w"> </span>.<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>bw-autoconf<span class="w"> </span>-f<span class="w"> </span>src/autoconf/Dockerfile<span class="w"> </span>.<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>bw-ui<span class="w"> </span>-f<span class="w"> </span>src/ui/Dockerfile<span class="w"> </span>.
</code></pre></div>
<h2 id="linux">Linux</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/integration-linux.svg" width="600" />
  </p>
<figcaption>Linux-Integration</figcaption>
</figure>
<p>UnterstÃ¼tzte Linux-Distributionen fÃ¼r BunkerWeb (amd64/x86_64 und arm64/aarch64 Architekturen) sind:</p>
<ul>
<li>Debian 12 "Bookworm"</li>
<li>Debian 13 "Trixie"</li>
<li>Ubuntu 22.04 "Jammy"</li>
<li>Ubuntu 24.04 "Noble"</li>
<li>Fedora 41 und 42</li>
<li>Red Hat Enterprise Linux (RHEL) 8, 9 und 10</li>
</ul>
<h3 id="einfaches-installationsskript">Einfaches Installationsskript</h3>
<p>FÃ¼r eine vereinfachte Installation bietet BunkerWeb ein einfaches Installationsskript, das den gesamten Einrichtungsprozess automatisch abwickelt, einschlieÃŸlich NGINX-Installation, Repository-Konfiguration und Service-Setup.</p>
<h4 id="schnellstart">Schnellstart</h4>
<p>Um zu beginnen, laden Sie das Installationsskript und seine PrÃ¼fsumme herunter und Ã¼berprÃ¼fen Sie dann die IntegritÃ¤t des Skripts, bevor Sie es ausfÃ¼hren.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Skript und PrÃ¼fsumme herunterladen</span>
curl<span class="w"> </span>-fsSL<span class="w"> </span>-O<span class="w"> </span>https://github.com/bunkerity/bunkerweb/releases/download/vtesting/install-bunkerweb.sh
curl<span class="w"> </span>-fsSL<span class="w"> </span>-O<span class="w"> </span>https://github.com/bunkerity/bunkerweb/releases/download/vtesting/install-bunkerweb.sh.sha256

<span class="c1"># PrÃ¼fsumme Ã¼berprÃ¼fen</span>
sha256sum<span class="w"> </span>-c<span class="w"> </span>install-bunkerweb.sh.sha256

<span class="c1"># Wenn die ÃœberprÃ¼fung erfolgreich ist, Skript ausfÃ¼hren</span>
chmod<span class="w"> </span>+x<span class="w"> </span>install-bunkerweb.sh
sudo<span class="w"> </span>./install-bunkerweb.sh
</code></pre></div>
<div class="admonition danger">
<p class="admonition-title">Sicherheitshinweis</p>
<p><strong>ÃœberprÃ¼fen Sie immer die IntegritÃ¤t des Installationsskripts, bevor Sie es ausfÃ¼hren.</strong></p>
<p>Laden Sie die PrÃ¼fsummendatei herunter und verwenden Sie ein Werkzeug wie <code>sha256sum</code>, um zu bestÃ¤tigen, dass das Skript nicht verÃ¤ndert oder manipuliert wurde.</p>
<p>Wenn die ÃœberprÃ¼fung der PrÃ¼fsumme fehlschlÃ¤gt, <strong>fÃ¼hren Sie das Skript nicht aus</strong> â€“ es kÃ¶nnte unsicher sein.</p>
</div>
<h4 id="wie-es-funktioniert">Wie es funktioniert</h4>
<p>Das einfache Installationsskript ist ein leistungsstarkes Werkzeug, das entwickelt wurde, um die Einrichtung von BunkerWeb auf einem frischen Linux-System zu optimieren. Es automatisiert die folgenden wichtigen Schritte:</p>
<ol>
<li><strong>Systemanalyse</strong>: Erkennt Ihr Betriebssystem und Ã¼berprÃ¼ft es anhand der Liste der unterstÃ¼tzten Distributionen.</li>
<li><strong>Anpassung der Installation</strong>: Im interaktiven Modus werden Sie aufgefordert, einen Installationstyp (All-In-One, Manager, Worker usw.) auszuwÃ¤hlen und zu entscheiden, ob der webbasierte Einrichtungsassistent aktiviert werden soll.</li>
<li><strong>Optionale Integrationen</strong>: Bietet an, die <a href="#crowdsec-integration-with-the-script">CrowdSec Security Engine</a> automatisch zu installieren und zu konfigurieren.</li>
<li><strong>AbhÃ¤ngigkeitsmanagement</strong>: Installiert die korrekte Version von NGINX, die von BunkerWeb benÃ¶tigt wird, aus offiziellen Quellen und sperrt die Version, um unbeabsichtigte Upgrades zu verhindern.</li>
<li><strong>BunkerWeb-Installation</strong>: FÃ¼gt das BunkerWeb-Paket-Repository hinzu, installiert die erforderlichen Pakete und sperrt die Version.</li>
<li><strong>Dienstkonfiguration</strong>: Richtet die <code>systemd</code>-Dienste entsprechend dem von Ihnen gewÃ¤hlten Installationstyp ein und aktiviert sie.</li>
<li><strong>Anleitung nach der Installation</strong>: Bietet klare nÃ¤chste Schritte, um Ihnen den Einstieg in Ihre neue BunkerWeb-Instanz zu erleichtern.</li>
</ol>
<h4 id="interaktive-installation">Interaktive Installation</h4>
<p>Wenn das Skript ohne Optionen ausgefÃ¼hrt wird, wechselt es in einen interaktiven Modus, der Sie durch den Einrichtungsprozess fÃ¼hrt. Sie werden gebeten, die folgenden Entscheidungen zu treffen:</p>
<ol>
<li><strong>Installationstyp</strong>: WÃ¤hlen Sie die Komponenten aus, die Sie installieren mÃ¶chten.<ul>
<li><strong>Full Stack (Standard)</strong>: Eine All-in-One-Installation mit BunkerWeb, dem Scheduler und der Web-UI.</li>
<li><strong>Manager</strong>: Installiert den Scheduler und die Web-UI, um einen oder mehrere entfernte BunkerWeb-Worker zu verwalten.</li>
<li><strong>Worker</strong>: Installiert nur die BunkerWeb-Instanz, die von einem entfernten Manager verwaltet werden kann.</li>
<li><strong>Nur Scheduler</strong>: Installiert nur die Scheduler-Komponente.</li>
<li><strong>Nur Web-UI</strong>: Installiert nur die Web-UI-Komponente.</li>
<li><strong>Nur API</strong>: Installiert nur den API-Dienst fÃ¼r programmgesteuerten Zugriff.</li>
</ul>
</li>
<li><strong>Einrichtungsassistent</strong>: WÃ¤hlen Sie, ob der webbasierte Konfigurationsassistent aktiviert werden soll. Dies wird fÃ¼r Erstanwender dringend empfohlen.</li>
<li><strong>CrowdSec-Integration</strong>: Entscheiden Sie sich fÃ¼r die Installation der CrowdSec-Sicherheits-Engine fÃ¼r erweiterten Echtzeit-Bedrohungsschutz. Nur fÃ¼r Full Stack-Installationen verfÃ¼gbar.</li>
<li><strong>CrowdSec AppSec</strong>: Wenn Sie sich fÃ¼r die Installation von CrowdSec entscheiden, kÃ¶nnen Sie auch die Application Security (AppSec)-Komponente aktivieren, die WAF-Funktionen hinzufÃ¼gt.</li>
<li><strong>DNS-Resolver</strong>: FÃ¼r Full Stack-, Manager- und Worker-Installationen kÃ¶nnen Sie optional benutzerdefinierte DNS-Resolver-IPs angeben.</li>
<li><strong>Interne API HTTPS</strong>: FÃ¼r Full Stack-, Manager- und Worker-Installationen kÃ¶nnen Sie HTTPS fÃ¼r die interne API-Kommunikation zwischen Scheduler/Manager und BunkerWeb/Worker-Instanzen aktivieren (Standard: nur HTTP).</li>
<li><strong>API-Dienst</strong>: FÃ¼r Full Stack- und Manager-Installationen kÃ¶nnen Sie den optionalen externen API-Dienst aktivieren. Er ist bei Linux-Installationen standardmÃ¤ÃŸig deaktiviert.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Manager- und Scheduler-Installationen</p>
<p>Wenn Sie den Installationstyp <strong>Manager</strong> oder <strong>Nur Scheduler</strong> wÃ¤hlen, werden Sie auch aufgefordert, die IP-Adressen oder Hostnamen Ihrer BunkerWeb-Worker-Instanzen anzugeben.</p>
</div>
<h4 id="befehlszeilenoptionen">Befehlszeilenoptionen</h4>
<p>FÃ¼r nicht-interaktive oder automatisierte Setups kann das Skript mit Befehlszeilen-Flags gesteuert werden:</p>
<p><strong>Allgemeine Optionen:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-v, --version VERSION</code></td>
<td>Gibt die zu installierende BunkerWeb-Version an (z. B. <code>testing</code>).</td>
</tr>
<tr>
<td><code>-w, --enable-wizard</code></td>
<td>Aktiviert den Einrichtungsassistenten.</td>
</tr>
<tr>
<td><code>-n, --no-wizard</code></td>
<td>Deaktiviert den Einrichtungsassistenten.</td>
</tr>
<tr>
<td><code>-y, --yes</code></td>
<td>FÃ¼hrt im nicht-interaktiven Modus mit Standardantworten fÃ¼r alle Eingabeaufforderungen aus.</td>
</tr>
<tr>
<td><code>-f, --force</code></td>
<td>Erzwingt die Installation, auch auf einer nicht unterstÃ¼tzten Betriebssystemversion.</td>
</tr>
<tr>
<td><code>-q, --quiet</code></td>
<td>Stille Installation (unterdrÃ¼ckt die Ausgabe).</td>
</tr>
<tr>
<td><code>--api</code>, <code>--enable-api</code></td>
<td>Aktiviert den API (FastAPI) systemd-Dienst (standardmÃ¤ÃŸig deaktiviert).</td>
</tr>
<tr>
<td><code>--no-api</code></td>
<td>Deaktiviert den API-Dienst explizit.</td>
</tr>
<tr>
<td><code>-h, --help</code></td>
<td>Zeigt die Hilfenachricht mit allen verfÃ¼gbaren Optionen an.</td>
</tr>
<tr>
<td><code>--dry-run</code></td>
<td>Zeigt an, was installiert wÃ¼rde, ohne es zu tun.</td>
</tr>
</tbody>
</table>
<p><strong>Installationstypen:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--full</code></td>
<td>VollstÃ¤ndige Stack-Installation (BunkerWeb, Scheduler, UI). Dies ist der Standard.</td>
</tr>
<tr>
<td><code>--manager</code></td>
<td>Installiert den Scheduler und die UI zur Verwaltung von Remote-Workern.</td>
</tr>
<tr>
<td><code>--worker</code></td>
<td>Installiert nur die BunkerWeb-Instanz.</td>
</tr>
<tr>
<td><code>--scheduler-only</code></td>
<td>Installiert nur die Scheduler-Komponente.</td>
</tr>
<tr>
<td><code>--ui-only</code></td>
<td>Installiert nur die Web-UI-Komponente.</td>
</tr>
<tr>
<td><code>--api-only</code></td>
<td>Installiert nur den API-Dienst (Port 8000).</td>
</tr>
</tbody>
</table>
<p><strong>Sicherheitsintegrationen:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--crowdsec</code></td>
<td>Installiert und konfiguriert die CrowdSec-Sicherheits-Engine.</td>
</tr>
<tr>
<td><code>--no-crowdsec</code></td>
<td>Ãœberspringt die CrowdSec-Installation.</td>
</tr>
<tr>
<td><code>--crowdsec-appsec</code></td>
<td>Installiert CrowdSec mit der AppSec-Komponente (einschlieÃŸlich WAF-Funktionen).</td>
</tr>
</tbody>
</table>
<p><strong>Erweiterte Optionen:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--instances "IP1 IP2"</code></td>
<td>Durch Leerzeichen getrennte Liste von BunkerWeb-Instanzen (erforderlich fÃ¼r Manager-/Scheduler-Modi).</td>
</tr>
<tr>
<td><code>--manager-ip IPs</code></td>
<td>Manager-/Scheduler-IPs zur Whitelist (erforderlich fÃ¼r Worker im nicht-interaktiven Modus).</td>
</tr>
<tr>
<td><code>--dns-resolvers "IP1 IP2"</code></td>
<td>Benutzerdefinierte DNS-Resolver-IPs (fÃ¼r Full-, Manager- oder Worker-Installationen).</td>
</tr>
<tr>
<td><code>--api-https</code></td>
<td>HTTPS fÃ¼r interne API-Kommunikation aktivieren (Standard: nur HTTP).</td>
</tr>
<tr>
<td><code>--backup-dir PATH</code></td>
<td>Verzeichnis zum Speichern der automatischen Sicherung vor dem Upgrade.</td>
</tr>
<tr>
<td><code>--no-auto-backup</code></td>
<td>Automatische Sicherung Ã¼berspringen (Sie MÃœSSEN es manuell getan haben).</td>
</tr>
</tbody>
</table>
<p><strong>Beispielverwendung:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Im interaktiven Modus ausfÃ¼hren (fÃ¼r die meisten Benutzer empfohlen)</span>
sudo<span class="w"> </span>./install-bunkerweb.sh

<span class="c1"># Nicht-interaktive Installation mit Standardeinstellungen (vollstÃ¤ndiger Stack, Assistent aktiviert)</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--yes

<span class="c1"># Einen Worker-Knoten ohne Einrichtungsassistent installieren</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--worker<span class="w"> </span>--no-wizard

<span class="c1"># Eine bestimmte Version installieren</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--version<span class="w"> </span>testing

<span class="c1"># Manager-Setup mit entfernten Worker-Instanzen (Instanzen erforderlich)</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--manager<span class="w"> </span>--instances<span class="w"> </span><span class="s2">&quot;192.168.1.10 192.168.1.11&quot;</span>

<span class="c1"># Manager mit interner HTTPS-API-Kommunikation</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--manager<span class="w"> </span>--instances<span class="w"> </span><span class="s2">&quot;192.168.1.10 192.168.1.11&quot;</span><span class="w"> </span>--api-https

<span class="c1"># Worker mit benutzerdefinierten DNS-Resolvern und interner HTTPS-API</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--worker<span class="w"> </span>--dns-resolvers<span class="w"> </span><span class="s2">&quot;1.1.1.1 1.0.0.1&quot;</span><span class="w"> </span>--api-https

<span class="c1"># VollstÃ¤ndige Installation mit CrowdSec und AppSec</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--crowdsec-appsec

<span class="c1"># Stille nicht-interaktive Installation</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--quiet<span class="w"> </span>--yes

<span class="c1"># Installationsvorschau ohne AusfÃ¼hrung</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--dry-run

<span class="c1"># API wÃ¤hrend der einfachen Installation aktivieren (nicht-interaktiv)</span>
sudo<span class="w"> </span>./install-bunkerweb.sh<span class="w"> </span>--yes<span class="w"> </span>--api

<span class="c1"># Fehler: CrowdSec kann nicht mit Worker-Installationen verwendet werden</span>
<span class="c1"># sudo ./install-bunkerweb.sh --worker --crowdsec  # Dies schlÃ¤gt fehl</span>

<span class="c1"># Fehler: Instanzen fÃ¼r Manager im nicht-interaktiven Modus erforderlich</span>
<span class="c1"># sudo ./install-bunkerweb.sh --manager --yes  # Dies schlÃ¤gt ohne --instances fehl</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Wichtige Hinweise zur OptionskompatibilitÃ¤t</p>
<p><strong>CrowdSec-EinschrÃ¤nkungen:</strong></p>
<ul>
<li>CrowdSec-Optionen (<code>--crowdsec</code>, <code>--crowdsec-appsec</code>) sind nur mit dem Installationstyp <code>--full</code> (Standard) kompatibel</li>
<li>Sie kÃ¶nnen nicht mit <code>--manager</code>, <code>--worker</code>, <code>--scheduler-only</code>, <code>--ui-only</code> oder <code>--api-only</code> Installationen verwendet werden</li>
</ul>
<p><strong>VerfÃ¼gbarkeit des API-Dienstes:</strong></p>
<ul>
<li>Der externe API-Dienst (Port 8000) ist fÃ¼r die Installationstypen <code>--full</code> und <code>--manager</code> verfÃ¼gbar</li>
<li>Er ist nicht verfÃ¼gbar fÃ¼r <code>--worker</code>, <code>--scheduler-only</code> oder <code>--ui-only</code> Installationen</li>
<li>Verwenden Sie <code>--api-only</code> fÃ¼r eine dedizierte API-Dienst-Installation</li>
</ul>
<p><strong>Anforderungen fÃ¼r Instanzen:</strong>
- Die Option <code>--instances</code> ist nur mit den Installationstypen <code>--manager</code> und <code>--scheduler-only</code> gÃ¼ltig
- Bei Verwendung von <code>--manager</code> oder <code>--scheduler-only</code> mit <code>--yes</code> (nicht-interaktiver Modus) ist die Option <code>--instances</code> obligatorisch
- Format: <code>--instances "192.168.1.10 192.168.1.11 192.168.1.12"</code></p>
<p><strong>Interaktiv vs. Nicht-interaktiv:</strong>
- Der interaktive Modus (Standard) fordert zur Eingabe fehlender erforderlicher Werte auf
- Der nicht-interaktive Modus (<code>--yes</code>) erfordert, dass alle erforderlichen Optionen Ã¼ber die Befehlszeile bereitgestellt werden</p>
</div>
<h4 id="crowdsec-integration-with-the-script">CrowdSec-Integration mit dem Skript</h4>
<p>Wenn Sie sich fÃ¼r die Installation von CrowdSec wÃ¤hrend der interaktiven Einrichtung entscheiden, automatisiert das Skript die Integration mit BunkerWeb vollstÃ¤ndig:</p>
<ul>
<li>Es fÃ¼gt das offizielle CrowdSec-Repository hinzu und installiert den Agenten.</li>
<li>Es erstellt eine neue Erfassungsdatei, damit CrowdSec die Protokolle von BunkerWeb (<code>access.log</code>, <code>error.log</code> und <code>modsec_audit.log</code>) parsen kann.</li>
<li>Es installiert wesentliche Sammlungen (<code>bunkerity/bunkerweb</code>) und Parser (<code>crowdsecurity/geoip-enrich</code>).</li>
<li>Es registriert einen Bouncer fÃ¼r BunkerWeb und konfiguriert den API-SchlÃ¼ssel automatisch in <code>/etc/bunkerweb/variables.env</code>.</li>
<li>Wenn Sie auch die <strong>AppSec-Komponente</strong> auswÃ¤hlen, installiert es die Sammlungen <code>appsec-virtual-patching</code> und <code>appsec-generic-rules</code> und konfiguriert den AppSec-Endpunkt fÃ¼r BunkerWeb.</li>
</ul>
<p>Dies bietet eine nahtlose, sofort einsatzbereite Integration fÃ¼r einen leistungsstarken Einbruchschutz.</p>
<h4 id="rhel-uberlegungen">RHEL-Ãœberlegungen</h4>
<div class="admonition warning">
<p class="admonition-title">UnterstÃ¼tzung externer Datenbanken auf RHEL-basierten Systemen</p>
<p>Wenn Sie eine externe Datenbank verwenden mÃ¶chten (empfohlen fÃ¼r die Produktion), mÃ¼ssen Sie das entsprechende Datenbank-Client-Paket installieren:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># FÃ¼r MariaDB</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>mariadb

<span class="c1"># FÃ¼r MySQL</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>mysql

<span class="c1"># FÃ¼r PostgreSQL</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>postgresql
</code></pre></div>
<p>Dies ist erforderlich, damit der BunkerWeb-Scheduler eine Verbindung zu Ihrer externen Datenbank herstellen kann.</p>
</div>
<h4 id="nach-der-installation">Nach der Installation</h4>
<p>AbhÃ¤ngig von Ihren Entscheidungen wÃ¤hrend der Installation:</p>
<p><strong>Mit aktiviertem Einrichtungsassistenten:</strong></p>
<ol>
<li>Greifen Sie auf den Einrichtungsassistenten unter <code>https://ihre-server-ip/setup</code> zu</li>
<li>Befolgen Sie die gefÃ¼hrte Konfiguration, um Ihren ersten geschÃ¼tzten Dienst einzurichten</li>
<li>Konfigurieren Sie SSL/TLS-Zertifikate und andere Sicherheitseinstellungen</li>
</ol>
<p><strong>Ohne Einrichtungsassistent:</strong></p>
<ol>
<li>Bearbeiten Sie <code>/etc/bunkerweb/variables.env</code>, um BunkerWeb manuell zu konfigurieren</li>
<li>FÃ¼gen Sie Ihre Servereinstellungen und geschÃ¼tzten Dienste hinzu</li>
<li>Starten Sie den Scheduler neu: <code>sudo systemctl restart bunkerweb-scheduler</code></li>
</ol>
<h3 id="installation-uber-den-paketmanager">Installation Ã¼ber den Paketmanager</h3>
<p>Bitte stellen Sie sicher, dass Sie <strong>NGINX 1.28.0 installiert haben, bevor Sie BunkerWeb installieren</strong>. FÃ¼r alle Distributionen auÃŸer Fedora ist es zwingend erforderlich, vorgefertigte Pakete aus dem <a href="https://nginx.org/en/linux_packages.html">offiziellen NGINX-Repository</a> zu verwenden. Das Kompilieren von NGINX aus dem Quellcode oder die Verwendung von Paketen aus verschiedenen Repositories funktioniert nicht mit den offiziellen vorgefertigten Paketen von BunkerWeb. Sie haben jedoch die MÃ¶glichkeit, BunkerWeb aus dem Quellcode zu erstellen.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Debian Bookworm/Trixie</label><label for="__tabbed_1_2">Ubuntu</label><label for="__tabbed_1_3">Fedora</label><label for="__tabbed_1_4">RedHat</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Der erste Schritt ist das HinzufÃ¼gen des offiziellen NGINX-Repositorys:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>gnupg2<span class="w"> </span>ca-certificates<span class="w"> </span>lsb-release<span class="w"> </span>debian-archive-keyring<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
curl<span class="w"> </span>https://nginx.org/keys/nginx_signing.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span><span class="se">\</span>
<span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/usr/share/keyrings/nginx-archive-keyring.gpg<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \</span>
<span class="s2">http://nginx.org/packages/debian `lsb_release -cs` nginx&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/nginx.list
</code></pre></div>
<p>Sie sollten jetzt NGINX 1.28.0 installieren kÃ¶nnen:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allow-downgrades<span class="w"> </span><span class="nv">nginx</span><span class="o">=</span><span class="m">1</span>.28.0-1~<span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Testing/dev-Version</p>
<p>Wenn Sie die <code>testing</code>- oder <code>dev</code>-Version verwenden, mÃ¼ssen Sie die Direktive <code>force-bad-version</code> zu Ihrer <code>/etc/dpkg/dpkg.cfg</code>-Datei hinzufÃ¼gen, bevor Sie BunkerWeb installieren.</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;force-bad-version&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/dpkg/dpkg.cfg
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Einrichtungsassistenten deaktivieren</p>
<p>Wenn Sie den Einrichtungsassistenten der Web-UI bei der Installation von BunkerWeb nicht verwenden mÃ¶chten, exportieren Sie die folgende Variable:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">UI_WIZARD</span><span class="o">=</span>no
</code></pre></div>
</div>
<p>Und installieren Sie schlieÃŸlich BunkerWeb testing:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://repo.bunkerweb.io/install/script.deb.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>bash<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>-E<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allow-downgrades<span class="w"> </span><span class="nv">bunkerweb</span><span class="o">=</span>testing
</code></pre></div>
<p>Um ein Upgrade der NGINX- und/oder BunkerWeb-Pakete bei der AusfÃ¼hrung von <code>apt upgrade</code> zu verhindern, kÃ¶nnen Sie den folgenden Befehl verwenden:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-mark<span class="w"> </span>hold<span class="w"> </span>nginx<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Der erste Schritt ist das HinzufÃ¼gen des offiziellen NGINX-Repositorys:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>gnupg2<span class="w"> </span>ca-certificates<span class="w"> </span>lsb-release<span class="w"> </span>ubuntu-keyring<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
curl<span class="w"> </span>https://nginx.org/keys/nginx_signing.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span><span class="se">\</span>
<span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/usr/share/keyrings/nginx-archive-keyring.gpg<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \</span>
<span class="s2">http://nginx.org/packages/ubuntu `lsb_release -cs` nginx&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/nginx.list
</code></pre></div>
<p>Sie sollten jetzt NGINX 1.28.0 installieren kÃ¶nnen:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allow-downgrades<span class="w"> </span><span class="nv">nginx</span><span class="o">=</span><span class="m">1</span>.28.0-1~<span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Testing/dev-Version</p>
<p>Wenn Sie die <code>testing</code>- oder <code>dev</code>-Version verwenden, mÃ¼ssen Sie die Direktive <code>force-bad-version</code> zu Ihrer <code>/etc/dpkg/dpkg.cfg</code>-Datei hinzufÃ¼gen, bevor Sie BunkerWeb installieren.</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;force-bad-version&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/dpkg/dpkg.cfg
</code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Einrichtungsassistenten deaktivieren</p>
<p>Wenn Sie den Einrichtungsassistenten der Web-UI bei der Installation von BunkerWeb nicht verwenden mÃ¶chten, exportieren Sie die folgende Variable:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">UI_WIZARD</span><span class="o">=</span>no
</code></pre></div>
</div>
<p>Und installieren Sie schlieÃŸlich BunkerWeb testing:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://repo.bunkerweb.io/install/script.deb.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>bash<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>-E<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allow-downgrades<span class="w"> </span><span class="nv">bunkerweb</span><span class="o">=</span>testing
</code></pre></div>
<p>Um ein Upgrade der NGINX- und/oder BunkerWeb-Pakete bei der AusfÃ¼hrung von <code>apt upgrade</code> zu verhindern, kÃ¶nnen Sie den folgenden Befehl verwenden:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-mark<span class="w"> </span>hold<span class="w"> </span>nginx<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition info">
<p class="admonition-title">Fedora Update Testing</p>
<p>Wenn Sie die NGINX-Version nicht im stabilen Repository finden kÃ¶nnen, kÃ¶nnen Sie das <code>updates-testing</code>-Repository aktivieren:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>config-manager<span class="w"> </span>setopt<span class="w"> </span>updates-testing.enabled<span class="o">=</span><span class="m">1</span>
</code></pre></div>
</div>
<p>Fedora stellt bereits NGINX 1.28.0 zur VerfÃ¼gung, das wir unterstÃ¼tzen</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allowerasing<span class="w"> </span>nginx-1.28.0
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Einrichtungsassistenten deaktivieren</p>
<p>Wenn Sie den Einrichtungsassistenten der Web-UI bei der Installation von BunkerWeb nicht verwenden mÃ¶chten, exportieren Sie die folgende Variable:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">UI_WIZARD</span><span class="o">=</span>no
</code></pre></div>
</div>
<p>Und installieren Sie schlieÃŸlich BunkerWeb testing:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://repo.bunkerweb.io/install/script.rpm.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>bash<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>makecache<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>-E<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allowerasing<span class="w"> </span>bunkerweb-testing
</code></pre></div>
<p>Um ein Upgrade der NGINX- und/oder BunkerWeb-Pakete bei der AusfÃ¼hrung von <code>dnf upgrade</code> zu verhindern, kÃ¶nnen Sie den folgenden Befehl verwenden:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>versionlock<span class="w"> </span>add<span class="w"> </span>nginx<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>versionlock<span class="w"> </span>add<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Der erste Schritt ist das HinzufÃ¼gen des offiziellen NGINX-Repositorys. Erstellen Sie die folgende Datei unter <code>/etc/yum.repos.d/nginx.repo</code>:</p>
<div class="highlight"><pre><span></span><code>[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/$releasever/$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true

[nginx-mainline]
name=nginx mainline repo
baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/
gpgcheck=1
enabled=0
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true
</code></pre></div>
<p>Sie sollten jetzt NGINX 1.28.0 installieren kÃ¶nnen:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>--allowerasing<span class="w"> </span>nginx-1.28.0
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Einrichtungsassistenten deaktivieren</p>
<p>Wenn Sie den Einrichtungsassistenten der Web-UI bei der Installation von BunkerWeb nicht verwenden mÃ¶chten, exportieren Sie die folgende Variable:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">UI_WIZARD</span><span class="o">=</span>no
</code></pre></div>
</div>
<p>Und installieren Sie schlieÃŸlich BunkerWeb testing:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://repo.bunkerweb.io/install/script.rpm.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>bash<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>check-update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>-E<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--allowerasing<span class="w"> </span>bunkerweb-testing
</code></pre></div>
<p>Um ein Upgrade der NGINX- und/oder BunkerWeb-Pakete bei der AusfÃ¼hrung von <code>dnf upgrade</code> zu verhindern, kÃ¶nnen Sie den folgenden Befehl verwenden:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>versionlock<span class="w"> </span>add<span class="w"> </span>nginx<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>dnf<span class="w"> </span>versionlock<span class="w"> </span>add<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
</div>
</div>
<h3 id="konfiguration-und-dienst">Konfiguration und Dienst</h3>
<p>Die manuelle Konfiguration von BunkerWeb erfolgt durch Bearbeiten der Datei <code>/etc/bunkerweb/variables.env</code>:</p>
<div class="highlight"><pre><span></span><code>MEINE_EINSTELLUNG_1=wert1
MEINE_EINSTELLUNG_2=wert2
...```

Bei der Installation wird BunkerWeb mit drei Diensten `bunkerweb`, `bunkerweb-scheduler` und `bunkerweb-ui` geliefert, die Sie mit `systemctl` verwalten kÃ¶nnen.

Wenn Sie die BunkerWeb-Konfiguration manuell Ã¼ber `/etc/bunkerweb/variables.env` bearbeiten, reicht ein Neustart des `bunkerweb-scheduler`-Dienstes aus, um die Konfiguration ohne Ausfallzeit zu generieren und neu zu laden. In bestimmten FÃ¤llen (z. B. bei Ã„nderung der lauschenden Ports) mÃ¼ssen Sie jedoch mÃ¶glicherweise den `bunkerweb`-Dienst neu starten.

### HochverfÃ¼gbarkeit

Der Scheduler kann von der BunkerWeb-Instanz getrennt werden, um eine hohe VerfÃ¼gbarkeit zu gewÃ¤hrleisten. In diesem Fall wird der Scheduler auf einem separaten Server installiert und kann mehrere BunkerWeb-Instanzen verwalten.

#### Manager

Um nur den Scheduler auf einem Server zu installieren, kÃ¶nnen Sie die folgenden Variablen exportieren, bevor Sie die BunkerWeb-Installation ausfÃ¼hren:

```shell
export MANAGER_MODE=yes
export UI_WIZARD=no
</code></pre></div>
<p>Alternativ kÃ¶nnen Sie auch die folgenden Variablen exportieren, um nur den Scheduler zu aktivieren:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_SCHEDULER</span><span class="o">=</span>yes
<span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_BUNKERWEB</span><span class="o">=</span>no
<span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_UI</span><span class="o">=</span>no
</code></pre></div>
<h4 id="worker">Worker</h4>
<p>Um nur BunkerWeb auf einem anderen Server zu installieren, kÃ¶nnen Sie die folgenden Variablen exportieren, bevor Sie die BunkerWeb-Installation ausfÃ¼hren:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">WORKER_MODE</span><span class="o">=</span>yes
</code></pre></div>
<p>Alternativ kÃ¶nnen Sie auch die folgenden Variablen exportieren, um nur BunkerWeb zu aktivieren:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_BUNKERWEB</span><span class="o">=</span>yes
<span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_SCHEDULER</span><span class="o">=</span>no
<span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_UI</span><span class="o">=</span>no
</code></pre></div>
<h4 id="web-ui">Web-UI</h4>
<p>Die Web-UI kann auf einem separaten Server installiert werden, um eine dedizierte Schnittstelle zur Verwaltung von BunkerWeb-Instanzen bereitzustellen. Um nur die Web-UI zu installieren, kÃ¶nnen Sie die folgenden Variablen exportieren, bevor Sie die BunkerWeb-Installation ausfÃ¼hren:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_BUNKERWEB</span><span class="o">=</span>no
<span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_SCHEDULER</span><span class="o">=</span>no
<span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_UI</span><span class="o">=</span>yes
</code></pre></div>
<h2 id="docker-autoconf">Docker Autoconf</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/integration-autoconf.svg" width="600" />
  </p>
<figcaption>Docker Autoconf-Integration</figcaption>
</figure>
<div class="admonition info">
<p class="admonition-title">Docker-Integration</p>
<p>Die Docker Autoconf-Integration ist eine "Weiterentwicklung" der Docker-Integration. Bitte lesen Sie bei Bedarf zuerst den <a href="#docker">Docker-Integrationsabschnitt</a>.</p>
</div>
<p>Ein alternativer Ansatz ist verfÃ¼gbar, um die Unannehmlichkeit zu beheben, den Container bei jedem Update neu erstellen zu mÃ¼ssen. Durch die Verwendung eines anderen Images namens <strong>autoconf</strong> kÃ¶nnen Sie die Echtzeit-Rekonfiguration von BunkerWeb automatisieren, ohne dass eine Neuerstellung des Containers erforderlich ist.</p>
<p>Um diese FunktionalitÃ¤t zu nutzen, kÃ¶nnen Sie anstelle von Umgebungsvariablen fÃ¼r den BunkerWeb-Container <strong>Labels</strong> zu Ihren Webanwendungs-Containern hinzufÃ¼gen. Das <strong>autoconf</strong>-Image lauscht dann auf Docker-Ereignisse und Ã¼bernimmt nahtlos die Konfigurationsupdates fÃ¼r BunkerWeb.</p>
<p>Dieser "<em>automagische</em>" Prozess vereinfacht die Verwaltung von BunkerWeb-Konfigurationen. Durch das HinzufÃ¼gen von Labels zu Ihren Webanwendungs-Containern kÃ¶nnen Sie die Rekonfigurationsaufgaben an <strong>autoconf</strong> delegieren, ohne den manuellen Eingriff der Neuerstellung des Containers. Dies optimiert den Aktualisierungsprozess und erhÃ¶ht den Komfort.</p>
<p>Durch die Ãœbernahme dieses Ansatzes kÃ¶nnen Sie eine Echtzeit-Rekonfiguration von BunkerWeb ohne den Aufwand der Neuerstellung von Containern genieÃŸen, was es effizienter und benutzerfreundlicher macht.</p>
<div class="admonition info">
<p class="admonition-title">Multisite-Modus</p>
<p>Die Docker Autoconf-Integration impliziert die Verwendung des <strong>Multisite-Modus</strong>. Weitere Informationen finden Sie im <a href="../concepts/#multisite-mode">Multisite-Abschnitt</a> der Dokumentation.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Datenbank-Backend</p>
<p>Bitte beachten Sie, dass unsere Anweisungen davon ausgehen, dass Sie MariaDB als Standard-Datenbank-Backend verwenden, wie durch die Einstellung <code>DATABASE_URI</code> konfiguriert. Wir verstehen jedoch, dass Sie mÃ¶glicherweise alternative Backends fÃ¼r Ihre Docker-Integration bevorzugen. In diesem Fall kÃ¶nnen Sie sicher sein, dass auch andere Datenbank-Backends mÃ¶glich sind. Weitere Informationen finden Sie in den docker-compose-Dateien im Ordner <a href="https://github.com/bunkerity/bunkerweb/tree/vtesting/misc/integrations">misc/integrations</a> des Repositorys.</p>
</div>
<p>Um automatisierte Konfigurationsupdates zu ermÃ¶glichen, fÃ¼gen Sie einen zusÃ¤tzlichen Container namens <code>bw-autoconf</code> zum Stack hinzu. Dieser Container hostet den Autoconf-Dienst, der dynamische KonfigurationsÃ¤nderungen fÃ¼r BunkerWeb verwaltet.</p>
<p>Um diese FunktionalitÃ¤t zu unterstÃ¼tzen, verwenden Sie ein dediziertes "echtes" Datenbank-Backend (z. B. MariaDB, MySQL oder PostgreSQL) zur synchronisierten Konfigurationsspeicherung. Durch die Integration von <code>bw-autoconf</code> und einem geeigneten Datenbank-Backend schaffen Sie die Infrastruktur fÃ¼r eine nahtlose automatisierte Konfigurationsverwaltung in BunkerWeb.</p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-env</span>
<span class="w">  </span><span class="c1"># Wir verwenden einen Anker, um die Wiederholung derselben Einstellungen fÃ¼r beide Container zu vermeiden</span>
<span class="w">  </span><span class="nt">AUTOCONF_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span><span class="w"> </span><span class="c1"># QUIC</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.INSTANCE=yes&quot;</span><span class="w"> </span><span class="c1"># Obligatorisches Label fÃ¼r den Autoconf-Dienst, um die BunkerWeb-Instanz zu identifizieren</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># Wir mÃ¼ssen die BunkerWeb-Instanz hier nicht angeben, da sie automatisch vom Autoconf-Dienst erkannt werden</span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># Der Servername wird mit Dienst-Labels gefÃ¼llt</span>
<span class="w">      </span><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w"> </span><span class="c1"># Obligatorische Einstellung fÃ¼r Autoconf</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># Denken Sie daran, ein stÃ¤rkeres Passwort fÃ¼r die Datenbank festzulegen</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Wird verwendet, um den Cache und andere Daten wie Backups zu persistieren</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">bw-autoconf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-autoconf:testing</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">AUTOCONF_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># Denken Sie daran, ein stÃ¤rkeres Passwort fÃ¼r die Datenbank festzulegen</span>
<span class="w">      </span><span class="nt">DOCKER_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tcp://bw-docker:2375&quot;</span><span class="w"> </span><span class="c1"># Der Docker-Socket</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">bw-docker</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tecnativa/docker-socket-proxy:nightly</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">CONTAINERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;warning&quot;</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>

<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb:11</span>
<span class="w">    </span><span class="c1"># Wir setzen die maximal zulÃ¤ssige PaketgrÃ¶ÃŸe, um Probleme mit groÃŸen Abfragen zu vermeiden</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--max-allowed-packet=67108864</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;db&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changeme&quot;</span><span class="w"> </span><span class="c1"># Denken Sie daran, ein stÃ¤rkeres Passwort fÃ¼r die Datenbank festzulegen</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">  </span><span class="nt">bw-docker</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>
<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Datenbank im <code>bw-db</code>-Netzwerk</p>
<p>Der Datenbankcontainer ist absichtlich nicht im <code>bw-universe</code>-Netzwerk enthalten. Er wird von den Containern <code>bw-autoconf</code> und <code>bw-scheduler</code> und nicht direkt von BunkerWeb verwendet. Daher ist der Datenbankcontainer Teil des <code>bw-db</code>-Netzwerks, was die Sicherheit erhÃ¶ht, indem der externe Zugriff auf die Datenbank erschwert wird. <strong>Diese bewusste Designentscheidung hilft, die Datenbank zu schÃ¼tzen und die allgemeine Sicherheitsperspektive des Systems zu stÃ¤rken</strong>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Verwendung von Docker im rootless-Modus</p>
<p>Wenn Sie <a href="https://docs.docker.com/engine/security/rootless">Docker im rootless-Modus</a> verwenden, mÃ¼ssen Sie den Mount des Docker-Sockets durch den folgenden Wert ersetzen: <code>$XDG_RUNTIME_DIR/docker.sock:/var/run/docker.sock:ro</code>.</p>
</div>
<h3 id="autoconf-dienste">Autoconf-Dienste</h3>
<p>Sobald der Stack eingerichtet ist, kÃ¶nnen Sie den Webanwendungs-Container erstellen und die Einstellungen als Labels mit dem PrÃ¤fix "bunkerweb" hinzufÃ¼gen, um BunkerWeb automatisch einzurichten:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myapp</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mywebapp:4.2</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_1=value1&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_2=value2&quot;</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
</code></pre></div>
<h3 id="namespaces">Namespaces</h3>
<p>Ab Version <code>1.6.0</code> unterstÃ¼tzen die Autoconf-Stacks von BunkerWeb Namespaces. Mit dieser Funktion kÃ¶nnen Sie mehrere "<em>Cluster</em>" von BunkerWeb-Instanzen und -Diensten auf demselben Docker-Host verwalten. Um Namespaces zu nutzen, setzen Sie einfach das <code>NAMESPACE</code>-Label auf Ihre Dienste. Hier ist ein Beispiel:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myapp</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mywebapp:4.2</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.NAMESPACE=my-namespace&quot;</span><span class="w"> </span><span class="c1"># Setzen Sie den Namespace fÃ¼r den Dienst</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_1=value1&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_2=value2&quot;</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Namespace-Verhalten</p>
<p>StandardmÃ¤ÃŸig lauschen alle Autoconf-Stacks auf alle Namespaces. Wenn Sie einen Stack auf bestimmte Namespaces beschrÃ¤nken mÃ¶chten, kÃ¶nnen Sie die Umgebungsvariable <code>NAMESPACES</code> im <code>bw-autoconf</code>-Dienst setzen:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.INSTANCE=yes&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.NAMESPACE=my-namespace&quot;</span><span class="w"> </span><span class="c1"># Setzen Sie den Namespace fÃ¼r die BunkerWeb-Instanz, damit der Autoconf-Dienst sie erkennen kann</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">bw-autoconf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-autoconf:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">NAMESPACES</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;my-namespace</span><span class="nv"> </span><span class="s">my-other-namespace&quot;</span><span class="w"> </span><span class="c1"># Lauschen Sie nur auf diese Namespaces</span>
<span class="nn">...</span>
</code></pre></div>
<p>Beachten Sie, dass die Umgebungsvariable <code>NAMESPACES</code> eine durch Leerzeichen getrennte Liste von Namespaces ist.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Namespace-Spezifikationen</p>
<p>Es kann nur <strong>eine Datenbank</strong> und <strong>ein Scheduler</strong> pro Namespace geben. Wenn Sie versuchen, mehrere Datenbanken oder Scheduler im selben Namespace zu erstellen, kommt es zu Konfigurationskonflikten.</p>
<p>Der Scheduler benÃ¶tigt das <code>NAMESPACE</code>-Label nicht, um ordnungsgemÃ¤ÃŸ zu funktionieren. Er benÃ¶tigt nur die korrekt konfigurierte Einstellung <code>DATABASE_URI</code>, damit er auf dieselbe Datenbank wie der Autoconf-Dienst zugreifen kann.</p>
</div>
<h2 id="kubernetes">Kubernetes</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/integration-kubernetes.svg" width="600" />
  </p>
<figcaption>Kubernetes-Integration</figcaption>
</figure>
<p>Um die Konfiguration von BunkerWeb-Instanzen in einer Kubernetes-Umgebung zu automatisieren,
dient der Autoconf-Dienst als <a href="https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/">Ingress-Controller</a>.
Er konfiguriert die BunkerWeb-Instanzen basierend auf <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Ingress-Ressourcen</a>
und Ã¼berwacht auch andere Kubernetes-Objekte wie <a href="https://kubernetes.io/docs/concepts/configuration/configmap/">ConfigMap</a>
fÃ¼r benutzerdefinierte Konfigurationen.</p>
<div class="admonition info">
<p class="admonition-title">ConfigMap-Abgleich</p>
<ul>
<li>Der Ingress-Controller verwaltet nur ConfigMaps, die die Annotation <code>bunkerweb.io/CONFIG_TYPE</code> enthalten.</li>
<li>ErgÃ¤nzen Sie <code>bunkerweb.io/CONFIG_SITE</code>, wenn die Konfiguration auf einen einzelnen Dienst eingeschrÃ¤nkt werden soll
  (der Servername muss bereits existieren); lassen Sie die Annotation weg, um sie global anzuwenden.</li>
<li>Wird die Annotation entfernt oder die ConfigMap gelÃ¶scht, verschwindet die zugehÃ¶rige benutzerdefinierte Konfiguration in BunkerWeb.</li>
</ul>
</div>
<p>FÃ¼r eine optimale Einrichtung wird empfohlen, BunkerWeb als <strong><a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSet</a></strong> zu definieren, was sicherstellt, dass auf allen Knoten ein Pod erstellt wird, wÃ¤hrend <strong>Autoconf und Scheduler</strong> als <strong>einzeln repliziertes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a></strong> definiert werden.</p>
<p>Angesichts des Vorhandenseins mehrerer BunkerWeb-Instanzen ist es erforderlich, einen gemeinsamen Datenspeicher zu implementieren, der als <a href="https://redis.io/">Redis</a>- oder <a href="https://valkey.io/">Valkey</a>-Dienst realisiert wird. Dieser Dienst wird von den Instanzen genutzt, um Daten zwischen ihnen zu cachen und zu teilen. Weitere Informationen zu den Redis/Valkey-Einstellungen finden Sie <a href="../features/#redis">hier</a>.</p>
<div class="admonition info">
<p class="admonition-title">Datenbank-Backend</p>
<p>Bitte beachten Sie, dass unsere Anweisungen davon ausgehen, dass Sie MariaDB als Standard-Datenbank-Backend verwenden, wie durch die Einstellung <code>DATABASE_URI</code> konfiguriert. Wir verstehen jedoch, dass Sie mÃ¶glicherweise alternative Backends fÃ¼r Ihre Docker-Integration bevorzugen. In diesem Fall kÃ¶nnen Sie sicher sein, dass auch andere Datenbank-Backends mÃ¶glich sind. Weitere Informationen finden Sie in den docker-compose-Dateien im Ordner <a href="https://github.com/bunkerity/bunkerweb/tree/vtesting/misc/integrations">misc/integrations</a> des Repositorys.</p>
<p>Die Einrichtung von geclusterten Datenbank-Backends liegt auÃŸerhalb des Geltungsbereichs dieser Dokumentation.</p>
</div>
<p>Bitte stellen Sie sicher, dass die Autoconf-Dienste Zugriff auf die Kubernetes-API haben. Es wird empfohlen, hierfÃ¼r die <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">RBAC-Autorisierung</a> zu verwenden.</p>
<div class="admonition warning">
<p class="admonition-title">Benutzerdefinierte CA fÃ¼r die Kubernetes-API</p>
<p>Wenn Sie eine benutzerdefinierte CA fÃ¼r Ihre Kubernetes-API verwenden, kÃ¶nnen Sie eine Bundle-Datei mit Ihren Zwischen- und Stammzertifikaten auf dem Ingress-Controller mounten und den Umgebungswert <code>KUBERNETES_SSL_CA_CERT</code> auf den Pfad des Bundles im Container setzen. Alternativ kÃ¶nnen Sie, auch wenn es nicht empfohlen wird, die ZertifikatsÃ¼berprÃ¼fung deaktivieren, indem Sie die Umgebungsvariable <code>KUBERNETES_SSL_VERIFY</code> des Ingress-Controllers auf <code>no</code> setzen (Standard ist <code>yes</code>).</p>
</div>
<p>DarÃ¼ber hinaus <strong>ist es entscheidend, die Umgebungsvariable <code>KUBERNETES_MODE</code> auf <code>yes</code> zu setzen, wenn die Kubernetes-Integration verwendet wird</strong>. Diese Variable ist fÃ¼r die ordnungsgemÃ¤ÃŸe FunktionalitÃ¤t obligatorisch.</p>
<h3 id="installationsmethoden">Installationsmethoden</h3>
<h4 id="verwendung-des-helm-charts-empfohlen">Verwendung des Helm-Charts (empfohlen)</h4>
<p>Die empfohlene Methode zur Installation von Kubernetes ist die Verwendung des Helm-Charts, das unter <code>https://repo.bunkerweb.io/charts</code> verfÃ¼gbar ist:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bunkerweb<span class="w"> </span>https://repo.bunkerweb.io/charts
</code></pre></div>
<p>Sie kÃ¶nnen dann das BunkerWeb-Helm-Chart aus diesem Repository verwenden:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>install<span class="w"> </span>-f<span class="w"> </span>myvalues.yaml<span class="w"> </span>mybunkerweb<span class="w"> </span>bunkerweb/bunkerweb
</code></pre></div>
<p>Die vollstÃ¤ndige Liste der Werte ist in der Datei <a href="https://github.com/bunkerity/bunkerweb-helm/blob/main/charts/bunkerweb/values.yaml">charts/bunkerweb/values.yaml</a> des <a href="https://github.com/bunkerity/bunkerweb-helm">bunkerity/bunkerweb-helm-Repositorys</a> aufgefÃ¼hrt.</p>
<h4 id="sidecar-container-helm">Sidecar Container + Helm</h4>
<p>This documentation explains how to deploy BunkerWeb as a sidecar to protect your Kubernetes applications. In this architecture, each application has its own BunkerWeb container acting as a security reverse proxy.</p>
<h5 id="architecture">Architecture</h5>
<pre class="mermaid"><code>flowchart TB

  %% ---------- Stil ----------
  classDef scheduler     fill:#eef2ff,stroke:#4c1d95,stroke-width:1px,rx:6px,ry:6px;
  classDef podContainer  fill:none,stroke:#9ca3af,stroke-width:1px,stroke-dasharray:6 3,rx:6px,ry:6px;
  classDef component     fill:#f9fafb,stroke:#6b7280,stroke-width:1px,rx:4px,ry:4px;
  classDef lb            fill:#e0f2fe,stroke:#0369a1,stroke-width:1px,rx:6px,ry:6px;

  %% ---------- Oben: Scheduler ----------
  SCHED["BunkerWeb Scheduler (zentralisiert)&lt;br/&gt;+ UI + MariaDB + Redis"]:::scheduler

  %% ---------- Pods-Gruppe ----------
  subgraph PODS["Pods"]
    %% Anwendungs-Pod 1 ----------
    subgraph POD1["Anwendungs-Pod"]
      BW1["BunkerWeb"]:::component
      APP1["Anwendung&lt;br/&gt;(Port 80)"]:::component
      BW1 --&gt;|legitime Anfragen| APP1
    end
    class POD1 podContainer

    %% Anwendungs-Pod 2 ----------
    subgraph POD2["Anwendungs-Pod"]
      BW2["BunkerWeb"]:::component
      APP2["Anwendung&lt;br/&gt;(Port XX)"]:::component
      BW2 --&gt;|legitime Anfragen| APP2
    end
    class POD2 podContainer
  end

  %% ---------- Lastenausgleich (unten) ----------
  LB["Lastenausgleich"]:::lb

  %% ---------- Verbindungen (sichtbar, semantisch) ----------
  %% Der Scheduler steuert die BunkerWeb-Instanzen (API)
  SCHED --&gt;|API 5000| BW1
  SCHED --&gt;|API 5000| BW2

  %% Der Load Balancer leitet den Datenverkehr an BunkerWeb weiter
  LB --&gt;|HTTP/HTTPS| BW1
  LB --&gt;|HTTP/HTTPS| BW2

  %% ---------- Layout-Hilfe (versteckt) ----------
  %% Platziere den Load Balancer unter der gesamten PODS-Gruppe
  PODS --&gt; LB
  linkStyle 6 stroke-width:0px,stroke:transparent;</code></pre>
<h5 id="prerequisites">Prerequisites</h5>
<ul>
<li>A working Kubernetes cluster</li>
<li>Helm 3.x installed</li>
<li>BunkerWeb Helm chart deployed with:</li>
<li><code>scheduler</code> enabled</li>
<li><code>ui</code> enabled</li>
<li><code>mariadb</code> enabled (to store configurations)</li>
<li><code>redis</code> enabled (for synchronization)</li>
<li><code>controller</code> enabled (recommended for automatic sidecar discovery)</li>
<li><code>bunkerweb.replicas: 0</code> (no standalone deployment)</li>
</ul>
<h5 id="sidecar-discovery-modes">Sidecar Discovery Modes</h5>
<p>BunkerWeb offers two modes for sidecar discovery:</p>
<h6 id="mode-1-automatic-discovery-controller-recommended">Mode 1: Automatic Discovery (Controller - Recommended)</h6>
<p>The <strong>BunkerWeb controller</strong> automatically discovers pods with BunkerWeb sidecars without manual configuration.</p>
<p><strong>Advantages:</strong>
- âœ… Automatic discovery of new sidecars
- âœ… No need to manually maintain <code>BUNKERWEB_INSTANCES</code>
- âœ… Automatic scaling</p>
<p><strong>Configuration:</strong></p>
<ol>
<li>
<p>Enable the controller in <code>values.yaml</code>:
<div class="highlight"><pre><span></span><code><span class="nt">controller</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.6.5&quot;</span>
</code></pre></div></p>
</li>
<li>
<p>For each sidecar, add:</p>
</li>
<li><strong>Pod annotation</strong>: <code>bunkerweb.io/INSTANCE: "yes"</code></li>
<li><strong>Environment variable</strong>: <code>KUBERNETES_MODE: "yes"</code></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-bunkerweb</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-bw</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-bw</span>
<span class="w">      </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Mandatory annotation for auto-discovery when using bunkerweb-controller</span>
<span class="w">        </span><span class="nt">bunkerweb.io/INSTANCE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Random WebApp you want to protect</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:latest</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">        </span><span class="c1"># Sidecar BunkerWeb</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:latest</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bwapi</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9113</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
<span class="w">          </span><span class="nt">env</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">API_WHITELIST_IP</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.0.0.0/8</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">192.168.0.0/16&quot;</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KUBERNETES_MODE</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-bunkerweb</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-bw</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span><span class="w"> </span><span class="c1"># BunkerWeb exposed port</span>
</code></pre></div>
<ol>
<li>
<p><strong>No need for headless service</strong> - the controller communicates directly with pods</p>
</li>
<li>
<p><strong>No need</strong> to manually configure the scheduler with <code>BUNKERWEB_INSTANCES</code> - the controller handles discovery</p>
</li>
</ol>
<h6 id="mode-2-manual-configuration-bunkerweb_instances">Mode 2: Manual Configuration (BUNKERWEB_INSTANCES)</h6>
<p>Explicit configuration of each instance via the <code>BUNKERWEB_INSTANCES</code> environment variable.</p>
<p><strong>Advantages:</strong>
- âœ… Precise control over managed instances
- âœ… Useful for complex multi-namespace environments</p>
<p><strong>Configuration:</strong></p>
<p>See the following sections for details.</p>
<h5 id="step-1-scheduler-configuration">Step 1: Scheduler Configuration</h5>
<p>The BunkerWeb scheduler is the central component that distributes configurations to all sidecars.</p>
<h6 id="option-a-with-controller-recommended">Option A: With Controller (Recommended)</h6>
<p>If you're using the controller for automatic discovery, <strong>no special configuration is needed</strong> for the scheduler. The controller will automatically detect pods with the <code>bunkerweb.io/INSTANCE: "yes"</code> annotation.</p>
<h6 id="option-b-manual-configuration-with-bunkerweb_instances">Option B: Manual Configuration with <code>BUNKERWEB_INSTANCES</code></h6>
<p>In your BunkerWeb chart <code>values.yaml</code>, configure the <code>BUNKERWEB_INSTANCES</code> environment variable with the URLs of all your headless services:</p>
<div class="highlight"><pre><span></span><code><span class="nt">scheduler</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.6.5&quot;</span>
<span class="w">  </span><span class="nt">extraEnvs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BUNKERWEB_INSTANCES</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://app1-bunkerweb-workers.namespace.svc.cluster.local:5000</span><span class="nv"> </span><span class="s">http://app2-bunkerweb-workers.namespace.svc.cluster.local:5000&quot;</span>
</code></pre></div>
<p><strong>Important:</strong>
- Separate URLs with spaces
- Use port <strong>5000</strong> (BunkerWeb internal API)
- Format: <code>http://&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local:5000</code></p>
<h5 id="step-2-creating-the-deployment-with-sidecar">Step 2: Creating the Deployment with Sidecar</h5>
<h6 id="deployment-structure-with-controller-automatic-mode-recommended">Deployment Structure with Controller (Automatic Mode - Recommended)</h6>
<p><strong>Recommended configuration</strong> with automatic discovery:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app-bunkerweb</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">      </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bunkerweb.io/INSTANCE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w">  </span><span class="c1"># Enable automatic discovery</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Your application</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-image:latest</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w">  </span><span class="c1"># Port your app listens on</span>

<span class="w">        </span><span class="c1"># BunkerWeb Sidecar</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing-rc2</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span><span class="w">  </span><span class="c1"># Exposed HTTP port</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span><span class="w">  </span><span class="c1"># Internal API (mandatory)</span>
<span class="w">          </span><span class="nt">env</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KUBERNETES_MODE</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w">  </span><span class="c1"># Enable Kubernetes mode</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">API_WHITELIST_IP</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.0.0.0/8</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">192.168.0.0/16&quot;</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MULTISITE</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">USE_REVERSE_PROXY</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LOG_LEVEL</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span>
</code></pre></div>
<p><strong>Key points for automatic mode:</strong>
- âœ… <strong>Mandatory annotation</strong>: <code>bunkerweb.io/INSTANCE: "yes"</code> at pod level
- âœ… <strong>Mandatory environment variable</strong>: <code>KUBERNETES_MODE: "yes"</code>
- âœ… <strong>No headless service needed</strong>: the controller communicates directly with pods via Kubernetes API
- âœ… <strong>No need to manually configure</strong> <code>BUNKERWEB_INSTANCES</code></p>
<h6 id="deployment-structure-without-controller-manual-mode">Deployment Structure without Controller (Manual Mode)</h6>
<p>If you're not using the controller:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app-bunkerweb</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Your application</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-image:latest</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w">  </span><span class="c1"># Port your app listens on</span>

<span class="w">        </span><span class="c1"># BunkerWeb Sidecar</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:1.6.5</span>
<span class="w">          </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span><span class="w">  </span><span class="c1"># Exposed HTTP port</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span><span class="w">  </span><span class="c1"># Internal API (mandatory)</span>
<span class="w">          </span><span class="nt">env</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">API_WHITELIST_IP</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.0.0.0/8</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">192.168.0.0/16&quot;</span>
</code></pre></div>
<h6 id="important-environment-variables">Important Environment Variables</h6>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>KUBERNETES_MODE</code></td>
<td><code>yes</code></td>
<td><strong>Mandatory</strong> for automatic discovery via the controller</td>
</tr>
<tr>
<td><code>API_WHITELIST_IP</code></td>
<td><code>127.0.0.0/8 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16</code></td>
<td>IPs allowed to access the API</td>
</tr>
</tbody>
</table>
<h5 id="step-3-creating-services">Step 3: Creating Services</h5>
<h6 id="clusterip-service-external-exposure">ClusterIP Service (external exposure)</h6>
<p>Service to expose your application through BunkerWeb:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app-bunkerweb</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span><span class="w">  </span><span class="c1"># or LoadBalancer depending on your needs</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span><span class="w">  </span><span class="c1"># BunkerWeb port</span>
</code></pre></div>
<h6 id="headless-service-internal-api-conditional">Headless Service (internal API) - Conditional</h6>
<p><strong>Only required in manual mode (without controller)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app-bunkerweb-workers</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterIP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span><span class="w">  </span><span class="c1"># Headless service</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bwapi</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
</code></pre></div>
<p><strong>Important:</strong>
- âš ï¸ <strong>Not required with controller</strong> - the controller communicates directly with pods via Kubernetes API
- âœ… <strong>Mandatory without controller</strong> - this service name must be manually added to <code>BUNKERWEB_INSTANCES</code>
- The <code>selector</code> must match your deployment labels</p>
<h5 id="step-4-reverse-proxy-configuration">Step 4: Reverse Proxy Configuration</h5>
<p>You have <strong>two options</strong> to configure the reverse proxy:</p>
<h6 id="option-a-via-web-interface-ui">Option A: Via Web Interface (UI)</h6>
<ol>
<li>Access the BunkerWeb UI</li>
<li>Go to the <strong>"Services"</strong></li>
<li>Create a new service with:</li>
<li><strong>Server name</strong>: <code>my-app.example.com</code></li>
<li><strong>Reverse proxy host</strong>: <code>http://127.0.0.1:80</code> (or your app's port)</li>
<li><strong>Use reverse proxy</strong>: <code>yes</code></li>
<li>Save</li>
</ol>
<p>The scheduler will automatically send the configuration to the sidecar via the API (port 5000).</p>
<h6 id="option-b-via-environment-variables">Option B: Via Environment Variables</h6>
<p>Add these variables in the <code>bunkerweb</code> container:</p>
<div class="highlight"><pre><span></span><code><span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MULTISITE</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SERVER_NAME</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-app.example.com&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app.example.com_USE_REVERSE_PROXY</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app.example.com_REVERSE_PROXY_HOST</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://127.0.0.1:80&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-app.example.com_REVERSE_PROXY_URL</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
</code></pre></div>
<p><strong>Note:</strong> The UI option is recommended for centralized and dynamic management.</p>
<h5 id="step-5-deployment">Step 5: Deployment</h5>
<h6 id="with-controller-automatic-mode-recommended">With Controller (Automatic Mode - Recommended)</h6>
<ol>
<li><strong>Deploy your application with the sidecar</strong>:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-app-deployment.yaml
</code></pre></div></li>
</ol>
<p>Make sure that:
   - The annotation <code>bunkerweb.io/INSTANCE: "yes"</code> is present in <code>template.metadata.annotations</code>
   - The variable <code>KUBERNETES_MODE: "yes"</code> is defined in the bunkerweb container</p>
<ol>
<li>
<p><strong>Verify that the controller detects the sidecar</strong>:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>bunkerweb<span class="w"> </span>deployment/bunkerweb-controller<span class="w"> </span>-f
</code></pre></div>
   You should see logs indicating the discovery of the new pod.</p>
</li>
<li>
<p><strong>Create the reverse proxy configuration</strong> via the BunkerWeb UI</p>
</li>
<li>
<p><strong>Test your application</strong>:
   <div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: my-app.example.com&quot;</span><span class="w"> </span>http://&lt;service-ip&gt;
</code></pre></div></p>
</li>
</ol>
<h6 id="without-controller-manual-mode">Without Controller (Manual Mode)</h6>
<ol>
<li>
<p><strong>Deploy your application with the sidecar</strong>:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-app-deployment.yaml
</code></pre></div></p>
</li>
<li>
<p><strong>Add the headless service to <code>BUNKERWEB_INSTANCES</code></strong>:
   Update your <code>values.yaml</code> and upgrade the Helm chart:
   <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>bunkerweb<span class="w"> </span>bunkerity/bunkerweb<span class="w"> </span>-n<span class="w"> </span>bunkerweb<span class="w"> </span>-f<span class="w"> </span>values.yaml
</code></pre></div></p>
</li>
<li>
<p><strong>Verify that the scheduler detects the sidecar</strong>:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>bunkerweb<span class="w"> </span>deployment/bunkerweb-scheduler<span class="w"> </span>-f
</code></pre></div>
   You should see logs indicating the connection to the new worker.</p>
</li>
<li>
<p><strong>Create the reverse proxy configuration</strong> via the BunkerWeb UI</p>
</li>
<li>
<p><strong>Test your application</strong>:
   <div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: my-app.example.com&quot;</span><span class="w"> </span>http://&lt;service-ip&gt;
</code></pre></div></p>
</li>
</ol>
<h6 id="common-issues">Common Issues</h6>
<table>
<thead>
<tr>
<th>Issue</th>
<th>Cause</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Scheduler can't find the sidecar</td>
<td>Missing or misconfigured headless service</td>
<td>Verify the service exists and is in <code>BUNKERWEB_INSTANCES</code></td>
</tr>
<tr>
<td>502 Bad Gateway error</td>
<td>App is not accessible from BunkerWeb</td>
<td>Verify the reverse proxy URL is correct (<code>127.0.0.1:port</code>)</td>
</tr>
<tr>
<td>Configuration not applied</td>
<td>Sidecar didn't receive the config</td>
<td>Check scheduler and sidecar logs</td>
</tr>
<tr>
<td>Port 5000 not accessible</td>
<td>Port not exposed in the container</td>
<td>Add <code>- containerPort: 5000</code> in the bunkerweb container</td>
</tr>
</tbody>
</table>
<h5 id="adding-a-new-application">Adding a New Application</h5>
<h6 id="with-controller-automatic-mode">With Controller (Automatic Mode)</h6>
<p>To add a new application protected by BunkerWeb:</p>
<ol>
<li><strong>Create a new deployment</strong> with the BunkerWeb sidecar with:</li>
<li>Annotation <code>bunkerweb.io/INSTANCE: "yes"</code> in <code>template.metadata.annotations</code></li>
<li>
<p>Environment variable <code>KUBERNETES_MODE: "yes"</code> in the bunkerweb container</p>
</li>
<li>
<p><strong>Create only the ClusterIP service</strong> (no headless service needed!)</p>
</li>
<li>
<p><strong>Apply the deployment</strong>:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>new-app-deployment.yaml
</code></pre></div></p>
</li>
<li>
<p><strong>The controller automatically detects the new pod</strong> - no chart redeployment needed!</p>
</li>
<li>
<p><strong>Configure the reverse proxy</strong> in the UI</p>
</li>
</ol>
<h6 id="without-controller-manual-mode_1">Without Controller (Manual Mode)</h6>
<p>To add a new application protected by BunkerWeb:</p>
<ol>
<li>
<p><strong>Create a new deployment</strong> with the BunkerWeb sidecar (as described above)</p>
</li>
<li>
<p><strong>Create both services</strong> (ClusterIP + Headless)</p>
</li>
<li>
<p><strong>Add the new headless service</strong> to <code>BUNKERWEB_INSTANCES</code>:
   <div class="highlight"><pre><span></span><code><span class="nt">extraEnvs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BUNKERWEB_INSTANCES</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://app1-workers.ns.svc.cluster.local:5000</span><span class="nv"> </span><span class="s">http://app2-workers.ns.svc.cluster.local:5000&quot;</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Redeploy the chart</strong>:
   <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>bunkerweb<span class="w"> </span>bunkerity/bunkerweb<span class="w"> </span>-n<span class="w"> </span>bunkerweb<span class="w"> </span>-f<span class="w"> </span>values.yaml
</code></pre></div></p>
</li>
<li>
<p><strong>Configure the reverse proxy</strong> in the UI or via env vars</p>
</li>
</ol>
<h5 id="best-practices_1">Best Practices</h5>
<p>âœ… <strong>Use the controller</strong> for automatic sidecar discovery (simpler, no headless service needed)
âœ… <strong>Use a single centralized scheduler</strong> to manage all sidecars
âœ… <strong>Always add the annotation</strong> <code>bunkerweb.io/INSTANCE: "yes"</code> and environment variable <code>KUBERNETES_MODE: "yes"</code> when using controller mode
âœ… <strong>No headless service needed with controller</strong> - only ClusterIP service is sufficient
âœ… <strong>Use the UI</strong> to manage configurations (more flexible)
âœ… <strong>Define resource limits</strong> for containers
âœ… <strong>Use Kubernetes secrets</strong> for sensitive configurations
âœ… <strong>Check logs</strong> of scheduler and sidecars regularly</p>
<h4 id="vollstandige-yaml-dateien">VollstÃ¤ndige YAML-Dateien</h4>
<p>Anstatt das Helm-Chart zu verwenden, kÃ¶nnen Sie auch die YAML-Vorlagen im Ordner <a href="https://github.com/bunkerity/bunkerweb/tree/vtesting/misc/integrations">misc/integrations</a> des GitHub-Repositorys verwenden. Bitte beachten Sie, dass wir dringend empfehlen, stattdessen das Helm-Chart zu verwenden.</p>
<h3 id="ingress-ressourcen">Ingress-Ressourcen</h3>
<p>Sobald der BunkerWeb-Kubernetes-Stack erfolgreich eingerichtet und betriebsbereit ist (weitere Informationen finden Sie in den Autoconf-Protokollen), kÃ¶nnen Sie mit der Bereitstellung von Webanwendungen im Cluster fortfahren und Ihre Ingress-Ressource deklarieren.</p>
<p>Es ist wichtig zu beachten, dass die BunkerWeb-Einstellungen als Annotationen fÃ¼r die Ingress-Ressource angegeben werden mÃ¼ssen. FÃ¼r den Domain-Teil verwenden Sie bitte den speziellen Wert <strong><code>bunkerweb.io</code></strong>. Durch das EinfÃ¼gen der entsprechenden Annotationen kÃ¶nnen Sie BunkerWeb entsprechend fÃ¼r die Ingress-Ressource konfigurieren.</p>
<div class="admonition tip">
<p class="admonition-title">StÃ¶rende Annotationen ignorieren</p>
<p>Wenn einige Annotationen autoconf nicht beeinflussen sollen, setzen Sie <code>KUBERNETES_IGNORE_ANNOTATIONS</code> auf dem Controller-Deployment. Geben Sie eine durch Leerzeichen oder Kommas getrennte Liste von AnnotationsschlÃ¼sseln an (zum Beispiel <code>bunkerweb.io/EXTRA_FOO</code>) oder nur das Suffix (<code>EXTRA_FOO</code>). Ãœbereinstimmende Annotationen werden aus den vom Ingress abgeleiteten Einstellungen entfernt, und Pods, die sie tragen, werden bei der Instanzerkennung vollstÃ¤ndig Ã¼bersprungen.</p>
</div>
<div class="admonition info">
<p class="admonition-title">TLS-UnterstÃ¼tzung</p>
<p>Der BunkerWeb-Ingress-Controller unterstÃ¼tzt vollstÃ¤ndig benutzerdefinierte HTTPS-Zertifikate unter Verwendung der TLS-Spezifikation, wie im Beispiel gezeigt. Die Konfiguration von LÃ¶sungen wie <code>cert-manager</code> zur automatischen Generierung von TLS-Secrets liegt auÃŸerhalb des Geltungsbereichs dieser Dokumentation.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ingress</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Wird auf alle Hosts in diesem Ingress angewendet</span>
<span class="w">    </span><span class="nt">bunkerweb.io/MY_SETTING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span>
<span class="w">    </span><span class="c1"># Wird nur auf den Host www.example.com angewendet</span>
<span class="w">    </span><span class="nt">bunkerweb.io/www.example.com_MY_SETTING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># TLS ist optional, Sie kÃ¶nnen beispielsweise auch das integrierte Let&#39;s Encrypt verwenden</span>
<span class="w">  </span><span class="c1"># tls:</span>
<span class="w">  </span><span class="c1">#   - hosts:</span>
<span class="w">  </span><span class="c1">#       - www.example.com</span>
<span class="w">  </span><span class="c1">#     secretName: secret-example-tls</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span>
<span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">svc-my-app</span>
<span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
<span class="nn">...</span>
</code></pre></div>
<h3 id="namespaces_1">Namespaces</h3>
<p>Ab Version <code>1.6.0</code> unterstÃ¼tzen die Autoconf-Stacks von BunkerWeb Namespaces. Mit dieser Funktion kÃ¶nnen Sie mehrere Cluster von BunkerWeb-Instanzen und -Diensten auf demselben Kubernetes-Cluster verwalten. Um Namespaces zu nutzen, setzen Sie einfach das Metadatenfeld <code>namespace</code> auf Ihre BunkerWeb-Instanzen und -Dienste. Hier ist ein Beispiel:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DaemonSet</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span><span class="w"> </span><span class="c1"># Setzen Sie den Namespace fÃ¼r die BunkerWeb-Instanz</span>
<span class="nn">...</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Namespace-Verhalten</p>
<p>StandardmÃ¤ÃŸig lauschen alle Autoconf-Stacks auf alle Namespaces. Wenn Sie einen Stack auf bestimmte Namespaces beschrÃ¤nken mÃ¶chten, kÃ¶nnen Sie die Umgebungsvariable <code>NAMESPACES</code> im <code>bunkerweb-controller</code>-Deployment setzen:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-controller</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span><span class="w"> </span><span class="c1"># Setzen Sie den Namespace fÃ¼r den Controller</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Recreate</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-controller</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-controller</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">serviceAccountName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sa-bunkerweb</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-controller</span>
<span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-autoconf:testing</span>
<span class="w">          </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
<span class="w">          </span><span class="nt">env</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NAMESPACES</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-namespace</span><span class="nv"> </span><span class="s">my-other-namespace&quot;</span><span class="w"> </span><span class="c1"># Lauschen Sie nur auf diese Namespaces</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nn">...</span>
</code></pre></div>
<p>Beachten Sie, dass die Umgebungsvariable <code>NAMESPACES</code> eine durch Leerzeichen getrennte Liste von Namespaces ist.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Namespace-Spezifikationen</p>
<p>Es kann nur <strong>eine Datenbank</strong> und <strong>ein Scheduler</strong> pro Namespace geben. Wenn Sie versuchen, mehrere Datenbanken oder Scheduler im selben Namespace zu erstellen, kommt es zu Konfigurationskonflikten.</p>
<p>Der Scheduler benÃ¶tigt die <code>NAMESPACE</code>-Annotation nicht, um ordnungsgemÃ¤ÃŸ zu funktionieren. Er benÃ¶tigt nur die korrekt konfigurierte Einstellung <code>DATABASE_URI</code>, damit er auf dieselbe Datenbank wie der Autoconf-Dienst zugreifen kann.</p>
</div>
<h3 id="ingress-klasse">Ingress-Klasse</h3>
<p>Bei der Installation mit den offiziellen Methoden in der Dokumentation wird BunkerWeb mit der folgenden <code>IngressClass</code>-Definition geliefert:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IngressClass</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">controller</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb.io/ingress-controller</span>
</code></pre></div>
<p>Um die vom Ingress-Controller Ã¼berwachten <code>Ingress</code>-Ressourcen einzuschrÃ¤nken, kÃ¶nnen Sie die Umgebungsvariable <code>KUBERNETES_INGRESS_CLASS</code> auf den Wert <code>bunkerweb</code> setzen. Dann kÃ¶nnen Sie die Direktive <code>ingressClassName</code> in Ihren <code>Ingress</code>-Definitionen nutzen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ingress</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bunkerweb.io/MY_SETTING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span>
<span class="w">    </span><span class="nt">bunkerweb.io/www.example.com_MY_SETTING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ingressClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span>
<span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">svc-my-app</span>
<span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
</code></pre></div>
<h3 id="benutzerdefinierter-domainname">Benutzerdefinierter Domainname</h3>
<p>Wenn Sie fÃ¼r Ihren Kubernetes-Cluster einen benutzerdefinierten Domainnamen anstelle des standardmÃ¤ÃŸigen <code>kubernetes.local</code> verwenden, kÃ¶nnen Sie den Wert Ã¼ber die Umgebungsvariable <code>KUBERNETES_DOMAIN_NAME</code> auf dem Scheduler-Container festlegen.</p>
<h3 id="verwendung-mit-einem-vorhandenen-ingress-controller">Verwendung mit einem vorhandenen Ingress-Controller</h3>
<div class="admonition info">
<p class="admonition-title">Beibehaltung des vorhandenen Ingress-Controllers und von BunkerWeb</p>
<p>Dies ist ein Anwendungsfall, bei dem Sie einen vorhandenen Ingress-Controller wie den Nginx-Controller beibehalten mÃ¶chten. Der typische Datenfluss wird sein: Load Balancer =&gt; Ingress Controller =&gt; BunkerWeb =&gt; Anwendung.</p>
</div>
<h4 id="nginx-ingress-controller-installation">Nginx-Ingress-Controller-Installation</h4>
<p>Installieren Sie das Nginx-Ingress-Helm-Repo:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>ingress-nginx<span class="w"> </span>https://kubernetes.github.io/ingress-nginx
helm<span class="w"> </span>repo<span class="w"> </span>update
</code></pre></div>
<p>Installieren Sie den Nginx-Ingress-Controller mit Standardwerten (funktioniert mÃ¶glicherweise nicht auf Ihrem eigenen Cluster sofort, bitte Ã¼berprÃ¼fen Sie die <a href="https://kubernetes.github.io/ingress-nginx/">Dokumentation</a>):</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>install<span class="w"> </span>--namespace<span class="w"> </span>nginx<span class="w"> </span>--create-namespace<span class="w"> </span>nginx<span class="w"> </span>ingress-nginx/ingress-nginx
</code></pre></div>
<p>Extrahieren Sie die IP-Adresse des LB:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>nginx-ingress-nginx-controller<span class="w"> </span>-n<span class="w"> </span>nginx<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span>
</code></pre></div>
<p>Richten Sie DNS-EintrÃ¤ge auf die IP-Adresse des LB ein (z. B. <code>bunkerweb</code>-Subdomain fÃ¼r die BW-UI und <code>myapp</code> fÃ¼r die Anwendung):</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>nslookup<span class="w"> </span>bunkerweb.example.com
Server:<span class="w">         </span><span class="m">172</span>.26.112.1
Address:<span class="w">        </span><span class="m">172</span>.26.112.1#53

Non-authoritative<span class="w"> </span>answer:
Name:<span class="w">   </span>bunkerweb.example.com
Address:<span class="w"> </span><span class="m">1</span>.2.3.4
$<span class="w"> </span>nslookup<span class="w"> </span>myapp.example.com
Server:<span class="w">         </span><span class="m">172</span>.26.112.1
Address:<span class="w">        </span><span class="m">172</span>.26.112.1#53

Non-authoritative<span class="w"> </span>answer:
Name:<span class="w">   </span>myapp.example.com
Address:<span class="w"> </span><span class="m">1</span>.2.3.4
</code></pre></div>
<p><strong>BunkerWeb-Installation</strong></p>
<p>Installieren Sie das BunkerWeb-Helm-Repo:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bunkerweb<span class="w"> </span>https://repo.bunkerweb.io/charts
helm<span class="w"> </span>repo<span class="w"> </span>update
</code></pre></div>
<p>Erstellen Sie die Datei <code>values.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Hier richten wir die Werte ein, die fÃ¼r die Einrichtung von BunkerWeb hinter einem vorhandenen Ingress-Controller erforderlich sind</span>
<span class="c1"># Datenfluss mit BW: LB =&gt; vorhandener Ingress Controller =&gt; BunkerWeb =&gt; Dienst</span>
<span class="c1"># Datenfluss ohne BW: LB =&gt; vorhandener Ingress Controller =&gt; Dienst</span>

<span class="c1"># Globale Einstellungen</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">misc</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Ersetzen Sie dies durch Ihren DNS-Resolver</span>
<span class="w">    </span><span class="c1"># um ihn zu erhalten: kubectl exec in einem zufÃ¤lligen Pod, dann cat /etc/resolv.conf</span>
<span class="w">    </span><span class="c1"># wenn Sie eine IP als Nameserver haben, fÃ¼hren Sie eine umgekehrte DNS-Suche durch: nslookup &lt;IP&gt;</span>
<span class="w">    </span><span class="c1"># meistens ist es coredns.kube-system.svc.cluster.local oder kube-dns.kube-system.svc.cluster.local</span>
<span class="w">    </span><span class="nt">dnsResolvers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kube-dns.kube-system.svc.cluster.local&quot;</span>
<span class="w">  </span><span class="nt">kubernetes</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Wir berÃ¼cksichtigen nur Ingress-Ressourcen mit ingressClass bunkerweb, um Konflikte mit dem vorhandenen Ingress-Controller zu vermeiden</span>
<span class="w">    </span><span class="nt">ingressClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span>
<span class="w">    </span><span class="c1"># Optional: Sie kÃ¶nnen Namespace(s) auswÃ¤hlen, in denen BunkerWeb auf Ingress/ConfigMap-Ã„nderungen lauschen wird</span>
<span class="w">    </span><span class="c1"># Standard (leerer Wert) sind alle Namespaces</span>
<span class="w">    </span><span class="nt">namespaces</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="c1"># Ãœberschreiben Sie den Diensttyp bunkerweb-external auf ClusterIP</span>
<span class="c1"># Da wir ihn nicht nach auÃŸen verfÃ¼gbar machen mÃ¼ssen</span>
<span class="c1"># Wir werden den vorhandenen Ingress-Controller verwenden, um den Datenverkehr an BunkerWeb weiterzuleiten</span>
<span class="nt">service</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>

<span class="c1"># BunkerWeb-Einstellungen</span>
<span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">testing</span>

<span class="c1"># Scheduler-Einstellungen</span>
<span class="nt">scheduler</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">testing</span>
<span class="w">  </span><span class="nt">extraEnvs</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Aktivieren Sie das Real-IP-Modul, um die echte IP der Clients zu erhalten</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">USE_REAL_IP</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Controller-Einstellungen</span>
<span class="nt">controller</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">testing</span>

<span class="c1"># UI-Einstellungen</span>
<span class="nt">ui</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">testing</span>
</code></pre></div>
<p>Installieren Sie BunkerWeb mit benutzerdefinierten Werten:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>install<span class="w"> </span>--namespace<span class="w"> </span>bunkerweb<span class="w"> </span>--create-namespace<span class="w"> </span>-f<span class="w"> </span>values.yaml<span class="w"> </span>bunkerweb<span class="w"> </span>bunkerweb/bunkerweb
</code></pre></div>
<p>ÃœberprÃ¼fen Sie die Protokolle und warten Sie, bis alles bereit ist.</p>
<p><strong>Web-UI-Installation</strong></p>
<p>Richten Sie den folgenden Ingress ein (vorausgesetzt, der Nginx-Controller ist installiert):</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ui-bunkerweb</span>
<span class="w">  </span><span class="c1"># Ersetzen Sie dies bei Bedarf durch Ihren Namespace von BW</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># HTTPS ist fÃ¼r die Web-UI obligatorisch, auch wenn der Datenverkehr intern ist</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/backend-protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HTTPS&quot;</span>
<span class="w">    </span><span class="c1"># Wir mÃ¼ssen SNI setzen, damit BW den richtigen vhost bedienen kann</span>
<span class="w">    </span><span class="c1"># Ersetzen Sie dies durch Ihre Domain</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/proxy-ssl-name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb.example.com&quot;</span>
<span class="w">    </span><span class="nt">nginx.ingress.kubernetes.io/proxy-ssl-server-name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;on&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Wird nur vom Nginx-Controller und nicht von BW bedient</span>
<span class="w">  </span><span class="nt">ingressClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">  </span><span class="c1"># Entkommentieren und bearbeiten, wenn Sie Ihr eigenes Zertifikat verwenden mÃ¶chten</span>
<span class="w">  </span><span class="c1"># tls:</span>
<span class="w">  </span><span class="c1"># - hosts:</span>
<span class="w">  </span><span class="c1">#   - bunkerweb.example.com</span>
<span class="w">  </span><span class="c1">#   secretName: tls-secret</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Ersetzen Sie dies durch Ihre Domain</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb.example.com</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">        </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="c1"># Erstellt vom Helm-Chart</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-external</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span>
<span class="w">              </span><span class="c1"># Die Verwendung des HTTPS-Ports ist fÃ¼r die UI obligatorisch</span>
<span class="w">              </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</code></pre></div>
<p>Und Sie kÃ¶nnen nun zum Einrichtungsassistenten gehen, indem Sie zu <code>https://bunkerweb.example.com/setup</code> navigieren.</p>
<p><strong>Schutz einer bestehenden Anwendung</strong></p>
<p><strong>Zuerst mÃ¼ssen Sie zu Global Config gehen, das SSL-Plugin auswÃ¤hlen und dann die automatische Weiterleitung von HTTP zu HTTPS deaktivieren. Bitte beachten Sie, dass Sie dies nur einmal tun mÃ¼ssen.</strong></p>
<p>Nehmen wir an, Sie haben eine Anwendung im Namespace <code>myapp</code>, die Ã¼ber den Dienst <code>myapp-service</code> auf Port <code>5000</code> zugÃ¤nglich ist.</p>
<p>Sie mÃ¼ssen einen neuen Dienst in der Web-UI hinzufÃ¼gen und die erforderlichen Informationen ausfÃ¼llen:</p>
<ul>
<li>Servername: die Ã¶ffentlich zugÃ¤ngliche Domain Ihrer Anwendung (z. B. <code>myapp.example.com</code>)</li>
<li>SSL/TLS: Ihr Ingress-Controller kÃ¼mmert sich um diesen Teil, also aktivieren Sie es nicht auf BunkerWeb, da der Datenverkehr innerhalb des Clusters intern ist</li>
<li>Reverse-Proxy-Host: die vollstÃ¤ndige URL Ihrer Anwendung innerhalb des Clusters (z. B. <code>http://myapp-service.myapp.svc.cluster.local:5000</code>)</li>
</ul>
<p>Sobald der neue Dienst hinzugefÃ¼gt wurde, kÃ¶nnen Sie nun eine Ingress-Ressource fÃ¼r diesen Dienst deklarieren und ihn an den BunkerWeb-Dienst auf dem HTTP-Port weiterleiten:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp</span>
<span class="w">  </span><span class="c1"># Ersetzen Sie dies bei Bedarf durch Ihren Namespace von BW</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Wird nur vom Nginx-Controller und nicht von BW bedient</span>
<span class="w">  </span><span class="nt">ingressClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="w">  </span><span class="c1"># Entkommentieren und bearbeiten, wenn Sie Ihr eigenes Zertifikat verwenden mÃ¶chten</span>
<span class="w">  </span><span class="c1"># tls:</span>
<span class="w">  </span><span class="c1"># - hosts:</span>
<span class="w">  </span><span class="c1">#   - myapp.example.com</span>
<span class="w">  </span><span class="c1">#   secretName: tls-secret</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Ersetzen Sie dies durch Ihre Domain</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp.example.com</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">        </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">        </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">          </span><span class="nt">service</span><span class="p">:</span>
<span class="w">            </span><span class="c1"># Erstellt vom Helm-Chart</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb-external</span>
<span class="w">            </span><span class="nt">port</span><span class="p">:</span>
<span class="w">              </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<p>Sie kÃ¶nnen <code>http(s)://myapp.example.com</code> besuchen, das jetzt mit BunkerWeb geschÃ¼tzt ist ðŸ›¡ï¸</p>
<h2 id="swarm">Swarm</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/integration-swarm.svg" width="600" />
  </p>
<figcaption>Docker Swarm-Integration</figcaption>
</figure>
<div class="admonition warning">
<p class="admonition-title">Veraltet</p>
<p>Die Swarm-Integration ist veraltet und wird in einer zukÃ¼nftigen Version entfernt. Bitte erwÃ¤gen Sie stattdessen die Verwendung der <a href="#kubernetes">Kubernetes-Integration</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">PRO-UnterstÃ¼tzung</p>
<p><strong>Wenn Sie Swarm-UnterstÃ¼tzung benÃ¶tigen</strong>, kontaktieren Sie uns bitte unter <a href="mailto:contact@bunkerity.com">contact@bunkerity.com</a> oder Ã¼ber das <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">Kontaktformular</a>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Docker Autoconf</p>
<p>Die Swarm-Integration Ã¤hnelt der Docker Autoconf-Integration (jedoch mit Diensten anstelle von Containern). Bitte lesen Sie bei Bedarf zuerst den <a href="#docker-autoconf">Docker Autoconf-Integrationsabschnitt</a>.</p>
</div>
<p>Um die automatische Konfiguration von BunkerWeb-Instanzen zu ermÃ¶glichen, benÃ¶tigt der <strong>autoconf</strong>-Dienst Zugriff auf die Docker-API. Dieser Dienst lauscht auf Docker Swarm-Ereignisse wie die Erstellung oder LÃ¶schung von Diensten und konfiguriert die <strong>BunkerWeb-Instanzen</strong> nahtlos in Echtzeit ohne Ausfallzeiten. Er Ã¼berwacht auch andere Swarm-Objekte wie <a href="https://docs.docker.com/engine/swarm/configs/">Konfigurationen</a> fÃ¼r benutzerdefinierte Konfigurationen.</p>
<p>Ã„hnlich wie bei der <a href="#docker-autoconf">Docker Autoconf-Integration</a> wird die Konfiguration fÃ¼r Webdienste Ã¼ber Labels definiert, die mit dem PrÃ¤fix <strong>bunkerweb</strong> beginnen.</p>
<p>FÃ¼r eine optimale Einrichtung wird empfohlen, den <strong>BunkerWeb-Dienst</strong> als <strong><em>globalen Dienst</em></strong> auf allen Knoten zu planen, wÃ¤hrend die <strong>autoconf-, Scheduler- und Docker-API-Proxy-Dienste</strong> als <strong><em>einzeln replizierte Dienste</em></strong> geplant werden sollten. Bitte beachten Sie, dass der Docker-API-Proxy-Dienst auf einem Manager-Knoten geplant werden muss, es sei denn, Sie konfigurieren ihn fÃ¼r die Verwendung einer Remote-API (was in der Dokumentation nicht behandelt wird).</p>
<p>Da mehrere Instanzen von BunkerWeb ausgefÃ¼hrt werden, muss ein gemeinsamer Datenspeicher implementiert als <a href="https://redis.io/">Redis</a>- oder <a href="https://valkey.io/">Valkey</a>-Dienst erstellt werden. Diese Instanzen nutzen den Redis/Valkey-Dienst, um Daten zu cachen und zu teilen. Weitere Details zu den Redis/Valkey-Einstellungen finden Sie <a href="../features/#redis">hier</a>.</p>
<p>Was das Datenbank-Volume betrifft, so gibt die Dokumentation keinen spezifischen Ansatz vor. Die Wahl eines freigegebenen Ordners oder eines bestimmten Treibers fÃ¼r das Datenbank-Volume hÃ¤ngt von Ihrem einzigartigen Anwendungsfall ab und bleibt dem Leser als Ãœbung Ã¼berlassen.</p>
<div class="admonition info">
<p class="admonition-title">Datenbank-Backend</p>
<p>Bitte beachten Sie, dass unsere Anweisungen davon ausgehen, dass Sie MariaDB als Standard-Datenbank-Backend verwenden, wie durch die Einstellung <code>DATABASE_URI</code> konfiguriert. Wir verstehen jedoch, dass Sie mÃ¶glicherweise alternative Backends fÃ¼r Ihre Docker-Integration bevorzugen. In diesem Fall kÃ¶nnen Sie sicher sein, dass auch andere Datenbank-Backends mÃ¶glich sind. Weitere Informationen finden Sie in den docker-compose-Dateien im Ordner <a href="https://github.com/bunkerity/bunkerweb/tree/vtesting/misc/integrations">misc/integrations</a> des Repositorys.</p>
<p>Die Einrichtung von geclusterten Datenbank-Backends liegt auÃŸerhalb des Geltungsbereichs dieser Dokumentation.</p>
</div>
<p>Hier ist die Stack-Vorlage, die Sie mit <code>docker stack deploy</code> bereitstellen kÃ¶nnen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-env</span>
<span class="w">  </span><span class="c1"># Wir verwenden einen Anker, um die Wiederholung derselben Einstellungen fÃ¼r beide Dienste zu vermeiden</span>
<span class="w">  </span><span class="nt">SWARM_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8443</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8443</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">udp</span><span class="w"> </span><span class="c1"># QUIC</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">global</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.INSTANCE=yes&quot;</span><span class="w"> </span><span class="c1"># Obligatorisches Label fÃ¼r den Autoconf-Dienst, um die BunkerWeb-Instanz zu identifizieren</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># Wir mÃ¼ssen die BunkerWeb-Instanz hier nicht angeben, da sie automatisch vom Autoconf-Dienst erkannt werden</span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># Der Servername wird mit Dienst-Labels gefÃ¼llt</span>
<span class="w">      </span><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w"> </span><span class="c1"># Obligatorische Einstellung fÃ¼r Autoconf</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># Denken Sie daran, ein stÃ¤rkeres Passwort fÃ¼r die Datenbank festzulegen</span>
<span class="w">      </span><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bw-redis&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Wird verwendet, um den Cache und andere Daten wie Backups zu persistieren</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>

<span class="w">  </span><span class="nt">bw-autoconf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-autoconf:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">SWARM_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># Denken Sie daran, ein stÃ¤rkeres Passwort fÃ¼r die Datenbank festzulegen</span>
<span class="w">      </span><span class="nt">DOCKER_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tcp://bw-docker:2375&quot;</span><span class="w"> </span><span class="c1"># Der Docker-Socket</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>

<span class="w">  </span><span class="nt">bw-docker</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tecnativa/docker-socket-proxy:nightly</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">CONFIGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">CONTAINERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">SERVICES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">SWARM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">TASKS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;warning&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">manager&quot;</span>

<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb:11</span>
<span class="w">    </span><span class="c1"># Wir setzen die maximal zulÃ¤ssige PaketgrÃ¶ÃŸe, um Probleme mit groÃŸen Abfragen zu vermeiden</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--max-allowed-packet=67108864</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;db&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changeme&quot;</span><span class="w"> </span><span class="c1"># Denken Sie daran, ein stÃ¤rkeres Passwort fÃ¼r die Datenbank festzulegen</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>

<span class="w">  </span><span class="nt">bw-redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis:7-alpine</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overlay</span>
<span class="w">    </span><span class="nt">attachable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overlay</span>
<span class="w">    </span><span class="nt">attachable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">bw-docker</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-docker</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overlay</span>
<span class="w">    </span><span class="nt">attachable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overlay</span>
<span class="w">    </span><span class="nt">attachable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Obligatorische Swarm-Einstellung</p>
<p>Bitte beachten Sie, dass die Umgebungsvariable <code>SWARM_MODE: "yes"</code> bei Verwendung der Swarm-Integration obligatorisch ist.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Beschriftete Dienste Ã¼berspringen</p>
<p>MÃ¼ssen Sie einen Swarm-Dienst von autoconf ausschlieÃŸen? Setzen Sie <code>SWARM_IGNORE_LABELS</code> auf dem Controller. Geben Sie eine durch Leerzeichen oder Kommas getrennte Liste von Label-SchlÃ¼sseln an (z.B. <code>bunkerweb.SERVER_NAME</code>) oder Suffixen (<code>SERVER_NAME</code>), und jeder Dienst mit diesen Labels wird bei der Erkennung ignoriert.</p>
</div>
<h3 id="swarm-dienste">Swarm-Dienste</h3>
<p>Sobald der BunkerWeb-Swarm-Stack eingerichtet ist und lÃ¤uft (weitere Informationen finden Sie in den Autoconf- und Scheduler-Protokollen), kÃ¶nnen Sie Webanwendungen im Cluster bereitstellen und Labels verwenden, um BunkerWeb dynamisch zu konfigurieren:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myapp</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mywebapp:4.2</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role==worker&quot;</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_1=value1&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_2=value2&quot;</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
</code></pre></div>
<h3 id="namespaces_2">Namespaces</h3>
<p>Ab Version <code>1.6.0</code> unterstÃ¼tzen die Autoconf-Stacks von BunkerWeb Namespaces. Mit dieser Funktion kÃ¶nnen Sie mehrere "<em>Cluster</em>" von BunkerWeb-Instanzen und -Diensten auf demselben Docker-Host verwalten. Um Namespaces zu nutzen, setzen Sie einfach das <code>NAMESPACE</code>-Label auf Ihre Dienste. Hier ist ein Beispiel:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myapp</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mywebapp:4.2</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role==worker&quot;</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.NAMESPACE=my-namespace&quot;</span><span class="w"> </span><span class="c1"># Setzen Sie den Namespace fÃ¼r den Dienst</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_1=value1&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.MY_SETTING_2=value2&quot;</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Namespace-Verhalten</p>
<p>StandardmÃ¤ÃŸig lauschen alle Autoconf-Stacks auf alle Namespaces. Wenn Sie einen Stack auf bestimmte Namespaces beschrÃ¤nken mÃ¶chten, kÃ¶nnen Sie die Umgebungsvariable <code>NAMESPACES</code> im <code>bw-autoconf</code>-Dienst setzen:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">global</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.INSTANCE=yes&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;bunkerweb.NAMESPACE=my-namespace&quot;</span><span class="w"> </span><span class="c1"># Setzen Sie den Namespace fÃ¼r die BunkerWeb-Instanz</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">bw-autoconf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-autoconf:testing</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">NAMESPACES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-namespace</span><span class="nv"> </span><span class="s">my-other-namespace&quot;</span><span class="w"> </span><span class="c1"># Lauschen Sie nur auf diese Namespaces</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
<span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;node.role</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">worker&quot;</span>
<span class="nn">...</span>
</code></pre></div>
<p>Beachten Sie, dass die Umgebungsvariable <code>NAMESPACES</code> eine durch Leerzeichen getrennte Liste von Namespaces ist.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Namespace-Spezifikationen</p>
<p>Es kann nur <strong>eine Datenbank</strong> und <strong>ein Scheduler</strong> pro Namespace geben. Wenn Sie versuchen, mehrere Datenbanken oder Scheduler im selben Namespace zu erstellen, kommt es zu Konfigurationskonflikten.</p>
<p>Der Scheduler benÃ¶tigt das <code>NAMESPACE</code>-Label nicht, um ordnungsgemÃ¤ÃŸ zu funktionieren. Er benÃ¶tigt nur die korrekt konfigurierte Einstellung <code>DATABASE_URI</code>, damit er auf dieselbe Datenbank wie der Autoconf-Dienst zugreifen kann.</p>
</div>
<h2 id="microsoft-azure">Microsoft Azure</h2>
<figure>
<p><img align="center," alt="Ãœbersicht" src="../../assets/img/integration-azure.webp" width="600" />
  </p>
<figcaption>Azure-Integration</figcaption>
</figure>
<div class="admonition info">
<p class="admonition-title">Empfohlene VM-GrÃ¶ÃŸe</p>
<p>Bitte beachten Sie bei der Wahl der VM-SKU. Sie mÃ¼ssen eine SKU auswÃ¤hlen, die mit Gen2-VMs kompatibel ist, und wir empfehlen, mit der B2s- oder Ds2-Serie fÃ¼r eine optimale Nutzung zu beginnen.</p>
</div>
<p>Sie kÃ¶nnen BunkerWeb auf verschiedene Weisen einfach in Ihrem Azure-Abonnement bereitstellen:</p>
<ul>
<li>Azure CLI in der Cloud Shell</li>
<li>Azure ARM-Vorlage</li>
<li>Azure-Portal Ã¼ber den Marketplace</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Cloud Shell</label><label for="__tabbed_2_2">ARM-Vorlage</label><label for="__tabbed_2_3">Marketplace</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Erstellen Sie eine Ressourcengruppe. Ersetzen Sie den Wert <code>RG_NAME</code></p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;RG_NAME&quot;</span><span class="w"> </span>--location<span class="w"> </span><span class="s2">&quot;LOCATION&quot;</span>
</code></pre></div>
<p>Erstellen Sie eine VM mit der SKU <code>Standard_B2s</code> am Standort der Ressourcengruppe. Ersetzen Sie die Werte <code>RG_NAME</code>, <code>VM_NAME</code>, <code>VNET_NAME</code>, <code>SUBNET_NAME</code></p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>vm<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span><span class="s2">&quot;RG_NAME&quot;</span><span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;VM_NAME&quot;</span><span class="w"> </span>--image<span class="w"> </span>bunkerity:bunkerweb:bunkerweb:latest<span class="w"> </span>--accept-term<span class="w"> </span>--generate-ssh-keys<span class="w"> </span>--vnet-name<span class="w"> </span><span class="s2">&quot;VNET_NAME&quot;</span><span class="w"> </span>--size<span class="w"> </span>Standard_B2s<span class="w"> </span>--subnet<span class="w"> </span><span class="s2">&quot;SUBNET_NAME&quot;</span>
</code></pre></div>
<p>VollstÃ¤ndiger Befehl. Ersetzen Sie die Werte <code>RG_NAME</code>, <code>VM_NAME</code>, <code>LOCATION</code>, <code>HOSTNAME</code>, <code>USERNAME</code>, <code>PUBLIC_IP</code>, <code>VNET_NAME</code>, <code>SUBNET_NAME</code>, <code>NSG_NAME</code></p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>vm<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span><span class="s2">&quot;RG_NAME&quot;</span><span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;VM_NAME&quot;</span><span class="w"> </span>--location<span class="w"> </span><span class="s2">&quot;LOCATION&quot;</span><span class="w"> </span>--image<span class="w"> </span>bunkerity:bunkerweb:bunkerweb:latest<span class="w"> </span>--accept-term<span class="w"> </span>--generate-ssh-keys<span class="w"> </span>--computer-name<span class="w"> </span><span class="s2">&quot;HOSTNAME&quot;</span><span class="w"> </span>--admin-username<span class="w"> </span><span class="s2">&quot;USERNAME&quot;</span><span class="w"> </span>--public-ip-address<span class="w"> </span><span class="s2">&quot;PUBLIC_IP&quot;</span><span class="w"> </span>--public-ip-address-allocation<span class="w"> </span>Static<span class="w"> </span>--size<span class="w"> </span>Standard_B2s<span class="w"> </span>--public-ip-sku<span class="w"> </span>Standard<span class="w"> </span>--os-disk-delete-option<span class="w"> </span>Delete<span class="w"> </span>--nic-delete-option<span class="w"> </span>Delete<span class="w"> </span>--vnet-name<span class="w"> </span><span class="s2">&quot;VNET_NAME&quot;</span><span class="w"> </span>--subnet<span class="w"> </span><span class="s2">&quot;SUBNET_NAME&quot;</span><span class="w"> </span>--nsg<span class="w"> </span><span class="s2">&quot;NSG_NAME&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="admonition info">
<p class="admonition-title">Berechtigungsanforderung</p>
<p>Um eine ARM-Vorlage bereitzustellen, benÃ¶tigen Sie Schreibzugriff auf die Ressourcen, die Sie bereitstellen, und Zugriff auf alle Operationen auf dem Ressourcentyp Microsoft.Resources/deployments.
Um eine virtuelle Maschine bereitzustellen, benÃ¶tigen Sie die Berechtigungen Microsoft.Compute/virtualMachines/write und Microsoft.Resources/deployments/*. Die What-if-Operation hat dieselben Berechtigungsanforderungen.</p>
</div>
<p>Stellen Sie die ARM-Vorlage bereit:</p>
<p><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fbunkerity%2Fbunkerweb%2Fmaster%2Fmisc%2Fintegrations%2Fazure-arm-template.json" target="_blank"><img alt="Bereitstellen in Azure" src="../../assets/img/integration-azure-deploy.svg" /></a></p>
</div>
<div class="tabbed-block">
<p>Melden Sie sich im <a href="https://portal.azure.com" target="_blank">Azure-Portal</a> an.</p>
<p>Holen Sie sich BunkerWeb Ã¼ber das MenÃ¼ <a href="https://portal.azure.com/#view/Microsoft_Azure_Marketplace/GalleryItemDetailsBladeNopdl/id/bunkerity.bunkerweb" target="_blank">Ressource erstellen</a>.</p>
<p>Sie kÃ¶nnen auch Ã¼ber den <a href="https://azuremarketplace.microsoft.com/fr-fr/marketplace/apps/bunkerity.bunkerweb?tab=Overview" target="_blank">Marketplace</a> gehen.</p>
</div>
</div>
</div>
<p>Sie kÃ¶nnen auf den Einrichtungsassistenten zugreifen, indem Sie die URI <code>https://ihre-ip-adresse/setup</code> Ihrer virtuellen Maschine aufrufen.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Bunkerity
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/fTf46FmtyD" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/bunkerity" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/bunkerity/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/r/BunkerWeb/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/bunkerweb/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/bunkerity" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": {"provider": "mike", "version": "latest"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="https://chatbot.bunkerweb.io/static/js/chatbot.js"></script>
      
        <script src="../../assets/preserve-version-on-language-switch.js"></script>
      
        <script src="../../assets/toc-dropdown.js"></script>
      
    
  </body>
</html>