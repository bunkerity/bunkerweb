
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BunkerWeb, the open source and next generation WAF.">
      
      
      
        <link rel="canonical" href="https://docs.bunkerweb.io/latest/de/features/">
      
      
        <link rel="prev" href="../quickstart-guide/">
      
      
        <link rel="next" href="../advanced/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Funktionen - BunkerWeb Dokumentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
    <script async
            defer
            data-domain="docs.bunkerweb.io"
            src="https://data.bunkerity.com/js/script.js"></script>

    <script defer>
      window.addEventListener('DOMContentLoaded', (e) => {

        const customHeaders = document.querySelectorAll('[data-custom-header]')
        customHeaders.forEach(header => {
          const getHeaders = document.querySelectorAll(`#${header.getAttribute('id')}`);
          getHeaders.forEach(el => {

            if(!el.hasAttribute('data-custom-header')) el.remove()
        })})
      })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script>

    <script defer>
  // Lazy load images and embed youtube videos
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-src]").forEach((el) => {
      el.setAttribute("src", el.getAttribute("data-src"));
    });
  });
  // Add missing label
  try {
    document
      .querySelector('div.md-search[data-md-component="search"][role="dialog"]')
      .setAttribute("aria-label", "Search in documentation");
  } catch (err) {}
    </script>

    <script defer>
      window.addEventListener('DOMContentLoaded', () => {
        const bannerEl = document.querySelector('aside.md-banner');
        let defaultContent = [{ "content" : '<p>Get the most of BunkerWeb by upgrading to the PRO version. Click <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&utm_source=doc">here</a> and use the <strong>freetrial</strong> promo code to get started.</p>'},
        { "content" : '<p>Need premium support or tailored consulting around BunkerWeb ? Check out our <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc#services">professional services</a>.</p>'},
        { "content" : '<p>Be part of the Bunker community by joining the <a style="text-decoration:underline; color: white;" href="https://discord.bunkerweb.io">Discord chat</a> and following us on <a style="text-decoration:underline; color: white;" href="https://www.linkedin.com/company/bunkerity/">LinkedIn</a>.</p>'}
        ]

      function setBannerStyle() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        bannerEl.style.backgroundColor = "#2eac68";
        bannerItem.style.textAlign = "center";
        bannerItem.style.transition = "all 0.5s ease-out";
      }

      function setDefault() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        const clone = bannerItem.cloneNode(true);
        clone.innerHTML = defaultContent[0]["content"];
        bannerEl.replaceChild(clone, bannerItem);
      }

      function startBannerLoop() {
        const switchDelay = 7000;
        let i = 0;

        setInterval(() => {
          // Update or reset index
          if(i + 1 === defaultContent.length) {
            i = 0;
          } else {
            i++;
          }

          // Prepare data with next el with opacity 0 too
          const currItem = bannerEl.querySelector('.md-banner__inner');
          currItem.style.opacity = 0;
          const clone = currItem.cloneNode(true);
          clone.innerHTML = defaultContent[i]["content"];
          setTimeout(() => {
            bannerEl.replaceChild(clone, currItem);
            setTimeout(() => {
              const newItem = bannerEl.querySelector('.md-banner__inner');
              newItem.style.opacity = 1;
            }, 20);
          }, 600);

        }, switchDelay);
      }

      function runBanner() {
        startBannerLoop();
        // Try to get dynamic content
        // Else keep static ones
        // fetch("https://www.bunkerweb.io/api/bw-ui-news")
        // .then((res) => {
        //   return res.json();
        // })
        // .then((res) => {
        //   defaultContent = res.data[0].data;
        //   startBannerLoop();
        // })
        // .catch((e) => {
        //   startBannerLoop();
        // });
      }

        setBannerStyle();
        setDefault();
        runBanner()

      })
    </script>

    
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Funktionen - BunkerWeb Dokumentation" >
      
        <meta  property="og:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  property="og:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/de/features.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.bunkerweb.io/latest/de/features/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Funktionen - BunkerWeb Dokumentation" >
      
        <meta  name="twitter:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  name="twitter:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/de/features.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#funktionen" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    📢 Looking for BunkerWeb PRO version, technical support or tailored services ? Visit the
    <a href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc"
       style="color: #3f6ec6;
              text-decoration: underline">BunkerWeb Panel</a>
    for more information on our enterprise offers.

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    You're not viewing the
    documentation of the latest version.
    <a href="../../..">
        <strong>Click here to view latest.</strong>
    </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href="../" title="BunkerWeb Dokumentation" class="md-header__button md-logo" aria-label="BunkerWeb Dokumentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BunkerWeb Dokumentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Funktionen
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sprache wechseln">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../features/" hreflang="en" class="md-select__link">
              English - 🇬🇧
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../fr/features/" hreflang="fr" class="md-select__link">
              Français - 🇫🇷
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="de" class="md-select__link">
              Deutsch - 🇩🇪
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/features/" hreflang="es" class="md-select__link">
              Español - 🇪🇸
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bunkerity/bunkerweb" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Einführung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        
  
  
    
  
  Konzepte

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../integrations/" class="md-tabs__link">
        
  
  
    
  
  Integrationen

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-guide/" class="md-tabs__link">
        
  
  
    
  
  Schnellstart

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Funktionen

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/" class="md-tabs__link">
        
  
  
    
  
  Erweiterte Nutzung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../web-ui/" class="md-tabs__link">
        
  
  
    
  
  Weboberfläche

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../upgrading/" class="md-tabs__link">
        
  
  
    
  
  Aktualisierung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  Fehlerbehebung

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
  
    
  
  Plugins

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../professional-services/" class="md-tabs__link">
        
  
  
    
  
  Professionelle Dienste

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
  
    
  
  Über

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="BunkerWeb Dokumentation" class="md-nav__button md-logo" aria-label="BunkerWeb Dokumentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    BunkerWeb Dokumentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bunkerity/bunkerweb" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Einführung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Konzepte
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrationen
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schnellstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Funktionen
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Funktionen
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#globale-einstellungen" class="md-nav__link">
    <span class="md-ellipsis">
      Globale Einstellungen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Globale Einstellungen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multisite-modus" class="md-nav__link">
    <span class="md-ellipsis">
      Multisite-Modus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mehrfacheinstellungen" class="md-nav__link">
    <span class="md-ellipsis">
      Mehrfacheinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sicherheitsmodi" class="md-nav__link">
    <span class="md-ellipsis">
      Sicherheitsmodi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-ddos-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Anti DDoS (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antibot" class="md-nav__link">
    <span class="md-ellipsis">
      Antibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#so-verwenden-sie-es" class="md-nav__link">
    <span class="md-ellipsis">
      So verwenden Sie es
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allgemeine-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      Allgemeine Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ausschlieen-von-traffic-von-herausforderungen" class="md-nav__link">
    <span class="md-ellipsis">
      Ausschließen von Traffic von Herausforderungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#herausforderungsmechanismen" class="md-nav__link">
    <span class="md-ellipsis">
      Herausforderungsmechanismen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsbeispiele" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsbeispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-basic" class="md-nav__link">
    <span class="md-ellipsis">
      Auth basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_1" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_1" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_1" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_2" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befehlszeilenschnittstelle" class="md-nav__link">
    <span class="md-ellipsis">
      Befehlszeilenschnittstelle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_2" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-s3-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Backup S3 (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bad-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Bad behavior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bad behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_2" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_3" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_3" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blacklist" class="md-nav__link">
    <span class="md-ellipsis">
      Blacklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blacklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#so-verwenden-sie-es_1" class="md-nav__link">
    <span class="md-ellipsis">
      So verwenden Sie es
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsparameter91011121314151617" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsparameter[9][10][11][12][13][14][15][16][17]
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsbeispiele38" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsbeispiele[38]
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brotli" class="md-nav__link">
    <span class="md-ellipsis">
      Brotli
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Brotli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#so-wirds-verwendet" class="md-nav__link">
    <span class="md-ellipsis">
      So wird's verwendet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkernet" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerNet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerNet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_3" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_4" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_4" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-der-crowdsec-konsole" class="md-nav__link">
    <span class="md-ellipsis">
      Integration der CrowdSec-Konsole
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_4" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_5" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_5" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Client cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_5" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_6" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_6" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Country">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anwendung" class="md-nav__link">
    <span class="md-ellipsis">
      Anwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_1" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_1" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crowdsec" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CrowdSec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einrichtung" class="md-nav__link">
    <span class="md-ellipsis">
      Einrichtung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsparameter" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsparameter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Konfigurationsparameter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameter-der-anwendungssicherheitskomponente" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter der Anwendungssicherheitskomponente
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsbeispiele_1" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsbeispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-ssl-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Custom SSL certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom SSL certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_2" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_2" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dnsbl" class="md-nav__link">
    <span class="md-ellipsis">
      DNSBL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNSBL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_6" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_7" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_7" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_7" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_8" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easy-resolve-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Easy Resolve (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#errors" class="md-nav__link">
    <span class="md-ellipsis">
      Errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung_1" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_3" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_3" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#greylist" class="md-nav__link">
    <span class="md-ellipsis">
      Greylist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Greylist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_8" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_9" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_8" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gzip" class="md-nav__link">
    <span class="md-ellipsis">
      Gzip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gzip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funktionsweise" class="md-nav__link">
    <span class="md-ellipsis">
      Funktionsweise
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verwendung_2" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_4" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_4" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#html-injection" class="md-nav__link">
    <span class="md-ellipsis">
      HTML injection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTML injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_9" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_10" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_9" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headers" class="md-nav__link">
    <span class="md-ellipsis">
      Headers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_10" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsleitfaden" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsleitfaden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_10" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Encrypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Let&#39;s Encrypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_11" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_11" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unterstutzte-dns-anbieter" class="md-nav__link">
    <span class="md-ellipsis">
      Unterstützte DNS-Anbieter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_11" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limit" class="md-nav__link">
    <span class="md-ellipsis">
      Limit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Limit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-es-funktioniert" class="md-nav__link">
    <span class="md-ellipsis">
      Wie es funktioniert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schritte-zur-verwendung" class="md-nav__link">
    <span class="md-ellipsis">
      Schritte zur Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_12" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_12" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancer-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Load Balancer (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technische-umsetzung" class="md-nav__link">
    <span class="md-ellipsis">
      Technische Umsetzung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_12" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erfasste-metriken" class="md-nav__link">
    <span class="md-ellipsis">
      Erfasste Metriken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-zugriff" class="md-nav__link">
    <span class="md-ellipsis">
      API-Zugriff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_13" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_13" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Migration (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hauptmerkmale" class="md-nav__link">
    <span class="md-ellipsis">
      Hauptmerkmale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsanleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsanleitung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_14" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modsecurity" class="md-nav__link">
    <span class="md-ellipsis">
      ModSecurity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModSecurity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_13" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_14" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verfugbare-crs-versionen" class="md-nav__link">
    <span class="md-ellipsis">
      Verfügbare CRS-Versionen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benutzerdefinierte-konfigurationen" class="md-nav__link">
    <span class="md-ellipsis">
      Benutzerdefinierte Konfigurationen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benutzerdefinierte Konfigurationen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hinzufugen-von-crs-ausschlussen-mit-modsec-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Hinzufügen von CRS-Ausschlüssen mit modsec-crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aktualisieren-von-crs-regeln-mit-modsec" class="md-nav__link">
    <span class="md-ellipsis">
      Aktualisieren von CRS-Regeln mit modsec
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#owasp-crs-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      OWASP CRS-Plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_15" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#php" class="md-nav__link">
    <span class="md-ellipsis">
      PHP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PHP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_14" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_15" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_16" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pro" class="md-nav__link">
    <span class="md-ellipsis">
      Pro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_15" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_16" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haufig-gestellte-fragen" class="md-nav__link">
    <span class="md-ellipsis">
      Häufig gestellte Fragen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prometheus-exporter-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus exporter (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Real IP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real IP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung_3" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_5" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_5" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirect" class="md-nav__link">
    <span class="md-ellipsis">
      Redirect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redirect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_16" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_17" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_17" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung_4" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_6" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_6" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse proxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_17" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationsanleitung_1" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationsanleitung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_18" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse scan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse scan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_18" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_18" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_19" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robotstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Robots.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Robots.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamische-bot-umgehung-mit-der-darkvisitors-api" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamische Bot-Umgehung mit der DarkVisitors-API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_19" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_19" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_20" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssl" class="md-nav__link">
    <span class="md-ellipsis">
      SSL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung_5" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_7" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_7" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securitytxt" class="md-nav__link">
    <span class="md-ellipsis">
      Security.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_20" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_20" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_21" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#self-signed-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Self-signed certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Self-signed certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwendung_6" class="md-nav__link">
    <span class="md-ellipsis">
      Verwendung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter_8" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispiele_8" class="md-nav__link">
    <span class="md-ellipsis">
      Beispiele
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Sessions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sessions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_21" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_21" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_22" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-manager-pro" class="md-nav__link">
    <span class="md-ellipsis">
      User Manager (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whitelist" class="md-nav__link">
    <span class="md-ellipsis">
      Whitelist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Whitelist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wie-man-es-benutzt_22" class="md-nav__link">
    <span class="md-ellipsis">
      Wie man es benutzt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfigurationseinstellungen_22" class="md-nav__link">
    <span class="md-ellipsis">
      Konfigurationseinstellungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beispielkonfigurationen_23" class="md-nav__link">
    <span class="md-ellipsis">
      Beispielkonfigurationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Erweiterte Nutzung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Weboberfläche
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aktualisierung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fehlerbehebung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../professional-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Professionelle Dienste
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Über
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="funktionen">Funktionen</h1>
<p>Dieser Abschnitt enthält die vollständige Liste der von BunkerWeb unterstützten Einstellungen. Wenn Sie mit BunkerWeb noch nicht vertraut sind, lesen Sie zuerst den Abschnitt <a href="../concepts/">Konzepte</a> der Dokumentation. Befolgen Sie anschließend die Anweisungen für Ihre <a href="../integrations/">Integration</a>, um die Einstellungen anzuwenden.</p>
<h2 id="globale-einstellungen">Globale Einstellungen</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Allgemein-Plugin stellt das zentrale Konfigurations-Framework für BunkerWeb bereit und ermöglicht es Ihnen, wesentliche Einstellungen zu definieren, die steuern, wie Ihre Webdienste geschützt und bereitgestellt werden. Dieses grundlegende Plugin verwaltet fundamentale Aspekte wie Sicherheitsmodi, Server-Standardeinstellungen, Protokollierungsverhalten und kritische Betriebsparameter für das gesamte BunkerWeb-Ökosystem.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Beim Start von BunkerWeb lädt und wendet das Allgemein-Plugin Ihre zentralen Konfigurationseinstellungen an.</li>
<li>Sicherheitsmodi werden entweder global oder pro Website festgelegt und bestimmen das angewendete Schutzniveau.</li>
<li>Standard-Servereinstellungen legen Fallback-Werte für alle nicht spezifizierten Multisite-Konfigurationen fest.</li>
<li>Protokollierungsparameter steuern, welche Informationen aufgezeichnet und wie sie formatiert werden.</li>
<li>Diese Einstellungen bilden die Grundlage, auf der alle anderen BunkerWeb-Plugins und -Funktionen aufbauen.</li>
</ol>
<h3 id="multisite-modus">Multisite-Modus</h3>
<p>Wenn <code>MULTISITE</code> auf <code>yes</code> gesetzt ist, kann BunkerWeb mehrere Websites hosten und schützen, jede mit ihrer eigenen einzigartigen Konfiguration. Diese Funktion ist besonders nützlich für Szenarien wie:</p>
<ul>
<li>Hosten mehrerer Domains mit unterschiedlichen Konfigurationen</li>
<li>Betreiben mehrerer Anwendungen mit unterschiedlichen Sicherheitsanforderungen</li>
<li>Anwenden maßgeschneiderter Sicherheitsrichtlinien auf verschiedene Dienste</li>
</ul>
<p>Im Multisite-Modus wird jede Website durch einen eindeutigen <code>SERVER_NAME</code> identifiziert. Um Einstellungen spezifisch auf eine Website anzuwenden, stellen Sie den primären <code>SERVER_NAME</code> dem Einstellungsnamen voran. Zum Beispiel:</p>
<ul>
<li><code>www.example.com_USE_ANTIBOT=captcha</code> aktiviert CAPTCHA für <code>www.example.com</code>.</li>
<li><code>myapp.example.com_USE_GZIP=yes</code> aktiviert die GZIP-Komprimierung für <code>myapp.example.com</code>.</li>
</ul>
<p>Dieser Ansatz stellt sicher, dass die Einstellungen in einer Multisite-Umgebung der richtigen Website zugeordnet werden.</p>
<h3 id="mehrfacheinstellungen">Mehrfacheinstellungen</h3>
<p>Einige Einstellungen in BunkerWeb unterstützen mehrere Konfigurationen für dieselbe Funktion. Um mehrere Einstellungsgruppen zu definieren, hängen Sie ein numerisches Suffix an den Einstellungsnamen an. Zum Beispiel:</p>
<ul>
<li><code>REVERSE_PROXY_URL_1=/subdir</code> und <code>REVERSE_PROXY_HOST_1=http://myhost1</code> konfigurieren den ersten Reverse-Proxy.</li>
<li><code>REVERSE_PROXY_URL_2=/anotherdir</code> und <code>REVERSE_PROXY_HOST_2=http://myhost2</code> konfigurieren den zweiten Reverse-Proxy.</li>
</ul>
<p>Dieses Muster ermöglicht es Ihnen, mehrere Konfigurationen für Funktionen wie Reverse-Proxys, Ports oder andere Einstellungen zu verwalten, die für unterschiedliche Anwendungsfälle unterschiedliche Werte erfordern.</p>
<h3 id="sicherheitsmodi">Sicherheitsmodi</h3>
<p>Die Einstellung <code>SECURITY_MODE</code> bestimmt, wie BunkerWeb erkannte Bedrohungen behandelt. Diese flexible Funktion ermöglicht es Ihnen, je nach Ihren spezifischen Bedürfnissen zwischen der Überwachung oder dem aktiven Blockieren verdächtiger Aktivitäten zu wählen:</p>
<ul>
<li><strong><code>detect</code></strong>: Protokolliert potenzielle Bedrohungen, ohne den Zugriff zu blockieren. Dieser Modus ist nützlich, um Falsch-Positive auf sichere und unterbrechungsfreie Weise zu identifizieren und zu analysieren.</li>
<li><strong><code>block</code></strong> (Standard): Blockiert aktiv erkannte Bedrohungen und protokolliert Vorfälle, um unbefugten Zugriff zu verhindern und Ihre Anwendung zu schützen.</li>
</ul>
<p>Das Umschalten in den <code>detect</code>-Modus kann Ihnen helfen, potenzielle Falsch-Positive zu identifizieren und zu beheben, ohne legitime Clients zu stören. Sobald diese Probleme behoben sind, können Sie für vollen Schutz getrost in den <code>block</code>-Modus zurückwechseln.</p>
<h3 id="konfigurationseinstellungen">Konfigurationseinstellungen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Kerneinstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVER_NAME</code></td>
<td><code>www.example.com</code></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>Primäre Domain:</strong> Der Hauptdomainname für diese Website. Im Multisite-Modus erforderlich.</td>
</tr>
<tr>
<td><code>BUNKERWEB_INSTANCES</code></td>
<td><code>127.0.0.1</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>BunkerWeb-Instanzen:</strong> Liste der BunkerWeb-Instanzen, durch Leerzeichen getrennt.</td>
</tr>
<tr>
<td><code>MULTISITE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Mehrere Websites:</strong> Auf <code>yes</code> setzen, um das Hosten mehrerer Websites mit unterschiedlichen Konfigurationen zu ermöglichen.</td>
</tr>
<tr>
<td><code>SECURITY_MODE</code></td>
<td><code>block</code></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>Sicherheitsstufe:</strong> Steuert die Stufe der Sicherheitsdurchsetzung. Optionen: <code>detect</code> oder <code>block</code>.</td>
</tr>
<tr>
<td><code>SERVER_TYPE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>Servertyp:</strong> Definiert, ob der Server vom Typ <code>http</code> oder <code>stream</code> ist.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">API-Einstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_API</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API aktivieren:</strong> Aktivieren Sie die API, um BunkerWeb zu steuern.</td>
</tr>
<tr>
<td><code>API_HTTP_PORT</code></td>
<td><code>5000</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-Port:</strong> Lauschportnummer für die API.</td>
</tr>
<tr>
<td><code>API_HTTPS_PORT</code></td>
<td><code>6000</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-HTTPS-Port:</strong> Lauschportnummer (TLS) für die API.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-HTTP-Lauschen:</strong> HTTP-Listener für die API aktivieren.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTPS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-HTTPS-Lauschen:</strong> HTTPS (TLS)-Listener für die API aktivieren.</td>
</tr>
<tr>
<td><code>API_LISTEN_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-Lausch-IP:</strong> Lausch-IP-Adresse für die API.</td>
</tr>
<tr>
<td><code>API_SERVER_NAME</code></td>
<td><code>bwapi</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-Servername:</strong> Servername (virtueller Host) für die API.</td>
</tr>
<tr>
<td><code>API_WHITELIST_IP</code></td>
<td><code>127.0.0.0/8</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-Whitelist-IP:</strong> Liste der IP/Netzwerke, die die API kontaktieren dürfen.</td>
</tr>
<tr>
<td><code>API_TOKEN</code></td>
<td></td>
<td>global</td>
<td>Nein</td>
<td><strong>API-Zugriffstoken (optional):</strong> Wenn gesetzt, müssen alle API-Anfragen <code>Authorization: Bearer &lt;token&gt;</code> enthalten.</td>
</tr>
</tbody>
</table>
<p>Hinweis: Aus Bootstrap-Gründen müssen Sie, wenn Sie <code>API_TOKEN</code> aktivieren, es in der Umgebung SOWOHL der BunkerWeb-Instanz als auch des Schedulers setzen. Der Scheduler fügt den <code>Authorization</code>-Header automatisch hinzu, wenn <code>API_TOKEN</code> in seiner Umgebung vorhanden ist. Wenn es nicht gesetzt ist, wird kein Header gesendet und BunkerWeb erzwingt keine Token-Authentifizierung. Sie können die API über HTTPS bereitstellen, indem Sie <code>API_LISTEN_HTTPS=yes</code> setzen (Port: <code>API_HTTPS_PORT</code>, Standard <code>6000</code>).</p>
<p>Beispieltest mit curl (Token und Host ersetzen):</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://&lt;bunkerweb-host&gt;:5000/ping

curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--insecure<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>https://&lt;bunkerweb-host&gt;:6000/ping
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Netzwerk- &amp; Port-Einstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HTTP_PORT</code></td>
<td><code>8080</code></td>
<td>global</td>
<td>Ja</td>
<td><strong>HTTP-Port:</strong> Portnummer für HTTP-Verkehr.</td>
</tr>
<tr>
<td><code>HTTPS_PORT</code></td>
<td><code>8443</code></td>
<td>global</td>
<td>Ja</td>
<td><strong>HTTPS-Port:</strong> Portnummer für HTTPS-Verkehr.</td>
</tr>
<tr>
<td><code>USE_IPV6</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>IPv6-Unterstützung:</strong> IPv6-Konnektivität aktivieren.</td>
</tr>
<tr>
<td><code>DNS_RESOLVERS</code></td>
<td><code>127.0.0.11</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>DNS-Resolver:</strong> DNS-Adressen der zu verwendenden Resolver.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Stream-Server-Einstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_STREAM</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>Stream lauschen:</strong> Lauschen für Nicht-SSL (Passthrough) aktivieren.</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT</code></td>
<td><code>1337</code></td>
<td>multisite</td>
<td>Ja</td>
<td><strong>Stream-Port:</strong> Lauschport für Nicht-SSL (Passthrough).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT_SSL</code></td>
<td><code>4242</code></td>
<td>multisite</td>
<td>Ja</td>
<td><strong>Stream-SSL-Port:</strong> Lauschport für SSL (Passthrough).</td>
</tr>
<tr>
<td><code>USE_TCP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>TCP lauschen:</strong> TCP-Lauschen (Stream) aktivieren.</td>
</tr>
<tr>
<td><code>USE_UDP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>UDP lauschen:</strong> UDP-Lauschen (Stream) aktivieren.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Worker-Einstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKER_PROCESSES</code></td>
<td><code>auto</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Worker-Prozesse:</strong> Anzahl der Worker-Prozesse. Auf <code>auto</code> setzen, um verfügbare Kerne zu verwenden.</td>
</tr>
<tr>
<td><code>WORKER_CONNECTIONS</code></td>
<td><code>1024</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Worker-Verbindungen:</strong> Maximale Anzahl von Verbindungen pro Worker.</td>
</tr>
<tr>
<td><code>WORKER_RLIMIT_NOFILE</code></td>
<td><code>2048</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Dateideskriptor-Limit:</strong> Maximale Anzahl offener Dateien pro Worker.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Speichereinstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKERLOCK_MEMORY_SIZE</code></td>
<td><code>48k</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Workerlock-Speichergröße:</strong> Größe des lua_shared_dict für Initialisierungs-Worker.</td>
</tr>
<tr>
<td><code>DATASTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Datastore-Speichergröße:</strong> Größe des internen Datastores.</td>
</tr>
<tr>
<td><code>CACHESTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Cachestore-Speichergröße:</strong> Größe des internen Cachestores.</td>
</tr>
<tr>
<td><code>CACHESTORE_IPC_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Cachestore-IPC-Speichergröße:</strong> Größe des internen Cachestores (ipc).</td>
</tr>
<tr>
<td><code>CACHESTORE_MISS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Cachestore-Miss-Speichergröße:</strong> Größe des internen Cachestores (miss).</td>
</tr>
<tr>
<td><code>CACHESTORE_LOCKS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Cachestore-Locks-Speichergröße:</strong> Größe des internen Cachestores (locks).</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Protokollierungseinstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOG_FORMAT</code></td>
<td><code>$host $remote_addr - $request_id $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\"</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Protokollformat:</strong> Das Format, das für Zugriffsprotokolle verwendet werden soll.</td>
</tr>
<tr>
<td><code>LOG_LEVEL</code></td>
<td><code>notice</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Protokollstufe:</strong> Ausführlichkeitsstufe für Fehlerprotokolle. Optionen: <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
<tr>
<td><code>TIMERS_LOG_LEVEL</code></td>
<td><code>debug</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Timer-Protokollstufe:</strong> Protokollstufe für Timer. Optionen: <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>err</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken bei der Protokollierung</p>
</div>
<ul>
<li>Verwenden Sie für Produktionsumgebungen die Protokollstufen <code>notice</code>, <code>warn</code> oder <code>error</code>, um das Protokollvolumen zu minimieren.</li>
<li>Setzen Sie zur Fehlersuche vorübergehend die Protokollstufe auf <code>debug</code>, um detailliertere Informationen zu erhalten.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Integrationseinstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTOCONF_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Autoconf-Modus:</strong> Autoconf-Docker-Integration aktivieren.</td>
</tr>
<tr>
<td><code>SWARM_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Swarm-Modus:</strong> Docker-Swarm-Integration aktivieren.</td>
</tr>
<tr>
<td><code>KUBERNETES_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Kubernetes-Modus:</strong> Kubernetes-Integration aktivieren.</td>
</tr>
<tr>
<td><code>USE_TEMPLATE</code></td>
<td></td>
<td>multisite</td>
<td>Nein</td>
<td><strong>Vorlage verwenden:</strong> Konfigurationsvorlage, die die Standardwerte bestimmter Einstellungen überschreibt.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Nginx-Einstellungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NGINX_PREFIX</code></td>
<td><code>/etc/nginx/</code></td>
<td>global</td>
<td>Nein</td>
<td><strong>Nginx-Präfix:</strong> Wo Nginx nach Konfigurationen suchen wird.</td>
</tr>
<tr>
<td><code>SERVER_NAMES_HASH_BUCKET_SIZE</code></td>
<td></td>
<td>global</td>
<td>Nein</td>
<td><strong>Server-Namen-Hash-Bucket-Größe:</strong> Wert für die <code>server_names_hash_bucket_size</code>-Direktive.</td>
</tr>
</tbody>
</table>
<h3 id="beispielkonfigurationen">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="10:4"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><input id="__tabbed_10_4" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Grundlegendes Produktions-Setup</label><label for="__tabbed_10_2">Entwicklungsmodus</label><label for="__tabbed_10_3">Multisite-Konfiguration</label><label for="__tabbed_10_4">Stream-Server-Konfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine Standardkonfiguration für eine Produktionswebsite mit strenger Sicherheit:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notice&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für eine Entwicklungsumgebung mit zusätzlicher Protokollierung:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dev.example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;debug&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration zum Hosten mehrerer Websites:</p>
<div class="highlight"><pre><span></span><code><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Erste Website</span>
<span class="nt">site1.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site1.example.com&quot;</span>
<span class="nt">site1.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>

<span class="c1"># Zweite Website</span>
<span class="nt">site2.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site2.example.com&quot;</span>
<span class="nt">site2.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für einen TCP/UDP-Server:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream.example.com&quot;</span>
<span class="nt">LISTEN_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LISTEN_STREAM_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1337&quot;</span>
<span class="nt">USE_TCP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_UDP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="anti-ddos-pro">Anti DDoS <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides enhanced protection against DDoS attacks by analyzing and filtering suspicious traffic.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIDDOS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td>Enable or disable anti DDoS protection to mitigate high traffic spikes.</td>
</tr>
<tr>
<td><code>ANTIDDOS_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>nein</td>
<td>Size of in-memory storage for DDoS metrics (e.g., 10M, 500k).</td>
</tr>
<tr>
<td><code>ANTIDDOS_THRESHOLD</code></td>
<td><code>100</code></td>
<td>global</td>
<td>nein</td>
<td>Maximum suspicious requests allowed from a single IP before blocking.</td>
</tr>
<tr>
<td><code>ANTIDDOS_WINDOW_TIME</code></td>
<td><code>10</code></td>
<td>global</td>
<td>nein</td>
<td>Time window (seconds) to detect abnormal request patterns.</td>
</tr>
<tr>
<td><code>ANTIDDOS_STATUS_CODES</code></td>
<td><code>429 403 444</code></td>
<td>global</td>
<td>nein</td>
<td>HTTP status codes treated as suspicious for DDoS analysis.</td>
</tr>
<tr>
<td><code>ANTIDDOS_DISTINCT_IP</code></td>
<td><code>5</code></td>
<td>global</td>
<td>nein</td>
<td>Minimum distinct IP count before enabling anti DDoS measures.</td>
</tr>
</tbody>
</table>
<h2 id="antibot">Antibot</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Angreifer nutzen oft automatisierte Tools (Bots), um zu versuchen, Ihre Website auszunutzen. Zum Schutz davor enthält BunkerWeb eine „Antibot“-Funktion, die Benutzer auffordert, zu beweisen, dass sie menschlich sind. Wenn ein Benutzer die Herausforderung besteht, erhält er Zugriff auf Ihre Website. Diese Funktion ist standardmäßig deaktiviert.</p>
<p>So funktioniert es:</p>
<ol>
<li>Wenn ein Benutzer Ihre Website besucht, prüft BunkerWeb, ob er bereits eine Antibot-Herausforderung bestanden hat.</li>
<li>Andernfalls wird der Benutzer auf eine Herausforderungsseite umgeleitet.</li>
<li>Der Benutzer muss die Herausforderung abschließen (z. B. ein CAPTCHA lösen, JavaScript ausführen).</li>
<li>Wenn die Herausforderung erfolgreich ist, wird der Benutzer auf die ursprünglich angeforderte Seite umgeleitet und kann normal navigieren.</li>
</ol>
<h3 id="so-verwenden-sie-es">So verwenden Sie es</h3>
<p>Befolgen Sie diese Schritte, um Antibot zu aktivieren und zu konfigurieren:</p>
<ol>
<li>Wählen Sie einen Herausforderungstyp: Entscheiden Sie sich für den zu verwendenden Mechanismus (z. B. <a href="#__tabbed_3_3">captcha</a>, <a href="#__tabbed_3_5">hcaptcha</a>, <a href="#__tabbed_3_2">javascript</a>).</li>
<li>Aktivieren Sie die Funktion: Setzen Sie den Parameter <code>USE_ANTIBOT</code> in Ihrer BunkerWeb-Konfiguration auf den gewählten Typ.</li>
<li>Konfigurieren Sie die Einstellungen: Passen Sie bei Bedarf andere <code>ANTIBOT_*</code>-Parameter an. Für reCAPTCHA, hCaptcha, Turnstile und mCaptcha erstellen Sie ein Konto beim gewählten Dienst und erhalten Sie API-Schlüssel.</li>
<li>Wichtig: Stellen Sie sicher, dass <code>ANTIBOT_URI</code> eine eindeutige URL Ihrer Website ist und nirgendwo anders verwendet wird.</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Über den Parameter <code>ANTIBOT_URI</code></p>
</div>
<p>Stellen Sie sicher, dass <code>ANTIBOT_URI</code> eine eindeutige URL Ihrer Website ist und nirgendwo anders verwendet wird.</p>
<div class="admonition warning">
<p class="admonition-title">Sitzungen in Cluster-Umgebungen</p>
</div>
<p>Die Antibot-Funktion verwendet Cookies, um zu verfolgen, ob ein Benutzer die Herausforderung abgeschlossen hat. Wenn Sie BunkerWeb in einem Cluster (mehrere Instanzen) betreiben, müssen Sie die Sitzungsverwaltung korrekt konfigurieren: Setzen Sie <code>SESSIONS_SECRET</code> und <code>SESSIONS_NAME</code> auf allen BunkerWeb-Instanzen auf dieselben Werte. Andernfalls könnten Benutzer aufgefordert werden, die Herausforderung zu wiederholen. Weitere Informationen zur Sitzungskonfiguration finden Sie <a href="#sessions">hier</a>.</p>
<h3 id="allgemeine-parameter">Allgemeine Parameter</h3>
<p>Die folgenden Parameter werden von allen Herausforderungsmechanismen gemeinsam genutzt:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standardwert</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>ANTIBOT_URI</code></td>
<td style="text-align: left;"><code>/challenge</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Herausforderungs-URL: Die URL, zu der Benutzer umgeleitet werden, um die Herausforderung abzuschließen. Stellen Sie sicher, dass diese URL nicht für andere Zwecke verwendet wird.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_TIME_RESOLVE</code></td>
<td style="text-align: left;"><code>60</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Herausforderungs-Timeout: Maximale Zeit (in Sekunden) zum Abschließen der Herausforderung. Danach wird eine neue Herausforderung generiert.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_TIME_VALID</code></td>
<td style="text-align: left;"><code>86400</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Herausforderungs-Gültigkeit: Dauer (in Sekunden), für die eine erfolgreiche Herausforderung gültig bleibt. Nach dieser Zeit wird eine neue Herausforderung erforderlich sein.</td>
</tr>
</tbody>
</table>
<h3 id="ausschlieen-von-traffic-von-herausforderungen">Ausschließen von Traffic von Herausforderungen</h3>
<p>BunkerWeb ermöglicht es, bestimmte Benutzer, IPs oder Anfragen anzugeben, die die Antibot-Herausforderung vollständig umgehen sollen. Nützlich für vertrauenswürdige Dienste, interne Netzwerke oder Seiten, die immer zugänglich sein sollen:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>ANTIBOT_IGNORE_URI</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Ausgeschlossene URLs: Eine durch Leerzeichen getrennte Liste von URI-Regulären Ausdrücken, die die Herausforderung umgehen sollen.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_IGNORE_IP</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Ausgeschlossene IPs: Eine durch Leerzeichen getrennte Liste von IP-Adressen oder CIDR-Bereichen, die die Herausforderung umgehen sollen.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_IGNORE_RDNS</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Ausgeschlossene rDNS: Eine durch Leerzeichen getrennte Liste von Reverse-DNS-Suffixen, die die Herausforderung umgehen sollen.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RDNS_GLOBAL</code></td>
<td style="text-align: left;"><code>yes</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Nur öffentliche IPs: Wenn <code>yes</code>, werden rDNS-Prüfungen nur für öffentliche IPs durchgeführt.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_IGNORE_ASN</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Ausgeschlossene ASNs: Eine durch Leerzeichen getrennte Liste von ASN-Nummern, die die Herausforderung umgehen sollen.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_IGNORE_USER_AGENT</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Ausgeschlossene User-Agents: Eine durch Leerzeichen getrennte Liste von User-Agent-Regex-Mustern, die die Herausforderung umgehen sollen.</td>
</tr>
</tbody>
</table>
<p>Beispiele:</p>
<ul>
<li>
<p><code>ANTIBOT_IGNORE_URI: "^/api/ ^/webhook/ ^/assets/"</code>
  Schließt alle URIs aus, die mit <code>/api/</code>, <code>/webhook/</code> oder <code>/assets/</code> beginnen.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_IP: "192.168.1.0/24 10.0.0.1"</code>
  Schließt das interne Netzwerk <code>192.168.1.0/24</code> und die spezifische IP <code>10.0.0.1</code> aus.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_RDNS: ".googlebot.com .bingbot.com"</code>
  Schließt Anfragen von Hosts aus, deren Reverse-DNS auf <code>googlebot.com</code> oder <code>bingbot.com</code> endet.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_ASN: "15169 8075"</code>
  Schließt Anfragen von den ASNs 15169 (Google) und 8075 (Microsoft) aus.</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_USER_AGENT: "^Mozilla.+Chrome.+Safari"</code>
  Schließt Anfragen aus, deren User-Agent dem angegebenen Regex-Muster entspricht.</p>
</li>
</ul>
<h3 id="herausforderungsmechanismen">Herausforderungsmechanismen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="11:7"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><input id="__tabbed_11_4" name="__tabbed_11" type="radio" /><input id="__tabbed_11_5" name="__tabbed_11" type="radio" /><input id="__tabbed_11_6" name="__tabbed_11" type="radio" /><input id="__tabbed_11_7" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Cookie</label><label for="__tabbed_11_2">JavaScript</label><label for="__tabbed_11_3">Captcha</label><label for="__tabbed_11_4">reCAPTCHA</label><label for="__tabbed_11_5">hCaptcha</label><label for="__tabbed_11_6">Turnstile</label><label for="__tabbed_11_7">mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Die Cookie-Herausforderung ist ein leichter Mechanismus, der auf der Installation eines Cookies im Browser des Benutzers basiert. Wenn ein Benutzer auf die Website zugreift, sendet der Server ein Cookie an den Client. Bei nachfolgenden Anfragen überprüft der Server das Vorhandensein dieses Cookies, um zu bestätigen, dass der Benutzer legitim ist. Diese Methode ist einfach und effektiv für einen grundlegenden Schutz vor Bots, ohne zusätzliche Benutzerinteraktion zu erfordern.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Der Server generiert ein eindeutiges Cookie und sendet es an den Client.</li>
<li>Der Client muss das Cookie bei nachfolgenden Anfragen zurücksenden.</li>
<li>Wenn das Cookie fehlt oder ungültig ist, wird der Benutzer auf die Herausforderungsseite umgeleitet.</li>
</ol>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Antibot aktivieren: Auf <code>cookie</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Die JavaScript-Herausforderung fordert den Client auf, eine Rechenaufgabe mithilfe von JavaScript zu lösen. Dieser Mechanismus stellt sicher, dass der Client JavaScript aktiviert hat und den erforderlichen Code ausführen kann, was für die meisten Bots in der Regel nicht möglich ist.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Der Server sendet ein JavaScript-Skript an den Client.</li>
<li>Das Skript führt eine Rechenaufgabe aus (z. B. einen Hash) und übermittelt das Ergebnis an den Server.</li>
<li>Der Server überprüft das Ergebnis, um die Legitimität des Clients zu bestätigen.</li>
</ol>
<p><strong>Hauptmerkmale:</strong></p>
<ul>
<li>Die Herausforderung generiert dynamisch eine einzigartige Aufgabe für jeden Client.</li>
<li>Die Rechenaufgabe beinhaltet ein Hashing mit spezifischen Bedingungen (z. B. das Finden eines Hashes mit einem bestimmten Präfix).</li>
</ul>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Antibot aktivieren: Auf <code>javascript</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Die Captcha-Herausforderung ist ein hauseigener Mechanismus, der bildbasierte Herausforderungen generiert, die vollständig in Ihrer BunkerWeb-Umgebung gehostet werden. Er testet die Fähigkeit der Benutzer, zufällige Zeichen zu erkennen und zu interpretieren, wodurch sichergestellt wird, dass automatisierte Bots effektiv blockiert werden, ohne auf externe Dienste angewiesen zu sein.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Der Server generiert ein CAPTCHA-Bild mit zufälligen Zeichen.</li>
<li>Der Benutzer muss die im Bild angezeigten Zeichen in ein Textfeld eingeben.</li>
<li>Der Server validiert die Benutzereingabe anhand des generierten CAPTCHAs.</li>
</ol>
<p><strong>Hauptmerkmale:</strong></p>
<ul>
<li>Vollständig selbst gehostet, wodurch die Notwendigkeit von Drittanbieter-APIs entfällt.</li>
<li>Dynamisch generierte Herausforderungen gewährleisten die Einzigartigkeit für jede Benutzersitzung.</li>
<li>Verwendet einen anpassbaren Zeichensatz für die CAPTCHA-Generierung.</li>
</ul>
<p><strong>Unterstützte Zeichen:</strong></p>
<p>Das CAPTCHA-System unterstützt die folgenden Zeichentypen:</p>
<ul>
<li><strong>Buchstaben:</strong> Alle Kleinbuchstaben (a-z) und Großbuchstaben (A-Z)</li>
<li><strong>Ziffern:</strong> 2, 3, 4, 5, 6, 7, 8, 9 (schließt 0 und 1 aus, um Verwechslungen zu vermeiden)</li>
<li><strong>Sonderzeichen:</strong> <code>+-/=%"'&amp;_(),.;:?!§`^ÄÖÜßäöüé''‚""„</code></li>
</ul>
<p>Eine vollständige Liste der unterstützten Zeichen finden Sie in der <a href="https://www.dafont.com/moms-typewriter.charmap?back=theme">Zeichentabelle der für das CAPTCHA verwendeten Schriftart</a>.</p>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;"><strong>Antibot aktivieren:</strong> Auf <code>captcha</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_CAPTCHA_ALPHABET</code></td>
<td style="text-align: left;"><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;"><strong>Captcha-Alphabet:</strong> Eine Zeichenkette, die zur Generierung des CAPTCHAs verwendet werden soll. Unterstützte Zeichen: alle Buchstaben (a-z, A-Z), die Ziffern 2-9 (schließt 0 und 1 aus) und die Sonderzeichen: <code>+-/=%"'&amp;_(),.;:?!§`^ÄÖÜßäöüé''‚""„</code></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Googles reCAPTCHA bietet eine Benutzervalidierung, die im Hintergrund (v3) ausgeführt wird, um eine Verhaltensbewertung zuzuweisen. Eine Bewertung unterhalb des konfigurierten Schwellenwerts löst eine zusätzliche Überprüfung aus oder blockiert die Anfrage. Bei sichtbaren Herausforderungen (v2) müssen Benutzer mit dem reCAPTCHA-Widget interagieren, bevor sie fortfahren können.</p>
<p>Es gibt jetzt zwei Möglichkeiten, reCAPTCHA zu integrieren:
- Die klassische Version (Site-/Geheimschlüssel, v2/v3-Verifizierungsendpunkt)
- Die neue Version mit Google Cloud (Projekt-ID + API-Schlüssel). Die klassische Version bleibt verfügbar und kann mit <code>ANTIBOT_RECAPTCHA_CLASSIC</code> aktiviert werden.</p>
<p>Für die klassische Version erhalten Sie Ihre Site- und Geheimschlüssel über die <a href="https://www.google.com/recaptcha/admin">Google reCAPTCHA Admin-Konsole</a>.
Für die neue Version erstellen Sie einen reCAPTCHA-Schlüssel in Ihrem Google Cloud-Projekt und verwenden Sie die Projekt-ID sowie einen API-Schlüssel (siehe <a href="https://console.cloud.google.com/security/recaptcha">Google Cloud reCAPTCHA-Konsole</a>). Ein Site-Schlüssel ist immer erforderlich.</p>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Antibot aktivieren: Auf <code>recaptcha</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_CLASSIC</code></td>
<td style="text-align: left;"><code>yes</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Klassisches reCAPTCHA verwenden. Auf <code>no</code> setzen, um die neue Google Cloud-basierte Version zu verwenden.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_SITEKEY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">reCAPTCHA Site-Schlüssel. Für beide Versionen erforderlich.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_SECRET</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">reCAPTCHA Geheimschlüssel. Nur für die klassische Version erforderlich.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_PROJECT_ID</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Google Cloud Projekt-ID. Nur für die neue Version erforderlich.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_API_KEY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Google Cloud API-Schlüssel, der zum Aufrufen der reCAPTCHA Enterprise API verwendet wird. Nur für die neue Version erforderlich.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_JA3</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Optionaler JA3 TLS-Fingerabdruck, der in Enterprise-Bewertungen enthalten sein soll.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_JA4</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Optionaler JA4 TLS-Fingerabdruck, der in Enterprise-Bewertungen enthalten sein soll.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_RECAPTCHA_SCORE</code></td>
<td style="text-align: left;"><code>0.7</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Mindestpunktzahl, die zum Bestehen erforderlich ist (gilt für klassische v3 und die neue Version).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Wenn aktiviert, bietet hCaptcha eine effektive Alternative zu reCAPTCHA, indem es Benutzerinteraktionen überprüft, ohne auf einen Bewertungsmechanismus angewiesen zu sein. Es fordert Benutzer mit einem einfachen, interaktiven Test heraus, um ihre Legitimität zu bestätigen.</p>
<p>Um hCaptcha mit BunkerWeb zu integrieren, müssen Sie die erforderlichen Anmeldeinformationen vom hCaptcha-Dashboard unter <a href="https://www.hcaptcha.com">hCaptcha</a> abrufen. Diese Informationen umfassen einen Site-Schlüssel und einen Geheimschlüssel.</p>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Antibot aktivieren: Auf <code>hcaptcha</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_HCAPTCHA_SITEKEY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">hCaptcha Site-Schlüssel.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_HCAPTCHA_SECRET</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">hCaptcha Geheimschlüssel.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Turnstile ist ein moderner, datenschutzfreundlicher Herausforderungsmechanismus, der auf der Technologie von Cloudflare basiert, um automatisierten Traffic zu erkennen und zu blockieren. Er validiert Benutzerinteraktionen transparent und im Hintergrund, wodurch die Reibung für legitime Benutzer reduziert und Bots effektiv abgeschreckt werden.</p>
<p>Um Turnstile mit BunkerWeb zu integrieren, stellen Sie sicher, dass Sie die erforderlichen Anmeldeinformationen von <a href="https://www.cloudflare.com/turnstile">Cloudflare Turnstile</a> erhalten.</p>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Antibot aktivieren: Auf <code>turnstile</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_TURNSTILE_SITEKEY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Turnstile Site-Schlüssel (Cloudflare).</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_TURNSTILE_SECRET</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Turnstile Geheimschlüssel (Cloudflare).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>mCaptcha ist ein alternativer CAPTCHA-Herausforderungsmechanismus, der die Legitimität von Benutzern überprüft, indem er einen interaktiven Test präsentiert, ähnlich wie andere Antibot-Lösungen. Wenn aktiviert, fordert es Benutzer mit einem von mCaptcha bereitgestellten CAPTCHA heraus, um sicherzustellen, dass nur authentische Benutzer die automatisierten Sicherheitskontrollen umgehen.</p>
<p>mCaptcha ist datenschutzfreundlich konzipiert. Es ist vollständig DSGVO-konform und stellt sicher, dass alle am Herausforderungsprozess beteiligten Benutzerdaten strenge Datenschutzstandards erfüllen. Darüber hinaus bietet mCaptcha die Flexibilität, selbst gehostet zu werden, sodass Organisationen die volle Kontrolle über ihre Daten und Infrastruktur behalten. Diese Selbsthosting-Fähigkeit verbessert nicht nur den Datenschutz, sondern optimiert auch die Leistung und Anpassung an spezifische Bereitstellungsanforderungen.</p>
<p>Um mCaptcha mit BunkerWeb zu integrieren, müssen Sie die erforderlichen Anmeldeinformationen von der <a href="https://mcaptcha.org/">mCaptcha-Plattform</a> oder Ihrem eigenen Anbieter abrufen. Diese Informationen umfassen einen Site-Schlüssel und einen Geheimschlüssel zur Überprüfung.</p>
<p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_ANTIBOT</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Antibot aktivieren: Auf <code>mcaptcha</code> setzen, um diesen Mechanismus zu aktivieren.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_MCAPTCHA_SITEKEY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">mCaptcha Site-Schlüssel.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_MCAPTCHA_SECRET</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">mCaptcha Geheimschlüssel.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ANTIBOT_MCAPTCHA_URL</code></td>
<td style="text-align: left;"><code>https://demo.mcaptcha.org</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Zu verwendende Domain für mCaptcha.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Siehe Allgemeine Parameter für zusätzliche Optionen.</p>
<h3 id="konfigurationsbeispiele">Konfigurationsbeispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Cookie-Herausforderung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cookie&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">JavaScript-Herausforderung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;javascript&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Captcha-Herausforderung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;captcha&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">ANTIBOT_CAPTCHA_ALPHABET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;23456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
</code></pre></div>
<p>Hinweis: Das obige Beispiel verwendet die Ziffern 2-9 und alle Buchstaben, die häufig für CAPTCHAs verwendet werden. Sie können das Alphabet bei Bedarf anpassen, um Sonderzeichen einzuschließen.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Klassische reCAPTCHA-Herausforderung</label><label for="__tabbed_15_2">reCAPTCHA-Herausforderung (neu)</label><label for="__tabbed_15_3">hCaptcha-Herausforderung</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Beispielkonfiguration für das klassische reCAPTCHA (Site-/Geheimschlüssel):</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration für das neue Google Cloud-basierte reCAPTCHA (Projekt-ID + API-Schlüssel):</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_PROJECT_ID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-project-id&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-api-key&quot;</span>
<span class="c1"># Optionale Fingerabdrücke zur Verbesserung der Enterprise-Bewertungen</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA3: &quot;&lt;ja3-fingerprint&gt;&quot;</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA4: &quot;&lt;ja4-fingerprint&gt;&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hcaptcha&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Turnstile-Herausforderung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turnstile&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">mCaptcha-Herausforderung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mcaptcha&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://demo.mcaptcha.org&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
<h2 id="auth-basic">Auth basic</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das Auth Basic-Plugin bietet eine HTTP-Basisauthentifizierung zum Schutz Ihrer Website oder bestimmter Ressourcen. Diese Funktion fügt eine zusätzliche Sicherheitsebene hinzu, indem sie von den Benutzern die Eingabe eines Benutzernamens und eines Passworts verlangt, bevor sie auf geschützte Inhalte zugreifen können. Diese Art der Authentifizierung ist einfach zu implementieren und wird von den Browsern weitgehend unterstützt.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Benutzer versucht, auf einen geschützten Bereich Ihrer Website zuzugreifen, sendet der Server eine Authentifizierungsaufforderung.</li>
<li>Der Browser zeigt ein Anmeldedialogfeld an, in dem der Benutzer zur Eingabe von Benutzername und Passwort aufgefordert wird.</li>
<li>Der Benutzer gibt seine Anmeldedaten ein, die an den Server gesendet werden.</li>
<li>Wenn die Anmeldeinformationen gültig sind, erhält der Benutzer Zugriff auf den angeforderten Inhalt.</li>
<li>Wenn die Anmeldeinformationen ungültig sind, wird dem Benutzer eine Fehlermeldung mit dem Statuscode 401 Unauthorized angezeigt.</li>
</ol>
<h3 id="wie-man-es-benutzt">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Auth Basic-Authentifizierung zu aktivieren und zu konfigurieren:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Setzen Sie die Einstellung <code>USE_AUTH_BASIC</code> in Ihrer BunkerWeb-Konfiguration auf <code>yes</code>.</li>
<li><strong>Wählen Sie den Schutzumfang:</strong> Entscheiden Sie, ob Sie Ihre gesamte Website oder nur bestimmte URLs schützen möchten, indem Sie die Einstellung <code>AUTH_BASIC_LOCATION</code> konfigurieren.</li>
<li><strong>Anmeldeinformationen definieren:</strong> Richten Sie mindestens ein Paar aus Benutzername und Passwort mit den Einstellungen <code>AUTH_BASIC_USER</code> und <code>AUTH_BASIC_PASSWORD</code> ein.</li>
<li><strong>Passen Sie die Nachricht an:</strong> Ändern Sie optional den <code>AUTH_BASIC_TEXT</code>, um eine benutzerdefinierte Nachricht in der Anmeldeaufforderung anzuzeigen.</li>
</ol>
<h3 id="konfigurationseinstellungen_1">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_AUTH_BASIC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Auth Basic aktivieren:</strong> Auf <code>yes</code> setzen, um die Basisauthentifizierung zu aktivieren.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_LOCATION</code></td>
<td><code>sitewide</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Schutzumfang:</strong> Auf <code>sitewide</code> setzen, um die gesamte Website zu schützen, oder einen URL-Pfad angeben (z.B. <code>/admin</code>), um nur bestimmte Bereiche zu schützen.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_USER</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Benutzername:</strong> Der für die Authentifizierung erforderliche Benutzername. Sie können mehrere Paare aus Benutzername und Passwort definieren.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_PASSWORD</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Passwort:</strong> Das für die Authentifizierung erforderliche Passwort. Jedes Passwort korrespondiert mit einem Benutzernamen.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_TEXT</code></td>
<td><code>Restricted area</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Aufforderungstext:</strong> Die Nachricht, die in der dem Benutzer angezeigten Authentifizierungsaufforderung erscheint.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sicherheitshinweise</p>
</div>
<p>Die HTTP-Basisauthentifizierung überträgt Anmeldeinformationen, die in Base64 kodiert (nicht verschlüsselt) sind. Obwohl dies bei Verwendung über HTTPS akzeptabel ist, sollte es über reines HTTP nicht als sicher angesehen werden. Aktivieren Sie immer SSL/TLS, wenn Sie die Basisauthentifizierung verwenden.</p>
<div class="admonition tip">
<p class="admonition-title">Verwendung mehrerer Anmeldeinformationen</p>
</div>
<p>Sie können mehrere Paare aus Benutzername/Passwort für den Zugriff konfigurieren. Jede <code>AUTH_BASIC_USER</code>-Einstellung sollte eine entsprechende <code>AUTH_BASIC_PASSWORD</code>-Einstellung haben.</p>
<h3 id="beispielkonfigurationen_1">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="18:3"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><input id="__tabbed_18_3" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">Schutz der gesamten Website</label><label for="__tabbed_18_2">Schutz bestimmter Bereiche</label><label for="__tabbed_18_3">Mehrere Benutzer</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>So schützen Sie Ihre gesamte Website mit einem einzigen Satz von Anmeldeinformationen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Um nur einen bestimmten Pfad zu schützen, wie z.B. ein Admin-Panel:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>So richten Sie mehrere Benutzer mit unterschiedlichen Anmeldeinformationen ein:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Staff</span><span class="nv"> </span><span class="s">Area&quot;</span>

<span class="c1"># Erster Benutzer</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin_password&quot;</span>

<span class="c1"># Zweiter Benutzer</span>
<span class="nt">AUTH_BASIC_USER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor_password&quot;</span>

<span class="c1"># Dritter Benutzer</span>
<span class="nt">AUTH_BASIC_USER_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer_password&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup">Backup</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Backup-Plugin bietet eine automatisierte Backup-Lösung zum Schutz Ihrer BunkerWeb-Daten. Diese Funktion gewährleistet die Sicherheit und Verfügbarkeit Ihrer wichtigen Datenbank, indem sie regelmäßige Backups nach Ihrem bevorzugten Zeitplan erstellt. Backups werden an einem bestimmten Ort gespeichert und können sowohl durch automatisierte Prozesse als auch durch manuelle Befehle einfach verwaltet werden.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Ihre Datenbank wird automatisch gemäß dem von Ihnen festgelegten Zeitplan (täglich, wöchentlich oder monatlich) gesichert.</li>
<li>Backups werden in einem angegebenen Verzeichnis auf Ihrem System gespeichert.</li>
<li>Alte Backups werden automatisch basierend auf Ihren Aufbewahrungseinstellungen rotiert.</li>
<li>Sie können jederzeit manuell Backups erstellen, vorhandene Backups auflisten oder eine Wiederherstellung aus einem Backup durchführen.</li>
<li>Vor jeder Wiederherstellung wird der aktuelle Zustand als Sicherheitsmaßnahme automatisch gesichert.</li>
</ol>
<h3 id="wie-man-es-benutzt_1">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Backup-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die Backup-Funktion ist standardmäßig aktiviert. Bei Bedarf können Sie dies mit der Einstellung <code>USE_BACKUP</code> steuern.</li>
<li><strong>Backup-Zeitplan konfigurieren:</strong> Wählen Sie mit dem Parameter <code>BACKUP_SCHEDULE</code>, wie oft Backups durchgeführt werden sollen.</li>
<li><strong>Aufbewahrungsrichtlinie festlegen:</strong> Geben Sie mit der Einstellung <code>BACKUP_ROTATION</code> an, wie viele Backups aufbewahrt werden sollen.</li>
<li><strong>Speicherort festlegen:</strong> Wählen Sie mit der Einstellung <code>BACKUP_DIRECTORY</code>, wo die Backups gespeichert werden sollen.</li>
<li><strong>CLI-Befehle verwenden:</strong> Verwalten Sie Backups bei Bedarf manuell mit den <code>bwcli plugin backup</code>-Befehlen.</li>
</ol>
<h3 id="konfigurationseinstellungen_2">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Backup aktivieren:</strong> Auf <code>yes</code> setzen, um automatische Backups zu aktivieren.</td>
</tr>
<tr>
<td><code>BACKUP_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Backup-Frequenz:</strong> Wie oft Backups durchgeführt werden sollen. Optionen: <code>daily</code>, <code>weekly</code> oder <code>monthly</code>.</td>
</tr>
<tr>
<td><code>BACKUP_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Backup-Aufbewahrung:</strong> Die Anzahl der aufzubewahrenden Backup-Dateien. Ältere Backups werden automatisch gelöscht.</td>
</tr>
<tr>
<td><code>BACKUP_DIRECTORY</code></td>
<td><code>/var/lib/bunkerweb/backups</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Backup-Speicherort:</strong> Das Verzeichnis, in dem die Backup-Dateien gespeichert werden.</td>
</tr>
</tbody>
</table>
<h3 id="befehlszeilenschnittstelle">Befehlszeilenschnittstelle</h3>
<p>Das Backup-Plugin bietet mehrere CLI-Befehle zur Verwaltung Ihrer Backups:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Alle verfügbaren Backups auflisten</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>list

<span class="c1"># Ein manuelles Backup erstellen</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save

<span class="c1"># Ein Backup an einem benutzerdefinierten Ort erstellen</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w"> </span>--directory<span class="w"> </span>/pfad/zum/benutzerdefinierten/ort

<span class="c1"># Aus dem neuesten Backup wiederherstellen</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore

<span class="c1"># Aus einer bestimmten Backup-Datei wiederherstellen</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w"> </span>/pfad/zum/backup/backup-sqlite-2023-08-15_12-34-56.zip
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Sicherheit geht vor</p>
</div>
<p>Vor jeder Wiederherstellung erstellt das Backup-Plugin automatisch ein Backup des aktuellen Zustands Ihrer Datenbank an einem temporären Ort. Dies bietet eine zusätzliche Absicherung für den Fall, dass Sie die Wiederherstellung rückgängig machen müssen.</p>
<div class="admonition warning">
<p class="admonition-title">Datenbankkompatibilität</p>
</div>
<p>Das Backup-Plugin unterstützt SQLite, MySQL/MariaDB und PostgreSQL-Datenbanken. Oracle-Datenbanken werden derzeit für Backup- und Wiederherstellungsvorgänge nicht unterstützt.</p>
<h3 id="beispielkonfigurationen_2">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="19:3"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">Tägliche Backups mit 7-tägiger Aufbewahrung</label><label for="__tabbed_19_2">Wöchentliche Backups mit erweiterter Aufbewahrung</label><label for="__tabbed_19_3">Monatliche Backups an einem benutzerdefinierten Speicherort</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Standardkonfiguration, die tägliche Backups erstellt und die letzten 7 Dateien aufbewahrt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für seltenere Backups mit längerer Aufbewahrung:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;weekly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für monatliche Backups, die an einem benutzerdefinierten Ort gespeichert werden:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/backup-drive/bunkerweb-backups&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup-s3-pro">Backup S3 <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Automatically backup your data to an S3 bucket</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP_S3</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td>Enable or disable the S3 backup feature</td>
</tr>
<tr>
<td><code>BACKUP_S3_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>nein</td>
<td>The frequency of the backup</td>
</tr>
<tr>
<td><code>BACKUP_S3_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>nein</td>
<td>The number of backups to keep</td>
</tr>
<tr>
<td><code>BACKUP_S3_ENDPOINT</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The S3 endpoint</td>
</tr>
<tr>
<td><code>BACKUP_S3_BUCKET</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The S3 bucket</td>
</tr>
<tr>
<td><code>BACKUP_S3_DIR</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The S3 directory</td>
</tr>
<tr>
<td><code>BACKUP_S3_REGION</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The S3 region</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_ID</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The S3 access key ID</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_SECRET</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The S3 access key secret</td>
</tr>
<tr>
<td><code>BACKUP_S3_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>global</td>
<td>nein</td>
<td>The compression level of the backup zip file</td>
</tr>
</tbody>
</table>
<h2 id="bad-behavior">Bad behavior</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Bad Behavior-Plugin schützt Ihre Website, indem es IP-Adressen, die innerhalb eines bestimmten Zeitraums zu viele Fehler oder „schlechte“ HTTP-Statuscodes erzeugen, automatisch erkennt und sperrt. Dies hilft bei der Abwehr von Brute-Force-Angriffen, Web-Scrapern, Schwachstellen-Scannern und anderen böswilligen Aktivitäten, die zahlreiche Fehlerantworten erzeugen könnten.</p>
<p>Angreifer erzeugen oft „verdächtige“ HTTP-Statuscodes, wenn sie nach Schwachstellen suchen oder diese ausnutzen – Codes, die ein typischer Benutzer innerhalb eines bestimmten Zeitrahmens wahrscheinlich nicht auslösen würde. Durch die Erkennung dieses Verhaltens kann BunkerWeb die betreffende IP-Adresse automatisch sperren und den Angreifer zwingen, eine neue IP-Adresse zu verwenden, um seine Versuche fortzusetzen.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Das Plugin überwacht die HTTP-Antworten Ihrer Website.</li>
<li>Wenn ein Besucher einen „schlechten“ HTTP-Statuscode (wie 400, 401, 403, 404 usw.) erhält, wird der Zähler für diese IP-Adresse erhöht.</li>
<li>Wenn eine IP-Adresse den konfigurierten Schwellenwert für schlechte Statuscodes innerhalb des angegebenen Zeitraums überschreitet, wird die IP automatisch gesperrt.</li>
<li>Gesperrte IPs können je nach Konfiguration entweder auf Dienstebene (nur für die spezifische Website) oder global (über alle Websites hinweg) blockiert werden.</li>
<li>Sperren laufen automatisch nach der konfigurierten Sperrdauer ab oder bleiben dauerhaft, wenn sie mit <code>0</code> konfiguriert sind.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Wichtige Vorteile</p>
<ol>
<li><strong>Automatischer Schutz:</strong> Erkennt und blockiert potenziell bösartige Clients ohne manuellen Eingriff.</li>
<li><strong>Anpassbare Regeln:</strong> Passen Sie genau an, was als „schlechtes Verhalten“ gilt, basierend auf Ihren spezifischen Anforderungen.</li>
<li><strong>Ressourcenschonung:</strong> Verhindert, dass böswillige Akteure Serverressourcen durch wiederholte ungültige Anfragen verbrauchen.</li>
<li><strong>Flexibler Geltungsbereich:</strong> Wählen Sie, ob Sperren nur für den aktuellen Dienst oder global für alle Dienste gelten sollen.</li>
<li><strong>Kontrolle der Sperrdauer:</strong> Legen Sie temporäre Sperren fest, die automatisch nach der konfigurierten Dauer ablaufen, oder permanente Sperren, die bis zur manuellen Aufhebung bestehen bleiben.</li>
</ol>
</div>
<h3 id="wie-man-es-benutzt_2">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Bad Behavior-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die Bad Behavior-Funktion ist standardmäßig aktiviert. Bei Bedarf können Sie dies mit der Einstellung <code>USE_BAD_BEHAVIOR</code> steuern.</li>
<li><strong>Statuscodes konfigurieren:</strong> Definieren Sie mit der Einstellung <code>BAD_BEHAVIOR_STATUS_CODES</code>, welche HTTP-Statuscodes als „schlecht“ gelten sollen.</li>
<li><strong>Schwellenwerte festlegen:</strong> Bestimmen Sie mit der Einstellung <code>BAD_BEHAVIOR_THRESHOLD</code>, wie viele „schlechte“ Antworten eine Sperre auslösen sollen.</li>
<li><strong>Zeiträume konfigurieren:</strong> Geben Sie die Dauer für die Zählung schlechter Antworten und die Sperrdauer mit den Einstellungen <code>BAD_BEHAVIOR_COUNT_TIME</code> und <code>BAD_BEHAVIOR_BAN_TIME</code> an.</li>
<li><strong>Sperrbereich wählen:</strong> Entscheiden Sie mit der Einstellung <code>BAD_BEHAVIOR_BAN_SCOPE</code>, ob die Sperren nur für den aktuellen Dienst oder global für alle Dienste gelten sollen.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Stream-Modus</p>
</div>
<p>Im <strong>Stream-Modus</strong> wird nur der Statuscode <code>444</code> als „schlecht“ angesehen und löst dieses Verhalten aus.</p>
<h3 id="konfigurationseinstellungen_3">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BAD_BEHAVIOR</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Bad Behavior aktivieren:</strong> Auf <code>yes</code> setzen, um die Funktion zur Erkennung und Sperrung von schlechtem Verhalten zu aktivieren.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_STATUS_CODES</code></td>
<td><code>400 401 403 404 405 429 444</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Schlechte Statuscodes:</strong> Liste der HTTP-Statuscodes, die als „schlechtes“ Verhalten gezählt werden, wenn sie an einen Client zurückgegeben werden.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_THRESHOLD</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Schwellenwert:</strong> Die Anzahl der „schlechten“ Statuscodes, die eine IP innerhalb des Zählzeitraums erzeugen kann, bevor sie gesperrt wird.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_COUNT_TIME</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Zählzeitraum:</strong> Das Zeitfenster (in Sekunden), in dem schlechte Statuscodes auf den Schwellenwert angerechnet werden.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_TIME</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Sperrdauer:</strong> Wie lange (in Sekunden) eine IP nach Überschreiten des Schwellenwerts gesperrt bleibt. Standard ist 24 Stunden (86400 Sekunden). <code>0</code> für permanente Sperren.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_SCOPE</code></td>
<td><code>service</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Sperrbereich:</strong> Legt fest, ob Sperren nur für den aktuellen Dienst (<code>service</code>) oder für alle Dienste (<code>global</code>) gelten.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Falsch-Positive</p>
</div>
<p>Seien Sie vorsichtig bei der Einstellung des Schwellenwerts und der Zählzeit. Zu niedrige Werte können versehentlich legitime Benutzer sperren, die beim Surfen auf Ihrer Website auf Fehler stoßen.</p>
<div class="admonition tip">
<p class="admonition-title">Anpassen Ihrer Konfiguration</p>
</div>
<p>Beginnen Sie mit konservativen Einstellungen (höherer Schwellenwert, kürzere Sperrzeit) und passen Sie diese je nach Ihren spezifischen Bedürfnissen und Verkehrsmustern an. Überwachen Sie Ihre Protokolle, um sicherzustellen, dass legitime Benutzer nicht fälschlicherweise gesperrt werden.</p>
<h3 id="beispielkonfigurationen_3">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="20:4"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><input id="__tabbed_20_3" name="__tabbed_20" type="radio" /><input id="__tabbed_20_4" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">Standardkonfiguration</label><label for="__tabbed_20_2">Strikte Konfiguration</label><label for="__tabbed_20_3">Nachsichtige Konfiguration</label><label for="__tabbed_20_4">Konfiguration für permanente Sperren</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Die Standardkonfiguration bietet einen ausgewogenen Ansatz, der für die meisten Websites geeignet ist:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Für Hochsicherheitsanwendungen, bei denen Sie potenzielle Bedrohungen aggressiver sperren möchten:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span><span class="w">  </span><span class="c1"># 7 Tage</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="c1"># Sperre über alle Dienste hinweg</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Für Websites mit hohem legitimen Datenverkehr, bei denen Sie Falsch-Positive vermeiden möchten:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">429&quot;</span><span class="w">  </span><span class="c1"># Nur unautorisierte, verbotene und ratenlimitierte zählen</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span><span class="w">  </span><span class="c1"># 1 Stunde</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Für Szenarien, in denen erkannte Angreifer dauerhaft gesperrt werden sollen, bis sie manuell entsperrt werden:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="w">  </span><span class="c1"># Permanente Sperre (läuft nie ab)</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="c1"># Sperre über alle Dienste hinweg</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="blacklist">Blacklist</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Blacklist-Plugin schützt Ihre Website, indem es den Zugriff basierend auf verschiedenen Client-Attributen blockiert. Diese Funktion wehrt bekannte bösartige Entitäten, Scanner und verdächtige Besucher ab, indem sie den Zugriff basierend auf IP-Adressen, Netzwerken, Reverse-DNS-Einträgen (rDNS), ASNs, User-Agents und spezifischen URI-Mustern verweigert.</p>
<p><strong>So funktioniert's:</strong>[1][2][3]</p>
<ol>
<li>Das Plugin überprüft eingehende Anfragen anhand mehrerer Blacklist-Kriterien (IP-Adressen, Netzwerke, rDNS, ASN, User-Agent oder URI-Muster).</li>
<li>Blacklists können direkt in Ihrer Konfiguration angegeben oder von externen URLs geladen werden.</li>
<li>Wenn ein Besucher einer Blacklist-Regel entspricht (und keiner Ignorier-Regel), wird der Zugriff verweigert.</li>
<li>Blacklists werden automatisch in regelmäßigen Abständen von den konfigurierten URLs aktualisiert.[4][5][6][7][8]</li>
<li>Sie können genau anpassen, welche Kriterien überprüft und ignoriert werden, basierend auf Ihren spezifischen Sicherheitsanforderungen.</li>
</ol>
<h3 id="so-verwenden-sie-es_1">So verwenden Sie es</h3>
<p>Befolgen Sie diese Schritte, um die Blacklist-Funktion einzurichten und zu verwenden:</p>
<ol>
<li><strong>Funktion aktivieren:</strong> Die Blacklist-Funktion ist standardmäßig aktiviert. Bei Bedarf können Sie sie mit dem Parameter <code>USE_BLACKLIST</code> steuern.</li>
<li><strong>Blockierregeln konfigurieren:</strong> Definieren Sie, welche IPs, Netzwerke, rDNS-Muster, ASNs, User-Agents oder URIs blockiert werden sollen.</li>
<li><strong>Ignorierregeln einrichten:</strong> Geben Sie Ausnahmen an, die die Blacklist-Überprüfungen umgehen sollen.</li>
<li><strong>Externe Quellen hinzufügen:</strong> Konfigurieren Sie URLs, um Blacklist-Daten automatisch herunterzuladen und zu aktualisieren.[4][5][6][7][8]</li>
<li><strong>Effektivität überwachen:</strong> Konsultieren Sie die <a href="../web-ui/">Web-Oberfläche</a>, um Statistiken über blockierte Anfragen anzuzeigen.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Stream-Modus</p>
</div>
<p>Im Stream-Modus werden nur Überprüfungen nach IP, rDNS und ASN durchgeführt.</p>
<h3 id="konfigurationsparameter91011121314151617">Konfigurationsparameter[9][10][11][12][13][14][15][16][17]</h3>
<p><strong>Allgemein</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_BLACKLIST</code></td>
<td style="text-align: left;"><code>yes</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">Nein</td>
<td style="text-align: left;"><strong>Blacklist aktivieren:</strong> Setzen Sie auf <code>yes</code>, um die Blacklist-Funktion zu aktivieren.</td>
</tr>
<tr>
<td style="text-align: left;"><code>BLACKLIST_COMMUNITY_LISTS</code></td>
<td style="text-align: left;"><code>ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">Nein</td>
<td style="text-align: left;"><strong>Community-Blacklists:</strong> Wählen Sie vorkonfigurierte und von der Community gepflegte Blacklists aus, die in die Blockierung einbezogen werden sollen.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">Community-Blacklists</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was es bewirkt:</strong> Ermöglicht Ihnen, schnell gut gepflegte und von der Community stammende Blacklists hinzuzufügen, ohne die URLs manuell konfigurieren zu müssen.</p>
<pre><code>Der Parameter `BLACKLIST_COMMUNITY_LISTS` ermöglicht Ihnen die Auswahl aus ausgewählten Blacklist-Quellen. Die verfügbaren Optionen umfassen:

| ID                                        | Beschreibung                                                                                                                                                                                                              | Quelle                                                                                                                         |
| :---------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------------------------------------------------------------------- |
| `ip:laurent-minne-data-shield-aggressive` | Data-Shield IPv4 Blocklist. DST = Europa                                                                                                                                                                                  | `https://raw.githubusercontent.com/duggytuxy/Data-Shield_IPv4_Blocklist/refs/heads/main/prod_data-shield_ipv4_blocklist.txt`   |
| `ip:danmeuk-tor-exit`                     | IP-Adressen von Tor-Exit-Nodes (dan.me.uk)                                                                                                                                                                                | `https://www.dan.me.uk/torlist/?exit`                                                                                          |
| `ua:mitchellkrogza-bad-user-agents`       | Nginx Block Bad Bots, Spam Referrer Blocker, Vulnerability Scanners, User-Agents, Malware, Adware, Ransomware, Malicious Sites, mit Anti-DDOS, Wordpress Theme Detector Blocking und Fail2Ban Jail für Wiederholungstäter | `https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list` |

**Konfiguration:** Geben Sie mehrere Listen durch Leerzeichen getrennt an. Zum Beispiel:
```yaml
BLACKLIST_COMMUNITY_LISTS: "ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents"
```

!!! tip "Community-Listen vs. manuelle Konfiguration"
    Community-Blacklists bieten eine bequeme Möglichkeit, mit bewährten Blacklist-Quellen zu beginnen. Sie können diese parallel zu manuellen URL-Konfigurationen für maximale Flexibilität verwenden.
</code></pre>
<p>=== "IP-Adresse"[18][19][20][21][22]
<strong>Was es bewirkt:</strong> Blockiert Besucher basierend auf ihrer IP-Adresse oder ihrem Netzwerk.</p>
<pre><code>| Parameter                  | Standard                              | Kontext   | Mehrfach | Beschreibung                                                                                                                 |
| :------------------------- | :------------------------------------ | :-------- | :------- | :--------------------------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_IP`             |                                       | Multisite | Nein     | **IP-Blacklist:** Liste von IP-Adressen oder Netzwerken (CIDR-Notation) zum Blockieren, durch Leerzeichen getrennt.          |
| `BLACKLIST_IGNORE_IP`      |                                       | Multisite | Nein     | **IP-Ignorierliste:** Liste von IP-Adressen oder Netzwerken, die IP-Blacklist-Überprüfungen umgehen sollen.                  |
| `BLACKLIST_IP_URLS`        | `https://www.dan.me.uk/torlist/?exit` | Multisite | Nein     | **IP-Blacklist-URLs:** Liste von URLs, die zu blockierende IP-Adressen oder Netzwerke enthalten, durch Leerzeichen getrennt. |
| `BLACKLIST_IGNORE_IP_URLS` |                                       | Multisite | Nein     | **IP-Ignorierlisten-URLs:** Liste von URLs, die zu ignorierende IP-Adressen oder Netzwerke enthalten.                        |

Der Standardparameter `BLACKLIST_IP_URLS` enthält eine URL, die eine **Liste bekannter Tor-Exit-Nodes** bereitstellt. Dies ist eine häufige Quelle für bösartigen Datenverkehr und ein guter Ausgangspunkt für viele Websites.
</code></pre>
<p>=== "Reverse DNS"[23][24][25][26][27]
<strong>Was es bewirkt:</strong> Blockiert Besucher basierend auf ihrem Reverse-Domain-Namen. Dies ist nützlich, um bekannte Scanner und Crawler basierend auf ihren Organisationsdomänen zu blockieren.</p>
<pre><code>| Parameter                    | Standard                | Kontext   | Mehrfach | Beschreibung                                                                                               |
| :--------------------------- | :---------------------- | :-------- | :------- | :--------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_RDNS`             | `.shodan.io .censys.io` | Multisite | Nein     | **rDNS-Blacklist:** Liste von Reverse-DNS-Suffixen zum Blockieren, durch Leerzeichen getrennt.             |
| `BLACKLIST_RDNS_GLOBAL`      | `yes`                   | Multisite | Nein     | **Nur globales rDNS:** Führt rDNS-Überprüfungen nur für globale IP-Adressen durch, wenn auf `yes` gesetzt. |
| `BLACKLIST_IGNORE_RDNS`      |                         | Multisite | Nein     | **rDNS-Ignorierliste:** Liste von Reverse-DNS-Suffixen, die rDNS-Blacklist-Überprüfungen umgehen sollen.   |
| `BLACKLIST_RDNS_URLS`        |                         | Multisite | Nein     | **rDNS-Blacklist-URLs:** Liste von URLs, die zu blockierende Reverse-DNS-Suffixe enthalten.                |
| `BLACKLIST_IGNORE_RDNS_URLS` |                         | Multisite | Nein     | **rDNS-Ignorierlisten-URLs:** Liste von URLs, die zu ignorierende Reverse-DNS-Suffixe enthalten.           |

Der Standardparameter `BLACKLIST_RDNS` enthält Domänen gängiger Scanner wie **Shodan** und **Censys**. Diese werden oft von Sicherheitsforschern und Scannern verwendet, um anfällige Websites zu identifizieren.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="22:1"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">ASN</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was es bewirkt:</strong> Blockiert Besucher von bestimmten Netzwerkanbietern. ASNs sind wie Postleitzahlen für das Internet – sie identifizieren, zu welchem Anbieter oder welcher Organisation eine IP gehört.</p>
<pre><code>| Parameter                   | Standard | Kontext   | Mehrfach | Beschreibung                                                                                     |
| :-------------------------- | :------- | :-------- | :------- | :----------------------------------------------------------------------------------------------- |
| `BLACKLIST_ASN`             |          | Multisite | Nein     | **ASN-Blacklist:** Liste von autonomen Systemnummern zum Blockieren, durch Leerzeichen getrennt. |
| `BLACKLIST_IGNORE_ASN`      |          | Multisite | Nein     | **ASN-Ignorierliste:** Liste von ASNs, die ASN-Blacklist-Überprüfungen umgehen sollen.           |
| `BLACKLIST_ASN_URLS`        |          | Multisite | Nein     | **ASN-Blacklist-URLs:** Liste von URLs, die zu blockierende ASNs enthalten.                      |
| `BLACKLIST_IGNORE_ASN_URLS` |          | Multisite | Nein     | **ASN-Ignorierlisten-URLs:** Liste von URLs, die zu ignorierende ASNs enthalten.                 |
</code></pre>
<p>=== "User-Agent"[28][29][30][31][32]
<strong>Was es bewirkt:</strong> Blockiert Besucher basierend auf dem Browser oder Tool, das sie angeblich verwenden. Dies ist effektiv gegen Bots, die sich ehrlich identifizieren (wie "ScannerBot" oder "WebHarvestTool").</p>
<pre><code>| Parameter                          | Standard                                                                                                                       | Kontext   | Mehrfach | Beschreibung                                                                                                       |
| :--------------------------------- | :----------------------------------------------------------------------------------------------------------------------------- | :-------- | :------- | :----------------------------------------------------------------------------------------------------------------- |
| `BLACKLIST_USER_AGENT`             |                                                                                                                                | Multisite | Nein     | **User-Agent-Blacklist:** Liste von User-Agent-Mustern (PCRE-Regex) zum Blockieren, durch Leerzeichen getrennt.    |
| `BLACKLIST_IGNORE_USER_AGENT`      |                                                                                                                                | Multisite | Nein     | **User-Agent-Ignorierliste:** Liste von User-Agent-Mustern, die User-Agent-Blacklist-Überprüfungen umgehen sollen. |
| `BLACKLIST_USER_AGENT_URLS`        | `https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list` | Multisite | Nein     | **User-Agent-Blacklist-URLs:** Liste von URLs, die zu blockierende User-Agent-Muster enthalten.                    |
| `BLACKLIST_IGNORE_USER_AGENT_URLS` |                                                                                                                                | Multisite | Nein     | **User-Agent-Ignorierlisten-URLs:** Liste von URLs, die zu ignorierende User-Agent-Muster enthalten.               |

Der Standardparameter `BLACKLIST_USER_AGENT_URLS` enthält eine URL, die eine **Liste bekannter bösartiger User-Agents** bereitstellt. Diese werden oft von bösartigen Bots und Scannern verwendet, um anfällige Websites zu identifizieren.
</code></pre>
<p>=== "URI"[33][34][35][36][37]
<strong>Was es bewirkt:</strong> Blockiert Anfragen an spezifische URLs auf Ihrer Website. Dies ist nützlich, um Zugriffsversuche auf Admin-Seiten, Anmeldeformulare oder andere sensible Bereiche zu blockieren, die angegriffen werden könnten.</p>
<pre><code>| Parameter                   | Standard | Kontext   | Mehrfach | Beschreibung                                                                                      |
| :-------------------------- | :------- | :-------- | :------- | :------------------------------------------------------------------------------------------------ |
| `BLACKLIST_URI`             |          | Multisite | Nein     | **URI-Blacklist:** Liste von URI-Mustern (PCRE-Regex) zum Blockieren, durch Leerzeichen getrennt. |
| `BLACKLIST_IGNORE_URI`      |          | Multisite | Nein     | **URI-Ignorierliste:** Liste von URI-Mustern, die URI-Blacklist-Überprüfungen umgehen sollen.     |
| `BLACKLIST_URI_URLS`        |          | Multisite | Nein     | **URI-Blacklist-URLs:** Liste von URLs, die zu blockierende URI-Muster enthalten.                 |
| `BLACKLIST_IGNORE_URI_URLS` |          | Multisite | Nein     | **URI-Ignorierlisten-URLs:** Liste von URLs, die zu ignorierende URI-Muster enthalten.            |
</code></pre>
<div class="admonition info">
<p class="admonition-title">Unterstützung von URL-Formaten</p>
</div>
<p>Alle <code>*_URLS</code>-Parameter unterstützen HTTP/HTTPS-URLs sowie lokale Dateipfade unter Verwendung des Präfixes <code>file:///</code>. Die Basisauthentifizierung wird im Format <code>http://user:pass@url</code> unterstützt.</p>
<p>!!! tip "Regelmäßige Updates"[4][5][6][7][8]
Blacklists von URLs werden automatisch stündlich heruntergeladen und aktualisiert, um sicherzustellen, dass Ihr Schutz gegen die neuesten Bedrohungen auf dem neuesten Stand bleibt.</p>
<h3 id="konfigurationsbeispiele38">Konfigurationsbeispiele[38]</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="23:3"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">Grundlegender Schutz durch IP und User-Agent</label><label for="__tabbed_23_2">Erweiterter Schutz mit benutzerdefinierten Regeln</label><label for="__tabbed_23_3">Verwendung lokaler Dateien</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration, die bekannte Tor-Exit-Nodes und gängige bösartige User-Agents mithilfe der Community-Blacklists blockiert:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div>
<p>Alternativ können Sie eine manuelle Konfiguration per URL verwenden:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine umfassendere Konfiguration mit benutzerdefinierten Blacklist-Einträgen und Ausnahmen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Benutzerdefinierte Blacklist-Einträge</span>
<span class="nt">BLACKLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.100</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">BLACKLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.shodan.io</span><span class="nv"> </span><span class="s">.censys.io</span><span class="nv"> </span><span class="s">.scanner.com&quot;</span>
<span class="nt">BLACKLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16509</span><span class="nv"> </span><span class="s">14618&quot;</span><span class="w">  </span><span class="c1"># ASN von AWS und Amazon</span>
<span class="nt">BLACKLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)SemrushBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)AhrefsBot(?:\b)&quot;</span>
<span class="nt">BLACKLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/wp-login</span><span class="err">\</span><span class="s">.php$</span><span class="nv"> </span><span class="s">^/administrator/&quot;</span>

<span class="c1"># Benutzerdefinierte Ignorierregeln</span>
<span class="nt">BLACKLIST_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.200</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>

<span class="c1"># Externe Blacklist-Quellen</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit</span><span class="nv"> </span><span class="s">https://www.spamhaus.org/drop/drop.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit lokalen Dateien für Blacklists:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/ip-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/rdns-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/asn-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/user-agent-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///chemin/vers/uri-blacklist.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="brotli">Brotli</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das Brotli-Plugin aktiviert die Komprimierung von HTTP-Antworten mit dem Brotli-Algorithmus. Es reduziert die Bandbreitennutzung and beschleunigt das Laden, indem es Inhalte vor dem Senden an den Browser komprimiert.</p>
<p>Im Vergleich zu Gzip erreicht Brotli in der Regel bessere Kompressionsraten, was zu kleineren Dateien and einer schnelleren Bereitstellung führt.</p>
<p>So funktioniert's:</p>
<ol>
<li>Auf Anfrage eines Clients prüft BunkerWeb, ob der Browser Brotli unterstützt.</li>
<li>Wenn ja, wird die Antwort auf dem konfigurierten Niveau (<code>BROTLI_COMP_LEVEL</code>) komprimiert.</li>
<li>Die entsprechenden Header zeigen die Brotli-Komprimierung an.</li>
<li>Der Browser dekomprimiert vor der Anzeige.</li>
<li>Bandbreite and Ladezeiten nehmen ab.</li>
</ol>
<h3 id="so-wirds-verwendet">So wird's verwendet</h3>
<ol>
<li>Aktivieren: <code>USE_BROTLI: yes</code> (standardmäßig deaktiviert).</li>
<li>MIME-Typen: Definieren Sie die zu komprimierenden Inhalte über <code>BROTLI_TYPES</code>.</li>
<li>Mindestgröße: <code>BROTLI_MIN_LENGTH</code>, um die Komprimierung kleiner Antworten zu vermeiden.</li>
<li>Komprimierungsstufe: <code>BROTLI_COMP_LEVEL</code> für das Gleichgewicht zwischen Geschwindigkeit and Verhältnis.</li>
</ol>
<h3 id="parameter">Parameter</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BROTLI</code></td>
<td><code>no</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Brotli-Komprimierung aktivieren.</td>
</tr>
<tr>
<td><code>BROTLI_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Komprimierte MIME-Typen.</td>
</tr>
<tr>
<td><code>BROTLI_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Mindestgröße (Bytes) für die Anwendung der Komprimierung.</td>
</tr>
<tr>
<td><code>BROTLI_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Stufe 0–11: höher = bessere Komprimierung, aber mehr CPU.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Komprimierungsstufe</p>
</div>
<p><code>6</code> bietet einen guten Kompromiss. Für statische Inhalte and verfügbare CPU: 9–11. Für dynamische Inhalte oder bei CPU-Einschränkungen: 4–5.</p>
<h3 id="beispiele">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">Basis</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="25:1"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">Maximale Komprimierung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;11&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">Ausgewogene Leistung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
</code></pre></div>
<h2 id="bunkernet">BunkerNet</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das BunkerNet-Plugin ermöglicht den kollektiven Austausch von Bedrohungsdaten zwischen BunkerWeb-Instanzen und schafft so ein leistungsstarkes Schutznetzwerk gegen böswillige Akteure. Durch die Teilnahme an BunkerNet profitiert Ihre Instanz von einer globalen Datenbank bekannter Bedrohungen und trägt gleichzeitig dazu bei, die Sicherheit der gesamten BunkerWeb-Community zu verbessern.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Ihre BunkerWeb-Instanz registriert sich automatisch bei der BunkerNet-API, um eine eindeutige Kennung zu erhalten.</li>
<li>Wenn Ihre Instanz eine bösartige IP-Adresse oder ein bösartiges Verhalten erkennt und blockiert, meldet sie die Bedrohung anonym an BunkerNet.</li>
<li>BunkerNet sammelt Bedrohungsdaten von allen teilnehmenden Instanzen und verteilt die konsolidierte Datenbank.</li>
<li>Ihre Instanz lädt regelmäßig eine aktualisierte Datenbank bekannter Bedrohungen von BunkerNet herunter.</li>
<li>Diese kollektive Intelligenz ermöglicht es Ihrer Instanz, proaktiv IP-Adressen zu blockieren, die auf anderen BunkerWeb-Instanzen bösartiges Verhalten gezeigt haben.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Wichtige Vorteile</p>
<ol>
<li><strong>Kollektive Verteidigung:</strong> Nutzen Sie die Sicherheitserkenntnisse von Tausenden anderer BunkerWeb-Instanzen weltweit.</li>
<li><strong>Proaktiver Schutz:</strong> Blockieren Sie böswillige Akteure, bevor sie Ihre Website angreifen können, basierend auf ihrem Verhalten an anderer Stelle.</li>
<li><strong>Beitrag zur Gemeinschaft:</strong> Helfen Sie, andere BunkerWeb-Benutzer zu schützen, indem Sie anonymisierte Bedrohungsdaten über Angreifer teilen.</li>
<li><strong>Keine Konfiguration erforderlich:</strong> Funktioniert standardmäßig mit sinnvollen Voreinstellungen und erfordert nur minimale Einrichtung.</li>
<li><strong>Datenschutzorientiert:</strong> Teilt nur notwendige Bedrohungsinformationen, ohne Ihre Privatsphäre oder die Ihrer Benutzer zu gefährden.</li>
</ol>
</div>
<h3 id="wie-man-es-benutzt_3">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die BunkerNet-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die BunkerNet-Funktion ist standardmäßig aktiviert. Bei Bedarf können Sie dies mit der Einstellung <code>USE_BUNKERNET</code> steuern.</li>
<li><strong>Erstregistrierung:</strong> Beim ersten Start registriert sich Ihre Instanz automatisch bei der BunkerNet-API und erhält eine eindeutige Kennung.</li>
<li><strong>Automatische Updates:</strong> Ihre Instanz lädt automatisch in regelmäßigen Abständen die neueste Bedrohungsdatenbank herunter.</li>
<li><strong>Automatisches Melden:</strong> Wenn Ihre Instanz eine bösartige IP-Adresse blockiert, trägt sie diese Daten automatisch zur Gemeinschaft bei.</li>
<li><strong>Schutz überwachen:</strong> Überprüfen Sie die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um Statistiken zu den von BunkerNet-Informationen blockierten Bedrohungen anzuzeigen.</li>
</ol>
<h3 id="konfigurationseinstellungen_4">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BUNKERNET</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>BunkerNet aktivieren:</strong> Auf <code>yes</code> setzen, um den Austausch von Bedrohungsdaten zu aktivieren.</td>
</tr>
<tr>
<td><code>BUNKERNET_SERVER</code></td>
<td><code>https://api.bunkerweb.io</code></td>
<td>global</td>
<td>nein</td>
<td><strong>BunkerNet-Server:</strong> Die Adresse des BunkerNet-API-Servers für den Austausch von Bedrohungsdaten.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Netzwerkschutz</p>
</div>
<p>Wenn BunkerNet feststellt, dass eine IP-Adresse an bösartigen Aktivitäten auf mehreren BunkerWeb-Instanzen beteiligt war, wird diese IP zu einer kollektiven schwarzen Liste hinzugefügt. Dies bietet eine proaktive Verteidigungsebene, die Ihre Website vor Bedrohungen schützt, bevor sie Sie direkt angreifen können.</p>
<div class="admonition info">
<p class="admonition-title">Anonymes Melden</p>
</div>
<p>Bei der Meldung von Bedrohungsinformationen an BunkerNet teilt Ihre Instanz nur die zur Identifizierung der Bedrohung erforderlichen Daten: die IP-Adresse, den Grund für die Sperrung und minimale kontextbezogene Daten. Es werden keine persönlichen Informationen über Ihre Benutzer oder sensible Details über Ihre Website weitergegeben.</p>
<h3 id="beispielkonfigurationen_4">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="27:3"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><input id="__tabbed_27_2" name="__tabbed_27" type="radio" /><input id="__tabbed_27_3" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">Standardkonfiguration (empfohlen)</label><label for="__tabbed_27_2">Deaktivierte Konfiguration</label><label for="__tabbed_27_3">Benutzerdefinierte Serverkonfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Die Standardkonfiguration aktiviert BunkerNet mit dem offiziellen BunkerWeb-API-Server:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.bunkerweb.io&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Wenn Sie nicht am BunkerNet-Bedrohungsdatennetzwerk teilnehmen möchten:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Für Organisationen, die ihren eigenen BunkerNet-Server betreiben (ungewöhnlich):</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://bunkernet.example.com&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="integration-der-crowdsec-konsole">Integration der CrowdSec-Konsole</h3>
<p>Falls Sie noch nicht mit der CrowdSec-Konsolenintegration vertraut sind: <a href="https://www.crowdsec.net/?utm_campaign=bunkerweb&amp;utm_source=doc">CrowdSec</a> nutzt crowdsourced Intelligence zur Bekämpfung von Cyber-Bedrohungen. Stellen Sie es sich als das „Waze der Cybersicherheit“ vor – wenn ein Server angegriffen wird, werden andere Systeme weltweit alarmiert und vor denselben Angreifern geschützt. Mehr darüber erfahren Sie <a href="https://www.crowdsec.net/about?utm_campaign=bunkerweb&amp;utm_source=blog">hier</a>.</p>
<p>Durch unsere Partnerschaft mit CrowdSec können Sie Ihre BunkerWeb-Instanzen in Ihre <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">CrowdSec-Konsole</a> eintragen. Das bedeutet, dass von BunkerWeb blockierte Angriffe in Ihrer CrowdSec-Konsole neben den von CrowdSec Security Engines blockierten Angriffen sichtbar sind, was Ihnen einen einheitlichen Überblick über Bedrohungen gibt.</p>
<p>Wichtig ist, dass CrowdSec für diese Integration nicht installiert sein muss (obwohl wir dringend empfehlen, es mit dem <a href="https://github.com/bunkerity/bunkerweb-plugins/tree/main/crowdsec">CrowdSec-Plugin für BunkerWeb</a> auszuprobieren, um die Sicherheit Ihrer Webdienste weiter zu erhöhen). Zusätzlich können Sie Ihre CrowdSec Security Engines in dasselbe Konsolenkonto eintragen, um eine noch größere Synergie zu erzielen.</p>
<p><strong>Schritt 1: Erstellen Sie Ihr CrowdSec-Konsolenkonto</strong></p>
<p>Gehen Sie zur <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">CrowdSec-Konsole</a> und registrieren Sie sich, falls Sie noch kein Konto haben. Notieren Sie sich anschließend den Anmeldeschlüssel, den Sie unter „Security Engines“ finden, nachdem Sie auf „Add Security Engine“ geklickt haben:</p>
<figure>
<p><img align="center" alt="Overview" src="../../assets/img/crowdity1.png" />
  </p>
<figcaption>Holen Sie sich Ihren CrowdSec-Konsolen-Anmeldeschlüssel</figcaption>
</figure>
<p><strong>Schritt 2: Holen Sie sich Ihre BunkerNet-ID</strong></p>
<p>Die Aktivierung der BunkerNet-Funktion (standardmäßig aktiviert) ist obligatorisch, wenn Sie Ihre BunkerWeb-Instanz(en) in Ihrer CrowdSec-Konsole registrieren möchten. Aktivieren Sie sie, indem Sie <code>USE_BUNKERNET</code> auf <code>yes</code> setzen.</p>
<p>Für Docker erhalten Sie Ihre BunkerNet-ID mit:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-bw-scheduler<span class="w"> </span>cat<span class="w"> </span>/var/cache/bunkerweb/bunkernet/instance.id
</code></pre></div>
<p>Für Linux verwenden Sie:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/var/cache/bunkerweb/bunkernet/instance.id
</code></pre></div>
<p><strong>Schritt 3: Registrieren Sie Ihre Instanz über das Panel</strong></p>
<p>Sobald Sie Ihre BunkerNet-ID und den CrowdSec-Konsolen-Anmeldeschlüssel haben, <a href="https://panel.bunkerweb.io/store/bunkernet?utm_campaign=self&amp;utm_source=doc">bestellen Sie das kostenlose Produkt „BunkerNet / CrowdSec“ im Panel</a>. Möglicherweise werden Sie aufgefordert, ein Konto zu erstellen, falls Sie noch keines haben.</p>
<p>Sie können nun den Dienst „BunkerNet / CrowdSec“ auswählen und das Formular ausfüllen, indem Sie Ihre BunkerNet-ID und den CrowdSec-Konsolen-Anmeldeschlüssel einfügen:</p>
<figure>
<p><img align="center" alt="Overview" src="../../assets/img/crowdity2.png" />
  </p>
<figcaption>Registrieren Sie Ihre BunkerWeb-Instanz in der CrowdSec-Konsole</figcaption>
</figure>
<p><strong>Schritt 4: Akzeptieren Sie die neue Security Engine in der Konsole</strong></p>
<p>Gehen Sie dann zurück zu Ihrer CrowdSec-Konsole und akzeptieren Sie die neue Security Engine:</p>
<figure>
<p><img align="center" alt="Overview" src="../../assets/img/crowdity3.png" />
  </p>
<figcaption>Akzeptieren Sie die Registrierung in der CrowdSec-Konsole</figcaption>
</figure>
<p><strong>Herzlichen Glückwunsch, Ihre BunkerWeb-Instanz ist jetzt in Ihrer CrowdSec-Konsole registriert!</strong></p>
<p>Profi-Tipp: Wenn Sie Ihre Warnungen anzeigen, klicken Sie auf die Option „Spalten“ und aktivieren Sie das Kontrollkästchen „Kontext“, um auf BunkerWeb-spezifische Daten zuzugreifen.</p>
<figure>
<p><img align="center" alt="Overview" src="../../assets/img/crowdity4.png" />
  </p>
<figcaption>BunkerWeb-Daten werden in der Kontextspalte angezeigt</figcaption>
</figure>
<h2 id="cors">CORS</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das CORS-Plugin ermöglicht Cross-Origin Resource Sharing (Ressourcenfreigabe zwischen verschiedenen Ursprüngen) für Ihre Website und erlaubt so den kontrollierten Zugriff auf Ihre Ressourcen von verschiedenen Domains aus. Diese Funktion hilft Ihnen, Ihre Inhalte sicher mit vertrauenswürdigen Drittanbieter-Websites zu teilen, während die Sicherheit durch die explizite Definition der erlaubten Ursprünge, Methoden und Header gewährleistet wird.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Browser eine Cross-Origin-Anfrage an Ihre Website stellt, sendet er zuerst eine Preflight-Anfrage mit der <code>OPTIONS</code>-Methode.</li>
<li>BunkerWeb prüft, ob der anfragende Ursprung basierend auf Ihrer Konfiguration zulässig ist.</li>
<li>Wenn dies der Fall ist, antwortet BunkerWeb mit den entsprechenden CORS-Headern, die definieren, was die anfragende Website tun darf.</li>
<li>Bei nicht zulässigen Ursprüngen kann die Anfrage entweder komplett verweigert oder ohne CORS-Header ausgeliefert werden.</li>
<li>Zusätzliche Cross-Origin-Richtlinien wie <a href="https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy">COEP</a>, <a href="https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy">COOP</a> und <a href="https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Cross-Origin-Resource-Policy">CORP</a> können konfiguriert werden, um die Sicherheit weiter zu erhöhen.</li>
</ol>
<h3 id="wie-man-es-benutzt_4">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die CORS-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die CORS-Funktion ist standardmäßig deaktiviert. Setzen Sie die Einstellung <code>USE_CORS</code> auf <code>yes</code>, um sie zu aktivieren.</li>
<li><strong>Erlaubte Ursprünge konfigurieren:</strong> Geben Sie mit der Einstellung <code>CORS_ALLOW_ORIGIN</code> an, welche Domains auf Ihre Ressourcen zugreifen dürfen.</li>
<li><strong>Zulässige Methoden festlegen:</strong> Definieren Sie mit <code>CORS_ALLOW_METHODS</code>, welche HTTP-Methoden für Cross-Origin-Anfragen erlaubt sind.</li>
<li><strong>Erlaubte Header konfigurieren:</strong> Geben Sie mit <code>CORS_ALLOW_HEADERS</code> an, welche Header in Anfragen verwendet werden dürfen.</li>
<li><strong>Anmeldeinformationen steuern:</strong> Entscheiden Sie mit <code>CORS_ALLOW_CREDENTIALS</code>, ob Cross-Origin-Anfragen Anmeldeinformationen enthalten dürfen.</li>
</ol>
<h3 id="konfigurationseinstellungen_5">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CORS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>CORS aktivieren:</strong> Auf <code>yes</code> setzen, um Cross-Origin Resource Sharing zu aktivieren.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_ORIGIN</code></td>
<td><code>self</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Erlaubte Ursprünge:</strong> PCRE-regulärer Ausdruck für erlaubte Ursprünge; <code>*</code> für jeden Ursprung, <code>self</code> nur für denselben Ursprung.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_METHODS</code></td>
<td><code>GET, POST, OPTIONS</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Erlaubte Methoden:</strong> HTTP-Methoden, die bei Cross-Origin-Anfragen verwendet werden können.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_HEADERS</code></td>
<td><code>DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Erlaubte Header:</strong> HTTP-Header, die bei Cross-Origin-Anfragen verwendet werden können.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_CREDENTIALS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Anmeldeinformationen erlauben:</strong> Auf <code>yes</code> setzen, um Anmeldeinformationen (Cookies, HTTP-Auth) in CORS-Anfragen zu erlauben.</td>
</tr>
<tr>
<td><code>CORS_EXPOSE_HEADERS</code></td>
<td><code>Content-Length,Content-Range</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Verfügbar gemachte Header:</strong> HTTP-Header, auf die Browser von Cross-Origin-Antworten zugreifen dürfen.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_OPENER_POLICY</code></td>
<td><code>same-origin</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cross-Origin-Opener-Policy:</strong> Steuert die Kommunikation zwischen Browser-Kontexten.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_EMBEDDER_POLICY</code></td>
<td><code>require-corp</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cross-Origin-Embedder-Policy:</strong> Steuert, ob ein Dokument Ressourcen von anderen Ursprüngen laden kann.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_RESOURCE_POLICY</code></td>
<td><code>same-site</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cross-Origin-Resource-Policy:</strong> Steuert, welche Websites Ihre Ressourcen einbetten dürfen.</td>
</tr>
<tr>
<td><code>CORS_MAX_AGE</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Dauer für Preflight:</strong> Wie lange (in Sekunden) Browser die Preflight-Antwort zwischenspeichern sollen.</td>
</tr>
<tr>
<td><code>CORS_DENY_REQUEST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Nicht autorisierte Ursprünge ablehnen:</strong> Wenn <code>yes</code>, werden Anfragen von nicht autorisierten Ursprüngen mit einem Fehlercode abgelehnt.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimierung von Preflight-Anfragen</p>
</div>
<p>Die Einstellung <code>CORS_MAX_AGE</code> bestimmt, wie lange Browser die Ergebnisse einer Preflight-Anfrage zwischenspeichern. Ein höherer Wert (wie der Standardwert von 86400 Sekunden/24 Stunden) reduziert die Anzahl der Preflight-Anfragen und verbessert die Leistung für häufig aufgerufene Ressourcen.</p>
<div class="admonition warning">
<p class="admonition-title">Sicherheitshinweise</p>
</div>
<p>Seien Sie vorsichtig, wenn Sie <code>CORS_ALLOW_ORIGIN</code> auf <code>*</code> (alle Ursprünge) oder <code>CORS_ALLOW_CREDENTIALS</code> auf <code>yes</code> setzen, da diese Konfigurationen bei unsachgemäßer Verwaltung Sicherheitsrisiken mit sich bringen können. Es ist im Allgemeinen sicherer, vertrauenswürdige Ursprünge explizit aufzulisten und die erlaubten Methoden und Header zu beschränken.</p>
<h3 id="beispielkonfigurationen_5">Beispielkonfigurationen</h3>
<p>Hier sind Beispiele für mögliche Werte der Einstellung <code>CORS_ALLOW_ORIGIN</code> und deren Verhalten:</p>
<ul>
<li><strong><code>*</code></strong>: Erlaubt Anfragen von allen Ursprüngen.</li>
<li><strong><code>self</code></strong>: Erlaubt automatisch Anfragen vom selben Ursprung wie der konfigurierte <code>server_name</code>.</li>
<li><strong><code>^https://www\.example\.com$</code></strong>: Erlaubt Anfragen nur von <code>https://www.example.com</code>.</li>
<li><strong><code>^https://.+\.example\.com$</code></strong>: Erlaubt Anfragen von jeder Subdomain, die auf <code>.example.com</code> endet.</li>
<li><strong><code>^https://(www\.example1\.com|www\.example2\.com)$</code></strong>: Erlaubt Anfragen entweder von <code>https://www.example1.com</code> oder <code>https://www.example2.com</code>.</li>
<li><strong><code>^https?://www\.example\.com$</code></strong>: Erlaubt Anfragen sowohl von <code>https://www.example.com</code> als auch von <code>http://www.example.com</code>.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="28:5"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><input id="__tabbed_28_3" name="__tabbed_28" type="radio" /><input id="__tabbed_28_4" name="__tabbed_28" type="radio" /><input id="__tabbed_28_5" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">Grundlegende Konfiguration</label><label for="__tabbed_28_2">Konfiguration für öffentliche API</label><label for="__tabbed_28_3">Mehrere vertrauenswürdige Domains</label><label for="__tabbed_28_4">Subdomain-Platzhalter</label><label for="__tabbed_28_5">Mehrere Domain-Muster</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration, die Cross-Origin-Anfragen von derselben Domain erlaubt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;self&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für eine öffentliche API, die von jedem Ursprung aus zugänglich sein muss:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">X-API-Key&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die mehrere spezifische Domains mit einem einzigen PCRE-regulären Ausdrucksmuster erlaubt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(app|api|dashboard)\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Requested-With&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_EXPOSE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Length,</span><span class="nv"> </span><span class="s">Content-Range,</span><span class="nv"> </span><span class="s">X-RateLimit-Remaining&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die alle Subdomains einer Hauptdomain mithilfe eines PCRE-regulären Ausdrucksmusters erlaubt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://.*\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die Anfragen von mehreren Domain-Mustern mit Alternation erlaubt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(.*\\.example\\.com|.*\\.trusted-partner\\.org|api\\.third-party\\.net)$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Custom-Header&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="client-cache">Client cache</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das Client-Cache-Plugin optimiert die Leistung von Websites, indem es steuert, wie Browser statische Inhalte zwischenspeichern. Es reduziert die Bandbreitennutzung, senkt die Serverlast und verbessert die Ladezeiten von Seiten, indem es Browser anweist, statische Assets wie Bilder, CSS- und JavaScript-Dateien lokal zu speichern und wiederzuverwenden, anstatt sie bei jedem Seitenbesuch erneut anzufordern.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn aktiviert, fügt BunkerWeb den Antworten für statische Dateien Cache-Control-Header hinzu.</li>
<li>Diese Header teilen den Browsern mit, wie lange sie den Inhalt lokal zwischenspeichern sollen.</li>
<li>Für Dateien mit bestimmten Erweiterungen (wie Bilder, CSS, JavaScript) wendet BunkerWeb die konfigurierte Caching-Richtlinie an.</li>
<li>Die optionale ETag-Unterstützung bietet einen zusätzlichen Validierungsmechanismus, um festzustellen, ob der zwischengespeicherte Inhalt noch aktuell ist.</li>
<li>Wenn Besucher auf Ihre Website zurückkehren, können ihre Browser lokal zwischengespeicherte Dateien verwenden, anstatt sie erneut herunterzuladen, was zu schnelleren Ladezeiten der Seite führt.</li>
</ol>
<h3 id="wie-man-es-benutzt_5">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Client-Cache-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die Client-Cache-Funktion ist standardmäßig deaktiviert. Setzen Sie die Einstellung <code>USE_CLIENT_CACHE</code> auf <code>yes</code>, um sie zu aktivieren.</li>
<li><strong>Dateierweiterungen konfigurieren:</strong> Geben Sie mit der Einstellung <code>CLIENT_CACHE_EXTENSIONS</code> an, welche Dateitypen zwischengespeichert werden sollen.</li>
<li><strong>Cache-Control-Anweisungen festlegen:</strong> Passen Sie mit der Einstellung <code>CLIENT_CACHE_CONTROL</code> an, wie Clients Inhalte zwischenspeichern sollen.</li>
<li><strong>ETag-Unterstützung konfigurieren:</strong> Entscheiden Sie mit der Einstellung <code>CLIENT_CACHE_ETAG</code>, ob ETags zur Validierung der Cache-Frische aktiviert werden sollen.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration werden Caching-Header automatisch auf berechtigte Antworten angewendet.</li>
</ol>
<h3 id="konfigurationseinstellungen_6">Konfigurationseinstellungen</h3>
<p>| Einstellung               | Standard                   | Kontext   | Mehrfach | Beschreibung                                                                                                      |
| ------------------------- | -------------------------- | --------- | -------- | ----------------------------------------------------------------------------------------------------------------- | --- |
| <code>USE_CLIENT_CACHE</code>        | <code>no</code>                       | multisite | nein     | <strong>Client-Cache aktivieren:</strong> Auf <code>yes</code> setzen, um das clientseitige Caching von statischen Dateien zu aktivieren. |
| <code>CLIENT_CACHE_EXTENSIONS</code> | <code>jpg                       | jpeg      | png      | bmp                                                                                                               | ico | svg | tif | css | js | otf | ttf | eot | woff | woff2</code> | global | nein | <strong>Cache-fähige Erweiterungen:</strong> Liste der Dateierweiterungen (getrennt durch <code>|</code>), die vom Client zwischengespeichert werden sollen. |
| <code>CLIENT_CACHE_CONTROL</code>    | <code>public, max-age=15552000</code> | multisite | nein     | <strong>Cache-Control-Header:</strong> Wert für den Cache-Control-HTTP-Header zur Steuerung des Caching-Verhaltens.            |
| <code>CLIENT_CACHE_ETAG</code>       | <code>yes</code>                      | multisite | nein     | <strong>ETags aktivieren:</strong> Auf <code>yes</code> setzen, um den HTTP-ETag-Header für statische Ressourcen zu senden.               |</p>
<div class="admonition tip">
<p class="admonition-title">Optimierung der Cache-Einstellungen</p>
</div>
<p>Für häufig aktualisierte Inhalte sollten Sie kürzere <code>max-age</code>-Werte verwenden. Für Inhalte, die sich selten ändern (wie versionierte JavaScript-Bibliotheken oder Logos), verwenden Sie längere Cache-Zeiten. Der Standardwert von 15552000 Sekunden (180 Tage) ist für die meisten statischen Assets angemessen.</p>
<div class="admonition info">
<p class="admonition-title">Browser-Verhalten</p>
</div>
<p>Unterschiedliche Browser implementieren Caching geringfügig anders, aber alle modernen Browser respektieren die Standard-Cache-Control-Anweisungen. ETags bieten einen zusätzlichen Validierungsmechanismus, der Browsern hilft festzustellen, ob zwischengespeicherte Inhalte noch gültig sind.</p>
<h3 id="beispielkonfigurationen_6">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="29:3"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><input id="__tabbed_29_2" name="__tabbed_29" type="radio" /><input id="__tabbed_29_3" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">Grundlegende Konfiguration</label><label for="__tabbed_29_2">Aggressives Caching</label><label for="__tabbed_29_3">Strategie für gemischte Inhalte</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration, die das Caching für gängige statische Assets aktiviert:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|gif|css|js|svg|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=86400&quot;</span><span class="w">  </span><span class="c1"># 1 Tag</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine für maximales Caching optimierte Konfiguration, geeignet für Websites mit selten aktualisierten statischen Inhalten:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2|pdf|xml|txt&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=31536000,</span><span class="nv"> </span><span class="s">immutable&quot;</span><span class="w">  </span><span class="c1"># 1 Jahr</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Für Websites mit einer Mischung aus häufig und selten aktualisierten Inhalten sollten Sie die Dateiversionierung in Ihrer Anwendung und eine Konfiguration wie diese in Betracht ziehen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=604800&quot;</span><span class="w">  </span><span class="c1"># 1 Woche</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="country">Country</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Länder-Plugin aktiviert Geoblocking und ermöglicht die Einschränkung des Zugriffs basierend auf dem geografischen Standort der Besucher. Dies ist nützlich für die Einhaltung regionaler Vorschriften, zur Begrenzung von Betrug in Risikogebieten und zur Anwendung von Inhaltsbeschränkungen über Ländergrenzen hinweg.</p>
<p>So funktioniert's:</p>
<ol>
<li>Bei jedem Besuch ermittelt BunkerWeb das Herkunftsland über die IP-Adresse.</li>
<li>Ihre Konfiguration definiert eine Whitelist (erlaubt) oder Blacklist (blockiert).</li>
<li>Bei einer Whitelist: Nur die gelisteten Länder sind zugelassen.</li>
<li>Bei einer Blacklist: Die gelisteten Länder werden abgelehnt.</li>
<li>Das Ergebnis wird für wiederholte Besuche zwischengespeichert.</li>
</ol>
<h3 id="anwendung">Anwendung</h3>
<ol>
<li>Strategie: Wählen Sie eine Whitelist (wenige zugelassene Länder) oder eine Blacklist (bestimmte Länder blockieren).</li>
<li>Ländercodes: Fügen Sie ISO 3166-1 Alpha-2 Codes (US, GB, FR) zu <code>WHITELIST_COUNTRY</code> oder <code>BLACKLIST_COUNTRY</code> hinzu.</li>
<li>Anwendung: Nach der Konfiguration gilt die Beschränkung für alle Besucher.</li>
<li>Überwachung: Konsultieren Sie die <a href="../web-ui/">Web-UI</a> für Statistiken nach Ländern.</li>
</ol>
<h3 id="parameter_1">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>WHITELIST_COUNTRY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">Nein</td>
<td style="text-align: left;">Whitelist: ISO 3166-1 Alpha-2 Ländercodes, durch Leerzeichen getrennt. Nur diese Länder sind zugelassen.</td>
</tr>
<tr>
<td style="text-align: left;"><code>BLACKLIST_COUNTRY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">Nein</td>
<td style="text-align: left;">Blacklist: ISO 3166-1 Alpha-2 Ländercodes, durch Leerzeichen getrennt. Diese Länder sind blockiert.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Whitelist vs. Blacklist</p>
</div>
<p>Whitelist: Zugriff auf wenige Länder beschränkt. Blacklist: Problematische Regionen blockieren und den Rest zulassen.</p>
<div class="admonition warning">
<p class="admonition-title">Priorität</p>
</div>
<p>Wenn eine Whitelist und eine Blacklist definiert sind, hat die Whitelist Vorrang: Wenn das Land nicht auf der Whitelist steht, wird der Zugriff verweigert.</p>
<div class="admonition info">
<p class="admonition-title">Ländererkennung</p>
</div>
<p>BunkerWeb verwendet die mmdb-Datenbank <a href="https://db-ip.com/db/download/ip-to-country-lite">db-ip lite</a>.</p>
<h3 id="beispiele_1">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="30:1"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">Nur Whitelist</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;US</span><span class="nv"> </span><span class="s">CA</span><span class="nv"> </span><span class="s">GB&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="31:1"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">Nur Blacklist</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="32:1"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">Nur EU</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AT</span><span class="nv"> </span><span class="s">BE</span><span class="nv"> </span><span class="s">BG</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">CY</span><span class="nv"> </span><span class="s">CZ</span><span class="nv"> </span><span class="s">DK</span><span class="nv"> </span><span class="s">EE</span><span class="nv"> </span><span class="s">FI</span><span class="nv"> </span><span class="s">FR</span><span class="nv"> </span><span class="s">DE</span><span class="nv"> </span><span class="s">GR</span><span class="nv"> </span><span class="s">HU</span><span class="nv"> </span><span class="s">IE</span><span class="nv"> </span><span class="s">IT</span><span class="nv"> </span><span class="s">LV</span><span class="nv"> </span><span class="s">LT</span><span class="nv"> </span><span class="s">LU</span><span class="nv"> </span><span class="s">MT</span><span class="nv"> </span><span class="s">NL</span><span class="nv"> </span><span class="s">PL</span><span class="nv"> </span><span class="s">PT</span><span class="nv"> </span><span class="s">RO</span><span class="nv"> </span><span class="s">SK</span><span class="nv"> </span><span class="s">SI</span><span class="nv"> </span><span class="s">ES</span><span class="nv"> </span><span class="s">SE&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="33:1"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">Blockierung von Risikoländern</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP</span><span class="nv"> </span><span class="s">IR</span><span class="nv"> </span><span class="s">SY&quot;</span>
</code></pre></div>
<h2 id="crowdsec">CrowdSec</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<figure>
<p><img align="center," alt="Overview" src="../../assets/img/crowdsec.svg" width="600" /></p>
</figure>
<p>Das CrowdSec-Plugin integriert BunkerWeb mit der CrowdSec-Sicherheits-Engine und bietet eine zusätzliche Schutzschicht gegen verschiedene Cyberbedrohungen. Dieses Plugin fungiert als <a href="https://crowdsec.net/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">CrowdSec-Bouncer</a> und lehnt Anfragen basierend auf den Entscheidungen der CrowdSec-API ab.</p>
<p>CrowdSec ist eine moderne Open-Source-Sicherheits-Engine, die bösartige IP-Adressen basierend auf Verhaltensanalyse und der kollektiven Intelligenz ihrer Community erkennt und blockiert. Sie können auch <a href="https://docs.crowdsec.net/docs/concepts?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">Szenarien</a> konfigurieren, um IP-Adressen basierend auf verdächtigem Verhalten automatisch zu sperren und so von einer partizipativen Blacklist zu profitieren.</p>
<p><strong>So funktioniert's:</strong></p>
<ol>
<li>Die CrowdSec-Engine analysiert Protokolle und erkennt verdächtige Aktivitäten in Ihrer Infrastruktur.</li>
<li>Wenn eine bösartige Aktivität erkannt wird, erstellt CrowdSec eine Entscheidung, die betreffende IP-Adresse zu blockieren.</li>
<li>BunkerWeb, das als Bouncer fungiert, fragt die lokale CrowdSec-API nach Entscheidungen bezüglich eingehender Anfragen ab.</li>
<li>Wenn die IP-Adresse eines Clients einer aktiven Blockierungsentscheidung unterliegt, verweigert BunkerWeb den Zugriff auf die geschützten Dienste.</li>
<li>Optional kann die Anwendungssicherheitskomponente (Application Security Component) eine eingehende Überprüfung der Anfragen für erhöhte Sicherheit durchführen.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Hauptvorteile</p>
<ol>
<li><strong>Community-Sicherheit:</strong> Profitieren Sie von Bedrohungsinformationen, die von der CrowdSec-Benutzergemeinschaft geteilt werden.</li>
<li><strong>Verhaltensanalyse:</strong> Erkennen Sie ausgeklügelte Angriffe basierend auf Verhaltensmustern, nicht nur auf Signaturen.</li>
<li><strong>Leichte Integration:</strong> Minimaler Einfluss auf die Leistung Ihrer BunkerWeb-Instanz.</li>
<li><strong>Mehrstufiger Schutz:</strong> Kombinieren Sie Perimeterverteidigung (IP-Blockierung) mit Anwendungssicherheit für einen umfassenden Schutz.</li>
</ol>
</div>
<h3 id="einrichtung">Einrichtung</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="34:1"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">Docker</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Akquisitionsdatei</strong></p>
<pre><code>Sie müssen eine CrowdSec-Instanz ausführen und diese so konfigurieren, dass sie die BunkerWeb-Protokolle analysiert. Da BunkerWeb auf NGINX basiert, können Sie den Wert `nginx` für den Parameter `type` in Ihrer Akquisitionsdatei verwenden (vorausgesetzt, die BunkerWeb-Protokolle werden unverändert ohne zusätzliche Daten gespeichert):

```yaml
filenames:
  - /var/log/bunkerweb.log
labels:
  type: nginx
```

**Anwendungssicherheitskomponente (*optional*)**

CrowdSec bietet auch eine [Anwendungssicherheitskomponente](https://docs.crowdsec.net/docs/appsec/intro?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs), die zum Schutz Ihrer Anwendung vor Angriffen verwendet werden kann. Wenn Sie diese verwenden möchten, müssen Sie eine weitere Akquisitionsdatei für die AppSec-Komponente erstellen:

```yaml
appsec_config: crowdsecurity/appsec-default
labels:
  type: appsec
listen_addr: 0.0.0.0:7422
source: appsec
```

**Syslog**

Für containerbasierte Integrationen empfehlen wir, die Protokolle des BunkerWeb-Containers an einen Syslog-Dienst umzuleiten, damit CrowdSec leicht darauf zugreifen kann. Hier ist ein Beispiel für eine syslog-ng-Konfiguration, die die Rohprotokolle von BunkerWeb in einer lokalen Datei `/var/log/bunkerweb.log` speichert:

```syslog
@version: 4.8

source s_net {
    udp(
        ip("0.0.0.0")
    );
};

template t_imp {
    template("$MSG\n");
    template_escape(no);
};

destination d_file {
    file("/var/log/bunkerweb.log" template(t_imp));
};

log {
    source(s_net);
    destination(d_file);
};
```

**Docker Compose**

Hier ist die Docker-Compose-Vorlage, die Sie verwenden können (vergessen Sie nicht, den Bouncer-Schlüssel zu aktualisieren):

```yaml
x-bw-env: &amp;bw-env
  # Wir verwenden einen Anker, um die Wiederholung derselben Parameter für beide Dienste zu vermeiden
  API_WHITELIST_IP: "127.0.0.0/8 10.20.30.0/24" # Stellen Sie sicher, dass Sie den richtigen IP-Bereich festlegen, damit der Scheduler die Konfiguration an die Instanz senden kann

services:
  bunkerweb:
    # Dies ist der Name, der zur Identifizierung der Instanz im Scheduler verwendet wird
    image: bunkerity/bunkerweb:1.6.5-rc3
    ports:
      - "80:8080/tcp"
      - "443:8443/tcp"
      - "443:8443/udp" # Für QUIC / HTTP3 Unterstützung
    environment:
      &lt;&lt;: *bw-env # Wir verwenden den Anker, um die Wiederholung derselben Parameter für alle Dienste zu vermeiden
    restart: "unless-stopped"
    networks:
      - bw-universe
      - bw-services
    logging:
      driver: syslog # Protokolle an syslog senden
      options:
        syslog-address: "udp://10.20.30.254:514" # Die IP-Adresse des syslog-Dienstes

  bw-scheduler:
    image: bunkerity/bunkerweb-scheduler:1.6.5-rc3
    environment:
      &lt;&lt;: *bw-env
      BUNKERWEB_INSTANCES: "bunkerweb" # Stellen Sie sicher, dass Sie den richtigen Instanznamen festlegen
      DATABASE_URI: "mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db" # Vergessen Sie nicht, ein stärkeres Datenbankpasswort festzulegen
      SERVER_NAME: ""
      MULTISITE: "yes"
      USE_CROWDSEC: "yes"
      CROWDSEC_API: "http://crowdsec:8080" # Dies ist die Adresse der CrowdSec-Container-API im selben Netzwerk
      CROWDSEC_APPSEC_URL: "http://crowdsec:7422" # Auskommentieren, wenn Sie die AppSec-Komponente nicht verwenden möchten
      CROWDSEC_API_KEY: "s3cr3tb0unc3rk3y" # Vergessen Sie nicht, einen stärkeren Schlüssel für den Bouncer festzulegen
    volumes:
      - bw-storage:/data # Dies wird verwendet, um den Cache und andere Daten wie Backups zu persistieren
    restart: "unless-stopped"
    networks:
      - bw-universe
      - bw-db

  bw-db:
    image: mariadb:11
    # Wir legen die maximal zulässige Paketgröße fest, um Probleme mit großen Anfragen zu vermeiden
    command: --max-allowed-packet=67108864
    environment:
      MYSQL_RANDOM_ROOT_PASSWORD: "yes"
      MYSQL_DATABASE: "db"
      MYSQL_USER: "bunkerweb"
      MYSQL_PASSWORD: "changeme" # Vergessen Sie nicht, ein stärkeres Datenbankpasswort festzulegen
    volumes:
      - bw-data:/var/lib/mysql
    restart: "unless-stopped"
    networks:
      - bw-db

  crowdsec:
    image: crowdsecurity/crowdsec:v1.7.0 # Verwenden Sie die neueste Version, aber pinnen Sie immer die Version für bessere Stabilität/Sicherheit
    volumes:
      - cs-data:/var/lib/crowdsec/data # Zum Persistieren der CrowdSec-Daten
      - bw-logs:/var/log:ro # Die BunkerWeb-Protokolle, die von CrowdSec analysiert werden sollen
      - ./acquis.yaml:/etc/crowdsec/acquis.yaml # Die Akquisitionsdatei für die BunkerWeb-Protokolle
      - ./appsec.yaml:/etc/crowdsec/acquis.d/appsec.yaml # Auskommentieren, wenn Sie die AppSec-Komponente nicht verwenden möchten
    environment:
      BOUNCER_KEY_bunkerweb: "s3cr3tb0unc3rk3y" # Vergessen Sie nicht, einen stärkeren Schlüssel für den Bouncer festzulegen
      COLLECTIONS: "crowdsecurity/nginx crowdsecurity/appsec-virtual-patching crowdsecurity/appsec-generic-rules"
      #   COLLECTIONS: "crowdsecurity/nginx" # Wenn Sie die AppSec-Komponente nicht verwenden möchten, verwenden Sie stattdessen diese Zeile
    networks:
      - bw-universe

  syslog:
    image: balabit/syslog-ng:4.9.0
    cap_add:
      - NET_BIND_SERVICE  # An niedrige Ports binden
      - NET_BROADCAST  # Broadcasts senden
      - NET_RAW  # Raw-Sockets verwenden
      - DAC_READ_SEARCH  # Dateien lesen, Berechtigungen umgehen
      - DAC_OVERRIDE  # Dateiberechtigungen überschreiben
      - CHOWN  # Besitzer ändern
      - SYSLOG  # In Systemprotokolle schreiben
    volumes:
      - bw-logs:/var/log/bunkerweb # Dies ist das Volume, das zum Speichern der Protokolle verwendet wird
      - ./syslog-ng.conf:/etc/syslog-ng/syslog-ng.conf # Dies ist die Konfigurationsdatei von syslog-ng
    networks:
        bw-universe:
          ipv4_address: 10.20.30.254

volumes:
  bw-data:
  bw-storage:
  bw-logs:
  cs-data:

networks:
  bw-universe:
    name: bw-universe
    ipam:
      driver: default
      config:
        - subnet: 10.20.30.0/24 # Stellen Sie sicher, dass Sie den richtigen IP-Bereich festlegen, damit der Scheduler die Konfiguration an die Instanz senden kann
  bw-services:
    name: bw-services
  bw-db:
    name: bw-db
```
</code></pre>
<p>===
"Linux"</p>
<pre><code>Sie müssen CrowdSec installieren und so konfigurieren, dass es die BunkerWeb-Protokolle analysiert. Befolgen Sie die [offizielle Dokumentation](https://doc.crowdsec.net/docs/getting_started/install_crowdsec?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios).

Damit CrowdSec die BunkerWeb-Protokolle analysieren kann, fügen Sie die folgenden Zeilen zu Ihrer Akquisitionsdatei unter `/etc/crowdsec/acquis.yaml` hinzu:

```yaml
filenames:
  - /var/log/bunkerweb/access.log
  - /var/log/bunkerweb/error.log
  - /var/log/bunkerweb/modsec_audit.log
labels:
    type: nginx
```

Fügen Sie nun Ihren benutzerdefinierten Bouncer zur CrowdSec-API hinzu, indem Sie das Tool `cscli` verwenden:

```shell
sudo cscli bouncers add crowdsec-bunkerweb-bouncer/v1.6
```

!!! warning "API-Schlüssel"
    Bewahren Sie den von dem `cscli`-Befehl generierten Schlüssel auf; Sie werden ihn später benötigen.

Starten Sie anschließend den CrowdSec-Dienst neu:

```shell
sudo systemctl restart crowdsec
```

**Anwendungssicherheitskomponente (*optional*)**

Wenn Sie die AppSec-Komponente verwenden möchten, müssen Sie eine weitere Akquisitionsdatei dafür erstellen, die sich unter `/etc/crowdsec/acquis.d/appsec.yaml` befindet:

```yaml
appsec_config: crowdsecurity/appsec-default
labels:
    type: appsec
listen_addr: 127.0.0.1:7422
source: appsec
```

Sie müssen auch die Sammlungen der AppSec-Komponente installieren:

```shell
sudo cscli collections install crowdsecurity/appsec-virtual-patching
sudo cscli collections install crowdsecurity/appsec-generic-rules
```

Starten Sie schließlich den CrowdSec-Dienst neu:

```shell
sudo systemctl restart crowdsec
```

**Parameter**

Konfigurieren Sie das Plugin, indem Sie die folgenden Parameter zu Ihrer BunkerWeb-Konfigurationsdatei hinzufügen:

```env
USE_CROWDSEC=yes
CROWDSEC_API=http://127.0.0.1:8080
CROWDSEC_API_KEY=&lt;Der von cscli bereitgestellte Schlüssel&gt;
# Auskommentieren, wenn Sie die AppSec-Komponente nicht verwenden möchten
CROWDSEC_APPSEC_URL=http://127.0.0.1:7422
```

Laden Sie schließlich den BunkerWeb-Dienst neu:

```shell
sudo systemctl reload bunkerweb
```
</code></pre>
<p>===
"All-in-one"</p>
<pre><code>Das Docker-Image BunkerWeb All-In-One (AIO) wird mit vollständig integriertem CrowdSec geliefert. Sie müssen keine separate CrowdSec-Instanz einrichten oder die Akquisitionsdateien für die BunkerWeb-Protokolle manuell konfigurieren, wenn Sie den internen CrowdSec-Agenten verwenden.

Beachten Sie die [Integrationsdokumentation des All-In-One (AIO)-Images](integrations.md#crowdsec-integration).
</code></pre>
<h3 id="konfigurationsparameter">Konfigurationsparameter</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CROWDSEC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>CrowdSec aktivieren:</strong> Auf <code>yes</code> setzen, um den CrowdSec-Bouncer zu aktivieren.</td>
</tr>
<tr>
<td><code>CROWDSEC_API</code></td>
<td><code>http://crowdsec:8080</code></td>
<td>global</td>
<td>no</td>
<td><strong>CrowdSec API URL:</strong> Die Adresse des lokalen CrowdSec API-Dienstes.</td>
</tr>
<tr>
<td><code>CROWDSEC_API_KEY</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>CrowdSec API-Schlüssel:</strong> Der API-Schlüssel zur Authentifizierung bei der CrowdSec-API, erhalten mit <code>cscli bouncers add</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_MODE</code></td>
<td><code>live</code></td>
<td>global</td>
<td>no</td>
<td><strong>Betriebsmodus:</strong> Entweder <code>live</code> (fragt die API für jede Anfrage ab) oder <code>stream</code> (cacht alle Entscheidungen periodisch).</td>
</tr>
<tr>
<td><code>CROWDSEC_ENABLE_INTERNAL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Interner Traffic:</strong> Auf <code>yes</code> setzen, um den internen Traffic anhand der CrowdSec-Entscheidungen zu überprüfen.</td>
</tr>
<tr>
<td><code>CROWDSEC_REQUEST_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>no</td>
<td><strong>Anfrage-Timeout:</strong> Timeout in Millisekunden für HTTP-Anfragen an die lokale CrowdSec-API im Live-Modus.</td>
</tr>
<tr>
<td><code>CROWDSEC_EXCLUDE_LOCATION</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Ausgeschlossene Orte:</strong> Kommagetrennte Liste von Orten (URIs), die von CrowdSec-Prüfungen ausgeschlossen werden sollen.</td>
</tr>
<tr>
<td><code>CROWDSEC_CACHE_EXPIRATION</code></td>
<td><code>1</code></td>
<td>global</td>
<td>no</td>
<td><strong>Cache-Ablauf:</strong> Die Cache-Ablaufzeit in Sekunden für IP-Entscheidungen im Live-Modus.</td>
</tr>
<tr>
<td><code>CROWDSEC_UPDATE_FREQUENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>no</td>
<td><strong>Update-Frequenz:</strong> Wie oft (in Sekunden) neue/abgelaufene Entscheidungen von der CrowdSec-API im Stream-Modus abgerufen werden sollen.</td>
</tr>
</tbody>
</table>
<h4 id="parameter-der-anwendungssicherheitskomponente">Parameter der Anwendungssicherheitskomponente</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CROWDSEC_APPSEC_URL</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>AppSec URL:</strong> Die URL der CrowdSec-Anwendungssicherheitskomponente. Leer lassen, um AppSec zu deaktivieren.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_FAILURE_ACTION</code></td>
<td><code>passthrough</code></td>
<td>global</td>
<td>no</td>
<td><strong>Aktion bei Fehler:</strong> Aktion, die ausgeführt werden soll, wenn AppSec einen Fehler zurückgibt. Kann <code>passthrough</code> oder <code>deny</code> sein.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_CONNECT_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>Verbindungs-Timeout:</strong> Das Timeout in Millisekunden für die Verbindung zur AppSec-Komponente.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SEND_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>Sende-Timeout:</strong> Das Timeout in Millisekunden für das Senden von Daten an die AppSec-Komponente.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_PROCESS_TIMEOUT</code></td>
<td><code>500</code></td>
<td>global</td>
<td>no</td>
<td><strong>Verarbeitungs-Timeout:</strong> Das Timeout in Millisekunden für die Verarbeitung der Anfrage in der AppSec-Komponente.</td>
</tr>
<tr>
<td><code>CROWDSEC_ALWAYS_SEND_TO_APPSEC</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Immer senden:</strong> Auf <code>yes</code> setzen, um Anfragen immer an AppSec zu senden, auch wenn eine Entscheidung auf IP-Ebene vorliegt.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SSL_VERIFY</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>SSL-Verifizierung:</strong> Auf <code>yes</code> setzen, um das SSL-Zertifikat der AppSec-Komponente zu überprüfen.</td>
</tr>
</tbody>
</table>
<p>!!! info "Über die Betriebsmodi" - Der <strong>Live-Modus</strong> fragt die CrowdSec-API für jede eingehende Anfrage ab und bietet Echtzeitschutz auf Kosten einer höheren Latenz. - Der <strong>Stream-Modus</strong> lädt periodisch alle Entscheidungen von der CrowdSec-API herunter und speichert sie lokal im Cache, wodurch die Latenz mit einer leichten Verzögerung bei der Anwendung neuer Entscheidungen reduziert wird.</p>
<h3 id="konfigurationsbeispiele_1">Konfigurationsbeispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="35:1"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">Basiskonfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Dies ist eine einfache Konfiguration, wenn CrowdSec auf demselben Host ausgeführt wird:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;live&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p>===
"Erweiterte Konfiguration mit AppSec"</p>
<pre><code>Eine umfassendere Konfiguration, einschließlich der Anwendungssicherheitskomponente:

```yaml
USE_CROWDSEC: "yes"
CROWDSEC_API: "http://crowdsec:8080"
CROWDSEC_API_KEY: "your-api-key-here"
CROWDSEC_MODE: "stream"
CROWDSEC_UPDATE_FREQUENCY: "30"
CROWDSEC_EXCLUDE_LOCATION: "/health,/metrics"

# AppSec-Konfiguration
CROWDSEC_APPSEC_URL: "http://crowdsec:7422"
CROWDSEC_APPSEC_FAILURE_ACTION: "deny"
CROWDSEC_ALWAYS_SEND_TO_APPSEC: "yes"
CROWDSEC_APPSEC_SSL_VERIFY: "yes"
```
</code></pre>
<h2 id="custom-ssl-certificate">Custom SSL certificate</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Plugin für benutzerdefinierte SSL-Zertifikate ermöglicht die Verwendung Ihrer eigenen SSL/TLS-Zertifikate mit BunkerWeb, anstelle der automatisch generierten. Dies ist nützlich, wenn Sie bereits Zertifikate von einer vertrauenswürdigen CA besitzen, spezifische Anforderungen haben oder die Zertifikatsverwaltung zentralisieren.</p>
<p>So funktioniert's:</p>
<ol>
<li>Sie stellen das Zertifikat und den privaten Schlüssel bereit (Dateipfade oder Daten in base64/PEM).</li>
<li>BunkerWeb validiert das Format und die Verwendbarkeit der Dateien.</li>
<li>Bei einer sicheren Verbindung stellt BunkerWeb Ihr benutzerdefiniertes Zertifikat bereit.</li>
<li>Die Gültigkeit wird überwacht und Warnungen werden vor dem Ablauf ausgegeben.</li>
<li>Sie behalten die volle Kontrolle über den Lebenszyklus der Zertifikate.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Automatische Überwachung</p>
</div>
<p>Mit <code>USE_CUSTOM_SSL: yes</code> überwacht BunkerWeb das Zertifikat <code>CUSTOM_SSL_CERT</code>, erkennt Änderungen und lädt NGINX bei Bedarf neu.</p>
<h3 id="verwendung">Verwendung</h3>
<ol>
<li>Aktivieren: <code>USE_CUSTOM_SSL: yes</code>.</li>
<li>Methode: Dateien vs. Daten, Priorität über <code>CUSTOM_SSL_CERT_PRIORITY</code>.</li>
<li>Dateien: Geben Sie die Pfade zum Zertifikat und zum privaten Schlüssel an.</li>
<li>Daten: Geben Sie die base64- oder Klartext-PEM-Strings an.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Stream-Modus</p>
</div>
<p>Im Stream-Modus konfigurieren Sie <code>LISTEN_STREAM_PORT_SSL</code> für den SSL/TLS-Port.</p>
<h3 id="parameter_2">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_CUSTOM_SSL</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Aktiviert die Verwendung eines benutzerdefinierten Zertifikats.</td>
</tr>
<tr>
<td style="text-align: left;"><code>CUSTOM_SSL_CERT_PRIORITY</code></td>
<td style="text-align: left;"><code>file</code></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Priorität der Quellen: <code>file</code> (Dateien) oder <code>data</code> (Daten).</td>
</tr>
<tr>
<td style="text-align: left;"><code>CUSTOM_SSL_CERT</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Vollständiger Pfad zum Zertifikat (oder Bundle).</td>
</tr>
<tr>
<td style="text-align: left;"><code>CUSTOM_SSL_KEY</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Vollständiger Pfad zum privaten Schlüssel.</td>
</tr>
<tr>
<td style="text-align: left;"><code>CUSTOM_SSL_CERT_DATA</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Zertifikatsdaten (base64 oder Klartext-PEM).</td>
</tr>
<tr>
<td style="text-align: left;"><code>CUSTOM_SSL_KEY_DATA</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Daten des privaten Schlüssels (base64 oder Klartext-PEM).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sicherheit</p>
</div>
<p>Schützen Sie den privaten Schlüssel (angemessene Berechtigungen, nur vom BunkerWeb-Scheduler lesbar).</p>
<div class="admonition tip">
<p class="admonition-title">Format</p>
</div>
<p>Zertifikate müssen im PEM-Format vorliegen. Konvertieren Sie bei Bedarf.</p>
<div class="admonition info">
<p class="admonition-title">Zertifikatsketten</p>
</div>
<p>Wenn eine Zwischenkette erforderlich ist, stellen Sie das vollständige Bundle in der richtigen Reihenfolge bereit (Zertifikat, dann Zwischenzertifikate).</p>
<h3 id="beispiele_2">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="36:1"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">Dateien</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="37:1"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">Base64-Daten</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="38:1"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">Klartext-PEM</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN CERTIFICATE-----</span>
<span class="w">  </span><span class="no">MIIDdzCCAl+gAwIBAgIUJH...certificate content...AAAA</span>
<span class="w">  </span><span class="no">-----END CERTIFICATE-----</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN PRIVATE KEY-----</span>
<span class="w">  </span><span class="no">MIIEvQIBADAN...key content...AAAA</span>
<span class="w">  </span><span class="no">-----END PRIVATE KEY-----</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="39:1"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">Fallback</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...&quot;</span>
</code></pre></div>
<h2 id="dnsbl">DNSBL</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das DNSBL (Domain Name System Blacklist) Plugin bietet Schutz vor bekannten bösartigen IP-Adressen, indem es die IP-Adressen von Clients mit externen DNSBL-Servern abgleicht. Diese Funktion schützt Ihre Website vor Spam, Botnetzen und verschiedenen Arten von Cyber-Bedrohungen, indem sie auf von der Community gepflegte Listen problematischer IP-Adressen zurückgreift.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Client eine Verbindung zu Ihrer Website herstellt, fragt BunkerWeb die von Ihnen ausgewählten DNSBL-Server über das DNS-Protokoll ab.</li>
<li>Die Überprüfung erfolgt durch Senden einer umgekehrten DNS-Anfrage mit der IP-Adresse des Clients an jeden DNSBL-Server.</li>
<li>Wenn ein DNSBL-Server bestätigt, dass die IP-Adresse des Clients als bösartig aufgeführt ist, wird BunkerWeb den Client automatisch sperren und so verhindern, dass potenzielle Bedrohungen Ihre Anwendung erreichen.</li>
<li>Die Ergebnisse werden zwischengespeichert, um die Leistung bei wiederholten Besuchen von derselben IP-Adresse zu verbessern.</li>
<li>Die Abfragen werden effizient mit asynchronen Abfragen durchgeführt, um die Auswirkungen auf die Ladezeiten der Seite zu minimieren.</li>
</ol>
<h3 id="wie-man-es-benutzt_6">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die DNSBL-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die DNSBL-Funktion ist standardmäßig deaktiviert. Setzen Sie die Einstellung <code>USE_DNSBL</code> auf <code>yes</code>, um sie zu aktivieren.</li>
<li><strong>DNSBL-Server konfigurieren:</strong> Fügen Sie die Domainnamen der DNSBL-Dienste, die Sie verwenden möchten, zur Einstellung <code>DNSBL_LIST</code> hinzu.</li>
<li><strong>Einstellungen anwenden:</strong> Nach der Konfiguration überprüft BunkerWeb eingehende Verbindungen automatisch mit den angegebenen DNSBL-Servern.</li>
<li><strong>Wirksamkeit überwachen:</strong> Überprüfen Sie die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um Statistiken über Anfragen zu sehen, die durch DNSBL-Prüfungen blockiert wurden.</li>
</ol>
<h3 id="konfigurationseinstellungen_7">Konfigurationseinstellungen</h3>
<p><strong>Allgemein</strong></p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_DNSBL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td>DNSBL aktivieren: auf <code>yes</code> setzen, um DNSBL-Prüfungen für eingehende Verbindungen zu aktivieren.</td>
</tr>
<tr>
<td><code>DNSBL_LIST</code></td>
<td><code>bl.blocklist.de sbl.spamhaus.org xbl.spamhaus.org</code></td>
<td>global</td>
<td>nein</td>
<td>DNSBL-Server: Liste der zu überprüfenden DNSBL-Server-Domains, durch Leerzeichen getrennt.</td>
</tr>
</tbody>
</table>
<p><strong>Ausnahmelisten</strong></p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DNSBL_IGNORE_IP</code></td>
<td>``</td>
<td>multisite</td>
<td>ja</td>
<td>Durch Leerzeichen getrennte IPs/CIDRs, für die DNSBL-Prüfungen übersprungen werden sollen (Whitelist).</td>
</tr>
<tr>
<td><code>DNSBL_IGNORE_IP_URLS</code></td>
<td>``</td>
<td>multisite</td>
<td>ja</td>
<td>Durch Leerzeichen getrennte URLs, die IPs/CIDRs zum Überspringen bereitstellen. Unterstützt <code>http(s)://</code> und <code>file://</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Auswahl von DNSBL-Servern</p>
</div>
<p>Wählen Sie seriöse DNSBL-Anbieter, um Falschmeldungen zu minimieren. Die Standardliste enthält etablierte Dienste, die für die meisten Websites geeignet sind:</p>
<pre><code>- **bl.blocklist.de:** Listet IPs, die bei Angriffen auf andere Server erkannt wurden.
- **sbl.spamhaus.org:** Konzentriert sich auf Spam-Quellen und andere bösartige Aktivitäten.
- **xbl.spamhaus.org:** Zielt auf infizierte Systeme ab, wie z. B. kompromittierte Maschinen oder offene Proxys.
</code></pre>
<div class="admonition info">
<p class="admonition-title">Wie DNSBL funktioniert</p>
</div>
<p>DNSBL-Server funktionieren, indem sie auf speziell formatierte DNS-Anfragen antworten. Wenn BunkerWeb eine IP-Adresse überprüft, kehrt es die IP um und hängt den DNSBL-Domainnamen an. Wenn die resultierende DNS-Anfrage eine „Erfolgs“-Antwort zurückgibt, wird die IP als auf der schwarzen Liste stehend betrachtet.</p>
<div class="admonition warning">
<p class="admonition-title">Leistungsüberlegungen</p>
</div>
<p>Obwohl BunkerWeb DNSBL-Abfragen auf Leistung optimiert, könnte das Hinzufügen einer großen Anzahl von DNSBL-Servern potenziell die Antwortzeiten beeinträchtigen. Beginnen Sie mit einigen seriösen DNSBL-Servern und überwachen Sie die Leistung, bevor Sie weitere hinzufügen.</p>
<h3 id="beispielkonfigurationen_7">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="40:5"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><input id="__tabbed_40_2" name="__tabbed_40" type="radio" /><input id="__tabbed_40_3" name="__tabbed_40" type="radio" /><input id="__tabbed_40_4" name="__tabbed_40" type="radio" /><input id="__tabbed_40_5" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">Grundlegende Konfiguration</label><label for="__tabbed_40_2">Minimale Konfiguration</label><label for="__tabbed_40_3">Ausschluss vertrauenswürdiger IPs</label><label for="__tabbed_40_4">Verwendung von Remote-URLs</label><label for="__tabbed_40_5">Verwendung lokaler Dateien</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration mit den Standard-DNSBL-Servern:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bl.blocklist.de</span><span class="nv"> </span><span class="s">sbl.spamhaus.org</span><span class="nv"> </span><span class="s">xbl.spamhaus.org&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine minimale Konfiguration, die sich auf die zuverlässigsten DNSBL-Dienste konzentriert:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
</code></pre></div>
<p>Diese Konfiguration verwendet nur:</p>
<ul>
<li><strong>zen.spamhaus.org</strong>: Die kombinierte Liste von Spamhaus wird aufgrund ihrer breiten Abdeckung und ihres Rufs für Genauigkeit oft als eigenständige Lösung als ausreichend angesehen. Sie kombiniert die SBL-, XBL- und PBL-Listen in einer einzigen Abfrage, was sie effizient und umfassend macht.</li>
</ul>
</div>
<div class="tabbed-block">
<p>Sie können bestimmte Clients von DNSBL-Prüfungen ausschließen, indem Sie statische Werte und/oder entfernte Dateien verwenden:</p>
<ul>
<li><code>DNSBL_IGNORE_IP</code>: Fügen Sie durch Leerzeichen getrennte IPs und CIDR-Bereiche hinzu. Beispiel: <code>192.0.2.10 203.0.113.0/24 2001:db8::/32</code>.</li>
<li><code>DNSBL_IGNORE_IP_URLS</code>: Geben Sie URLs an, deren Inhalte eine IP/CIDR pro Zeile auflisten. Kommentare, die mit <code>#</code> oder <code>;</code> beginnen, werden ignoriert. Doppelte Einträge werden entfernt.</li>
</ul>
<p>Wenn eine eingehende Client-IP mit der Ausnahmeliste übereinstimmt, überspringt BunkerWeb die DNSBL-Abfragen und speichert das Ergebnis als „ok“ für schnellere nachfolgende Anfragen zwischen.</p>
</div>
<div class="tabbed-block">
<p>Der Job <code>dnsbl-download</code> lädt und speichert stündlich zu ignorierende IPs:</p>
<ul>
<li>Protokolle: <code>https://</code>, <code>http://</code> und lokale <code>file://</code>-Pfade.</li>
<li>Pro-URL-Cache mit Prüfsumme verhindert redundante Downloads (1 Stunde Toleranz).</li>
<li>Pro Dienst zusammengeführte Datei: <code>/var/cache/bunkerweb/dnsbl/&lt;service&gt;/IGNORE_IP.list</code>.</li>
<li>Wird beim Start geladen und mit <code>DNSBL_IGNORE_IP</code> zusammengeführt.</li>
</ul>
<p>Beispiel, das statische und URL-Quellen kombiniert:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.0.0.0/8</span><span class="nv"> </span><span class="s">192.168.0.0/16</span><span class="nv"> </span><span class="s">2001:db8::/32&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/allow-cidrs.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/dnsbl/ignore.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Laden Sie zu ignorierende IPs aus lokalen Dateien unter Verwendung von <code>file://</code>-URLs:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///etc/bunkerweb/dnsbl/ignore.txt</span><span class="nv"> </span><span class="s">file:///opt/data/allow-cidrs.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="database">Database</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Datenbank-Plugin bietet eine robuste Datenbankintegration für BunkerWeb, indem es die zentrale Speicherung und Verwaltung von Konfigurationsdaten, Protokollen und anderen wichtigen Informationen ermöglicht.</p>
<p>Diese Kernkomponente unterstützt mehrere Datenbank-Engines, darunter SQLite, PostgreSQL, MySQL/MariaDB und Oracle, sodass Sie die Datenbanklösung wählen können, die am besten zu Ihrer Umgebung und Ihren Anforderungen passt.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>BunkerWeb verbindet sich mit Ihrer konfigurierten Datenbank über die bereitgestellte URI im SQLAlchemy-Format.</li>
<li>Kritische Konfigurationsdaten, Laufzeitinformationen und Job-Protokolle werden sicher in der Datenbank gespeichert.</li>
<li>Automatische Wartungsprozesse optimieren Ihre Datenbank, indem sie das Datenwachstum verwalten und überschüssige Datensätze bereinigen.</li>
<li>Für Hochverfügbarkeitsszenarien können Sie eine schreibgeschützte Datenbank-URI konfigurieren, die sowohl als Failover als auch zur Entlastung von Leseoperationen dient.</li>
<li>Datenbankoperationen werden entsprechend Ihrer angegebenen Protokollierungsstufe protokolliert, um eine angemessene Transparenz der Datenbankinteraktionen zu gewährleisten.</li>
</ol>
<h3 id="wie-man-es-benutzt_7">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Datenbankfunktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Wählen Sie eine Datenbank-Engine:</strong> Wählen Sie je nach Ihren Anforderungen zwischen SQLite (Standard), PostgreSQL, MySQL/MariaDB oder Oracle.</li>
<li><strong>Konfigurieren Sie die Datenbank-URI:</strong> Setzen Sie <code>DATABASE_URI</code>, um sich mit Ihrer primären Datenbank im SQLAlchemy-Format zu verbinden.</li>
<li><strong>Optionale schreibgeschützte Datenbank:</strong> Konfigurieren Sie für Hochverfügbarkeits-Setups eine <code>DATABASE_URI_READONLY</code> als Fallback oder für Leseoperationen.</li>
</ol>
<h3 id="konfigurationseinstellungen_8">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DATABASE_URI</code></td>
<td><code>sqlite:////var/lib/bunkerweb/db.sqlite3</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Datenbank-URI:</strong> Die primäre Datenbankverbindungszeichenfolge im SQLAlchemy-Format.</td>
</tr>
<tr>
<td><code>DATABASE_URI_READONLY</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td><strong>Schreibgeschützte Datenbank-URI:</strong> Optionale Datenbank für schreibgeschützte Operationen oder als Failover.</td>
</tr>
<tr>
<td><code>DATABASE_LOG_LEVEL</code></td>
<td><code>warning</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Protokollierungsstufe:</strong> Die Ausführlichkeitsstufe für Datenbankprotokolle. Optionen: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>warning</code> oder <code>error</code>.</td>
</tr>
<tr>
<td><code>DATABASE_MAX_JOBS_RUNS</code></td>
<td><code>10000</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Maximale Job-Ausführungen:</strong> Die maximale Anzahl von Job-Ausführungsdatensätzen, die vor der automatischen Bereinigung aufbewahrt werden.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Auswahl der Datenbank" - <strong>SQLite</strong> (Standard): Ideal für Single-Node-Bereitstellungen oder Testumgebungen aufgrund seiner Einfachheit und dateibasierten Natur. - <strong>PostgreSQL</strong>: Empfohlen für Produktionsumgebungen mit mehreren BunkerWeb-Instanzen aufgrund seiner Robustheit und Unterstützung für Gleichzeitigkeit. - <strong>MySQL/MariaDB</strong>: Eine gute Alternative zu PostgreSQL mit ähnlichen produktionsreifen Fähigkeiten. - <strong>Oracle</strong>: Geeignet für Unternehmensumgebungen, in denen Oracle bereits die Standard-Datenbankplattform ist.</p>
<div class="admonition info">
<p class="admonition-title">SQLAlchemy-URI-Format</p>
</div>
<p>Die Datenbank-URI folgt dem SQLAlchemy-Format:</p>
<pre><code>- SQLite: `sqlite:////pfad/zur/datenbank.sqlite3`
- PostgreSQL: `postgresql://benutzername:passwort@hostname:port/datenbank`
- MySQL/MariaDB: `mysql://benutzername:passwort@hostname:port/datenbank` oder `mariadb://benutzername:passwort@hostname:port/datenbank`
- Oracle: `oracle://benutzername:passwort@hostname:port/datenbank`
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Datenbankwartung</p>
</div>
<p>Das Plugin führt automatisch einen täglichen Job aus, der überschüssige Job-Ausführungen basierend auf der Einstellung <code>DATABASE_MAX_JOBS_RUNS</code> bereinigt. Dies verhindert unbegrenztes Datenbankwachstum und bewahrt gleichzeitig eine nützliche Historie der Job-Ausführungen.</p>
<h2 id="easy-resolve-pro">Easy Resolve <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides a simpler way to fix false positives in reports.</p>
<h2 id="errors">Errors</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das Errors-Plugin bietet eine anpassbare Verwaltung von HTTP-Fehlern, um das Erscheinungsbild der Fehlerantworten für Ihre Benutzer zu definieren. So können Sie klare and konsistente Fehlerseiten anzeigen, die Ihrer Identität entsprechen, anstatt der technischen Standardseiten des Servers.</p>
<p><strong>So funktioniert's:</strong></p>
<ol>
<li>Wenn ein HTTP-Fehler auftritt (z.B. 400, 404, 500), fängt BunkerWeb die Antwort ab.</li>
<li>Anstelle der Standardseite zeigt BunkerWeb eine angepasste and sorgfältig gestaltete Seite an.</li>
<li>Die Fehlerseiten sind konfigurierbar: Sie können für jeden Fehlercode eine HTML-Datei bereitstellen. Die Dateien müssen in dem durch <code>ROOT_FOLDER</code> definierten Verzeichnis abgelegt werden (siehe Misc-Plugin).<ul>
<li>Standardmäßig ist <code>ROOT_FOLDER</code> auf <code>/var/www/html/{server_name}</code> gesetzt.</li>
<li>Im Multisite-Modus hat jede Site ihren eigenen <code>ROOT_FOLDER</code>; platzieren Sie die Fehlerseiten im entsprechenden Ordner für jede Site.</li>
</ul>
</li>
<li>Die Standardseiten erklären das Problem klar and schlagen mögliche Maßnahmen vor.</li>
</ol>
<h3 id="verwendung_1">Verwendung</h3>
<ol>
<li><strong>Benutzerdefinierte Seiten definieren:</strong> Verwenden Sie <code>ERRORS</code>, um HTTP-Codes mit HTML-Dateien (im <code>ROOT_FOLDER</code>) zu verknüpfen.</li>
<li><strong>Ihre Seiten konfigurieren:</strong> Verwenden Sie die Standardseiten von BunkerWeb oder Ihre eigenen Dateien.</li>
<li><strong>Abgefangene Codes definieren:</strong> Wählen Sie mit <code>INTERCEPTED_ERROR_CODES</code> die Codes aus, die immer von BunkerWeb verwaltet werden sollen.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Die Fehlerverwaltung wird automatisch angewendet.</li>
</ol>
<h3 id="parameter_3">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>ERRORS</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">Nein</td>
<td style="text-align: left;">Benutzerdefinierte Fehlerseiten: Paare <code>CODE=/pfad/seite.html</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>INTERCEPTED_ERROR_CODES</code></td>
<td style="text-align: left;"><code>400 401 403 404 405 413 429 500 501 502 503 504</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">Nein</td>
<td style="text-align: left;">Abgefangene Codes: Liste der Codes, die mit der Standardseite verwaltet werden, wenn keine benutzerdefinierte Seite definiert ist.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Seiten-Design</p>
</div>
<p>Die Standardseiten sind klar and lehrreich: Fehlerbeschreibung, mögliche Ursachen, vorgeschlagene Maßnahmen and visuelle Anhaltspunkte.</p>
<div class="admonition info">
<p class="admonition-title">Fehlertypen</p>
</div>
<ul>
<li>4xx (Client-seitig): Ungültige Anfragen, nicht existierende Ressource, fehlende Authentifizierung…</li>
<li>5xx (Server-seitig): Unmöglichkeit, eine gültige Anfrage zu bearbeiten (interner Fehler, vorübergehende Nichtverfügbarkeit…).</li>
</ul>
<h3 id="beispiele_3">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="41:1"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">Standardverwaltung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="42:1"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">Benutzerdefinierte Seiten</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404=/custom/404.html</span><span class="nv"> </span><span class="s">500=/custom/500.html&quot;</span>
<span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="43:1"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">Selektive Verwaltung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404</span><span class="nv"> </span><span class="s">500&quot;</span>
</code></pre></div>
<h2 id="greylist">Greylist</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Greylist-Plugin bietet einen flexiblen Sicherheitsansatz, der Besuchern den Zugriff ermöglicht, während wesentliche Sicherheitsfunktionen weiterhin aktiv bleiben.</p>
<p>Im Gegensatz zu traditionellen <a href="#blacklist">Blacklist</a>/<a href="#whitelist">Whitelist</a>-Ansätzen, die den Zugriff vollständig blockieren oder erlauben, schafft die Greylist einen Mittelweg, indem sie bestimmten Besuchern den Zugriff gewährt, sie aber dennoch Sicherheitsprüfungen unterzieht.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Sie definieren Kriterien für Besucher, die auf die Greylist gesetzt werden sollen (<em>IP-Adressen, Netzwerke, rDNS, ASN, User-Agent oder URI-Muster</em>).</li>
<li>Wenn ein Besucher einem dieser Kriterien entspricht, erhält er Zugriff auf Ihre Website, während die anderen Sicherheitsfunktionen aktiv bleiben.</li>
<li>Wenn ein Besucher keinem Greylist-Kriterium entspricht, wird sein Zugriff verweigert.</li>
<li>Greylist-Daten können in regelmäßigen Abständen automatisch aus externen Quellen aktualisiert werden.</li>
</ol>
<h3 id="wie-man-es-benutzt_8">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Greylist-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die Greylist-Funktion ist standardmäßig deaktiviert. Setzen Sie die Einstellung <code>USE_GREYLIST</code> auf <code>yes</code>, um sie zu aktivieren.</li>
<li><strong>Greylist-Regeln konfigurieren:</strong> Definieren Sie, welche IPs, Netzwerke, rDNS-Muster, ASNs, User-Agents oder URIs auf die Greylist gesetzt werden sollen.</li>
<li><strong>Externe Quellen hinzufügen:</strong> Konfigurieren Sie optional URLs zum automatischen Herunterladen und Aktualisieren von Greylist-Daten.</li>
<li><strong>Zugriff überwachen:</strong> Überprüfen Sie die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um zu sehen, welchen Besuchern der Zugriff gewährt oder verweigert wird.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Verhalten der Zugriffskontrolle</p>
</div>
<p>Wenn die Greylist-Funktion aktiviert ist, indem die Einstellung <code>USE_GREYLIST</code> auf <code>yes</code> gesetzt wird:</p>
<pre><code>1. **Greylist-Besucher:** Erhalten Zugriff, unterliegen aber weiterhin allen Sicherheitsprüfungen.
2. **Nicht-Greylist-Besucher:** Wird der Zugriff vollständig verweigert.
</code></pre>
<div class="admonition info">
<p class="admonition-title">Stream-Modus</p>
</div>
<p>Im Stream-Modus werden nur IP-, rDNS- und ASN-Prüfungen durchgeführt.</p>
<h3 id="konfigurationseinstellungen_9">Konfigurationseinstellungen</h3>
<p><strong>Allgemein</strong></p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GREYLIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Greylist aktivieren:</strong> Auf <code>yes</code> setzen, um Greylisting zu aktivieren.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="44:1"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">IP-Adresse</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher basierend auf ihrer IP-Adresse oder ihrem Netzwerk auf die Greylist. Diese Besucher erhalten Zugriff, unterliegen aber weiterhin den Sicherheitsprüfungen.</p>
<pre><code>| Einstellung        | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                                            |
| ------------------ | -------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `GREYLIST_IP`      |          | multisite | nein     | **IP-Greylist:** Liste von IP-Adressen oder Netzwerken (in CIDR-Notation), die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen.      |
| `GREYLIST_IP_URLS` |          | multisite | nein     | **IP-Greylist-URLs:** Liste von URLs, die IP-Adressen oder Netzwerke enthalten, die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen. |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="45:1"><input checked="checked" id="__tabbed_45_1" name="__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="__tabbed_45_1">Reverse DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher basierend auf ihrem Domainnamen (in umgekehrter Reihenfolge) auf die Greylist. Nützlich, um Besuchern von bestimmten Organisationen oder Netzwerken bedingten Zugriff zu gewähren.</p>
<pre><code>| Einstellung            | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                                       |
| ---------------------- | -------- | --------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| `GREYLIST_RDNS`        |          | multisite | nein     | **rDNS-Greylist:** Liste von Reverse-DNS-Suffixen, die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen.                         |
| `GREYLIST_RDNS_GLOBAL` | `yes`    | multisite | nein     | **Nur globales rDNS:** Führt rDNS-Greylist-Prüfungen nur für globale IP-Adressen durch, wenn auf `yes` gesetzt.                                    |
| `GREYLIST_RDNS_URLS`   |          | multisite | nein     | **rDNS-Greylist-URLs:** Liste von URLs, die Reverse-DNS-Suffixe enthalten, die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen. |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="46:1"><input checked="checked" id="__tabbed_46_1" name="__tabbed_46" type="radio" /><div class="tabbed-labels"><label for="__tabbed_46_1">ASN</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher von bestimmten Netzwerkanbietern mithilfe von Autonomen Systemnummern auf die Greylist. ASNs identifizieren, zu welchem Anbieter oder welcher Organisation eine IP gehört.</p>
<pre><code>| Einstellung         | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                       |
| ------------------- | -------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `GREYLIST_ASN`      |          | multisite | nein     | **ASN-Greylist:** Liste von Autonomen Systemnummern, die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen.       |
| `GREYLIST_ASN_URLS` |          | multisite | nein     | **ASN-Greylist-URLs:** Liste von URLs, die ASNs enthalten, die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen. |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="47:1"><input checked="checked" id="__tabbed_47_1" name="__tabbed_47" type="radio" /><div class="tabbed-labels"><label for="__tabbed_47_1">User-Agent</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher basierend auf dem Browser oder Tool, das sie angeben zu verwenden, auf die Greylist. Dies ermöglicht kontrollierten Zugriff für bestimmte Tools, während die Sicherheitsprüfungen aufrechterhalten werden.</p>
<pre><code>| Einstellung                | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                                |
| -------------------------- | -------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| `GREYLIST_USER_AGENT`      |          | multisite | nein     | **User-Agent-Greylist:** Liste von User-Agent-Mustern (PCRE-Regex), die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen. |
| `GREYLIST_USER_AGENT_URLS` |          | multisite | nein     | **User-Agent-Greylist-URLs:** Liste von URLs, die User-Agent-Muster enthalten, die auf die Greylist gesetzt werden sollen.                  |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="48:1"><input checked="checked" id="__tabbed_48_1" name="__tabbed_48" type="radio" /><div class="tabbed-labels"><label for="__tabbed_48_1">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Anfragen an bestimmte URLs auf Ihrer Website auf die Greylist. Dies ermöglicht bedingten Zugriff auf bestimmte Endpunkte, während die Sicherheitsprüfungen aufrechterhalten werden.</p>
<pre><code>| Einstellung         | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                             |
| ------------------- | -------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| `GREYLIST_URI`      |          | multisite | nein     | **URI-Greylist:** Liste von URI-Mustern (PCRE-Regex), die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen.            |
| `GREYLIST_URI_URLS` |          | multisite | nein     | **URI-Greylist-URLs:** Liste von URLs, die URI-Muster enthalten, die auf die Greylist gesetzt werden sollen, getrennt durch Leerzeichen. |
</code></pre>
<div class="admonition info">
<p class="admonition-title">Unterstützung von URL-Formaten</p>
</div>
<p>Alle <code>*_URLS</code>-Einstellungen unterstützen HTTP/HTTPS-URLs sowie lokale Dateipfade mit dem Präfix <code>file:///</code>. Die Basisauthentifizierung wird im Format <code>http://user:pass@url</code> unterstützt.</p>
<div class="admonition tip">
<p class="admonition-title">Regelmäßige Aktualisierungen</p>
</div>
<p>Greylists von URLs werden stündlich automatisch heruntergeladen und aktualisiert, um sicherzustellen, dass Ihr Schutz mit den neuesten vertrauenswürdigen Quellen auf dem neuesten Stand bleibt.</p>
<h3 id="beispielkonfigurationen_8">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="49:4"><input checked="checked" id="__tabbed_49_1" name="__tabbed_49" type="radio" /><input id="__tabbed_49_2" name="__tabbed_49" type="radio" /><input id="__tabbed_49_3" name="__tabbed_49" type="radio" /><input id="__tabbed_49_4" name="__tabbed_49" type="radio" /><div class="tabbed-labels"><label for="__tabbed_49_1">Grundlegende Konfiguration</label><label for="__tabbed_49_2">Erweiterte Konfiguration</label><label for="__tabbed_49_3">Verwendung lokaler Dateien</label><label for="__tabbed_49_4">Selektiver API-Zugriff</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration, die Greylisting auf das interne Netzwerk eines Unternehmens und einen Crawler anwendet:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">GREYLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)CompanyCrawler(?:\b)&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine umfassendere Konfiguration mit mehreren Greylist-Kriterien:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Unternehmensressourcen und genehmigte Crawler</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">GREYLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.company.com</span><span class="nv"> </span><span class="s">.partner-company.org&quot;</span>
<span class="nt">GREYLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345</span><span class="nv"> </span><span class="s">67890&quot;</span><span class="w">  </span><span class="c1"># ASNs von Unternehmen und Partnern</span>
<span class="nt">GREYLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)GoodBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)PartnerCrawler(?:\b)&quot;</span>
<span class="nt">GREYLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/&quot;</span>

<span class="c1"># Externe vertrauenswürdige Quellen</span>
<span class="nt">GREYLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-networks.txt&quot;</span>
<span class="nt">GREYLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-crawlers.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit lokalen Dateien für Greylists:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/ip-greylist.txt&quot;</span>
<span class="nt">GREYLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/rdns-greylist.txt&quot;</span>
<span class="nt">GREYLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/asn-greylist.txt&quot;</span>
<span class="nt">GREYLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/user-agent-greylist.txt&quot;</span>
<span class="nt">GREYLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/uri-greylist.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration, die den Zugriff auf bestimmte API-Endpunkte erlaubt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/public/</span><span class="nv"> </span><span class="s">^/api/v1/status&quot;</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;203.0.113.0/24&quot;</span><span class="w">  </span><span class="c1"># Externes Partnernetzwerk</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="gzip">Gzip</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Der GZIP-Plugin komprimiert HTTP-Antworten mit dem GZIP-Algorithmus, um die Bandbreite zu reduzieren und das Laden von Seiten zu beschleunigen.</p>
<h3 id="funktionsweise">Funktionsweise</h3>
<ol>
<li>BunkerWeb erkennt, ob der Client GZIP unterstützt.</li>
<li>Falls ja, wird die Antwort auf dem konfigurierten Niveau komprimiert.</li>
<li>Die Header zeigen die Verwendung von GZIP an.</li>
<li>Der Browser dekomprimiert vor der Anzeige.</li>
</ol>
<h3 id="verwendung_2">Verwendung</h3>
<ol>
<li>Aktivieren: <code>USE_GZIP: yes</code> (standardmäßig deaktiviert).</li>
<li>MIME-Typen: <code>GZIP_TYPES</code> definieren.</li>
<li>Mindestgröße: <code>GZIP_MIN_LENGTH</code>, um sehr kleine Dateien zu vermeiden.</li>
<li>Kompressionsstufe: <code>GZIP_COMP_LEVEL</code> (1–9).</li>
<li>Proxied-Inhalt: <code>GZIP_PROXIED</code> anpassen.</li>
</ol>
<h3 id="parameter_4">Parameter</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GZIP</code></td>
<td><code>no</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Aktiviert die GZIP-Kompression.</td>
</tr>
<tr>
<td><code>GZIP_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Komprimierte MIME-Typen.</td>
</tr>
<tr>
<td><code>GZIP_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Mindestgröße (Bytes) für die Anwendung der Kompression.</td>
</tr>
<tr>
<td><code>GZIP_COMP_LEVEL</code></td>
<td><code>5</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Stufe 1–9: höher = bessere Kompression, aber mehr CPU.</td>
</tr>
<tr>
<td><code>GZIP_PROXIED</code></td>
<td><code>no-cache no-store private expired auth</code></td>
<td>Multisite</td>
<td>nein</td>
<td>Gibt an, welche proxied-Inhalte basierend auf den Antwort-Headern komprimiert werden sollen.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Kompressionsstufe</p>
</div>
<p><code>5</code> ist ein guter Kompromiss. Statisch/CPU verfügbar: 7–9. Dynamisch/CPU begrenzt: 1–3.</p>
<h3 id="beispiele_4">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="50:1"><input checked="checked" id="__tabbed_50_1" name="__tabbed_50" type="radio" /><div class="tabbed-labels"><label for="__tabbed_50_1">Standard</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="51:1"><input checked="checked" id="__tabbed_51_1" name="__tabbed_51" type="radio" /><div class="tabbed-labels"><label for="__tabbed_51_1">Maximale Kompression</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="52:1"><input checked="checked" id="__tabbed_52_1" name="__tabbed_52" type="radio" /><div class="tabbed-labels"><label for="__tabbed_52_1">Ausgewogene Leistung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no-cache</span><span class="nv"> </span><span class="s">no-store</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">expired&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="53:1"><input checked="checked" id="__tabbed_53_1" name="__tabbed_53" type="radio" /><div class="tabbed-labels"><label for="__tabbed_53_1">Proxied-Inhalt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
<h2 id="html-injection">HTML injection</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das HTML-Injection-Plugin ermöglicht es Ihnen, nahtlos benutzerdefinierten HTML-Code zu den Seiten Ihrer Website vor den schließenden <code>&lt;/body&gt;</code>- oder <code>&lt;/head&gt;</code>-Tags hinzuzufügen. Diese Funktion ist besonders nützlich, um Analyses-Skripte, Tracking-Pixel, benutzerdefiniertes JavaScript, CSS-Stile oder andere Integrationen von Drittanbietern hinzuzufügen, ohne den Quellcode Ihrer Website ändern zu müssen.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn eine Seite von Ihrer Website ausgeliefert wird, untersucht BunkerWeb die HTML-Antwort.</li>
<li>Wenn Sie die Body-Injection konfiguriert haben, fügt BunkerWeb Ihren benutzerdefinierten HTML-Code direkt vor dem schließenden <code>&lt;/body&gt;</code>-Tag ein.</li>
<li>Wenn Sie die Head-Injection konfiguriert haben, fügt BunkerWeb Ihren benutzerdefinierten HTML-Code direkt vor dem schließenden <code>&lt;/head&gt;</code>-Tag ein.</li>
<li>Das Einfügen erfolgt automatisch für alle HTML-Seiten, die von Ihrer Website ausgeliefert werden.</li>
<li>Dies ermöglicht es Ihnen, Skripte, Stile oder andere Elemente hinzuzufügen, ohne den Code Ihrer Anwendung ändern zu müssen.</li>
</ol>
<h3 id="wie-man-es-benutzt_9">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die HTML-Injection-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Bereiten Sie Ihren benutzerdefinierten HTML-Code vor:</strong> Entscheiden Sie, welchen HTML-Code Sie in Ihre Seiten einfügen möchten.</li>
<li><strong>Wählen Sie die Einfügeorte:</strong> Bestimmen Sie, ob Sie Code im <code>&lt;head&gt;</code>-Bereich, im <code>&lt;body&gt;</code>-Bereich oder in beiden einfügen müssen.</li>
<li><strong>Konfigurieren Sie die Einstellungen:</strong> Fügen Sie Ihren benutzerdefinierten HTML-Code zu den entsprechenden Einstellungen (<code>INJECT_HEAD</code> und/oder <code>INJECT_BODY</code>) hinzu.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration wird der HTML-Code automatisch in alle ausgelieferten HTML-Seiten eingefügt.</li>
</ol>
<h3 id="konfigurationseinstellungen_10">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INJECT_HEAD</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Head-HTML-Code:</strong> Der HTML-Code, der vor dem <code>&lt;/head&gt;</code>-Tag eingefügt wird.</td>
</tr>
<tr>
<td><code>INJECT_BODY</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Body-HTML-Code:</strong> Der HTML-Code, der vor dem <code>&lt;/body&gt;</code>-Tag eingefügt wird.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Bewährte Praktiken" - Aus Leistungsgründen sollten Sie JavaScript-Dateien am Ende des Body platzieren, um das Rendern nicht zu blockieren. - Platzieren Sie CSS und kritisches JavaScript im Head-Bereich, um ein Aufblitzen von ungestyltem Inhalt zu vermeiden. - Seien Sie vorsichtig mit eingefügtem Inhalt, der die Funktionalität Ihrer Website beeinträchtigen könnte.</p>
<p>!!! info "Häufige Anwendungsfälle" - Hinzufügen von Analyses-Skripten (wie Google Analytics, Matomo) - Integration von Chat-Widgets oder Kundensupport-Tools - Einbinden von Tracking-Pixeln für Marketingkampagnen - Hinzufügen von benutzerdefinierten CSS-Stilen oder JavaScript-Funktionen - Einbinden von Bibliotheken von Drittanbietern, ohne den Anwendungscode zu ändern</p>
<h3 id="beispielkonfigurationen_9">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="54:4"><input checked="checked" id="__tabbed_54_1" name="__tabbed_54" type="radio" /><input id="__tabbed_54_2" name="__tabbed_54" type="radio" /><input id="__tabbed_54_3" name="__tabbed_54" type="radio" /><input id="__tabbed_54_4" name="__tabbed_54" type="radio" /><div class="tabbed-labels"><label for="__tabbed_54_1">Google Analytics</label><label for="__tabbed_54_2">Benutzerdefinierte Stile</label><label for="__tabbed_54_3">Mehrere Integrationen</label><label for="__tabbed_54_4">Cookie-Einwilligungsbanner</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Hinzufügen von Google-Analytics-Tracking zu Ihrer Website:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;script</span><span class="nv"> </span><span class="s">async</span><span class="nv"> </span><span class="s">src=\&quot;https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\&quot;&gt;&lt;/script&gt;&lt;script&gt;window.dataLayer</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">window.dataLayer</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">[];function</span><span class="nv"> </span><span class="s">gtag(){dataLayer.push(arguments);}gtag(&#39;js&#39;,</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">Date());gtag(&#39;config&#39;,</span><span class="nv"> </span><span class="s">&#39;G-XXXXXXXXXX&#39;);&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Hinzufügen von benutzerdefinierten CSS-Stilen zu Ihrer Website:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.custom-element</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">blue;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Hinzufügen von sowohl benutzerdefinierten Stilen als auch JavaScript:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.notification-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f8f9fa;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;script</span><span class="nv"> </span><span class="s">src=\&quot;https://cdn.example.com/js/widget.js\&quot;&gt;&lt;/script&gt;&lt;script&gt;initializeWidget(&#39;your-api-key&#39;);&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Hinzufügen eines einfachen Cookie-Einwilligungsbanners:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;.cookie-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">position:</span><span class="nv"> </span><span class="s">fixed;</span><span class="nv"> </span><span class="s">bottom:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">left:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">right:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f1f1f1;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">z-index:</span><span class="nv"> </span><span class="s">1000;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.cookie-banner</span><span class="nv"> </span><span class="s">button</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#4CAF50;</span><span class="nv"> </span><span class="s">border:</span><span class="nv"> </span><span class="s">none;</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">white;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">cursor:</span><span class="nv"> </span><span class="s">pointer;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;div</span><span class="nv"> </span><span class="s">id=\&quot;cookie-banner\&quot;</span><span class="nv"> </span><span class="s">class=\&quot;cookie-banner\&quot;&gt;Diese</span><span class="nv"> </span><span class="s">Website</span><span class="nv"> </span><span class="s">verwendet</span><span class="nv"> </span><span class="s">Cookies,</span><span class="nv"> </span><span class="s">um</span><span class="nv"> </span><span class="s">sicherzustellen,</span><span class="nv"> </span><span class="s">dass</span><span class="nv"> </span><span class="s">Sie</span><span class="nv"> </span><span class="s">das</span><span class="nv"> </span><span class="s">beste</span><span class="nv"> </span><span class="s">Erlebnis</span><span class="nv"> </span><span class="s">erhalten.</span><span class="nv"> </span><span class="s">&lt;button</span><span class="nv"> </span><span class="s">onclick=\&quot;acceptCookies()\&quot;&gt;Akzeptieren&lt;/button&gt;&lt;/div&gt;&lt;script&gt;function</span><span class="nv"> </span><span class="s">acceptCookies()</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(&#39;cookie-banner&#39;).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">localStorage.setItem(&#39;cookies-accepted&#39;,</span><span class="nv"> </span><span class="s">&#39;true&#39;);</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">if(localStorage.getItem(&#39;cookies-accepted&#39;)</span><span class="nv"> </span><span class="s">===</span><span class="nv"> </span><span class="s">&#39;true&#39;)</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(&#39;cookie-banner&#39;).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">}&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="headers">Headers</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>HTTP-Header spielen eine entscheidende Rolle bei der Sicherheit. Das Headers-Plugin bietet eine robuste Verwaltung von Standard- und benutzerdefinierten HTTP-Headern und verbessert so Sicherheit und Funktionalität. Es wendet dynamisch Sicherheitsmaßnahmen an, wie <a href="https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Strict-Transport-Security">HSTS</a>, <a href="https://developer.mozilla.org/de/docs/Web/HTTP/CSP">CSP</a> (einschließlich eines reinen Berichtsmodus) und die Injektion benutzerdefinierter Header, während es gleichzeitig Informationslecks verhindert.</p>
<p><strong>Wie es funktioniert</strong></p>
<ol>
<li>Wenn ein Client Inhalte von Ihrer Website anfordert, verarbeitet BunkerWeb die Antwort-Header.</li>
<li>Sicherheits-Header werden gemäß Ihrer Konfiguration angewendet.</li>
<li>Benutzerdefinierte Header können hinzugefügt werden, um Clients zusätzliche Informationen oder Funktionen bereitzustellen.</li>
<li>Unerwünschte Header, die Serverinformationen preisgeben könnten, werden automatisch entfernt.</li>
<li>Cookies werden so geändert, dass sie je nach Ihren Einstellungen die entsprechenden Sicherheitsflags enthalten.</li>
<li>Header von Upstream-Servern können bei Bedarf selektiv beibehalten werden.</li>
</ol>
<h3 id="wie-man-es-benutzt_10">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Headers-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Sicherheits-Header konfigurieren:</strong> Legen Sie Werte für gängige Header fest.</li>
<li><strong>Benutzerdefinierte Header hinzufügen:</strong> Definieren Sie beliebige benutzerdefinierte Header mit der Einstellung <code>CUSTOM_HEADER</code>.</li>
<li><strong>Unerwünschte Header entfernen:</strong> Verwenden Sie <code>REMOVE_HEADERS</code>, um sicherzustellen, dass Header, die Serverdetails preisgeben könnten, entfernt werden.</li>
<li><strong>Cookie-Sicherheit einstellen:</strong> Aktivieren Sie eine robuste Cookie-Sicherheit, indem Sie <code>COOKIE_FLAGS</code> konfigurieren und <code>COOKIE_AUTO_SECURE_FLAG</code> auf <code>yes</code> setzen, damit das Secure-Flag bei HTTPS-Verbindungen automatisch hinzugefügt wird.</li>
<li><strong>Upstream-Header beibehalten:</strong> Geben Sie mit <code>KEEP_UPSTREAM_HEADERS</code> an, welche Upstream-Header beibehalten werden sollen.</li>
<li><strong>Bedingte Header-Anwendung nutzen:</strong> Wenn Sie Richtlinien ohne Unterbrechung testen möchten, aktivieren Sie den <a href="https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only">CSP Report-Only-Modus</a> über <code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code>.</li>
</ol>
<h3 id="konfigurationsleitfaden">Konfigurationsleitfaden</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="55:3"><input checked="checked" id="__tabbed_55_1" name="__tabbed_55" type="radio" /><input id="__tabbed_55_2" name="__tabbed_55" type="radio" /><input id="__tabbed_55_3" name="__tabbed_55" type="radio" /><div class="tabbed-labels"><label for="__tabbed_55_1">Sicherheits-Header</label><label for="__tabbed_55_2">Cookie-Einstellungen</label><label for="__tabbed_55_3">Benutzerdefinierte Header</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Überblick</strong></p>
<p>Sicherheits-Header erzwingen eine sichere Kommunikation, schränken das Laden von Ressourcen ein und verhindern Angriffe wie Clickjacking und Injection. Richtig konfigurierte Header bilden eine robuste Verteidigungsschicht für Ihre Website.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile von Sicherheits-Headern</p>
<ul>
<li><strong>HSTS:</strong> Stellt sicher, dass alle Verbindungen verschlüsselt sind, und schützt so vor Protokoll-Downgrade-Angriffen.</li>
<li><strong>CSP:</strong> Verhindert die Ausführung bösartiger Skripte und verringert so das Risiko von XSS-Angriffen.</li>
<li><strong>X-Frame-Options:</strong> Blockiert Clickjacking-Versuche durch die Kontrolle der Iframe-Einbettung.</li>
<li><strong>Referrer Policy:</strong> Begrenzt das Durchsickern sensibler Informationen über Referrer-Header.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>STRICT_TRANSPORT_SECURITY</code></td>
<td><code>max-age=63072000; includeSubDomains; preload</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HSTS:</strong> Erzwingt sichere HTTPS-Verbindungen und verringert das Risiko von Man-in-the-Middle-Angriffen.</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY</code></td>
<td><code>object-src 'none'; form-action 'self'; frame-ancestors 'self';</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>CSP:</strong> Beschränkt das Laden von Ressourcen auf vertrauenswürdige Quellen und mindert Cross-Site-Scripting- und Dateninjektionsangriffe.</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>CSP-Berichtsmodus:</strong> Meldet Verstöße, ohne Inhalte zu blockieren, und hilft beim Testen von Sicherheitsrichtlinien, während Protokolle erfasst werden.</td>
</tr>
<tr>
<td><code>X_FRAME_OPTIONS</code></td>
<td><code>SAMEORIGIN</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>X-Frame-Options:</strong> Verhindert Clickjacking, indem es steuert, ob Ihre Website in einem Frame dargestellt werden kann.</td>
</tr>
<tr>
<td><code>X_CONTENT_TYPE_OPTIONS</code></td>
<td><code>nosniff</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>X-Content-Type-Options:</strong> Verhindert, dass Browser MIME-Sniffing betreiben, und schützt so vor Drive-by-Download-Angriffen.</td>
</tr>
<tr>
<td><code>X_DNS_PREFETCH_CONTROL</code></td>
<td><code>off</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>X-DNS-Prefetch-Control:</strong> Reguliert das DNS-Prefetching, um unbeabsichtigte Netzwerkanfragen zu reduzieren und die Privatsphäre zu verbessern.</td>
</tr>
<tr>
<td><code>REFERRER_POLICY</code></td>
<td><code>strict-origin-when-cross-origin</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Referrer Policy:</strong> Steuert die Menge der gesendeten Referrer-Informationen und schützt die Privatsphäre der Benutzer.</td>
</tr>
<tr>
<td><code>PERMISSIONS_POLICY</code></td>
<td><code>accelerometer=(), ambient-light-sensor=(), attribution-reporting=(), autoplay=(), battery=(), ...</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Permissions Policy:</strong> Beschränkt den Zugriff auf Browserfunktionen und reduziert potenzielle Angriffsvektoren.</td>
</tr>
<tr>
<td><code>KEEP_UPSTREAM_HEADERS</code></td>
<td><code>Content-Security-Policy Permissions-Policy X-Frame-Options</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Header beibehalten:</strong> Behält ausgewählte Upstream-Header bei, was die Integration von Altsystemen erleichtert und gleichzeitig die Sicherheit aufrechterhält.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken</p>
<ul>
<li>Überprüfen und aktualisieren Sie Ihre Sicherheits-Header regelmäßig, um sie an die sich entwickelnden Sicherheitsstandards anzupassen.</li>
<li>Verwenden Sie Tools wie das <a href="https://observatory.mozilla.org/">Mozilla Observatory</a>, um Ihre Header-Konfiguration zu validieren.</li>
<li>Testen Sie CSP im <code>Report-Only</code>-Modus, bevor Sie es erzwingen, um zu vermeiden, dass die Funktionalität beeinträchtigt wird.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Überblick</strong></p>
<p>Richtige Cookie-Einstellungen gewährleisten sichere Benutzersitzungen, indem sie Hijacking, Fixierung und Cross-Site-Scripting verhindern. Sichere Cookies erhalten die Sitzungsintegrität über HTTPS und verbessern den allgemeinen Schutz der Benutzerdaten.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile sicherer Cookies</p>
<ul>
<li><strong>HttpOnly-Flag:</strong> Verhindert, dass clientseitige Skripte auf Cookies zugreifen, und mindert so XSS-Risiken.</li>
<li><strong>SameSite-Flag:</strong> Reduziert CSRF-Angriffe, indem die Verwendung von Cookies über verschiedene Ursprünge hinweg eingeschränkt wird.</li>
<li><strong>Secure-Flag:</strong> Stellt sicher, dass Cookies nur über verschlüsselte HTTPS-Verbindungen übertragen werden.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COOKIE_FLAGS</code></td>
<td><code>* HttpOnly SameSite=Lax</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Cookie-Flags:</strong> Fügt automatisch Sicherheitsflags wie HttpOnly und SameSite hinzu und schützt Cookies so vor dem Zugriff durch clientseitige Skripte und CSRF-Angriffe.</td>
</tr>
<tr>
<td><code>COOKIE_AUTO_SECURE_FLAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Automatisches Secure-Flag:</strong> Stellt sicher, dass Cookies nur über sichere HTTPS-Verbindungen gesendet werden, indem das Secure-Flag automatisch angehängt wird.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken</p>
<ul>
<li>Verwenden Sie <code>SameSite=Strict</code> für sensible Cookies, um den Zugriff über verschiedene Ursprünge hinweg zu verhindern.</li>
<li>Überprüfen Sie Ihre Cookie-Einstellungen regelmäßig, um die Einhaltung der Sicherheits- und Datenschutzbestimmungen sicherzustellen.</li>
<li>Vermeiden Sie es, Cookies ohne das Secure-Flag in Produktionsumgebungen zu setzen.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Überblick</strong></p>
<p>Benutzerdefinierte Header ermöglichen es Ihnen, spezifische HTTP-Header hinzuzufügen, um Anwendungs- oder Leistungsanforderungen zu erfüllen. Sie bieten Flexibilität, müssen aber sorgfältig konfiguriert werden, um die Preisgabe sensibler Serverdetails zu vermeiden.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile von benutzerdefinierten Headern</p>
<ul>
<li>Verbessern Sie die Sicherheit, indem Sie unnötige Header entfernen, die Serverdetails preisgeben könnten.</li>
<li>Fügen Sie anwendungsspezifische Header hinzu, um die Funktionalität oder das Debugging zu verbessern.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CUSTOM_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Benutzerdefinierter Header:</strong> Bietet eine Möglichkeit, benutzerdefinierte Header im Format <code>HeaderName: HeaderValue</code> für spezielle Sicherheits- oder Leistungsverbesserungen hinzuzufügen.</td>
</tr>
<tr>
<td><code>REMOVE_HEADERS</code></td>
<td><code>Server Expect-CT X-Powered-By X-AspNet-Version X-AspNetMvc-Version Public-Key-Pins</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Header entfernen:</strong> Gibt an, welche Header entfernt werden sollen, um die Wahrscheinlichkeit der Preisgabe interner Serverdetails und bekannter Schwachstellen zu verringern.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sicherheitsaspekte</p>
<ul>
<li>Vermeiden Sie die Preisgabe sensibler Informationen durch benutzerdefinierte Header.</li>
<li>Überprüfen und aktualisieren Sie benutzerdefinierte Header regelmäßig, um sie an die Anforderungen Ihrer Anwendung anzupassen.</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken</p>
<ul>
<li>Verwenden Sie <code>REMOVE_HEADERS</code>, um Header wie <code>Server</code> und <code>X-Powered-By</code> zu entfernen und so das Risiko des Fingerprintings zu verringern.</li>
<li>Testen Sie benutzerdefinierte Header in einer Staging-Umgebung, bevor Sie sie in der Produktion einsetzen.</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="beispielkonfigurationen_10">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="56:4"><input checked="checked" id="__tabbed_56_1" name="__tabbed_56" type="radio" /><input id="__tabbed_56_2" name="__tabbed_56" type="radio" /><input id="__tabbed_56_3" name="__tabbed_56" type="radio" /><input id="__tabbed_56_4" name="__tabbed_56" type="radio" /><div class="tabbed-labels"><label for="__tabbed_56_1">Grundlegende Sicherheits-Header</label><label for="__tabbed_56_2">Verbesserte Cookie-Sicherheit</label><label for="__tabbed_56_3">Benutzerdefinierte Header für API</label><label for="__tabbed_56_4">Content Security Policy - Berichtsmodus</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine Standardkonfiguration mit wesentlichen Sicherheits-Headern:</p>
<div class="highlight"><pre><span></span><code><span class="nt">STRICT_TRANSPORT_SECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max-age=63072000;</span><span class="nv"> </span><span class="s">includeSubDomains;</span><span class="nv"> </span><span class="s">preload&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;&quot;</span>
<span class="nt">X_FRAME_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SAMEORIGIN&quot;</span>
<span class="nt">X_CONTENT_TYPE_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nosniff&quot;</span>
<span class="nt">REFERRER_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;strict-origin-when-cross-origin&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit robusten Cookie-Sicherheitseinstellungen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">COOKIE_FLAGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict</span><span class="nv"> </span><span class="s">Max-Age=3600&quot;</span>
<span class="nt">COOKIE_AUTO_SECURE_FLAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für einen API-Dienst mit benutzerdefinierten Headern:</p>
<div class="highlight"><pre><span></span><code><span class="nt">CUSTOM_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API-Version:</span><span class="nv"> </span><span class="s">1.2.3&quot;</span>
<span class="nt">CUSTOM_HEADER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Max-Age:</span><span class="nv"> </span><span class="s">86400&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;none&#39;&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version</span><span class="nv"> </span><span class="s">X-Runtime&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration zum Testen von CSP, ohne die Funktionalität zu beeinträchtigen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">img-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">https://*.example.com;</span><span class="nv"> </span><span class="s">style-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">&#39;unsafe-inline&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">connect-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://api.example.com;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">form-action</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">base-uri</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">report-uri</span><span class="nv"> </span><span class="s">https://example.com/csp-reports&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY_REPORT_ONLY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="lets-encrypt">Let's Encrypt</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Let's Encrypt-Plugin vereinfacht die Verwaltung von SSL/TLS-Zertifikaten durch die Automatisierung der Erstellung, Erneuerung und Konfiguration von kostenlosen Zertifikaten von Let's Encrypt. Diese Funktion ermöglicht sichere HTTPS-Verbindungen für Ihre Websites ohne die Komplexität der manuellen Zertifikatsverwaltung, was sowohl Kosten als auch administrativen Aufwand reduziert.</p>
<p><strong>Wie es funktioniert:</strong></p>
<ol>
<li>Nach der Aktivierung erkennt BunkerWeb automatisch die für Ihre Website konfigurierten Domains.</li>
<li>BunkerWeb beantragt kostenlose SSL/TLS-Zertifikate bei der Zertifizierungsstelle von Let's Encrypt.</li>
<li>Der Domainbesitz wird entweder durch HTTP-Challenges (Nachweis, dass Sie die Website kontrollieren) oder DNS-Challenges (Nachweis, dass Sie die DNS Ihrer Domain kontrollieren) verifiziert.</li>
<li>Zertifikate werden automatisch für Ihre Domains installiert und konfiguriert.</li>
<li>BunkerWeb kümmert sich im Hintergrund um die Erneuerung der Zertifikate vor deren Ablauf und gewährleistet so eine kontinuierliche HTTPS-Verfügbarkeit.</li>
<li>Der gesamte Prozess ist vollständig automatisiert und erfordert nach der Ersteinrichtung nur minimale Eingriffe.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Voraussetzungen</p>
</div>
<p>Um diese Funktion nutzen zu können, stellen Sie sicher, dass für jede Domain korrekte DNS-<strong>A-Einträge</strong> konfiguriert sind, die auf die öffentliche(n) IP(s) verweisen, unter der/denen BunkerWeb erreichbar ist. Ohne korrekte DNS-Konfiguration schlägt der Domain-Verifizierungsprozess fehl.</p>
<h3 id="wie-man-es-benutzt_11">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Let's Encrypt-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Setzen Sie die Einstellung <code>AUTO_LETS_ENCRYPT</code> auf <code>yes</code>, um die automatische Ausstellung und Erneuerung von Zertifikaten zu aktivieren.</li>
<li><strong>Geben Sie eine Kontakt-E-Mail an:</strong> Geben Sie Ihre E-Mail-Adresse in der Einstellung <code>EMAIL_LETS_ENCRYPT</code> ein, um wichtige Benachrichtigungen über Ihre Zertifikate zu erhalten.</li>
<li><strong>Wählen Sie den Challenge-Typ:</strong> Wählen Sie entweder die <code>http</code>- oder <code>dns</code>-Verifizierung mit der Einstellung <code>LETS_ENCRYPT_CHALLENGE</code>.</li>
<li><strong>DNS-Anbieter konfigurieren:</strong> Wenn Sie DNS-Challenges verwenden, geben Sie Ihren DNS-Anbieter und Ihre Anmeldeinformationen an.</li>
<li><strong>Zertifikatsprofil auswählen:</strong> Wählen Sie Ihr bevorzugtes Zertifikatsprofil mit der Einstellung <code>LETS_ENCRYPT_PROFILE</code> (classic, tlsserver oder shortlived).</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration werden Zertifikate automatisch ausgestellt, installiert und bei Bedarf erneuert.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Zertifikatsprofile</p>
</div>
<p>Let's Encrypt bietet verschiedene Zertifikatsprofile für unterschiedliche Anwendungsfälle: - <strong>classic</strong>: Allzweck-Zertifikate mit 90-tägiger Gültigkeit (Standard) - <strong>tlsserver</strong>: Optimiert für die TLS-Server-Authentifizierung mit 90-tägiger Gültigkeit und kleinerem Payload - <strong>shortlived</strong>: Erhöhte Sicherheit mit 7-tägiger Gültigkeit für automatisierte Umgebungen - <strong>custom</strong>: Wenn Ihr ACME-Server ein anderes Profil unterstützt, legen Sie es mit <code>LETS_ENCRYPT_CUSTOM_PROFILE</code> fest.</p>
<div class="admonition info">
<p class="admonition-title">Profilverfügbarkeit</p>
</div>
<p>Beachten Sie, dass die Profile <code>tlsserver</code> und <code>shortlived</code> derzeit möglicherweise nicht in allen Umgebungen oder mit allen ACME-Clients verfügbar sind. Das <code>classic</code>-Profil hat die breiteste Kompatibilität und wird für die meisten Benutzer empfohlen. Wenn ein ausgewähltes Profil nicht verfügbar ist, greift das System automatisch auf das <code>classic</code>-Profil zurück.</p>
<h3 id="konfigurationseinstellungen_11">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTO_LETS_ENCRYPT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Let's Encrypt aktivieren:</strong> Auf <code>yes</code> setzen, um die automatische Ausstellung und Erneuerung von Zertifikaten zu aktivieren.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PASSTHROUGH</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Let's Encrypt durchleiten:</strong> Auf <code>yes</code> setzen, um Let's Encrypt-Anfragen an den Webserver weiterzuleiten. Dies ist nützlich, wenn BunkerWeb hinter einem anderen Reverse-Proxy mit SSL-Handling steht.</td>
</tr>
<tr>
<td><code>EMAIL_LETS_ENCRYPT</code></td>
<td><code>contact@{FIRST_SERVER}</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Kontakt-E-Mail:</strong> E-Mail-Adresse, die für Let's Encrypt-Benachrichtigungen verwendet und in Zertifikate aufgenommen wird.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CHALLENGE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Challenge-Typ:</strong> Methode zur Überprüfung des Domainbesitzes. Optionen: <code>http</code> oder <code>dns</code>.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROVIDER</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>DNS-Anbieter:</strong> Bei Verwendung von DNS-Challenges der zu verwendende DNS-Anbieter (z.B. cloudflare, route53, digitalocean).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROPAGATION</code></td>
<td><code>default</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>DNS-Propagation:</strong> Die Wartezeit für die DNS-Propagation in Sekunden. Wenn kein Wert angegeben wird, wird die Standard-Propagationszeit des Anbieters verwendet.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Anmeldeinformationselement:</strong> Konfigurationselemente für die Authentifizierung des DNS-Anbieters (z. B. <code>cloudflare_api_token 123456</code>). Werte können Rohtext, base64-kodiert oder ein JSON-Objekt sein.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_WILDCARD</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Wildcard-Zertifikate:</strong> Wenn auf <code>yes</code> gesetzt, werden Wildcard-Zertifikate für alle Domains erstellt. Nur mit DNS-Challenges verfügbar.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_STAGING</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Staging verwenden:</strong> Wenn auf <code>yes</code> gesetzt, wird die Staging-Umgebung von Let's Encrypt zum Testen verwendet. Staging hat höhere Ratenbegrenzungen, aber die Zertifikate sind nicht vertrauenswürdig.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CLEAR_OLD_CERTS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Alte Zertifikate löschen:</strong> Wenn auf <code>yes</code> gesetzt, werden alte Zertifikate, die bei der Erneuerung nicht mehr benötigt werden, entfernt.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PROFILE</code></td>
<td><code>classic</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Zertifikatsprofil:</strong> Wählen Sie das zu verwendende Zertifikatsprofil aus. Optionen: <code>classic</code> (Allzweck), <code>tlsserver</code> (optimiert für TLS-Server) oder <code>shortlived</code> (7-Tage-Zertifikate).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CUSTOM_PROFILE</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Benutzerdefiniertes Zertifikatsprofil:</strong> Geben Sie ein benutzerdefiniertes Zertifikatsprofil ein, wenn Ihr ACME-Server nicht standardmäßige Profile unterstützt. Dies überschreibt <code>LETS_ENCRYPT_PROFILE</code>, falls gesetzt.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_MAX_RETRIES</code></td>
<td><code>3</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Maximale Wiederholungen:</strong> Anzahl der Wiederholungsversuche bei der Zertifikatserstellung bei einem Fehler. Auf <code>0</code> setzen, um Wiederholungen zu deaktivieren. Nützlich bei temporären Netzwerkproblemen.</td>
</tr>
</tbody>
</table>
<p>!!! info "Informationen und Verhalten" - Die Einstellung <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> ist eine Mehrfacheinstellung und kann verwendet werden, um mehrere Elemente für den DNS-Anbieter festzulegen. Die Elemente werden als Cache-Datei gespeichert, und Certbot liest die Anmeldeinformationen daraus. - Wenn keine <code>LETS_ENCRYPT_DNS_PROPAGATION</code>-Einstellung angegeben ist, wird die Standard-Propagationszeit des Anbieters verwendet. - Die vollständige Let's Encrypt-Automatisierung mit der <code>http</code>-Challenge funktioniert im Stream-Modus, solange Sie den Port <code>80/tcp</code> von außen öffnen. Verwenden Sie die Einstellung <code>LISTEN_STREAM_PORT_SSL</code>, um Ihren SSL/TLS-Listening-Port zu wählen. - Wenn <code>LETS_ENCRYPT_PASSTHROUGH</code> auf <code>yes</code> gesetzt ist, behandelt BunkerWeb die ACME-Challenge-Anfragen nicht selbst, sondern leitet sie an den Backend-Webserver weiter. Dies ist nützlich in Szenarien, in denen BunkerWeb als Reverse-Proxy vor einem anderen Server fungiert, der für die Verarbeitung von Let's Encrypt-Challenges konfiguriert ist.</p>
<div class="admonition tip">
<p class="admonition-title">HTTP- vs. DNS-Challenges</p>
</div>
<p><strong>HTTP-Challenges</strong> sind einfacher einzurichten und funktionieren für die meisten Websites gut:</p>
<pre><code>- Erfordert, dass Ihre Website öffentlich auf Port 80 erreichbar ist
- Wird automatisch von BunkerWeb konfiguriert
- Kann nicht für Wildcard-Zertifikate verwendet werden

**DNS-Challenges** bieten mehr Flexibilität und sind für Wildcard-Zertifikate erforderlich:

- Funktioniert auch, wenn Ihre Website nicht öffentlich erreichbar ist
- Erfordert API-Anmeldeinformationen des DNS-Anbieters
- Erforderlich für Wildcard-Zertifikate (z. B. *.example.com)
- Nützlich, wenn Port 80 blockiert oder nicht verfügbar ist
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Wildcard-Zertifikate</p>
</div>
<p>Wildcard-Zertifikate sind nur mit DNS-Challenges verfügbar. Wenn Sie sie verwenden möchten, müssen Sie die Einstellung <code>USE_LETS_ENCRYPT_WILDCARD</code> auf <code>yes</code> setzen und Ihre DNS-Anbieter-Anmeldeinformationen korrekt konfigurieren.</p>
<div class="admonition warning">
<p class="admonition-title">Ratenbegrenzungen</p>
</div>
<p>Let's Encrypt hat Ratenbegrenzungen für die Ausstellung von Zertifikaten. Verwenden Sie beim Testen von Konfigurationen die Staging-Umgebung, indem Sie <code>USE_LETS_ENCRYPT_STAGING</code> auf <code>yes</code> setzen, um zu vermeiden, dass Sie die Produktions-Ratenbegrenzungen erreichen. Staging-Zertifikate sind von Browsern nicht vertrauenswürdig, aber nützlich zur Validierung Ihrer Einrichtung.</p>
<h3 id="unterstutzte-dns-anbieter">Unterstützte DNS-Anbieter</h3>
<p>Das Let's Encrypt-Plugin unterstützt eine breite Palette von DNS-Anbietern für DNS-Challenges. Jeder Anbieter benötigt spezifische Anmeldeinformationen, die über die Einstellung <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> bereitgestellt werden müssen.</p>
<table>
<thead>
<tr>
<th>Anbieter</th>
<th>Beschreibung</th>
<th>Obligatorische Einstellungen</th>
<th>Optionale Einstellungen</th>
<th>Dokumentation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bunny</code></td>
<td>bunny.net</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://github.com/mwt/certbot-dns-bunny/blob/main/README.rst">Dokumentation</a></td>
</tr>
<tr>
<td><code>cloudflare</code></td>
<td>Cloudflare</td>
<td>entweder <code>api_token</code><br>oder <code>email</code> und <code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-cloudflare.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>desec</code></td>
<td>deSEC</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/desec-io/certbot-dns-desec/blob/main/README.md">Dokumentation</a></td>
</tr>
<tr>
<td><code>digitalocean</code></td>
<td>DigitalOcean</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-digitalocean.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>domainoffensive</code></td>
<td>Domain-Offensive</td>
<td><code>api_token</code></td>
<td></td>
<td><a href="https://github.com/domainoffensive/certbot-dns-domainoffensive/blob/master/README.md">Dokumentation</a></td>
</tr>
<tr>
<td><code>dnsimple</code></td>
<td>DNSimple</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsimple.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>dnsmadeeasy</code></td>
<td>DNS Made Easy</td>
<td><code>api_key</code><br><code>secret_key</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsmadeeasy.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>dynu</code></td>
<td>Dynu</td>
<td><code>auth_token</code></td>
<td></td>
<td><a href="https://github.com/bikram990/certbot-dns-dynu/blob/main/README.md">Dokumentation</a></td>
</tr>
<tr>
<td><code>gehirn</code></td>
<td>Gehirn DNS</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-gehirn.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>google</code></td>
<td>Google Cloud</td>
<td><code>project_id</code><br><code>private_key_id</code><br><code>private_key</code><br><code>client_email</code><br><code>client_id</code><br><code>client_x509_cert_url</code></td>
<td><code>type</code> (Standard: <code>service_account</code>)<br><code>auth_uri</code> (Standard: <code>https://accounts.google.com/o/oauth2/auth</code>)<br><code>token_uri</code> (Standard: <code>https://accounts.google.com/o/oauth2/token</code>)<br><code>auth_provider_x509_cert_url</code> (Standard: <code>https://www.googleapis.com/oauth2/v1/certs</code>)</td>
<td><a href="https://certbot-dns-google.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>infomaniak</code></td>
<td>Infomaniak</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/infomaniak/certbot-dns-infomaniak/blob/main/README.rst">Dokumentation</a></td>
</tr>
<tr>
<td><code>ionos</code></td>
<td>IONOS</td>
<td><code>prefix</code><br><code>secret</code></td>
<td><code>endpoint</code> (Standard: <code>https://api.hosting.ionos.com</code>)</td>
<td><a href="https://github.com/helgeerbe/certbot-dns-ionos/blob/master/README.md">Dokumentation</a></td>
</tr>
<tr>
<td><code>linode</code></td>
<td>Linode</td>
<td><code>key</code></td>
<td></td>
<td><a href="https://certbot-dns-linode.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>luadns</code></td>
<td>LuaDNS</td>
<td><code>email</code><br><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-luadns.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>njalla</code></td>
<td>Njalla</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/chaptergy/certbot-dns-njalla/blob/main/README.md">Dokumentation</a></td>
</tr>
<tr>
<td><code>nsone</code></td>
<td>NS1</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-nsone.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>ovh</code></td>
<td>OVH</td>
<td><code>application_key</code><br><code>application_secret</code><br><code>consumer_key</code></td>
<td><code>endpoint</code> (Standard: <code>ovh-eu</code>)</td>
<td><a href="https://certbot-dns-ovh.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>rfc2136</code></td>
<td>RFC 2136</td>
<td><code>server</code><br><code>name</code><br><code>secret</code></td>
<td><code>port</code> (Standard: <code>53</code>)<br><code>algorithm</code> (Standard: <code>HMAC-SHA512</code>)<br><code>sign_query</code> (Standard: <code>false</code>)</td>
<td><a href="https://certbot-dns-rfc2136.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>route53</code></td>
<td>Amazon Route 53</td>
<td><code>access_key_id</code><br><code>secret_access_key</code></td>
<td></td>
<td><a href="https://certbot-dns-route53.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>sakuracloud</code></td>
<td>Sakura Cloud</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-sakuracloud.readthedocs.io/en/stable/">Dokumentation</a></td>
</tr>
<tr>
<td><code>scaleway</code></td>
<td>Scaleway</td>
<td><code>application_token</code></td>
<td></td>
<td><a href="https://github.com/vanonox/certbot-dns-scaleway/blob/main/README.rst">Dokumentation</a></td>
</tr>
</tbody>
</table>
<h3 id="beispielkonfigurationen_11">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="57:6"><input checked="checked" id="__tabbed_57_1" name="__tabbed_57" type="radio" /><input id="__tabbed_57_2" name="__tabbed_57" type="radio" /><input id="__tabbed_57_3" name="__tabbed_57" type="radio" /><input id="__tabbed_57_4" name="__tabbed_57" type="radio" /><input id="__tabbed_57_5" name="__tabbed_57" type="radio" /><input id="__tabbed_57_6" name="__tabbed_57" type="radio" /><div class="tabbed-labels"><label for="__tabbed_57_1">Grundlegende HTTP-Challenge</label><label for="__tabbed_57_2">Cloudflare DNS mit Wildcard</label><label for="__tabbed_57_3">AWS Route53-Konfiguration</label><label for="__tabbed_57_4">Testen mit Staging-Umgebung und Wiederholungen</label><label for="__tabbed_57_5">DigitalOcean mit benutzerdefinierter Propagationszeit</label><label for="__tabbed_57_6">Google Cloud DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Einfache Konfiguration mit HTTP-Challenges für eine einzelne Domain:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für Wildcard-Zertifikate mit Cloudflare DNS:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cloudflare&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api_token</span><span class="nv"> </span><span class="s">IHR_API_TOKEN&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_WILDCARD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit Amazon Route53 für DNS-Challenges:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;route53&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_access_key_id</span><span class="nv"> </span><span class="s">IHR_ZUGRIFFSSCHLUESSEL&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_secret_access_key</span><span class="nv"> </span><span class="s">IHR_GEHEIMSCHLUESSEL&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration zum Testen der Einrichtung mit der Staging-Umgebung und erweiterten Wiederholungseinstellungen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_STAGING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LETS_ENCRYPT_MAX_RETRIES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit DigitalOcean DNS mit einer längeren Propagationswartezeit:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;digitalocean&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;token</span><span class="nv"> </span><span class="s">IHR_API_TOKEN&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROPAGATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit Google Cloud DNS mit Anmeldeinformationen für ein Dienstkonto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;google&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;project_id</span><span class="nv"> </span><span class="s">ihre-projekt-id&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key_id</span><span class="nv"> </span><span class="s">ihre-private-key-id&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key</span><span class="nv"> </span><span class="s">ihr-private-key&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_email</span><span class="nv"> </span><span class="s">ihre-dienstkonto-email&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_5</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_id</span><span class="nv"> </span><span class="s">ihre-client-id&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_6</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_x509_cert_url</span><span class="nv"> </span><span class="s">ihre-zertifikats-url&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="limit">Limit</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Limit-Plugin in BunkerWeb bietet robuste Funktionen zur Durchsetzung von Begrenzungsrichtlinien auf Ihrer Website, um eine faire Nutzung zu gewährleisten und Ihre Ressourcen vor Missbrauch, Denial-of-Service-Angriffen und übermäßigem Ressourcenverbrauch zu schützen. Diese Richtlinien umfassen:</p>
<ul>
<li><strong>Anzahl der Verbindungen pro IP-Adresse</strong> (STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" />)</li>
<li><strong>Anzahl der Anfragen pro IP-Adresse und URL innerhalb eines bestimmten Zeitraums</strong> (STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" />)</li>
</ul>
<h3 id="wie-es-funktioniert">Wie es funktioniert</h3>
<ol>
<li><strong>Ratenbegrenzung:</strong> Verfolgt die Anzahl der Anfragen von jeder Client-IP-Adresse an bestimmte URLs. Wenn ein Client die konfigurierte Ratenbegrenzung überschreitet, werden nachfolgende Anfragen vorübergehend abgelehnt.</li>
<li><strong>Verbindungsbegrenzung:</strong> Überwacht und beschränkt die Anzahl der gleichzeitigen Verbindungen von jeder Client-IP-Adresse. Je nach verwendetem Protokoll (HTTP/1, HTTP/2, HTTP/3 oder Stream) können unterschiedliche Verbindungsgrenzen angewendet werden.</li>
<li>In beiden Fällen erhalten Clients, die die definierten Grenzwerte überschreiten, den HTTP-Statuscode <strong>„429 - Too Many Requests“</strong>, was hilft, eine Serverüberlastung zu verhindern.</li>
</ol>
<h3 id="schritte-zur-verwendung">Schritte zur Verwendung</h3>
<ol>
<li><strong>Anforderungsratenbegrenzung aktivieren:</strong> Verwenden Sie <code>USE_LIMIT_REQ</code>, um die Anforderungsratenbegrenzung zu aktivieren und URL-Muster zusammen mit ihren entsprechenden Ratenbegrenzungen zu definieren.</li>
<li><strong>Verbindungsbegrenzung aktivieren:</strong> Verwenden Sie <code>USE_LIMIT_CONN</code>, um die Verbindungsbegrenzung zu aktivieren und die maximale Anzahl gleichzeitiger Verbindungen für verschiedene Protokolle festzulegen.</li>
<li><strong>Granulare Kontrolle anwenden:</strong> Erstellen Sie mehrere Ratenbegrenzungsregeln für verschiedene URLs, um unterschiedliche Schutzniveaus auf Ihrer gesamten Website bereitzustellen.</li>
<li><strong>Wirksamkeit überwachen:</strong> Verwenden Sie die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um Statistiken über begrenzte Anfragen und Verbindungen anzuzeigen.</li>
</ol>
<h3 id="konfigurationseinstellungen_12">Konfigurationseinstellungen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="58:1"><input checked="checked" id="__tabbed_58_1" name="__tabbed_58" type="radio" /><div class="tabbed-labels"><label for="__tabbed_58_1">Anforderungsratenbegrenzung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_REQ</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Anforderungsbegrenzung aktivieren:</strong> Auf <code>yes</code> setzen, um die Funktion zur Ratenbegrenzung von Anfragen zu aktivieren.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>URL-Muster:</strong> URL-Muster (PCRE-Regex), auf das die Ratenbegrenzung angewendet wird; verwenden Sie <code>/</code>, um es für alle Anfragen anzuwenden.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_RATE</code></td>
<td><code>2r/s</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Ratenbegrenzung:</strong> Maximale Anfragerate im Format <code>Nr/t</code>, wobei N die Anzahl der Anfragen und t die Zeiteinheit ist: s (Sekunde), m (Minute), h (Stunde) oder d (Tag).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Format der Ratenbegrenzung</p>
</div>
<p>Das Format der Ratenbegrenzung wird als <code>Nr/t</code> angegeben, wobei:</p>
<pre><code>- `N` die Anzahl der erlaubten Anfragen ist
- `r` ein literales 'r' ist (für 'requests')
- `/` ein literaler Schrägstrich ist
- `t` die Zeiteinheit ist: `s` (Sekunde), `m` (Minute), `h` (Stunde) oder `d` (Tag)

Zum Beispiel bedeutet `5r/m`, dass 5 Anfragen pro Minute von jeder IP-Adresse erlaubt sind.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="59:1"><input checked="checked" id="__tabbed_59_1" name="__tabbed_59" type="radio" /><div class="tabbed-labels"><label for="__tabbed_59_1">Verbindungsbegrenzung</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_CONN</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Verbindungsbegrenzung aktivieren:</strong> Auf <code>yes</code> setzen, um die Funktion zur Verbindungsbegrenzung zu aktivieren.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP1</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP/1.X-Verbindungen:</strong> Maximale Anzahl gleichzeitiger HTTP/1.X-Verbindungen pro IP-Adresse.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP2</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP/2-Streams:</strong> Maximale Anzahl gleichzeitiger HTTP/2-Streams pro IP-Adresse.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP3</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP/3-Streams:</strong> Maximale Anzahl gleichzeitiger HTTP/3-Streams pro IP-Adresse.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_STREAM</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Stream-Verbindungen:</strong> Maximale Anzahl gleichzeitiger Stream-Verbindungen pro IP-Adresse.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Verbindungs- vs. Anforderungsbegrenzung</p>
</div>
<ul>
<li><strong>Verbindungsbegrenzung</strong> beschränkt die Anzahl der gleichzeitigen Verbindungen, die eine einzelne IP-Adresse aufrechterhalten kann.</li>
<li><strong>Anforderungsratenbegrenzung</strong> beschränkt die Anzahl der Anfragen, die eine IP-Adresse innerhalb eines definierten Zeitraums stellen kann.</li>
</ul>
<p>Die Verwendung beider Methoden bietet einen umfassenden Schutz gegen verschiedene Arten von Missbrauch.</p>
<div class="admonition warning">
<p class="admonition-title">Festlegen angemessener Grenzwerte</p>
</div>
<p>Zu restriktive Grenzwerte können legitime Benutzer beeinträchtigen, insbesondere bei HTTP/2 und HTTP/3, wo Browser oft mehrere Streams verwenden. Die Standardwerte sind für die meisten Anwendungsfälle ausgewogen, aber erwägen Sie, sie je nach den Bedürfnissen Ihrer Anwendung und dem Benutzerverhalten anzupassen.</p>
<h3 id="beispielkonfigurationen_12">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="60:4"><input checked="checked" id="__tabbed_60_1" name="__tabbed_60" type="radio" /><input id="__tabbed_60_2" name="__tabbed_60" type="radio" /><input id="__tabbed_60_3" name="__tabbed_60" type="radio" /><input id="__tabbed_60_4" name="__tabbed_60" type="radio" /><div class="tabbed-labels"><label for="__tabbed_60_1">Grundschutz</label><label for="__tabbed_60_2">Schutz spezifischer Endpunkte</label><label for="__tabbed_60_3">Konfiguration für eine Website mit hohem Verkehrsaufkommen</label><label for="__tabbed_60_4">Konfiguration für einen API-Server</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration mit Standardeinstellungen zum Schutz Ihrer gesamten Website:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit unterschiedlichen Ratenbegrenzungen für verschiedene Endpunkte:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Standardregel für alle Anfragen</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/s&quot;</span>

<span class="c1"># Strengere Begrenzung für die Anmeldeseite</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/login&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1r/s&quot;</span>

<span class="c1"># Strengere Begrenzung für die API</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die für Websites mit hohem Verkehrsaufkommen mit großzügigeren Grenzwerten optimiert ist:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Allgemeine Begrenzung</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30r/s&quot;</span>

<span class="c1"># Schutz des Admin-Bereichs</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/admin/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;50&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die für einen API-Server mit Ratenbegrenzungen in Anfragen pro Minute optimiert ist:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Öffentliche API-Endpunkte</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/public/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120r/m&quot;</span>

<span class="c1"># Private API-Endpunkte</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/private/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300r/m&quot;</span>

<span class="c1"># Authentifizierungsendpunkt</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/auth&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/m&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="load-balancer-pro">Load Balancer <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides load balancing feature to group of upstreams with optional healthchecks.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_DICT_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>nein</td>
<td>Shared dict size (datastore for all healthchecks).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_NAME</code></td>
<td></td>
<td>global</td>
<td>ja</td>
<td>Name of the upstream (used in REVERSE_PROXY_HOST).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_SERVERS</code></td>
<td></td>
<td>global</td>
<td>ja</td>
<td>List of servers/IPs in the server group.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_MODE</code></td>
<td><code>round-robin</code></td>
<td>global</td>
<td>ja</td>
<td>Load balancing mode (round-robin or sticky).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_STICKY_METHOD</code></td>
<td><code>ip</code></td>
<td>global</td>
<td>ja</td>
<td>Sticky session method (ip or cookie).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_RESOLVE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>ja</td>
<td>Dynamically resolve upstream hostnames.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>global</td>
<td>ja</td>
<td>Keepalive timeout for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIME</code></td>
<td><code>1h</code></td>
<td>global</td>
<td>ja</td>
<td>Keepalive time for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_URL</code></td>
<td><code>/status</code></td>
<td>global</td>
<td>ja</td>
<td>The healthcheck URL.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_INTERVAL</code></td>
<td><code>2000</code></td>
<td>global</td>
<td>ja</td>
<td>Healthcheck interval in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>ja</td>
<td>Healthcheck timeout in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_FALL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>ja</td>
<td>Number of failed healthchecks before marking the server as down.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_RISE</code></td>
<td><code>1</code></td>
<td>global</td>
<td>ja</td>
<td>Number of successful healthchecks before marking the server as up.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_VALID_STATUSES</code></td>
<td><code>200</code></td>
<td>global</td>
<td>ja</td>
<td>HTTP status considered valid in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_CONCURRENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>ja</td>
<td>Maximum number of concurrent healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TYPE</code></td>
<td><code>http</code></td>
<td>global</td>
<td>ja</td>
<td>Type of healthcheck (http or https).</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>ja</td>
<td>Verify SSL certificate in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_HOST</code></td>
<td></td>
<td>global</td>
<td>ja</td>
<td>Host header for healthchecks (useful for HTTPS).</td>
</tr>
</tbody>
</table>
<h2 id="metrics">Metrics</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Metrics-Plugin bietet umfassende Überwachungs- und Datenerfassungsfunktionen für Ihre BunkerWeb-Instanz. Mit dieser Funktion können Sie verschiedene Leistungsindikatoren, Sicherheitsereignisse und Systemstatistiken verfolgen und erhalten so wertvolle Einblicke in das Verhalten und den Zustand Ihrer geschützten Websites und Dienste.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>BunkerWeb erfasst während der Verarbeitung von Anfragen und Antworten wichtige Metriken.</li>
<li>Zu diesen Metriken gehören Zähler für blockierte Anfragen, Leistungsmessungen und verschiedene sicherheitsrelevante Statistiken.</li>
<li>Die Daten werden effizient im Speicher gespeichert, mit konfigurierbaren Grenzwerten, um eine übermäßige Ressourcennutzung zu verhindern.</li>
<li>Für Multi-Instanz-Setups kann Redis zur Zentralisierung und Aggregation von Metrikdaten verwendet werden.</li>
<li>Auf die erfassten Metriken kann über die API zugegriffen oder in der <a href="../web-ui/">Web-Benutzeroberfläche</a> visualisiert werden.</li>
<li>Diese Informationen helfen Ihnen, Sicherheitsbedrohungen zu identifizieren, Probleme zu beheben und Ihre Konfiguration zu optimieren.</li>
</ol>
<h3 id="technische-umsetzung">Technische Umsetzung</h3>
<p>Das Metrics-Plugin funktioniert durch:</p>
<ul>
<li>Verwendung gemeinsamer Wörterbücher in NGINX, wobei <code>metrics_datastore</code> für HTTP und <code>metrics_datastore_stream</code> für TCP/UDP-Verkehr verwendet wird</li>
<li>Nutzung eines LRU-Cache für eine effiziente In-Memory-Speicherung</li>
<li>Periodische Synchronisierung von Daten zwischen Workern mithilfe von Timern</li>
<li>Speicherung detaillierter Informationen über blockierte Anfragen, einschließlich der Client-IP-Adresse, des Landes, des Zeitstempels, der Anfragedetails und des Blockierungsgrunds</li>
<li>Unterstützung von Plugin-spezifischen Metriken über eine gemeinsame Schnittstelle zur Metrikerfassung</li>
<li>Bereitstellung von API-Endpunkten zur Abfrage erfasster Metriken</li>
</ul>
<h3 id="wie-man-es-benutzt_12">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Metrics-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die Metrikerfassung ist standardmäßig aktiviert. Sie können dies mit der Einstellung <code>USE_METRICS</code> steuern.</li>
<li><strong>Speicherzuweisung konfigurieren:</strong> Legen Sie die Speichermenge fest, die für die Metrikspeicherung zugewiesen werden soll, indem Sie die Einstellung <code>METRICS_MEMORY_SIZE</code> verwenden.</li>
<li><strong>Speichergrenzen festlegen:</strong> Definieren Sie, wie viele blockierte Anfragen pro Worker und in Redis mit den entsprechenden Einstellungen gespeichert werden sollen.</li>
<li><strong>Auf die Daten zugreifen:</strong> Sehen Sie sich die erfassten Metriken über die <a href="../web-ui/">Web-Benutzeroberfläche</a> oder API-Endpunkte an.</li>
<li><strong>Informationen analysieren:</strong> Verwenden Sie die gesammelten Daten, um Muster zu erkennen, Sicherheitsprobleme zu identifizieren und Ihre Konfiguration zu optimieren.</li>
</ol>
<h3 id="erfasste-metriken">Erfasste Metriken</h3>
<p>Das Metrics-Plugin erfasst die folgenden Informationen:</p>
<ol>
<li>
<p><strong>Blockierte Anfragen</strong>: Für jede blockierte Anfrage werden die folgenden Daten gespeichert:</p>
<ul>
<li>Anfrage-ID und Zeitstempel</li>
<li>Client-IP-Adresse und Land (sofern verfügbar)</li>
<li>HTTP-Methode und URL</li>
<li>HTTP-Statuscode</li>
<li>User-Agent</li>
<li>Blockierungsgrund und Sicherheitsmodus</li>
<li>Servername</li>
<li>Zusätzliche Daten im Zusammenhang mit dem Blockierungsgrund</li>
</ul>
</li>
<li>
<p><strong>Plugin-Zähler</strong>: Verschiedene Plugin-spezifische Zähler, die Aktivitäten und Ereignisse verfolgen.</p>
</li>
</ol>
<h3 id="api-zugriff">API-Zugriff</h3>
<p>Auf Metrikdaten kann über die internen API-Endpunkte von BunkerWeb zugegriffen werden:</p>
<ul>
<li><strong>Endpunkt</strong>: <code>/metrics/{filter}</code></li>
<li><strong>Methode</strong>: GET</li>
<li><strong>Beschreibung</strong>: Ruft Metrikdaten basierend auf dem angegebenen Filter ab</li>
<li><strong>Antwortformat</strong>: JSON-Objekt, das die angeforderten Metriken enthält</li>
</ul>
<p>Zum Beispiel gibt <code>/metrics/requests</code> Informationen über blockierte Anfragen zurück.</p>
<div class="admonition info">
<p class="admonition-title">Konfiguration des API-Zugriffs</p>
</div>
<p>Um über die API auf Metriken zuzugreifen, müssen Sie sicherstellen, dass:</p>
<pre><code>1. Die API-Funktion mit `USE_API: "yes"` aktiviert ist (standardmäßig aktiviert)
2. Ihre Client-IP in der Einstellung `API_WHITELIST_IP` enthalten ist (Standard ist `127.0.0.0/8`)
3. Sie auf die API über den konfigurierten Port zugreifen (Standard ist `5000` über die Einstellung `API_HTTP_PORT`)
4. Sie den korrekten `API_SERVER_NAME`-Wert im Host-Header verwenden (Standard ist `bwapi`)
5. Wenn `API_TOKEN` konfiguriert ist, fügen Sie `Authorization: Bearer &lt;token&gt;` in die Anfrage-Header ein.

Typische Anfragen:

Ohne Token (wenn `API_TOKEN` nicht gesetzt ist):
```bash
curl -H "Host: bwapi" \
     http://ihre-bunkerweb-instanz:5000/metrics/requests
```

Mit Token (wenn `API_TOKEN` gesetzt ist):
```bash
curl -H "Host: bwapi" \
     -H "Authorization: Bearer $API_TOKEN" \
     http://ihre-bunkerweb-instanz:5000/metrics/requests
```

Wenn Sie den `API_SERVER_NAME` auf einen anderen Wert als den Standard `bwapi` angepasst haben, verwenden Sie diesen Wert stattdessen im Host-Header.

Für sichere Produktionsumgebungen beschränken Sie den API-Zugriff auf vertrauenswürdige IPs und aktivieren Sie `API_TOKEN`.
</code></pre>
<h3 id="konfigurationseinstellungen_13">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_METRICS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Metriken aktivieren:</strong> Auf <code>yes</code> setzen, um die Erfassung und den Abruf von Metriken zu aktivieren.</td>
</tr>
<tr>
<td><code>METRICS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Speichergröße:</strong> Größe des internen Speichers für Metriken (z. B. <code>16m</code>, <code>32m</code>).</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Max. blockierte Anfragen:</strong> Maximale Anzahl blockierter Anfragen, die pro Worker gespeichert werden sollen.</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code></td>
<td><code>100000</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Max. Redis-blockierte Anfragen:</strong> Maximale Anzahl blockierter Anfragen, die in Redis gespeichert werden sollen.</td>
</tr>
<tr>
<td><code>METRICS_SAVE_TO_REDIS</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Metriken in Redis speichern:</strong> Auf <code>yes</code> setzen, um Metriken (Zähler und Tabellen) zur clusterweiten Aggregation in Redis zu speichern.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Dimensionierung der Speicherzuweisung</p>
</div>
<p>Die Einstellung <code>METRICS_MEMORY_SIZE</code> sollte basierend auf Ihrem Verkehrsaufkommen und der Anzahl der Instanzen angepasst werden. Bei stark frequentierten Websites sollten Sie diesen Wert erhöhen, um sicherzustellen, dass alle Metriken ohne Datenverlust erfasst werden.</p>
<div class="admonition info">
<p class="admonition-title">Redis-Integration</p>
</div>
<p>Wenn BunkerWeb für die Verwendung von <a href="#redis">Redis</a> konfiguriert ist, synchronisiert das Metrics-Plugin blockierte Anfragedaten automatisch mit dem Redis-Server. Dies bietet eine zentralisierte Ansicht von Sicherheitsereignissen über mehrere BunkerWeb-Instanzen hinweg.</p>
<div class="admonition warning">
<p class="admonition-title">Leistungsüberlegungen</p>
</div>
<p>Das Festlegen sehr hoher Werte für <code>METRICS_MAX_BLOCKED_REQUESTS</code> oder <code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code> kann den Speicherverbrauch erhöhen. Überwachen Sie Ihre Systemressourcen und passen Sie diese Werte entsprechend Ihren tatsächlichen Bedürfnissen und verfügbaren Ressourcen an.</p>
<div class="admonition note">
<p class="admonition-title">Worker-spezifischer Speicher</p>
</div>
<p>Jeder NGINX-Worker verwaltet seine eigenen Metriken im Speicher. Beim Zugriff auf Metriken über die API werden die Daten aller Worker automatisch aggregiert, um eine vollständige Ansicht zu erhalten.</p>
<h3 id="beispielkonfigurationen_13">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="61:4"><input checked="checked" id="__tabbed_61_1" name="__tabbed_61" type="radio" /><input id="__tabbed_61_2" name="__tabbed_61" type="radio" /><input id="__tabbed_61_3" name="__tabbed_61" type="radio" /><input id="__tabbed_61_4" name="__tabbed_61" type="radio" /><div class="tabbed-labels"><label for="__tabbed_61_1">Grundlegende Konfiguration</label><label for="__tabbed_61_2">Umgebung mit geringen Ressourcen</label><label for="__tabbed_61_3">Umgebung mit hohem Verkehrsaufkommen</label><label for="__tabbed_61_4">Metriken deaktiviert</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Standardkonfiguration, die für die meisten Bereitstellungen geeignet ist:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die für Umgebungen mit begrenzten Ressourcen optimiert ist:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für Websites mit hohem Verkehrsaufkommen, die mehr Sicherheitsereignisse verfolgen müssen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit deaktivierter Metrikerfassung:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="migration-pro">Migration <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Migration of BunkerWeb configuration between instances made easy via the web UI</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Plugin "Verschiedenes" (Miscellaneous) bietet <strong>wesentliche Grundeinstellungen</strong>, die helfen, die Sicherheit und Funktionalität Ihrer Website aufrechtzuerhalten. Diese Kernkomponente bietet umfassende Kontrollen für:</p>
<ul>
<li><strong>Serververhalten</strong> - Konfigurieren Sie, wie Ihr Server auf verschiedene Anfragen reagiert</li>
<li><strong>HTTP-Einstellungen</strong> - Verwalten Sie Methoden, Anforderungsgrößen und Protokolloptionen</li>
<li><strong>Dateiverwaltung</strong> - Steuern Sie die Bereitstellung statischer Dateien und optimieren Sie deren Auslieferung</li>
<li><strong>Protokollunterstützung</strong> - Aktivieren Sie moderne HTTP-Protokolle für eine bessere Leistung</li>
<li><strong>Systemkonfigurationen</strong> - Erweitern Sie die Funktionalität und verbessern Sie die Sicherheit</li>
</ul>
<p>Ob Sie HTTP-Methoden einschränken, Anforderungsgrößen verwalten, das Datei-Caching optimieren oder steuern müssen, wie Ihr Server auf verschiedene Anfragen reagiert, dieses Plugin gibt Ihnen die Werkzeuge, um <strong>das Verhalten Ihres Webdienstes feinabzustimmen</strong> und gleichzeitig Leistung und Sicherheit zu optimieren.</p>
<h3 id="hauptmerkmale">Hauptmerkmale</h3>
<table>
<thead>
<tr>
<th>Funktionskategorie</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Steuerung der HTTP-Methoden</strong></td>
<td>Definieren Sie, welche HTTP-Methoden für Ihre Anwendung zulässig sind</td>
</tr>
<tr>
<td><strong>Schutz des Standardservers</strong></td>
<td>Verhindern Sie unbefugten Zugriff durch falsche Hostnamen und erzwingen Sie SNI für sichere Verbindungen</td>
</tr>
<tr>
<td><strong>Verwaltung der Anforderungsgröße</strong></td>
<td>Legen Sie Grenzwerte für Client-Anforderungskörper und Datei-Uploads fest</td>
</tr>
<tr>
<td><strong>Bereitstellung statischer Dateien</strong></td>
<td>Konfigurieren und optimieren Sie die Auslieferung von statischen Inhalten aus benutzerdefinierten Stammordnern</td>
</tr>
<tr>
<td><strong>Datei-Caching</strong></td>
<td>Verbessern Sie die Leistung durch fortschrittliche Caching-Mechanismen für Dateideskriptoren</td>
</tr>
<tr>
<td><strong>Protokollunterstützung</strong></td>
<td>Konfigurieren Sie moderne HTTP-Protokolloptionen (HTTP2/HTTP3) und Alt-Svc-Porteinstellungen</td>
</tr>
<tr>
<td><strong>Anonyme Berichterstattung</strong></td>
<td>Optionale Nutzungsstatistik-Berichterstattung zur Verbesserung von BunkerWeb</td>
</tr>
<tr>
<td><strong>Unterstützung für externe Plugins</strong></td>
<td>Erweitern Sie die Funktionalität durch die Integration externer Plugins über URLs</td>
</tr>
<tr>
<td><strong>Steuerung des HTTP-Status</strong></td>
<td>Konfigurieren Sie, wie Ihr Server bei der Ablehnung von Anfragen reagiert (einschließlich Verbindungsabbruch)</td>
</tr>
</tbody>
</table>
<h3 id="konfigurationsanleitung">Konfigurationsanleitung</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="62:8"><input checked="checked" id="__tabbed_62_1" name="__tabbed_62" type="radio" /><input id="__tabbed_62_2" name="__tabbed_62" type="radio" /><input id="__tabbed_62_3" name="__tabbed_62" type="radio" /><input id="__tabbed_62_4" name="__tabbed_62" type="radio" /><input id="__tabbed_62_5" name="__tabbed_62" type="radio" /><input id="__tabbed_62_6" name="__tabbed_62" type="radio" /><input id="__tabbed_62_7" name="__tabbed_62" type="radio" /><input id="__tabbed_62_8" name="__tabbed_62" type="radio" /><div class="tabbed-labels"><label for="__tabbed_62_1">Sicherheit des Standardservers</label><label for="__tabbed_62_2">HTTP-Status bei Ablehnung</label><label for="__tabbed_62_3">HTTP-Methoden</label><label for="__tabbed_62_4">Größenbeschränkungen für Anfragen</label><label for="__tabbed_62_5">Protokollunterstützung</label><label for="__tabbed_62_6">Bereitstellung statischer Dateien</label><label for="__tabbed_62_7">Systemeinstellungen</label><label for="__tabbed_62_8">Datei-Caching</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Steuerung des Standardservers</strong></p>
<p>In HTTP gibt der <code>Host</code>-Header den Zielserver an, aber er kann fehlen oder unbekannt sein, oft aufgrund von Bots, die nach Schwachstellen suchen.</p>
<p>Um solche Anfragen zu blockieren:</p>
<ul>
<li>Setzen Sie <code>DISABLE_DEFAULT_SERVER</code> auf <code>yes</code>, um solche Anfragen stillschweigend mit dem <a href="https://http.dev/444">NGINX-Statuscode <code>444</code></a> abzulehnen.</li>
<li>Für eine strengere Sicherheit aktivieren Sie <code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code>, um SSL/TLS-Verbindungen ohne gültiges SNI abzulehnen.</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Sicherheitsvorteile</p>
<ul>
<li>Blockiert die Manipulation des Host-Headers und das Scannen von virtuellen Hosts</li>
<li>Mindert die Risiken von HTTP-Request-Smuggling</li>
<li>Entfernt den Standardserver als Angriffsvektor</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DISABLE_DEFAULT_SERVER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Standardserver:</strong> Auf <code>yes</code> setzen, um den Standardserver zu deaktivieren, wenn kein Hostname mit der Anfrage übereinstimmt.</td>
</tr>
<tr>
<td><code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Striktes SNI:</strong> Wenn auf <code>yes</code> gesetzt, ist SNI für HTTPS-Verbindungen erforderlich und Verbindungen ohne gültiges SNI werden abgelehnt.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">SNI-Erzwingung</p>
<p>Die Aktivierung der strikten SNI-Validierung bietet eine stärkere Sicherheit, kann jedoch Probleme verursachen, wenn BunkerWeb hinter einem Reverse-Proxy betrieben wird, der HTTPS-Anfragen ohne Beibehaltung der SNI-Informationen weiterleitet. Testen Sie gründlich, bevor Sie dies in Produktionsumgebungen aktivieren.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Steuerung des HTTP-Status</strong></p>
<p>Der erste Schritt bei der Behandlung von verweigertem Client-Zugriff ist die Definition der geeigneten Aktion. Dies kann mit der Einstellung <code>DENY_HTTP_STATUS</code> konfiguriert werden. Wenn BunkerWeb eine Anfrage ablehnt, können Sie seine Antwort steuern. Standardmäßig gibt es einen <code>403 Forbidden</code>-Status zurück und zeigt dem Client eine Webseite oder benutzerdefinierten Inhalt an.</p>
<p>Alternativ schließt das Setzen auf <code>444</code> die Verbindung sofort, ohne eine Antwort zu senden. Dieser <a href="https://http.dev/444">nicht standardmäßige Statuscode</a>, der spezifisch für NGINX ist, ist nützlich, um unerwünschte Anfragen stillschweigend zu verwerfen.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DENY_HTTP_STATUS</code></td>
<td><code>403</code></td>
<td>global</td>
<td>nein</td>
<td><strong>HTTP-Status bei Ablehnung:</strong> HTTP-Statuscode, der gesendet wird, wenn eine Anfrage abgelehnt wird (403 oder 444). Code 444 schließt die Verbindung.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Überlegungen zum Statuscode 444</p>
<p>Da Clients kein Feedback erhalten, kann die Fehlerbehebung schwieriger sein. Das Setzen von <code>444</code> wird nur empfohlen, wenn Sie Falsch-Positive gründlich behandelt haben, mit BunkerWeb erfahren sind und ein höheres Sicherheitsniveau benötigen.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Stream-Modus</p>
<p>Im <strong>Stream-Modus</strong> wird diese Einstellung immer als <code>444</code> erzwungen, was bedeutet, dass die Verbindung geschlossen wird, unabhängig vom konfigurierten Wert.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Steuerung der HTTP-Methoden</strong></p>
<p>Die Beschränkung der HTTP-Methoden auf nur diejenigen, die von Ihrer Anwendung benötigt werden, ist eine grundlegende Sicherheitsmaßnahme, die dem Prinzip der geringsten Rechte folgt. Indem Sie explizit zulässige HTTP-Methoden definieren, können Sie das Risiko der Ausnutzung durch ungenutzte oder gefährliche Methoden minimieren.</p>
<p>Diese Funktion wird mit der Einstellung <code>ALLOWED_METHODS</code> konfiguriert, wobei die Methoden aufgelistet und durch ein <code>|</code> getrennt sind (Standard: <code>GET|POST|HEAD</code>). Wenn ein Client versucht, eine nicht aufgelistete Methode zu verwenden, antwortet der Server mit einem <strong>405 - Method Not Allowed</strong>-Status.</p>
<p>Für die meisten Websites ist der Standardwert <code>GET|POST|HEAD</code> ausreichend. Wenn Ihre Anwendung RESTful-APIs verwendet, müssen Sie möglicherweise Methoden wie <code>PUT</code> und <code>DELETE</code> hinzufügen.</p>
<div class="admonition success">
<p class="admonition-title">Sicherheitsvorteile</p>
<ul>
<li>Verhindert die Ausnutzung von ungenutzten oder unnötigen HTTP-Methoden</li>
<li>Reduziert die Angriffsfläche durch Deaktivierung potenziell schädlicher Methoden</li>
<li>Blockiert von Angreifern verwendete Techniken zur Aufzählung von HTTP-Methoden</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALLOWED_METHODS</code></td>
<td><code>GET     | POST    | HEAD</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP-Methoden:</strong> Liste der erlaubten HTTP-Methoden, getrennt durch Pipe-Zeichen (<code>|</code>).</td>
</tr>
</tbody>
</table>
<div class="admonition abstract">
<p class="admonition-title">CORS und Preflight-Anfragen</p>
<p>Wenn Ihre Anwendung <a href="#cors">Cross-Origin Resource Sharing (CORS)</a> unterstützt, sollten Sie die <code>OPTIONS</code>-Methode in der <code>ALLOWED_METHODS</code>-Einstellung aufnehmen, um Preflight-Anfragen zu bearbeiten. Dies gewährleistet die ordnungsgemäße Funktionalität für Browser, die Cross-Origin-Anfragen stellen.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Sicherheitsüberlegungen</p>
<ul>
<li><strong>Vermeiden Sie die Aktivierung von <code>TRACE</code> oder <code>CONNECT</code>:</strong> Diese Methoden werden selten benötigt und können erhebliche Sicherheitsrisiken mit sich bringen, wie z. B. die Ermöglichung von Cross-Site-Tracing (XST) oder Tunneling-Angriffen.</li>
<li><strong>Überprüfen Sie regelmäßig die erlaubten Methoden:</strong> Überprüfen Sie die <code>ALLOWED_METHODS</code>-Einstellung regelmäßig, um sicherzustellen, dass sie den aktuellen Anforderungen Ihrer Anwendung entspricht.</li>
<li><strong>Testen Sie gründlich vor der Bereitstellung:</strong> Änderungen an den Einschränkungen von HTTP-Methoden können die Anwendungsfunktionalität beeinträchtigen. Validieren Sie Ihre Konfiguration in einer Staging-Umgebung, bevor Sie sie in der Produktion anwenden.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Größenbeschränkungen für Anfragen</strong></p>
<p>Die maximale Größe des Anforderungskörpers kann mit der Einstellung <code>MAX_CLIENT_SIZE</code> gesteuert werden (Standard: <code>10m</code>). Akzeptierte Werte folgen der <a href="https://nginx.org/en/docs/syntax.html">hier</a> beschriebenen Syntax.</p>
<div class="admonition success">
<p class="admonition-title">Sicherheitsvorteile</p>
<ul>
<li>Schützt vor Denial-of-Service-Angriffen durch übermäßige Payload-Größen</li>
<li>Mildert Pufferüberlauf-Schwachstellen</li>
<li>Verhindert Angriffe durch Datei-Uploads</li>
<li>Reduziert das Risiko der Erschöpfung von Serverressourcen</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MAX_CLIENT_SIZE</code></td>
<td><code>10m</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Maximale Anforderungsgröße:</strong> Die maximal zulässige Größe für Client-Anforderungskörper (z. B. Datei-Uploads).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Best Practices für die Konfiguration der Anforderungsgröße</p>
<p>Wenn Sie einen Anforderungskörper von unbegrenzter Größe zulassen müssen, können Sie den Wert <code>MAX_CLIENT_SIZE</code> auf <code>0</code> setzen. Dies wird jedoch aufgrund potenzieller Sicherheits- und Leistungsrisiken <strong>nicht empfohlen</strong>.</p>
<p><strong>Best Practices:</strong></p>
<ul>
<li>Konfigurieren Sie <code>MAX_CLIENT_SIZE</code> immer auf den kleinstmöglichen Wert, der die legitimen Anforderungen Ihrer Anwendung erfüllt.</li>
<li>Überprüfen und passen Sie diese Einstellung regelmäßig an die sich ändernden Bedürfnisse Ihrer Anwendung an.</li>
<li>Vermeiden Sie es, <code>0</code> zu setzen, es sei denn, es ist absolut notwendig, da dies Ihren Server Denial-of-Service-Angriffen und Ressourcenerschöpfung aussetzen kann.</li>
</ul>
<p>Durch sorgfältige Verwaltung dieser Einstellung können Sie optimale Sicherheit und Leistung für Ihre Anwendung gewährleisten.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>HTTP-Protokolleinstellungen</strong></p>
<p>Moderne HTTP-Protokolle wie HTTP/2 und HTTP/3 verbessern Leistung und Sicherheit. BunkerWeb ermöglicht eine einfache Konfiguration dieser Protokolle.</p>
<div class="admonition success">
<p class="admonition-title">Sicherheits- und Leistungsvorteile</p>
<ul>
<li><strong>Sicherheitsvorteile:</strong> Moderne Protokolle wie HTTP/2 und HTTP/3 erzwingen standardmäßig TLS/HTTPS, reduzieren die Anfälligkeit für bestimmte Angriffe und verbessern die Privatsphäre durch verschlüsselte Header (HTTP/3).</li>
<li><strong>Leistungsvorteile:</strong> Funktionen wie Multiplexing, Header-Komprimierung, Server-Push und binäre Datenübertragung verbessern Geschwindigkeit und Effizienz.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP-Listen:</strong> Auf (unsichere) HTTP-Anfragen antworten, wenn auf <code>yes</code> gesetzt.</td>
</tr>
<tr>
<td><code>HTTP2</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP2:</strong> Unterstützt das HTTP2-Protokoll, wenn HTTPS aktiviert ist.</td>
</tr>
<tr>
<td><code>HTTP3</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP3:</strong> Unterstützt das HTTP3-Protokoll, wenn HTTPS aktiviert ist.</td>
</tr>
<tr>
<td><code>HTTP3_ALT_SVC_PORT</code></td>
<td><code>443</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>HTTP3 Alt-Svc Port:</strong> Port, der im Alt-Svc-Header für HTTP3 verwendet wird.</td>
</tr>
</tbody>
</table>
<div class="admonition example">
<p class="admonition-title">Über HTTP/3</p>
<p>HTTP/3, die neueste Version des Hypertext Transfer Protocol, verwendet QUIC über UDP anstelle von TCP und behebt Probleme wie das Head-of-Line-Blocking für schnellere, zuverlässigere Verbindungen.</p>
<p>NGINX hat ab Version 1.25.0 experimentelle Unterstützung für HTTP/3 und QUIC eingeführt. Diese Funktion ist jedoch noch experimentell, und bei der Verwendung in der Produktion ist Vorsicht geboten. Weitere Einzelheiten finden Sie in der <a href="https://nginx.org/en/docs/quic.html">offiziellen Dokumentation von NGINX</a>.</p>
<p>Gründliche Tests werden empfohlen, bevor HTTP/3 in Produktionsumgebungen aktiviert wird.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Konfiguration der Dateibereitstellung</strong></p>
<p>BunkerWeb kann statische Dateien direkt bereitstellen oder als Reverse-Proxy zu einem Anwendungsserver fungieren. Standardmäßig werden Dateien aus <code>/var/www/html/{server_name}</code> bereitgestellt.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVE_FILES</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Dateien bereitstellen:</strong> Wenn auf <code>yes</code> gesetzt, stellt BunkerWeb statische Dateien aus dem konfigurierten Stammordner bereit.</td>
</tr>
<tr>
<td><code>ROOT_FOLDER</code></td>
<td><code>/var/www/html/{server_name}</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Stammordner:</strong> Das Verzeichnis, aus dem statische Dateien bereitgestellt werden sollen. Leer bedeutet, den Standardort zu verwenden.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Best Practices für die Bereitstellung statischer Dateien</p>
<ul>
<li><strong>Direkte Bereitstellung:</strong> Aktivieren Sie die Dateibereitstellung (<code>SERVE_FILES=yes</code>), wenn BunkerWeb für die direkte Bereitstellung statischer Dateien verantwortlich ist.</li>
<li><strong>Reverse-Proxy:</strong> Wenn BunkerWeb als Reverse-Proxy fungiert, <strong>deaktivieren Sie die Dateibereitstellung</strong> (<code>SERVE_FILES=no</code>), um die Angriffsfläche zu reduzieren und die Exposition unnötiger Verzeichnisse zu vermeiden.</li>
<li><strong>Berechtigungen:</strong> Stellen Sie sicher, dass die Dateiberechtigungen und Pfadkonfigurationen korrekt sind, um unbefugten Zugriff zu verhindern.</li>
<li><strong>Sicherheit:</strong> Vermeiden Sie die Exposition sensibler Verzeichnisse oder Dateien durch Fehlkonfigurationen.</li>
</ul>
<p>Durch sorgfältige Verwaltung der Bereitstellung statischer Dateien können Sie die Leistung optimieren und gleichzeitig eine sichere Umgebung aufrechterhalten.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Plugin- und Systemverwaltung</strong></p>
<p>Diese Einstellungen verwalten die Interaktion von BunkerWeb mit externen Systemen und tragen durch optionale anonyme Nutzungsstatistiken zur Verbesserung des Produkts bei.</p>
<p><strong>Anonyme Berichterstattung</strong></p>
<p>Die anonyme Berichterstattung gibt dem BunkerWeb-Team Einblicke, wie die Software verwendet wird. Dies hilft, Verbesserungsbereiche zu identifizieren und die Entwicklung von Funktionen zu priorisieren. Die Berichte sind rein statistisch und enthalten keine sensiblen oder persönlich identifizierbaren Informationen. Sie umfassen:</p>
<ul>
<li>Aktivierte Funktionen</li>
<li>Allgemeine Konfigurationsmuster</li>
</ul>
<p>Sie können diese Funktion bei Bedarf deaktivieren, indem Sie <code>SEND_ANONYMOUS_REPORT</code> auf <code>no</code> setzen.</p>
<p><strong>Externe Plugins</strong></p>
<p>Externe Plugins ermöglichen es Ihnen, die Funktionalität von BunkerWeb durch die Integration von Drittanbieter-Modulen zu erweitern. Dies ermöglicht zusätzliche Anpassungen und fortgeschrittene Anwendungsfälle.</p>
<div class="admonition danger">
<p class="admonition-title">Sicherheit externer Plugins</p>
<p><strong>Externe Plugins können Sicherheitsrisiken mit sich bringen, wenn sie nicht ordnungsgemäß überprüft werden.</strong> Befolgen Sie diese Best Practices, um potenzielle Bedrohungen zu minimieren:</p>
<ul>
<li>Verwenden Sie nur Plugins aus vertrauenswürdigen Quellen.</li>
<li>Überprüfen Sie die Integrität der Plugins mithilfe von Prüfsummen, sofern verfügbar.</li>
<li>Überprüfen und aktualisieren Sie Plugins regelmäßig, um Sicherheit und Kompatibilität zu gewährleisten.</li>
</ul>
<p>Weitere Einzelheiten finden Sie in der <a href="../plugins/">Plugin-Dokumentation</a>.</p>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SEND_ANONYMOUS_REPORT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Anonyme Berichte:</strong> Senden Sie anonyme Nutzungsberichte an die BunkerWeb-Maintainer.</td>
</tr>
<tr>
<td><code>EXTERNAL_PLUGIN_URLS</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td><strong>Externe Plugins:</strong> URLs für externe Plugins zum Herunterladen (durch Leerzeichen getrennt).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Optimierung des Datei-Cache</strong></p>
<p>Der Cache für offene Dateien verbessert die Leistung, indem er Dateideskriptoren und Metadaten im Speicher speichert und so die Notwendigkeit wiederholter Dateisystemoperationen reduziert.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile des Datei-Caching</p>
<ul>
<li><strong>Leistung:</strong> Reduziert Dateisystem-I/O, verringert die Latenz und senkt die CPU-Auslastung für Dateioperationen.</li>
<li><strong>Sicherheit:</strong> Mildert Timing-Angriffe durch Caching von Fehlerantworten und reduziert die Auswirkungen von DoS-Angriffen auf das Dateisystem.</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_OPEN_FILE_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache aktivieren:</strong> Aktivieren Sie das Caching von Dateideskriptoren und Metadaten, um die Leistung zu verbessern.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE</code></td>
<td><code>max=1000 inactive=20s</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Konfiguration:</strong> Konfigurieren Sie den Cache für offene Dateien (z. B. maximale Einträge und Inaktivitäts-Timeout).</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Fehler zwischenspeichern:</strong> Speichert Fehler bei der Suche nach Dateideskriptoren sowie erfolgreiche Suchen zwischen.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Mindestverwendungen:</strong> Mindestanzahl von Zugriffen während des inaktiven Zeitraums, damit eine Datei im Cache verbleibt.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_VALID</code></td>
<td><code>30s</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Gültigkeit:</strong> Zeit, nach der zwischengespeicherte Elemente erneut validiert werden.</td>
</tr>
</tbody>
</table>
<p><strong>Konfigurationsanleitung</strong></p>
<p>So aktivieren und konfigurieren Sie das Datei-Caching:
1. Setzen Sie <code>USE_OPEN_FILE_CACHE</code> auf <code>yes</code>, um die Funktion zu aktivieren.
2. Passen Sie die <code>OPEN_FILE_CACHE</code>-Parameter an, um die maximale Anzahl von Cache-Einträgen und deren Inaktivitäts-Timeout festzulegen.
3. Verwenden Sie <code>OPEN_FILE_CACHE_ERRORS</code>, um sowohl erfolgreiche als auch fehlgeschlagene Suchen zwischenzuspeichern und so wiederholte Dateisystemoperationen zu reduzieren.
4. Legen Sie mit <code>OPEN_FILE_CACHE_MIN_USES</code> die Mindestanzahl von Zugriffen fest, die erforderlich ist, damit eine Datei im Cache verbleibt.
5. Definieren Sie die Gültigkeitsdauer des Caches mit <code>OPEN_FILE_CACHE_VALID</code>, um zu steuern, wie oft zwischengespeicherte Elemente erneut validiert werden.</p>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken</p>
<ul>
<li>Aktivieren Sie das Datei-Caching für Websites mit vielen statischen Dateien, um die Leistung zu verbessern.</li>
<li>Überprüfen und optimieren Sie die Cache-Einstellungen regelmäßig, um Leistung und Ressourcenverbrauch auszugleichen.</li>
<li>In dynamischen Umgebungen, in denen sich Dateien häufig ändern, sollten Sie die Gültigkeitsdauer des Caches verkürzen oder die Funktion deaktivieren, um die Aktualität der Inhalte zu gewährleisten.</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="beispielkonfigurationen_14">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="63:7"><input checked="checked" id="__tabbed_63_1" name="__tabbed_63" type="radio" /><input id="__tabbed_63_2" name="__tabbed_63" type="radio" /><input id="__tabbed_63_3" name="__tabbed_63" type="radio" /><input id="__tabbed_63_4" name="__tabbed_63" type="radio" /><input id="__tabbed_63_5" name="__tabbed_63" type="radio" /><input id="__tabbed_63_6" name="__tabbed_63" type="radio" /><input id="__tabbed_63_7" name="__tabbed_63" type="radio" /><div class="tabbed-labels"><label for="__tabbed_63_1">Sicherheit des Standardservers</label><label for="__tabbed_63_2">HTTP-Status bei Ablehnung</label><label for="__tabbed_63_3">HTTP-Methoden</label><label for="__tabbed_63_4">Größenbeschränkungen für Anfragen</label><label for="__tabbed_63_5">Protokollunterstützung</label><label for="__tabbed_63_6">Bereitstellung statischer Dateien</label><label for="__tabbed_63_7">Datei-Caching</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Beispielkonfiguration zum Deaktivieren des Standardservers und Erzwingen von striktem SNI:</p>
<div class="highlight"><pre><span></span><code><span class="nt">DISABLE_DEFAULT_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DISABLE_DEFAULT_SERVER_STRICT_SNI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration zum stillschweigenden Verwerfen unerwünschter Anfragen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">DENY_HTTP_STATUS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;444&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration zur Beschränkung der HTTP-Methoden auf die für eine RESTful-API erforderlichen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ALLOWED_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET|POST|PUT|DELETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration zur Begrenzung der maximalen Größe des Anforderungskörpers:</p>
<div class="highlight"><pre><span></span><code><span class="nt">MAX_CLIENT_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5m&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration zur Aktivierung von HTTP/2 und HTTP/3 mit einem benutzerdefinierten Alt-Svc-Port:</p>
<div class="highlight"><pre><span></span><code><span class="nt">HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3_ALT_SVC_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;443&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration zur Bereitstellung statischer Dateien aus einem benutzerdefinierten Stammordner:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVE_FILES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROOT_FOLDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/custom-folder&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Beispielkonfiguration zur Aktivierung und Optimierung des Datei-Caching:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_OPEN_FILE_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">OPEN_FILE_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max=2000</span><span class="nv"> </span><span class="s">inactive=30s&quot;</span>
<span class="nt">OPEN_FILE_CACHE_ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">OPEN_FILE_CACHE_MIN_USES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">OPEN_FILE_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="modsecurity">ModSecurity</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das ModSecurity-Plugin integriert die leistungsstarke <a href="https://modsecurity.org">ModSecurity</a> Web Application Firewall (WAF) in BunkerWeb. Diese Integration bietet robusten Schutz gegen eine Vielzahl von Webangriffen, indem sie das <a href="https://coreruleset.org">OWASP Core Rule Set (CRS)</a> nutzt, um Bedrohungen wie SQL-Injection, Cross-Site-Scripting (XSS), Local File Inclusion und mehr zu erkennen und zu blockieren.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn eine Anfrage empfangen wird, bewertet ModSecurity sie anhand des aktiven Regelsatzes.</li>
<li>Das OWASP Core Rule Set überprüft Header, Cookies, URL-Parameter und den Body-Inhalt.</li>
<li>Jeder erkannte Verstoß trägt zu einem Gesamt-Anomalie-Score bei.</li>
<li>Wenn dieser Score den konfigurierten Schwellenwert überschreitet, wird die Anfrage blockiert.</li>
<li>Detaillierte Protokolle werden erstellt, um zu diagnostizieren, welche Regeln ausgelöst wurden und warum.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Wichtige Vorteile</p>
<ol>
<li><strong>Branchenstandard-Schutz:</strong> Verwendet die weit verbreitete Open-Source-Firewall ModSecurity.</li>
<li><strong>OWASP Core Rule Set:</strong> Verwendet von der Community gepflegte Regeln, die die OWASP Top Ten und mehr abdecken.</li>
<li><strong>Konfigurierbare Sicherheitsstufen:</strong> Passen Sie die Paranoia-Stufen an, um die Sicherheit mit potenziellen Falsch-Positiven auszugleichen.</li>
<li><strong>Detaillierte Protokollierung:</strong> Bietet gründliche Audit-Protokolle zur Analyse von Angriffen.</li>
<li><strong>Plugin-Unterstützung:</strong> Erweitern Sie den Schutz mit optionalen CRS-Plugins, die auf Ihre Anwendungen zugeschnitten sind.</li>
</ol>
</div>
<h3 id="wie-man-es-benutzt_13">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um ModSecurity zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> ModSecurity ist standardmäßig aktiviert. Dies kann mit der Einstellung <code>USE_MODSECURITY</code> gesteuert werden.</li>
<li><strong>Wählen Sie eine CRS-Version:</strong> Wählen Sie eine Version des OWASP Core Rule Set (v3, v4 oder nightly).</li>
<li><strong>Plugins hinzufügen:</strong> Aktivieren Sie optional CRS-Plugins, um die Regelabdeckung zu verbessern.</li>
<li><strong>Überwachen und anpassen:</strong> Verwenden Sie Protokolle und die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um Falsch-Positive zu identifizieren und die Einstellungen anzupassen.</li>
</ol>
<h3 id="konfigurationseinstellungen_14">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MODSECURITY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>ModSecurity aktivieren:</strong> Schalten Sie den Schutz der ModSecurity Web Application Firewall ein.</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Core Rule Set verwenden:</strong> Aktivieren Sie das OWASP Core Rule Set für ModSecurity.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_VERSION</code></td>
<td><code>4</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>CRS-Version:</strong> Die Version des zu verwendenden OWASP Core Rule Set. Optionen: <code>3</code>, <code>4</code> oder <code>nightly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_RULE_ENGINE</code></td>
<td><code>On</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Regel-Engine:</strong> Steuern Sie, ob Regeln erzwungen werden. Optionen: <code>On</code>, <code>DetectionOnly</code> oder <code>Off</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_ENGINE</code></td>
<td><code>RelevantOnly</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Audit-Engine:</strong> Steuern Sie, wie die Audit-Protokollierung funktioniert. Optionen: <code>On</code>, <code>Off</code> oder <code>RelevantOnly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_LOG_PARTS</code></td>
<td><code>ABIJDEFHZ</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Audit-Protokoll-Teile:</strong> Welche Teile von Anfragen/Antworten in Audit-Protokolle aufgenommen werden sollen.</td>
</tr>
<tr>
<td><code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code></td>
<td><code>131072</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Anforderungskörper-Limit (keine Dateien):</strong> Maximale Größe für Anforderungskörper ohne Datei-Uploads. Akzeptiert einfache Bytes oder menschenlesbare Suffixe (<code>k</code>, <code>m</code>, <code>g</code>).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS_PLUGINS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>CRS-Plugins aktivieren:</strong> Aktivieren Sie zusätzliche Plugin-Regelsätze für das Core Rule Set.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_PLUGINS</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>CRS-Plugin-Liste:</strong> Leerzeichengetrennte Liste von Plugins zum Herunterladen und Installieren (<code>plugin-name[/tag]</code> oder URL).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_GLOBAL_CRS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Globales CRS:</strong> Wenn aktiviert, werden CRS-Regeln global auf HTTP-Ebene anstatt pro Server angewendet.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">ModSecurity und das OWASP Core Rule Set</p>
</div>
<p><strong>Wir empfehlen dringend, sowohl ModSecurity als auch das OWASP Core Rule Set (CRS) aktiviert zu lassen</strong>, um einen robusten Schutz gegen gängige Web-Schwachstellen zu bieten. Obwohl gelegentlich Falsch-Positive auftreten können, können diese mit etwas Aufwand durch Feinabstimmung von Regeln oder die Verwendung vordefinierter Ausschlüsse behoben werden.</p>
<pre><code>Das CRS-Team pflegt aktiv eine Liste von Ausschlüssen für beliebte Anwendungen wie WordPress, Nextcloud, Drupal und Cpanel, was die Integration erleichtert, ohne die Funktionalität zu beeinträchtigen. Die Sicherheitsvorteile überwiegen bei weitem den minimalen Konfigurationsaufwand, der zur Behebung von Falsch-Positiven erforderlich ist.
</code></pre>
<h3 id="verfugbare-crs-versionen">Verfügbare CRS-Versionen</h3>
<p>Wählen Sie eine CRS-Version, die Ihren Sicherheitsanforderungen am besten entspricht:</p>
<ul>
<li><strong><code>3</code></strong>: Stabile <a href="https://github.com/coreruleset/coreruleset/releases/tag/v3.3.7">v3.3.7</a>.</li>
<li><strong><code>4</code></strong>: Stabile <a href="https://github.com/coreruleset/coreruleset/releases/tag/v4.18.0">v4.18.0</a> (<strong>Standard</strong>).</li>
<li><strong><code>nightly</code></strong>: <a href="https://github.com/coreruleset/coreruleset/releases/tag/nightly">Nightly-Build</a> mit den neuesten Regel-Updates.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Nightly-Build</p>
</div>
<p>Der <strong>Nightly-Build</strong> enthält die aktuellsten Regeln und bietet den neuesten Schutz gegen aufkommende Bedrohungen. Da er jedoch täglich aktualisiert wird und experimentelle oder ungetestete Änderungen enthalten kann, wird empfohlen, den Nightly-Build zunächst in einer <strong>Staging-Umgebung</strong> zu verwenden, bevor er in der Produktion eingesetzt wird.</p>
<div class="admonition tip">
<p class="admonition-title">Paranoia-Stufen</p>
</div>
<p>Das OWASP Core Rule Set verwendet "Paranoia-Stufen" (PL), um die Strenge der Regeln zu steuern:</p>
<pre><code>- **PL1 (Standard):** Grundlegender Schutz mit minimalen Falsch-Positiven
- **PL2:** Strengere Sicherheit mit strengerem Musterabgleich
- **PL3:** Erhöhte Sicherheit mit strengerer Validierung
- **PL4:** Maximale Sicherheit mit sehr strengen Regeln (kann viele Falsch-Positive verursachen)

Sie können die Paranoia-Stufe festlegen, indem Sie eine benutzerdefinierte Konfigurationsdatei in `/etc/bunkerweb/configs/modsec-crs/` hinzufügen.
</code></pre>
<h3 id="benutzerdefinierte-konfigurationen">Benutzerdefinierte Konfigurationen</h3>
<p>Die Feinabstimmung von ModSecurity und dem OWASP Core Rule Set (CRS) kann durch benutzerdefinierte Konfigurationen erreicht werden. Diese Konfigurationen ermöglichen es Ihnen, das Verhalten in bestimmten Phasen der Verarbeitung von Sicherheitsregeln anzupassen:</p>
<ul>
<li><strong><code>modsec-crs</code></strong>: Wird <strong>vor</strong> dem Laden des OWASP Core Rule Set angewendet.</li>
<li><strong><code>modsec</code></strong>: Wird <strong>nach</strong> dem Laden des OWASP Core Rule Set angewendet. Dies wird auch verwendet, wenn das CRS überhaupt nicht geladen wird.</li>
<li><strong><code>crs-plugins-before</code></strong>: Wird <strong>vor</strong> dem Laden der CRS-Plugins angewendet.</li>
<li><strong><code>crs-plugins-after</code></strong>: Wird <strong>nach</strong> dem Laden der CRS-Plugins angewendet.</li>
</ul>
<p>Diese Struktur bietet Flexibilität und ermöglicht es Ihnen, die Einstellungen von ModSecurity und CRS an die spezifischen Anforderungen Ihrer Anwendung anzupassen, während ein klarer Konfigurationsfluss beibehalten wird.</p>
<h4 id="hinzufugen-von-crs-ausschlussen-mit-modsec-crs">Hinzufügen von CRS-Ausschlüssen mit <code>modsec-crs</code></h4>
<p>Sie können eine benutzerdefinierte Konfiguration vom Typ <code>modsec-crs</code> verwenden, um Ausschlüsse für bestimmte Anwendungsfälle hinzuzufügen, z. B. das Aktivieren vordefinierter Ausschlüsse für WordPress:</p>
<div class="highlight"><pre><span></span><code>SecAction \
 &quot;id:900130,\
  phase:1,\
  nolog,\
  pass,\
  t:none,\
  setvar:tx.crs_exclusions_wordpress=1&quot;
</code></pre></div>
<p>In diesem Beispiel:</p>
<ul>
<li>Die Aktion wird in <strong>Phase 1</strong> (früh im Anfrage-Lebenszyklus) ausgeführt.</li>
<li>Sie aktiviert WordPress-spezifische CRS-Ausschlüsse, indem sie die Variable <code>tx.crs_exclusions_wordpress</code> setzt.</li>
</ul>
<h4 id="aktualisieren-von-crs-regeln-mit-modsec">Aktualisieren von CRS-Regeln mit <code>modsec</code></h4>
<p>Um die geladenen CRS-Regeln zu optimieren, können Sie eine benutzerdefinierte Konfiguration vom Typ <code>modsec</code> verwenden. Sie können beispielsweise bestimmte Regeln oder Tags für bestimmte Anfragepfade entfernen:</p>
<div class="highlight"><pre><span></span><code>SecRule REQUEST_FILENAME &quot;/wp-admin/admin-ajax.php&quot; &quot;id:1,ctl:ruleRemoveByTag=attack-xss,ctl:ruleRemoveByTag=attack-rce&quot;
SecRule REQUEST_FILENAME &quot;/wp-admin/options.php&quot; &quot;id:2,ctl:ruleRemoveByTag=attack-xss&quot;
SecRule REQUEST_FILENAME &quot;^/wp-json/yoast&quot; &quot;id:3,ctl:ruleRemoveById=930120&quot;
</code></pre></div>
<p>In diesem Beispiel:</p>
<ul>
<li><strong>Regel 1</strong>: Entfernt Regeln mit den Tags <code>attack-xss</code> und <code>attack-rce</code> für Anfragen an <code>/wp-admin/admin-ajax.php</code>.</li>
<li><strong>Regel 2</strong>: Entfernt Regeln mit dem Tag <code>attack-xss</code> für Anfragen an <code>/wp-admin/options.php</code>.</li>
<li><strong>Regel 3</strong>: Entfernt eine bestimmte Regel (ID <code>930120</code>) für Anfragen, die auf <code>/wp-json/yoast</code> passen.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Reihenfolge der Ausführung</p>
</div>
<p>Die Ausführungsreihenfolge für ModSecurity in BunkerWeb ist wie folgt, um eine klare und logische Abfolge der Regelanwendung zu gewährleisten:</p>
<pre><code>1.  **OWASP CRS-Konfiguration**: Basiskonfiguration für das OWASP Core Rule Set.
2.  **Konfiguration benutzerdefinierter Plugins (`crs-plugins-before`)**: Einstellungen, die für Plugins spezifisch sind und vor allen CRS-Regeln angewendet werden.
3.  **Regeln benutzerdefinierter Plugins (vor CRS-Regeln) (`crs-plugins-before`)**: Benutzerdefinierte Regeln für Plugins, die vor den CRS-Regeln ausgeführt werden.
4.  **Konfiguration heruntergeladener Plugins**: Konfiguration für extern heruntergeladene Plugins.
5.  **Regeln heruntergeladener Plugins (vor CRS-Regeln)**: Regeln für heruntergeladene Plugins, die vor den CRS-Regeln ausgeführt werden.
6.  **Benutzerdefinierte CRS-Regeln (`modsec-crs`)**: Benutzerdefinierte Regeln, die vor dem Laden der CRS-Regeln angewendet werden.
7.  **OWASP CRS-Regeln**: Der Kernsatz von Sicherheitsregeln, der von OWASP bereitgestellt wird.
8.  **Regeln benutzerdefinierter Plugins (nach CRS-Regeln) (`crs-plugins-after`)**: Benutzerdefinierte Plugin-Regeln, die nach den CRS-Regeln ausgeführt werden.
9.  **Regeln heruntergeladener Plugins (nach CRS-Regeln)**: Regeln für heruntergeladene Plugins, die nach den CRS-Regeln ausgeführt werden.
10. **Benutzerdefinierte Regeln (`modsec`)**: Benutzerdefinierte Regeln, die nach allen CRS- und Plugin-Regeln angewendet werden.

**Wichtige Hinweise**:

-   **Pre-CRS-Anpassungen** (`crs-plugins-before`, `modsec-crs`) ermöglichen es Ihnen, Ausnahmen oder vorbereitende Regeln zu definieren, bevor die Kern-CRS-Regeln geladen werden.
-   **Post-CRS-Anpassungen** (`crs-plugins-after`, `modsec`) sind ideal, um Regeln zu überschreiben oder zu erweitern, nachdem CRS- und Plugin-Regeln angewendet wurden.
-   Diese Struktur bietet maximale Flexibilität und ermöglicht eine präzise Steuerung der Regelausführung und -anpassung bei gleichzeitiger Aufrechterhaltung einer starken Sicherheitsgrundlage.
</code></pre>
<h3 id="owasp-crs-plugins">OWASP CRS-Plugins</h3>
<p>Das OWASP Core Rule Set unterstützt auch eine Reihe von <strong>Plugins</strong>, die entwickelt wurden, um seine Funktionalität zu erweitern und die Kompatibilität mit bestimmten Anwendungen oder Umgebungen zu verbessern. Diese Plugins können dabei helfen, das CRS für die Verwendung mit beliebten Plattformen wie WordPress, Nextcloud und Drupal oder sogar benutzerdefinierten Setups zu optimieren. Weitere Informationen und eine Liste der verfügbaren Plugins finden Sie im <a href="https://github.com/coreruleset/plugin-registry">OWASP CRS Plugin-Verzeichnis</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Plugin-Download</p>
</div>
<p>Die Einstellung <code>MODSECURITY_CRS_PLUGINS</code> ermöglicht es Ihnen, Plugins herunterzuladen und zu installieren, um die Funktionalität des OWASP Core Rule Set (CRS) zu erweitern. Diese Einstellung akzeptiert eine Liste von Plugin-Namen mit optionalen Tags oder URLs, was es einfach macht, zusätzliche Sicherheitsfunktionen zu integrieren, die auf Ihre spezifischen Bedürfnisse zugeschnitten sind.</p>
<pre><code>Hier ist eine nicht erschöpfende Liste der akzeptierten Werte für die Einstellung `MODSECURITY_CRS_PLUGINS`:

*   `fake-bot` - Lädt die neueste Version des Plugins herunter.
*   `wordpress-rule-exclusions/v1.0.0` - Lädt die Version 1.0.0 des Plugins herunter.
*   `https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip` - Lädt das Plugin direkt von der URL herunter.
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Falsch-Positive</p>
</div>
<p>Höhere Sicherheitseinstellungen können legitimen Verkehr blockieren. Beginnen Sie mit den Standardeinstellungen und überwachen Sie die Protokolle, bevor Sie die Sicherheitsstufen erhöhen. Seien Sie bereit, Ausnahmeregeln für die spezifischen Anforderungen Ihrer Anwendung hinzuzufügen.</p>
<h3 id="beispielkonfigurationen_15">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="64:6"><input checked="checked" id="__tabbed_64_1" name="__tabbed_64" type="radio" /><input id="__tabbed_64_2" name="__tabbed_64" type="radio" /><input id="__tabbed_64_3" name="__tabbed_64" type="radio" /><input id="__tabbed_64_4" name="__tabbed_64" type="radio" /><input id="__tabbed_64_5" name="__tabbed_64" type="radio" /><input id="__tabbed_64_6" name="__tabbed_64" type="radio" /><div class="tabbed-labels"><label for="__tabbed_64_1">Grundlegende Konfiguration</label><label for="__tabbed_64_2">Nur-Erkennungsmodus</label><label for="__tabbed_64_3">Erweiterte Konfiguration mit Plugins</label><label for="__tabbed_64_4">Legacy-Konfiguration</label><label for="__tabbed_64_5">Globales ModSecurity</label><label for="__tabbed_64_6">Nightly-Build mit benutzerdefinierten Plugins</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine Standardkonfiguration mit aktiviertem ModSecurity und CRS v4:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration zur Überwachung potenzieller Bedrohungen ohne Blockierung:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DetectionOnly&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_LOG_PARTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ABIJDEFHZ&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit CRS v4 und aktivierten Plugins für zusätzlichen Schutz:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions</span><span class="nv"> </span><span class="s">fake-bot&quot;</span>
<span class="nt">MODSECURITY_REQ_BODY_NO_FILES_LIMIT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;262144&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit CRS v3 zur Kompatibilität mit älteren Setups:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die ModSecurity global auf alle HTTP-Verbindungen anwendet:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">USE_MODSECURITY_GLOBAL_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit dem Nightly-Build von CRS mit benutzerdefinierten Plugins:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nightly&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions/v1.0.0</span><span class="nv"> </span><span class="s">https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Menschenlesbare Größenwerte</p>
</div>
<p>Für Größeneinstellungen wie <code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code> werden die Suffixe <code>k</code>, <code>m</code> und <code>g</code> (Groß- und Kleinschreibung wird nicht beachtet) unterstützt und stehen für Kibibyte, Mebibyte und Gibibyte (Vielfache von 1024). Beispiele: <code>256k</code> = 262144, <code>1m</code> = 1048576, <code>2g</code> = 2147483648.</p>
<h2 id="monitoring-pro">Monitoring <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>BunkerWeb monitoring pro system. This plugin is a prerequisite for some other plugins.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MONITORING</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>nein</td>
<td>Enable monitoring of BunkerWeb.</td>
</tr>
<tr>
<td><code>MONITORING_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>nein</td>
<td>Size of the dict to store monitoring metrics.</td>
</tr>
<tr>
<td><code>MONITORING_IGNORE_URLS</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>List of URLs to ignore when monitoring separated with spaces (e.g. /health)</td>
</tr>
</tbody>
</table>
<h2 id="php">PHP</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das PHP-Plugin bietet eine nahtlose Integration mit PHP-FPM für BunkerWeb und ermöglicht die dynamische PHP-Verarbeitung für Ihre Websites. Diese Funktion unterstützt sowohl lokale PHP-FPM-Instanzen, die auf derselben Maschine laufen, als auch entfernte PHP-FPM-Server, was Ihnen Flexibilität bei der Konfiguration Ihrer PHP-Umgebung gibt.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Client eine PHP-Datei von Ihrer Website anfordert, leitet BunkerWeb die Anfrage an die konfigurierte PHP-FPM-Instanz weiter.</li>
<li>Bei lokalem PHP-FPM kommuniziert BunkerWeb mit dem PHP-Interpreter über eine Unix-Socket-Datei.</li>
<li>Bei entferntem PHP-FPM leitet BunkerWeb Anfragen an den angegebenen Host und Port über das FastCGI-Protokoll weiter.</li>
<li>PHP-FPM verarbeitet das Skript und gibt den generierten Inhalt an BunkerWeb zurück, das ihn dann an den Client ausliefert.</li>
<li>Die URL-Umschreibung wird automatisch konfiguriert, um gängige PHP-Frameworks und Anwendungen zu unterstützen, die "schöne URLs" verwenden.</li>
</ol>
<h3 id="wie-man-es-benutzt_14">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die PHP-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Wählen Sie Ihr PHP-FPM-Setup:</strong> Entscheiden Sie, ob Sie eine lokale oder eine entfernte PHP-FPM-Instanz verwenden möchten.</li>
<li><strong>Konfigurieren Sie die Verbindung:</strong> Geben Sie für lokales PHP den Socket-Pfad an; für entferntes PHP geben Sie den Hostnamen und den Port an.</li>
<li><strong>Legen Sie das Dokumentenstammverzeichnis fest:</strong> Konfigurieren Sie den Stammordner, der Ihre PHP-Dateien enthält, mit der entsprechenden Pfadeinstellung.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration leitet BunkerWeb PHP-Anfragen automatisch an Ihre PHP-FPM-Instanz weiter.</li>
</ol>
<h3 id="konfigurationseinstellungen_15">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REMOTE_PHP</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Entfernter PHP-Host:</strong> Hostname der entfernten PHP-FPM-Instanz. Leer lassen, um lokales PHP zu verwenden.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Entfernter Pfad:</strong> Stammordner mit Dateien in der entfernten PHP-FPM-Instanz.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PORT</code></td>
<td><code>9000</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Entfernter Port:</strong> Port der entfernten PHP-FPM-Instanz.</td>
</tr>
<tr>
<td><code>LOCAL_PHP</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Lokaler PHP-Socket:</strong> Pfad zur PHP-FPM-Socket-Datei. Leer lassen, um eine entfernte PHP-FPM-Instanz zu verwenden.</td>
</tr>
<tr>
<td><code>LOCAL_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Lokaler Pfad:</strong> Stammordner mit Dateien in der lokalen PHP-FPM-Instanz.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Lokales vs. entferntes PHP-FPM</p>
</div>
<p>Wählen Sie das Setup, das am besten zu Ihrer Infrastruktur passt:</p>
<pre><code>- **Lokales PHP-FPM** bietet aufgrund der Socket-basierten Kommunikation eine bessere Leistung und ist ideal, wenn PHP auf derselben Maschine wie BunkerWeb läuft.
- **Entferntes PHP-FPM** bietet mehr Flexibilität und Skalierbarkeit, indem die PHP-Verarbeitung auf separaten Servern erfolgen kann.
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Pfadkonfiguration</p>
</div>
<p>Der <code>REMOTE_PHP_PATH</code> oder <code>LOCAL_PHP_PATH</code> muss mit dem tatsächlichen Dateisystempfad übereinstimmen, in dem Ihre PHP-Dateien gespeichert sind; andernfalls tritt ein "Datei nicht gefunden"-Fehler auf.</p>
<div class="admonition info">
<p class="admonition-title">URL-Umschreibung</p>
</div>
<p>Das PHP-Plugin konfiguriert automatisch die URL-Umschreibung, um moderne PHP-Anwendungen zu unterstützen. Anfragen für nicht existierende Dateien werden an <code>index.php</code> weitergeleitet, wobei die ursprüngliche Anfrage-URI als Abfrageparameter verfügbar ist.</p>
<h3 id="beispielkonfigurationen_16">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="65:4"><input checked="checked" id="__tabbed_65_1" name="__tabbed_65" type="radio" /><input id="__tabbed_65_2" name="__tabbed_65" type="radio" /><input id="__tabbed_65_3" name="__tabbed_65" type="radio" /><input id="__tabbed_65_4" name="__tabbed_65" type="radio" /><div class="tabbed-labels"><label for="__tabbed_65_1">Lokale PHP-FPM-Konfiguration</label><label for="__tabbed_65_2">Entfernte PHP-FPM-Konfiguration</label><label for="__tabbed_65_3">Konfiguration mit benutzerdefiniertem Port</label><label for="__tabbed_65_4">WordPress-Konfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Konfiguration für die Verwendung einer lokalen PHP-FPM-Instanz:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für die Verwendung einer entfernten PHP-FPM-Instanz:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9000&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für die Verwendung von PHP-FPM auf einem nicht standardmäßigen Port:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9001&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Für WordPress optimierte Konfiguration:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html/wordpress&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="pro">Pro</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das Pro-Plugin bündelt erweiterte Funktionen und Verbesserungen für Unternehmensbereitstellungen von BunkerWeb. Es schaltet zusätzliche Funktionen, Premium-Plugins und erweiterte Funktionalität frei, die die Kernplattform von BunkerWeb ergänzen. Es bietet verbesserte Sicherheit, Leistung und Verwaltungsoptionen für unternehmenstaugliche Bereitstellungen.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Mit einem gültigen Pro-Lizenzschlüssel verbindet sich BunkerWeb mit dem Pro-API-Server, um Ihr Abonnement zu validieren.</li>
<li>Nach der Authentifizierung lädt das Plugin automatisch Pro-exklusive Plugins und Erweiterungen herunter und installiert sie.</li>
<li>Ihr Pro-Status wird regelmäßig überprüft, um den fortgesetzten Zugriff auf Premium-Funktionen sicherzustellen.</li>
<li>Premium-Plugins werden nahtlos in Ihre bestehende BunkerWeb-Konfiguration integriert.</li>
<li>Alle Pro-Funktionen arbeiten harmonisch mit dem Open-Source-Kern zusammen und erweitern die Funktionalität, anstatt sie zu ersetzen.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Wichtige Vorteile</p>
<ol>
<li><strong>Premium-Erweiterungen:</strong> Zugriff auf exklusive Plugins und Funktionen, die in der Community-Edition nicht verfügbar sind.</li>
<li><strong>Verbesserte Leistung:</strong> Optimierte Konfigurationen und fortschrittliche Caching-Mechanismen.</li>
<li><strong>Unternehmens-Support:</strong> Vorrangige Unterstützung und dedizierte Support-Kanäle.</li>
<li><strong>Nahtlose Integration:</strong> Pro-Funktionen arbeiten ohne Konfigurationskonflikte neben den Community-Funktionen.</li>
<li><strong>Automatische Updates:</strong> Premium-Plugins werden automatisch heruntergeladen und auf dem neuesten Stand gehalten.</li>
</ol>
</div>
<h3 id="wie-man-es-benutzt_15">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Pro-Funktionen zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Lizenzschlüssel erhalten:</strong> Kaufen Sie eine Pro-Lizenz im <a href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a>.</li>
<li><strong>Lizenzschlüssel konfigurieren:</strong> Verwenden Sie die Einstellung <code>PRO_LICENSE_KEY</code>, um Ihre Lizenz zu konfigurieren.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration mit einer gültigen Lizenz werden Pro-Plugins automatisch heruntergeladen und aktiviert.</li>
<li><strong>Überwachen Sie Ihren Pro-Status:</strong> Überprüfen Sie die Zustandsindikatoren in der <a href="../web-ui/">Web-Benutzeroberfläche</a>, um Ihren Pro-Abonnementstatus zu bestätigen.</li>
</ol>
<h3 id="konfigurationseinstellungen_16">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PRO_LICENSE_KEY</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td><strong>Pro-Lizenzschlüssel:</strong> Ihr BunkerWeb Pro-Lizenzschlüssel zur Authentifizierung.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Lizenzverwaltung</p>
</div>
<p>Ihre Pro-Lizenz ist an Ihre spezifische Bereitstellungsumgebung gebunden. Wenn Sie Ihre Lizenz übertragen müssen oder Fragen zu Ihrem Abonnement haben, wenden Sie sich bitte über das <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a> an den Support.</p>
<div class="admonition info">
<p class="admonition-title">Pro-Funktionen</p>
</div>
<p>Die spezifischen verfügbaren Pro-Funktionen können sich im Laufe der Zeit weiterentwickeln, wenn neue Funktionen hinzugefügt werden. Das Pro-Plugin übernimmt automatisch die Installation und Konfiguration aller verfügbaren Funktionen.</p>
<div class="admonition warning">
<p class="admonition-title">Netzwerkanforderungen</p>
</div>
<p>Das Pro-Plugin benötigt ausgehenden Internetzugang, um sich zur Lizenzüberprüfung mit der BunkerWeb-API zu verbinden und Premium-Plugins herunterzuladen. Stellen Sie sicher, dass Ihre Firewall Verbindungen zu <code>api.bunkerweb.io</code> auf Port 443 (HTTPS) zulässt.</p>
<h3 id="haufig-gestellte-fragen">Häufig gestellte Fragen</h3>
<p><strong>F: Was passiert, wenn meine Pro-Lizenz abläuft?</strong></p>
<p>A: Wenn Ihre Pro-Lizenz abläuft, wird der Zugriff auf Premium-Funktionen und -Plugins deaktiviert. Ihre BunkerWeb-Installation wird jedoch weiterhin mit allen Funktionen der Community-Edition betrieben. Um wieder Zugriff auf die Pro-Funktionen zu erhalten, erneuern Sie einfach Ihre Lizenz.</p>
<p><strong>F: Werden die Pro-Funktionen meine bestehende Konfiguration stören?</strong></p>
<p>A: Nein, die Pro-Funktionen sind so konzipiert, dass sie sich nahtlos in Ihr aktuelles BunkerWeb-Setup integrieren. Sie erweitern die Funktionalität, ohne Ihre bestehende Konfiguration zu verändern oder zu stören, und gewährleisten so ein reibungsloses und zuverlässiges Erlebnis.</p>
<p><strong>F: Kann ich die Pro-Funktionen vor dem Kauf ausprobieren?</strong></p>
<p>A: Auf jeden Fall! BunkerWeb bietet zwei Pro-Pläne, die Ihren Bedürfnissen entsprechen:</p>
<ul>
<li><strong>BunkerWeb PRO Standard:</strong> Voller Zugriff auf die Pro-Funktionen ohne technischen Support.</li>
<li><strong>BunkerWeb PRO Enterprise:</strong> Voller Zugriff auf die Pro-Funktionen mit dediziertem technischen Support.</li>
</ul>
<p>Sie können die Pro-Funktionen mit einer kostenlosen 1-monatigen Testversion erkunden, indem Sie den Promo-Code <code>freetrial</code> verwenden. Besuchen Sie das <a href="https://panel.bunkerweb.io/?utm_campaign=self&amp;utm_source=doc">BunkerWeb Panel</a>, um Ihre Testversion zu aktivieren und mehr über flexible Preisoptionen basierend auf der Anzahl der von BunkerWeb PRO geschützten Dienste zu erfahren.</p>
<h2 id="prometheus-exporter-pro">Prometheus exporter <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Prometheus exporter for BunkerWeb internal metrics.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROMETHEUS_EXPORTER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td>Enable the Prometheus export.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>nein</td>
<td>Listening IP of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_PORT</code></td>
<td><code>9113</code></td>
<td>global</td>
<td>nein</td>
<td>Listening port of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_URL</code></td>
<td><code>/metrics</code></td>
<td>global</td>
<td>nein</td>
<td>HTTP URL of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_ALLOW_IP</code></td>
<td><code>127.0.0.0/8 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16</code></td>
<td>global</td>
<td>nein</td>
<td>List of IP/networks allowed to contact the Prometheus exporter endpoint.</td>
</tr>
</tbody>
</table>
<h2 id="real-ip">Real IP</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Real IP Plugin stellt sicher, dass BunkerWeb die IP-Adresse des Clients auch hinter Proxys korrekt identifiziert. Dies ist unerlässlich für die Anwendung von Sicherheitsregeln, Ratenbegrenzung and zuverlässige Protokolle; andernfalls würden alle Anfragen von der IP des Proxys zu kommen scheinen.</p>
<p>So funktioniert's:</p>
<ol>
<li>Nach der Aktivierung prüft BunkerWeb die Header (z.B. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-For"><code>X-Forwarded-For</code></a>), die die ursprüngliche IP enthalten.</li>
<li>Es wird überprüft, ob die Quell-IP in <code>REAL_IP_FROM</code> (Liste vertrauenswürdiger Proxys) enthalten ist, um nur legitime Proxys zu akzeptieren.</li>
<li>Die Client-IP wird aus dem Header <code>REAL_IP_HEADER</code> extrahiert and für die Sicherheitsbewertung and Protokollierung verwendet.</li>
<li>Bei IP-Ketten kann eine rekursive Suche über <code>REAL_IP_RECURSIVE</code> die ursprüngliche IP ermitteln.</li>
<li>Die Unterstützung für das <a href="https://netnut.io/what-is-proxy-protocol-and-how-does-it-work/">PROXY-Protokoll</a> kann aktiviert werden, um die Client-IP direkt von kompatiblen Proxys (z.B. <a href="https://www.haproxy.org/">HAProxy</a>) zu empfangen.</li>
<li>Listen mit vertrauenswürdigen Proxy-IPs können automatisch über URLs heruntergeladen werden.</li>
</ol>
<h3 id="verwendung_3">Verwendung</h3>
<ol>
<li>Aktivieren: <code>USE_REAL_IP: yes</code>.</li>
<li>Vertrauenswürdige Proxys: Geben Sie IP/Bereiche in <code>REAL_IP_FROM</code> ein.</li>
<li>Header: Geben Sie an, welcher Header die echte IP über <code>REAL_IP_HEADER</code> enthält.</li>
<li>Rekursiv: Aktivieren Sie <code>REAL_IP_RECURSIVE</code> bei Bedarf.</li>
<li>URL-Quellen: Verwenden Sie <code>REAL_IP_FROM_URLS</code>, um Listen herunterzuladen.</li>
<li>PROXY-Protokoll: Aktivieren Sie <code>USE_PROXY_PROTOCOL</code>, wenn das Upstream-System es unterstützt.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Warnung PROXY-Protokoll</p>
</div>
<p>Das Aktivieren von <code>USE_PROXY_PROTOCOL</code> ohne ein korrekt konfiguriertes Upstream-System, das es aussendet, führt dazu, dass Ihre Anwendung nicht funktioniert. Stellen Sie sicher, dass Sie es vor der Aktivierung konfiguriert haben.</p>
<h3 id="parameter_5">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_REAL_IP</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Aktiviert die Abfrage der echten IP aus Headern oder dem PROXY-Protokoll.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REAL_IP_FROM</code></td>
<td style="text-align: left;"><code>192.168.0.0/16 172.16.0.0/12 10.0.0.0/8</code></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Vertrauenswürdige Proxys: Liste von IP/Netzwerken, durch Leerzeichen getrennt.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REAL_IP_HEADER</code></td>
<td style="text-align: left;"><code>X-Forwarded-For</code></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Header, der die echte IP enthält, oder der spezielle Wert <code>proxy_protocol</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REAL_IP_RECURSIVE</code></td>
<td style="text-align: left;"><code>yes</code></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Rekursive Suche in einem Header, der mehrere IPs enthält.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REAL_IP_FROM_URLS</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">URLs, die IPs/Netzwerke von vertrauenswürdigen Proxys bereitstellen (unterstützt <code>file://</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><code>USE_PROXY_PROTOCOL</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Aktiviert die PROXY-Protokoll-Unterstützung für die direkte Proxy→BunkerWeb-Kommunikation.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Cloud-Anbieter</p>
</div>
<p>Fügen Sie die IPs Ihrer Load Balancer (AWS/GCP/Azure…) zu <code>REAL_IP_FROM</code> hinzu, um eine korrekte Identifizierung zu gewährleisten.</p>
<div class="admonition danger">
<p class="admonition-title">Sicherheitsaspekte</p>
</div>
<p>Fügen Sie nur vertrauenswürdige Quellen hinzu, da sonst die Gefahr der IP-Spoofing über manipulierte Header besteht.</p>
<div class="admonition info">
<p class="admonition-title">Mehrere Adressen</p>
</div>
<p>Mit <code>REAL_IP_RECURSIVE</code> wird, wenn der Header mehrere IPs enthält, die erste IP, die nicht als vertrauenswürdiger Proxy aufgeführt ist, als Client-IP verwendet.</p>
<h3 id="beispiele_5">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="66:1"><input checked="checked" id="__tabbed_66_1" name="__tabbed_66" type="radio" /><div class="tabbed-labels"><label for="__tabbed_66_1">Basis (hinter Reverse Proxy)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.5&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
</code></pre></div>
<h2 id="redirect">Redirect</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Das Redirect-Plugin bietet einfache und effiziente HTTP-Umleitungsfunktionen für Ihre von BunkerWeb geschützten Websites. Mit dieser Funktion können Sie Besucher problemlos von einer URL zu einer anderen umleiten und dabei sowohl Umleitungen für die gesamte Domain als auch für bestimmte Pfade mit Beibehaltung des Pfades unterstützen.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Besucher auf Ihre Website zugreift, überprüft BunkerWeb, ob eine Umleitung konfiguriert ist.</li>
<li>Wenn aktiviert, leitet BunkerWeb den Besucher an die angegebene Ziel-URL weiter.</li>
<li>Sie können konfigurieren, ob der ursprüngliche Anfragepfad beibehalten (automatisch an die Ziel-URL angehängt) oder direkt zur exakten Ziel-URL umgeleitet werden soll.</li>
<li>Der für die Umleitung verwendete HTTP-Statuscode kann zwischen permanenten (301) und temporären (302) Umleitungen angepasst werden.</li>
<li>Diese Funktionalität ist ideal für Domain-Migrationen, die Einrichtung kanonischer Domains oder die Umleitung veralteter URLs.</li>
</ol>
<h3 id="wie-man-es-benutzt_16">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Umleitungsfunktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Quellpfad festlegen:</strong> Konfigurieren Sie den Pfad, von dem umgeleitet werden soll, mit der Einstellung <code>REDIRECT_FROM</code> (z. B. <code>/</code>, <code>/old-page</code>).</li>
<li><strong>Ziel-URL festlegen:</strong> Konfigurieren Sie die Ziel-URL, zu der Besucher umgeleitet werden sollen, mit der Einstellung <code>REDIRECT_TO</code>.</li>
<li><strong>Umleitungstyp wählen:</strong> Entscheiden Sie mit der Einstellung <code>REDIRECT_TO_REQUEST_URI</code>, ob der ursprüngliche Anfragepfad beibehalten werden soll.</li>
<li><strong>Statuscode auswählen:</strong> Legen Sie den entsprechenden HTTP-Statuscode mit der Einstellung <code>REDIRECT_TO_STATUS_CODE</code> fest, um eine permanente oder temporäre Umleitung anzuzeigen.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration werden alle Anfragen an die Website automatisch basierend auf Ihren Einstellungen umgeleitet.</li>
</ol>
<h3 id="konfigurationseinstellungen_17">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_FROM</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Pfad, von dem umgeleitet wird:</strong> Der Pfad, der umgeleitet wird.</td>
</tr>
<tr>
<td><code>REDIRECT_TO</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Ziel-URL:</strong> Die Ziel-URL, zu der Besucher umgeleitet werden. Leer lassen, um die Umleitung zu deaktivieren.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_REQUEST_URI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Pfad beibehalten:</strong> Wenn auf <code>yes</code> gesetzt, wird die ursprüngliche Anfrage-URI an die Ziel-URL angehängt.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_STATUS_CODE</code></td>
<td><code>301</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>HTTP-Statuscode:</strong> Der für die Umleitung zu verwendende HTTP-Statuscode. Optionen: <code>301</code> (permanent) oder <code>302</code> (temporär).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Wahl des richtigen Statuscodes</p>
</div>
<ul>
<li>Verwenden Sie <code>301</code> (Moved Permanently), wenn die Umleitung dauerhaft ist, z. B. bei Domain-Migrationen oder zur Einrichtung kanonischer URLs. Dies hilft Suchmaschinen, ihre Indizes zu aktualisieren.</li>
<li>Verwenden Sie <code>302</code> (Found/Temporary Redirect), wenn die Umleitung vorübergehend ist oder wenn Sie die ursprüngliche URL in Zukunft möglicherweise wiederverwenden möchten.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Beibehaltung des Pfades</p>
</div>
<p>Wenn <code>REDIRECT_TO_REQUEST_URI</code> auf <code>yes</code> gesetzt ist, behält BunkerWeb den ursprünglichen Anfragepfad bei. Wenn ein Benutzer beispielsweise <code>https://old-domain.com/blog/post-1</code> besucht und Sie eine Umleitung zu <code>https://new-domain.com</code> eingerichtet haben, wird er zu <code>https://new-domain.com/blog/post-1</code> umgeleitet.</p>
<h3 id="beispielkonfigurationen_17">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="67:5"><input checked="checked" id="__tabbed_67_1" name="__tabbed_67" type="radio" /><input id="__tabbed_67_2" name="__tabbed_67" type="radio" /><input id="__tabbed_67_3" name="__tabbed_67" type="radio" /><input id="__tabbed_67_4" name="__tabbed_67" type="radio" /><input id="__tabbed_67_5" name="__tabbed_67" type="radio" /><div class="tabbed-labels"><label for="__tabbed_67_1">Umleitung mehrerer Pfade</label><label for="__tabbed_67_2">Einfache Domain-Umleitung</label><label for="__tabbed_67_3">Pfadbeibehaltende Umleitung</label><label for="__tabbed_67_4">Temporäre Umleitung</label><label for="__tabbed_67_5">Subdomain-Konsolidierung</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine Konfiguration, die mehrere Pfade an verschiedene Ziele umleitet:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Leitet /blog zu einer neuen Blog-Domain um</span>
<span class="nt">REDIRECT_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/blog/&quot;</span>
<span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://blog.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="c1"># Leitet /shop zu einer anderen Domain um</span>
<span class="nt">REDIRECT_FROM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/shop/&quot;</span>
<span class="nt">REDIRECT_TO_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://shop.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="c1"># Leitet den Rest der Website um</span>
<span class="nt">REDIRECT_FROM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REDIRECT_TO_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration, die alle Besucher auf eine neue Domain umleitet:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration, die Besucher auf eine neue Domain umleitet und dabei den angeforderten Pfad beibehält:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration für eine temporäre Umleitung zu einer Wartungsseite:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://maintenance.example.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;302&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration zur Umleitung einer Subdomain auf einen bestimmten Pfad der Hauptdomain:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/support&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redis">Redis</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Der Redis-Plugin integriert <a href="https://redis.io/">Redis</a> oder <a href="https://valkey.io/">Valkey</a> in BunkerWeb zur Zwischenspeicherung and für schnellen Datenzugriff. Dies ist unerlässlich in Hochverfügbarkeitsumgebungen, um Sitzungen, Metriken and andere Informationen zwischen mehreren Knoten zu teilen.</p>
<p><strong>Funktionsweise:</strong></p>
<ol>
<li>Nach der Aktivierung verbindet sich BunkerWeb mit dem konfigurierten Redis-/Valkey-Server.</li>
<li>Kritische Daten (Sitzungen, Metriken, Sicherheit) werden dort gespeichert.</li>
<li>Mehrere Instanzen teilen diese Daten für ein reibungsloses Clustering.</li>
<li>Unterstützt Standalone-Bereitstellungen, passwortbasierte Authentifizierung, SSL/TLS and Redis Sentinel.</li>
<li>Automatische Wiederverbindung and konfigurierbare Timeouts sorgen für Robustheit.</li>
</ol>
<h3 id="verwendung_4">Verwendung</h3>
<ol>
<li><strong>Aktivieren:</strong> <code>USE_REDIS: yes</code>.</li>
<li><strong>Verbindung:</strong> Host/IP and Port.</li>
<li><strong>Sicherheit:</strong> Anmeldeinformationen, falls erforderlich.</li>
<li><strong>Erweitert:</strong> Datenbank, SSL and Timeouts.</li>
<li><strong>Hochverfügbarkeit:</strong> Konfigurieren Sie Sentinel, falls verwendet.</li>
</ol>
<h3 id="parameter_6">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>USE_REDIS</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Aktiviert die Redis-/Valkey-Integration (Cluster-Modus).</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_HOST</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Host/IP des Redis-/Valkey-Servers.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_PORT</code></td>
<td style="text-align: left;"><code>6379</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Redis-/Valkey-Port.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_DATABASE</code></td>
<td style="text-align: left;"><code>0</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Datenbanknummer (0–15).</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_SSL</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Aktiviert SSL/TLS.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_SSL_VERIFY</code></td>
<td style="text-align: left;"><code>yes</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Überprüft das SSL-Zertifikat des Servers.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_TIMEOUT</code></td>
<td style="text-align: left;"><code>5</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Timeout (Sekunden).</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_USERNAME</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Benutzername (Redis ≥ 6.0).</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_PASSWORD</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Passwort.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_SENTINEL_HOSTS</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Sentinel-Hosts (durch Leerzeichen getrennt, <code>host:port</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_SENTINEL_USERNAME</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Sentinel-Benutzer.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_SENTINEL_PASSWORD</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Sentinel-Passwort.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_SENTINEL_MASTER</code></td>
<td style="text-align: left;"><code>mymaster</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Name des Sentinel-Masters.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_KEEPALIVE_IDLE</code></td>
<td style="text-align: left;"><code>300</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">TCP-Keepalive-Intervall (Sekunden) für inaktive Verbindungen.</td>
</tr>
<tr>
<td style="text-align: left;"><code>REDIS_KEEPALIVE_POOL</code></td>
<td style="text-align: left;"><code>3</code></td>
<td style="text-align: left;">global</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Maximale Anzahl der im Pool gehaltenen Verbindungen.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Hochverfügbarkeit</p>
</div>
<p>Konfigurieren Sie Redis Sentinel für ein automatisches Failover in der Produktion.</p>
<div class="admonition warning">
<p class="admonition-title">Sicherheit</p>
</div>
<ul>
<li>Verwenden Sie starke Passwörter für Redis and Sentinel.</li>
<li>Erwägen Sie die Verwendung von SSL/TLS.</li>
<li>Setzen Sie Redis nicht dem Internet aus.</li>
<li>Beschränken Sie den Zugriff auf den Redis-Port (Firewall, Segmentierung).</li>
</ul>
<h3 id="beispiele_6">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="68:1"><input checked="checked" id="__tabbed_68_1" name="__tabbed_68" type="radio" /><div class="tabbed-labels"><label for="__tabbed_68_1">Basiskonfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="69:1"><input checked="checked" id="__tabbed_69_1" name="__tabbed_69" type="radio" /><div class="tabbed-labels"><label for="__tabbed_69_1">Sichere Konfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="70:1"><input checked="checked" id="__tabbed_70_1" name="__tabbed_70" type="radio" /><div class="tabbed-labels"><label for="__tabbed_70_1">Redis Sentinel</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SENTINEL_HOSTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel1:26379</span><span class="nv"> </span><span class="s">sentinel2:26379</span><span class="nv"> </span><span class="s">sentinel3:26379&quot;</span>
<span class="nt">REDIS_SENTINEL_MASTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mymaster&quot;</span>
<span class="nt">REDIS_SENTINEL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel-password&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis-password&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="71:1"><input checked="checked" id="__tabbed_71_1" name="__tabbed_71" type="radio" /><div class="tabbed-labels"><label for="__tabbed_71_1">Erweitertes Tuning</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_KEEPALIVE_IDLE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">REDIS_KEEPALIVE_POOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
<h2 id="reporting-pro">Reporting <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Regular reporting of important data from BunkerWeb (global, attacks, bans, requests, reasons, AS...). Monitoring pro plugin needed to work.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REPORTING_SMTP</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td>Enable sending the report via email.</td>
</tr>
<tr>
<td><code>USE_REPORTING_WEBHOOK</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td>Enable sending the report via webhook.</td>
</tr>
<tr>
<td><code>REPORTING_SCHEDULE</code></td>
<td><code>weekly</code></td>
<td>global</td>
<td>nein</td>
<td>The frequency at which reports are sent.</td>
</tr>
<tr>
<td><code>REPORTING_WEBHOOK_URLS</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>List of webhook URLs to receive the report in Markdown (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_EMAILS</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>List of email addresses to receive the report in HTML format (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_HOST</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The host server used for SMTP sending.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_PORT</code></td>
<td><code>465</code></td>
<td>global</td>
<td>nein</td>
<td>The port used for SMTP. Please note that there are different standards depending on the type of connection (SSL = 465, TLS = 587).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_EMAIL</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The email address used as the sender. Note that 2FA must be disabled for this email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_USER</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The user authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>The password authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SSL</code></td>
<td><code>SSL</code></td>
<td>global</td>
<td>nein</td>
<td>Determine whether or not to use a secure connection for SMTP.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SUBJECT</code></td>
<td><code>BunkerWeb Report</code></td>
<td>global</td>
<td>nein</td>
<td>The subject line of the email.</td>
</tr>
</tbody>
</table>
<h2 id="reverse-proxy">Reverse proxy</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Reverse-Proxy-Plugin bietet nahtlose Proxy-Funktionen für BunkerWeb, mit denen Sie Anfragen an Backend-Server und -Dienste weiterleiten können. Mit dieser Funktion kann BunkerWeb als sicheres Frontend für Ihre Anwendungen fungieren und gleichzeitig zusätzliche Vorteile wie SSL-Terminierung und Sicherheitsfilterung bieten.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Client eine Anfrage an BunkerWeb sendet, leitet das Reverse-Proxy-Plugin die Anfrage an Ihren konfigurierten Backend-Server weiter.</li>
<li>BunkerWeb fügt Sicherheitsheader hinzu, wendet WAF-Regeln an und führt andere Sicherheitsprüfungen durch, bevor die Anfragen an Ihre Anwendung weitergeleitet werden.</li>
<li>Der Backend-Server verarbeitet die Anfrage und gibt eine Antwort an BunkerWeb zurück.</li>
<li>BunkerWeb wendet zusätzliche Sicherheitsmaßnahmen auf die Antwort an, bevor sie an den Client zurückgesendet wird.</li>
<li>Das Plugin unterstützt sowohl HTTP- als auch TCP/UDP-Stream-Proxying und ermöglicht so eine breite Palette von Anwendungen, einschließlich WebSockets und anderen Nicht-HTTP-Protokollen.</li>
</ol>
<h3 id="wie-man-es-benutzt_17">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Reverse-Proxy-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Setzen Sie die Einstellung <code>USE_REVERSE_PROXY</code> auf <code>yes</code>, um die Reverse-Proxy-Funktionalität zu aktivieren.</li>
<li><strong>Konfigurieren Sie Ihre Backend-Server:</strong> Geben Sie die Upstream-Server mit der Einstellung <code>REVERSE_PROXY_HOST</code> an.</li>
<li><strong>Proxy-Einstellungen anpassen:</strong> Optimieren Sie das Verhalten mit optionalen Einstellungen für Zeitüberschreitungen, Puffergrößen und andere Parameter.</li>
<li><strong>Protokollspezifische Optionen konfigurieren:</strong> Passen Sie für WebSockets oder spezielle HTTP-Anforderungen die entsprechenden Einstellungen an.</li>
<li><strong>Caching einrichten (optional):</strong> Aktivieren und konfigurieren Sie das Proxy-Caching, um die Leistung für häufig aufgerufene Inhalte zu verbessern.</li>
</ol>
<h3 id="konfigurationsanleitung_1">Konfigurationsanleitung</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="72:8"><input checked="checked" id="__tabbed_72_1" name="__tabbed_72" type="radio" /><input id="__tabbed_72_2" name="__tabbed_72" type="radio" /><input id="__tabbed_72_3" name="__tabbed_72" type="radio" /><input id="__tabbed_72_4" name="__tabbed_72" type="radio" /><input id="__tabbed_72_5" name="__tabbed_72" type="radio" /><input id="__tabbed_72_6" name="__tabbed_72" type="radio" /><input id="__tabbed_72_7" name="__tabbed_72" type="radio" /><input id="__tabbed_72_8" name="__tabbed_72" type="radio" /><div class="tabbed-labels"><label for="__tabbed_72_1">Grundlegende Konfiguration</label><label for="__tabbed_72_2">Verbindungseinstellungen</label><label for="__tabbed_72_3">SSL/TLS-Konfiguration</label><label for="__tabbed_72_4">Protokollunterstützung</label><label for="__tabbed_72_5">Header-Verwaltung</label><label for="__tabbed_72_6">Authentifizierung</label><label for="__tabbed_72_7">Erweiterte Konfiguration</label><label for="__tabbed_72_8">Caching-Konfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Kerneinstellungen</strong></p>
<p>Die wesentlichen Konfigurationseinstellungen aktivieren und steuern die Grundfunktionalität der Reverse-Proxy-Funktion.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile des Reverse-Proxy</p>
<ul>
<li><strong>Sicherheitsverbesserung:</strong> Der gesamte Datenverkehr durchläuft die Sicherheitsschichten von BunkerWeb, bevor er Ihre Anwendungen erreicht</li>
<li><strong>SSL-Terminierung:</strong> Verwalten Sie SSL/TLS-Zertifikate zentral, während Backend-Dienste unverschlüsselte Verbindungen verwenden können</li>
<li><strong>Protokollbehandlung:</strong> Unterstützung für HTTP, HTTPS, WebSockets und andere Protokolle</li>
<li><strong>Fehlerabfang:</strong> Passen Sie Fehlerseiten für ein einheitliches Benutzererlebnis an</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_PROXY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Reverse-Proxy aktivieren:</strong> Auf <code>yes</code> setzen, um die Reverse-Proxy-Funktionalität zu aktivieren.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HOST</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Backend-Host:</strong> Vollständige URL der weitergeleiteten Ressource (proxy_pass).</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Standort-URL:</strong> Pfad, der zum Backend-Server weitergeleitet wird.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_BUFFERING</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Antwort-Pufferung:</strong> Aktiviert oder deaktiviert die Pufferung von Antworten von der weitergeleiteten Ressource.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_KEEPALIVE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Keep-Alive:</strong> Aktiviert oder deaktiviert Keep-Alive-Verbindungen mit der weitergeleiteten Ressource.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_CUSTOM_HOST</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Benutzerdefinierter Host:</strong> Überschreibt den an den Upstream-Server gesendeten Host-Header.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_INTERCEPT_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Fehler abfangen:</strong> Ob Fehlerantworten vom Backend abgefangen und neu geschrieben werden sollen.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken</p>
<ul>
<li>Geben Sie in <code>REVERSE_PROXY_HOST</code> immer die vollständige URL an, einschließlich des Protokolls (http:// oder https://)</li>
<li>Verwenden Sie <code>REVERSE_PROXY_INTERCEPT_ERRORS</code>, um konsistente Fehlerseiten für alle Ihre Dienste bereitzustellen</li>
<li>Verwenden Sie bei der Konfiguration mehrerer Backends das nummerierte Suffixformat (z. B. <code>REVERSE_PROXY_HOST_2</code>, <code>REVERSE_PROXY_URL_2</code>)</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Konfiguration von Verbindungen und Zeitüberschreitungen</strong></p>
<p>Diese Einstellungen steuern das Verbindungsverhalten, die Pufferung und die Zeitüberschreitungswerte für die weitergeleiteten Verbindungen.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Optimierte Leistung:</strong> Passen Sie Puffergrößen und Verbindungseinstellungen an die Bedürfnisse Ihrer Anwendung an</li>
<li><strong>Ressourcenmanagement:</strong> Kontrollieren Sie die Speichernutzung durch geeignete Pufferkonfigurationen</li>
<li><strong>Zuverlässigkeit:</strong> Konfigurieren Sie geeignete Zeitüberschreitungen, um langsame Verbindungen oder Backend-Probleme zu bewältigen</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_CONNECT_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Verbindungs-Timeout:</strong> Maximale Zeit zum Herstellen einer Verbindung zum Backend-Server.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_READ_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Lese-Timeout:</strong> Maximale Zeit zwischen der Übertragung von zwei aufeinanderfolgenden Paketen vom Backend-Server.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SEND_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Sende-Timeout:</strong> Maximale Zeit zwischen der Übertragung von zwei aufeinanderfolgenden Paketen zum Backend-Server.</td>
</tr>
<tr>
<td><code>PROXY_BUFFERS</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Puffer:</strong> Anzahl und Größe der Puffer zum Lesen der Antwort vom Backend-Server.</td>
</tr>
<tr>
<td><code>PROXY_BUFFER_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Puffergröße:</strong> Größe des Puffers zum Lesen des ersten Teils der Antwort vom Backend-Server.</td>
</tr>
<tr>
<td><code>PROXY_BUSY_BUFFERS_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Größe der belegten Puffer:</strong> Größe der Puffer, die mit dem Senden einer Antwort an den Client beschäftigt sein können.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Überlegungen zu Zeitüberschreitungen</p>
<ul>
<li>Zu kurze Zeitüberschreitungen können legitime, aber langsame Verbindungen unterbrechen</li>
<li>Zu lange Zeitüberschreitungen können Verbindungen unnötig offen lassen und möglicherweise Ressourcen erschöpfen</li>
<li>Bei WebSocket-Anwendungen sollten Sie die Lese- und Sende-Timeouts deutlich erhöhen (300s oder mehr empfohlen)</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>SSL/TLS-Einstellungen für Backend-Verbindungen</strong></p>
<p>Diese Einstellungen steuern, wie BunkerWeb sichere Verbindungen zu Backend-Servern herstellt.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Ende-zu-Ende-Verschlüsselung:</strong> Behalten Sie verschlüsselte Verbindungen vom Client zum Backend bei</li>
<li><strong>Zertifikatsvalidierung:</strong> Kontrollieren Sie, wie Backend-Serverzertifikate validiert werden</li>
<li><strong>SNI-Unterstützung:</strong> Geben Sie die Server Name Indication für Backends an, die mehrere Websites hosten</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>SSL SNI:</strong> Aktiviert oder deaktiviert das Senden von SNI (Server Name Indication) an den Upstream.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI_NAME</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>SSL SNI-Name:</strong> Legt den SNI-Hostnamen fest, der an den Upstream gesendet wird, wenn SSL SNI aktiviert ist.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">SNI erklärt</p>
<p>Server Name Indication (SNI) ist eine TLS-Erweiterung, die es einem Client ermöglicht, den Hostnamen anzugeben, mit dem er während des Handshake-Prozesses eine Verbindung herstellen möchte. Dies ermöglicht es Servern, mehrere Zertifikate auf derselben IP-Adresse und demselben Port zu präsentieren, sodass mehrere sichere (HTTPS-)Websites von einer einzigen IP-Adresse aus bedient werden können, ohne dass alle diese Websites dasselbe Zertifikat verwenden müssen.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Protokollspezifische Konfiguration</strong></p>
<p>Konfigurieren Sie die Behandlung spezieller Protokolle, insbesondere für WebSockets und andere Nicht-HTTP-Protokolle.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Protokollflexibilität:</strong> Die Unterstützung für WebSockets ermöglicht Echtzeitanwendungen</li>
<li><strong>Moderne Webanwendungen:</strong> Aktivieren Sie interaktive Funktionen, die eine bidirektionale Kommunikation erfordern</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_WS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>WebSocket-Unterstützung:</strong> Aktiviert das WebSocket-Protokoll für die Ressource.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">WebSocket-Konfiguration</p>
<ul>
<li>Bei der Aktivierung von WebSockets mit <code>REVERSE_PROXY_WS: "yes"</code> sollten Sie die Zeitüberschreitungswerte erhöhen</li>
<li>WebSocket-Verbindungen bleiben länger offen als typische HTTP-Verbindungen</li>
<li>Für WebSocket-Anwendungen wird folgende Konfiguration empfohlen:
  <div class="highlight"><pre><span></span><code><span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div></li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>HTTP-Header-Konfiguration</strong></p>
<p>Kontrollieren Sie, welche Header an Backend-Server und Clients gesendet werden, und ermöglichen Sie das Hinzufügen, Ändern oder Beibehalten von HTTP-Headern.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Informationskontrolle:</strong> Verwalten Sie genau, welche Informationen zwischen Clients und Backends ausgetauscht werden</li>
<li><strong>Sicherheitsverbesserung:</strong> Fügen Sie sicherheitsrelevante Header hinzu oder entfernen Sie Header, die sensible Informationen preisgeben könnten</li>
<li><strong>Integrationsunterstützung:</strong> Stellen Sie die für die Authentifizierung und den ordnungsgemäßen Backend-Betrieb erforderlichen Header bereit</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_HEADERS</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Benutzerdefinierte Header:</strong> HTTP-Header, die durch Semikolons getrennt an das Backend gesendet werden.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HIDE_HEADERS</code></td>
<td><code>Upgrade</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Header ausblenden:</strong> HTTP-Header, die vor Clients verborgen werden sollen, wenn sie vom Backend empfangen werden.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HEADERS_CLIENT</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Client-Header:</strong> HTTP-Header, die durch Semikolons getrennt an den Client gesendet werden.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_UNDERSCORES_IN_HEADERS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Unterstriche in Headern:</strong> Aktiviert oder deaktiviert die <code>underscores_in_headers</code>-Direktive.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sicherheitsüberlegungen</p>
<p>Seien Sie bei der Verwendung der Reverse-Proxy-Funktion vorsichtig, welche Header Sie an Ihre Backend-Anwendungen weiterleiten. Bestimmte Header können sensible Informationen über Ihre Infrastruktur preisgeben oder Sicherheitskontrollen umgehen.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Beispiele für Header-Formate</p>
<p>Benutzerdefinierte Header an Backend-Server:
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS: &quot;X-Real-IP $remote_addr;X-Forwarded-For $proxy_add_x_forwarded_for;X-Forwarded-Proto $scheme&quot;
</code></pre></div></p>
<p>Benutzerdefinierte Header an Clients:
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS_CLIENT: &quot;X-Powered-By BunkerWeb;X-Frame-Options SAMEORIGIN&quot;
</code></pre></div></p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Konfiguration der externen Authentifizierung</strong></p>
<p>Integrieren Sie externe Authentifizierungssysteme, um die Autorisierungslogik für Ihre Anwendungen zu zentralisieren.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Zentralisierte Authentifizierung:</strong> Implementieren Sie einen einzigen Authentifizierungspunkt für mehrere Anwendungen</li>
<li><strong>Konsistente Sicherheit:</strong> Wenden Sie einheitliche Authentifizierungsrichtlinien für verschiedene Dienste an</li>
<li><strong>Verbesserte Kontrolle:</strong> Leiten Sie Authentifizierungsdetails über Header oder Variablen an Backend-Anwendungen weiter</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Authentifizierungsanforderung:</strong> Aktiviert die Authentifizierung über einen externen Anbieter.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Anmelde-URL:</strong> Leitet Clients bei fehlgeschlagener Authentifizierung zur Anmelde-URL weiter.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SET</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Authentifizierungsanforderungssatz:</strong> Variablen, die vom Authentifizierungsanbieter festgelegt werden sollen.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Authentifizierungsintegration</p>
<ul>
<li>Die Authentifizierungsanforderungsfunktion ermöglicht die Implementierung zentralisierter Authentifizierungsmikrodienste</li>
<li>Ihr Authentifizierungsdienst sollte bei erfolgreicher Authentifizierung einen 200-Statuscode oder bei einem Fehler 401/403 zurückgeben</li>
<li>Verwenden Sie die auth_request_set-Direktive, um Informationen vom Authentifizierungsdienst zu extrahieren und weiterzuleiten</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>Zusätzliche Konfigurationsoptionen</strong></p>
<p>Diese Einstellungen bieten eine weitere Anpassung des Reverse-Proxy-Verhaltens für spezielle Szenarien.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Anpassung:</strong> Fügen Sie zusätzliche Konfigurationsausschnitte für komplexe Anforderungen hinzu</li>
<li><strong>Leistungsoptimierung:</strong> Optimieren Sie die Anforderungsbehandlung für bestimmte Anwendungsfälle</li>
<li><strong>Flexibilität:</strong> Passen Sie sich mit speziellen Konfigurationen an einzigartige Anwendungsanforderungen an</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_INCLUDES</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Zusätzliche Konfigurationen:</strong> Fügen Sie zusätzliche Konfigurationen in den Standortblock ein.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_PASS_REQUEST_BODY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Anforderungskörper weiterleiten:</strong> Aktiviert oder deaktiviert das Weiterleiten des Anforderungskörpers.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sicherheitsüberlegungen</p>
<p>Seien Sie vorsichtig, wenn Sie benutzerdefinierte Konfigurationsausschnitte einfügen, da diese die Sicherheitseinstellungen von BunkerWeb überschreiben oder bei unsachgemäßer Konfiguration Schwachstellen einführen können.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Einstellungen für das Caching von Antworten</strong></p>
<p>Verbessern Sie die Leistung durch das Caching von Antworten von Backend-Servern, wodurch die Last reduziert und die Antwortzeiten verbessert werden.</p>
<div class="admonition success">
<p class="admonition-title">Vorteile</p>
<ul>
<li><strong>Leistung:</strong> Reduzieren Sie die Last auf Backend-Servern, indem Sie zwischengespeicherte Inhalte bereitstellen</li>
<li><strong>Reduzierte Latenz:</strong> Schnellere Antwortzeiten für häufig angeforderte Inhalte</li>
<li><strong>Bandbreiteneinsparungen:</strong> Minimieren Sie den internen Netzwerkverkehr durch das Caching von Antworten</li>
<li><strong>Anpassung:</strong> Konfigurieren Sie genau, was, wann und wie Inhalte zwischengespeichert werden</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROXY_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Caching aktivieren:</strong> Auf <code>yes</code> setzen, um das Caching von Backend-Antworten zu aktivieren.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_LEVELS</code></td>
<td><code>1:2</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Cache-Pfad-Ebenen:</strong> Wie die Hierarchie des Cache-Verzeichnisses strukturiert werden soll.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_ZONE_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Cache-Zonengröße:</strong> Größe des gemeinsam genutzten Speicherbereichs, der für Cache-Metadaten verwendet wird.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_PARAMS</code></td>
<td><code>max_size=100m</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Cache-Pfad-Parameter:</strong> Zusätzliche Parameter für den Cache-Pfad.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_METHODS</code></td>
<td><code>GET HEAD</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Methoden:</strong> HTTP-Methoden, die zwischengespeichert werden können.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Mindestverwendungen für Cache:</strong> Mindestanzahl von Anfragen, bevor eine Antwort zwischengespeichert wird.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_KEY</code></td>
<td><code>$scheme$host$request_uri</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Schlüssel:</strong> Der Schlüssel, der zur eindeutigen Identifizierung einer zwischengespeicherten Antwort verwendet wird.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_VALID</code></td>
<td><code>200=24h 301=1h 302=24h</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Gültigkeit:</strong> Wie lange bestimmte Antwortcodes zwischengespeichert werden sollen.</td>
</tr>
<tr>
<td><code>PROXY_NO_CACHE</code></td>
<td><code>$http_pragma $http_authorization</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Kein Cache:</strong> Bedingungen, unter denen Antworten nicht zwischengespeichert werden, auch wenn sie normalerweise zwischengespeichert werden könnten.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_BYPASS</code></td>
<td><code>0</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Cache-Umgehung:</strong> Bedingungen, unter denen der Cache umgangen werden soll.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Bewährte Praktiken für das Caching</p>
<ul>
<li>Speichern Sie nur Inhalte zwischen, die sich nicht häufig ändern oder nicht personalisiert sind</li>
<li>Verwenden Sie je nach Inhaltstyp geeignete Cache-Dauern (statische Assets können länger zwischengespeichert werden)</li>
<li>Konfigurieren Sie <code>PROXY_NO_CACHE</code>, um das Zwischenspeichern sensibler oder personalisierter Inhalte zu vermeiden</li>
<li>Überwachen Sie die Cache-Trefferquoten und passen Sie die Einstellungen entsprechend an</li>
</ul>
</div>
</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">Docker Compose-Benutzer - NGINX-Variablen</p>
</div>
<p>Wenn Sie Docker Compose mit NGINX-Variablen in Ihren Konfigurationen verwenden, müssen Sie das Dollarzeichen (<code>$</code>) durch doppelte Dollarzeichen (<code>$$</code>) maskieren. Dies gilt für alle Einstellungen, die NGINX-Variablen wie <code>$remote_addr</code>, <code>$proxy_add_x_forwarded_for</code> usw. enthalten.</p>
<pre><code>Ohne diese Maskierung versucht Docker Compose, diese Variablen durch Umgebungsvariablen zu ersetzen, die normalerweise nicht existieren, was zu leeren Werten in Ihrer NGINX-Konfiguration führt.
</code></pre>
<h3 id="beispielkonfigurationen_18">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="73:6"><input checked="checked" id="__tabbed_73_1" name="__tabbed_73" type="radio" /><input id="__tabbed_73_2" name="__tabbed_73" type="radio" /><input id="__tabbed_73_3" name="__tabbed_73" type="radio" /><input id="__tabbed_73_4" name="__tabbed_73" type="radio" /><input id="__tabbed_73_5" name="__tabbed_73" type="radio" /><input id="__tabbed_73_6" name="__tabbed_73" type="radio" /><div class="tabbed-labels"><label for="__tabbed_73_1">Grundlegender HTTP-Proxy</label><label for="__tabbed_73_2">WebSocket-Anwendung</label><label for="__tabbed_73_3">Mehrere Standorte</label><label for="__tabbed_73_4">Caching-Konfiguration</label><label for="__tabbed_73_5">Erweiterte Header-Verwaltung</label><label for="__tabbed_73_6">Authentifizierungsintegration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration zum Weiterleiten von HTTP-Anfragen an einen Backend-Anwendungsserver:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die für eine WebSocket-Anwendung mit längeren Zeitüberschreitungen optimiert ist:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://websocket-app:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration zum Weiterleiten verschiedener Pfade an verschiedene Backend-Dienste:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># API-Backend</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://api-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/&quot;</span>

<span class="c1"># Admin-Backend</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://admin-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>

<span class="c1"># Frontend-App</span>
<span class="nt">REVERSE_PROXY_HOST_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://frontend:3000&quot;</span>
<span class="nt">REVERSE_PROXY_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit aktiviertem Proxy-Caching für eine bessere Leistung:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">USE_PROXY_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">PROXY_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200=24h</span><span class="nv"> </span><span class="s">301=1h</span><span class="nv"> </span><span class="s">302=24h&quot;</span>
<span class="nt">PROXY_CACHE_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET</span><span class="nv"> </span><span class="s">HEAD&quot;</span>
<span class="nt">PROXY_NO_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$http_authorization&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit benutzerdefinierter Header-Manipulation:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># Benutzerdefinierte Header an das Backend</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP</span><span class="nv"> </span><span class="s">$remote_addr;X-Forwarded-For</span><span class="nv"> </span><span class="s">$proxy_add_x_forwarded_for;X-Forwarded-Proto</span><span class="nv"> </span><span class="s">$scheme&quot;</span>

<span class="c1"># Benutzerdefinierte Header an den Client</span>
<span class="nt">REVERSE_PROXY_HEADERS_CLIENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Powered-By</span><span class="nv"> </span><span class="s">BunkerWeb;X-Frame-Options</span><span class="nv"> </span><span class="s">SAMEORIGIN&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit externer Authentifizierung:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># Authentifizierungskonfiguration</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://login.example.com&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$auth_user</span><span class="nv"> </span><span class="s">$upstream_http_x_user;$auth_role</span><span class="nv"> </span><span class="s">$upstream_http_x_role&quot;</span>

<span class="c1"># Backend des Authentifizierungsdienstes</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://auth-service:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="reverse-scan">Reverse scan</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Reverse Scan-Plugin schützt robust vor Proxy-Umgehungsversuchen, indem es die Ports der Clients scannt, um festzustellen, ob sie Proxyserver oder andere Netzwerkdienste betreiben. Diese Funktion hilft dabei, potenzielle Bedrohungen von Clients zu identifizieren und zu blockieren, die möglicherweise versuchen, ihre wahre Identität oder Herkunft zu verbergen, und verbessert so die Sicherheitslage Ihrer Website.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Client eine Verbindung zu Ihrem Server herstellt, versucht BunkerWeb, bestimmte Ports auf der IP-Adresse des Clients zu scannen.</li>
<li>Das Plugin prüft, ob gängige Proxy-Ports (wie 80, 443, 8080 usw.) auf der Client-Seite geöffnet sind.</li>
<li>Wenn offene Ports erkannt werden, was darauf hindeutet, dass der Client möglicherweise einen Proxyserver betreibt, wird die Verbindung verweigert.</li>
<li>Dies fügt eine zusätzliche Sicherheitsebene gegen automatisierte Tools, Bots und böswillige Benutzer hinzu, die versuchen, ihre Identität zu verschleiern.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Wichtige Vorteile</p>
<ol>
<li><strong>Erhöhte Sicherheit:</strong> Identifiziert Clients, die potenziell Proxyserver betreiben, die für bösartige Zwecke verwendet werden könnten.</li>
<li><strong>Proxy-Erkennung:</strong> Hilft bei der Erkennung und Blockierung von Clients, die versuchen, ihre wahre Identität zu verbergen.</li>
<li><strong>Konfigurierbare Einstellungen:</strong> Passen Sie an, welche Ports basierend auf Ihren spezifischen Sicherheitsanforderungen gescannt werden sollen.</li>
<li><strong>Leistungsoptimiert:</strong> Intelligentes Scannen mit konfigurierbaren Zeitüberschreitungen, um die Auswirkungen auf legitime Benutzer zu minimieren.</li>
<li><strong>Nahtlose Integration:</strong> Arbeitet transparent mit Ihren bestehenden Sicherheitsebenen zusammen.</li>
</ol>
</div>
<h3 id="wie-man-es-benutzt_18">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Reverse-Scan-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Setzen Sie die Einstellung <code>USE_REVERSE_SCAN</code> auf <code>yes</code>, um das Scannen von Client-Ports zu aktivieren.</li>
<li><strong>Zu scannende Ports konfigurieren:</strong> Passen Sie die Einstellung <code>REVERSE_SCAN_PORTS</code> an, um anzugeben, welche Client-Ports überprüft werden sollen.</li>
<li><strong>Scan-Timeout festlegen:</strong> Passen Sie den <code>REVERSE_SCAN_TIMEOUT</code> an, um ein Gleichgewicht zwischen gründlichem Scannen und Leistung zu finden.</li>
<li><strong>Scan-Aktivität überwachen:</strong> Überprüfen Sie die Protokolle und die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um die Scan-Ergebnisse und potenzielle Sicherheitsvorfälle zu überprüfen.</li>
</ol>
<h3 id="konfigurationseinstellungen_18">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_SCAN</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Reverse-Scan aktivieren:</strong> Auf <code>yes</code> setzen, um das Scannen von Client-Ports zu aktivieren.</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_PORTS</code></td>
<td><code>22 80 443 3128 8000 8080</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Zu scannende Ports:</strong> Leerzeichengetrennte Liste der zu überprüfenden Ports auf der Client-Seite.</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_TIMEOUT</code></td>
<td><code>500</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Scan-Timeout:</strong> Maximale Zeit in Millisekunden, die für das Scannen eines Ports zulässig ist.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Leistungsüberlegungen</p>
</div>
<p>Das Scannen mehrerer Ports kann die Latenz bei Client-Verbindungen erhöhen. Verwenden Sie einen angemessenen Zeitüberschreitungswert und begrenzen Sie die Anzahl der gescannten Ports, um eine gute Leistung aufrechtzuerhalten.</p>
<div class="admonition info">
<p class="admonition-title">Gängige Proxy-Ports</p>
</div>
<p>Die Standardkonfiguration umfasst gängige Ports, die von Proxyservern (80, 443, 8080, 3128) und SSH (22) verwendet werden. Sie können diese Liste basierend auf Ihrem Bedrohungsmodell anpassen.</p>
<h3 id="beispielkonfigurationen_19">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="74:4"><input checked="checked" id="__tabbed_74_1" name="__tabbed_74" type="radio" /><input id="__tabbed_74_2" name="__tabbed_74" type="radio" /><input id="__tabbed_74_3" name="__tabbed_74" type="radio" /><input id="__tabbed_74_4" name="__tabbed_74" type="radio" /><div class="tabbed-labels"><label for="__tabbed_74_1">Grundlegende Konfiguration</label><label for="__tabbed_74_2">Umfassendes Scannen</label><label for="__tabbed_74_3">Leistungsoptimierte Konfiguration</label><label for="__tabbed_74_4">Hochsicherheitskonfiguration</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration zum Aktivieren des Client-Port-Scannens:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine gründlichere Konfiguration, die zusätzliche Ports überprüft:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">8081&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration, die auf eine bessere Leistung abgestimmt ist, indem weniger Ports mit einer geringeren Zeitüberschreitung überprüft werden:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit Fokus auf maximale Sicherheit mit erweitertem Scannen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">25</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">4444</span><span class="nv"> </span><span class="s">5555</span><span class="nv"> </span><span class="s">6588</span><span class="nv"> </span><span class="s">6666</span><span class="nv"> </span><span class="s">7777</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8081</span><span class="nv"> </span><span class="s">8800</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">9999&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="robotstxt">Robots.txt</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Robots.txt-Plugin verwaltet die Datei <a href="https://www.robotstxt.org/">robots.txt</a> für Ihre Website. Diese Datei teilt Web-Crawlern und Robotern mit, auf welche Teile Ihrer Website sie zugreifen dürfen und auf welche nicht.</p>
<p><strong>So funktioniert es:</strong></p>
<p>Wenn aktiviert, generiert BunkerWeb dynamisch die <code>/robots.txt</code>-Datei im Stammverzeichnis Ihrer Website. Die Regeln in dieser Datei werden in der folgenden Reihenfolge aus mehreren Quellen zusammengefasst:</p>
<ol>
<li><strong>DarkVisitors-API:</strong> Wenn <code>ROBOTSTXT_DARKVISITORS_TOKEN</code> angegeben ist, werden Regeln von der <a href="https://darkvisitors.com/">DarkVisitors</a>-API abgerufen, was eine dynamische Blockierung bösartiger Bots und KI-Crawler basierend auf konfigurierten Agententypen und nicht zugelassenen Benutzeragenten ermöglicht.</li>
<li><strong>Community-Listen:</strong> Regeln aus vordefinierten, von der Community gepflegten <code>robots.txt</code>-Listen (angegeben durch <code>ROBOTSTXT_COMMUNITY_LISTS</code>) werden einbezogen.</li>
<li><strong>Benutzerdefinierte URLs:</strong> Regeln werden von vom Benutzer bereitgestellten URLs abgerufen (angegeben durch <code>ROBOTSTXT_URLS</code>).</li>
<li><strong>Manuelle Regeln:</strong> Regeln, die direkt über <code>ROBOTSTXT_RULE</code>-Umgebungsvariablen definiert werden, werden hinzugefügt.</li>
</ol>
<p>Alle Regeln aus diesen Quellen werden kombiniert. Nach der Aggregation werden <code>ROBOTSTXT_IGNORE_RULE</code> angewendet, um unerwünschte Regeln mit PCRE-Regex-Mustern herauszufiltern. Wenn nach diesem gesamten Prozess keine Regeln mehr übrig sind, wird automatisch eine Standardregel <code>User-agent: *</code> und <code>Disallow: /</code> angewendet, um einen grundlegenden Schutz zu gewährleisten. Optionale Sitemap-URLs (angegeben durch <code>ROBOTSTXT_SITEMAP</code>) werden ebenfalls in die endgültige <code>robots.txt</code>-Ausgabe aufgenommen.</p>
<h3 id="dynamische-bot-umgehung-mit-der-darkvisitors-api">Dynamische Bot-Umgehung mit der DarkVisitors-API</h3>
<p><a href="https://darkvisitors.com/">DarkVisitors</a> ist ein Dienst, der eine dynamische <code>robots.txt</code>-Datei bereitstellt, um bekannte bösartige Bots und KI-Crawler zu blockieren. Durch die Integration mit DarkVisitors kann BunkerWeb automatisch eine aktuelle <code>robots.txt</code> abrufen und bereitstellen, die Ihre Website vor unerwünschtem automatisiertem Datenverkehr schützt.</p>
<p>Um dies zu aktivieren, müssen Sie sich bei <a href="https://darkvisitors.com/docs/robots-txt">darkvisitors.com</a> anmelden und ein Bearer-Token erhalten.</p>
<h3 id="wie-man-es-benutzt_19">Wie man es benutzt</h3>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Setzen Sie die Einstellung <code>USE_ROBOTSTXT</code> auf <code>yes</code>.</li>
<li><strong>Regeln konfigurieren:</strong> Wählen Sie eine oder mehrere Methoden, um Ihre <code>robots.txt</code>-Regeln zu definieren:<ul>
<li><strong>DarkVisitors-API:</strong> Geben Sie <code>ROBOTSTXT_DARKVISITORS_TOKEN</code> und optional <code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code> und <code>ROBOTSTXT_DARKVISITORS_DISALLOW</code> an.</li>
<li><strong>Community-Listen:</strong> Geben Sie <code>ROBOTSTXT_COMMUNITY_LISTS</code> an (durch Leerzeichen getrennte IDs).</li>
<li><strong>Benutzerdefinierte URLs:</strong> Geben Sie <code>ROBOTSTXT_URLS</code> an (durch Leerzeichen getrennte URLs).</li>
<li><strong>Manuelle Regeln:</strong> Verwenden Sie <code>ROBOTSTXT_RULE</code> für einzelne Regeln (mehrere Regeln können mit <code>ROBOTSTXT_RULE_N</code> angegeben werden).</li>
</ul>
</li>
<li><strong>Regeln filtern (optional):</strong> Verwenden Sie <code>ROBOTSTXT_IGNORE_RULE_N</code>, um bestimmte Regeln nach Regex-Muster auszuschließen.</li>
<li><strong>Sitemaps hinzufügen (optional):</strong> Verwenden Sie <code>ROBOTSTXT_SITEMAP_N</code> für Sitemap-URLs.</li>
<li><strong>Die generierte robots.txt-Datei abrufen:</strong> Sobald BunkerWeb mit den obigen Einstellungen läuft, können Sie auf die dynamisch generierte <code>robots.txt</code>-Datei zugreifen, indem Sie eine HTTP-GET-Anfrage an <code>http(s)://your-domain.com/robots.txt</code> senden.</li>
</ol>
<h3 id="konfigurationseinstellungen_19">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ROBOTSTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>Nein</td>
<td>Aktiviert oder deaktiviert die <code>robots.txt</code>-Funktion.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_TOKEN</code></td>
<td></td>
<td>multisite</td>
<td>Nein</td>
<td>Bearer-Token für die DarkVisitors-API.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code></td>
<td></td>
<td>multisite</td>
<td>Nein</td>
<td>Kommagetrennte Liste von Agententypen (z. B. <code>AI Data Scraper</code>), die von DarkVisitors einbezogen werden sollen.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_DISALLOW</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>Nein</td>
<td>Ein String, der angibt, welche URLs nicht erlaubt sind. Dieser Wert wird als Disallow-Feld gesendet, wenn die DarkVisitors-API kontaktiert wird.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_COMMUNITY_LISTS</code></td>
<td></td>
<td>multisite</td>
<td>Nein</td>
<td>Leerzeichengetrennte Liste von von der Community gepflegten Regelsatz-IDs, die einbezogen werden sollen.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>Nein</td>
<td>Leerzeichengetrennte Liste von URLs, von denen zusätzliche <code>robots.txt</code>-Regeln abgerufen werden sollen. Unterstützt <code>file://</code> und Basic-Auth.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_RULE</code></td>
<td></td>
<td>multisite</td>
<td>Ja</td>
<td>Eine einzelne Regel für <code>robots.txt</code>.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>Ja</td>
<td>Kopfzeile für die <code>robots.txt</code>-Datei (vor den Regeln). Kann Base64-kodiert sein.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_FOOTER</code></td>
<td></td>
<td>multisite</td>
<td>Ja</td>
<td>Fußzeile für die <code>robots.txt</code>-Datei (nach den Regeln). Kann Base64-kodiert sein.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_IGNORE_RULE</code></td>
<td></td>
<td>multisite</td>
<td>Ja</td>
<td>Ein einzelnes PCRE-Regex-Muster zum Ignorieren von Regeln.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_SITEMAP</code></td>
<td></td>
<td>multisite</td>
<td>Ja</td>
<td>Eine einzelne Sitemap-URL.</td>
</tr>
</tbody>
</table>
<h3 id="beispielkonfigurationen_20">Beispielkonfigurationen</h3>
<p><strong>Grundlegende manuelle Regeln</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p><strong>Verwendung dynamischer Quellen (DarkVisitors &amp; Community-Liste)</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ihr-darkvisitors-token-hier&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_AGENT_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AI</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Scraper&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots-disallowed&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
</code></pre></div>
<p><strong>Kombinierte Konfiguration</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ihr-darkvisitors-token-hier&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-robots-txt&quot;</span>
<span class="nt">ROBOTSTXT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/my-custom-rules.txt&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">MyOwnBot&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/admin&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p><strong>Mit Kopf- und Fußzeile</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">Dies</span><span class="nv"> </span><span class="s">ist</span><span class="nv"> </span><span class="s">eine</span><span class="nv"> </span><span class="s">benutzerdefinierte</span><span class="nv"> </span><span class="s">Kopfzeile&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_FOOTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">Dies</span><span class="nv"> </span><span class="s">ist</span><span class="nv"> </span><span class="s">eine</span><span class="nv"> </span><span class="s">benutzerdefinierte</span><span class="nv"> </span><span class="s">Fußzeile&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span><span class="err">```</span>

<span class="nn">---</span>

<span class="l l-Scalar l-Scalar-Plain">Weitere Informationen finden Sie in der [robots.txt-Dokumentation](https://www.robotstxt.org/robotstxt.html).</span>
</code></pre></div>
<h2 id="ssl">SSL</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das SSL-Plugin bietet eine robuste SSL/TLS-Verschlüsselung für Ihre durch BunkerWeb geschützten Websites. Es ermöglicht sichere HTTPS-Verbindungen durch die Konfiguration von Protokollen, kryptografischen Suiten und zugehörigen Parametern.</p>
<p>So funktioniert's:</p>
<ol>
<li>Bei einer HTTPS-Verbindung verwaltet BunkerWeb die SSL/TLS-Aushandlung gemäß Ihren Einstellungen.</li>
<li>Das Plugin erzwingt moderne Protokolle und starke Suiten und deaktiviert anfällige Optionen.</li>
<li>Optimierte Sitzungsparameter verbessern die Leistung, ohne die Sicherheit zu beeinträchtigen.</li>
<li>Die Präsentation der Zertifikate folgt Best Practices für Kompatibilität und Sicherheit.</li>
</ol>
<h3 id="verwendung_5">Verwendung</h3>
<ol>
<li><strong>Protokolle</strong>: Wählen Sie die Versionen über <code>SSL_PROTOCOLS</code>.</li>
<li><strong>Suiten</strong>: Wählen Sie ein Niveau über <code>SSL_CIPHERS_LEVEL</code> oder benutzerdefinierte Suiten über <code>SSL_CIPHERS_CUSTOM</code>.</li>
<li><strong>Weiterleitungen</strong>: Konfigurieren Sie die HTTP→HTTPS-Weiterleitung mit <code>AUTO_REDIRECT_HTTP_TO_HTTPS</code> und/oder <code>REDIRECT_HTTP_TO_HTTPS</code>.</li>
</ol>
<h3 id="parameter_7">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>REDIRECT_HTTP_TO_HTTPS</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Leitet alle HTTP-Anfragen zu HTTPS um.</td>
</tr>
<tr>
<td style="text-align: left;"><code>AUTO_REDIRECT_HTTP_TO_HTTPS</code></td>
<td style="text-align: left;"><code>yes</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Automatische Weiterleitung, wenn HTTPS erkannt wird.</td>
</tr>
<tr>
<td style="text-align: left;"><code>SSL_PROTOCOLS</code></td>
<td style="text-align: left;"><code>TLSv1.2 TLSv1.3</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Unterstützte SSL/TLS-Protokolle (durch Leerzeichen getrennt).</td>
</tr>
<tr>
<td style="text-align: left;"><code>SSL_CIPHERS_LEVEL</code></td>
<td style="text-align: left;"><code>modern</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Sicherheitsniveau der Suiten (<code>modern</code>, <code>intermediate</code>, <code>old</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><code>SSL_CIPHERS_CUSTOM</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Benutzerdefinierte Suiten (durch <code>:</code> getrennte Liste), die das Niveau ersetzen.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">SSL Labs Test</p>
</div>
<p>Testen Sie Ihre Konfiguration über <a href="https://www.ssllabs.com/ssltest/">Qualys SSL Labs</a>. Eine gut eingestellte BunkerWeb-Konfiguration erreicht in der Regel A+.</p>
<div class="admonition warning">
<p class="admonition-title">Veraltete Protokolle</p>
</div>
<p>SSLv3, TLSv1.0 und TLSv1.1 sind standardmäßig deaktiviert (bekannte Schwachstellen). Aktivieren Sie diese nur bei Bedarf für ältere Clients.</p>
<h3 id="beispiele_7">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="75:1"><input checked="checked" id="__tabbed_75_1" name="__tabbed_75" type="radio" /><div class="tabbed-labels"><label for="__tabbed_75_1">Moderne Sicherheit (Standard)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="76:1"><input checked="checked" id="__tabbed_76_1" name="__tabbed_76" type="radio" /><div class="tabbed-labels"><label for="__tabbed_76_1">Maximale Sicherheit</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="77:1"><input checked="checked" id="__tabbed_77_1" name="__tabbed_77" type="radio" /><div class="tabbed-labels"><label for="__tabbed_77_1">Legacy-Kompatibilität</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="78:1"><input checked="checked" id="__tabbed_78_1" name="__tabbed_78" type="radio" /><div class="tabbed-labels"><label for="__tabbed_78_1">Benutzerdefinierte Suiten</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_CUSTOM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<h2 id="securitytxt">Security.txt</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Security.txt-Plugin implementiert den <a href="https://securitytxt.org/">Security.txt</a>-Standard (<a href="https://www.rfc-editor.org/rfc/rfc9116">RFC 9116</a>) für Ihre Website. Diese Funktion erleichtert Sicherheitsforschern den Zugriff auf Ihre Sicherheitsrichtlinien und bietet eine standardisierte Möglichkeit, Sicherheitslücken zu melden, die sie in Ihren Systemen entdecken.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Nach der Aktivierung erstellt BunkerWeb eine <code>/.well-known/security.txt</code>-Datei im Stammverzeichnis Ihrer Website.</li>
<li>Diese Datei enthält Informationen zu Ihren Sicherheitsrichtlinien, Kontakten und anderen relevanten Details.</li>
<li>Sicherheitsforscher und automatisierte Tools können diese Datei leicht am Standardort finden.</li>
<li>Der Inhalt wird über einfache Einstellungen konfiguriert, mit denen Sie Kontaktinformationen, Verschlüsselungsschlüssel, Richtlinien und Danksagungen angeben können.</li>
<li>BunkerWeb formatiert die Datei automatisch gemäß RFC 9116.</li>
</ol>
<h3 id="wie-man-es-benutzt_20">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Security.txt-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Setzen Sie die Einstellung <code>USE_SECURITYTXT</code> auf <code>yes</code>, um die security.txt-Datei zu aktivieren.</li>
<li><strong>Kontaktinformationen konfigurieren:</strong> Geben Sie mindestens eine Kontaktmethode mit der Einstellung <code>SECURITYTXT_CONTACT</code> an.</li>
<li><strong>Zusätzliche Informationen festlegen:</strong> Konfigurieren Sie optionale Felder wie Ablaufdatum, Verschlüsselung, Danksagungen und Richtlinien-URLs.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration erstellt und stellt BunkerWeb die security.txt-Datei automatisch am Standardort bereit.</li>
</ol>
<h3 id="konfigurationseinstellungen_20">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_SECURITYTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Security.txt aktivieren:</strong> Auf <code>yes</code> setzen, um die security.txt-Datei zu aktivieren.</td>
</tr>
<tr>
<td><code>SECURITYTXT_URI</code></td>
<td><code>/.well-known/security.txt</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Security.txt-URI:</strong> Gibt die URI an, unter der die security.txt-Datei zugänglich sein wird.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CONTACT</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Kontaktinformationen:</strong> Wie Sicherheitsforscher Sie kontaktieren können (z. B. <code>mailto:security@example.com</code>).</td>
</tr>
<tr>
<td><code>SECURITYTXT_EXPIRES</code></td>
<td></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Ablaufdatum:</strong> Wann diese security.txt-Datei als abgelaufen betrachtet werden soll (ISO 8601-Format).</td>
</tr>
<tr>
<td><code>SECURITYTXT_ENCRYPTION</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Verschlüsselung:</strong> URL, die auf Verschlüsselungsschlüssel für die sichere Kommunikation verweist.</td>
</tr>
<tr>
<td><code>SECURITYTXT_ACKNOWLEDGEMENTS</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Danksagungen:</strong> URL, unter der Sicherheitsforscher für ihre Berichte anerkannt werden.</td>
</tr>
<tr>
<td><code>SECURITYTXT_POLICY</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Sicherheitsrichtlinie:</strong> URL, die auf die Sicherheitsrichtlinie verweist, die beschreibt, wie Schwachstellen gemeldet werden.</td>
</tr>
<tr>
<td><code>SECURITYTXT_HIRING</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Sicherheitsjobs:</strong> URL, die auf sicherheitsrelevante Stellenangebote verweist.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CANONICAL</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>Kanonische URL:</strong> Die kanonische(n) URI(s) für diese security.txt-Datei.</td>
</tr>
<tr>
<td><code>SECURITYTXT_PREFERRED_LANG</code></td>
<td><code>en</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Bevorzugte Sprache:</strong> Die in der Kommunikation verwendete(n) Sprache(n). Angegeben als ISO 639-1-Sprachcode.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CSAF</code></td>
<td></td>
<td>multisite</td>
<td>ja</td>
<td><strong>CSAF:</strong> Link zur provider-metadata.json Ihres Common Security Advisory Framework-Anbieters.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Ablaufdatum erforderlich</p>
</div>
<p>Gemäß RFC 9116 ist das Feld <code>Expires</code> erforderlich. Wenn Sie keinen Wert für <code>SECURITYTXT_EXPIRES</code> angeben, setzt BunkerWeb das Ablaufdatum automatisch auf ein Jahr ab dem aktuellen Datum.</p>
<div class="admonition info">
<p class="admonition-title">Kontaktinformationen sind unerlässlich</p>
</div>
<p>Das Feld <code>Contact</code> ist der wichtigste Teil der security.txt-Datei. Sie sollten mindestens eine Möglichkeit für Sicherheitsforscher angeben, Sie zu kontaktieren. Dies kann eine E-Mail-Adresse, ein Webformular, eine Telefonnummer oder eine andere Methode sein, die für Ihre Organisation funktioniert.</p>
<div class="admonition warning">
<p class="admonition-title">URLs müssen HTTPS verwenden</p>
</div>
<p>Gemäß RFC 9116 MÜSSEN alle URLs in der security.txt-Datei (außer <code>mailto:</code>- und <code>tel:</code>-Links) HTTPS verwenden. Nicht-HTTPS-URLs werden von BunkerWeb automatisch in HTTPS konvertiert, um die Einhaltung des Standards zu gewährleisten.</p>
<h3 id="beispielkonfigurationen_21">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="79:3"><input checked="checked" id="__tabbed_79_1" name="__tabbed_79" type="radio" /><input id="__tabbed_79_2" name="__tabbed_79" type="radio" /><input id="__tabbed_79_3" name="__tabbed_79" type="radio" /><div class="tabbed-labels"><label for="__tabbed_79_1">Grundlegende Konfiguration</label><label for="__tabbed_79_2">Umfassende Konfiguration</label><label for="__tabbed_79_3">Konfiguration mit mehreren Kontakten</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine minimale Konfiguration mit nur Kontaktinformationen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine vollständigere Konfiguration mit allen Feldern:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-contact-form&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-12-31T23:59:59+00:00&quot;</span>
<span class="nt">SECURITYTXT_ENCRYPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/pgp-key.txt&quot;</span>
<span class="nt">SECURITYTXT_ACKNOWLEDGEMENTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/hall-of-fame&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_HIRING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/jobs/security&quot;</span>
<span class="nt">SECURITYTXT_CANONICAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/.well-known/security.txt&quot;</span>
<span class="nt">SECURITYTXT_PREFERRED_LANG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="nt">SECURITYTXT_CSAF</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/provider-metadata.json&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit mehreren Kontaktmethoden:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tel:+1-201-555-0123&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-form&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-06-30T23:59:59+00:00&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="self-signed-certificate">Self-signed certificate</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Plugin "Selbstsigniertes Zertifikat" generiert und verwaltet automatisch SSL/TLS-Zertifikate direkt in BunkerWeb, um HTTPS ohne externe Zertifizierungsstelle zu aktivieren. Ideal für die Entwicklung, interne Netzwerke oder schnelle HTTPS-Bereitstellungen.</p>
<p>So funktioniert's:</p>
<ol>
<li>Nach der Aktivierung generiert BunkerWeb ein selbstsigniertes Zertifikat für Ihre konfigurierten Domains.</li>
<li>Das Zertifikat enthält alle definierten Servernamen, um eine korrekte Validierung zu gewährleisten.</li>
<li>Die Zertifikate werden sicher gespeichert und verschlüsseln den gesamten HTTPS-Verkehr.</li>
<li>Die Verlängerung erfolgt automatisch vor dem Ablaufdatum.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Browser-Warnungen</p>
</div>
<p>Browser zeigen Sicherheitswarnungen an, da ein selbstsigniertes Zertifikat nicht von einer vertrauenswürdigen CA ausgestellt wurde. Verwenden Sie in der Produktion vorzugsweise <a href="#lets-encrypt">Let's Encrypt</a>.</p>
<h3 id="verwendung_6">Verwendung</h3>
<ol>
<li>Aktivieren: <code>GENERATE_SELF_SIGNED_SSL: yes</code>.</li>
<li>Algorithmus: Wählen Sie über <code>SELF_SIGNED_SSL_ALGORITHM</code>.</li>
<li>Gültigkeit: Dauer in Tagen über <code>SELF_SIGNED_SSL_EXPIRY</code>.</li>
<li>Betreff: Betrefffeld über <code>SELF_SIGNED_SSL_SUBJ</code>.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Stream-Modus</p>
</div>
<p>Im Stream-Modus konfigurieren Sie <code>LISTEN_STREAM_PORT_SSL</code>, um den SSL/TLS-Listening-Port zu definieren.</p>
<h3 id="parameter_8">Parameter</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Standard</th>
<th style="text-align: left;">Kontext</th>
<th style="text-align: left;">Mehrfach</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>GENERATE_SELF_SIGNED_SSL</code></td>
<td style="text-align: left;"><code>no</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Aktiviert die automatische Generierung selbstsignierter Zertifikate.</td>
</tr>
<tr>
<td style="text-align: left;"><code>SELF_SIGNED_SSL_ALGORITHM</code></td>
<td style="text-align: left;"><code>ec-prime256v1</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Algorithmus: <code>ec-prime256v1</code>, <code>ec-secp384r1</code>, <code>rsa-2048</code>, <code>rsa-4096</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>SELF_SIGNED_SSL_EXPIRY</code></td>
<td style="text-align: left;"><code>365</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Gültigkeit (Tage).</td>
</tr>
<tr>
<td style="text-align: left;"><code>SELF_SIGNED_SSL_SUBJ</code></td>
<td style="text-align: left;"><code>/CN=www.example.com/</code></td>
<td style="text-align: left;">Multisite</td>
<td style="text-align: left;">nein</td>
<td style="text-align: left;">Betreff des Zertifikats (identifiziert die Domain).</td>
</tr>
</tbody>
</table>
<h3 id="beispiele_8">Beispiele</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="80:1"><input checked="checked" id="__tabbed_80_1" name="__tabbed_80" type="radio" /><div class="tabbed-labels"><label for="__tabbed_80_1">Standard</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=mysite.local/&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="81:1"><input checked="checked" id="__tabbed_81_1" name="__tabbed_81" type="radio" /><div class="tabbed-labels"><label for="__tabbed_81_1">Kurzzeit-Zertifikate</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;90&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=dev.example.com/&quot;</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="82:1"><input checked="checked" id="__tabbed_82_1" name="__tabbed_82" type="radio" /><div class="tabbed-labels"><label for="__tabbed_82_1">Test in RSA</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test.example.com&quot;</span>
<span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rsa-4096&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=test.example.com/&quot;</span>
</code></pre></div>
<h2 id="sessions">Sessions</h2>
<p>STREAM-Unterstützung <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Das Sessions-Plugin bietet eine robuste HTTP-Sitzungsverwaltung für BunkerWeb und ermöglicht eine sichere und zuverlässige Verfolgung von Benutzersitzungen über Anfragen hinweg. Diese Kernfunktion ist unerlässlich für die Aufrechterhaltung des Benutzerstatus, die Persistenz der Authentifizierung und die Unterstützung anderer Funktionen, die eine Kontinuität der Identität erfordern, wie z. B. der <a href="#antibot">Anti-Bot-Schutz</a> und Benutzerauthentifizierungssysteme.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Wenn ein Benutzer zum ersten Mal mit Ihrer Website interagiert, erstellt BunkerWeb eine eindeutige Sitzungs-ID.</li>
<li>Diese ID wird sicher in einem Cookie im Browser des Benutzers gespeichert.</li>
<li>Bei nachfolgenden Anfragen ruft BunkerWeb die Sitzungs-ID aus dem Cookie ab und verwendet sie, um auf die Sitzungsdaten des Benutzers zuzugreifen.</li>
<li>Sitzungsdaten können lokal oder in <a href="#redis">Redis</a> für verteilte Umgebungen mit mehreren BunkerWeb-Instanzen gespeichert werden.</li>
<li>Sitzungen werden automatisch mit konfigurierbaren Zeitüberschreitungen verwaltet, um die Sicherheit bei gleichzeitiger Benutzerfreundlichkeit zu gewährleisten.</li>
<li>Die kryptografische Sicherheit von Sitzungen wird durch einen geheimen Schlüssel gewährleistet, der zum Signieren von Sitzungs-Cookies verwendet wird.</li>
</ol>
<h3 id="wie-man-es-benutzt_21">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Sessions-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Sitzungssicherheit konfigurieren:</strong> Legen Sie einen starken, eindeutigen <code>SESSIONS_SECRET</code> fest, um sicherzustellen, dass Sitzungs-Cookies nicht gefälscht werden können. (Der Standardwert ist "random", wodurch BunkerWeb einen zufälligen geheimen Schlüssel generiert.)</li>
<li><strong>Sitzungsnamen wählen:</strong> Passen Sie optional den <code>SESSIONS_NAME</code> an, um zu definieren, wie Ihr Sitzungs-Cookie im Browser heißen soll. (Der Standardwert ist "random", wodurch BunkerWeb einen zufälligen Namen generiert.)</li>
<li><strong>Sitzungs-Timeouts festlegen:</strong> Konfigurieren Sie mit den Timeout-Einstellungen (<code>SESSIONS_IDLING_TIMEOUT</code>, <code>SESSIONS_ROLLING_TIMEOUT</code>, <code>SESSIONS_ABSOLUTE_TIMEOUT</code>), wie lange Sitzungen gültig bleiben.</li>
<li><strong>Redis-Integration konfigurieren:</strong> Setzen Sie für verteilte Umgebungen <code>USE_REDIS</code> auf "yes" und konfigurieren Sie Ihre <a href="#redis">Redis-Verbindung</a>, um Sitzungsdaten über mehrere BunkerWeb-Knoten hinweg zu teilen.</li>
<li><strong>Lassen Sie BunkerWeb den Rest erledigen:</strong> Nach der Konfiguration erfolgt die Sitzungsverwaltung für Ihre Website automatisch.</li>
</ol>
<h3 id="konfigurationseinstellungen_21">Konfigurationseinstellungen</h3>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SESSIONS_SECRET</code></td>
<td><code>random</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Sitzungsgeheimnis:</strong> Kryptografischer Schlüssel zum Signieren von Sitzungs-Cookies. Sollte eine starke, zufällige Zeichenfolge sein, die für Ihre Website eindeutig ist.</td>
</tr>
<tr>
<td><code>SESSIONS_NAME</code></td>
<td><code>random</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Cookie-Name:</strong> Der Name des Cookies, in dem die Sitzungs-ID gespeichert wird.</td>
</tr>
<tr>
<td><code>SESSIONS_IDLING_TIMEOUT</code></td>
<td><code>1800</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Leerlauf-Timeout:</strong> Maximale Zeit (in Sekunden) der Inaktivität, bevor die Sitzung ungültig wird.</td>
</tr>
<tr>
<td><code>SESSIONS_ROLLING_TIMEOUT</code></td>
<td><code>3600</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Rollierendes Timeout:</strong> Maximale Zeit (in Sekunden), bevor eine Sitzung erneuert werden muss.</td>
</tr>
<tr>
<td><code>SESSIONS_ABSOLUTE_TIMEOUT</code></td>
<td><code>86400</code></td>
<td>global</td>
<td>nein</td>
<td><strong>Absolutes Timeout:</strong> Maximale Zeit (in Sekunden), bevor eine Sitzung unabhängig von der Aktivität zerstört wird.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_IP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>nein</td>
<td><strong>IP prüfen:</strong> Wenn auf <code>yes</code> gesetzt, wird die Sitzung zerstört, wenn sich die IP-Adresse des Clients ändert.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_USER_AGENT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>nein</td>
<td><strong>User-Agent prüfen:</strong> Wenn auf <code>yes</code> gesetzt, wird die Sitzung zerstört, wenn sich der User-Agent des Clients ändert.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Sicherheitshinweise</p>
</div>
<p>Die Einstellung <code>SESSIONS_SECRET</code> ist für die Sicherheit von entscheidender Bedeutung. In Produktionsumgebungen:</p>
<pre><code>1. Verwenden Sie einen starken, zufälligen Wert (mindestens 32 Zeichen)
2. Halten Sie diesen Wert vertraulich
3. Verwenden Sie denselben Wert für alle BunkerWeb-Instanzen in einem Cluster
4. Erwägen Sie die Verwendung von Umgebungsvariablen oder Geheimnisverwaltung, um die Speicherung im Klartext zu vermeiden
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Cluster-Umgebungen</p>
</div>
<p>Wenn Sie mehrere BunkerWeb-Instanzen hinter einem Load Balancer betreiben:</p>
<pre><code>1. Setzen Sie `USE_REDIS` auf `yes` und konfigurieren Sie Ihre Redis-Verbindung
2. Stellen Sie sicher, dass alle Instanzen genau denselben `SESSIONS_SECRET` und `SESSIONS_NAME` verwenden
3. Dies stellt sicher, dass Benutzer ihre Sitzung beibehalten, unabhängig davon, welche BunkerWeb-Instanz ihre Anfragen bearbeitet
</code></pre>
<h3 id="beispielkonfigurationen_22">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="83:4"><input checked="checked" id="__tabbed_83_1" name="__tabbed_83" type="radio" /><input id="__tabbed_83_2" name="__tabbed_83" type="radio" /><input id="__tabbed_83_3" name="__tabbed_83" type="radio" /><input id="__tabbed_83_4" name="__tabbed_83" type="radio" /><div class="tabbed-labels"><label for="__tabbed_83_1">Grundlegende Konfiguration</label><label for="__tabbed_83_2">Erhöhte Sicherheit</label><label for="__tabbed_83_3">Cluster-Umgebung mit Redis</label><label for="__tabbed_83_4">Langlebige Sitzungen</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration für eine einzelne BunkerWeb-Instanz:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ihr-starker-zufälliger-geheimschlüssel-hier&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meineappsitzung&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit erhöhten Sicherheitseinstellungen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ihr-sehr-starker-zufälliger-geheimschlüssel-hier&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sicheresitzung&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;900&quot;</span><span class="w">  </span><span class="c1"># 15 Minuten</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span><span class="w">  </span><span class="c1"># 30 Minuten</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;43200&quot;</span><span class="w">  </span><span class="c1"># 12 Stunden</span>
<span class="nt">SESSIONS_CHECK_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SESSIONS_CHECK_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für mehrere BunkerWeb-Instanzen, die Sitzungsdaten gemeinsam nutzen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ihr-starker-zufälliger-geheimschlüssel-hier&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clustersitzung&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="c1"># Stellen Sie sicher, dass die Redis-Verbindung korrekt konfiguriert ist</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration für Anwendungen, die eine erweiterte Sitzungspersistenz erfordern:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ihr-starker-zufälliger-geheimschlüssel-hier&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;persistentesitzung&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span><span class="w">  </span><span class="c1"># 1 Tag</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;172800&quot;</span><span class="w">  </span><span class="c1"># 2 Tage</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span><span class="w">  </span><span class="c1"># 7 Tage</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="ui">UI</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Integrate easily the BunkerWeb UI.</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_UI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td>Use UI</td>
</tr>
<tr>
<td><code>UI_HOST</code></td>
<td></td>
<td>global</td>
<td>nein</td>
<td>Address of the web UI used for initial setup</td>
</tr>
</tbody>
</table>
<h2 id="user-manager-pro">User Manager <img src='../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM-Unterstützung <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Add the possibility to manage users on the web interface</p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standardwert</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USERS_REQUIRE_2FA</code></td>
<td><code>no</code></td>
<td>global</td>
<td>nein</td>
<td>Require two-factor authentication for all users</td>
</tr>
</tbody>
</table>
<h2 id="whitelist">Whitelist</h2>
<p>STREAM-Unterstützung <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Das Whitelist-Plugin ermöglicht es Ihnen, eine Liste vertrauenswürdiger IP-Adressen zu definieren, die andere Sicherheitsfilter umgehen.
Um stattdessen unerwünschte Clients zu blockieren, lesen Sie das <a href="#blacklist">Blacklist-Plugin</a>.</p>
<p>Das Whitelist-Plugin bietet einen umfassenden Ansatz, um den Zugriff auf Ihre Website basierend auf verschiedenen Client-Attributen explizit zu erlauben. Diese Funktion bietet einen Sicherheitsmechanismus: Besuchern, die bestimmte Kriterien erfüllen, wird sofortiger Zugriff gewährt, während alle anderen reguläre Sicherheitsprüfungen durchlaufen müssen.</p>
<p><strong>So funktioniert es:</strong></p>
<ol>
<li>Sie definieren Kriterien für Besucher, die auf die "Whitelist" gesetzt werden sollen (<em>IP-Adressen, Netzwerke, rDNS, ASN, User-Agent oder URI-Muster</em>).</li>
<li>Wenn ein Besucher versucht, auf Ihre Website zuzugreifen, prüft BunkerWeb, ob er einem dieser Whitelist-Kriterien entspricht.</li>
<li>Wenn ein Besucher einer Whitelist-Regel entspricht (und keiner Ignorier-Regel), wird ihm der Zugriff auf Ihre Website gewährt und er <strong>umgeht alle anderen Sicherheitsprüfungen</strong>.</li>
<li>Wenn ein Besucher keinem Whitelist-Kriterium entspricht, durchläuft er wie gewohnt alle normalen Sicherheitsprüfungen.</li>
<li>Whitelists können in regelmäßigen Abständen automatisch aus externen Quellen aktualisiert werden.</li>
</ol>
<h3 id="wie-man-es-benutzt_22">Wie man es benutzt</h3>
<p>Führen Sie die folgenden Schritte aus, um die Whitelist-Funktion zu konfigurieren und zu verwenden:</p>
<ol>
<li><strong>Aktivieren Sie die Funktion:</strong> Die Whitelist-Funktion ist standardmäßig deaktiviert. Setzen Sie die Einstellung <code>USE_WHITELIST</code> auf <code>yes</code>, um sie zu aktivieren.</li>
<li><strong>Erlaubnisregeln konfigurieren:</strong> Definieren Sie, welche IPs, Netzwerke, rDNS-Muster, ASNs, User-Agents oder URIs auf die Whitelist gesetzt werden sollen.</li>
<li><strong>Ignorierregeln einrichten:</strong> Geben Sie alle Ausnahmen an, die die Whitelist-Prüfungen umgehen sollen.</li>
<li><strong>Externe Quellen hinzufügen:</strong> Konfigurieren Sie URLs zum automatischen Herunterladen und Aktualisieren von Whitelist-Daten.</li>
<li><strong>Zugriff überwachen:</strong> Überprüfen Sie die <a href="../web-ui/">Web-Benutzeroberfläche</a>, um zu sehen, welchen Besuchern der Zugriff gewährt oder verweigert wird.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Stream-Modus</p>
</div>
<p>Im Stream-Modus werden nur IP-, rDNS- und ASN-Prüfungen durchgeführt.</p>
<h3 id="konfigurationseinstellungen_22">Konfigurationseinstellungen</h3>
<p><strong>Allgemein</strong></p>
<table>
<thead>
<tr>
<th>Einstellung</th>
<th>Standard</th>
<th>Kontext</th>
<th>Mehrfach</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_WHITELIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>nein</td>
<td><strong>Whitelist aktivieren:</strong> Auf <code>yes</code> setzen, um die Whitelist-Funktion zu aktivieren.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="84:1"><input checked="checked" id="__tabbed_84_1" name="__tabbed_84" type="radio" /><div class="tabbed-labels"><label for="__tabbed_84_1">IP-Adresse</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher basierend auf ihrer IP-Adresse oder ihrem Netzwerk auf die Whitelist. Diese Besucher umgehen alle Sicherheitsprüfungen.</p>
<pre><code>| Einstellung                | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                                              |
| -------------------------- | -------- | --------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `WHITELIST_IP`             |          | multisite | nein     | **IP-Whitelist:** Liste von IP-Adressen oder Netzwerken (CIDR-Notation), die erlaubt werden sollen, getrennt durch Leerzeichen.                           |
| `WHITELIST_IGNORE_IP`      |          | multisite | nein     | **IP-Ignorierliste:** Liste von IP-Adressen oder Netzwerken, die IP-Whitelist-Prüfungen umgehen sollen.                                                   |
| `WHITELIST_IP_URLS`        |          | multisite | nein     | **IP-Whitelist-URLs:** Liste von URLs, die IP-Adressen oder Netzwerke enthalten, die auf die Whitelist gesetzt werden sollen, getrennt durch Leerzeichen. |
| `WHITELIST_IGNORE_IP_URLS` |          | multisite | nein     | **IP-Ignorierlisten-URLs:** Liste von URLs, die IP-Adressen oder Netzwerke enthalten, die ignoriert werden sollen.                                        |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="85:1"><input checked="checked" id="__tabbed_85_1" name="__tabbed_85" type="radio" /><div class="tabbed-labels"><label for="__tabbed_85_1">Reverse DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher basierend auf ihrem Domainnamen (in umgekehrter Reihenfolge) auf die Whitelist. Dies ist nützlich, um Besuchern von bestimmten Organisationen oder Netzwerken den Zugriff nach ihrer Domain zu ermöglichen.</p>
<pre><code>| Einstellung                  | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                                         |
| ---------------------------- | -------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `WHITELIST_RDNS`             |          | multisite | nein     | **rDNS-Whitelist:** Liste von Reverse-DNS-Suffixen, die erlaubt werden sollen, getrennt durch Leerzeichen.                                           |
| `WHITELIST_RDNS_GLOBAL`      | `yes`    | multisite | nein     | **Nur globales rDNS:** Führt rDNS-Whitelist-Prüfungen nur für globale IP-Adressen durch, wenn auf `yes` gesetzt.                                     |
| `WHITELIST_IGNORE_RDNS`      |          | multisite | nein     | **rDNS-Ignorierliste:** Liste von Reverse-DNS-Suffixen, die rDNS-Whitelist-Prüfungen umgehen sollen.                                                 |
| `WHITELIST_RDNS_URLS`        |          | multisite | nein     | **rDNS-Whitelist-URLs:** Liste von URLs, die Reverse-DNS-Suffixe enthalten, die auf die Whitelist gesetzt werden sollen, getrennt durch Leerzeichen. |
| `WHITELIST_IGNORE_RDNS_URLS` |          | multisite | nein     | **rDNS-Ignorierlisten-URLs:** Liste von URLs, die Reverse-DNS-Suffixe enthalten, die ignoriert werden sollen.                                        |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="86:1"><input checked="checked" id="__tabbed_86_1" name="__tabbed_86" type="radio" /><div class="tabbed-labels"><label for="__tabbed_86_1">ASN</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher von bestimmten Netzwerkanbietern mithilfe von Autonomen Systemnummern auf die Whitelist. ASNs identifizieren, zu welchem Anbieter oder welcher Organisation eine IP gehört.</p>
<pre><code>| Einstellung                 | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                         |
| --------------------------- | -------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| `WHITELIST_ASN`             |          | multisite | nein     | **ASN-Whitelist:** Liste von Autonomen Systemnummern, die erlaubt werden sollen, getrennt durch Leerzeichen.                         |
| `WHITELIST_IGNORE_ASN`      |          | multisite | nein     | **ASN-Ignorierliste:** Liste von ASNs, die ASN-Whitelist-Prüfungen umgehen sollen.                                                   |
| `WHITELIST_ASN_URLS`        |          | multisite | nein     | **ASN-Whitelist-URLs:** Liste von URLs, die ASNs enthalten, die auf die Whitelist gesetzt werden sollen, getrennt durch Leerzeichen. |
| `WHITELIST_IGNORE_ASN_URLS` |          | multisite | nein     | **ASN-Ignorierlisten-URLs:** Liste von URLs, die ASNs enthalten, die ignoriert werden sollen.                                        |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="87:1"><input checked="checked" id="__tabbed_87_1" name="__tabbed_87" type="radio" /><div class="tabbed-labels"><label for="__tabbed_87_1">User-Agent</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Besucher basierend darauf auf die Whitelist, welchen Browser oder welches Tool sie angeben zu verwenden. Dies ist effektiv, um den Zugriff auf bestimmte bekannte Tools oder Dienste zu ermöglichen.</p>
<pre><code>| Einstellung                        | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                 |
| ---------------------------------- | -------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `WHITELIST_USER_AGENT`             |          | multisite | nein     | **User-Agent-Whitelist:** Liste von User-Agent-Mustern (PCRE-Regex), die erlaubt werden sollen, getrennt durch Leerzeichen.  |
| `WHITELIST_IGNORE_USER_AGENT`      |          | multisite | nein     | **User-Agent-Ignorierliste:** Liste von User-Agent-Mustern, die User-Agent-Whitelist-Prüfungen umgehen sollen.               |
| `WHITELIST_USER_AGENT_URLS`        |          | multisite | nein     | **User-Agent-Whitelist-URLs:** Liste von URLs, die User-Agent-Muster enthalten, die auf die Whitelist gesetzt werden sollen. |
| `WHITELIST_IGNORE_USER_AGENT_URLS` |          | multisite | nein     | **User-Agent-Ignorierlisten-URLs:** Liste von URLs, die User-Agent-Muster enthalten, die ignoriert werden sollen.            |
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="88:1"><input checked="checked" id="__tabbed_88_1" name="__tabbed_88" type="radio" /><div class="tabbed-labels"><label for="__tabbed_88_1">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>Was dies bewirkt:</strong> Setzt Anfragen an bestimmte URLs auf Ihrer Website auf die Whitelist. Dies ist hilfreich, um den Zugriff auf bestimmte Endpunkte unabhängig von anderen Faktoren zu ermöglichen.</p>
<pre><code>| Einstellung                 | Standard | Kontext   | Mehrfach | Beschreibung                                                                                                                               |
| --------------------------- | -------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| `WHITELIST_URI`             |          | multisite | nein     | **URI-Whitelist:** Liste von URI-Mustern (PCRE-Regex), die erlaubt werden sollen, getrennt durch Leerzeichen.                              |
| `WHITELIST_IGNORE_URI`      |          | multisite | nein     | **URI-Ignorierliste:** Liste von URI-Mustern, die URI-Whitelist-Prüfungen umgehen sollen.                                                  |
| `WHITELIST_URI_URLS`        |          | multisite | nein     | **URI-Whitelist-URLs:** Liste von URLs, die URI-Muster enthalten, die auf die Whitelist gesetzt werden sollen, getrennt durch Leerzeichen. |
| `WHITELIST_IGNORE_URI_URLS` |          | multisite | nein     | **URI-Ignorierlisten-URLs:** Liste von URLs, die URI-Muster enthalten, die ignoriert werden sollen.                                        |
</code></pre>
<div class="admonition info">
<p class="admonition-title">Unterstützung von URL-Formaten</p>
</div>
<p>Alle <code>*_URLS</code>-Einstellungen unterstützen HTTP/HTTPS-URLs sowie lokale Dateipfade mit dem Präfix <code>file:///</code>. Die Basisauthentifizierung wird im Format <code>http://user:pass@url</code> unterstützt.</p>
<div class="admonition tip">
<p class="admonition-title">Regelmäßige Aktualisierungen</p>
</div>
<p>Whitelists von URLs werden stündlich automatisch heruntergeladen und aktualisiert, um sicherzustellen, dass Ihr Schutz mit den neuesten vertrauenswürdigen Quellen auf dem neuesten Stand bleibt.</p>
<div class="admonition warning">
<p class="admonition-title">Sicherheitsumgehung</p>
</div>
<p>Auf der Whitelist stehende Besucher <strong>umgehen vollständig alle anderen Sicherheitsprüfungen</strong> in BunkerWeb, einschließlich WAF-Regeln, Ratenbegrenzung, Erkennung bösartiger Bots und aller anderen Sicherheitsmechanismen. Verwenden Sie die Whitelist nur für vertrauenswürdige Quellen, bei denen Sie absolut sicher sind.</p>
<h3 id="beispielkonfigurationen_23">Beispielkonfigurationen</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="89:5"><input checked="checked" id="__tabbed_89_1" name="__tabbed_89" type="radio" /><input id="__tabbed_89_2" name="__tabbed_89" type="radio" /><input id="__tabbed_89_3" name="__tabbed_89" type="radio" /><input id="__tabbed_89_4" name="__tabbed_89" type="radio" /><input id="__tabbed_89_5" name="__tabbed_89" type="radio" /><div class="tabbed-labels"><label for="__tabbed_89_1">Grundlegender Organisationszugriff</label><label for="__tabbed_89_2">Erweiterte Konfiguration</label><label for="__tabbed_89_3">Verwendung lokaler Dateien</label><label for="__tabbed_89_4">API-Zugriffsmuster</label><label for="__tabbed_89_5">Bekannte Crawler</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Eine einfache Konfiguration, die die IP-Adressen des Unternehmensbüros auf die Whitelist setzt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.0/8</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine umfassendere Konfiguration mit mehreren Whitelist-Kriterien:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Unternehmens- und vertrauenswürdige Partner-Assets</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">WHITELIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.company.com</span><span class="nv"> </span><span class="s">.partner-company.org&quot;</span>
<span class="nt">WHITELIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345</span><span class="nv"> </span><span class="s">67890&quot;</span><span class="w">  </span><span class="c1"># ASNs von Unternehmen und Partnern</span>
<span class="nt">WHITELIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)CompanyBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)PartnerCrawler(?:\b)&quot;</span>

<span class="c1"># Externe vertrauenswürdige Quellen</span>
<span class="nt">WHITELIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-networks.txt&quot;</span>
<span class="nt">WHITELIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-crawlers.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Konfiguration mit lokalen Dateien für Whitelists:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/ip-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/rdns-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/asn-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/user-agent-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/uri-whitelist.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration, die sich darauf konzentriert, den Zugriff nur auf bestimmte API-Endpunkte zu ermöglichen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/public/</span><span class="nv"> </span><span class="s">^/api/v1/status&quot;</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24&quot;</span><span class="w">  </span><span class="c1"># Internes Netzwerk für alle Endpunkte</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Eine Konfiguration, die gängige Suchmaschinen- und Social-Media-Crawler auf die Whitelist setzt:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Verifizierung mit Reverse DNS für zusätzliche Sicherheit</span>
<span class="nt">WHITELIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.googlebot.com</span><span class="nv"> </span><span class="s">.search.msn.com</span><span class="nv"> </span><span class="s">.crawl.yahoo.net</span><span class="nv"> </span><span class="s">.yandex.com</span><span class="nv"> </span><span class="s">.baidu.com</span><span class="nv"> </span><span class="s">.facebook.com&quot;</span>
<span class="nt">WHITELIST_RDNS_GLOBAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w">  </span><span class="c1"># Nur globale IPs prüfen</span>
</code></pre></div>
<p>Diese Konfiguration ermöglicht es legitimen Crawlern, Ihre Website zu indizieren, ohne Ratenbegrenzungen oder anderen Sicherheitsmaßnahmen unterworfen zu sein, die sie blockieren könnten. Die rDNS-Prüfungen helfen zu überprüfen, ob die Crawler tatsächlich von den von ihnen angegebenen Unternehmen stammen.</p>
</div>
</div>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Bunkerity
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/fTf46FmtyD" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/bunkerity" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/bunkerity/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/r/BunkerWeb/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/bunkerweb/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/bunkerity" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": {"provider": "mike", "version": "latest"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="https://chatbot.bunkerweb.io/static/js/chatbot.js"></script>
      
    
  </body>
</html>