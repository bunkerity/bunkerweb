
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BunkerWeb, the open source and next generation WAF.">
      
      
      
        <link rel="canonical" href="https://docs.bunkerweb.io/latest/zh/features/">
      
      
        <link rel="prev" href="../quickstart-guide/">
      
      
        <link rel="next" href="../advanced/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>åŠŸèƒ½ - BunkerWeb æ–‡æ¡£</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
    <script async
            defer
            data-domain="docs.bunkerweb.io"
            src="https://data.bunkerity.com/js/script.js"></script>

    <script defer>
      window.addEventListener('DOMContentLoaded', (e) => {

        const customHeaders = document.querySelectorAll('[data-custom-header]')
        customHeaders.forEach(header => {
          const getHeaders = document.querySelectorAll(`#${header.getAttribute('id')}`);
          getHeaders.forEach(el => {

            if(!el.hasAttribute('data-custom-header')) el.remove()
        })})
      })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script>

    <script defer>
  // Lazy load images and embed youtube videos
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-src]").forEach((el) => {
      el.setAttribute("src", el.getAttribute("data-src"));
    });
  });
  // Add missing label
  try {
    document
      .querySelector('div.md-search[data-md-component="search"][role="dialog"]')
      .setAttribute("aria-label", "Search in documentation");
  } catch (err) {}
    </script>

    <script defer>
      window.addEventListener('DOMContentLoaded', () => {
        const bannerEl = document.querySelector('aside.md-banner');
        let defaultContent = [{ "content" : '<p>Get the most of BunkerWeb by upgrading to the PRO version. Click <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&utm_source=doc">here</a> and use the <strong>freetrial</strong> promo code to get started.</p>'},
        { "content" : '<p>Need premium support or tailored consulting around BunkerWeb ? Check out our <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc#services">professional services</a>.</p>'},
        { "content" : '<p>Be part of the Bunker community by joining the <a style="text-decoration:underline; color: white;" href="https://discord.bunkerweb.io">Discord chat</a> and following us on <a style="text-decoration:underline; color: white;" href="https://www.linkedin.com/company/bunkerity/">LinkedIn</a>.</p>'}
        ]

      function setBannerStyle() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        bannerEl.style.backgroundColor = "#2eac68";
        bannerItem.style.textAlign = "center";
        bannerItem.style.transition = "all 0.5s ease-out";
      }

      function setDefault() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        const clone = bannerItem.cloneNode(true);
        clone.innerHTML = defaultContent[0]["content"];
        bannerEl.replaceChild(clone, bannerItem);
      }

      function startBannerLoop() {
        const switchDelay = 7000;
        let i = 0;

        setInterval(() => {
          // Update or reset index
          if(i + 1 === defaultContent.length) {
            i = 0;
          } else {
            i++;
          }

          // Prepare data with next el with opacity 0 too
          const currItem = bannerEl.querySelector('.md-banner__inner');
          currItem.style.opacity = 0;
          const clone = currItem.cloneNode(true);
          clone.innerHTML = defaultContent[i]["content"];
          setTimeout(() => {
            bannerEl.replaceChild(clone, currItem);
            setTimeout(() => {
              const newItem = bannerEl.querySelector('.md-banner__inner');
              newItem.style.opacity = 1;
            }, 20);
          }, 600);

        }, switchDelay);
      }

      function runBanner() {
        startBannerLoop();
        // Try to get dynamic content
        // Else keep static ones
        // fetch("https://www.bunkerweb.io/api/bw-ui-news")
        // .then((res) => {
        //   return res.json();
        // })
        // .then((res) => {
        //   defaultContent = res.data[0].data;
        //   startBannerLoop();
        // })
        // .catch((e) => {
        //   startBannerLoop();
        // });
      }

        setBannerStyle();
        setDefault();
        runBanner()

      })
    </script>

    
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="åŠŸèƒ½ - BunkerWeb æ–‡æ¡£" >
      
        <meta  property="og:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  property="og:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/zh/features.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.bunkerweb.io/latest/zh/features/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="åŠŸèƒ½ - BunkerWeb æ–‡æ¡£" >
      
        <meta  name="twitter:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  name="twitter:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/zh/features.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    ğŸ“¢ Looking for BunkerWeb CLOUD, PRO version, technical support or tailored services ? Visit the
    <a href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc"
       style="color: #3f6ec6;
              text-decoration: underline">BunkerWeb Panel</a>
    for more information on our enterprise offers.

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    You're not viewing the
    documentation of the latest version.
    <a href="../../..">
        <strong>Click here to view latest.</strong>
    </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href="../" title="BunkerWeb æ–‡æ¡£" class="md-header__button md-logo" aria-label="BunkerWeb æ–‡æ¡£" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BunkerWeb æ–‡æ¡£
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              åŠŸèƒ½
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="é€‰æ‹©å½“å‰è¯­è¨€">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../features/" hreflang="en" class="md-select__link">
              English - ğŸ‡¬ğŸ‡§
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../fr/features/" hreflang="fr" class="md-select__link">
              FranÃ§ais - ğŸ‡«ğŸ‡·
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../de/features/" hreflang="de" class="md-select__link">
              Deutsch - ğŸ‡©ğŸ‡ª
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/features/" hreflang="es" class="md-select__link">
              EspaÃ±ol - ğŸ‡ªğŸ‡¸
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="zh" class="md-select__link">
              ä¸­æ–‡ - ğŸ‡¨ğŸ‡³
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bunkerity/bunkerweb" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  ä»‹ç»

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        
  
  
    
  
  æ¦‚å¿µ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../integrations/" class="md-tabs__link">
        
  
  
    
  
  é›†æˆ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-guide/" class="md-tabs__link">
        
  
  
    
  
  å¿«é€Ÿå…¥é—¨æŒ‡å—

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  åŠŸèƒ½

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/" class="md-tabs__link">
        
  
  
    
  
  é«˜çº§ç”¨æ³•

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../web-ui/" class="md-tabs__link">
        
  
  
    
  
  Web ç•Œé¢

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../upgrading/" class="md-tabs__link">
        
  
  
    
  
  å‡çº§

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  æ•…éšœæ’é™¤

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
  
    
  
  æ’ä»¶

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../professional-services/" class="md-tabs__link">
        
  
  
    
  
  ä¸“ä¸šæœåŠ¡

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
  
    
  
  å…³äº

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="BunkerWeb æ–‡æ¡£" class="md-nav__button md-logo" aria-label="BunkerWeb æ–‡æ¡£" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    BunkerWeb æ–‡æ¡£
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bunkerity/bunkerweb" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ä»‹ç»
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    æ¦‚å¿µ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    é›†æˆ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å¿«é€Ÿå…¥é—¨æŒ‡å—
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    åŠŸèƒ½
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    åŠŸèƒ½
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      å…¨å±€è®¾ç½®
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…¨å±€è®¾ç½®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      å¤šç«™ç‚¹æ¨¡å¼
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      å¤šä¸ªè®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-modes" class="md-nav__link">
    <span class="md-ellipsis">
      å®‰å…¨æ¨¡å¼
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-ddos-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Anti DDoS (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antibot" class="md-nav__link">
    <span class="md-ellipsis">
      Antibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      é€šç”¨è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      ä»æŒ‘æˆ˜ä¸­æ’é™¤æµé‡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      æ”¯æŒçš„æŒ‘æˆ˜æœºåˆ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-basic" class="md-nav__link">
    <span class="md-ellipsis">
      Auth basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      å‘½ä»¤è¡Œç•Œé¢
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-s3-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Backup S3 (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bad-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Bad behavior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bad behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blacklist" class="md-nav__link">
    <span class="md-ellipsis">
      Blacklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blacklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brotli" class="md-nav__link">
    <span class="md-ellipsis">
      Brotli
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Brotli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkernet" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerNet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerNet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crowdsec" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec æ§åˆ¶å°é›†æˆ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Client cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Country">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crowdsec_1" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CrowdSec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      å‰ç½®æ¡ä»¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      é›†æˆæµç¨‹
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-crowdsec-bunkerweb" class="md-nav__link">
    <span class="md-ellipsis">
      ç¬¬&nbsp;1&nbsp;æ­¥ â€“ å‡†å¤‡ CrowdSec æ‘„å– BunkerWeb æ—¥å¿—
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-bunkerweb" class="md-nav__link">
    <span class="md-ellipsis">
      ç¬¬&nbsp;2&nbsp;æ­¥ â€“ é…ç½® BunkerWeb å‚æ•°
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç¬¬Â 2Â æ­¥ â€“ é…ç½® BunkerWeb å‚æ•°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶è®¾ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      ç¬¬&nbsp;3&nbsp;æ­¥ â€“ éªŒè¯é›†æˆ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-ssl-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Custom SSL certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom SSL certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dnsbl" class="md-nav__link">
    <span class="md-ellipsis">
      DNSBL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNSBL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easy-resolve-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Easy Resolve (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#errors" class="md-nav__link">
    <span class="md-ellipsis">
      Errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#greylist" class="md-nav__link">
    <span class="md-ellipsis">
      Greylist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Greylist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gzip" class="md-nav__link">
    <span class="md-ellipsis">
      Gzip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gzip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      å·¥ä½œåŸç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#html-injection" class="md-nav__link">
    <span class="md-ellipsis">
      HTML injection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTML injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headers" class="md-nav__link">
    <span class="md-ellipsis">
      Headers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®æŒ‡å—
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    <span class="md-ellipsis">
      ç¤ºä¾‹é…ç½®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Encrypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Let&#39;s Encrypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      æ”¯æŒçš„ DNS æä¾›å•†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limit" class="md-nav__link">
    <span class="md-ellipsis">
      Limit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Limit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    <span class="md-ellipsis">
      å·¥ä½œåŸç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    <span class="md-ellipsis">
      ä½¿ç”¨æ­¥éª¤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancer-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Load Balancer (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    <span class="md-ellipsis">
      æŠ€æœ¯å®ç°
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    <span class="md-ellipsis">
      æ”¶é›†çš„æŒ‡æ ‡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API è®¿é—®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Migration (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    <span class="md-ellipsis">
      ä¸»è¦åŠŸèƒ½
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®æŒ‡å—
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modsecurity" class="md-nav__link">
    <span class="md-ellipsis">
      ModSecurity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModSecurity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crs" class="md-nav__link">
    <span class="md-ellipsis">
      å¯ç”¨çš„ CRS ç‰ˆæœ¬
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      è‡ªå®šä¹‰é…ç½®
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è‡ªå®šä¹‰é…ç½®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modsec-crs-crs" class="md-nav__link">
    <span class="md-ellipsis">
      ä½¿ç”¨ modsec-crs æ·»åŠ  CRS æ’é™¤é¡¹
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modsec-crs" class="md-nav__link">
    <span class="md-ellipsis">
      ä½¿ç”¨ modsec æ›´æ–° CRS è§„åˆ™
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#owasp-crs" class="md-nav__link">
    <span class="md-ellipsis">
      OWASP CRS æ’ä»¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_85" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#php" class="md-nav__link">
    <span class="md-ellipsis">
      PHP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PHP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_86" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_87" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_88" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pro" class="md-nav__link">
    <span class="md-ellipsis">
      Pro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_89" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_90" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_91" class="md-nav__link">
    <span class="md-ellipsis">
      å¸¸è§é—®é¢˜è§£ç­”
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prometheus-exporter-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus exporter (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Real IP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real IP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_92" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_93" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_94" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirect" class="md-nav__link">
    <span class="md-ellipsis">
      Redirect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redirect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_95" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_96" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_97" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_98" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_99" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_100" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_1" class="md-nav__link">
    <span class="md-ellipsis">
      Redis æœ€ä½³å®è·µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis æœ€ä½³å®è·µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_101" class="md-nav__link">
    <span class="md-ellipsis">
      å†…å­˜ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_102" class="md-nav__link">
    <span class="md-ellipsis">
      æ•°æ®æŒä¹…æ€§
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_103" class="md-nav__link">
    <span class="md-ellipsis">
      æ€§èƒ½ä¼˜åŒ–
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_104" class="md-nav__link">
    <span class="md-ellipsis">
      æ›´å¤šèµ„æº
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse proxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse proxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_105" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_106" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®æŒ‡å—
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_107" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse scan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reverse scan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_108" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_109" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_110" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robotstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Robots.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Robots.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#darkvisitors-api" class="md-nav__link">
    <span class="md-ellipsis">
      ä½¿ç”¨ DarkVisitors API åŠ¨æ€è§„é¿æœºå™¨äºº
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_111" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_112" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_113" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssl" class="md-nav__link">
    <span class="md-ellipsis">
      SSL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_114" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_115" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_116" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securitytxt" class="md-nav__link">
    <span class="md-ellipsis">
      Security.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_117" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_118" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_119" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#self-signed-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      Self-signed certificate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Self-signed certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_120" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_121" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_122" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Sessions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sessions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_123" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_124" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_125" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-manager-pro" class="md-nav__link">
    <span class="md-ellipsis">
      User Manager (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whitelist" class="md-nav__link">
    <span class="md-ellipsis">
      Whitelist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Whitelist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_126" class="md-nav__link">
    <span class="md-ellipsis">
      å¦‚ä½•ä½¿ç”¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_127" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®è®¾ç½®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_128" class="md-nav__link">
    <span class="md-ellipsis">
      é…ç½®ç¤ºä¾‹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    é«˜çº§ç”¨æ³•
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web ç•Œé¢
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å‡çº§
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    æ•…éšœæ’é™¤
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    æ’ä»¶
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../professional-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ä¸“ä¸šæœåŠ¡
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å…³äº
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">åŠŸèƒ½</h1>
<p>æœ¬èŠ‚åŒ…å« BunkerWeb æ”¯æŒçš„å®Œæ•´è®¾ç½®åˆ—è¡¨ã€‚è‹¥å°šæœªç†Ÿæ‚‰ BunkerWebï¼Œå»ºè®®å…ˆé˜…è¯»æ–‡æ¡£ä¸­çš„<a href="../concepts/">æ¦‚å¿µ</a>éƒ¨åˆ†ã€‚è¯·æ ¹æ®æ‚¨çš„<a href="../integrations/">é›†æˆ</a>è¯´æ˜åº”ç”¨ç›¸åº”çš„è®¾ç½®ã€‚</p>
<h2 id="_2">å…¨å±€è®¾ç½®</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>é€šç”¨æ’ä»¶ä¸º BunkerWeb æä¾›äº†æ ¸å¿ƒé…ç½®æ¡†æ¶ï¼Œå…è®¸æ‚¨å®šä¹‰æ§åˆ¶ Web æœåŠ¡å¦‚ä½•å—ä¿æŠ¤å’Œäº¤ä»˜çš„åŸºæœ¬è®¾ç½®ã€‚è¿™ä¸ªåŸºç¡€æ’ä»¶ç®¡ç†ç€æ•´ä¸ª BunkerWeb ç”Ÿæ€ç³»ç»Ÿçš„åŸºæœ¬æ–¹é¢ï¼Œå¦‚å®‰å…¨æ¨¡å¼ã€æœåŠ¡å™¨é»˜è®¤å€¼ã€æ—¥å¿—è®°å½•è¡Œä¸ºå’Œå…³é”®æ“ä½œå‚æ•°ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“ BunkerWeb å¯åŠ¨æ—¶ï¼Œé€šç”¨æ’ä»¶ä¼šåŠ è½½å¹¶åº”ç”¨æ‚¨çš„æ ¸å¿ƒé…ç½®è®¾ç½®ã€‚</li>
<li>å®‰å…¨æ¨¡å¼å¯ä»¥å…¨å±€è®¾ç½®æˆ–æŒ‰ç«™ç‚¹è®¾ç½®ï¼Œä»¥ç¡®å®šåº”ç”¨
    çš„ä¿æŠ¤çº§åˆ«ã€‚</li>
<li>é»˜è®¤æœåŠ¡å™¨è®¾ç½®ä¸ºä»»ä½•æœªæŒ‡å®šçš„å¤šç«™ç‚¹é…ç½®å»ºç«‹
    äº†å›é€€å€¼ã€‚</li>
<li>æ—¥å¿—è®°å½•å‚æ•°æ§åˆ¶è®°å½•å“ªäº›ä¿¡æ¯ä»¥åŠå¦‚ä½•æ ¼å¼åŒ–ã€‚</li>
<li>è¿™äº›è®¾ç½®æ„æˆäº†æ‰€æœ‰å…¶ä»– BunkerWeb æ’ä»¶å’ŒåŠŸèƒ½è¿è¡Œçš„åŸºç¡€ã€‚</li>
</ol>
<h3 id="_3">å¤šç«™ç‚¹æ¨¡å¼</h3>
<p>å½“ <code>MULTISITE</code> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼ŒBunkerWeb å¯ä»¥æ‰˜ç®¡å’Œä¿æŠ¤å¤šä¸ªç½‘ç«™ï¼Œæ¯ä¸ªç½‘ç«™éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é…ç½®ã€‚æ­¤åŠŸèƒ½åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š</p>
<ul>
<li>æ‰˜ç®¡å…·æœ‰ä¸åŒé…ç½®çš„å¤šä¸ªåŸŸ</li>
<li>è¿è¡Œå…·æœ‰ä¸åŒå®‰å…¨è¦æ±‚çš„å¤šä¸ªåº”ç”¨ç¨‹åº</li>
<li>å¯¹ä¸åŒæœåŠ¡åº”ç”¨é‡èº«å®šåˆ¶çš„å®‰å…¨ç­–ç•¥</li>
</ul>
<p>åœ¨å¤šç«™ç‚¹æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªç«™ç‚¹éƒ½ç”±ä¸€ä¸ªå”¯ä¸€çš„ <code>SERVER_NAME</code> æ ‡è¯†ã€‚è¦åº”ç”¨ç‰¹å®šäºç«™ç‚¹çš„è®¾ç½®ï¼Œè¯·å°†ä¸» <code>SERVER_NAME</code> ä½œä¸ºå‰ç¼€æ·»åŠ åˆ°è®¾ç½®åç§°ä¸­ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>www.example.com_USE_ANTIBOT=captcha</code> ä¸º <code>www.example.com</code> å¯ç”¨éªŒè¯ç ã€‚</li>
<li><code>myapp.example.com_USE_GZIP=yes</code> ä¸º <code>myapp.example.com</code> å¯ç”¨ GZIP å‹ç¼©ã€‚</li>
</ul>
<p>è¿™ç§æ–¹æ³•å¯ç¡®ä¿åœ¨å¤šç«™ç‚¹ç¯å¢ƒä¸­å°†è®¾ç½®åº”ç”¨äºæ­£ç¡®çš„ç«™ç‚¹ã€‚</p>
<h3 id="_4">å¤šä¸ªè®¾ç½®</h3>
<p>BunkerWeb ä¸­çš„æŸäº›è®¾ç½®æ”¯æŒåŒä¸€åŠŸèƒ½çš„å¤šä¸ªé…ç½®ã€‚è¦å®šä¹‰å¤šç»„è®¾ç½®ï¼Œè¯·åœ¨è®¾ç½®åç§°åé™„åŠ ä¸€ä¸ªæ•°å­—åç¼€ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>REVERSE_PROXY_URL_1=/subdir</code> å’Œ <code>REVERSE_PROXY_HOST_1=http://myhost1</code> é…ç½®ç¬¬ä¸€ä¸ªåå‘ä»£ç†ã€‚</li>
<li><code>REVERSE_PROXY_URL_2=/anotherdir</code> å’Œ <code>REVERSE_PROXY_HOST_2=http://myhost2</code> é…ç½®ç¬¬äºŒä¸ªåå‘ä»£ç†ã€‚</li>
</ul>
<p>è¿™ç§æ¨¡å¼å…è®¸æ‚¨ä¸ºéœ€è¦ä¸åŒç”¨ä¾‹çš„ä¸åŒå€¼çš„åŠŸèƒ½ï¼ˆå¦‚åå‘ä»£ç†ã€ç«¯å£æˆ–å…¶ä»–è®¾ç½®ï¼‰ç®¡ç†å¤šä¸ªé…ç½®ã€‚</p>
<h3 id="security-modes">å®‰å…¨æ¨¡å¼</h3>
<p><code>SECURITY_MODE</code> è®¾ç½®å†³å®šäº† BunkerWeb å¦‚ä½•å¤„ç†æ£€æµ‹åˆ°çš„å¨èƒã€‚è¿™ä¸ªçµæ´»çš„åŠŸèƒ½å…è®¸æ‚¨æ ¹æ®å…·ä½“éœ€æ±‚åœ¨ç›‘æ§æˆ–ä¸»åŠ¨é˜»æ­¢å¯ç–‘æ´»åŠ¨ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼š</p>
<ul>
<li><strong><code>detect</code></strong>ï¼šè®°å½•æ½œåœ¨å¨èƒè€Œä¸é˜»æ­¢è®¿é—®ã€‚æ­¤æ¨¡å¼å¯¹äºä»¥å®‰å…¨ã€æ— å¹²æ‰°çš„æ–¹å¼è¯†åˆ«å’Œåˆ†æè¯¯æŠ¥éå¸¸æœ‰ç”¨ã€‚</li>
<li><strong><code>block</code></strong>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸»åŠ¨é˜»æ­¢æ£€æµ‹åˆ°çš„å¨èƒï¼ŒåŒæ—¶è®°å½•äº‹ä»¶ä»¥é˜²æ­¢æœªç»æˆæƒçš„è®¿é—®å¹¶ä¿æŠ¤æ‚¨çš„åº”ç”¨ç¨‹åºã€‚</li>
</ul>
<p>åˆ‡æ¢åˆ° <code>detect</code> æ¨¡å¼å¯ä»¥å¸®åŠ©æ‚¨è¯†åˆ«å’Œè§£å†³æ½œåœ¨çš„è¯¯æŠ¥ï¼Œè€Œä¸ä¼šå¹²æ‰°åˆæ³•å®¢æˆ·ç«¯ã€‚ä¸€æ—¦è¿™äº›é—®é¢˜å¾—åˆ°è§£å†³ï¼Œæ‚¨å°±å¯ä»¥è‡ªä¿¡åœ°åˆ‡æ¢å› <code>block</code> æ¨¡å¼ä»¥è·å¾—å…¨é¢ä¿æŠ¤ã€‚</p>
<h3 id="_5">é…ç½®è®¾ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:9"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">æ ¸å¿ƒè®¾ç½®</label><label for="__tabbed_1_2">API è®¾ç½®</label><label for="__tabbed_1_3">ç½‘ç»œå’Œç«¯å£è®¾ç½®</label><label for="__tabbed_1_4">æµæœåŠ¡å™¨è®¾ç½®</label><label for="__tabbed_1_5">å·¥ä½œè¿›ç¨‹è®¾ç½®</label><label for="__tabbed_1_6">å†…å­˜è®¾ç½®</label><label for="__tabbed_1_7">æ—¥å¿—è®¾ç½®</label><label for="__tabbed_1_8">é›†æˆè®¾ç½®</label><label for="__tabbed_1_9">Nginx è®¾ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVER_NAME</code></td>
<td><code>www.example.com</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¸»åŸŸåï¼š</strong> æ­¤ç«™ç‚¹çš„ä¸»åŸŸåã€‚åœ¨å¤šç«™ç‚¹æ¨¡å¼ä¸‹ä¸ºå¿…éœ€ã€‚</td>
</tr>
<tr>
<td><code>BUNKERWEB_INSTANCES</code></td>
<td><code>127.0.0.1</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>BunkerWeb å®ä¾‹ï¼š</strong> ä»¥ç©ºæ ¼åˆ†éš”çš„ BunkerWeb å®ä¾‹åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>MULTISITE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å¤šç«™ç‚¹ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨æ‰˜ç®¡å…·æœ‰ä¸åŒé…ç½®çš„å¤šä¸ªç½‘ç«™ã€‚</td>
</tr>
<tr>
<td><code>SECURITY_MODE</code></td>
<td><code>block</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å®‰å…¨çº§åˆ«ï¼š</strong> æ§åˆ¶å®‰å…¨å¼ºåˆ¶æ‰§è¡Œçš„çº§åˆ«ã€‚é€‰é¡¹ï¼š<code>detect</code> æˆ– <code>block</code>ã€‚</td>
</tr>
<tr>
<td><code>SERVER_TYPE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æœåŠ¡å™¨ç±»å‹ï¼š</strong> å®šä¹‰æœåŠ¡å™¨æ˜¯ <code>http</code> è¿˜æ˜¯ <code>stream</code> ç±»å‹ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_API</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ¿€æ´» APIï¼š</strong> æ¿€æ´» API ä»¥æ§åˆ¶ BunkerWebã€‚</td>
</tr>
<tr>
<td><code>API_HTTP_PORT</code></td>
<td><code>5000</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API ç«¯å£ï¼š</strong> API çš„ç›‘å¬ç«¯å£å·ã€‚</td>
</tr>
<tr>
<td><code>API_HTTPS_PORT</code></td>
<td><code>5443</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API HTTPS ç«¯å£ï¼š</strong> API çš„ç›‘å¬ç«¯å£å· (TLS)ã€‚</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API ç›‘å¬ HTTPï¼š</strong> å¯ç”¨ API çš„ HTTP ç›‘å¬å™¨ã€‚</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTPS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API ç›‘å¬ HTTPSï¼š</strong> å¯ç”¨ API çš„ HTTPS (TLS) ç›‘å¬å™¨ã€‚</td>
</tr>
<tr>
<td><code>API_LISTEN_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API ç›‘å¬ IPï¼š</strong> API çš„ç›‘å¬ IP åœ°å€ã€‚</td>
</tr>
<tr>
<td><code>API_SERVER_NAME</code></td>
<td><code>bwapi</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API æœåŠ¡å™¨åç§°ï¼š</strong> API çš„æœåŠ¡å™¨åç§°ï¼ˆè™šæ‹Ÿä¸»æœºï¼‰ã€‚</td>
</tr>
<tr>
<td><code>API_WHITELIST_IP</code></td>
<td><code>127.0.0.0/8</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>API ç™½åå• IPï¼š</strong> å…è®¸è”ç³» API çš„ IP/ç½‘ç»œåˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>API_TOKEN</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>API è®¿é—®ä»¤ç‰Œï¼ˆå¯é€‰ï¼‰ï¼š</strong> å¦‚æœè®¾ç½®ï¼Œæ‰€æœ‰ API è¯·æ±‚éƒ½å¿…é¡»åŒ…å« <code>Authorization: Bearer &lt;token&gt;</code>ã€‚</td>
</tr>
</tbody>
</table>
<p>æ³¨æ„ï¼šå‡ºäºå¼•å¯¼åŸå› ï¼Œå¦‚æœæ‚¨å¯ç”¨ <code>API_TOKEN</code>ï¼Œæ‚¨å¿…é¡»åœ¨ BunkerWeb å®ä¾‹å’Œè°ƒåº¦ç¨‹åºçš„<strong>ä¸¤ä¸ª</strong>ç¯å¢ƒä¸­éƒ½è®¾ç½®å®ƒã€‚å½“ <code>API_TOKEN</code> å­˜åœ¨äºå…¶ç¯å¢ƒä¸­æ—¶ï¼Œè°ƒåº¦ç¨‹åºä¼šè‡ªåŠ¨åŒ…å« <code>Authorization</code> æ ‡å¤´ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä¸å‘é€æ ‡å¤´ï¼ŒBunkerWeb å°†ä¸å¼ºåˆ¶æ‰§è¡Œä»¤ç‰Œèº«ä»½éªŒè¯ã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½® <code>API_LISTEN_HTTPS=yes</code>ï¼ˆç«¯å£ï¼š<code>API_HTTPS_PORT</code>ï¼Œé»˜è®¤ <code>5443</code>ï¼‰é€šè¿‡ HTTPS å…¬å¼€ APIã€‚</p>
<p>ä½¿ç”¨ curl çš„æµ‹è¯•ç¤ºä¾‹ï¼ˆæ›¿æ¢ä»¤ç‰Œå’Œä¸»æœºï¼‰ï¼š</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://&lt;bunkerweb-host&gt;:5000/ping

curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--insecure<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>https://&lt;bunkerweb-host&gt;:5443/ping
</code></pre></div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HTTP_PORT</code></td>
<td><code>8080</code></td>
<td>global</td>
<td>æ˜¯</td>
<td><strong>HTTP ç«¯å£ï¼š</strong> HTTP æµé‡çš„ç«¯å£å·ã€‚</td>
</tr>
<tr>
<td><code>HTTPS_PORT</code></td>
<td><code>8443</code></td>
<td>global</td>
<td>æ˜¯</td>
<td><strong>HTTPS ç«¯å£ï¼š</strong> HTTPS æµé‡çš„ç«¯å£å·ã€‚</td>
</tr>
<tr>
<td><code>USE_IPV6</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>IPv6 æ”¯æŒï¼š</strong> å¯ç”¨ IPv6 è¿æ¥ã€‚</td>
</tr>
<tr>
<td><code>DNS_RESOLVERS</code></td>
<td><code>127.0.0.11</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>DNS è§£æå™¨ï¼š</strong> è¦ä½¿ç”¨çš„è§£æå™¨çš„ DNS åœ°å€ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_STREAM</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç›‘å¬æµï¼š</strong> å¯ç”¨å¯¹é SSLï¼ˆç›´é€šï¼‰çš„ç›‘å¬ã€‚</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT</code></td>
<td><code>1337</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>æµç«¯å£ï¼š</strong> é SSLï¼ˆç›´é€šï¼‰çš„ç›‘å¬ç«¯å£ã€‚</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT_SSL</code></td>
<td><code>4242</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>æµ SSL ç«¯å£ï¼š</strong> SSLï¼ˆç›´é€šï¼‰çš„ç›‘å¬ç«¯å£ã€‚</td>
</tr>
<tr>
<td><code>USE_TCP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>TCP ç›‘å¬ï¼š</strong> å¯ç”¨ TCP ç›‘å¬ï¼ˆæµï¼‰ã€‚</td>
</tr>
<tr>
<td><code>USE_UDP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>UDP ç›‘å¬ï¼š</strong> å¯ç”¨ UDP ç›‘å¬ï¼ˆæµï¼‰ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKER_PROCESSES</code></td>
<td><code>auto</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å·¥ä½œè¿›ç¨‹æ•°ï¼š</strong> å·¥ä½œè¿›ç¨‹çš„æ•°é‡ã€‚è®¾ç½®ä¸º <code>auto</code> ä»¥ä½¿ç”¨å¯ç”¨æ ¸å¿ƒæ•°ã€‚</td>
</tr>
<tr>
<td><code>WORKER_CONNECTIONS</code></td>
<td><code>1024</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å·¥ä½œè¿æ¥æ•°ï¼š</strong> æ¯ä¸ªå·¥ä½œè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ã€‚</td>
</tr>
<tr>
<td><code>WORKER_RLIMIT_NOFILE</code></td>
<td><code>2048</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼š</strong> æ¯ä¸ªå·¥ä½œè¿›ç¨‹çš„æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKERLOCK_MEMORY_SIZE</code></td>
<td><code>48k</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å·¥ä½œé”å†…å­˜å¤§å°ï¼š</strong> ç”¨äºåˆå§‹åŒ–å·¥ä½œè¿›ç¨‹çš„ lua_shared_dict å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>DATASTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ•°æ®å­˜å‚¨å†…å­˜å¤§å°ï¼š</strong> å†…éƒ¨æ•°æ®å­˜å‚¨çš„å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>CACHESTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜å­˜å‚¨å†…å­˜å¤§å°ï¼š</strong> å†…éƒ¨ç¼“å­˜å­˜å‚¨çš„å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>CACHESTORE_IPC_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜å­˜å‚¨ IPC å†…å­˜å¤§å°ï¼š</strong> å†…éƒ¨ç¼“å­˜å­˜å‚¨ (ipc) çš„å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>CACHESTORE_MISS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜å­˜å‚¨æœªå‘½ä¸­å†…å­˜å¤§å°ï¼š</strong> å†…éƒ¨ç¼“å­˜å­˜å‚¨ï¼ˆæœªå‘½ä¸­ï¼‰çš„å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>CACHESTORE_LOCKS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜å­˜å‚¨é”å†…å­˜å¤§å°ï¼š</strong> å†…éƒ¨ç¼“å­˜å­˜å‚¨ï¼ˆé”ï¼‰çš„å¤§å°ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOG_FORMAT</code></td>
<td><code>$host $remote_addr - $request_id $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\"</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ—¥å¿—æ ¼å¼ï¼š</strong> ç”¨äºè®¿é—®æ—¥å¿—çš„æ ¼å¼ã€‚</td>
</tr>
<tr>
<td><code>LOG_LEVEL</code></td>
<td><code>notice</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ—¥å¿—çº§åˆ«ï¼š</strong> é”™è¯¯æ—¥å¿—çš„è¯¦ç»†ç¨‹åº¦ã€‚é€‰é¡¹ï¼š<code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>ã€‚</td>
</tr>
<tr>
<td><code>TIMERS_LOG_LEVEL</code></td>
<td><code>debug</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>è®¡æ—¶å™¨æ—¥å¿—çº§åˆ«ï¼š</strong> è®¡æ—¶å™¨çš„æ—¥å¿—çº§åˆ«ã€‚é€‰é¡¹ï¼š<code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>err</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">æ—¥å¿—è®°å½•æœ€ä½³å®è·µ</p>
<ul>
<li>å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·ä½¿ç”¨ <code>notice</code>ã€<code>warn</code> æˆ– <code>error</code> æ—¥å¿—çº§åˆ«ä»¥æœ€å°åŒ–æ—¥å¿—é‡ã€‚</li>
<li>ä¸ºäº†è°ƒè¯•é—®é¢˜ï¼Œè¯·æš‚æ—¶å°†æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º <code>debug</code> ä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTOCONF_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>è‡ªåŠ¨é…ç½®æ¨¡å¼ï¼š</strong> å¯ç”¨ Autoconf Docker é›†æˆã€‚</td>
</tr>
<tr>
<td><code>SWARM_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Swarm æ¨¡å¼ï¼š</strong> å¯ç”¨ Docker Swarm é›†æˆã€‚</td>
</tr>
<tr>
<td><code>KUBERNETES_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Kubernetes æ¨¡å¼ï¼š</strong> å¯ç”¨ Kubernetes é›†æˆã€‚</td>
</tr>
<tr>
<td><code>USE_TEMPLATE</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä½¿ç”¨æ¨¡æ¿ï¼š</strong> è¦ä½¿ç”¨çš„é…ç½®æ¨¡æ¿ï¼Œå®ƒå°†è¦†ç›–ç‰¹å®šè®¾ç½®çš„é»˜è®¤å€¼ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NGINX_PREFIX</code></td>
<td><code>/etc/nginx/</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Nginx å‰ç¼€ï¼š</strong> nginx å°†æœç´¢é…ç½®çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td><code>SERVER_NAMES_HASH_BUCKET_SIZE</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>æœåŠ¡å™¨åç§°å“ˆå¸Œæ¡¶å¤§å°ï¼š</strong> <code>server_names_hash_bucket_size</code> æŒ‡ä»¤çš„å€¼ã€‚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h3 id="_6">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">åŸºæœ¬ç”Ÿäº§è®¾ç½®</label><label for="__tabbed_2_2">å¼€å‘æ¨¡å¼</label><label for="__tabbed_2_3">å¤šç«™ç‚¹é…ç½®</label><label for="__tabbed_2_4">æµæœåŠ¡å™¨é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªå…·æœ‰ä¸¥æ ¼å®‰å…¨æ€§çš„ç”Ÿäº§ç«™ç‚¹çš„æ ‡å‡†é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notice&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªå¸¦æœ‰é¢å¤–æ—¥å¿—è®°å½•çš„å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dev.example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;debug&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºæ‰˜ç®¡å¤šä¸ªç½‘ç«™çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># ç¬¬ä¸€ä¸ªç«™ç‚¹</span>
<span class="nt">site1.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site1.example.com&quot;</span>
<span class="nt">site1.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>

<span class="c1"># ç¬¬äºŒä¸ªç«™ç‚¹</span>
<span class="nt">site2.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site2.example.com&quot;</span>
<span class="nt">site2.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äº TCP/UDP æœåŠ¡å™¨çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream.example.com&quot;</span>
<span class="nt">LISTEN_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LISTEN_STREAM_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1337&quot;</span>
<span class="nt">USE_TCP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_UDP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="anti-ddos-pro">Anti DDoS <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides enhanced protection against DDoS attacks by analyzing and filtering suspicious traffic.</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIDDOS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td>Enable or disable anti DDoS protection to mitigate high traffic spikes.</td>
</tr>
<tr>
<td><code>ANTIDDOS_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>å¦</td>
<td>Size of in-memory storage for DDoS metrics (e.g., 10M, 500k).</td>
</tr>
<tr>
<td><code>ANTIDDOS_THRESHOLD</code></td>
<td><code>100</code></td>
<td>global</td>
<td>å¦</td>
<td>Maximum suspicious requests allowed from a single IP before blocking.</td>
</tr>
<tr>
<td><code>ANTIDDOS_WINDOW_TIME</code></td>
<td><code>10</code></td>
<td>global</td>
<td>å¦</td>
<td>Time window (seconds) to detect abnormal request patterns.</td>
</tr>
<tr>
<td><code>ANTIDDOS_STATUS_CODES</code></td>
<td><code>429 403 444</code></td>
<td>global</td>
<td>å¦</td>
<td>HTTP status codes treated as suspicious for DDoS analysis.</td>
</tr>
<tr>
<td><code>ANTIDDOS_DISTINCT_IP</code></td>
<td><code>5</code></td>
<td>global</td>
<td>å¦</td>
<td>Minimum distinct IP count before enabling anti DDoS measures.</td>
</tr>
</tbody>
</table>
<h2 id="antibot">Antibot</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>æ”»å‡»è€…é€šå¸¸ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆæœºå™¨äººï¼‰æ¥å°è¯•åˆ©ç”¨æ‚¨çš„ç½‘ç«™ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼ŒBunkerWeb åŒ…å«ä¸€ä¸ªâ€œAntibotâ€åŠŸèƒ½ï¼Œå®ƒä¼šæŒ‘æˆ˜ç”¨æˆ·ä»¥è¯æ˜ä»–ä»¬æ˜¯äººç±»ã€‚å¦‚æœç”¨æˆ·æˆåŠŸå®ŒæˆæŒ‘æˆ˜ï¼Œä»–ä»¬å°†è¢«æˆäºˆè®¿é—®æ‚¨ç½‘ç«™çš„æƒé™ã€‚æ­¤åŠŸèƒ½é»˜è®¤ç¦ç”¨ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“ç”¨æˆ·è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶ï¼ŒBunkerWeb ä¼šæ£€æŸ¥ä»–ä»¬æ˜¯å¦å·²ç»é€šè¿‡äº† antibot æŒ‘æˆ˜ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°ä¸€ä¸ªæŒ‘æˆ˜é¡µé¢ã€‚</li>
<li>ç”¨æˆ·å¿…é¡»å®ŒæˆæŒ‘æˆ˜ï¼ˆä¾‹å¦‚ï¼Œè§£å†³ä¸€ä¸ª CAPTCHAï¼Œè¿è¡Œ JavaScriptï¼‰ã€‚</li>
<li>å¦‚æœæŒ‘æˆ˜æˆåŠŸï¼Œç”¨æˆ·å°†è¢«é‡å®šå‘å›ä»–ä»¬æœ€åˆè¯•å›¾è®¿é—®çš„é¡µé¢ï¼Œå¹¶å¯ä»¥æ­£å¸¸æµè§ˆæ‚¨çš„ç½‘ç«™ã€‚</li>
</ol>
<h3 id="_7">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¯ç”¨å’Œé…ç½® Antibot åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é€‰æ‹©ä¸€ä¸ªæŒ‘æˆ˜ç±»å‹ï¼š</strong> å†³å®šä½¿ç”¨å“ªç§ç±»å‹çš„ antibot æŒ‘æˆ˜ï¼ˆä¾‹å¦‚ï¼Œ<a href="#__tabbed_3_3">captcha</a>ã€<a href="#__tabbed_3_5">hcaptcha</a>ã€<a href="#__tabbed_3_2">javascript</a>ï¼‰ã€‚</li>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> åœ¨æ‚¨çš„ BunkerWeb é…ç½®ä¸­å°† <code>USE_ANTIBOT</code> è®¾ç½®ä¸ºæ‚¨é€‰æ‹©çš„æŒ‘æˆ˜ç±»å‹ã€‚</li>
<li><strong>é…ç½®è®¾ç½®ï¼š</strong> æ ¹æ®éœ€è¦è°ƒæ•´å…¶ä»– <code>ANTIBOT_*</code> è®¾ç½®ã€‚å¯¹äº reCAPTCHAã€hCaptchaã€Turnstile å’Œ mCaptchaï¼Œæ‚¨å¿…é¡»åœ¨ç›¸åº”çš„æœåŠ¡ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·å¹¶è·å– API å¯†é’¥ã€‚</li>
<li><strong>é‡è¦æç¤ºï¼š</strong> ç¡®ä¿ <code>ANTIBOT_URI</code> æ˜¯æ‚¨ç½‘ç«™ä¸Šä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„å”¯ä¸€ URLã€‚</li>
</ol>
<div class="admonition important">
<p class="admonition-title">å…³äº <code>ANTIBOT_URI</code> è®¾ç½®</p>
<p>ç¡®ä¿ <code>ANTIBOT_URI</code> æ˜¯æ‚¨ç½‘ç«™ä¸Šä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„å”¯ä¸€ URLã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">é›†ç¾¤ç¯å¢ƒä¸­çš„ä¼šè¯é…ç½®</p>
<p>antibot åŠŸèƒ½ä½¿ç”¨ cookie æ¥è·Ÿè¸ªç”¨æˆ·æ˜¯å¦å·²å®ŒæˆæŒ‘æˆ˜ã€‚å¦‚æœæ‚¨åœ¨é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œ BunkerWebï¼ˆå¤šä¸ª BunkerWeb å®ä¾‹ï¼‰ï¼Œæ‚¨<strong>å¿…é¡»</strong>æ­£ç¡®é…ç½®ä¼šè¯ç®¡ç†ã€‚è¿™æ¶‰åŠåœ¨æ‰€æœ‰ BunkerWeb å®ä¾‹ä¸­å°† <code>SESSIONS_SECRET</code> å’Œ <code>SESSIONS_NAME</code> è®¾ç½®è®¾ç½®ä¸º<strong>ç›¸åŒçš„å€¼</strong>ã€‚å¦‚æœæ‚¨ä¸è¿™æ ·åšï¼Œç”¨æˆ·å¯èƒ½ä¼šè¢«åå¤æç¤ºå®Œæˆ antibot æŒ‘æˆ˜ã€‚æ‚¨å¯ä»¥åœ¨<a href="#sessions">æ­¤å¤„</a>æ‰¾åˆ°æœ‰å…³ä¼šè¯é…ç½®çš„æ›´å¤šä¿¡æ¯ã€‚</p>
</div>
<h3 id="_8">é€šç”¨è®¾ç½®</h3>
<p>ä»¥ä¸‹è®¾ç½®åœ¨æ‰€æœ‰æŒ‘æˆ˜æœºåˆ¶ä¸­å…±äº«ï¼š</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_URI</code></td>
<td><code>/challenge</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æŒ‘æˆ˜ URLï¼š</strong> ç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°ä»¥å®ŒæˆæŒ‘æˆ˜çš„ URLã€‚ç¡®ä¿æ­¤ URL æœªç”¨äºæ‚¨ç½‘ç«™ä¸Šçš„ä»»ä½•å…¶ä»–å†…å®¹ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_RESOLVE</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æŒ‘æˆ˜æ—¶é—´é™åˆ¶ï¼š</strong> ç”¨æˆ·å®ŒæˆæŒ‘æˆ˜çš„æœ€é•¿æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚æ­¤æ—¶é—´è¿‡åï¼Œå°†ç”Ÿæˆæ–°çš„æŒ‘æˆ˜ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_VALID</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æŒ‘æˆ˜æœ‰æ•ˆæœŸï¼š</strong> å·²å®Œæˆçš„æŒ‘æˆ˜çš„æœ‰æ•ˆæ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚æ­¤æ—¶é—´è¿‡åï¼Œç”¨æˆ·å°†å¿…é¡»è§£å†³æ–°çš„æŒ‘æˆ˜ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="_9">ä»æŒ‘æˆ˜ä¸­æ’é™¤æµé‡</h3>
<p>BunkerWeb å…è®¸æ‚¨æŒ‡å®šæŸäº›ç”¨æˆ·ã€IP æˆ–è¯·æ±‚åº”å®Œå…¨ç»•è¿‡ antibot æŒ‘æˆ˜ã€‚è¿™å¯¹äºå°†å—ä¿¡ä»»çš„æœåŠ¡ã€å†…éƒ¨ç½‘ç»œæˆ–åº”å§‹ç»ˆæ— éœ€æŒ‘æˆ˜å³å¯è®¿é—®çš„ç‰¹å®šé¡µé¢åˆ—å…¥ç™½åå•éå¸¸æœ‰ç”¨ï¼š</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ’é™¤çš„ URLï¼š</strong> åº”ç»•è¿‡æŒ‘æˆ˜çš„ä»¥ç©ºæ ¼åˆ†éš”çš„ URI æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ’é™¤çš„ IPï¼š</strong> åº”ç»•è¿‡æŒ‘æˆ˜çš„ä»¥ç©ºæ ¼åˆ†éš”çš„ IP åœ°å€æˆ– CIDR èŒƒå›´åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ’é™¤çš„åå‘ DNSï¼š</strong> åº”ç»•è¿‡æŒ‘æˆ˜çš„ä»¥ç©ºæ ¼åˆ†éš”çš„åå‘ DNS åç¼€åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä»…é™å…¨å±€ IPï¼š</strong> å¦‚æœè®¾ç½®ä¸º <code>yes</code>ï¼Œåˆ™ä»…å¯¹å…¬å…± IP åœ°å€æ‰§è¡Œåå‘ DNS æ£€æŸ¥ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ’é™¤çš„ ASNï¼š</strong> åº”ç»•è¿‡æŒ‘æˆ˜çš„ä»¥ç©ºæ ¼åˆ†éš”çš„ ASN ç¼–å·åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ’é™¤çš„ç”¨æˆ·ä»£ç†ï¼š</strong> åº”ç»•è¿‡æŒ‘æˆ˜çš„ä»¥ç©ºæ ¼åˆ†éš”çš„ç”¨æˆ·ä»£ç†æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>
<p><code>ANTIBOT_IGNORE_URI: "^/api/ ^/webhook/ ^/assets/"</code>
  è¿™å°†ä» antibot æŒ‘æˆ˜ä¸­æ’é™¤æ‰€æœ‰ä»¥ <code>/api/</code>ã€<code>/webhook/</code> æˆ– <code>/assets/</code> å¼€å¤´çš„ URIã€‚</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_IP: "192.168.1.0/24 10.0.0.1"</code>
  è¿™å°†ä» antibot æŒ‘æˆ˜ä¸­æ’é™¤å†…éƒ¨ç½‘ç»œ <code>192.168.1.0/24</code> å’Œç‰¹å®š IP <code>10.0.0.1</code>ã€‚</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_RDNS: ".googlebot.com .bingbot.com"</code>
  è¿™å°†ä» antibot æŒ‘æˆ˜ä¸­æ’é™¤æ¥è‡ªåå‘ DNS ä»¥ <code>googlebot.com</code> æˆ– <code>bingbot.com</code> ç»“å°¾çš„ä¸»æœºçš„è¯·æ±‚ã€‚</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_ASN: "15169 8075"</code>
  è¿™å°†ä» antibot æŒ‘æˆ˜ä¸­æ’é™¤æ¥è‡ª ASN 15169 (Google) å’Œ ASN 8075 (Microsoft) çš„è¯·æ±‚ã€‚</p>
</li>
<li>
<p><code>ANTIBOT_IGNORE_USER_AGENT: "^Mozilla.+Chrome.+Safari"</code>
  è¿™å°†ä» antibot æŒ‘æˆ˜ä¸­æ’é™¤ç”¨æˆ·ä»£ç†ä¸æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…çš„è¯·æ±‚ã€‚</p>
</li>
</ul>
<h3 id="_10">æ”¯æŒçš„æŒ‘æˆ˜æœºåˆ¶</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:7"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><input id="__tabbed_3_7" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Cookie</label><label for="__tabbed_3_2">JavaScript</label><label for="__tabbed_3_3">Captcha</label><label for="__tabbed_3_4">reCAPTCHA</label><label for="__tabbed_3_5">hCaptcha</label><label for="__tabbed_3_6">Turnstile</label><label for="__tabbed_3_7">mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Cookie æŒ‘æˆ˜æ˜¯ä¸€ç§è½»é‡çº§çš„æœºåˆ¶ï¼Œå®ƒä¾èµ–äºåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­è®¾ç½®ä¸€ä¸ª cookieã€‚å½“ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª cookieã€‚åœ¨åç»­çš„è¯·æ±‚ä¸­ï¼ŒæœåŠ¡å™¨ä¼šæ£€æŸ¥è¿™ä¸ª cookie æ˜¯å¦å­˜åœ¨ï¼Œä»¥éªŒè¯ç”¨æˆ·æ˜¯å¦æ˜¯åˆæ³•çš„ã€‚è¿™ç§æ–¹æ³•å¯¹äºåŸºæœ¬çš„æœºå™¨äººé˜²æŠ¤ç®€å•æœ‰æ•ˆï¼Œæ— éœ€é¢å¤–çš„ç”¨æˆ·äº¤äº’ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ cookie å¹¶å°†å…¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯å¿…é¡»åœ¨åç»­çš„è¯·æ±‚ä¸­è¿”å›è¯¥ cookieã€‚</li>
<li>å¦‚æœ cookie ç¼ºå¤±æˆ–æ— æ•ˆï¼Œç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°æŒ‘æˆ˜é¡µé¢ã€‚</li>
</ol>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ Antibotï¼š</strong> è®¾ç½®ä¸º <code>cookie</code> ä»¥å¯ç”¨ Cookie æŒ‘æˆ˜ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>JavaScript æŒ‘æˆ˜è¦æ±‚å®¢æˆ·ç«¯ä½¿ç”¨ JavaScript è§£å†³ä¸€ä¸ªè®¡ç®—ä»»åŠ¡ã€‚è¿™ç§æœºåˆ¶ç¡®ä¿å®¢æˆ·ç«¯å¯ç”¨äº† JavaScript å¹¶ä¸”å¯ä»¥æ‰§è¡Œæ‰€éœ€çš„ä»£ç ï¼Œè¿™é€šå¸¸è¶…å‡ºäº†å¤§å¤šæ•°æœºå™¨äººçš„èƒ½åŠ›ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª JavaScript è„šæœ¬ã€‚</li>
<li>è¯¥è„šæœ¬æ‰§è¡Œä¸€ä¸ªè®¡ç®—ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œå“ˆå¸Œï¼‰å¹¶å°†ç»“æœæäº¤å›æœåŠ¡å™¨ã€‚</li>
<li>æœåŠ¡å™¨éªŒè¯ç»“æœä»¥ç¡®è®¤å®¢æˆ·ç«¯çš„åˆæ³•æ€§ã€‚</li>
</ol>
<p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>è¯¥æŒ‘æˆ˜ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç‹¬ç‰¹çš„ä»»åŠ¡ã€‚</li>
<li>è®¡ç®—ä»»åŠ¡æ¶‰åŠå…·æœ‰ç‰¹å®šæ¡ä»¶çš„å“ˆå¸Œï¼ˆä¾‹å¦‚ï¼Œæ‰¾åˆ°å…·æœ‰æŸä¸ªå‰ç¼€çš„å“ˆå¸Œï¼‰ã€‚</li>
</ul>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ Antibotï¼š</strong> è®¾ç½®ä¸º <code>javascript</code> ä»¥å¯ç”¨ JavaScript æŒ‘æˆ˜ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Captcha æŒ‘æˆ˜æ˜¯ä¸€ç§è‡ªåˆ¶çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨æ‚¨çš„ BunkerWeb ç¯å¢ƒä¸­å®Œå…¨æ‰˜ç®¡ç”ŸæˆåŸºäºå›¾åƒçš„æŒ‘æˆ˜ã€‚å®ƒæµ‹è¯•ç”¨æˆ·è¯†åˆ«å’Œè§£é‡Šéšæœºå­—ç¬¦çš„èƒ½åŠ›ï¼Œç¡®ä¿åœ¨ä¸ä¾èµ–å¤–éƒ¨æœåŠ¡çš„æƒ…å†µä¸‹æœ‰æ•ˆé˜»æ­¢è‡ªåŠ¨åŒ–æœºå™¨äººã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªåŒ…å«éšæœºå­—ç¬¦çš„ CAPTCHA å›¾åƒã€‚</li>
<li>ç”¨æˆ·å¿…é¡»å°†å›¾åƒä¸­æ˜¾ç¤ºçš„å­—ç¬¦è¾“å…¥æ–‡æœ¬å­—æ®µã€‚</li>
<li>æœåŠ¡å™¨æ ¹æ®ç”Ÿæˆçš„ CAPTCHA éªŒè¯ç”¨æˆ·çš„è¾“å…¥ã€‚</li>
</ol>
<p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å®Œå…¨è‡ªæ‰˜ç®¡ï¼Œæ— éœ€ç¬¬ä¸‰æ–¹ APIã€‚</li>
<li>åŠ¨æ€ç”Ÿæˆçš„æŒ‘æˆ˜ç¡®ä¿æ¯ä¸ªç”¨æˆ·ä¼šè¯çš„å”¯ä¸€æ€§ã€‚</li>
<li>ä½¿ç”¨å¯è‡ªå®šä¹‰çš„å­—ç¬¦é›†ç”Ÿæˆ CAPTCHAã€‚</li>
</ul>
<p><strong>æ”¯æŒçš„å­—ç¬¦ï¼š</strong></p>
<p>CAPTCHA ç³»ç»Ÿæ”¯æŒä»¥ä¸‹å­—ç¬¦ç±»å‹ï¼š</p>
<ul>
<li><strong>å­—æ¯ï¼š</strong> æ‰€æœ‰å°å†™ (a-z) å’Œå¤§å†™ (A-Z) å­—æ¯</li>
<li><strong>æ•°å­—ï¼š</strong> 2, 3, 4, 5, 6, 7, 8, 9ï¼ˆä¸åŒ…æ‹¬ 0 å’Œ 1 ä»¥é¿å…æ··æ·†ï¼‰</li>
<li><strong>ç‰¹æ®Šå­—ç¬¦ï¼š</strong> <code>+-/=%"'&amp;_(),.;:?!Â§`^Ã„Ã–ÃœÃŸÃ¤Ã¶Ã¼Ã©''â€š""â€</code></li>
</ul>
<p>è¦è·å–æ”¯æŒçš„å®Œæ•´å­—ç¬¦é›†ï¼Œè¯·å‚é˜…ç”¨äº CAPTCHA çš„å­—ä½“çš„<a href="https://www.dafont.com/moms-typewriter.charmap?back=theme">å­—ä½“å­—ç¬¦æ˜ å°„</a>ã€‚</p>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ Antibotï¼š</strong> è®¾ç½®ä¸º <code>captcha</code> ä»¥å¯ç”¨ Captcha æŒ‘æˆ˜ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_CAPTCHA_ALPHABET</code></td>
<td><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Captcha å­—æ¯è¡¨ï¼š</strong> ç”¨äºç”Ÿæˆ CAPTCHA çš„å­—ç¬¦å­—ç¬¦ä¸²ã€‚æ”¯æŒçš„å­—ç¬¦ï¼šæ‰€æœ‰å­—æ¯ (a-z, A-Z)ã€æ•°å­— 2-9ï¼ˆä¸åŒ…æ‹¬ 0 å’Œ 1ï¼‰ä»¥åŠç‰¹æ®Šå­—ç¬¦ï¼š<code>+-/=%"'&amp;_(),.;:?!Â§`^Ã„Ã–ÃœÃŸÃ¤Ã¶Ã¼Ã©''â€š""â€</code></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>å¯ç”¨åï¼ŒreCAPTCHA ä¼šåœ¨åå°è¿è¡Œ (v3)ï¼Œæ ¹æ®ç”¨æˆ·è¡Œä¸ºåˆ†é…ä¸€ä¸ªåˆ†æ•°ã€‚ä½äºé…ç½®é˜ˆå€¼çš„åˆ†æ•°å°†æç¤ºè¿›ä¸€æ­¥éªŒè¯æˆ–é˜»æ­¢è¯·æ±‚ã€‚å¯¹äºå¯è§çš„æŒ‘æˆ˜ (v2)ï¼Œç”¨æˆ·å¿…é¡»ä¸ reCAPTCHA å°éƒ¨ä»¶äº¤äº’æ‰èƒ½ç»§ç»­ã€‚</p>
<p>ç°åœ¨æœ‰ä¸¤ç§é›†æˆ reCAPTCHA çš„æ–¹æ³•ï¼š
- ç»å…¸ç‰ˆæœ¬ï¼ˆç«™ç‚¹/å¯†é’¥ï¼Œv2/v3 éªŒè¯ç«¯ç‚¹ï¼‰
- ä½¿ç”¨ Google Cloud çš„æ–°ç‰ˆæœ¬ï¼ˆé¡¹ç›® ID + API å¯†é’¥ï¼‰ã€‚ç»å…¸ç‰ˆæœ¬ä»ç„¶å¯ç”¨ï¼Œå¯ä»¥é€šè¿‡ <code>ANTIBOT_RECAPTCHA_CLASSIC</code> è¿›è¡Œåˆ‡æ¢ã€‚</p>
<p>å¯¹äºç»å…¸ç‰ˆæœ¬ï¼Œè¯·ä» <a href="https://www.google.com/recaptcha/admin">Google reCAPTCHA ç®¡ç†æ§åˆ¶å°</a>è·å–æ‚¨çš„ç«™ç‚¹å’Œå¯†é’¥ã€‚
å¯¹äºæ–°ç‰ˆæœ¬ï¼Œè¯·åœ¨æ‚¨çš„ Google Cloud é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª reCAPTCHA å¯†é’¥ï¼Œå¹¶ä½¿ç”¨é¡¹ç›® ID å’Œä¸€ä¸ª API å¯†é’¥ï¼ˆè¯·å‚é˜… <a href="https://console.cloud.google.com/security/recaptcha">Google Cloud reCAPTCHA æ§åˆ¶å°</a>ï¼‰ã€‚ä»ç„¶éœ€è¦ä¸€ä¸ªç«™ç‚¹å¯†é’¥ã€‚</p>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td>å¯ç”¨ antibotï¼›è®¾ç½®ä¸º <code>recaptcha</code> ä»¥å¯ç”¨ reCAPTCHAã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_CLASSIC</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td>ä½¿ç”¨ç»å…¸ reCAPTCHAã€‚è®¾ç½®ä¸º <code>no</code> ä»¥ä½¿ç”¨æ–°çš„åŸºäº Google Cloud çš„ç‰ˆæœ¬ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>reCAPTCHA ç«™ç‚¹å¯†é’¥ã€‚ç»å…¸ç‰ˆå’Œæ–°ç‰ˆéƒ½éœ€è¦ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>reCAPTCHA å¯†é’¥ã€‚ä»…ç»å…¸ç‰ˆéœ€è¦ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_PROJECT_ID</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>Google Cloud é¡¹ç›® IDã€‚ä»…æ–°ç‰ˆéœ€è¦ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_API_KEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>ç”¨äºè°ƒç”¨ reCAPTCHA Enterprise API çš„ Google Cloud API å¯†é’¥ã€‚ä»…æ–°ç‰ˆéœ€è¦ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA3</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>å¯é€‰çš„ JA3 TLS æŒ‡çº¹ï¼ŒåŒ…å«åœ¨ä¼ä¸šè¯„ä¼°ä¸­ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA4</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>å¯é€‰çš„ JA4 TLS æŒ‡çº¹ï¼ŒåŒ…å«åœ¨ä¼ä¸šè¯„ä¼°ä¸­ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SCORE</code></td>
<td><code>0.7</code></td>
<td>multisite</td>
<td>no</td>
<td>é€šè¿‡æ‰€éœ€çš„æœ€ä½åˆ†æ•°ï¼ˆé€‚ç”¨äºç»å…¸ v3 å’Œæ–°ç‰ˆæœ¬ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>å¯ç”¨åï¼ŒhCaptcha æä¾›äº†ä¸€ä¸ªæœ‰æ•ˆçš„ reCAPTCHA æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡éªŒè¯ç”¨æˆ·äº¤äº’è€Œæ— éœ€ä¾èµ–è¯„åˆ†æœºåˆ¶ã€‚å®ƒç”¨ä¸€ä¸ªç®€å•çš„äº¤äº’å¼æµ‹è¯•æ¥æŒ‘æˆ˜ç”¨æˆ·ï¼Œä»¥ç¡®è®¤ä»–ä»¬çš„åˆæ³•æ€§ã€‚</p>
<p>è¦å°† hCaptcha ä¸ BunkerWeb é›†æˆï¼Œæ‚¨å¿…é¡»ä» hCaptcha ä»ªè¡¨æ¿ <a href="https://www.hcaptcha.com">hCaptcha</a> è·å–å¿…è¦çš„å‡­æ®ã€‚è¿™äº›å‡­æ®åŒ…æ‹¬ä¸€ä¸ªç«™ç‚¹å¯†é’¥å’Œä¸€ä¸ªå¯†é’¥ã€‚</p>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ Antibotï¼š</strong> è®¾ç½®ä¸º <code>hcaptcha</code> ä»¥å¯ç”¨ hCaptcha æŒ‘æˆ˜ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>hCaptcha ç«™ç‚¹å¯†é’¥ï¼š</strong> æ‚¨çš„ hCaptcha ç«™ç‚¹å¯†é’¥ï¼ˆä» hCaptcha è·å–ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>hCaptcha å¯†é’¥ï¼š</strong> æ‚¨çš„ hCaptcha å¯†é’¥ï¼ˆä» hCaptcha è·å–ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Turnstile æ˜¯ä¸€ç§ç°ä»£ã€æ³¨é‡éšç§çš„æŒ‘æˆ˜æœºåˆ¶ï¼Œå®ƒåˆ©ç”¨ Cloudflare çš„æŠ€æœ¯æ¥æ£€æµ‹å’Œé˜»æ­¢è‡ªåŠ¨åŒ–æµé‡ã€‚å®ƒä»¥ä¸€ç§æ— ç¼ã€åå°çš„æ–¹å¼éªŒè¯ç”¨æˆ·äº¤äº’ï¼Œä¸ºåˆæ³•ç”¨æˆ·å‡å°‘äº†æ‘©æ“¦ï¼ŒåŒæ—¶æœ‰æ•ˆåœ°é˜»æ­¢äº†æœºå™¨äººã€‚</p>
<p>è¦å°† Turnstile ä¸ BunkerWeb é›†æˆï¼Œè¯·ç¡®ä¿æ‚¨ä» <a href="https://www.cloudflare.com/turnstile">Cloudflare Turnstile</a> è·å–äº†å¿…è¦çš„å‡­æ®ã€‚</p>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ Antibotï¼š</strong> è®¾ç½®ä¸º <code>turnstile</code> ä»¥å¯ç”¨ Turnstile æŒ‘æˆ˜ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Turnstile ç«™ç‚¹å¯†é’¥ï¼š</strong> æ‚¨çš„ Turnstile ç«™ç‚¹å¯†é’¥ï¼ˆä» Cloudflare è·å–ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Turnstile å¯†é’¥ï¼š</strong> æ‚¨çš„ Turnstile å¯†é’¥ï¼ˆä» Cloudflare è·å–ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>mCaptcha æ˜¯ä¸€ç§æ›¿ä»£çš„ CAPTCHA æŒ‘æˆ˜æœºåˆ¶ï¼Œå®ƒé€šè¿‡å‘ˆç°ä¸€ä¸ªä¸å…¶ä»– antibot è§£å†³æ–¹æ¡ˆç±»ä¼¼çš„äº¤äº’å¼æµ‹è¯•æ¥éªŒè¯ç”¨æˆ·çš„åˆæ³•æ€§ã€‚å¯ç”¨åï¼Œå®ƒä¼šç”¨ mCaptcha æä¾›çš„ CAPTCHA æ¥æŒ‘æˆ˜ç”¨æˆ·ï¼Œç¡®ä¿åªæœ‰çœŸæ­£çš„ç”¨æˆ·æ‰èƒ½ç»•è¿‡è‡ªåŠ¨å®‰å…¨æ£€æŸ¥ã€‚</p>
<p>mCaptcha çš„è®¾è®¡è€ƒè™‘äº†éšç§ã€‚å®ƒå®Œå…¨ç¬¦åˆ GDPRï¼Œç¡®ä¿æŒ‘æˆ˜è¿‡ç¨‹ä¸­æ¶‰åŠçš„æ‰€æœ‰ç”¨æˆ·æ•°æ®éƒ½éµå®ˆä¸¥æ ¼çš„æ•°æ®ä¿æŠ¤æ ‡å‡†ã€‚æ­¤å¤–ï¼ŒmCaptcha æä¾›äº†è‡ªæ‰˜ç®¡çš„çµæ´»æ€§ï¼Œå…è®¸ç»„ç»‡å®Œå…¨æ§åˆ¶å…¶æ•°æ®å’ŒåŸºç¡€è®¾æ–½ã€‚è¿™ç§è‡ªæ‰˜ç®¡èƒ½åŠ›ä¸ä»…å¢å¼ºäº†éšç§ï¼Œè¿˜ä¼˜åŒ–äº†æ€§èƒ½å’Œå®šåˆ¶ï¼Œä»¥é€‚åº”ç‰¹å®šçš„éƒ¨ç½²éœ€æ±‚ã€‚</p>
<p>è¦å°† mCaptcha ä¸ BunkerWeb é›†æˆï¼Œæ‚¨å¿…é¡»ä» <a href="https://mcaptcha.org/">mCaptcha</a> å¹³å°æˆ–æ‚¨è‡ªå·±çš„æä¾›å•†é‚£é‡Œè·å–å¿…è¦çš„å‡­æ®ã€‚è¿™äº›å‡­æ®åŒ…æ‹¬ç”¨äºéªŒè¯çš„ç«™ç‚¹å¯†é’¥å’Œå¯†é’¥ã€‚</p>
<p><strong>é…ç½®è®¾ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ Antibotï¼š</strong> è®¾ç½®ä¸º <code>mcaptcha</code> ä»¥å¯ç”¨ mCaptcha æŒ‘æˆ˜ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>mCaptcha ç«™ç‚¹å¯†é’¥ï¼š</strong> æ‚¨çš„ mCaptcha ç«™ç‚¹å¯†é’¥ï¼ˆä» mCaptcha è·å–ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>mCaptcha å¯†é’¥ï¼š</strong> æ‚¨çš„ mCaptcha å¯†é’¥ï¼ˆä» mCaptcha è·å–ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_URL</code></td>
<td><code>https://demo.mcaptcha.org</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>mCaptcha åŸŸï¼š</strong> ç”¨äº mCaptcha æŒ‘æˆ˜çš„åŸŸã€‚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h3 id="_11">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:8"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><input id="__tabbed_4_5" name="__tabbed_4" type="radio" /><input id="__tabbed_4_6" name="__tabbed_4" type="radio" /><input id="__tabbed_4_7" name="__tabbed_4" type="radio" /><input id="__tabbed_4_8" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Cookie æŒ‘æˆ˜</label><label for="__tabbed_4_2">JavaScript æŒ‘æˆ˜</label><label for="__tabbed_4_3">Captcha æŒ‘æˆ˜</label><label for="__tabbed_4_4">reCAPTCHA ç»å…¸ç‰ˆ</label><label for="__tabbed_4_5">reCAPTCHA (æ–°)</label><label for="__tabbed_4_6">hCaptcha æŒ‘æˆ˜</label><label for="__tabbed_4_7">Turnstile æŒ‘æˆ˜</label><label for="__tabbed_4_8">mCaptcha æŒ‘æˆ˜</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>å¯ç”¨ Cookie æŒ‘æˆ˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cookie&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ JavaScript æŒ‘æˆ˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;javascript&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ Captcha æŒ‘æˆ˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;captcha&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">ANTIBOT_CAPTCHA_ALPHABET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;23456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
</code></pre></div>
<p>æ³¨æ„ï¼šä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨äº†æ•°å­— 2-9 å’Œæ‰€æœ‰å­—æ¯ï¼Œè¿™æ˜¯ CAPTCHA æŒ‘æˆ˜æœ€å¸¸ç”¨çš„å­—ç¬¦ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰å­—æ¯è¡¨ä»¥åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚</p>
</div>
<div class="tabbed-block">
<p>ç»å…¸ reCAPTCHAï¼ˆç«™ç‚¹/å¯†é’¥ï¼‰çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>æ–°çš„åŸºäº Google Cloud çš„ reCAPTCHAï¼ˆé¡¹ç›® ID + API å¯†é’¥ï¼‰çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_PROJECT_ID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-project-id&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-api-key&quot;</span>
<span class="c1"># å¯é€‰çš„æŒ‡çº¹ä»¥æ”¹å–„ä¼ä¸šè¯„ä¼°</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA3: &quot;&lt;ja3-fingerprint&gt;&quot;</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA4: &quot;&lt;ja4-fingerprint&gt;&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ hCaptcha æŒ‘æˆ˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hcaptcha&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ Turnstile æŒ‘æˆ˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turnstile&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ mCaptcha æŒ‘æˆ˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mcaptcha&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://demo.mcaptcha.org&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="auth-basic">Auth basic</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Auth Basic æ’ä»¶æä¾› HTTP åŸºæœ¬è®¤è¯æ¥ä¿æŠ¤æ‚¨çš„ç½‘ç«™æˆ–ç‰¹å®šèµ„æºã€‚æ­¤åŠŸèƒ½é€šè¿‡è¦æ±‚ç”¨æˆ·åœ¨è®¿é—®å—ä¿æŠ¤å†…å®¹ä¹‹å‰è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ¥å¢åŠ é¢å¤–çš„å®‰å…¨å±‚ã€‚è¿™ç§ç±»å‹çš„èº«ä»½éªŒè¯å®ç°ç®€å•ï¼Œå¹¶å¾—åˆ°æµè§ˆå™¨çš„å¹¿æ³›æ”¯æŒã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“ç”¨æˆ·å°è¯•è®¿é—®æ‚¨ç½‘ç«™çš„å—ä¿æŠ¤åŒºåŸŸæ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ªèº«ä»½éªŒè¯è´¨è¯¢ã€‚</li>
<li>æµè§ˆå™¨ä¼šæ˜¾ç¤ºä¸€ä¸ªç™»å½•å¯¹è¯æ¡†ï¼Œæç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li>ç”¨æˆ·è¾“å…¥ä»–ä»¬çš„å‡­æ®ï¼Œè¿™äº›å‡­æ®å°†è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚</li>
<li>å¦‚æœå‡­æ®æœ‰æ•ˆï¼Œç”¨æˆ·å°†è¢«æˆäºˆè®¿é—®æ‰€è¯·æ±‚å†…å®¹çš„æƒé™ã€‚</li>
<li>å¦‚æœå‡­æ®æ— æ•ˆï¼Œå°†å‘ç”¨æˆ·æä¾›ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼ŒçŠ¶æ€ç ä¸º 401 Unauthorizedã€‚</li>
</ol>
<h3 id="_12">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¯ç”¨å’Œé…ç½® Auth Basic èº«ä»½éªŒè¯ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> åœ¨æ‚¨çš„ BunkerWeb é…ç½®ä¸­å°† <code>USE_AUTH_BASIC</code> è®¾ç½®ä¸º <code>yes</code>ã€‚</li>
<li><strong>é€‰æ‹©ä¿æŠ¤èŒƒå›´ï¼š</strong> é€šè¿‡é…ç½® <code>AUTH_BASIC_LOCATION</code> è®¾ç½®ï¼Œå†³å®šæ˜¯ä¿æŠ¤æ•´ä¸ªç½‘ç«™è¿˜æ˜¯ä»…ä¿æŠ¤ç‰¹å®š URLã€‚</li>
<li><strong>å®šä¹‰å‡­æ®ï¼š</strong> ä½¿ç”¨ <code>AUTH_BASIC_USER</code> å’Œ <code>AUTH_BASIC_PASSWORD</code> è®¾ç½®è‡³å°‘è®¾ç½®ä¸€å¯¹ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li><strong>è‡ªå®šä¹‰æ¶ˆæ¯ï¼š</strong> å¯é€‰åœ°æ›´æ”¹ <code>AUTH_BASIC_TEXT</code> ä»¥åœ¨ç™»å½•æç¤ºä¸­æ˜¾ç¤ºè‡ªå®šä¹‰æ¶ˆæ¯ã€‚</li>
</ol>
<h3 id="_13">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_AUTH_BASIC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨åŸºæœ¬è®¤è¯ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨åŸºæœ¬èº«ä»½éªŒè¯ã€‚</td>
</tr>
<tr>
<td><code>AUTH_BASIC_LOCATION</code></td>
<td><code>sitewide</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¿æŠ¤èŒƒå›´ï¼š</strong> è®¾ç½®ä¸º <code>sitewide</code> ä»¥ä¿æŠ¤æ•´ä¸ªç«™ç‚¹ï¼Œæˆ–æŒ‡å®šä¸€ä¸ª URL è·¯å¾„ï¼ˆä¾‹å¦‚ <code>/admin</code>ï¼‰ä»¥ä»…ä¿æŠ¤ç‰¹å®šåŒºåŸŸã€‚</td>
</tr>
<tr>
<td><code>AUTH_BASIC_USER</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ç”¨æˆ·åï¼š</strong> èº«ä»½éªŒè¯æ‰€éœ€çš„ç”¨æˆ·åã€‚æ‚¨å¯ä»¥å®šä¹‰å¤šä¸ªç”¨æˆ·å/å¯†ç å¯¹ã€‚</td>
</tr>
<tr>
<td><code>AUTH_BASIC_PASSWORD</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å¯†ç ï¼š</strong> èº«ä»½éªŒè¯æ‰€éœ€çš„å¯†ç ã€‚æ¯ä¸ªå¯†ç å¯¹åº”ä¸€ä¸ªç”¨æˆ·åã€‚</td>
</tr>
<tr>
<td><code>AUTH_BASIC_TEXT</code></td>
<td><code>Restricted area</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æç¤ºæ–‡æœ¬ï¼š</strong> æ˜¾ç¤ºç»™ç”¨æˆ·çš„èº«ä»½éªŒè¯æç¤ºä¸­çš„æ¶ˆæ¯ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>HTTP åŸºæœ¬è®¤è¯ä»¥ Base64 ç¼–ç ï¼ˆéåŠ å¯†ï¼‰ä¼ è¾“å‡­æ®ã€‚è™½ç„¶åœ¨é€šè¿‡ HTTPS ä½¿ç”¨æ—¶è¿™æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†åœ¨æ™®é€š HTTP ä¸Šä¸åº”è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„ã€‚ä½¿ç”¨åŸºæœ¬èº«ä»½éªŒè¯æ—¶ï¼Œè¯·åŠ¡å¿…å¯ç”¨ SSL/TLSã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">ä½¿ç”¨å¤šä¸ªå‡­æ®</p>
<p>æ‚¨å¯ä»¥ä¸ºè®¿é—®é…ç½®å¤šä¸ªç”¨æˆ·å/å¯†ç å¯¹ã€‚æ¯ä¸ª <code>AUTH_BASIC_USER</code> è®¾ç½®éƒ½åº”æœ‰ä¸€ä¸ªå¯¹åº”çš„ <code>AUTH_BASIC_PASSWORD</code> è®¾ç½®ã€‚</p>
</div>
<h3 id="_14">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">å…¨ç«™ä¿æŠ¤</label><label for="__tabbed_5_2">ä¿æŠ¤ç‰¹å®šåŒºåŸŸ</label><label for="__tabbed_5_3">å¤šä¸ªç”¨æˆ·</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>è¦ç”¨ä¸€ç»„å‡­æ®ä¿æŠ¤æ‚¨çš„æ•´ä¸ªç½‘ç«™ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä»…ä¿æŠ¤ç‰¹å®šè·¯å¾„ï¼Œä¾‹å¦‚ç®¡ç†é¢æ¿ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºå¤šä¸ªç”¨æˆ·è®¾ç½®ä¸åŒçš„å‡­æ®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Staff</span><span class="nv"> </span><span class="s">Area&quot;</span>

<span class="c1"># ç¬¬ä¸€ä¸ªç”¨æˆ·</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin_password&quot;</span>

<span class="c1"># ç¬¬äºŒä¸ªç”¨æˆ·</span>
<span class="nt">AUTH_BASIC_USER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor_password&quot;</span>

<span class="c1"># ç¬¬ä¸‰ä¸ªç”¨æˆ·</span>
<span class="nt">AUTH_BASIC_USER_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer_password&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup">Backup</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>å¤‡ä»½æ’ä»¶æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨å¤‡ä»½è§£å†³æ–¹æ¡ˆæ¥ä¿æŠ¤æ‚¨çš„ BunkerWeb æ•°æ®ã€‚æ­¤åŠŸèƒ½é€šè¿‡æ ¹æ®æ‚¨é¦–é€‰çš„æ—¶é—´è¡¨åˆ›å»ºå®šæœŸå¤‡ä»½ï¼Œç¡®ä¿æ‚¨é‡è¦æ•°æ®åº“çš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§ã€‚å¤‡ä»½å­˜å‚¨åœ¨æŒ‡å®šä½ç½®ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹å’Œæ‰‹åŠ¨å‘½ä»¤è½»æ¾ç®¡ç†ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æ‚¨çš„æ•°æ®åº“ä¼šæ ¹æ®æ‚¨è®¾ç½®çš„æ—¶é—´è¡¨ï¼ˆæ¯æ—¥ã€æ¯å‘¨æˆ–æ¯æœˆï¼‰è‡ªåŠ¨å¤‡ä»½ã€‚</li>
<li>å¤‡ä»½å­˜å‚¨åœ¨æ‚¨ç³»ç»Ÿä¸Šçš„æŒ‡å®šç›®å½•ä¸­ã€‚</li>
<li>æ—§çš„å¤‡ä»½ä¼šæ ¹æ®æ‚¨çš„ä¿ç•™è®¾ç½®è‡ªåŠ¨è½®æ¢ã€‚</li>
<li>æ‚¨å¯ä»¥éšæ—¶æ‰‹åŠ¨åˆ›å»ºå¤‡ä»½ã€åˆ—å‡ºç°æœ‰å¤‡ä»½æˆ–ä»å¤‡ä»½ä¸­æ¢å¤ã€‚</li>
<li>åœ¨ä»»ä½•æ¢å¤æ“ä½œä¹‹å‰ï¼Œå½“å‰çŠ¶æ€éƒ½ä¼šè‡ªåŠ¨å¤‡ä»½ä½œä¸ºå®‰å…¨æªæ–½ã€‚</li>
</ol>
<h3 id="_15">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨å¤‡ä»½åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å¤‡ä»½åŠŸèƒ½é»˜è®¤å¯ç”¨ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>USE_BACKUP</code> è®¾ç½®æ¥æ§åˆ¶æ­¤åŠŸèƒ½ã€‚</li>
<li><strong>é…ç½®å¤‡ä»½è®¡åˆ’ï¼š</strong> é€šè¿‡è®¾ç½® <code>BACKUP_SCHEDULE</code> å‚æ•°é€‰æ‹©å¤‡ä»½çš„é¢‘ç‡ã€‚</li>
<li><strong>è®¾ç½®ä¿ç•™ç­–ç•¥ï¼š</strong> ä½¿ç”¨ <code>BACKUP_ROTATION</code> è®¾ç½®æŒ‡å®šè¦ä¿ç•™çš„å¤‡ä»½æ•°é‡ã€‚</li>
<li><strong>å®šä¹‰å­˜å‚¨ä½ç½®ï¼š</strong> ä½¿ç”¨ <code>BACKUP_DIRECTORY</code> è®¾ç½®é€‰æ‹©å¤‡ä»½çš„å­˜å‚¨ä½ç½®ã€‚</li>
<li><strong>ä½¿ç”¨ CLI å‘½ä»¤ï¼š</strong> éœ€è¦æ—¶ï¼Œä½¿ç”¨ <code>bwcli plugin backup</code> å‘½ä»¤æ‰‹åŠ¨ç®¡ç†å¤‡ä»½ã€‚</li>
</ol>
<h3 id="_16">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP</code></td>
<td><code>yes</code></td>
<td>å…¨å±€</td>
<td>å¦</td>
<td><strong>å¯ç”¨å¤‡ä»½ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è‡ªåŠ¨å¤‡ä»½ã€‚</td>
</tr>
<tr>
<td><code>BACKUP_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>å…¨å±€</td>
<td>å¦</td>
<td><strong>å¤‡ä»½é¢‘ç‡ï¼š</strong> æ‰§è¡Œå¤‡ä»½çš„é¢‘ç‡ã€‚é€‰é¡¹ï¼š<code>daily</code>ã€<code>weekly</code> æˆ– <code>monthly</code>ã€‚</td>
</tr>
<tr>
<td><code>BACKUP_ROTATION</code></td>
<td><code>7</code></td>
<td>å…¨å±€</td>
<td>å¦</td>
<td><strong>å¤‡ä»½ä¿ç•™ï¼š</strong> è¦ä¿ç•™çš„å¤‡ä»½æ–‡ä»¶æ•°é‡ã€‚è¶…è¿‡æ­¤æ•°é‡çš„æ—§å¤‡ä»½å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚</td>
</tr>
<tr>
<td><code>BACKUP_DIRECTORY</code></td>
<td><code>/var/lib/bunkerweb/backups</code></td>
<td>å…¨å±€</td>
<td>å¦</td>
<td><strong>å¤‡ä»½ä½ç½®ï¼š</strong> å¤‡ä»½æ–‡ä»¶å°†å­˜å‚¨çš„ç›®å½•ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="_17">å‘½ä»¤è¡Œç•Œé¢</h3>
<p>å¤‡ä»½æ’ä»¶æä¾›äº†å‡ ä¸ª CLI å‘½ä»¤æ¥ç®¡ç†æ‚¨çš„å¤‡ä»½ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="c1"># åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„å¤‡ä»½</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>list

<span class="c1"># åˆ›å»ºä¸€ä¸ªæ‰‹åŠ¨å¤‡ä»½</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save

<span class="c1"># åœ¨è‡ªå®šä¹‰ä½ç½®åˆ›å»ºä¸€ä¸ªå¤‡ä»½</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w"> </span>--directory<span class="w"> </span>/path/to/custom/location

<span class="c1"># ä»æœ€è¿‘çš„å¤‡ä»½æ¢å¤</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore

<span class="c1"># ä»ç‰¹å®šçš„å¤‡ä»½æ–‡ä»¶æ¢å¤</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w"> </span>/path/to/backup/backup-sqlite-2023-08-15_12-34-56.zip
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">å®‰å…¨ç¬¬ä¸€</p>
<p>åœ¨ä»»ä½•æ¢å¤æ“ä½œä¹‹å‰ï¼Œå¤‡ä»½æ’ä»¶ä¼šè‡ªåŠ¨åœ¨ä¸´æ—¶ä½ç½®åˆ›å»ºæ‚¨å½“å‰æ•°æ®åº“çŠ¶æ€çš„å¤‡ä»½ã€‚å¦‚æœæ‚¨éœ€è¦è¿˜åŸæ¢å¤æ“ä½œï¼Œè¿™æä¾›äº†ä¸€ä¸ªé¢å¤–çš„ä¿éšœã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">æ•°æ®åº“å…¼å®¹æ€§</p>
<p>å¤‡ä»½æ’ä»¶æ”¯æŒ SQLiteã€MySQL/MariaDB å’Œ PostgreSQL æ•°æ®åº“ã€‚ç›®å‰ä¸æ”¯æŒ Oracle æ•°æ®åº“çš„å¤‡ä»½å’Œæ¢å¤æ“ä½œã€‚</p>
</div>
<h3 id="_18">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">æ¯æ—¥å¤‡ä»½ï¼Œä¿ç•™ 7 å¤©</label><label for="__tabbed_6_2">æ¯å‘¨å¤‡ä»½ï¼Œå»¶é•¿ä¿ç•™æœŸ</label><label for="__tabbed_6_3">æ¯æœˆå¤‡ä»½åˆ°è‡ªå®šä¹‰ä½ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>é»˜è®¤é…ç½®ï¼Œåˆ›å»ºæ¯æ—¥å¤‡ä»½å¹¶ä¿ç•™æœ€è¿‘çš„ 7 ä¸ªæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºé¢‘ç‡è¾ƒä½ä½†ä¿ç•™æ—¶é—´è¾ƒé•¿çš„å¤‡ä»½çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;weekly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºæ¯æœˆå¤‡ä»½å¹¶å­˜å‚¨åœ¨è‡ªå®šä¹‰ä½ç½®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/backup-drive/bunkerweb-backups&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup-s3-pro">Backup S3 <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Automatically backup your data to an S3 bucket</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP_S3</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td>Enable or disable the S3 backup feature</td>
</tr>
<tr>
<td><code>BACKUP_S3_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>å¦</td>
<td>The frequency of the backup</td>
</tr>
<tr>
<td><code>BACKUP_S3_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>å¦</td>
<td>The number of backups to keep</td>
</tr>
<tr>
<td><code>BACKUP_S3_ENDPOINT</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The S3 endpoint</td>
</tr>
<tr>
<td><code>BACKUP_S3_BUCKET</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The S3 bucket</td>
</tr>
<tr>
<td><code>BACKUP_S3_DIR</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The S3 directory</td>
</tr>
<tr>
<td><code>BACKUP_S3_REGION</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The S3 region</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_ID</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The S3 access key ID</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_SECRET</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The S3 access key secret</td>
</tr>
<tr>
<td><code>BACKUP_S3_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>global</td>
<td>å¦</td>
<td>The compression level of the backup zip file</td>
</tr>
</tbody>
</table>
<h2 id="bad-behavior">Bad behavior</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>ä¸è‰¯è¡Œä¸ºæ’ä»¶é€šè¿‡è‡ªåŠ¨æ£€æµ‹å¹¶å°ç¦åœ¨æŒ‡å®šæ—¶é—´æ®µå†…äº§ç”Ÿè¿‡å¤šé”™è¯¯æˆ–â€œä¸è‰¯â€HTTP çŠ¶æ€ç çš„ IP åœ°å€æ¥ä¿æŠ¤æ‚¨çš„ç½‘ç«™ã€‚è¿™æœ‰åŠ©äºé˜²å¾¡æš´åŠ›ç ´è§£æ”»å‡»ã€ç½‘ç»œçˆ¬è™«ã€æ¼æ´æ‰«æå™¨ä»¥åŠå…¶ä»–å¯èƒ½äº§ç”Ÿå¤§é‡é”™è¯¯å“åº”çš„æ¶æ„æ´»åŠ¨ã€‚</p>
<p>æ”»å‡»è€…åœ¨æ¢æµ‹æˆ–åˆ©ç”¨æ¼æ´æ—¶ï¼Œé€šå¸¸ä¼šäº§ç”Ÿâ€œå¯ç–‘â€çš„ HTTP çŠ¶æ€ç â€”â€”è¿™äº›ä»£ç æ˜¯æ™®é€šç”¨æˆ·åœ¨ç»™å®šæ—¶é—´èŒƒå›´å†…ä¸å¤ªå¯èƒ½è§¦å‘çš„ã€‚é€šè¿‡æ£€æµ‹è¿™ç§è¡Œä¸ºï¼ŒBunkerWeb å¯ä»¥è‡ªåŠ¨å°ç¦è¿è§„çš„ IP åœ°å€ï¼Œè¿«ä½¿æ”»å‡»è€…ä½¿ç”¨æ–°çš„ IP åœ°å€æ‰èƒ½ç»§ç»­å°è¯•ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>è¯¥æ’ä»¶ä¼šç›‘æ§æ‚¨ç½‘ç«™çš„ HTTP å“åº”ã€‚</li>
<li>å½“è®¿é—®è€…æ”¶åˆ°ä¸€ä¸ªâ€œä¸è‰¯â€çš„ HTTP çŠ¶æ€ç ï¼ˆä¾‹å¦‚ 400ã€401ã€403ã€404 ç­‰ï¼‰æ—¶ï¼Œè¯¥ IP åœ°å€çš„è®¡æ•°å™¨ä¼šå¢åŠ ã€‚</li>
<li>å¦‚æœä¸€ä¸ª IP åœ°å€åœ¨æŒ‡å®šçš„æ—¶é—´æ®µå†…è¶…è¿‡äº†é…ç½®çš„ä¸è‰¯çŠ¶æ€ç é˜ˆå€¼ï¼Œè¯¥ IP å°†è¢«è‡ªåŠ¨å°ç¦ã€‚</li>
<li>æ ¹æ®æ‚¨çš„é…ç½®ï¼Œè¢«å°ç¦çš„ IP å¯ä»¥åœ¨æœåŠ¡çº§åˆ«ï¼ˆä»…é’ˆå¯¹ç‰¹å®šç«™ç‚¹ï¼‰æˆ–å…¨å±€çº§åˆ«ï¼ˆè·¨æ‰€æœ‰ç«™ç‚¹ï¼‰è¢«é˜»æ­¢ã€‚</li>
<li>å°ç¦ä¼šåœ¨é…ç½®çš„å°ç¦æŒç»­æ—¶é—´åè‡ªåŠ¨è¿‡æœŸï¼Œæˆ–è€…å¦‚æœé…ç½®ä¸º <code>0</code> åˆ™æ°¸ä¹…æœ‰æ•ˆã€‚</li>
</ol>
<div class="admonition success">
<p class="admonition-title">ä¸»è¦ä¼˜ç‚¹</p>
<ol>
<li><strong>è‡ªåŠ¨ä¿æŠ¤ï¼š</strong> è‡ªåŠ¨æ£€æµ‹å¹¶é˜»æ­¢æ½œåœ¨çš„æ¶æ„å®¢æˆ·ç«¯ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚</li>
<li><strong>å¯å®šåˆ¶çš„è§„åˆ™ï¼š</strong> æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚ï¼Œå¾®è°ƒæ„æˆâ€œä¸è‰¯è¡Œä¸ºâ€çš„å®šä¹‰ã€‚</li>
<li><strong>èµ„æºèŠ‚çº¦ï¼š</strong> é˜²æ­¢æ¶æ„è¡Œä¸ºè€…é€šè¿‡é‡å¤çš„æ— æ•ˆè¯·æ±‚æ¶ˆè€—æœåŠ¡å™¨èµ„æºã€‚</li>
<li><strong>çµæ´»çš„èŒƒå›´ï¼š</strong> é€‰æ‹©å°ç¦æ˜¯ä»…é€‚ç”¨äºå½“å‰æœåŠ¡è¿˜æ˜¯å…¨å±€é€‚ç”¨äºæ‰€æœ‰æœåŠ¡ã€‚</li>
<li><strong>å°ç¦æŒç»­æ—¶é—´æ§åˆ¶ï¼š</strong> è®¾ç½®ä¸´æ—¶å°ç¦ï¼Œåœ¨é…ç½®çš„æŒç»­æ—¶é—´åè‡ªåŠ¨è¿‡æœŸï¼Œæˆ–è®¾ç½®æ°¸ä¹…å°ç¦ï¼Œç›´åˆ°æ‰‹åŠ¨ç§»é™¤ã€‚</li>
</ol>
</div>
<h3 id="_19">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨â€œä¸è‰¯è¡Œä¸ºâ€åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> â€œä¸è‰¯è¡Œä¸ºâ€åŠŸèƒ½é»˜è®¤å¯ç”¨ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>USE_BAD_BEHAVIOR</code> è®¾ç½®æ¥æ§åˆ¶æ­¤åŠŸèƒ½ã€‚</li>
<li><strong>é…ç½®çŠ¶æ€ç ï¼š</strong> ä½¿ç”¨ <code>BAD_BEHAVIOR_STATUS_CODES</code> è®¾ç½®å®šä¹‰å“ªäº› HTTP çŠ¶æ€ç åº”è¢«è§†ä¸ºâ€œä¸è‰¯â€ã€‚</li>
<li><strong>è®¾ç½®é˜ˆå€¼ï¼š</strong> ä½¿ç”¨ <code>BAD_BEHAVIOR_THRESHOLD</code> è®¾ç½®ç¡®å®šå¤šå°‘æ¬¡â€œä¸è‰¯â€å“åº”ä¼šè§¦å‘å°ç¦ã€‚</li>
<li><strong>é…ç½®æ—¶é—´æ®µï¼š</strong> ä½¿ç”¨ <code>BAD_BEHAVIOR_COUNT_TIME</code> å’Œ <code>BAD_BEHAVIOR_BAN_TIME</code> è®¾ç½®æŒ‡å®šè®¡ç®—ä¸è‰¯å“åº”çš„æŒç»­æ—¶é—´å’Œå°ç¦æŒç»­æ—¶é—´ã€‚</li>
<li><strong>é€‰æ‹©å°ç¦èŒƒå›´ï¼š</strong> ä½¿ç”¨ <code>BAD_BEHAVIOR_BAN_SCOPE</code> è®¾ç½®å†³å®šå°ç¦æ˜¯ä»…é€‚ç”¨äºå½“å‰æœåŠ¡è¿˜æ˜¯å…¨å±€é€‚ç”¨äºæ‰€æœ‰æœåŠ¡ã€‚</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">æµæ¨¡å¼</p>
<p>åœ¨<strong>æµæ¨¡å¼</strong>ä¸‹ï¼Œåªæœ‰ <code>444</code> çŠ¶æ€ç è¢«è§†ä¸ºâ€œä¸è‰¯â€å¹¶ä¼šè§¦å‘æ­¤è¡Œä¸ºã€‚</p>
</div>
<h3 id="_20">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BAD_BEHAVIOR</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ä¸è‰¯è¡Œä¸ºæ£€æµ‹ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ä¸è‰¯è¡Œä¸ºæ£€æµ‹å’Œå°ç¦åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_STATUS_CODES</code></td>
<td><code>400 401 403 404 405 429 444</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¸è‰¯çŠ¶æ€ç ï¼š</strong> å½“è¿”å›ç»™å®¢æˆ·ç«¯æ—¶ï¼Œå°†è¢«è®¡ä¸ºâ€œä¸è‰¯â€è¡Œä¸ºçš„ HTTP çŠ¶æ€ç åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_THRESHOLD</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>é˜ˆå€¼ï¼š</strong> ä¸€ä¸ª IP åœ¨è®¡æ•°å‘¨æœŸå†…å¯ä»¥ç”Ÿæˆçš„â€œä¸è‰¯â€çŠ¶æ€ç çš„æ•°é‡ï¼Œè¶…è¿‡è¯¥æ•°é‡å°†è¢«å°ç¦ã€‚</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_COUNT_TIME</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è®¡æ•°å‘¨æœŸï¼š</strong> è®¡ç®—ä¸è‰¯çŠ¶æ€ç ä»¥è¾¾åˆ°é˜ˆå€¼çš„æ—¶é—´çª—å£ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_TIME</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å°ç¦æŒç»­æ—¶é—´ï¼š</strong> ä¸€ä¸ª IP è¶…è¿‡é˜ˆå€¼åå°†è¢«å°ç¦çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤ä¸º 24 å°æ—¶ï¼ˆ86400 ç§’ï¼‰ã€‚è®¾ç½®ä¸º <code>0</code> è¡¨ç¤ºæ°¸ä¸è§£å°çš„æ°¸ä¹…å°ç¦ã€‚</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_SCOPE</code></td>
<td><code>service</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å°ç¦èŒƒå›´ï¼š</strong> å†³å®šå°ç¦æ˜¯ä»…é€‚ç”¨äºå½“å‰æœåŠ¡ (<code>service</code>) è¿˜æ˜¯æ‰€æœ‰æœåŠ¡ (<code>global</code>)ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">è¯¯æŠ¥</p>
<p>åœ¨è®¾ç½®é˜ˆå€¼å’Œè®¡æ•°æ—¶é—´æ—¶è¦å°å¿ƒã€‚å°†è¿™äº›å€¼è®¾ç½®å¾—å¤ªä½å¯èƒ½ä¼šæ— æ„ä¸­å°ç¦åœ¨æµè§ˆæ‚¨ç½‘ç«™æ—¶é‡åˆ°é”™è¯¯çš„åˆæ³•ç”¨æˆ·ã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">è°ƒæ•´æ‚¨çš„é…ç½®</p>
<p>ä»ä¿å®ˆçš„è®¾ç½®å¼€å§‹ï¼ˆæ›´é«˜çš„é˜ˆå€¼ï¼Œæ›´çŸ­çš„å°ç¦æ—¶é—´ï¼‰ï¼Œå¹¶æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚å’Œæµé‡æ¨¡å¼è¿›è¡Œè°ƒæ•´ã€‚ç›‘æ§æ‚¨çš„æ—¥å¿—ä»¥ç¡®ä¿åˆæ³•ç”¨æˆ·ä¸ä¼šè¢«é”™è¯¯åœ°å°ç¦ã€‚</p>
</div>
<h3 id="_21">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">é»˜è®¤é…ç½®</label><label for="__tabbed_7_2">ä¸¥æ ¼é…ç½®</label><label for="__tabbed_7_3">å®½æ¾é…ç½®</label><label for="__tabbed_7_4">æ°¸ä¹…å°ç¦é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>é»˜è®¤é…ç½®æä¾›äº†ä¸€ç§é€‚ç”¨äºå¤§å¤šæ•°ç½‘ç«™çš„å¹³è¡¡æ–¹æ³•ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯¹äºé«˜å®‰å…¨æ€§åº”ç”¨ç¨‹åºï¼Œæ‚¨å¸Œæœ›æ›´ç§¯æåœ°å°ç¦æ½œåœ¨å¨èƒï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span><span class="w">  </span><span class="c1"># 7 å¤©</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="c1"># åœ¨æ‰€æœ‰æœåŠ¡ä¸­å°ç¦</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯¹äºå…·æœ‰é«˜åˆæ³•æµé‡ä¸”æ‚¨å¸Œæœ›é¿å…è¯¯æŠ¥çš„ç½‘ç«™ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">429&quot;</span><span class="w">  </span><span class="c1"># ä»…è®¡ç®—æœªç»æˆæƒã€ç¦æ­¢å’Œé€Ÿç‡å—é™çš„è¯·æ±‚</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span><span class="w">  </span><span class="c1"># 1 å°æ—¶</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯¹äºæ‚¨å¸Œæœ›æ£€æµ‹åˆ°çš„æ”»å‡»è€…è¢«æ°¸ä¹…å°ç¦ï¼Œç›´åˆ°æ‰‹åŠ¨è§£å°çš„æƒ…å†µï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="w">  </span><span class="c1"># æ°¸ä¹…å°ç¦ï¼ˆæ°¸ä¸å¤±æ•ˆï¼‰</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="c1"># åœ¨æ‰€æœ‰æœåŠ¡ä¸­å°ç¦</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="blacklist">Blacklist</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>é»‘åå•æ’ä»¶é€šè¿‡æ ¹æ®å„ç§å®¢æˆ·ç«¯å±æ€§é˜»æ­¢è®¿é—®æ¥ä¸ºæ‚¨çš„ç½‘ç«™æä¾›å¼ºå¤§çš„ä¿æŠ¤ã€‚æ­¤åŠŸèƒ½é€šè¿‡æ ¹æ® IP åœ°å€ã€ç½‘ç»œã€åå‘ DNS æ¡ç›®ã€ASNã€ç”¨æˆ·ä»£ç†å’Œç‰¹å®šçš„ URI æ¨¡å¼æ‹’ç»è®¿é—®æ¥é˜²å¾¡å·²çŸ¥çš„æ¶æ„å®ä½“ã€æ‰«æå™¨å’Œå¯ç–‘è®¿é—®è€…ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>è¯¥æ’ä»¶ä¼šæ ¹æ®å¤šä¸ªé»‘åå•æ ‡å‡†ï¼ˆIP åœ°å€ã€ç½‘ç»œã€rDNSã€ASNã€ç”¨æˆ·ä»£ç†æˆ– URI æ¨¡å¼ï¼‰æ£€æŸ¥ä¼ å…¥çš„è¯·æ±‚ã€‚</li>
<li>é»‘åå•å¯ä»¥ç›´æ¥åœ¨æ‚¨çš„é…ç½®ä¸­æŒ‡å®šï¼Œä¹Ÿå¯ä»¥ä»å¤–éƒ¨ URL åŠ è½½ã€‚</li>
<li>å¦‚æœè®¿é—®è€…åŒ¹é…ä»»ä½•é»‘åå•è§„åˆ™ï¼ˆå¹¶ä¸”ä¸åŒ¹é…ä»»ä½•å¿½ç•¥è§„åˆ™ï¼‰ï¼Œè®¿é—®å°†è¢«æ‹’ç»ã€‚</li>
<li>é»‘åå•ä¼šæ ¹æ®é…ç½®çš„ URL å®šæœŸè‡ªåŠ¨æ›´æ–°ã€‚</li>
<li>æ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„ç‰¹å®šå®‰å…¨éœ€æ±‚è‡ªå®šä¹‰è¦æ£€æŸ¥å’Œå¿½ç•¥çš„ç¡®åˆ‡æ ‡å‡†ã€‚</li>
</ol>
<h3 id="_22">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨é»‘åå•åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> é»‘åå•åŠŸèƒ½é»˜è®¤å¯ç”¨ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>USE_BLACKLIST</code> è®¾ç½®æ¥æ§åˆ¶æ­¤åŠŸèƒ½ã€‚</li>
<li><strong>é…ç½®é˜»æ­¢è§„åˆ™ï¼š</strong> å®šä¹‰åº”é˜»æ­¢çš„ IPã€ç½‘ç»œã€rDNS æ¨¡å¼ã€ASNã€ç”¨æˆ·ä»£ç†æˆ– URIã€‚</li>
<li><strong>è®¾ç½®å¿½ç•¥è§„åˆ™ï¼š</strong> æŒ‡å®šåº”ç»•è¿‡é»‘åå•æ£€æŸ¥çš„ä»»ä½•ä¾‹å¤–æƒ…å†µã€‚</li>
<li><strong>æ·»åŠ å¤–éƒ¨æºï¼š</strong> é…ç½® URL ä»¥è‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°é»‘åå•æ•°æ®ã€‚</li>
<li><strong>ç›‘æ§æœ‰æ•ˆæ€§ï¼š</strong> æŸ¥çœ‹ <a href="../web-ui/">web UI</a> ä»¥æŸ¥çœ‹æœ‰å…³è¢«é˜»æ­¢è¯·æ±‚çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ol>
<div class="admonition info">
<p class="admonition-title">æµæ¨¡å¼</p>
<p>å½“ä½¿ç”¨æµæ¨¡å¼æ—¶ï¼Œåªä¼šæ‰§è¡Œ IPã€rDNS å’Œ ASN æ£€æŸ¥ã€‚</p>
</div>
<h3 id="_23">é…ç½®è®¾ç½®</h3>
<p><strong>é€šç”¨</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BLACKLIST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨é»‘åå•ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨é»‘åå•åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_COMMUNITY_LISTS</code></td>
<td><code>ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¤¾åŒºé»‘åå•ï¼š</strong> é€‰æ‹©é¢„é…ç½®çš„ç¤¾åŒºç»´æŠ¤çš„é»‘åå•ä»¥åŒ…å«åœ¨é˜»æ­¢ä¸­ã€‚</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="8:6"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><input id="__tabbed_8_4" name="__tabbed_8" type="radio" /><input id="__tabbed_8_5" name="__tabbed_8" type="radio" /><input id="__tabbed_8_6" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">ç¤¾åŒºé»‘åå•</label><label for="__tabbed_8_2">IP åœ°å€</label><label for="__tabbed_8_3">åå‘ DNS</label><label for="__tabbed_8_4">ASN</label><label for="__tabbed_8_5">ç”¨æˆ·ä»£ç†</label><label for="__tabbed_8_6">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> ä½¿æ‚¨èƒ½å¤Ÿå¿«é€Ÿæ·»åŠ ç»´æŠ¤è‰¯å¥½çš„ã€æ¥è‡ªç¤¾åŒºçš„é»‘åå•ï¼Œè€Œæ— éœ€æ‰‹åŠ¨é…ç½® URLã€‚</p>
<p><code>BLACKLIST_COMMUNITY_LISTS</code> è®¾ç½®å…è®¸æ‚¨ä»ç²¾é€‰çš„é»‘åå•æºä¸­è¿›è¡Œé€‰æ‹©ã€‚å¯ç”¨é€‰é¡¹åŒ…æ‹¬ï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>æè¿°</th>
<th>æ¥æº</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ip:laurent-minne-data-shield-aggressive</code></td>
<td>Data-Shield IPv4 é»‘åå•ã€‚DST = æ¬§æ´²</td>
<td></td>
</tr>
<tr>
<td><code>https://raw.githubusercontent.com/duggytuxy/Data-Shield_IPv4_Blocklist/refs/heads/main/prod_data-shield_ipv4_blocklist.txt</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ip:danmeuk-tor-exit</code></td>
<td>Tor å‡ºå£èŠ‚ç‚¹ IP (dan.me.uk)</td>
<td><code>https://www.dan.me.uk/torlist/?exit</code></td>
</tr>
<tr>
<td><code>ua:mitchellkrogza-bad-user-agents</code></td>
<td>Nginx é˜»æ­¢ä¸è‰¯æœºå™¨äººã€åƒåœ¾é‚®ä»¶å¼•èæ¥æºã€æ¼æ´æ‰«æå™¨ã€ç”¨æˆ·ä»£ç†ã€æ¶æ„è½¯ä»¶ã€å¹¿å‘Šè½¯ä»¶ã€å‹’ç´¢è½¯ä»¶ã€æ¶æ„ç½‘ç«™ï¼Œå…·æœ‰å DDOSã€Wordpress ä¸»é¢˜æ£€æµ‹å™¨é˜»æ­¢å’Œé’ˆå¯¹é‡å¤è¿è§„è€…çš„ Fail2Ban Jail</td>
<td><code>https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list</code></td>
</tr>
</tbody>
</table>
<p><strong>é…ç½®ï¼š</strong> æŒ‡å®šå¤šä¸ªåˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚ä¾‹å¦‚ï¼š
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">ç¤¾åŒºä¸æ‰‹åŠ¨é…ç½®</p>
<p>ç¤¾åŒºé»‘åå•æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å¼€å§‹ä½¿ç”¨ç»è¿‡éªŒè¯çš„é»‘åå•æºã€‚æ‚¨å¯ä»¥å°†å®ƒä»¬ä¸æ‰‹åŠ¨ URL é…ç½®ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç°æœ€å¤§çš„çµæ´»æ€§ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> æ ¹æ®è®¿é—®è€…çš„ IP åœ°å€æˆ–ç½‘ç»œé˜»æ­¢è®¿é—®ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP é»‘åå•ï¼š</strong> è¦é˜»æ­¢çš„ IP åœ°å€æˆ–ç½‘ç»œï¼ˆCIDR è¡¨ç¤ºæ³•ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ IP é»‘åå•æ£€æŸ¥çš„ IP åœ°å€æˆ–ç½‘ç»œåˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IP_URLS</code></td>
<td><code>https://www.dan.me.uk/torlist/?exit</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP é»‘åå• URLï¼š</strong> åŒ…å«è¦é˜»æ­¢çš„ IP åœ°å€æˆ–ç½‘ç»œçš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ IP åœ°å€æˆ–ç½‘ç»œçš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
<p>é»˜è®¤çš„ <code>BLACKLIST_IP_URLS</code> è®¾ç½®åŒ…å«ä¸€ä¸ªæä¾›<strong>å·²çŸ¥ Tor å‡ºå£èŠ‚ç‚¹åˆ—è¡¨</strong>çš„ URLã€‚è¿™æ˜¯æ¶æ„æµé‡çš„å¸¸è§æ¥æºï¼Œå¯¹äºè®¸å¤šç½‘ç«™æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚</p>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> æ ¹æ®è®¿é—®è€…çš„åå‘åŸŸåé˜»æ­¢è®¿é—®ã€‚è¿™å¯¹äºæ ¹æ®å…¶ç»„ç»‡åŸŸåé˜»æ­¢å·²çŸ¥çš„æ‰«æå™¨å’Œçˆ¬è™«éå¸¸æœ‰ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_RDNS</code></td>
<td><code>.shodan.io .censys.io</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS é»‘åå•ï¼š</strong> è¦é˜»æ­¢çš„åå‘ DNS åç¼€åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä»…é™ rDNS å…¨å±€ï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œä»…å¯¹å…¨å±€ IP åœ°å€æ‰§è¡Œ rDNS æ£€æŸ¥ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ rDNS é»‘åå•æ£€æŸ¥çš„åå‘ DNS åç¼€åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS é»‘åå• URLï¼š</strong> åŒ…å«è¦é˜»æ­¢çš„åå‘ DNS åç¼€çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„åå‘ DNS åç¼€çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
<p>é»˜è®¤çš„ <code>BLACKLIST_RDNS</code> è®¾ç½®åŒ…æ‹¬å¸¸è§çš„æ‰«æå™¨åŸŸåï¼Œå¦‚ <strong>Shodan</strong> å’Œ <strong>Censys</strong>ã€‚è¿™äº›é€šå¸¸è¢«å®‰å…¨ç ”ç©¶äººå‘˜å’Œæ‰«æå™¨ç”¨æ¥è¯†åˆ«æ˜“å—æ”»å‡»çš„ç½‘ç«™ã€‚</p>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> é˜»æ­¢æ¥è‡ªç‰¹å®šç½‘ç»œæä¾›å•†çš„è®¿é—®è€…ã€‚ASN å°±åƒäº’è”ç½‘çš„é‚®æ”¿ç¼–ç â€”â€”å®ƒä»¬æ ‡è¯†ä¸€ä¸ª IP å±äºå“ªä¸ªæä¾›å•†æˆ–ç»„ç»‡ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN é»‘åå•ï¼š</strong> è¦é˜»æ­¢çš„è‡ªæ²»ç³»ç»Ÿå·åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ ASN é»‘åå•æ£€æŸ¥çš„ ASN åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN é»‘åå• URLï¼š</strong> åŒ…å«è¦é˜»æ­¢çš„ ASN çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ ASN çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> æ ¹æ®è®¿é—®è€…å£°ç§°ä½¿ç”¨çš„æµè§ˆå™¨æˆ–å·¥å…·æ¥é˜»æ­¢è®¿é—®ã€‚è¿™å¯¹äºè¯šå®åœ°è¡¨æ˜è‡ªå·±èº«ä»½çš„æœºå™¨äººï¼ˆä¾‹å¦‚â€œScannerBotâ€æˆ–â€œWebHarvestToolâ€ï¼‰æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†é»‘åå•ï¼š</strong> è¦é˜»æ­¢çš„ç”¨æˆ·ä»£ç†æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ç”¨æˆ·ä»£ç†é»‘åå•æ£€æŸ¥çš„ç”¨æˆ·ä»£ç†æ¨¡å¼åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_USER_AGENT_URLS</code></td>
<td><code>https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†é»‘åå• URLï¼š</strong> åŒ…å«è¦é˜»æ­¢çš„ç”¨æˆ·ä»£ç†æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ç”¨æˆ·ä»£ç†æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
<p>é»˜è®¤çš„ <code>BLACKLIST_USER_AGENT_URLS</code> è®¾ç½®åŒ…å«ä¸€ä¸ªæä¾›<strong>å·²çŸ¥æ¶æ„ç”¨æˆ·ä»£ç†åˆ—è¡¨</strong>çš„ URLã€‚è¿™äº›é€šå¸¸è¢«æ¶æ„æœºå™¨äººå’Œæ‰«æå™¨ç”¨æ¥è¯†åˆ«æ˜“å—æ”»å‡»çš„ç½‘ç«™ã€‚</p>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> é˜»æ­¢å¯¹æ‚¨ç½‘ç«™ä¸Šç‰¹å®š URL çš„è¯·æ±‚ã€‚è¿™å¯¹äºé˜»æ­¢å°è¯•è®¿é—®ç®¡ç†é¡µé¢ã€ç™»å½•è¡¨å•æˆ–å…¶ä»–å¯èƒ½æˆä¸ºæ”»å‡»ç›®æ ‡çš„æ•æ„ŸåŒºåŸŸéå¸¸æœ‰ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI é»‘åå•ï¼š</strong> è¦é˜»æ­¢çš„ URI æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ URI é»‘åå•æ£€æŸ¥çš„ URI æ¨¡å¼åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI é»‘åå• URLï¼š</strong> åŒ…å«è¦é˜»æ­¢çš„ URI æ¨¡å¼çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ URI æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">URL æ ¼å¼æ”¯æŒ</p>
<p>æ‰€æœ‰ <code>*_URLS</code> è®¾ç½®éƒ½æ”¯æŒ HTTP/HTTPS URL ä»¥åŠä½¿ç”¨ <code>file:///</code> å‰ç¼€çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚ä½¿ç”¨ <code>http://user:pass@url</code> æ ¼å¼æ”¯æŒåŸºæœ¬èº«ä»½éªŒè¯ã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">å®šæœŸæ›´æ–°</p>
<p>æ¥è‡ª URL çš„é»‘åå•ä¼šæ¯å°æ—¶è‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ï¼Œä»¥ç¡®ä¿æ‚¨çš„ä¿æŠ¤æªæ–½å§‹ç»ˆèƒ½åº”å¯¹æœ€æ–°çš„å¨èƒã€‚</p>
</div>
<h3 id="_24">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">åŸºæœ¬çš„ IP å’Œç”¨æˆ·ä»£ç†ä¿æŠ¤</label><label for="__tabbed_9_2">å¸¦æœ‰è‡ªå®šä¹‰è§„åˆ™çš„é«˜çº§ä¿æŠ¤</label><label for="__tabbed_9_3">ä½¿ç”¨æœ¬åœ°æ–‡ä»¶</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œä½¿ç”¨ç¤¾åŒºé»‘åå•é˜»æ­¢å·²çŸ¥çš„ Tor å‡ºå£èŠ‚ç‚¹å’Œå¸¸è§çš„æ¶æ„ç”¨æˆ·ä»£ç†ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div>
<p>æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‰‹åŠ¨ URL é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªæ›´å…¨é¢çš„é…ç½®ï¼Œå¸¦æœ‰è‡ªå®šä¹‰é»‘åå•æ¡ç›®å’Œä¾‹å¤–æƒ…å†µï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># è‡ªå®šä¹‰é»‘åå•æ¡ç›®</span>
<span class="nt">BLACKLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.100</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">BLACKLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.shodan.io</span><span class="nv"> </span><span class="s">.censys.io</span><span class="nv"> </span><span class="s">.scanner.com&quot;</span>
<span class="nt">BLACKLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16509</span><span class="nv"> </span><span class="s">14618&quot;</span><span class="w">  </span><span class="c1"># AWS å’Œ Amazon çš„ ASN</span>
<span class="nt">BLACKLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)SemrushBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)AhrefsBot(?:\b)&quot;</span>
<span class="nt">BLACKLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/wp-login</span><span class="err">\</span><span class="s">.php$</span><span class="nv"> </span><span class="s">^/administrator/&quot;</span>

<span class="c1"># è‡ªå®šä¹‰å¿½ç•¥è§„åˆ™</span>
<span class="nt">BLACKLIST_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.200</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>

<span class="c1"># å¤–éƒ¨é»‘åå•æº</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit</span><span class="nv"> </span><span class="s">https://www.spamhaus.org/drop/drop.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ä½œä¸ºé»‘åå•çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/ip-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/rdns-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/asn-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/user-agent-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/uri-blacklist.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="brotli">Brotli</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Brotli æ’ä»¶ä½¿ç”¨ Brotli ç®—æ³•å®ç°å¯¹ HTTP å“åº”çš„é«˜æ•ˆå‹ç¼©ã€‚æ­¤åŠŸèƒ½é€šè¿‡åœ¨å°† Web å†…å®¹å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ä¹‹å‰å¯¹å…¶è¿›è¡Œå‹ç¼©ï¼Œå¸®åŠ©å‡å°‘å¸¦å®½ä½¿ç”¨å¹¶ç¼©çŸ­é¡µé¢åŠ è½½æ—¶é—´ã€‚</p>
<p>ä¸å…¶ä»–å‹ç¼©æ–¹æ³•ï¼ˆå¦‚ gzipï¼‰ç›¸æ¯”ï¼ŒBrotli é€šå¸¸èƒ½å®ç°æ›´é«˜çš„å‹ç¼©ç‡ï¼Œä»è€Œå‡å°æ–‡ä»¶å¤§å°ï¼ŒåŠ å¿«å†…å®¹äº¤ä»˜é€Ÿåº¦ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯ä»æ‚¨çš„ç½‘ç«™è¯·æ±‚å†…å®¹æ—¶ï¼ŒBunkerWeb ä¼šæ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒ Brotli å‹ç¼©ã€‚</li>
<li>å¦‚æœæ”¯æŒï¼ŒBunkerWeb ä¼šåœ¨æ‚¨é…ç½®çš„å‹ç¼©çº§åˆ«ä¸‹ä½¿ç”¨ Brotli ç®—æ³•å¯¹å“åº”è¿›è¡Œå‹ç¼©ã€‚</li>
<li>å‹ç¼©åçš„å†…å®¹ä¼šè¿åŒæŒ‡ç¤º Brotli å‹ç¼©çš„é€‚å½“æ ‡å¤´ä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯çš„æµè§ˆå™¨åœ¨å‘ç”¨æˆ·å‘ˆç°å†…å®¹ä¹‹å‰ä¼šå¯¹å…¶è¿›è¡Œè§£å‹ç¼©ã€‚</li>
<li>å¸¦å®½ä½¿ç”¨é‡å’Œé¡µé¢åŠ è½½æ—¶é—´éƒ½å¾—åˆ°äº†å‡å°‘ï¼Œä»è€Œæ”¹å–„äº†æ•´ä½“ç”¨æˆ·ä½“éªŒã€‚</li>
</ol>
<h3 id="_25">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ Brotli å‹ç¼©åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> Brotli åŠŸèƒ½é»˜è®¤ç¦ç”¨ã€‚é€šè¿‡å°† <code>USE_BROTLI</code> è®¾ç½®ä¸º <code>yes</code> æ¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½® MIME ç±»å‹ï¼š</strong> ä½¿ç”¨ <code>BROTLI_TYPES</code> è®¾ç½®æŒ‡å®šåº”å‹ç¼©çš„å†…å®¹ç±»å‹ã€‚</li>
<li><strong>è®¾ç½®æœ€å°å¤§å°ï¼š</strong> ä½¿ç”¨ <code>BROTLI_MIN_LENGTH</code> å®šä¹‰å‹ç¼©çš„æœ€å°å“åº”å¤§å°ï¼Œä»¥é¿å…å‹ç¼©è¿‡å°çš„æ–‡ä»¶ã€‚</li>
<li><strong>é€‰æ‹©å‹ç¼©çº§åˆ«ï¼š</strong> ä½¿ç”¨ <code>BROTLI_COMP_LEVEL</code> é€‰æ‹©æ‚¨åå¥½çš„é€Ÿåº¦ä¸å‹ç¼©ç‡ä¹‹é—´çš„å¹³è¡¡ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œå‹ç¼©ä¼šè‡ªåŠ¨å¯¹ç¬¦åˆæ¡ä»¶çš„å“åº”è¿›è¡Œã€‚</li>
</ol>
<h3 id="_26">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BROTLI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ Brotliï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ Brotli å‹ç¼©ã€‚</td>
</tr>
<tr>
<td><code>BROTLI_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>MIME ç±»å‹ï¼š</strong> å°†ä½¿ç”¨ Brotli å‹ç¼©çš„å†…å®¹ç±»å‹åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>BROTLI_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æœ€å°å¤§å°ï¼š</strong> åº”ç”¨ Brotli å‹ç¼©çš„æœ€å°å“åº”å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>BROTLI_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å‹ç¼©çº§åˆ«ï¼š</strong> å‹ç¼©çº§åˆ«ä» 0ï¼ˆä¸å‹ç¼©ï¼‰åˆ° 11ï¼ˆæœ€å¤§å‹ç¼©ï¼‰ã€‚è¾ƒé«˜çš„å€¼ä¼šä½¿ç”¨æ›´å¤šçš„ CPUã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ä¼˜åŒ–å‹ç¼©çº§åˆ«</p>
<p>é»˜è®¤çš„å‹ç¼©çº§åˆ« (6) åœ¨å‹ç¼©ç‡å’Œ CPU ä½¿ç”¨ç‡ä¹‹é—´æä¾›äº†è‰¯å¥½çš„å¹³è¡¡ã€‚å¯¹äºé™æ€å†…å®¹æˆ–æœåŠ¡å™¨ CPU èµ„æºå……è¶³çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘å¢åŠ åˆ° 9-11 ä»¥è·å¾—æœ€å¤§å‹ç¼©ã€‚å¯¹äºåŠ¨æ€å†…å®¹æˆ– CPU èµ„æºæœ‰é™çš„æƒ…å†µï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ 4-5 ä»¥å®ç°æ›´å¿«çš„å‹ç¼©å’Œåˆç†çš„å°ºå¯¸å‡å°ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">æµè§ˆå™¨æ”¯æŒ</p>
<p>æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ Chromeã€Firefoxã€Edgeã€Safari å’Œ Operaï¼Œéƒ½æ”¯æŒ Brotliã€‚æ—§ç‰ˆæµè§ˆå™¨ä¼šè‡ªåŠ¨æ¥æ”¶æœªå‹ç¼©çš„å†…å®¹ï¼Œä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚</p>
</div>
<h3 id="_27">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="10:3"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_10_2">æœ€å¤§å‹ç¼©</label><label for="__tabbed_10_3">å¹³è¡¡æ€§èƒ½</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨é»˜è®¤è®¾ç½®å¯ç”¨ Brotli çš„æ ‡å‡†é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºå®ç°æœ€å¤§å‹ç¼©èŠ‚çœè€Œä¼˜åŒ–çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;11&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>åœ¨å‹ç¼©ç‡å’Œ CPU ä½¿ç”¨ç‡ä¹‹é—´å–å¾—å¹³è¡¡çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="bunkernet">BunkerNet</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>BunkerNet æ’ä»¶é€šè¿‡ BunkerWeb å®ä¾‹ä¹‹é—´çš„é›†ä½“å¨èƒæƒ…æŠ¥å…±äº«ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¼ºå¤§çš„æ¶æ„è¡Œä¸ºè€…é˜²æŠ¤ç½‘ç»œã€‚é€šè¿‡å‚ä¸ BunkerNetï¼Œæ‚¨çš„å®ä¾‹ä¸ä»…å—ç›Šäºå…¨çƒå·²çŸ¥å¨èƒæ•°æ®åº“ï¼ŒåŒæ—¶ä¹Ÿä¸ºå…¶åšå‡ºè´¡çŒ®ï¼Œä»è€Œå¢å¼ºäº†æ•´ä¸ª BunkerWeb ç¤¾åŒºçš„å®‰å…¨æ€§ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æ‚¨çš„ BunkerWeb å®ä¾‹ä¼šè‡ªåŠ¨å‘ BunkerNet API æ³¨å†Œï¼Œä»¥è·å–ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li>
<li>å½“æ‚¨çš„å®ä¾‹æ£€æµ‹å¹¶é˜»æ­¢äº†æ¶æ„ IP åœ°å€æˆ–è¡Œä¸ºæ—¶ï¼Œå®ƒä¼šåŒ¿ååœ°å‘ BunkerNet æŠ¥å‘Šè¯¥å¨èƒã€‚</li>
<li>BunkerNet èšåˆæ¥è‡ªæ‰€æœ‰å‚ä¸å®ä¾‹çš„å¨èƒæƒ…æŠ¥ï¼Œå¹¶åˆ†å‘æ•´åˆåçš„æ•°æ®åº“ã€‚</li>
<li>æ‚¨çš„å®ä¾‹ä¼šå®šæœŸä» BunkerNet ä¸‹è½½æ›´æ–°çš„å·²çŸ¥å¨èƒæ•°æ®åº“ã€‚</li>
<li>è¿™ç§é›†ä½“æƒ…æŠ¥ä½¿æ‚¨çš„å®ä¾‹èƒ½å¤Ÿä¸»åŠ¨é˜»æ­¢åœ¨å…¶ä»– BunkerWeb å®ä¾‹ä¸Šè¡¨ç°å‡ºæ¶æ„è¡Œä¸ºçš„ IP åœ°å€ã€‚</li>
</ol>
<div class="admonition success">
<p class="admonition-title">ä¸»è¦ä¼˜ç‚¹</p>
<ol>
<li><strong>é›†ä½“é˜²å¾¡ï¼š</strong> åˆ©ç”¨å…¨çƒæˆåƒä¸Šä¸‡ä¸ªå…¶ä»– BunkerWeb å®ä¾‹çš„å®‰å…¨å‘ç°ã€‚</li>
<li><strong>ä¸»åŠ¨é˜²æŠ¤ï¼š</strong> æ ¹æ®æ¶æ„è¡Œä¸ºè€…åœ¨åˆ«å¤„çš„è¡Œä¸ºï¼Œåœ¨ä»–ä»¬æ”»å‡»æ‚¨çš„ç½‘ç«™ä¹‹å‰å°±å°†å…¶é˜»æ­¢ã€‚</li>
<li><strong>ç¤¾åŒºè´¡çŒ®ï¼š</strong> é€šè¿‡åˆ†äº«å…³äºæ”»å‡»è€…çš„åŒ¿åå¨èƒæ•°æ®ï¼Œå¸®åŠ©ä¿æŠ¤å…¶ä»– BunkerWeb ç”¨æˆ·ã€‚</li>
<li><strong>é›¶é…ç½®ï¼š</strong> å¼€ç®±å³ç”¨ï¼Œå¸¦æœ‰åˆç†çš„é»˜è®¤å€¼ï¼Œåªéœ€æœ€å°‘çš„è®¾ç½®ã€‚</li>
<li><strong>æ³¨é‡éšç§ï¼š</strong> åªåˆ†äº«å¿…è¦çš„å¨èƒä¿¡æ¯ï¼Œä¸æŸå®³æ‚¨æˆ–æ‚¨ç”¨æˆ·çš„éšç§ã€‚</li>
</ol>
</div>
<h3 id="_28">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ BunkerNet åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> BunkerNet åŠŸèƒ½é»˜è®¤å¯ç”¨ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>USE_BUNKERNET</code> è®¾ç½®æ¥æ§åˆ¶æ­¤åŠŸèƒ½ã€‚</li>
<li><strong>åˆå§‹æ³¨å†Œï¼š</strong> é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæ‚¨çš„å®ä¾‹å°†è‡ªåŠ¨å‘ BunkerNet API æ³¨å†Œå¹¶æ”¶åˆ°ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li>
<li><strong>è‡ªåŠ¨æ›´æ–°ï¼š</strong> æ‚¨çš„å®ä¾‹å°†æŒ‰å¸¸è§„è®¡åˆ’è‡ªåŠ¨ä¸‹è½½æœ€æ–°çš„å¨èƒæ•°æ®åº“ã€‚</li>
<li><strong>è‡ªåŠ¨æŠ¥å‘Šï¼š</strong> å½“æ‚¨çš„å®ä¾‹é˜»æ­¢äº†ä¸€ä¸ªæ¶æ„ IP åœ°å€æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å°†æ­¤æ•°æ®è´¡çŒ®ç»™ç¤¾åŒºã€‚</li>
<li><strong>ç›‘æ§ä¿æŠ¤ï¼š</strong> æŸ¥çœ‹ <a href="../web-ui/">web UI</a> ä»¥æŸ¥çœ‹ç”± BunkerNet æƒ…æŠ¥é˜»æ­¢çš„å¨èƒç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ol>
<h3 id="_29">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BUNKERNET</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ BunkerNetï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ BunkerNet å¨èƒæƒ…æŠ¥å…±äº«ã€‚</td>
</tr>
<tr>
<td><code>BUNKERNET_SERVER</code></td>
<td><code>https://api.bunkerweb.io</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>BunkerNet æœåŠ¡å™¨ï¼š</strong> ç”¨äºå…±äº«å¨èƒæƒ…æŠ¥çš„ BunkerNet API æœåŠ¡å™¨åœ°å€ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ç½‘ç»œä¿æŠ¤</p>
<p>å½“ BunkerNet æ£€æµ‹åˆ°æŸä¸ª IP åœ°å€åœ¨å¤šä¸ª BunkerWeb å®ä¾‹ä¸­å‚ä¸äº†æ¶æ„æ´»åŠ¨æ—¶ï¼Œå®ƒä¼šå°†è¯¥ IP æ·»åŠ åˆ°é›†ä½“é»‘åå•ä¸­ã€‚è¿™æä¾›äº†ä¸€ä¸ªä¸»åŠ¨çš„é˜²å¾¡å±‚ï¼Œåœ¨å¨èƒç›´æ¥æ”»å‡»æ‚¨ä¹‹å‰å°±ä¿æŠ¤æ‚¨çš„ç½‘ç«™ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">åŒ¿åæŠ¥å‘Š</p>
<p>åœ¨å‘ BunkerNet æŠ¥å‘Šå¨èƒä¿¡æ¯æ—¶ï¼Œæ‚¨çš„å®ä¾‹åªåˆ†äº«è¯†åˆ«å¨èƒæ‰€éœ€çš„æ•°æ®ï¼šIP åœ°å€ã€é˜»æ­¢åŸå› å’Œæœ€å°‘çš„ä¸Šä¸‹æ–‡æ•°æ®ã€‚ä¸ä¼šåˆ†äº«æœ‰å…³æ‚¨çš„ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯æˆ–æœ‰å…³æ‚¨ç½‘ç«™çš„æ•æ„Ÿè¯¦ç»†ä¿¡æ¯ã€‚</p>
</div>
<h3 id="_30">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="11:3"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">é»˜è®¤é…ç½®ï¼ˆæ¨èï¼‰</label><label for="__tabbed_11_2">ç¦ç”¨é…ç½®</label><label for="__tabbed_11_3">è‡ªå®šä¹‰æœåŠ¡å™¨é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>é»˜è®¤é…ç½®ä½¿ç”¨å®˜æ–¹ BunkerWeb API æœåŠ¡å™¨å¯ç”¨ BunkerNetï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.bunkerweb.io&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¦‚æœæ‚¨ä¸æƒ³å‚ä¸ BunkerNet å¨èƒæƒ…æŠ¥ç½‘ç»œï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯¹äºè¿è¡Œè‡ªå·±çš„ BunkerNet æœåŠ¡å™¨çš„ç»„ç»‡ï¼ˆä¸å¸¸è§ï¼‰ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://bunkernet.example.com&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="crowdsec">CrowdSec æ§åˆ¶å°é›†æˆ</h3>
<p>å¦‚æœæ‚¨è¿˜ä¸ç†Ÿæ‚‰ CrowdSec æ§åˆ¶å°é›†æˆï¼Œ<a href="https://www.crowdsec.net/?utm_campaign=bunkerweb&amp;utm_source=doc">CrowdSec</a> åˆ©ç”¨ä¼—åŒ…æƒ…æŠ¥æ¥å¯¹æŠ—ç½‘ç»œå¨èƒã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œç½‘ç»œå®‰å…¨ç•Œçš„ Wazeâ€â€”â€”å½“ä¸€å°æœåŠ¡å™¨å—åˆ°æ”»å‡»æ—¶ï¼Œå…¨çƒå…¶ä»–ç³»ç»Ÿéƒ½ä¼šæ”¶åˆ°è­¦æŠ¥ï¼Œå¹¶å—åˆ°ä¿æŠ¤ï¼Œå…å—åŒä¸€æ”»å‡»è€…çš„ä¾µå®³ã€‚æ‚¨å¯ä»¥åœ¨<a href="https://www.crowdsec.net/about?utm_campaign=bunkerweb&amp;utm_source=blog">è¿™é‡Œ</a>äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
<p>é€šè¿‡æˆ‘ä»¬ä¸ CrowdSec çš„åˆä½œï¼Œæ‚¨å¯ä»¥å°†æ‚¨çš„ BunkerWeb å®ä¾‹æ³¨å†Œåˆ°æ‚¨çš„ <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">CrowdSec æ§åˆ¶å°</a>ã€‚è¿™æ„å‘³ç€ç”± BunkerWeb é˜»æ­¢çš„æ”»å‡»å°†ä¸ç”± CrowdSec å®‰å…¨å¼•æ“é˜»æ­¢çš„æ”»å‡»ä¸€èµ·æ˜¾ç¤ºåœ¨æ‚¨çš„ CrowdSec æ§åˆ¶å°ä¸­ï¼Œä¸ºæ‚¨æä¾›ç»Ÿä¸€çš„å¨èƒè§†å›¾ã€‚</p>
<p>é‡è¦çš„æ˜¯ï¼Œæ­¤é›†æˆæ— éœ€å®‰è£… CrowdSecï¼ˆå°½ç®¡æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨ <a href="https://github.com/bunkerity/bunkerweb-plugins/tree/main/crowdsec">BunkerWeb çš„ CrowdSec æ’ä»¶</a>æ¥è¿›ä¸€æ­¥å¢å¼ºæ‚¨çš„ Web æœåŠ¡çš„å®‰å…¨æ€§ï¼‰ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å°†æ‚¨çš„ CrowdSec å®‰å…¨å¼•æ“æ³¨å†Œåˆ°åŒä¸€ä¸ªæ§åˆ¶å°å¸æˆ·ï¼Œä»¥å®ç°æ›´å¤§çš„ååŒä½œç”¨ã€‚</p>
<p><strong>æ­¥éª¤ 1ï¼šåˆ›å»ºæ‚¨çš„ CrowdSec æ§åˆ¶å°å¸æˆ·</strong></p>
<p>å‰å¾€ <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">CrowdSec æ§åˆ¶å°</a>æ³¨å†Œï¼Œå¦‚æœæ‚¨è¿˜æ²¡æœ‰å¸æˆ·çš„è¯ã€‚å®Œæˆåï¼Œè®°ä¸‹åœ¨â€œå®‰å…¨å¼•æ“â€ä¸‹ç‚¹å‡»â€œæ·»åŠ å®‰å…¨å¼•æ“â€åæ‰¾åˆ°çš„æ³¨å†Œå¯†é’¥ï¼š</p>
<figure>
<p><img align="center" alt="æ¦‚è¿°" src="../../assets/img/crowdity1.png" />
  </p>
<figcaption>è·å–æ‚¨çš„ Crowdsec æ§åˆ¶å°æ³¨å†Œå¯†é’¥</figcaption>
</figure>
<p><strong>æ­¥éª¤ 2ï¼šè·å–æ‚¨çš„ BunkerNet ID</strong></p>
<p>å¦‚æœæ‚¨æƒ³å°†æ‚¨çš„ BunkerWeb å®ä¾‹æ³¨å†Œåˆ°æ‚¨çš„ CrowdSec æ§åˆ¶å°ä¸­ï¼Œæ¿€æ´» BunkerNet åŠŸèƒ½ï¼ˆé»˜è®¤å¯ç”¨ï¼‰æ˜¯å¼ºåˆ¶æ€§çš„ã€‚é€šè¿‡å°† <code>USE_BUNKERNET</code> è®¾ç½®ä¸º <code>yes</code> æ¥å¯ç”¨å®ƒã€‚</p>
<p>å¯¹äº Dockerï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å–æ‚¨çš„ BunkerNet IDï¼š</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>my-bw-scheduler<span class="w"> </span>cat<span class="w"> </span>/var/cache/bunkerweb/bunkernet/instance.id
</code></pre></div>
<p>å¯¹äº Linuxï¼Œä½¿ç”¨ï¼š</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/var/cache/bunkerweb/bunkernet/instance.id
</code></pre></div>
<p><strong>æ­¥éª¤ 3ï¼šä½¿ç”¨é¢æ¿æ³¨å†Œæ‚¨çš„å®ä¾‹</strong></p>
<p>ä¸€æ—¦æ‚¨æœ‰äº†æ‚¨çš„ BunkerNet ID å’Œ CrowdSec æ§åˆ¶å°æ³¨å†Œå¯†é’¥ï¼Œè¯·åœ¨<a href="https://panel.bunkerweb.io/store/bunkernet?utm_campaign=self&amp;utm_source=doc">é¢æ¿ä¸Šè®¢è´­å…è´¹äº§å“â€œBunkerNet / CrowdSecâ€</a>ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰å¸æˆ·ï¼Œå¯èƒ½ä¼šæç¤ºæ‚¨åˆ›å»ºä¸€ä¸ªã€‚</p>
<p>æ‚¨ç°åœ¨å¯ä»¥é€‰æ‹©â€œBunkerNet / CrowdSecâ€æœåŠ¡å¹¶å¡«å†™è¡¨æ ¼ï¼Œç²˜è´´æ‚¨çš„ BunkerNet ID å’Œ CrowdSec æ§åˆ¶å°æ³¨å†Œå¯†é’¥ï¼š</p>
<figure>
<p><img align="center" alt="æ¦‚è¿°" src="../../assets/img/crowdity2.png" />
  </p>
<figcaption>å°†æ‚¨çš„ BunkerWeb å®ä¾‹æ³¨å†Œåˆ° CrowdSec æ§åˆ¶å°</figcaption>
</figure>
<p><strong>æ­¥éª¤ 4ï¼šåœ¨æ§åˆ¶å°ä¸Šæ¥å—æ–°çš„å®‰å…¨å¼•æ“</strong></p>
<p>ç„¶åï¼Œè¿”å›æ‚¨çš„ CrowdSec æ§åˆ¶å°å¹¶æ¥å—æ–°çš„å®‰å…¨å¼•æ“ï¼š</p>
<figure>
<p><img align="center" alt="æ¦‚è¿°" src="../../assets/img/crowdity3.png" />
  </p>
<figcaption>æ¥å—æ³¨å†Œåˆ° CrowdSec æ§åˆ¶å°</figcaption>
</figure>
<p><strong>æ­å–œï¼Œæ‚¨çš„ BunkerWeb å®ä¾‹ç°å·²æ³¨å†Œåˆ°æ‚¨çš„ CrowdSec æ§åˆ¶å°ï¼</strong></p>
<p>ä¸“ä¸šæç¤ºï¼šæŸ¥çœ‹è­¦æŠ¥æ—¶ï¼Œç‚¹å‡»â€œåˆ—â€é€‰é¡¹å¹¶å‹¾é€‰â€œä¸Šä¸‹æ–‡â€å¤é€‰æ¡†ï¼Œä»¥è®¿é—® BunkerWeb ç‰¹å®šçš„æ•°æ®ã€‚</p>
<figure>
<p><img align="center" alt="æ¦‚è¿°" src="../../assets/img/crowdity4.png" />
  </p>
<figcaption>åœ¨ä¸Šä¸‹æ–‡åˆ—ä¸­æ˜¾ç¤ºçš„ BunkerWeb æ•°æ®</figcaption>
</figure>
<h2 id="cors">CORS</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>CORS æ’ä»¶ä¸ºæ‚¨çš„ç½‘ç«™å¯ç”¨è·¨æºèµ„æºå…±äº«ï¼Œå…è®¸ä»ä¸åŒåŸŸå—æ§åœ°è®¿é—®æ‚¨çš„èµ„æºã€‚æ­¤åŠŸèƒ½é€šè¿‡æ˜ç¡®å®šä¹‰å…è®¸å“ªäº›æºã€æ–¹æ³•å’Œæ ‡å¤´ï¼Œå¸®åŠ©æ‚¨å®‰å…¨åœ°ä¸å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ç½‘ç«™å…±äº«æ‚¨çš„å†…å®¹ï¼ŒåŒæ—¶ç»´æŠ¤å®‰å…¨æ€§ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“æµè§ˆå™¨å‘æ‚¨çš„ç½‘ç«™å‘å‡ºè·¨æºè¯·æ±‚æ—¶ï¼Œå®ƒé¦–å…ˆä¼šå‘é€ä¸€ä¸ªå¸¦æœ‰ <code>OPTIONS</code> æ–¹æ³•çš„é¢„æ£€è¯·æ±‚ã€‚</li>
<li>BunkerWeb ä¼šæ ¹æ®æ‚¨çš„é…ç½®æ£€æŸ¥è¯·æ±‚çš„æºæ˜¯å¦è¢«å…è®¸ã€‚</li>
<li>å¦‚æœå…è®¸ï¼ŒBunkerWeb ä¼šå“åº”é€‚å½“çš„ CORS æ ‡å¤´ï¼Œè¿™äº›æ ‡å¤´å®šä¹‰äº†è¯·æ±‚ç«™ç‚¹å¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚</li>
<li>å¯¹äºä¸å…è®¸çš„æºï¼Œè¯·æ±‚å¯ä»¥è¢«å®Œå…¨æ‹’ç»ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦ CORS æ ‡å¤´åœ°æä¾›æœåŠ¡ã€‚</li>
<li>å¯ä»¥é…ç½®å…¶ä»–è·¨æºç­–ç•¥ï¼Œä¾‹å¦‚ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy">COEP</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy">COOP</a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Resource-Policy">CORP</a>ï¼Œä»¥è¿›ä¸€æ­¥å¢å¼ºå®‰å…¨æ€§ã€‚</li>
</ol>
<h3 id="_31">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ CORS åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> CORS åŠŸèƒ½é»˜è®¤ç¦ç”¨ã€‚å°† <code>USE_CORS</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½®å…è®¸çš„æºï¼š</strong> ä½¿ç”¨ <code>CORS_ALLOW_ORIGIN</code> è®¾ç½®æŒ‡å®šå“ªäº›åŸŸå¯ä»¥è®¿é—®æ‚¨çš„èµ„æºã€‚</li>
<li><strong>è®¾ç½®å…è®¸çš„æ–¹æ³•ï¼š</strong> ä½¿ç”¨ <code>CORS_ALLOW_METHODS</code> å®šä¹‰å…è®¸ç”¨äºè·¨æºè¯·æ±‚çš„ HTTP æ–¹æ³•ã€‚</li>
<li><strong>é…ç½®å…è®¸çš„æ ‡å¤´ï¼š</strong> ä½¿ç”¨ <code>CORS_ALLOW_HEADERS</code> æŒ‡å®šå¯ä»¥åœ¨è¯·æ±‚ä¸­ä½¿ç”¨çš„æ ‡å¤´ã€‚</li>
<li><strong>æ§åˆ¶å‡­æ®ï¼š</strong> ä½¿ç”¨ <code>CORS_ALLOW_CREDENTIALS</code> å†³å®šè·¨æºè¯·æ±‚æ˜¯å¦å¯ä»¥åŒ…å«å‡­æ®ã€‚</li>
</ol>
<h3 id="_32">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CORS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ CORSï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è·¨æºèµ„æºå…±äº«ã€‚</td>
</tr>
<tr>
<td><code>CORS_ALLOW_ORIGIN</code></td>
<td><code>self</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å…è®¸çš„æ¥æºï¼š</strong> è¡¨ç¤ºå…è®¸æ¥æºçš„ PCRE æ­£åˆ™è¡¨è¾¾å¼ï¼›ä½¿ç”¨ <code>*</code> è¡¨ç¤ºä»»ä½•æ¥æºï¼Œæˆ– <code>self</code> è¡¨ç¤ºä»…é™åŒæºã€‚</td>
</tr>
<tr>
<td><code>CORS_ALLOW_METHODS</code></td>
<td><code>GET, POST, OPTIONS</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å…è®¸çš„æ–¹æ³•ï¼š</strong> å¯åœ¨è·¨æºè¯·æ±‚ä¸­ä½¿ç”¨çš„ HTTP æ–¹æ³•ã€‚</td>
</tr>
<tr>
<td><code>CORS_ALLOW_HEADERS</code></td>
<td><code>DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å…è®¸çš„æ ‡å¤´ï¼š</strong> å¯åœ¨è·¨æºè¯·æ±‚ä¸­ä½¿ç”¨çš„ HTTP æ ‡å¤´ã€‚</td>
</tr>
<tr>
<td><code>CORS_ALLOW_CREDENTIALS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å…è®¸å‡­æ®ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å…è®¸åœ¨ CORS è¯·æ±‚ä¸­ä½¿ç”¨å‡­æ®ï¼ˆcookieã€HTTP èº«ä»½éªŒè¯ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CORS_EXPOSE_HEADERS</code></td>
<td><code>Content-Length,Content-Range</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å…¬å¼€çš„æ ‡å¤´ï¼š</strong> æµè§ˆå™¨å…è®¸ä»è·¨æºå“åº”ä¸­è®¿é—®çš„ HTTP æ ‡å¤´ã€‚</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_OPENER_POLICY</code></td>
<td><code>same-origin</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è·¨æºæ‰“å¼€å™¨ç­–ç•¥ï¼š</strong> æ§åˆ¶æµè§ˆä¸Šä¸‹æ–‡ä¹‹é—´çš„é€šä¿¡ã€‚</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_EMBEDDER_POLICY</code></td>
<td><code>require-corp</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è·¨æºåµŒå…¥å™¨ç­–ç•¥ï¼š</strong> æ§åˆ¶æ–‡æ¡£æ˜¯å¦å¯ä»¥åŠ è½½æ¥è‡ªå…¶ä»–æ¥æºçš„èµ„æºã€‚</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_RESOURCE_POLICY</code></td>
<td><code>same-site</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è·¨æºèµ„æºç­–ç•¥ï¼š</strong> æ§åˆ¶å“ªäº›ç½‘ç«™å¯ä»¥åµŒå…¥æ‚¨çš„èµ„æºã€‚</td>
</tr>
<tr>
<td><code>CORS_MAX_AGE</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>é¢„æ£€ç¼“å­˜æŒç»­æ—¶é—´ï¼š</strong> æµè§ˆå™¨åº”ç¼“å­˜é¢„æ£€å“åº”çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CORS_DENY_REQUEST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ‹’ç»æœªç»æˆæƒçš„æ¥æºï¼š</strong> å½“ä¸º <code>yes</code> æ—¶ï¼Œæ¥è‡ªæœªç»æˆæƒæ¥æºçš„è¯·æ±‚å°†è¢«æ‹’ç»å¹¶è¿”å›é”™è¯¯ä»£ç ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ä¼˜åŒ–é¢„æ£€è¯·æ±‚</p>
<p><code>CORS_MAX_AGE</code> è®¾ç½®å†³å®šäº†æµè§ˆå™¨ç¼“å­˜é¢„æ£€è¯·æ±‚ç»“æœçš„æ—¶é—´ã€‚å°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒé«˜çš„å€¼ï¼ˆä¾‹å¦‚é»˜è®¤çš„ 86400 ç§’/24 å°æ—¶ï¼‰å¯ä»¥å‡å°‘é¢„æ£€è¯·æ±‚çš„æ•°é‡ï¼Œä»è€Œæé«˜é¢‘ç¹è®¿é—®èµ„æºçš„æ€§èƒ½ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>åœ¨å°† <code>CORS_ALLOW_ORIGIN</code> è®¾ç½®ä¸º <code>*</code>ï¼ˆæ‰€æœ‰æ¥æºï¼‰æˆ–å°† <code>CORS_ALLOW_CREDENTIALS</code> è®¾ç½®ä¸º <code>yes</code> æ—¶è¦å°å¿ƒï¼Œå› ä¸ºå¦‚æœç®¡ç†ä¸å½“ï¼Œè¿™äº›é…ç½®å¯èƒ½ä¼šå¼•å…¥å®‰å…¨é£é™©ã€‚é€šå¸¸æ›´å®‰å…¨çš„åšæ³•æ˜¯æ˜ç¡®åˆ—å‡ºå—ä¿¡ä»»çš„æ¥æºï¼Œå¹¶é™åˆ¶å…è®¸çš„æ–¹æ³•å’Œæ ‡å¤´ã€‚</p>
</div>
<h3 id="_33">ç¤ºä¾‹é…ç½®</h3>
<p>ä»¥ä¸‹æ˜¯ <code>CORS_ALLOW_ORIGIN</code> è®¾ç½®çš„å¯èƒ½å€¼åŠå…¶è¡Œä¸ºçš„ç¤ºä¾‹ï¼š</p>
<ul>
<li><strong><code>*</code></strong>ï¼šå…è®¸æ¥è‡ªæ‰€æœ‰æ¥æºçš„è¯·æ±‚ã€‚</li>
<li><strong><code>self</code></strong>ï¼šè‡ªåŠ¨å…è®¸æ¥è‡ªä¸é…ç½®çš„ server_name ç›¸åŒçš„æ¥æºçš„è¯·æ±‚ã€‚</li>
<li><strong><code>^https://www\.example\.com$</code></strong>ï¼šä»…å…è®¸æ¥è‡ª <code>https://www.example.com</code> çš„è¯·æ±‚ã€‚</li>
<li><strong><code>^https://.+\.example\.com$</code></strong>ï¼šå…è®¸æ¥è‡ªä»¥ <code>.example.com</code> ç»“å°¾çš„ä»»ä½•å­åŸŸçš„è¯·æ±‚ã€‚</li>
<li><strong><code>^https://(www\.example1\.com|www\.example2\.com)$</code></strong>ï¼šå…è®¸æ¥è‡ª <code>https://www.example1.com</code> æˆ– <code>https://www.example2.com</code> çš„è¯·æ±‚ã€‚</li>
<li><strong><code>^https?://www\.example\.com$</code></strong>ï¼šå…è®¸æ¥è‡ª <code>https://www.example.com</code> å’Œ <code>http://www.example.com</code> çš„è¯·æ±‚ã€‚</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="12:5"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><input id="__tabbed_12_4" name="__tabbed_12" type="radio" /><input id="__tabbed_12_5" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_12_2">å…¬å…± API é…ç½®</label><label for="__tabbed_12_3">å¤šä¸ªå—ä¿¡ä»»çš„åŸŸ</label><label for="__tabbed_12_4">å­åŸŸé€šé…ç¬¦</label><label for="__tabbed_12_5">å¤šä¸ªåŸŸæ¨¡å¼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œå…è®¸æ¥è‡ªåŒä¸€åŸŸçš„è·¨æºè¯·æ±‚ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;self&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>éœ€è¦ä»ä»»ä½•æ¥æºè®¿é—®çš„å…¬å…± API çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">X-API-Key&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨å•ä¸ª PCRE æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼å…è®¸å¤šä¸ªç‰¹å®šåŸŸçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(app|api|dashboard)\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Requested-With&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_EXPOSE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Length,</span><span class="nv"> </span><span class="s">Content-Range,</span><span class="nv"> </span><span class="s">X-RateLimit-Remaining&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ PCRE æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼å…è®¸ä¸»åŸŸçš„æ‰€æœ‰å­åŸŸçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://.*\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨äº¤æ›¿å…è®¸å¤šä¸ªåŸŸæ¨¡å¼çš„è¯·æ±‚çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(.*\\.example\\.com|.*\\.trusted-partner\\.org|api\\.third-party\\.net)$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Custom-Header&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="client-cache">Client cache</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>å®¢æˆ·ç«¯ç¼“å­˜æ’ä»¶é€šè¿‡æ§åˆ¶æµè§ˆå™¨å¦‚ä½•ç¼“å­˜é™æ€å†…å®¹æ¥ä¼˜åŒ–ç½‘ç«™æ€§èƒ½ã€‚å®ƒé€šè¿‡æŒ‡ç¤ºæµè§ˆå™¨åœ¨æœ¬åœ°å­˜å‚¨å’Œé‡ç”¨é™æ€èµ„äº§ï¼ˆä¾‹å¦‚å›¾åƒã€CSS å’Œ JavaScript æ–‡ä»¶ï¼‰ï¼Œè€Œä¸æ˜¯åœ¨æ¯æ¬¡é¡µé¢è®¿é—®æ—¶éƒ½è¯·æ±‚å®ƒä»¬ï¼Œä»è€Œå‡å°‘äº†å¸¦å®½ä½¿ç”¨é‡ï¼Œé™ä½äº†æœåŠ¡å™¨è´Ÿè½½ï¼Œå¹¶ç¼©çŸ­äº†é¡µé¢åŠ è½½æ—¶é—´ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å¯ç”¨åï¼ŒBunkerWeb ä¼šå‘é™æ€æ–‡ä»¶çš„å“åº”ä¸­æ·»åŠ  Cache-Control æ ‡å¤´ã€‚</li>
<li>è¿™äº›æ ‡å¤´ä¼šå‘Šè¯‰æµè§ˆå™¨åº”åœ¨æœ¬åœ°ç¼“å­˜å†…å®¹å¤šé•¿æ—¶é—´ã€‚</li>
<li>å¯¹äºå…·æœ‰æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶ï¼ˆä¾‹å¦‚å›¾åƒã€CSSã€JavaScriptï¼‰ï¼ŒBunkerWeb ä¼šåº”ç”¨é…ç½®çš„ç¼“å­˜ç­–ç•¥ã€‚</li>
<li>å¯é€‰çš„ ETag æ”¯æŒæä¾›äº†ä¸€ä¸ªé¢å¤–çš„éªŒè¯æœºåˆ¶ï¼Œä»¥ç¡®å®šç¼“å­˜çš„å†…å®¹æ˜¯å¦ä»ç„¶æ˜¯æ–°é²œçš„ã€‚</li>
<li>å½“è®¿é—®è€…è¿”å›æ‚¨çš„ç½‘ç«™æ—¶ï¼Œä»–ä»¬çš„æµè§ˆå™¨å¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å†æ¬¡ä¸‹è½½å®ƒä»¬ï¼Œä»è€Œç¼©çŸ­äº†é¡µé¢åŠ è½½æ—¶é—´ã€‚</li>
</ol>
<h3 id="_34">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½é»˜è®¤ç¦ç”¨ï¼›å°† <code>USE_CLIENT_CACHE</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½®æ‰©å±•åï¼š</strong> ä½¿ç”¨ <code>CLIENT_CACHE_EXTENSIONS</code> è®¾ç½®æŒ‡å®šåº”ç¼“å­˜çš„æ–‡ä»¶ç±»å‹ã€‚</li>
<li><strong>è®¾ç½®ç¼“å­˜æ§åˆ¶æŒ‡ä»¤ï¼š</strong> ä½¿ç”¨ <code>CLIENT_CACHE_CONTROL</code> è®¾ç½®è‡ªå®šä¹‰å®¢æˆ·ç«¯åº”å¦‚ä½•ç¼“å­˜å†…å®¹ã€‚</li>
<li><strong>é…ç½® ETag æ”¯æŒï¼š</strong> ä½¿ç”¨ <code>CLIENT_CACHE_ETAG</code> è®¾ç½®å†³å®šæ˜¯å¦å¯ç”¨ ETag æ¥éªŒè¯ç¼“å­˜æ–°é²œåº¦ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œç¼“å­˜æ ‡å¤´ä¼šè‡ªåŠ¨åº”ç”¨äºç¬¦åˆæ¡ä»¶çš„å“åº”ã€‚</li>
</ol>
<h3 id="_35">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CLIENT_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨å®¢æˆ·ç«¯ç¼“å­˜ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨é™æ€æ–‡ä»¶çš„å®¢æˆ·ç«¯ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td><code>CLIENT_CACHE_EXTENSIONS</code></td>
<td><code>jpg                       | jpeg      | png  | bmp                                                                       | ico | svg | tif | css | js | otf | ttf | eot | woff | woff2</code></td>
<td>å…¨å±€</td>
<td>å¦</td>
<td><strong>å¯ç¼“å­˜çš„æ‰©å±•åï¼š</strong> åº”ç”±å®¢æˆ·ç«¯ç¼“å­˜çš„æ–‡ä»¶æ‰©å±•ååˆ—è¡¨ï¼ˆä»¥ç®¡é“ç¬¦åˆ†éš”ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CLIENT_CACHE_CONTROL</code></td>
<td><code>public, max-age=15552000</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>Cache-Control æ ‡å¤´ï¼š</strong> ç”¨äºæ§åˆ¶ç¼“å­˜è¡Œä¸ºçš„ Cache-Control HTTP æ ‡å¤´çš„å€¼ã€‚</td>
</tr>
<tr>
<td><code>CLIENT_CACHE_ETAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ ETagsï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å‘é€é™æ€èµ„æºçš„ HTTP ETag æ ‡å¤´ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ä¼˜åŒ–ç¼“å­˜è®¾ç½®</p>
<p>å¯¹äºé¢‘ç¹æ›´æ–°çš„å†…å®¹ï¼Œè¯·è€ƒè™‘ä½¿ç”¨è¾ƒçŸ­çš„ max-age å€¼ã€‚å¯¹äºå¾ˆå°‘æ›´æ”¹çš„å†…å®¹ï¼ˆå¦‚å¸¦ç‰ˆæœ¬çš„ JavaScript åº“æˆ–å¾½æ ‡ï¼‰ï¼Œè¯·ä½¿ç”¨è¾ƒé•¿çš„ç¼“å­˜æ—¶é—´ã€‚é»˜è®¤å€¼ 15552000 ç§’ï¼ˆ180 å¤©ï¼‰é€‚ç”¨äºå¤§å¤šæ•°é™æ€èµ„äº§ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">æµè§ˆå™¨è¡Œä¸º</p>
<p>ä¸åŒçš„æµè§ˆå™¨å¯¹ç¼“å­˜çš„å®ç°ç•¥æœ‰ä¸åŒï¼Œä½†æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½éµå¾ªæ ‡å‡†çš„ Cache-Control æŒ‡ä»¤ã€‚ETags æä¾›äº†ä¸€ä¸ªé¢å¤–çš„éªŒè¯æœºåˆ¶ï¼Œå¯ä»¥å¸®åŠ©æµè§ˆå™¨ç¡®å®šç¼“å­˜çš„å†…å®¹æ˜¯å¦ä»ç„¶æœ‰æ•ˆã€‚</p>
</div>
<h3 id="_36">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="13:3"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><input id="__tabbed_13_3" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_13_2">ç§¯æç¼“å­˜</label><label for="__tabbed_13_3">æ··åˆå†…å®¹ç­–ç•¥</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œä¸ºå¸¸è§çš„é™æ€èµ„äº§å¯ç”¨ç¼“å­˜ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|gif|css|js|svg|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=86400&quot;</span><span class="w">  </span><span class="c1"># 1 å¤©</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºå®ç°æœ€å¤§ç¼“å­˜è€Œä¼˜åŒ–çš„é…ç½®ï¼Œé€‚ç”¨äºé™æ€å†…å®¹æ›´æ–°ä¸é¢‘ç¹çš„ç½‘ç«™ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2|pdf|xml|txt&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=31536000,</span><span class="nv"> </span><span class="s">immutable&quot;</span><span class="w">  </span><span class="c1"># 1 å¹´</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯¹äºåŒæ—¶åŒ…å«é¢‘ç¹æ›´æ–°å’Œä¸é¢‘ç¹æ›´æ–°å†…å®¹çš„ç½‘ç«™ï¼Œè¯·è€ƒè™‘åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¶é‡‡ç”¨å¦‚ä¸‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=604800&quot;</span><span class="w">  </span><span class="c1"># 1 å‘¨</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="country">Country</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>å›½å®¶/åœ°åŒºæ’ä»¶ä¸ºæ‚¨çš„ç½‘ç«™å¯ç”¨åœ°ç†å°é”åŠŸèƒ½ï¼Œå…è®¸æ‚¨æ ¹æ®è®¿é—®è€…çš„åœ°ç†ä½ç½®é™åˆ¶è®¿é—®ã€‚æ­¤åŠŸèƒ½å¯å¸®åŠ©æ‚¨éµå®ˆåŒºåŸŸæ³•è§„ã€é˜²æ­¢é€šå¸¸ä¸é«˜é£é™©åœ°åŒºç›¸å…³çš„æ¬ºè¯ˆæ´»åŠ¨ï¼Œå¹¶æ ¹æ®åœ°ç†è¾¹ç•Œå®æ–½å†…å®¹é™åˆ¶ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“è®¿é—®è€…è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶ï¼ŒBunkerWeb ä¼šæ ¹æ®ä»–ä»¬çš„ IP åœ°å€ç¡®å®šä»–ä»¬çš„å›½å®¶/åœ°åŒºã€‚</li>
<li>æ‚¨çš„é…ç½®æŒ‡å®šäº†ç™½åå•ï¼ˆå…è®¸çš„å›½å®¶/åœ°åŒºï¼‰æˆ–é»‘åå•ï¼ˆè¢«é˜»æ­¢çš„å›½å®¶/åœ°åŒºï¼‰ã€‚</li>
<li>å¦‚æœæ‚¨è®¾ç½®äº†ç™½åå•ï¼Œåªæœ‰æ¥è‡ªè¯¥åˆ—è¡¨ä¸­å›½å®¶/åœ°åŒºçš„è®¿é—®è€…æ‰ä¼šè¢«æˆäºˆè®¿é—®æƒé™ã€‚</li>
<li>å¦‚æœæ‚¨è®¾ç½®äº†é»‘åå•ï¼Œæ¥è‡ªè¯¥åˆ—è¡¨ä¸­å›½å®¶/åœ°åŒºçš„è®¿é—®è€…å°†è¢«æ‹’ç»è®¿é—®ã€‚</li>
<li>ç»“æœä¼šè¢«ç¼“å­˜ï¼Œä»¥æé«˜æ¥è‡ªåŒä¸€ IP åœ°å€çš„é‡å¤è®¿é—®è€…çš„æ€§èƒ½ã€‚</li>
</ol>
<h3 id="_37">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨å›½å®¶/åœ°åŒºåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å®šä¹‰æ‚¨çš„ç­–ç•¥ï¼š</strong> å†³å®šæ‚¨æ˜¯æƒ³ä½¿ç”¨ç™½åå•æ–¹æ³•ï¼ˆä»…å…è®¸ç‰¹å®šå›½å®¶/åœ°åŒºï¼‰è¿˜æ˜¯é»‘åå•æ–¹æ³•ï¼ˆé˜»æ­¢ç‰¹å®šå›½å®¶/åœ°åŒºï¼‰ã€‚</li>
<li><strong>é…ç½®å›½å®¶/åœ°åŒºä»£ç ï¼š</strong> å°† ISO 3166-1 alpha-2 å›½å®¶/åœ°åŒºä»£ç ï¼ˆä¾‹å¦‚ USã€GBã€FR ç­‰ä¸¤ä½å­—æ¯ä»£ç ï¼‰æ·»åŠ åˆ° <code>WHITELIST_COUNTRY</code> æˆ– <code>BLACKLIST_COUNTRY</code> è®¾ç½®ä¸­ã€‚</li>
<li><strong>åº”ç”¨è®¾ç½®ï¼š</strong> é…ç½®å®Œæˆåï¼ŒåŸºäºå›½å®¶/åœ°åŒºçš„é™åˆ¶å°†é€‚ç”¨äºæ‚¨ç½‘ç«™çš„æ‰€æœ‰è®¿é—®è€…ã€‚</li>
<li><strong>ç›‘æ§æœ‰æ•ˆæ€§ï¼š</strong> æŸ¥çœ‹ <a href="../web-ui/">web UI</a> ä»¥æŸ¥çœ‹æŒ‰å›½å®¶/åœ°åŒºé˜»æ­¢çš„è¯·æ±‚ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ol>
<h3 id="_38">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å›½å®¶/åœ°åŒºç™½åå•ï¼š</strong> ä»¥ç©ºæ ¼åˆ†éš”çš„å›½å®¶/åœ°åŒºä»£ç ï¼ˆISO 3166-1 alpha-2 æ ¼å¼ï¼‰åˆ—è¡¨ã€‚åªå…è®¸è¿™äº›å›½å®¶/åœ°åŒºã€‚</td>
</tr>
<tr>
<td><code>BLACKLIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å›½å®¶/åœ°åŒºé»‘åå•ï¼š</strong> ä»¥ç©ºæ ¼åˆ†éš”çš„å›½å®¶/åœ°åŒºä»£ç ï¼ˆISO 3166-1 alpha-2 æ ¼å¼ï¼‰åˆ—è¡¨ã€‚è¿™äº›å›½å®¶/åœ°åŒºå°†è¢«é˜»æ­¢ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ç™½åå•ä¸é»‘åå•</p>
<p>é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„æ–¹æ³•ï¼š</p>
<ul>
<li>å½“æ‚¨æƒ³å°†è®¿é—®é™åˆ¶åœ¨å°‘æ•°å‡ ä¸ªå›½å®¶/åœ°åŒºæ—¶ï¼Œè¯·ä½¿ç”¨ç™½åå•ã€‚</li>
<li>å½“æ‚¨æƒ³é˜»æ­¢æ¥è‡ªç‰¹å®šé—®é¢˜åœ°åŒºçš„è®¿é—®ï¼ŒåŒæ—¶å…è®¸å…¶ä»–æ‰€æœ‰åœ°åŒºæ—¶ï¼Œè¯·ä½¿ç”¨é»‘åå•ã€‚</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">ä¼˜å…ˆè§„åˆ™</p>
<p>å¦‚æœåŒæ—¶é…ç½®äº†ç™½åå•å’Œé»‘åå•ï¼Œåˆ™ç™½åå•ä¼˜å…ˆã€‚è¿™æ„å‘³ç€ç³»ç»Ÿé¦–å…ˆæ£€æŸ¥ä¸€ä¸ªå›½å®¶/åœ°åŒºæ˜¯å¦åœ¨ç™½åå•ä¸­ï¼›å¦‚æœä¸åœ¨ï¼Œæ— è®ºé»‘åå•é…ç½®å¦‚ä½•ï¼Œè®¿é—®éƒ½å°†è¢«æ‹’ç»ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">å›½å®¶/åœ°åŒºæ£€æµ‹</p>
<p>BunkerWeb ä½¿ç”¨ <a href="https://db-ip.com/db/download/ip-to-country-lite">lite db-ip mmdb æ•°æ®åº“</a>æ ¹æ® IP åœ°å€ç¡®å®šæ¥æºå›½å®¶/åœ°åŒºã€‚</p>
</div>
<h3 id="_39">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="14:4"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><input id="__tabbed_14_4" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">ä»…ç™½åå•</label><label for="__tabbed_14_2">ä»…é»‘åå•</label><label for="__tabbed_14_3">ä»…é™æ¬§ç›Ÿè®¿é—®</label><label for="__tabbed_14_4">é«˜é£é™©å›½å®¶/åœ°åŒºè¢«é˜»æ­¢</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä»…å…è®¸æ¥è‡ªç¾å›½ã€åŠ æ‹¿å¤§å’Œè‹±å›½çš„è®¿é—®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;US</span><span class="nv"> </span><span class="s">CA</span><span class="nv"> </span><span class="s">GB&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>é˜»æ­¢æ¥è‡ªç‰¹å®šå›½å®¶/åœ°åŒºçš„è®¿é—®ï¼ŒåŒæ—¶å…è®¸æ‰€æœ‰å…¶ä»–å›½å®¶/åœ°åŒºï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä»…å…è®¸æ¥è‡ªæ¬§ç›Ÿæˆå‘˜å›½çš„è®¿é—®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AT</span><span class="nv"> </span><span class="s">BE</span><span class="nv"> </span><span class="s">BG</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">CY</span><span class="nv"> </span><span class="s">CZ</span><span class="nv"> </span><span class="s">DK</span><span class="nv"> </span><span class="s">EE</span><span class="nv"> </span><span class="s">FI</span><span class="nv"> </span><span class="s">FR</span><span class="nv"> </span><span class="s">DE</span><span class="nv"> </span><span class="s">GR</span><span class="nv"> </span><span class="s">HU</span><span class="nv"> </span><span class="s">IE</span><span class="nv"> </span><span class="s">IT</span><span class="nv"> </span><span class="s">LV</span><span class="nv"> </span><span class="s">LT</span><span class="nv"> </span><span class="s">LU</span><span class="nv"> </span><span class="s">MT</span><span class="nv"> </span><span class="s">NL</span><span class="nv"> </span><span class="s">PL</span><span class="nv"> </span><span class="s">PT</span><span class="nv"> </span><span class="s">RO</span><span class="nv"> </span><span class="s">SK</span><span class="nv"> </span><span class="s">SI</span><span class="nv"> </span><span class="s">ES</span><span class="nv"> </span><span class="s">SE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>é˜»æ­¢æ¥è‡ªé€šå¸¸ä¸æŸäº›ç½‘ç»œå¨èƒç›¸å…³çš„å›½å®¶/åœ°åŒºçš„è®¿é—®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP</span><span class="nv"> </span><span class="s">IR</span><span class="nv"> </span><span class="s">SY&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="crowdsec_1">CrowdSec</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<figure>
<p><img align="center," alt="æ¦‚è¿°" src="../../assets/img/crowdsec.svg" width="600" /></p>
</figure>
<p>CrowdSec æ’ä»¶å°† BunkerWeb ä¸ CrowdSec å®‰å…¨å¼•æ“é›†æˆï¼Œä¸ºæŠµå¾¡å„ç§ç½‘ç»œå¨èƒæä¾›é¢å¤–çš„ä¿æŠ¤å±‚ã€‚æ­¤æ’ä»¶å……å½“ <a href="https://crowdsec.net/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">CrowdSec</a> æ‹¦æˆªå™¨ï¼Œæ ¹æ® CrowdSec API çš„å†³ç­–æ‹’ç»è¯·æ±‚ã€‚</p>
<p>CrowdSec æ˜¯ä¸€ç§ç°ä»£çš„å¼€æºå®‰å…¨å¼•æ“ï¼Œå®ƒåŸºäºè¡Œä¸ºåˆ†æå’Œç¤¾åŒºçš„é›†ä½“æƒ…æŠ¥æ¥æ£€æµ‹å’Œé˜»æ­¢æ¶æ„ IP åœ°å€ã€‚æ‚¨è¿˜å¯ä»¥é…ç½®<a href="https://docs.crowdsec.net/docs/concepts?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">åœºæ™¯</a>æ¥æ ¹æ®å¯ç–‘è¡Œä¸ºè‡ªåŠ¨å°ç¦ IP åœ°å€ï¼Œä»è€Œå—ç›Šäºä¸€ä¸ªä¼—åŒ…çš„é»‘åå•ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>CrowdSec å¼•æ“ä¼šåˆ†ææ—¥å¿—å¹¶æ£€æµ‹æ‚¨åŸºç¡€è®¾æ–½ä¸Šçš„å¯ç–‘æ´»åŠ¨ã€‚</li>
<li>å½“æ£€æµ‹åˆ°æ¶æ„æ´»åŠ¨æ—¶ï¼ŒCrowdSec ä¼šåˆ›å»ºä¸€ä¸ªå†³ç­–æ¥é˜»æ­¢è¿è§„çš„ IP åœ°å€ã€‚</li>
<li>BunkerWeb ä½œä¸ºæ‹¦æˆªå™¨ï¼Œä¼šå‘ CrowdSec æœ¬åœ° API æŸ¥è¯¢æœ‰å…³ä¼ å…¥è¯·æ±‚çš„å†³ç­–ã€‚</li>
<li>å¦‚æœå®¢æˆ·ç«¯çš„ IP åœ°å€æœ‰æ´»åŠ¨çš„é˜»æ­¢å†³ç­–ï¼ŒBunkerWeb ä¼šæ‹’ç»å…¶è®¿é—®å—ä¿æŠ¤çš„æœåŠ¡ã€‚</li>
<li>å¯é€‰åœ°ï¼Œåº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶å¯ä»¥æ‰§è¡Œæ·±åº¦è¯·æ±‚æ£€æŸ¥ä»¥å¢å¼ºå®‰å…¨æ€§ã€‚</li>
</ol>
<div class="admonition success">
<p class="admonition-title">ä¸»è¦ä¼˜ç‚¹</p>
<ol>
<li><strong>ç¤¾åŒºé©±åŠ¨çš„å®‰å…¨ï¼š</strong> å—ç›Šäºæ•´ä¸ª CrowdSec ç”¨æˆ·ç¤¾åŒºå…±äº«çš„å¨èƒæƒ…æŠ¥ã€‚</li>
<li><strong>è¡Œä¸ºåˆ†æï¼š</strong> åŸºäºè¡Œä¸ºæ¨¡å¼è€Œä¸æ˜¯ç­¾åæ¥æ£€æµ‹å¤æ‚çš„æ”»å‡»ã€‚</li>
<li><strong>è½»é‡çº§é›†æˆï¼š</strong> å¯¹æ‚¨çš„ BunkerWeb å®ä¾‹çš„æ€§èƒ½å½±å“æœ€å°ã€‚</li>
<li><strong>å¤šå±‚æ¬¡ä¿æŠ¤ï¼š</strong> ç»“åˆè¾¹ç•Œé˜²å¾¡ï¼ˆIP é˜»æ­¢ï¼‰å’Œåº”ç”¨ç¨‹åºå®‰å…¨ï¼Œå®ç°æ·±åº¦ä¿æŠ¤ã€‚</li>
</ol>
</div>
<h3 id="_40">å‰ç½®æ¡ä»¶</h3>
<ul>
<li>CrowdSec æœ¬åœ° APIï¼ŒBunkerWeb å¯ä»¥è®¿é—®ï¼ˆé€šå¸¸ä¸ºè¿è¡Œåœ¨åŒä¸€ä¸»æœºæˆ–åŒä¸€ Docker ç½‘ç»œä¸­çš„ä»£ç†ï¼‰ã€‚</li>
<li>è®¿é—® BunkerWeb è®¿é—®æ—¥å¿—ï¼ˆé»˜è®¤è·¯å¾„ <code>/var/log/bunkerweb/access.log</code>ï¼‰ï¼Œä»¥ä¾¿ CrowdSec ä»£ç†åˆ†æè¯·æ±‚ã€‚</li>
<li>åœ¨ CrowdSec ä¸»æœºä¸Šå¯ä½¿ç”¨ <code>cscli</code>ï¼Œç”¨äºæ³¨å†Œ BunkerWeb çš„ bouncer å¯†é’¥ã€‚</li>
</ul>
<h3 id="_41">é›†æˆæµç¨‹</h3>
<ol>
<li>å‡†å¤‡ CrowdSec ä»£ç†ï¼Œä½¿å…¶èƒ½å¤Ÿæ‘„å– BunkerWeb æ—¥å¿—ã€‚</li>
<li>é…ç½® BunkerWebï¼Œä»¥ä¾¿æŸ¥è¯¢ CrowdSec æœ¬åœ° APIã€‚</li>
<li>é€šè¿‡ <code>/crowdsec/ping</code> API æˆ–ç®¡ç†ç•Œé¢ä¸­çš„ CrowdSec å¡ç‰‡éªŒè¯è¿æ¥ã€‚</li>
</ol>
<p>ä»¥ä¸‹å„èŠ‚å°†ä¾æ¬¡è¯´æ˜è¿™äº›æ­¥éª¤ã€‚</p>
<h3 id="1-crowdsec-bunkerweb">ç¬¬&nbsp;1&nbsp;æ­¥ â€“ å‡†å¤‡ CrowdSec æ‘„å– BunkerWeb æ—¥å¿—</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Docker</label><label for="__tabbed_15_2">Linux</label><label for="__tabbed_15_3">All-in-one</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>é‡‡é›†æ–‡ä»¶</strong></p>
<p>æ‚¨éœ€è¦è¿è¡Œä¸€ä¸ª CrowdSec å®ä¾‹ï¼Œå¹¶å°†å…¶é…ç½®ä¸ºè§£æ BunkerWeb æ—¥å¿—ã€‚è¯·åœ¨é‡‡é›†æ–‡ä»¶ä¸­å°† <code>type</code> å‚æ•°è®¾ç½®ä¸ºä¸“ç”¨çš„ <code>bunkerweb</code> å€¼ï¼ˆå‡è®¾ BunkerWeb æ—¥å¿—æŒ‰åŸæ ·å­˜å‚¨ï¼Œæ²¡æœ‰é™„åŠ æ•°æ®ï¼‰ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
</code></pre></div>
<p>å¦‚æœåœ¨ CrowdSec å®¹å™¨å†…ä»ç„¶çœ‹ä¸åˆ°è¯¥é›†åˆï¼Œè¯·è¿è¡Œ <code>docker exec -it &lt;crowdsec-container&gt; cscli hub update</code>ï¼Œç„¶åé‡å¯è¯¥å®¹å™¨ï¼ˆ<code>docker restart &lt;crowdsec-container&gt;</code>ï¼‰ï¼Œä»¥åŠ è½½æ–°çš„èµ„æºã€‚è¯·å°† <code>&lt;crowdsec-container&gt;</code> æ›¿æ¢ä¸º CrowdSec å®¹å™¨çš„å®é™…åç§°ã€‚</p>
<p><strong>åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶ï¼ˆ<em>å¯é€‰</em>ï¼‰</strong></p>
<p>CrowdSec è¿˜æä¾›äº†ä¸€ä¸ª<a href="https://docs.crowdsec.net/docs/appsec/intro?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶</a>ï¼Œå¯ç”¨äºä¿æŠ¤æ‚¨çš„åº”ç”¨ç¨‹åºå…å—æ”»å‡»ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨å®ƒï¼Œå¿…é¡»ä¸º AppSec ç»„ä»¶åˆ›å»ºå¦ä¸€ä¸ªé‡‡é›†æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p><strong>Syslog</strong></p>
<p>å¯¹äºåŸºäºå®¹å™¨çš„é›†æˆï¼Œæˆ‘ä»¬å»ºè®®å°† BunkerWeb å®¹å™¨çš„æ—¥å¿—é‡å®šå‘åˆ° syslog æœåŠ¡ï¼Œä»¥ä¾¿ CrowdSec å¯ä»¥è½»æ¾è®¿é—®å®ƒä»¬ã€‚è¿™æ˜¯ä¸€ä¸ª syslog-ng çš„ç¤ºä¾‹é…ç½®ï¼Œå®ƒä¼šå°†æ¥è‡ª BunkerWeb çš„åŸå§‹æ—¥å¿—å­˜å‚¨åˆ°æœ¬åœ°çš„ <code>/var/log/bunkerweb.log</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><pre><span></span><code>@version: 4.8

source s_net {
    udp(
        ip(&quot;0.0.0.0&quot;)
    );
};

template t_imp {
    template(&quot;$MSG\n&quot;);
    template_escape(no);
};

destination d_file {
    file(&quot;/var/log/bunkerweb.log&quot; template(t_imp));
};

log {
    source(s_net);
    destination(d_file);
};
</code></pre></div>
<p><strong>Docker Compose</strong></p>
<p>è¿™æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨çš„ docker-compose æ ·æ¿ï¼ˆä¸è¦å¿˜è®°æ›´æ–° bouncer å¯†é’¥ï¼‰ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-env</span>
<span class="w">  </span><span class="c1"># æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé”šç‚¹æ¥é¿å…åœ¨ä¸¤ä¸ªæœåŠ¡ä¸­é‡å¤ç›¸åŒçš„è®¾ç½®</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span><span class="w"> </span><span class="c1"># ç¡®ä¿è®¾ç½®æ­£ç¡®çš„ IP èŒƒå›´ï¼Œä»¥ä¾¿è°ƒåº¦å™¨å¯ä»¥å°†é…ç½®å‘é€åˆ°å®ä¾‹</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># è¿™æ˜¯å°†ç”¨äºåœ¨è°ƒåº¦å™¨ä¸­è¯†åˆ«å®ä¾‹çš„åç§°</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:1.6.6-rc1</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span><span class="w"> </span><span class="c1"># ç”¨äº QUIC / HTTP3 æ”¯æŒ</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span><span class="w"> </span><span class="c1"># æˆ‘ä»¬ä½¿ç”¨é”šç‚¹æ¥é¿å…ä¸ºæ‰€æœ‰æœåŠ¡é‡å¤ç›¸åŒçš„è®¾ç½®</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">logging</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">syslog</span><span class="w"> </span><span class="c1"># å°†æ—¥å¿—å‘é€åˆ° syslog</span>
<span class="w">      </span><span class="nt">options</span><span class="p">:</span>
<span class="w">        </span><span class="nt">syslog-address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;udp://10.20.30.254:514&quot;</span><span class="w"> </span><span class="c1"># syslog æœåŠ¡çš„ IP åœ°å€</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:1.6.6-rc1</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span><span class="w"> </span><span class="c1"># ç¡®ä¿è®¾ç½®æ­£ç¡®çš„å®ä¾‹åç§°</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># è®°å¾—ä¸ºæ•°æ®åº“è®¾ç½®ä¸€ä¸ªæ›´å¼ºçš„å¯†ç </span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span><span class="w"> </span><span class="c1"># è¿™æ˜¯åŒä¸€ç½‘ç»œä¸­ CrowdSec å®¹å™¨ API çš„åœ°å€</span>
<span class="w">      </span><span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span><span class="w"> </span><span class="c1"># å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨ AppSec ç»„ä»¶ï¼Œè¯·æ³¨é‡Šæ‰æ­¤è¡Œ</span>
<span class="w">      </span><span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3cr3tb0unc3rk3y&quot;</span><span class="w"> </span><span class="c1"># è®°å¾—ä¸º bouncer è®¾ç½®ä¸€ä¸ªæ›´å¼ºçš„å¯†é’¥</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># ç”¨äºæŒä¹…åŒ–ç¼“å­˜å’Œå¤‡ä»½ç­‰å…¶ä»–æ•°æ®</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb:11</span>
<span class="w">    </span><span class="c1"># æˆ‘ä»¬è®¾ç½®äº†æœ€å¤§å…è®¸çš„æ•°æ®åŒ…å¤§å°ä»¥é¿å…å¤§æŸ¥è¯¢çš„é—®é¢˜</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--max-allowed-packet=67108864</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;db&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changeme&quot;</span><span class="w"> </span><span class="c1"># è®°å¾—ä¸ºæ•°æ®åº“è®¾ç½®ä¸€ä¸ªæ›´å¼ºçš„å¯†ç </span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">crowdsec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/crowdsec:v1.7.3</span><span class="w"> </span><span class="c1"># ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼Œä½†ä¸ºäº†æ›´å¥½çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œè¯·å§‹ç»ˆå›ºå®šç‰ˆæœ¬</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cs-data:/var/lib/crowdsec/data</span><span class="w"> </span><span class="c1"># æŒä¹…åŒ– CrowdSec æ•°æ®</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-logs:/var/log:ro</span><span class="w"> </span><span class="c1"># BunkerWeb çš„æ—¥å¿—ï¼Œä¾› CrowdSec è§£æ</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./acquis.yaml:/etc/crowdsec/acquis.yaml</span><span class="w"> </span><span class="c1"># BunkerWeb æ—¥å¿—çš„é‡‡é›†æ–‡ä»¶</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./appsec.yaml:/etc/crowdsec/acquis.d/appsec.yaml</span><span class="w"> </span><span class="c1"># å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨ AppSec ç»„ä»¶ï¼Œè¯·æ³¨é‡Šæ‰æ­¤è¡Œ</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">BOUNCER_KEY_bunkerweb</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3cr3tb0unc3rk3y&quot;</span><span class="w"> </span><span class="c1"># è®°å¾—ä¸º bouncer è®¾ç½®ä¸€ä¸ªæ›´å¼ºçš„å¯†é’¥</span>
<span class="w">      </span><span class="nt">COLLECTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerity/bunkerweb</span><span class="nv"> </span><span class="s">crowdsecurity/appsec-virtual-patching</span><span class="nv"> </span><span class="s">crowdsecurity/appsec-generic-rules&quot;</span>
<span class="w">      </span><span class="c1">#   COLLECTIONS: &quot;bunkerity/bunkerweb&quot; # å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨ AppSec ç»„ä»¶ï¼Œè¯·æ”¹ç”¨æ­¤è¡Œ</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>

<span class="w">  </span><span class="nt">syslog</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">balabit/syslog-ng:4.9.0</span>
<span class="w">    </span><span class="nt">cap_add</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_BIND_SERVICE</span><span class="w">  </span><span class="c1"># ç»‘å®šåˆ°ä½ç«¯å£</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_BROADCAST</span><span class="w">  </span><span class="c1"># å‘é€å¹¿æ’­</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_RAW</span><span class="w">  </span><span class="c1"># ä½¿ç”¨åŸå§‹å¥—æ¥å­—</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAC_READ_SEARCH</span><span class="w">  </span><span class="c1"># ç»•è¿‡æƒé™è¯»å–æ–‡ä»¶</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAC_OVERRIDE</span><span class="w">  </span><span class="c1"># è¦†ç›–æ–‡ä»¶æƒé™</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CHOWN</span><span class="w">  </span><span class="c1"># æ›´æ”¹æ‰€æœ‰æƒ</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SYSLOG</span><span class="w">  </span><span class="c1"># å†™å…¥ç³»ç»Ÿæ—¥å¿—</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-logs:/var/log/bunkerweb</span><span class="w"> </span><span class="c1"># ç”¨äºå­˜å‚¨æ—¥å¿—çš„å·</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./syslog-ng.conf:/etc/syslog-ng/syslog-ng.conf</span><span class="w"> </span><span class="c1"># syslog-ng é…ç½®æ–‡ä»¶</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ipv4_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.254</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-logs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cs-data</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span><span class="w"> </span><span class="c1"># ç¡®ä¿è®¾ç½®æ­£ç¡®çš„ IP èŒƒå›´ï¼Œä»¥ä¾¿è°ƒåº¦å™¨å¯ä»¥å°†é…ç½®å‘é€åˆ°å®ä¾‹</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>æ‚¨éœ€è¦å®‰è£… CrowdSec å¹¶å°†å…¶é…ç½®ä¸ºè§£æ BunkerWeb æ—¥å¿—ã€‚è¯·æŒ‰ç…§<a href="https://doc.crowdsec.net/docs/getting_started/install_crowdsec?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">å®˜æ–¹æ–‡æ¡£</a>è¿›è¡Œæ“ä½œã€‚</p>
<p>è¦ä½¿ CrowdSec èƒ½å¤Ÿè§£æ BunkerWeb æ—¥å¿—ï¼Œè¯·å°†ä»¥ä¸‹è¡Œæ·»åŠ åˆ°ä½äº <code>/etc/crowdsec/acquis.yaml</code> çš„é‡‡é›†æ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/access.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/error.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/modsec_audit.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerweb</span>
</code></pre></div>
<p>æ›´æ–° CrowdSec hub å¹¶å®‰è£… BunkerWeb é›†åˆï¼š</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>hub<span class="w"> </span>update
sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>bunkerity/bunkerweb
</code></pre></div>
<p>ç°åœ¨ï¼Œä½¿ç”¨ <code>cscli</code> å·¥å…·å°†æ‚¨çš„è‡ªå®šä¹‰ bouncer æ·»åŠ åˆ° CrowdSec APIï¼š</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>bouncers<span class="w"> </span>add<span class="w"> </span>crowdsec-bunkerweb-bouncer/v1.6
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">API å¯†é’¥</p>
<p>è¯·ä¿ç•™ <code>cscli</code> å‘½ä»¤ç”Ÿæˆçš„å¯†é’¥ï¼›ç¨åæ‚¨å°†éœ€è¦å®ƒã€‚</p>
</div>
<p>ç„¶åé‡å¯ CrowdSec æœåŠ¡ï¼š</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶ï¼ˆ<em>å¯é€‰</em>ï¼‰</strong></p>
<p>å¦‚æœæ‚¨æƒ³ä½¿ç”¨ AppSec ç»„ä»¶ï¼Œæ‚¨å¿…é¡»ä¸ºå…¶åˆ›å»ºä¸€ä¸ªä½äº <code>/etc/crowdsec/acquis.d/appsec.yaml</code> çš„å¦ä¸€ä¸ªé‡‡é›†æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p>æ‚¨è¿˜éœ€è¦å®‰è£… AppSec ç»„ä»¶çš„é›†åˆï¼š</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-virtual-patching
sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-generic-rules
</code></pre></div>
<p>æœ€åï¼Œé‡å¯ CrowdSec æœåŠ¡ï¼š</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>è®¾ç½®</strong></p>
<p>é€šè¿‡å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°æ‚¨çš„ BunkerWeb é…ç½®æ–‡ä»¶æ¥é…ç½®æ’ä»¶ï¼š</p>
<div class="highlight"><pre><span></span><code>USE_CROWDSEC=yes
CROWDSEC_API=http://127.0.0.1:8080
CROWDSEC_API_KEY=&lt;The key provided by cscli&gt;
# å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨ AppSec ç»„ä»¶ï¼Œè¯·æ³¨é‡Šæ‰
CROWDSEC_APPSEC_URL=http://127.0.0.1:7422
</code></pre></div>
<p>æœ€åï¼Œé‡æ–°åŠ è½½ BunkerWeb æœåŠ¡ï¼š</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>reload<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<p>BunkerWeb All-In-One (AIO) Docker é•œåƒå®Œå…¨é›†æˆäº† CrowdSecã€‚å½“ä½¿ç”¨å†…éƒ¨ CrowdSec ä»£ç†æ—¶ï¼Œæ‚¨æ— éœ€ä¸º BunkerWeb æ—¥å¿—è®¾ç½®å•ç‹¬çš„ CrowdSec å®ä¾‹æˆ–æ‰‹åŠ¨é…ç½®æ–‡ä»¶ã€‚</p>
<p>è¯·å‚é˜…<a href="../integrations/#crowdsec-integration">ä¸€ä½“åŒ– (AIO) é•œåƒé›†æˆæ–‡æ¡£</a>ã€‚</p>
</div>
</div>
</div>
<h3 id="2-bunkerweb">ç¬¬&nbsp;2&nbsp;æ­¥ â€“ é…ç½® BunkerWeb å‚æ•°</h3>
<p>åº”ç”¨ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼ˆæˆ–é€šè¿‡è°ƒåº¦å™¨è®¾ç½®çš„å€¼ï¼‰ï¼Œè®© BunkerWeb å®ä¾‹èƒ½å¤Ÿä¸ CrowdSec æœ¬åœ° API é€šä¿¡ã€‚è‡³å°‘éœ€è¦è®¾ç½® <code>USE_CROWDSEC</code>ã€<code>CROWDSEC_API</code> ä»¥åŠé€šè¿‡ <code>cscli bouncers add</code> ç”Ÿæˆçš„æœ‰æ•ˆå¯†é’¥ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CROWDSEC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ CrowdSecï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ CrowdSec æ‹¦æˆªå™¨ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_API</code></td>
<td><code>http://crowdsec:8080</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>CrowdSec API URLï¼š</strong> CrowdSec æœ¬åœ° API æœåŠ¡çš„åœ°å€ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_API_KEY</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>CrowdSec API å¯†é’¥ï¼š</strong> ç”¨äºå‘ CrowdSec API è¿›è¡Œèº«ä»½éªŒè¯çš„ API å¯†é’¥ï¼Œä½¿ç”¨ <code>cscli bouncers add</code> è·å–ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_MODE</code></td>
<td><code>live</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ“ä½œæ¨¡å¼ï¼š</strong> <code>live</code>ï¼ˆä¸ºæ¯ä¸ªè¯·æ±‚æŸ¥è¯¢ APIï¼‰æˆ– <code>stream</code>ï¼ˆå®šæœŸç¼“å­˜æ‰€æœ‰å†³ç­–ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_ENABLE_INTERNAL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å†…éƒ¨æµé‡ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥æ ¹æ® CrowdSec å†³ç­–æ£€æŸ¥å†…éƒ¨æµé‡ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_REQUEST_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>è¯·æ±‚è¶…æ—¶ï¼š</strong> åœ¨å®æ—¶æ¨¡å¼ä¸‹å‘ CrowdSec æœ¬åœ° API å‘å‡º HTTP è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_EXCLUDE_LOCATION</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ’é™¤çš„ä½ç½®ï¼š</strong> ä» CrowdSec æ£€æŸ¥ä¸­æ’é™¤çš„ä½ç½®ï¼ˆURIï¼‰åˆ—è¡¨ï¼Œä»¥é€—å·åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_CACHE_EXPIRATION</code></td>
<td><code>1</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼š</strong> åœ¨å®æ—¶æ¨¡å¼ä¸‹ï¼ŒIP å†³ç­–çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_UPDATE_FREQUENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ›´æ–°é¢‘ç‡ï¼š</strong> åœ¨æµæ¨¡å¼ä¸‹ï¼Œä» CrowdSec API æ‹‰å–æ–°çš„/è¿‡æœŸçš„å†³ç­–çš„é¢‘ç‡ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="_42">åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶è®¾ç½®</h4>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CROWDSEC_APPSEC_URL</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>AppSec URLï¼š</strong> CrowdSec åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶çš„ URLã€‚ç•™ç©ºä»¥ç¦ç”¨ AppSecã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_FAILURE_ACTION</code></td>
<td><code>passthrough</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å¤±è´¥æ“ä½œï¼š</strong> å½“ AppSec è¿”å›é”™è¯¯æ—¶è¦é‡‡å–çš„æ“ä½œã€‚å¯ä»¥æ˜¯ <code>passthrough</code> æˆ– <code>deny</code>ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_CONNECT_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>è¿æ¥è¶…æ—¶ï¼š</strong> è¿æ¥åˆ° AppSec ç»„ä»¶çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SEND_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å‘é€è¶…æ—¶ï¼š</strong> å‘ AppSec ç»„ä»¶å‘é€æ•°æ®çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_PROCESS_TIMEOUT</code></td>
<td><code>500</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å¤„ç†è¶…æ—¶ï¼š</strong> åœ¨ AppSec ç»„ä»¶ä¸­å¤„ç†è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_ALWAYS_SEND_TO_APPSEC</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å§‹ç»ˆå‘é€ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å§‹ç»ˆå°†è¯·æ±‚å‘é€åˆ° AppSecï¼Œå³ä½¿å­˜åœ¨ IP çº§åˆ«çš„å†³ç­–ã€‚</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SSL_VERIFY</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>SSL éªŒè¯ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥éªŒè¯ AppSec ç»„ä»¶çš„ SSL è¯ä¹¦ã€‚</td>
</tr>
</tbody>
</table>
<p>!!! info "å…³äºæ“ä½œæ¨¡å¼" - <strong>å®æ—¶æ¨¡å¼</strong>ä¼šä¸ºæ¯ä¸ªä¼ å…¥çš„è¯·æ±‚æŸ¥è¯¢ CrowdSec APIï¼Œæä¾›å®æ—¶çš„ä¿æŠ¤ï¼Œä½†ä¼šå¢åŠ å»¶è¿Ÿã€‚- <strong>æµæ¨¡å¼</strong>ä¼šå®šæœŸä» CrowdSec API ä¸‹è½½æ‰€æœ‰å†³ç­–å¹¶å°†å…¶æœ¬åœ°ç¼“å­˜ï¼Œä»è€Œå‡å°‘å»¶è¿Ÿï¼Œä½†åº”ç”¨æ–°å†³ç­–ä¼šç•¥æœ‰å»¶è¿Ÿã€‚</p>
<h3 id="_43">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_16_2">å¸¦æœ‰ AppSec çš„é«˜çº§é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>è¿™æ˜¯ä¸€ä¸ªå½“ CrowdSec åœ¨åŒä¸€å°ä¸»æœºä¸Šè¿è¡Œæ—¶çš„ä¸€ä¸ªç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;live&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªæ›´å…¨é¢çš„é…ç½®ï¼ŒåŒ…æ‹¬åº”ç”¨ç¨‹åºå®‰å…¨ç»„ä»¶ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-api-key-here&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">CROWDSEC_UPDATE_FREQUENCY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">CROWDSEC_EXCLUDE_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/health,/metrics&quot;</span>

<span class="c1"># AppSec é…ç½®</span>
<span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span>
<span class="nt">CROWDSEC_APPSEC_FAILURE_ACTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deny&quot;</span>
<span class="nt">CROWDSEC_ALWAYS_SEND_TO_APPSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_APPSEC_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="3">ç¬¬&nbsp;3&nbsp;æ­¥ â€“ éªŒè¯é›†æˆ</h3>
<ul>
<li>åœ¨è°ƒåº¦å™¨æ—¥å¿—ä¸­æŸ¥æ‰¾ <code>CrowdSec configuration successfully generated</code> å’Œ <code>CrowdSec bouncer denied request</code> æ¡ç›®ï¼Œä»¥ç¡®è®¤æ’ä»¶å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</li>
<li>åœ¨ CrowdSec ç«¯ç›‘æ§ <code>cscli metrics show</code> æˆ– CrowdSec Consoleï¼Œç¡®ä¿ BunkerWeb çš„å†³ç­–æŒ‰é¢„æœŸæ˜¾ç¤ºã€‚</li>
<li>åœ¨ BunkerWeb UI ä¸­æ‰“å¼€ CrowdSec æ’ä»¶é¡µé¢æŸ¥çœ‹é›†æˆçŠ¶æ€ã€‚</li>
</ul>
<h2 id="custom-ssl-certificate">Custom SSL certificate</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>è‡ªå®šä¹‰ SSL è¯ä¹¦æ’ä»¶å…è®¸æ‚¨åœ¨ BunkerWeb ä¸­ä½¿ç”¨æ‚¨è‡ªå·±çš„ SSL/TLS è¯ä¹¦ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„è¯ä¹¦ã€‚å¦‚æœæ‚¨æ‹¥æœ‰æ¥è‡ªå—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ (CA) çš„ç°æœ‰è¯ä¹¦ã€éœ€è¦ä½¿ç”¨å…·æœ‰ç‰¹å®šé…ç½®çš„è¯ä¹¦ï¼Œæˆ–è€…å¸Œæœ›åœ¨æ•´ä¸ªåŸºç¡€è®¾æ–½ä¸­ä¿æŒä¸€è‡´çš„è¯ä¹¦ç®¡ç†ï¼Œæ­¤åŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æ‚¨é€šè¿‡æŒ‡å®šæ–‡ä»¶è·¯å¾„æˆ–ä»¥ base64 ç¼–ç æˆ–çº¯æ–‡æœ¬ PEM æ ¼å¼æä¾›æ•°æ®çš„æ–¹å¼ï¼Œå‘ BunkerWeb æä¾›æ‚¨çš„è¯ä¹¦å’Œç§é’¥æ–‡ä»¶ã€‚</li>
<li>BunkerWeb ä¼šéªŒè¯æ‚¨çš„è¯ä¹¦å’Œå¯†é’¥ï¼Œä»¥ç¡®ä¿å®ƒä»¬çš„æ ¼å¼æ­£ç¡®ä¸”å¯ç”¨ã€‚</li>
<li>å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼ŒBunkerWeb ä¼šæä¾›æ‚¨çš„è‡ªå®šä¹‰è¯ä¹¦ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„è¯ä¹¦ã€‚</li>
<li>BunkerWeb ä¼šè‡ªåŠ¨ç›‘æ§æ‚¨çš„è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼Œå¹¶åœ¨å…¶å³å°†åˆ°æœŸæ—¶æ˜¾ç¤ºè­¦å‘Šã€‚</li>
<li>æ‚¨å¯ä»¥å®Œå…¨æ§åˆ¶è¯ä¹¦ç®¡ç†ï¼Œå…è®¸æ‚¨ä½¿ç”¨æ¥è‡ªæ‚¨åå¥½çš„ä»»ä½•é¢å‘æœºæ„çš„è¯ä¹¦ã€‚</li>
</ol>
<div class="admonition info">
<p class="admonition-title">è‡ªåŠ¨è¯ä¹¦ç›‘æ§</p>
<p>å½“æ‚¨é€šè¿‡å°† <code>USE_CUSTOM_SSL</code> è®¾ç½®ä¸º <code>yes</code> æ¥å¯ç”¨è‡ªå®šä¹‰ SSL/TLS æ—¶ï¼ŒBunkerWeb ä¼šè‡ªåŠ¨ç›‘æ§ <code>CUSTOM_SSL_CERT</code> ä¸­æŒ‡å®šçš„è‡ªå®šä¹‰è¯ä¹¦ã€‚å®ƒä¼šæ¯å¤©æ£€æŸ¥æ›´æ”¹ï¼Œå¹¶åœ¨æ£€æµ‹åˆ°ä»»ä½•ä¿®æ”¹æ—¶é‡æ–°åŠ è½½ NGINXï¼Œç¡®ä¿å§‹ç»ˆä½¿ç”¨æœ€æ–°çš„è¯ä¹¦ã€‚</p>
</div>
<h3 id="_44">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨è‡ªå®šä¹‰ SSL è¯ä¹¦åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_CUSTOM_SSL</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è‡ªå®šä¹‰è¯ä¹¦æ”¯æŒã€‚</li>
<li><strong>é€‰æ‹©ä¸€ç§æ–¹æ³•ï¼š</strong> å†³å®šæ˜¯é€šè¿‡æ–‡ä»¶è·¯å¾„è¿˜æ˜¯ä»¥ base64 ç¼–ç /çº¯æ–‡æœ¬æ•°æ®æä¾›è¯ä¹¦ï¼Œå¹¶ä½¿ç”¨ <code>CUSTOM_SSL_CERT_PRIORITY</code> è®¾ç½®ä¼˜å…ˆçº§ã€‚</li>
<li><strong>æä¾›è¯ä¹¦æ–‡ä»¶ï¼š</strong> å¦‚æœä½¿ç”¨æ–‡ä»¶è·¯å¾„ï¼Œè¯·æŒ‡å®šæ‚¨çš„è¯ä¹¦å’Œç§é’¥æ–‡ä»¶çš„ä½ç½®ã€‚</li>
<li><strong>æˆ–è€…æä¾›è¯ä¹¦æ•°æ®ï¼š</strong> å¦‚æœä½¿ç”¨æ•°æ®ï¼Œè¯·ä»¥ base64 ç¼–ç çš„å­—ç¬¦ä¸²æˆ–çº¯æ–‡æœ¬ PEM æ ¼å¼æä¾›æ‚¨çš„è¯ä¹¦å’Œå¯†é’¥ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼ŒBunkerWeb ä¼šè‡ªåŠ¨å°†æ‚¨çš„è‡ªå®šä¹‰è¯ä¹¦ç”¨äºæ‰€æœ‰ HTTPS è¿æ¥ã€‚</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">æµæ¨¡å¼é…ç½®</p>
<p>å¯¹äºæµæ¨¡å¼ï¼Œæ‚¨å¿…é¡»é…ç½® <code>LISTEN_STREAM_PORT_SSL</code> è®¾ç½®ä»¥æŒ‡å®š SSL/TLS ç›‘å¬ç«¯å£ã€‚æ­¤æ­¥éª¤å¯¹äºåœ¨æµæ¨¡å¼ä¸‹æ­£å¸¸è¿è¡Œè‡³å…³é‡è¦ã€‚</p>
</div>
<h3 id="_45">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CUSTOM_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨è‡ªå®šä¹‰ SSLï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥ä½¿ç”¨æ‚¨è‡ªå·±çš„è¯ä¹¦è€Œä¸æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„è¯ä¹¦ã€‚</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_PRIORITY</code></td>
<td><code>file</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦ä¼˜å…ˆçº§ï¼š</strong> é€‰æ‹©ä¼˜å…ˆä½¿ç”¨æ–‡ä»¶è·¯å¾„ä¸­çš„è¯ä¹¦è¿˜æ˜¯ base64 æ•°æ®ä¸­çš„è¯ä¹¦ï¼ˆ<code>file</code> æˆ– <code>data</code>ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦è·¯å¾„ï¼š</strong> æ‚¨çš„ SSL è¯ä¹¦æˆ–è¯ä¹¦æ†ç»‘åŒ…æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç§é’¥è·¯å¾„ï¼š</strong> æ‚¨çš„ SSL ç§é’¥æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_DATA</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦æ•°æ®ï¼š</strong> ä»¥ base64 æ ¼å¼ç¼–ç æˆ–ä»¥çº¯æ–‡æœ¬ PEM æ ¼å¼è¡¨ç¤ºçš„æ‚¨çš„è¯ä¹¦ã€‚</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY_DATA</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç§é’¥æ•°æ®ï¼š</strong> ä»¥ base64 æ ¼å¼ç¼–ç æˆ–ä»¥çº¯æ–‡æœ¬ PEM æ ¼å¼è¡¨ç¤ºçš„æ‚¨çš„ç§é’¥ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦æ—¶ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç§é’¥å¾—åˆ°å¦¥å–„ä¿æŠ¤å¹¶å…·æœ‰é€‚å½“çš„æƒé™ã€‚æ–‡ä»¶å¿…é¡»å¯ç”± BunkerWeb è°ƒåº¦å™¨è¯»å–ã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">è¯ä¹¦æ ¼å¼</p>
<p>BunkerWeb éœ€è¦ PEM æ ¼å¼çš„è¯ä¹¦ã€‚å¦‚æœæ‚¨çš„è¯ä¹¦æ˜¯å…¶ä»–æ ¼å¼ï¼Œæ‚¨å¯èƒ½éœ€è¦å…ˆè¿›è¡Œè½¬æ¢ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">è¯ä¹¦é“¾</p>
<p>å¦‚æœæ‚¨çš„è¯ä¹¦åŒ…å«ä¸€ä¸ªé“¾ï¼ˆä¸­é—´è¯ä¹¦ï¼‰ï¼Œæ‚¨åº”è¯¥æŒ‰æ­£ç¡®çš„é¡ºåºæä¾›å®Œæ•´çš„è¯ä¹¦é“¾ï¼Œé¦–å…ˆæ˜¯æ‚¨çš„è¯ä¹¦ï¼Œç„¶åæ˜¯ä»»ä½•ä¸­é—´è¯ä¹¦ã€‚</p>
</div>
<h3 id="_46">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="17:4"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><input id="__tabbed_17_4" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">ä½¿ç”¨æ–‡ä»¶è·¯å¾„</label><label for="__tabbed_17_2">ä½¿ç”¨ Base64 æ•°æ®</label><label for="__tabbed_17_3">ä½¿ç”¨çº¯æ–‡æœ¬ PEM æ•°æ®</label><label for="__tabbed_17_4">å›é€€é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨ç£ç›˜ä¸Šçš„è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨ base64 ç¼–ç çš„è¯ä¹¦å’Œå¯†é’¥æ•°æ®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...base64</span><span class="nv"> </span><span class="s">encoded</span><span class="nv"> </span><span class="s">certificate...Cg==&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...base64</span><span class="nv"> </span><span class="s">encoded</span><span class="nv"> </span><span class="s">key...Cg==&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨ PEM æ ¼å¼çš„çº¯æ–‡æœ¬è¯ä¹¦å’Œå¯†é’¥æ•°æ®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN CERTIFICATE-----</span>
<span class="w">  </span><span class="no">MIIDdzCCAl+gAwIBAgIUJH...certificate content...AAAA</span>
<span class="w">  </span><span class="no">-----END CERTIFICATE-----</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN PRIVATE KEY-----</span>
<span class="w">  </span><span class="no">MIIEvQIBADAN...key content...AAAA</span>
<span class="w">  </span><span class="no">-----END PRIVATE KEY-----</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªä¼˜å…ˆä½¿ç”¨æ–‡ä»¶ï¼Œä½†å¦‚æœæ–‡ä»¶ä¸å¯ç”¨åˆ™å›é€€åˆ° base64 æ•°æ®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/certificate.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/your/private-key.pem&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...base64</span><span class="nv"> </span><span class="s">encoded</span><span class="nv"> </span><span class="s">certificate...Cg==&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...base64</span><span class="nv"> </span><span class="s">encoded</span><span class="nv"> </span><span class="s">key...Cg==&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="dnsbl">DNSBL</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>DNSBLï¼ˆåŸŸåç³»ç»Ÿé»‘åå•ï¼‰æ’ä»¶é€šè¿‡å¯¹ç…§å¤–éƒ¨ DNSBL æœåŠ¡å™¨æ£€æŸ¥å®¢æˆ·ç«¯ IP åœ°å€ï¼Œä¸ºæ‚¨çš„ç½‘ç«™æä¾›é’ˆå¯¹å·²çŸ¥æ¶æ„ IP åœ°å€çš„ä¿æŠ¤ã€‚æ­¤åŠŸèƒ½é€šè¿‡åˆ©ç”¨ç¤¾åŒºç»´æŠ¤çš„æœ‰é—®é¢˜çš„ IP åœ°å€åˆ—è¡¨ï¼Œå¸®åŠ©ä¿æŠ¤æ‚¨çš„ç½‘ç«™å…å—åƒåœ¾é‚®ä»¶ã€åƒµå°¸ç½‘ç»œå’Œå„ç§ç±»å‹çš„ç½‘ç»œå¨èƒã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯è¿æ¥åˆ°æ‚¨çš„ç½‘ç«™æ—¶ï¼ŒBunkerWeb ä¼šä½¿ç”¨ DNS åè®®æŸ¥è¯¢æ‚¨é€‰æ‹©çš„ DNSBL æœåŠ¡å™¨ã€‚</li>
<li>é€šè¿‡å‘æ¯ä¸ª DNSBL æœåŠ¡å™¨å‘é€å¸¦æœ‰å®¢æˆ·ç«¯ IP åœ°å€çš„åå‘ DNS æŸ¥è¯¢æ¥æ‰§è¡Œæ£€æŸ¥ã€‚</li>
<li>å¦‚æœä»»ä½• DNSBL æœåŠ¡å™¨ç¡®è®¤å®¢æˆ·ç«¯çš„ IP åœ°å€è¢«åˆ—ä¸ºæ¶æ„ï¼ŒBunkerWeb å°†è‡ªåŠ¨å°ç¦è¯¥å®¢æˆ·ç«¯ï¼Œé˜²æ­¢æ½œåœ¨å¨èƒåˆ°è¾¾æ‚¨çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>ç»“æœä¼šè¢«ç¼“å­˜ï¼Œä»¥æé«˜æ¥è‡ªåŒä¸€ IP åœ°å€çš„é‡å¤è®¿é—®è€…çš„æ€§èƒ½ã€‚</li>
<li>ä½¿ç”¨å¼‚æ­¥æŸ¥è¯¢é«˜æ•ˆåœ°æ‰§è¡ŒæŸ¥æ‰¾ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å¯¹é¡µé¢åŠ è½½æ—¶é—´çš„å½±å“ã€‚</li>
</ol>
<h3 id="_47">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ DNSBL åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> DNSBL åŠŸèƒ½é»˜è®¤ç¦ç”¨ã€‚å°† <code>USE_DNSBL</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½® DNSBL æœåŠ¡å™¨ï¼š</strong> å°†æ‚¨è¦ä½¿ç”¨çš„ DNSBL æœåŠ¡çš„åŸŸåæ·»åŠ åˆ° <code>DNSBL_LIST</code> è®¾ç½®ä¸­ã€‚</li>
<li><strong>åº”ç”¨è®¾ç½®ï¼š</strong> é…ç½®å®Œæˆåï¼ŒBunkerWeb å°†è‡ªåŠ¨å¯¹ç…§æŒ‡å®šçš„ DNSBL æœåŠ¡å™¨æ£€æŸ¥ä¼ å…¥çš„è¿æ¥ã€‚</li>
<li><strong>ç›‘æ§æœ‰æ•ˆæ€§ï¼š</strong> æŸ¥çœ‹ <a href="../web-ui/">web UI</a> ä»¥æŸ¥çœ‹å›  DNSBL æ£€æŸ¥è€Œè¢«é˜»æ­¢çš„è¯·æ±‚çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ol>
<h3 id="_48">é…ç½®è®¾ç½®</h3>
<p><strong>é€šç”¨</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_DNSBL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td>å¯ç”¨ DNSBLï¼šè®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å¯¹ä¼ å…¥è¿æ¥çš„ DNSBL æ£€æŸ¥ã€‚</td>
</tr>
<tr>
<td><code>DNSBL_LIST</code></td>
<td><code>bl.blocklist.de sbl.spamhaus.org xbl.spamhaus.org</code></td>
<td>global</td>
<td>å¦</td>
<td>DNSBL æœåŠ¡å™¨ï¼šè¦æ£€æŸ¥çš„ DNSBL æœåŠ¡å™¨åŸŸååˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>å¿½ç•¥åˆ—è¡¨</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DNSBL_IGNORE_IP</code></td>
<td>``</td>
<td>multisite</td>
<td>æ˜¯</td>
<td>ä»¥ç©ºæ ¼åˆ†éš”çš„ IP/CIDRï¼Œç”¨äºè·³è¿‡ DNSBL æ£€æŸ¥ï¼ˆç™½åå•ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>DNSBL_IGNORE_IP_URLS</code></td>
<td>``</td>
<td>multisite</td>
<td>æ˜¯</td>
<td>ä»¥ç©ºæ ¼åˆ†éš”çš„ URLï¼Œæä¾›è¦è·³è¿‡çš„ IP/CIDRã€‚æ”¯æŒ <code>http(s)://</code> å’Œ <code>file://</code> æ–¹æ¡ˆã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">é€‰æ‹© DNSBL æœåŠ¡å™¨</p>
<p>é€‰æ‹©ä¿¡èª‰è‰¯å¥½çš„ DNSBL æä¾›å•†ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘è¯¯æŠ¥ã€‚é»˜è®¤åˆ—è¡¨åŒ…æ‹¬é€‚åˆå¤§å¤šæ•°ç½‘ç«™çš„æˆç†ŸæœåŠ¡ï¼š</p>
<ul>
<li><strong>bl.blocklist.deï¼š</strong> åˆ—å‡ºè¢«æ£€æµ‹åˆ°æ”»å‡»å…¶ä»–æœåŠ¡å™¨çš„ IPã€‚</li>
<li><strong>sbl.spamhaus.orgï¼š</strong> ä¸“æ³¨äºåƒåœ¾é‚®ä»¶æºå’Œå…¶ä»–æ¶æ„æ´»åŠ¨ã€‚</li>
<li><strong>xbl.spamhaus.orgï¼š</strong> é’ˆå¯¹å—æ„ŸæŸ“çš„ç³»ç»Ÿï¼Œä¾‹å¦‚è¢«å…¥ä¾µçš„æœºå™¨æˆ–å¼€æ”¾ä»£ç†ã€‚</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">DNSBL çš„å·¥ä½œåŸç†</p>
<p>DNSBL æœåŠ¡å™¨é€šè¿‡å“åº”ç‰¹æ®Šæ ¼å¼çš„ DNS æŸ¥è¯¢æ¥å·¥ä½œã€‚å½“ BunkerWeb æ£€æŸ¥ä¸€ä¸ª IP åœ°å€æ—¶ï¼Œå®ƒä¼šåè½¬è¯¥ IP å¹¶é™„åŠ  DNSBL åŸŸåã€‚å¦‚æœç”Ÿæˆçš„ DNS æŸ¥è¯¢è¿”å›â€œæˆåŠŸâ€å“åº”ï¼Œåˆ™è¯¥ IP è¢«è§†ä¸ºå·²åˆ—å…¥é»‘åå•ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">æ€§èƒ½è€ƒè™‘</p>
<p>è™½ç„¶ BunkerWeb ä¼˜åŒ–äº† DNSBL æŸ¥æ‰¾çš„æ€§èƒ½ï¼Œä½†æ·»åŠ å¤§é‡ DNSBL æœåŠ¡å™¨å¯èƒ½ä¼šå½±å“å“åº”æ—¶é—´ã€‚ä»å‡ ä¸ªä¿¡èª‰è‰¯å¥½çš„ DNSBL æœåŠ¡å™¨å¼€å§‹ï¼Œå¹¶åœ¨æ·»åŠ æ›´å¤šæœåŠ¡å™¨ä¹‹å‰ç›‘æ§æ€§èƒ½ã€‚</p>
</div>
<h3 id="_49">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="18:5"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><input id="__tabbed_18_3" name="__tabbed_18" type="radio" /><input id="__tabbed_18_4" name="__tabbed_18" type="radio" /><input id="__tabbed_18_5" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_18_2">æœ€å°é…ç½®</label><label for="__tabbed_18_3">æ’é™¤å—ä¿¡ä»»çš„ IP</label><label for="__tabbed_18_4">ä½¿ç”¨è¿œç¨‹ URL</label><label for="__tabbed_18_5">ä½¿ç”¨æœ¬åœ°æ–‡ä»¶</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨é»˜è®¤ DNSBL æœåŠ¡å™¨çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bl.blocklist.de</span><span class="nv"> </span><span class="s">sbl.spamhaus.org</span><span class="nv"> </span><span class="s">xbl.spamhaus.org&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªä¸“æ³¨äºæœ€å¯é çš„ DNSBL æœåŠ¡çš„æœ€å°é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
</code></pre></div>
<p>æ­¤é…ç½®ä»…ä½¿ç”¨ï¼š</p>
<ul>
<li><strong>zen.spamhaus.org</strong>ï¼šSpamhaus çš„ç»„åˆåˆ—è¡¨é€šå¸¸è¢«è®¤ä¸ºæ˜¯ç‹¬ç«‹çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå®ƒè¦†ç›–èŒƒå›´å¹¿ï¼Œå‡†ç¡®æ€§é«˜ã€‚å®ƒåœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­ç»“åˆäº† SBLã€XBL å’Œ PBL åˆ—è¡¨ï¼Œä½¿å…¶é«˜æ•ˆè€Œå…¨é¢ã€‚</li>
</ul>
</div>
<div class="tabbed-block">
<p>æ‚¨å¯ä»¥ä½¿ç”¨é™æ€å€¼å’Œ/æˆ–è¿œç¨‹æ–‡ä»¶ä» DNSBL æ£€æŸ¥ä¸­æ’é™¤ç‰¹å®šçš„å®¢æˆ·ç«¯ï¼š</p>
<ul>
<li><code>DNSBL_IGNORE_IP</code>ï¼šæ·»åŠ ä»¥ç©ºæ ¼åˆ†éš”çš„ IP å’Œ CIDR èŒƒå›´ã€‚ç¤ºä¾‹ï¼š<code>192.0.2.10 203.0.113.0/24 2001:db8::/32</code>ã€‚</li>
<li><code>DNSBL_IGNORE_IP_URLS</code>ï¼šæä¾› URLï¼Œå…¶å†…å®¹æ¯è¡Œåˆ—å‡ºä¸€ä¸ª IP/CIDRã€‚ä»¥ <code>#</code> æˆ– <code>;</code> å¼€å¤´çš„æ³¨é‡Šå°†è¢«å¿½ç•¥ã€‚é‡å¤çš„æ¡ç›®å°†è¢«å»é‡ã€‚</li>
</ul>
<p>å½“ä¼ å…¥çš„å®¢æˆ·ç«¯ IP åŒ¹é…å¿½ç•¥åˆ—è¡¨æ—¶ï¼ŒBunkerWeb ä¼šè·³è¿‡ DNSBL æŸ¥æ‰¾å¹¶å°†ç»“æœç¼“å­˜ä¸ºâ€œokâ€ï¼Œä»¥ä¾¿åç»­è¯·æ±‚æ›´å¿«ã€‚</p>
</div>
<div class="tabbed-block">
<p><code>dnsbl-download</code> ä½œä¸šæ¯å°æ—¶ä¸‹è½½å¹¶ç¼“å­˜å¿½ç•¥çš„ IPï¼š</p>
<ul>
<li>åè®®ï¼š<code>https://</code>ã€<code>http://</code> å’Œæœ¬åœ° <code>file://</code> è·¯å¾„ã€‚</li>
<li>å¸¦æ ¡éªŒå’Œçš„æ¯ä¸ª URL ç¼“å­˜å¯é˜²æ­¢å†—ä½™ä¸‹è½½ï¼ˆ1 å°æ—¶å®½é™æœŸï¼‰ã€‚</li>
<li>æ¯ä¸ªæœåŠ¡çš„åˆå¹¶æ–‡ä»¶ï¼š<code>/var/cache/bunkerweb/dnsbl/&lt;service&gt;/IGNORE_IP.list</code>ã€‚</li>
<li>åœ¨å¯åŠ¨æ—¶åŠ è½½å¹¶ä¸ <code>DNSBL_IGNORE_IP</code> åˆå¹¶ã€‚</li>
</ul>
<p>ç»“åˆé™æ€å’Œ URL æºçš„ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.0.0.0/8</span><span class="nv"> </span><span class="s">192.168.0.0/16</span><span class="nv"> </span><span class="s">2001:db8::/32&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/allow-cidrs.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/dnsbl/ignore.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ <code>file://</code> URL ä»æœ¬åœ°æ–‡ä»¶åŠ è½½å¿½ç•¥çš„ IPï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///etc/bunkerweb/dnsbl/ignore.txt</span><span class="nv"> </span><span class="s">file:///opt/data/allow-cidrs.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="database">Database</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>æ•°æ®åº“æ’ä»¶é€šè¿‡å¯ç”¨é…ç½®æ•°æ®ã€æ—¥å¿—å’Œå…¶ä»–åŸºæœ¬ä¿¡æ¯çš„é›†ä¸­å­˜å‚¨å’Œç®¡ç†ï¼Œä¸º BunkerWeb æä¾›äº†å¼ºå¤§çš„æ•°æ®åº“é›†æˆã€‚</p>
<p>è¿™ä¸ªæ ¸å¿ƒç»„ä»¶æ”¯æŒå¤šç§æ•°æ®åº“å¼•æ“ï¼ŒåŒ…æ‹¬ SQLiteã€PostgreSQLã€MySQL/MariaDB å’Œ Oracleï¼Œè®©æ‚¨å¯ä»¥é€‰æ‹©æœ€é€‚åˆæ‚¨çš„ç¯å¢ƒå’Œéœ€æ±‚çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>BunkerWeb ä½¿ç”¨ SQLAlchemy æ ¼å¼æä¾›çš„ URI è¿æ¥åˆ°æ‚¨é…ç½®çš„æ•°æ®åº“ã€‚</li>
<li>å…³é”®é…ç½®æ•°æ®ã€è¿è¡Œæ—¶ä¿¡æ¯å’Œä½œä¸šæ—¥å¿—éƒ½å®‰å…¨åœ°å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚</li>
<li>è‡ªåŠ¨ç»´æŠ¤æµç¨‹é€šè¿‡ç®¡ç†æ•°æ®å¢é•¿å’Œæ¸…ç†å¤šä½™è®°å½•æ¥ä¼˜åŒ–æ‚¨çš„æ•°æ®åº“ã€‚</li>
<li>å¯¹äºé«˜å¯ç”¨æ€§åœºæ™¯ï¼Œæ‚¨å¯ä»¥é…ç½®ä¸€ä¸ªåªè¯»æ•°æ®åº“ URIï¼Œå®ƒæ—¢å¯ä»¥ä½œä¸ºæ•…éšœè½¬ç§»ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåˆ†æµè¯»å–æ“ä½œçš„æ–¹æ³•ã€‚</li>
<li>æ•°æ®åº“æ“ä½œä¼šæ ¹æ®æ‚¨æŒ‡å®šçš„æ—¥å¿—çº§åˆ«è¿›è¡Œè®°å½•ï¼Œä¸ºæ•°æ®åº“äº¤äº’æä¾›é€‚å½“çš„å¯è§æ€§ã€‚</li>
</ol>
<h3 id="_50">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨æ•°æ®åº“åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é€‰æ‹©ä¸€ä¸ªæ•°æ®åº“å¼•æ“ï¼š</strong> æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œä» SQLiteï¼ˆé»˜è®¤ï¼‰ã€PostgreSQLã€MySQL/MariaDB æˆ– Oracle ä¸­é€‰æ‹©ã€‚</li>
<li><strong>é…ç½®æ•°æ®åº“ URIï¼š</strong> ä½¿ç”¨ SQLAlchemy æ ¼å¼è®¾ç½® <code>DATABASE_URI</code> ä»¥è¿æ¥åˆ°æ‚¨çš„ä¸»æ•°æ®åº“ã€‚</li>
<li><strong>å¯é€‰çš„åªè¯»æ•°æ®åº“ï¼š</strong> å¯¹äºé«˜å¯ç”¨æ€§è®¾ç½®ï¼Œé…ç½®ä¸€ä¸ª <code>DATABASE_URI_READONLY</code> ä½œä¸ºåå¤‡æˆ–ç”¨äºè¯»å–æ“ä½œã€‚</li>
</ol>
<h3 id="_51">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DATABASE_URI</code></td>
<td><code>sqlite:////var/lib/bunkerweb/db.sqlite3</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ•°æ®åº“ URIï¼š</strong> SQLAlchemy æ ¼å¼çš„ä¸»æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td><code>DATABASE_URI_READONLY</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>åªè¯»æ•°æ®åº“ URIï¼š</strong> ç”¨äºåªè¯»æ“ä½œæˆ–åœ¨ä¸»æ•°æ®åº“å®•æœºæ—¶ä½œä¸ºæ•…éšœè½¬ç§»çš„å¯é€‰æ•°æ®åº“ã€‚</td>
</tr>
<tr>
<td><code>DATABASE_LOG_LEVEL</code></td>
<td><code>warning</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ—¥å¿—çº§åˆ«ï¼š</strong> æ•°æ®åº“æ—¥å¿—çš„è¯¦ç»†ç¨‹åº¦ã€‚é€‰é¡¹ï¼š<code>debug</code>ã€<code>info</code>ã€<code>warn</code>ã€<code>warning</code> æˆ– <code>error</code>ã€‚</td>
</tr>
<tr>
<td><code>DATABASE_MAX_JOBS_RUNS</code></td>
<td><code>10000</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æœ€å¤§ä½œä¸šè¿è¡Œæ¬¡æ•°ï¼š</strong> åœ¨è‡ªåŠ¨æ¸…ç†ä¹‹å‰ï¼Œæ•°æ®åº“ä¸­ä¿ç•™çš„ä½œä¸šæ‰§è¡Œè®°å½•çš„æœ€å¤§æ•°é‡ã€‚</td>
</tr>
<tr>
<td><code>DATABASE_MAX_SESSION_AGE_DAYS</code></td>
<td><code>14</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ä¼šè¯ä¿ç•™ï¼š</strong> UI ç”¨æˆ·ä¼šè¯åœ¨è‡ªåŠ¨æ¸…ç†å‰å…è®¸å­˜åœ¨çš„æœ€å¤§å¤©æ•°ã€‚</td>
</tr>
</tbody>
</table>
<p>!!! tip "æ•°æ®åº“é€‰æ‹©" - <strong>SQLite</strong>ï¼ˆé»˜è®¤ï¼‰ï¼šç”±äºå…¶ç®€å•å’ŒåŸºäºæ–‡ä»¶çš„ç‰¹æ€§ï¼Œéå¸¸é€‚åˆå•èŠ‚ç‚¹éƒ¨ç½²æˆ–æµ‹è¯•ç¯å¢ƒã€‚- <strong>PostgreSQL</strong>ï¼šç”±äºå…¶å¥å£®æ€§å’Œå¹¶å‘æ”¯æŒï¼Œæ¨èç”¨äºå…·æœ‰å¤šä¸ª BunkerWeb å®ä¾‹çš„ç”Ÿäº§ç¯å¢ƒã€‚- <strong>MySQL/MariaDB</strong>ï¼šæ˜¯ PostgreSQL çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ï¼Œå…·æœ‰ç±»ä¼¼çš„ç”Ÿäº§çº§åŠŸèƒ½ã€‚- <strong>Oracle</strong>ï¼šé€‚ç”¨äº Oracle å·²ç»æ˜¯æ ‡å‡†æ•°æ®åº“å¹³å°çš„ä¼ä¸šç¯å¢ƒã€‚</p>
<div class="admonition info">
<p class="admonition-title">SQLAlchemy URI æ ¼å¼</p>
<p>æ•°æ®åº“ URI éµå¾ª SQLAlchemy æ ¼å¼ï¼š</p>
<ul>
<li>SQLite: <code>sqlite:////path/to/database.sqlite3</code></li>
<li>PostgreSQL: <code>postgresql://username:password@hostname:port/database</code></li>
<li>MySQL/MariaDB: <code>mysql://username:password@hostname:port/database</code> æˆ– <code>mariadb://username:password@hostname:port/database</code></li>
<li>Oracle: <code>oracle://username:password@hostname:port/database</code></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">æ•°æ®åº“ç»´æŠ¤</p>
<p>è¯¥æ’ä»¶ä¼šè‡ªåŠ¨è¿è¡Œæ¯æ—¥ç»´æŠ¤ä½œä¸šï¼š</p>
</div>
<ul>
<li><strong>æ¸…ç†å¤šä½™çš„ä½œä¸šè¿è¡Œè®°å½•ï¼š</strong> æ ¹æ® <code>DATABASE_MAX_JOBS_RUNS</code> é™åˆ¶æ¸…é™¤è¶…å‡ºçš„å†å²ã€‚</li>
<li><strong>æ¸…ç†è¿‡æœŸçš„ UI ä¼šè¯ï¼š</strong> åˆ é™¤è¶…è¿‡ <code>DATABASE_MAX_SESSION_AGE_DAYS</code> çš„ UI ç”¨æˆ·ä¼šè¯ã€‚</li>
</ul>
<p>è¿™äº›ä½œä¸šå¯ä»¥é˜²æ­¢æ•°æ®åº“æ— é™å¢é•¿ï¼ŒåŒæ—¶ä¿ç•™æœ‰ä»·å€¼çš„è¿è¡Œå†å²ã€‚</p>
<h2 id="easy-resolve-pro">Easy Resolve <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides a simpler way to fix false positives in reports.</p>
<h2 id="errors">Errors</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>é”™è¯¯æ’ä»¶ä¸ºæ‚¨çš„ç½‘ç«™æä¾›äº†å¯å®šåˆ¶çš„é”™è¯¯å¤„ç†ï¼Œè®©æ‚¨å¯ä»¥é…ç½® HTTP é”™è¯¯å“åº”å¦‚ä½•å‘ç”¨æˆ·æ˜¾ç¤ºã€‚æ­¤åŠŸèƒ½é€šè¿‡å‘ˆç°ç”¨æˆ·å‹å¥½ã€å¸¦æœ‰å“ç‰Œæ ‡è¯†çš„é”™è¯¯é¡µé¢ï¼Œåœ¨é”™è¯¯åœºæ™¯ä¸­å¢å¼ºäº†ç”¨æˆ·ä½“éªŒï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºé»˜è®¤çš„æœåŠ¡å™¨é”™è¯¯é¡µé¢ï¼Œåè€…å¯¹è®¿é—®è€…æ¥è¯´å¯èƒ½æ˜¾å¾—æŠ€æœ¯æ€§ä¸”ä»¤äººå›°æƒ‘ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯é‡åˆ° HTTP é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œ400ã€404 æˆ– 500ï¼‰æ—¶ï¼ŒBunkerWeb ä¼šæ‹¦æˆªé”™è¯¯å“åº”ã€‚</li>
<li>BunkerWeb ä¼šæ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰çš„ã€ä¸“ä¸šè®¾è®¡çš„é”™è¯¯é¡µé¢ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºé»˜è®¤çš„é”™è¯¯é¡µé¢ã€‚</li>
<li>é”™è¯¯é¡µé¢å¯ä»¥é€šè¿‡æ‚¨çš„é…ç½®å®Œå…¨å®šåˆ¶ï¼Œå…è®¸æ‚¨ä¸ºç‰¹å®šçš„é”™è¯¯ä»£ç æŒ‡å®šè‡ªå®šä¹‰é¡µé¢ã€‚<strong>è‡ªå®šä¹‰é”™è¯¯é¡µé¢æ–‡ä»¶å¿…é¡»æ”¾ç½®åœ¨ç”± <code>ROOT_FOLDER</code> è®¾ç½®å®šä¹‰çš„ç›®å½•ä¸­ï¼ˆè¯·å‚é˜…æ‚é¡¹æ’ä»¶æ–‡æ¡£ï¼‰ã€‚</strong><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>ROOT_FOLDER</code> æ˜¯ <code>/var/www/html/{server_name}</code>ï¼ˆå…¶ä¸­ <code>{server_name}</code> ä¼šè¢«å®é™…çš„æœåŠ¡å™¨åç§°æ›¿æ¢ï¼‰ã€‚</li>
<li>åœ¨å¤šç«™ç‚¹æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªç«™ç‚¹éƒ½å¯ä»¥æœ‰è‡ªå·±çš„ <code>ROOT_FOLDER</code>ï¼Œå› æ­¤è‡ªå®šä¹‰é”™è¯¯é¡µé¢å¿…é¡»æ”¾ç½®åœ¨æ¯ä¸ªç«™ç‚¹çš„ç›¸åº”ç›®å½•ä¸­ã€‚</li>
</ul>
</li>
<li>é»˜è®¤çš„é”™è¯¯é¡µé¢æä¾›äº†æ¸…æ™°çš„è§£é‡Šï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£å‡ºäº†ä»€ä¹ˆé—®é¢˜ä»¥åŠä»–ä»¬æ¥ä¸‹æ¥å¯ä»¥åšä»€ä¹ˆã€‚</li>
</ol>
<h3 id="_52">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨é”™è¯¯åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å®šä¹‰è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼š</strong> ä½¿ç”¨ <code>ERRORS</code> è®¾ç½®æŒ‡å®šå“ªäº› HTTP é”™è¯¯ä»£ç åº”ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯é¡µé¢ã€‚è‡ªå®šä¹‰é”™è¯¯é¡µé¢æ–‡ä»¶å¿…é¡»ä½äºä¸ºè¯¥ç«™ç‚¹æŒ‡å®šçš„ <code>ROOT_FOLDER</code> è®¾ç½®çš„æ–‡ä»¶å¤¹ä¸­ã€‚åœ¨å¤šç«™ç‚¹æ¨¡å¼ä¸‹ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªç«™ç‚¹/æœåŠ¡å™¨éƒ½å¯ä»¥æœ‰è‡ªå·±çš„è‡ªå®šä¹‰é”™è¯¯é¡µé¢æ–‡ä»¶å¤¹ã€‚</li>
<li><strong>é…ç½®æ‚¨çš„é”™è¯¯é¡µé¢ï¼š</strong> å¯¹äºæ¯ä¸ªé”™è¯¯ä»£ç ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ BunkerWeb é”™è¯¯é¡µé¢æˆ–æä¾›æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰ HTML é¡µé¢ï¼ˆæ”¾ç½®åœ¨ç›¸åº”çš„ <code>ROOT_FOLDER</code> ä¸­ï¼‰ã€‚</li>
<li><strong>è®¾ç½®æ‹¦æˆªçš„é”™è¯¯ä»£ç ï¼š</strong> ä½¿ç”¨ <code>INTERCEPTED_ERROR_CODES</code> è®¾ç½®é€‰æ‹©å“ªäº›é”™è¯¯ä»£ç åº”å§‹ç»ˆç”± BunkerWeb å¤„ç†ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œé”™è¯¯å¤„ç†ä¼šè‡ªåŠ¨å¯¹æ‰€æœ‰æŒ‡å®šçš„é”™è¯¯ä»£ç è¿›è¡Œã€‚</li>
</ol>
<h3 id="_53">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ERRORS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼š</strong> ä½¿ç”¨ <code>ERROR_CODE=/path/to/file.html</code> çš„æ ¼å¼å°†ç‰¹å®šçš„é”™è¯¯ä»£ç æ˜ å°„åˆ°è‡ªå®šä¹‰ HTML æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td><code>INTERCEPTED_ERROR_CODES</code></td>
<td><code>400 401 403 404 405 413 429 500 501 502 503 504</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ‹¦æˆªçš„é”™è¯¯ï¼š</strong> å½“æœªæŒ‡å®šè‡ªå®šä¹‰é¡µé¢æ—¶ï¼ŒBunkerWeb åº”ä½¿ç”¨å…¶é»˜è®¤é”™è¯¯é¡µé¢å¤„ç†çš„ HTTP é”™è¯¯ä»£ç åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">é”™è¯¯é¡µé¢è®¾è®¡</p>
<p>é»˜è®¤çš„ BunkerWeb é”™è¯¯é¡µé¢æ—¨åœ¨æä¾›ä¿¡æ¯ã€ç”¨æˆ·å‹å¥½ä¸”å¤–è§‚ä¸“ä¸šã€‚å®ƒä»¬åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¸…æ™°çš„é”™è¯¯æè¿°</li>
<li>å…³äºå¯èƒ½å¯¼è‡´é”™è¯¯åŸå› çš„ä¿¡æ¯</li>
<li>å»ºè®®ç”¨æˆ·è§£å†³é—®é¢˜çš„æ“ä½œ</li>
<li>å¸®åŠ©ç”¨æˆ·äº†è§£é—®é¢˜æ˜¯å‡ºåœ¨å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯çš„è§†è§‰æŒ‡ç¤ºå™¨</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">é”™è¯¯ç±»å‹</p>
<p>é”™è¯¯ä»£ç æŒ‰ç±»å‹åˆ†ç±»ï¼š</p>
<ul>
<li><strong>4xx é”™è¯¯ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼š</strong> è¿™äº›è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚å­˜åœ¨é—®é¢˜ï¼Œä¾‹å¦‚è¯•å›¾è®¿é—®ä¸å­˜åœ¨çš„é¡µé¢æˆ–ç¼ºå°‘é€‚å½“çš„èº«ä»½éªŒè¯ã€‚</li>
<li><strong>5xx é”™è¯¯ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰ï¼š</strong> è¿™äº›è¡¨ç¤ºæœåŠ¡å™¨æ— æ³•æ»¡è¶³æœ‰æ•ˆè¯·æ±‚ï¼Œä¾‹å¦‚å†…éƒ¨æœåŠ¡å™¨é”™è¯¯æˆ–æš‚æ—¶ä¸å¯ç”¨ã€‚</li>
</ul>
</div>
<h3 id="_54">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="19:3"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">é»˜è®¤é”™è¯¯å¤„ç†</label><label for="__tabbed_19_2">è‡ªå®šä¹‰é”™è¯¯é¡µé¢</label><label for="__tabbed_19_3">é€‰æ‹©æ€§é”™è¯¯å¤„ç†</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>è®© BunkerWeb ä½¿ç”¨å…¶é»˜è®¤çš„é”™è¯¯é¡µé¢å¤„ç†å¸¸è§çš„é”™è¯¯ä»£ç ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºç‰¹å®šçš„é”™è¯¯ä»£ç ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404=/custom/404.html</span><span class="nv"> </span><span class="s">500=/custom/500.html&quot;</span>
<span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä»…ä½¿ç”¨ BunkerWeb å¤„ç†ç‰¹å®šçš„é”™è¯¯ä»£ç ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404</span><span class="nv"> </span><span class="s">500&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="greylist">Greylist</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Greylist æ’ä»¶æä¾›äº†ä¸€ç§çµæ´»çš„å®‰å…¨æ–¹æ³•ï¼Œå…è®¸è®¿é—®è€…è®¿é—®ï¼ŒåŒæ—¶ä»ç„¶ä¿æŒå¿…è¦çš„å®‰å…¨åŠŸèƒ½ã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„<a href="#blacklist">é»‘åå•</a>/<a href="#whitelist">ç™½åå•</a>æ–¹æ³•â€”â€”å®Œå…¨é˜»æ­¢æˆ–å…è®¸è®¿é—®â€”â€”ä¸åŒï¼Œç°åå•é€šè¿‡æˆäºˆæŸäº›è®¿é—®è€…è®¿é—®æƒé™ï¼ŒåŒæ—¶ä»ç„¶å¯¹ä»–ä»¬è¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œåˆ›é€ äº†ä¸€ä¸ªä¸­é—´åœ°å¸¦ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æ‚¨å®šä¹‰äº†è¦è¢«åˆ—å…¥ç°åå•çš„è®¿é—®è€…çš„æ ‡å‡†ï¼ˆ<em>IP åœ°å€ã€ç½‘ç»œã€rDNSã€ASNã€ç”¨æˆ·ä»£ç†æˆ– URI æ¨¡å¼</em>ï¼‰ã€‚</li>
<li>å½“è®¿é—®è€…åŒ¹é…è¿™äº›æ ‡å‡†ä¸­çš„ä»»ä½•ä¸€ä¸ªæ—¶ï¼Œä»–ä»¬å°†è¢«æˆäºˆè®¿é—®æ‚¨ç½‘ç«™çš„æƒé™ï¼Œè€Œå…¶ä»–å®‰å…¨åŠŸèƒ½ä»ç„¶æœ‰æ•ˆã€‚</li>
<li>å¦‚æœè®¿é—®è€…ä¸åŒ¹é…ä»»ä½•ç°åå•æ ‡å‡†ï¼Œä»–ä»¬çš„è®¿é—®å°†è¢«æ‹’ç»ã€‚</li>
<li>ç°åå•æ•°æ®å¯ä»¥å®šæœŸä»å¤–éƒ¨æ¥æºè‡ªåŠ¨æ›´æ–°ã€‚</li>
</ol>
<h3 id="_55">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ç°åå•åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> ç°åå•åŠŸèƒ½é»˜è®¤ç¦ç”¨ã€‚å°† <code>USE_GREYLIST</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½®ç°åå•è§„åˆ™ï¼š</strong> å®šä¹‰å“ªäº› IPã€ç½‘ç»œã€rDNS æ¨¡å¼ã€ASNã€ç”¨æˆ·ä»£ç†æˆ– URI åº”è¢«åˆ—å…¥ç°åå•ã€‚</li>
<li><strong>æ·»åŠ å¤–éƒ¨æºï¼š</strong> å¯é€‰åœ°ï¼Œé…ç½®ç”¨äºè‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ç°åå•æ•°æ®çš„ URLã€‚</li>
<li><strong>ç›‘æ§è®¿é—®ï¼š</strong> æŸ¥çœ‹ <a href="../web-ui/">web UI</a> ä»¥æŸ¥çœ‹å“ªäº›è®¿é—®è€…è¢«å…è®¸æˆ–æ‹’ç»ã€‚</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">è®¿é—®æ§åˆ¶è¡Œä¸º</p>
<p>å½“ä½¿ç”¨ <code>USE_GREYLIST</code> è®¾ç½®ä¸º <code>yes</code> å¯ç”¨ç°åå•åŠŸèƒ½æ—¶ï¼š</p>
<ol>
<li><strong>ç°åå•ä¸­çš„è®¿é—®è€…ï¼š</strong> å…è®¸è®¿é—®ï¼Œä½†ä»ä¼šå—åˆ°æ‰€æœ‰å®‰å…¨æ£€æŸ¥ã€‚</li>
<li><strong>éç°åå•ä¸­çš„è®¿é—®è€…ï¼š</strong> å®Œå…¨æ‹’ç»è®¿é—®ã€‚</li>
</ol>
</div>
<div class="admonition info">
<p class="admonition-title">æµæ¨¡å¼</p>
<p>å½“ä½¿ç”¨æµæ¨¡å¼æ—¶ï¼Œåªä¼šæ‰§è¡Œ IPã€rDNS å’Œ ASN æ£€æŸ¥ã€‚</p>
</div>
<h3 id="_56">é…ç½®è®¾ç½®</h3>
<p><strong>é€šç”¨</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GREYLIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ç°åå•ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ç°åå•ã€‚</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="20:5"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><input id="__tabbed_20_3" name="__tabbed_20" type="radio" /><input id="__tabbed_20_4" name="__tabbed_20" type="radio" /><input id="__tabbed_20_5" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">IP åœ°å€</label><label for="__tabbed_20_2">åå‘ DNS</label><label for="__tabbed_20_3">ASN</label><label for="__tabbed_20_4">ç”¨æˆ·ä»£ç†</label><label for="__tabbed_20_5">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> æ ¹æ®è®¿é—®è€…çš„ IP åœ°å€æˆ–ç½‘ç»œå°†è®¿é—®è€…åˆ—å…¥ç°åå•ã€‚è¿™äº›è®¿é—®è€…å¯ä»¥è·å¾—è®¿é—®æƒé™ï¼Œä½†ä»ä¼šå—åˆ°å®‰å…¨æ£€æŸ¥ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP ç°åå•ï¼š</strong> è¦åˆ—å…¥ç°åå•çš„ IP åœ°å€æˆ–ç½‘ç»œï¼ˆCIDR è¡¨ç¤ºæ³•ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>GREYLIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP ç°åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç°åå•çš„ IP åœ°å€æˆ–ç½‘ç»œçš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> æ ¹æ®è®¿é—®è€…çš„åŸŸåï¼ˆåå‘ï¼‰å°†è®¿é—®è€…åˆ—å…¥ç°åå•ã€‚å¯¹äºå…è®¸æ¥è‡ªç‰¹å®šç»„ç»‡æˆ–ç½‘ç»œçš„è®¿é—®è€…æœ‰æ¡ä»¶åœ°è®¿é—®éå¸¸æœ‰ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS ç°åå•ï¼š</strong> è¦åˆ—å…¥ç°åå•çš„åå‘ DNS åç¼€åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä»…é™ rDNS å…¨å±€ï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œä»…å¯¹å…¨å±€ IP åœ°å€æ‰§è¡Œ rDNS ç°åå•æ£€æŸ¥ã€‚</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS ç°åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç°åå•çš„åå‘ DNS åç¼€çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> ä½¿ç”¨è‡ªæ²»ç³»ç»Ÿå·å°†æ¥è‡ªç‰¹å®šç½‘ç»œæä¾›å•†çš„è®¿é—®è€…åˆ—å…¥ç°åå•ã€‚ASN æ ‡è¯†ä¸€ä¸ª IP å±äºå“ªä¸ªæä¾›å•†æˆ–ç»„ç»‡ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN ç°åå•ï¼š</strong> è¦åˆ—å…¥ç°åå•çš„è‡ªæ²»ç³»ç»Ÿå·åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>GREYLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN ç°åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç°åå•çš„ ASN çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> æ ¹æ®è®¿é—®è€…å£°ç§°ä½¿ç”¨çš„æµè§ˆå™¨æˆ–å·¥å…·å°†è®¿é—®è€…åˆ—å…¥ç°åå•ã€‚è¿™å…è®¸å¯¹ç‰¹å®šå·¥å…·è¿›è¡Œå—æ§è®¿é—®ï¼ŒåŒæ—¶ä¿æŒå®‰å…¨æ£€æŸ¥ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†ç°åå•ï¼š</strong> è¦åˆ—å…¥ç°åå•çš„ç”¨æˆ·ä»£ç†æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>GREYLIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†ç°åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç°åå•çš„ç”¨æˆ·ä»£ç†æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>è¿™æ˜¯åšä»€ä¹ˆçš„ï¼š</strong> å°†å¯¹æ‚¨ç½‘ç«™ä¸Šç‰¹å®š URL çš„è¯·æ±‚åˆ—å…¥ç°åå•ã€‚è¿™å…è®¸æœ‰æ¡ä»¶åœ°è®¿é—®æŸäº›ç«¯ç‚¹ï¼ŒåŒæ—¶ä¿æŒå®‰å…¨æ£€æŸ¥ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI ç°åå•ï¼š</strong> è¦åˆ—å…¥ç°åå•çš„ URI æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>GREYLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI ç°åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç°åå•çš„ URI æ¨¡å¼çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">URL æ ¼å¼æ”¯æŒ</p>
<p>æ‰€æœ‰ <code>*_URLS</code> è®¾ç½®éƒ½æ”¯æŒ HTTP/HTTPS URL ä»¥åŠä½¿ç”¨ <code>file:///</code> å‰ç¼€çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚ä½¿ç”¨ <code>http://user:pass@url</code> æ ¼å¼æ”¯æŒåŸºæœ¬èº«ä»½éªŒè¯ã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">å®šæœŸæ›´æ–°</p>
<p>æ¥è‡ª URL çš„ç°åå•ä¼šæ¯å°æ—¶è‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ï¼Œä»¥ç¡®ä¿æ‚¨çš„ä¿æŠ¤å§‹ç»ˆä¸æœ€æ–°çš„å—ä¿¡ä»»æ¥æºä¿æŒåŒæ­¥ã€‚</p>
</div>
<h3 id="_57">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="21:4"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><input id="__tabbed_21_2" name="__tabbed_21" type="radio" /><input id="__tabbed_21_3" name="__tabbed_21" type="radio" /><input id="__tabbed_21_4" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_21_2">é«˜çº§é…ç½®</label><label for="__tabbed_21_3">ä½¿ç”¨æœ¬åœ°æ–‡ä»¶</label><label for="__tabbed_21_4">é€‰æ‹©æ€§ API è®¿é—®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œå°†ç°åå•åº”ç”¨äºå…¬å¸çš„å†…éƒ¨ç½‘ç»œå’Œçˆ¬è™«ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">GREYLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)CompanyCrawler(?:\b)&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªæ›´å…¨é¢çš„é…ç½®ï¼Œå…·æœ‰å¤šä¸ªç°åå•æ ‡å‡†ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># å…¬å¸èµ„äº§å’Œæ‰¹å‡†çš„çˆ¬è™«</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">GREYLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.company.com</span><span class="nv"> </span><span class="s">.partner-company.org&quot;</span>
<span class="nt">GREYLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345</span><span class="nv"> </span><span class="s">67890&quot;</span><span class="w">  </span><span class="c1"># å…¬å¸å’Œåˆä½œä¼™ä¼´çš„ ASN</span>
<span class="nt">GREYLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)GoodBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)PartnerCrawler(?:\b)&quot;</span>
<span class="nt">GREYLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/&quot;</span>

<span class="c1"># å¤–éƒ¨å—ä¿¡ä»»çš„æ¥æº</span>
<span class="nt">GREYLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-networks.txt&quot;</span>
<span class="nt">GREYLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-crawlers.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ä½œä¸ºç°åå•çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/ip-greylist.txt&quot;</span>
<span class="nt">GREYLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/rdns-greylist.txt&quot;</span>
<span class="nt">GREYLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/asn-greylist.txt&quot;</span>
<span class="nt">GREYLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/user-agent-greylist.txt&quot;</span>
<span class="nt">GREYLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/uri-greylist.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…è®¸è®¿é—®ç‰¹å®š API ç«¯ç‚¹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/public/</span><span class="nv"> </span><span class="s">^/api/v1/status&quot;</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;203.0.113.0/24&quot;</span><span class="w">  </span><span class="c1"># å¤–éƒ¨åˆä½œä¼™ä¼´ç½‘ç»œ</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="gzip">Gzip</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>GZIP æ’ä»¶é€šè¿‡ä½¿ç”¨ GZIP ç®—æ³•å‹ç¼© HTTP å“åº”æ¥å¢å¼ºç½‘ç«™æ€§èƒ½ã€‚æ­¤åŠŸèƒ½é€šè¿‡åœ¨å°† Web å†…å®¹å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ä¹‹å‰å¯¹å…¶è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘äº†å¸¦å®½ä½¿ç”¨å¹¶ç¼©çŸ­äº†é¡µé¢åŠ è½½æ—¶é—´ï¼Œä»è€Œå®ç°äº†æ›´å¿«çš„äº¤ä»˜å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 id="_58">å·¥ä½œåŸç†</h3>
<ol>
<li>å½“å®¢æˆ·ç«¯ä»æ‚¨çš„ç½‘ç«™è¯·æ±‚å†…å®¹æ—¶ï¼ŒBunkerWeb ä¼šæ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒ GZIP å‹ç¼©ã€‚</li>
<li>å¦‚æœæ”¯æŒï¼ŒBunkerWeb ä¼šåœ¨æ‚¨é…ç½®çš„å‹ç¼©çº§åˆ«ä¸‹ä½¿ç”¨ GZIP ç®—æ³•å¯¹å“åº”è¿›è¡Œå‹ç¼©ã€‚</li>
<li>å‹ç¼©åçš„å†…å®¹ä¼šè¿åŒæŒ‡ç¤º GZIP å‹ç¼©çš„é€‚å½“æ ‡å¤´ä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯çš„æµè§ˆå™¨åœ¨å‘ˆç°å†…å®¹ä¹‹å‰ä¼šå¯¹å…¶è¿›è¡Œè§£å‹ç¼©ã€‚</li>
<li>å¸¦å®½ä½¿ç”¨é‡å’Œé¡µé¢åŠ è½½æ—¶é—´éƒ½å¾—åˆ°äº†å‡å°‘ï¼Œä»è€Œå¢å¼ºäº†ç½‘ç«™çš„æ•´ä½“æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</li>
</ol>
<h3 id="_59">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ GZIP å‹ç¼©åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> GZIP åŠŸèƒ½é»˜è®¤ç¦ç”¨ã€‚é€šè¿‡å°† <code>USE_GZIP</code> è®¾ç½®ä¸º <code>yes</code> æ¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½® MIME ç±»å‹ï¼š</strong> ä½¿ç”¨ <code>GZIP_TYPES</code> è®¾ç½®æŒ‡å®šåº”å‹ç¼©çš„å†…å®¹ç±»å‹ã€‚</li>
<li><strong>è®¾ç½®æœ€å°å¤§å°ï¼š</strong> ä½¿ç”¨ <code>GZIP_MIN_LENGTH</code> è®¾ç½®å®šä¹‰å‹ç¼©æ‰€éœ€çš„æœ€å°å“åº”å¤§å°ï¼Œä»¥é¿å…å‹ç¼©å°æ–‡ä»¶ã€‚</li>
<li><strong>é€‰æ‹©ä¸€ä¸ªå‹ç¼©çº§åˆ«ï¼š</strong> ä½¿ç”¨ <code>GZIP_COMP_LEVEL</code> è®¾ç½®åœ¨é€Ÿåº¦å’Œå‹ç¼©ç‡ä¹‹é—´é€‰æ‹©æ‚¨åå¥½çš„å¹³è¡¡ã€‚</li>
<li><strong>é…ç½®ä»£ç†è¯·æ±‚ï¼š</strong> ä½¿ç”¨ <code>GZIP_PROXIED</code> è®¾ç½®æŒ‡å®šåº”å‹ç¼©å“ªäº›ä»£ç†è¯·æ±‚ã€‚</li>
</ol>
<h3 id="_60">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GZIP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ GZIPï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ GZIP å‹ç¼©ã€‚</td>
</tr>
<tr>
<td><code>GZIP_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>MIME ç±»å‹ï¼š</strong> å°†ä½¿ç”¨ GZIP å‹ç¼©çš„å†…å®¹ç±»å‹åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>GZIP_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æœ€å°å¤§å°ï¼š</strong> åº”ç”¨ GZIP å‹ç¼©çš„æœ€å°å“åº”å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>GZIP_COMP_LEVEL</code></td>
<td><code>5</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å‹ç¼©çº§åˆ«ï¼š</strong> å‹ç¼©çº§åˆ«ä» 1ï¼ˆæœ€å°å‹ç¼©ï¼‰åˆ° 9ï¼ˆæœ€å¤§å‹ç¼©ï¼‰ã€‚è¾ƒé«˜çš„å€¼ä¼šä½¿ç”¨æ›´å¤šçš„ CPUã€‚</td>
</tr>
<tr>
<td><code>GZIP_PROXIED</code></td>
<td><code>no-cache no-store private expired auth</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä»£ç†è¯·æ±‚ï¼š</strong> æ ¹æ®å“åº”æ ‡å¤´æŒ‡å®šåº”å‹ç¼©å“ªäº›ä»£ç†è¯·æ±‚ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ä¼˜åŒ–å‹ç¼©çº§åˆ«</p>
<p>é»˜è®¤çš„å‹ç¼©çº§åˆ« (5) åœ¨å‹ç¼©ç‡å’Œ CPU ä½¿ç”¨ç‡ä¹‹é—´æä¾›äº†è‰¯å¥½çš„å¹³è¡¡ã€‚å¯¹äºé™æ€å†…å®¹æˆ–æœåŠ¡å™¨ CPU èµ„æºå……è¶³çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘å¢åŠ åˆ° 7-9 ä»¥è·å¾—æœ€å¤§å‹ç¼©ã€‚å¯¹äºåŠ¨æ€å†…å®¹æˆ– CPU èµ„æºæœ‰é™çš„æƒ…å†µï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ 1-3 ä»¥å®ç°æ›´å¿«çš„å‹ç¼©å’Œåˆç†çš„å°ºå¯¸å‡å°ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">æµè§ˆå™¨æ”¯æŒ</p>
<p>æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ GZIPï¼Œå¹¶ä¸”å¤šå¹´æ¥ä¸€ç›´æ˜¯ HTTP å“åº”çš„æ ‡å‡†å‹ç¼©æ–¹æ³•ï¼Œç¡®ä¿äº†åœ¨è®¾å¤‡å’Œæµè§ˆå™¨ä¹‹é—´å…·æœ‰å‡ºè‰²çš„å…¼å®¹æ€§ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">å‹ç¼©ä¸ CPU ä½¿ç”¨ç‡</p>
<p>è™½ç„¶ GZIP å‹ç¼©å‡å°‘äº†å¸¦å®½å¹¶ç¼©çŸ­äº†åŠ è½½æ—¶é—´ï¼Œä½†æ›´é«˜çš„å‹ç¼©çº§åˆ«ä¼šæ¶ˆè€—æ›´å¤šçš„ CPU èµ„æºã€‚å¯¹äºé«˜æµé‡çš„ç½‘ç«™ï¼Œè¯·åœ¨å‹ç¼©æ•ˆç‡å’ŒæœåŠ¡å™¨æ€§èƒ½ä¹‹é—´æ‰¾åˆ°é€‚å½“çš„å¹³è¡¡ã€‚</p>
</div>
<h3 id="_61">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="22:4"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><input id="__tabbed_22_2" name="__tabbed_22" type="radio" /><input id="__tabbed_22_3" name="__tabbed_22" type="radio" /><input id="__tabbed_22_4" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_22_2">æœ€å¤§å‹ç¼©</label><label for="__tabbed_22_3">å¹³è¡¡æ€§èƒ½</label><label for="__tabbed_22_4">ä»£ç†å†…å®¹ç„¦ç‚¹</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨é»˜è®¤è®¾ç½®å¯ç”¨ GZIP çš„æ ‡å‡†é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºå®ç°æœ€å¤§å‹ç¼©èŠ‚çœè€Œä¼˜åŒ–çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>åœ¨å‹ç¼©ç‡å’Œ CPU ä½¿ç”¨ç‡ä¹‹é—´å–å¾—å¹³è¡¡çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no-cache</span><span class="nv"> </span><span class="s">no-store</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">expired&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸“æ³¨äºæ­£ç¡®å¤„ç†ä»£ç†å†…å®¹å‹ç¼©çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="html-injection">HTML injection</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>HTML æ³¨å…¥æ’ä»¶å…è®¸æ‚¨æ— ç¼åœ°å°†è‡ªå®šä¹‰ HTML ä»£ç æ·»åŠ åˆ°æ‚¨ç½‘ç«™é¡µé¢çš„ <code>&lt;/body&gt;</code> æˆ– <code>&lt;/head&gt;</code> ç»“æŸæ ‡ç­¾ä¹‹å‰ã€‚æ­¤åŠŸèƒ½å¯¹äºæ·»åŠ åˆ†æè„šæœ¬ã€è·Ÿè¸ªåƒç´ ã€è‡ªå®šä¹‰ JavaScriptã€CSS æ ·å¼æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹é›†æˆéå¸¸æœ‰ç”¨ï¼Œè€Œæ— éœ€ä¿®æ”¹æ‚¨ç½‘ç«™çš„æºä»£ç ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“æ‚¨çš„ç½‘ç«™æä¾›é¡µé¢æœåŠ¡æ—¶ï¼ŒBunkerWeb ä¼šæ£€æŸ¥ HTML å“åº”ã€‚</li>
<li>å¦‚æœæ‚¨é…ç½®äº† body æ³¨å…¥ï¼ŒBunkerWeb ä¼šåœ¨ <code>&lt;/body&gt;</code> ç»“æŸæ ‡ç­¾ä¹‹å‰æ’å…¥æ‚¨çš„è‡ªå®šä¹‰ HTML ä»£ç ã€‚</li>
<li>å¦‚æœæ‚¨é…ç½®äº† head æ³¨å…¥ï¼ŒBunkerWeb ä¼šåœ¨ <code>&lt;/head&gt;</code> ç»“æŸæ ‡ç­¾ä¹‹å‰æ’å…¥æ‚¨çš„è‡ªå®šä¹‰ HTML ä»£ç ã€‚</li>
<li>æ­¤æ’å…¥æ“ä½œä¼šè‡ªåŠ¨åº”ç”¨äºæ‚¨ç½‘ç«™æä¾›çš„æ‰€æœ‰ HTML é¡µé¢ã€‚</li>
<li>è¿™ä½¿æ‚¨æ— éœ€ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç å³å¯æ·»åŠ è„šæœ¬ã€æ ·å¼æˆ–å…¶ä»–å…ƒç´ ã€‚</li>
</ol>
<h3 id="_62">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ HTML æ³¨å…¥åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å‡†å¤‡æ‚¨çš„è‡ªå®šä¹‰ HTMLï¼š</strong> å†³å®šè¦æ³¨å…¥åˆ°é¡µé¢ä¸­çš„ HTML ä»£ç ã€‚</li>
<li><strong>é€‰æ‹©æ³¨å…¥ä½ç½®ï¼š</strong> ç¡®å®šæ‚¨éœ€è¦åœ¨ <code>&lt;head&gt;</code> éƒ¨åˆ†ã€<code>&lt;body&gt;</code> éƒ¨åˆ†è¿˜æ˜¯ä¸¤è€…éƒ½æ³¨å…¥ä»£ç ã€‚</li>
<li><strong>é…ç½®è®¾ç½®ï¼š</strong> å°†æ‚¨çš„è‡ªå®šä¹‰ HTML æ·»åŠ åˆ°é€‚å½“çš„è®¾ç½®ä¸­ (<code>INJECT_HEAD</code> å’Œ/æˆ– <code>INJECT_BODY</code>)ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼ŒHTML å°†è‡ªåŠ¨æ³¨å…¥åˆ°æ‰€æœ‰æä¾›çš„ HTML é¡µé¢ä¸­ã€‚</li>
</ol>
<h3 id="_63">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INJECT_HEAD</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¤´éƒ¨ HTML ä»£ç ï¼š</strong> åœ¨ <code>&lt;/head&gt;</code> æ ‡ç­¾å‰æ³¨å…¥çš„ HTML ä»£ç ã€‚</td>
</tr>
<tr>
<td><code>INJECT_BODY</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¸»ä½“ HTML ä»£ç ï¼š</strong> åœ¨ <code>&lt;/body&gt;</code> æ ‡ç­¾å‰æ³¨å…¥çš„ HTML ä»£ç ã€‚</td>
</tr>
</tbody>
</table>
<p>!!! tip "æœ€ä½³å®è·µ" - å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œè¯·å°† JavaScript æ–‡ä»¶æ”¾åœ¨ body çš„æœ«å°¾ï¼Œä»¥é˜²æ­¢æ¸²æŸ“é˜»å¡ã€‚- å°† CSS å’Œå…³é”®çš„ JavaScript æ”¾åœ¨ head éƒ¨åˆ†ï¼Œä»¥é¿å…å‡ºç°æ— æ ·å¼å†…å®¹çš„é—ªçƒã€‚- è¯·è°¨æ…å¤„ç†å¯èƒ½ç ´åæ‚¨ç½‘ç«™åŠŸèƒ½çš„æ³¨å…¥å†…å®¹ã€‚</p>
<p>!!! info "å¸¸è§ç”¨ä¾‹" - æ·»åŠ åˆ†æè„šæœ¬ï¼ˆå¦‚ Google Analytics, Matomoï¼‰- é›†æˆèŠå¤©å°éƒ¨ä»¶æˆ–å®¢æˆ·æ”¯æŒå·¥å…· - ä¸ºè¥é”€æ´»åŠ¨æ·»åŠ è·Ÿè¸ªåƒç´  - æ·»åŠ è‡ªå®šä¹‰ CSS æ ·å¼æˆ– JavaScript åŠŸèƒ½ - æ— éœ€ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç å³å¯å¼•å…¥ç¬¬ä¸‰æ–¹åº“</p>
<h3 id="_64">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="23:4"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><input id="__tabbed_23_4" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">è°·æ­Œåˆ†æ</label><label for="__tabbed_23_2">è‡ªå®šä¹‰æ ·å¼</label><label for="__tabbed_23_3">å¤šä¸ªé›†æˆ</label><label for="__tabbed_23_4">Cookie åŒæ„æ¨ªå¹…</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>å°†è°·æ­Œåˆ†æè·Ÿè¸ªæ·»åŠ åˆ°æ‚¨çš„ç½‘ç«™ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;script</span><span class="nv"> </span><span class="s">async</span><span class="nv"> </span><span class="s">src=\&quot;https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\&quot;&gt;&lt;/script&gt;&lt;script&gt;window.dataLayer</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">window.dataLayer</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">[];function</span><span class="nv"> </span><span class="s">gtag(){dataLayer.push(arguments);}gtag(&#39;js&#39;,</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">Date());gtag(&#39;config&#39;,</span><span class="nv"> </span><span class="s">&#39;G-XXXXXXXXXX&#39;);&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å‘æ‚¨çš„ç½‘ç«™æ·»åŠ è‡ªå®šä¹‰ CSS æ ·å¼ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.custom-element</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">blue;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>åŒæ—¶æ·»åŠ è‡ªå®šä¹‰æ ·å¼å’Œ JavaScriptï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.notification-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f8f9fa;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;script</span><span class="nv"> </span><span class="s">src=\&quot;https://cdn.example.com/js/widget.js\&quot;&gt;&lt;/script&gt;&lt;script&gt;initializeWidget(&#39;your-api-key&#39;);&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>æ·»åŠ ä¸€ä¸ªç®€å•çš„ Cookie åŒæ„æ¨ªå¹…ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;.cookie-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">position:</span><span class="nv"> </span><span class="s">fixed;</span><span class="nv"> </span><span class="s">bottom:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">left:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">right:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f1f1f1;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">z-index:</span><span class="nv"> </span><span class="s">1000;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.cookie-banner</span><span class="nv"> </span><span class="s">button</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#4CAF50;</span><span class="nv"> </span><span class="s">border:</span><span class="nv"> </span><span class="s">none;</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">white;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">cursor:</span><span class="nv"> </span><span class="s">pointer;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;div</span><span class="nv"> </span><span class="s">id=\&quot;cookie-banner\&quot;</span><span class="nv"> </span><span class="s">class=\&quot;cookie-banner\&quot;&gt;æœ¬ç½‘ç«™ä½¿ç”¨</span><span class="nv"> </span><span class="s">Cookie</span><span class="nv"> </span><span class="s">ä»¥ç¡®ä¿æ‚¨è·å¾—æœ€ä½³ä½“éªŒã€‚</span><span class="nv"> </span><span class="s">&lt;button</span><span class="nv"> </span><span class="s">onclick=\&quot;acceptCookies()\&quot;&gt;æ¥å—&lt;/button&gt;&lt;/div&gt;&lt;script&gt;function</span><span class="nv"> </span><span class="s">acceptCookies()</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(&#39;cookie-banner&#39;).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">localStorage.setItem(&#39;cookies-accepted&#39;,</span><span class="nv"> </span><span class="s">&#39;true&#39;);</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">if(localStorage.getItem(&#39;cookies-accepted&#39;)</span><span class="nv"> </span><span class="s">===</span><span class="nv"> </span><span class="s">&#39;true&#39;)</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(&#39;cookie-banner&#39;).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">}&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="headers">Headers</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>è¯·æ±‚å¤´åœ¨ HTTP å®‰å…¨ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚è¯·æ±‚å¤´æ’ä»¶æä¾›äº†å¯¹æ ‡å‡†å’Œè‡ªå®šä¹‰ HTTP è¯·æ±‚å¤´çš„å¼ºå¤§ç®¡ç†åŠŸèƒ½â€”â€”å¢å¼ºäº†å®‰å…¨æ€§å’ŒåŠŸèƒ½æ€§ã€‚å®ƒåŠ¨æ€åœ°åº”ç”¨å®‰å…¨æªæ–½ï¼Œä¾‹å¦‚ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Strict-Transport-Security">HSTS</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy">CSP</a>ï¼ˆåŒ…æ‹¬æŠ¥å‘Šæ¨¡å¼ï¼‰å’Œè‡ªå®šä¹‰è¯·æ±‚å¤´æ³¨å…¥ï¼ŒåŒæ—¶é˜²æ­¢ä¿¡æ¯æ³„éœ²ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯ä»æ‚¨çš„ç½‘ç«™è¯·æ±‚å†…å®¹æ—¶ï¼ŒBunkerWeb ä¼šå¤„ç†å“åº”å¤´ã€‚</li>
<li>å®‰å…¨å¤´ä¼šæ ¹æ®æ‚¨çš„é…ç½®è¿›è¡Œåº”ç”¨ã€‚</li>
<li>å¯ä»¥æ·»åŠ è‡ªå®šä¹‰å¤´æ¥ä¸ºå®¢æˆ·ç«¯æä¾›é¢å¤–çš„ä¿¡æ¯æˆ–åŠŸèƒ½ã€‚</li>
<li>å¯èƒ½ä¼šæ³„éœ²æœåŠ¡å™¨ä¿¡æ¯çš„ä¸éœ€è¦çš„å¤´ä¼šè‡ªåŠ¨è¢«ç§»é™¤ã€‚</li>
<li>Cookie ä¼šæ ¹æ®æ‚¨çš„è®¾ç½®è¢«ä¿®æ”¹ä»¥åŒ…å«é€‚å½“çš„å®‰å…¨æ ‡å¿—ã€‚</li>
<li>éœ€è¦æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°ä¿ç•™æ¥è‡ªä¸Šæ¸¸æœåŠ¡å™¨çš„å¤´ã€‚</li>
</ol>
<h3 id="_65">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨è¯·æ±‚å¤´åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é…ç½®å®‰å…¨å¤´ï¼š</strong> ä¸ºå¸¸è§çš„è¯·æ±‚å¤´è®¾ç½®å€¼ã€‚</li>
<li><strong>æ·»åŠ è‡ªå®šä¹‰å¤´ï¼š</strong> ä½¿ç”¨ <code>CUSTOM_HEADER</code> è®¾ç½®å®šä¹‰ä»»ä½•è‡ªå®šä¹‰è¯·æ±‚å¤´ã€‚</li>
<li><strong>ç§»é™¤ä¸éœ€è¦çš„å¤´ï¼š</strong> ä½¿ç”¨ <code>REMOVE_HEADERS</code> ç¡®ä¿å¯èƒ½ä¼šæš´éœ²æœåŠ¡å™¨ç»†èŠ‚çš„è¯·æ±‚å¤´è¢«å‰¥ç¦»ã€‚</li>
<li><strong>è®¾ç½® Cookie å®‰å…¨ï¼š</strong> é€šè¿‡é…ç½® <code>COOKIE_FLAGS</code> å¹¶å°† <code>COOKIE_AUTO_SECURE_FLAG</code> è®¾ç½®ä¸º <code>yes</code> æ¥å¯ç”¨å¼ºå¤§çš„ Cookie å®‰å…¨ï¼Œä»¥ä¾¿åœ¨ HTTPS è¿æ¥ä¸Šè‡ªåŠ¨æ·»åŠ  Secure æ ‡å¿—ã€‚</li>
<li><strong>ä¿ç•™ä¸Šæ¸¸å¤´ï¼š</strong> ä½¿ç”¨ <code>KEEP_UPSTREAM_HEADERS</code> æŒ‡å®šè¦ä¿ç•™çš„ä¸Šæ¸¸è¯·æ±‚å¤´ã€‚</li>
<li><strong>åˆ©ç”¨æ¡ä»¶æ€§å¤´åº”ç”¨ï¼š</strong> å¦‚æœæ‚¨å¸Œæœ›åœ¨ä¸ä¸­æ–­çš„æƒ…å†µä¸‹æµ‹è¯•ç­–ç•¥ï¼Œè¯·é€šè¿‡ <code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code> å¯ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy-Report-Only">CSP ä»…æŠ¥å‘Š</a>æ¨¡å¼ã€‚</li>
</ol>
<h3 id="_66">é…ç½®æŒ‡å—</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="24:3"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><input id="__tabbed_24_2" name="__tabbed_24" type="radio" /><input id="__tabbed_24_3" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">å®‰å…¨å¤´</label><label for="__tabbed_24_2">Cookie è®¾ç½®</label><label for="__tabbed_24_3">è‡ªå®šä¹‰å¤´</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>æ¦‚è¿°</strong></p>
<p>å®‰å…¨å¤´å¼ºåˆ¶æ‰§è¡Œå®‰å…¨é€šä¿¡ï¼Œé™åˆ¶èµ„æºåŠ è½½ï¼Œå¹¶é˜²æ­¢è¯¸å¦‚ç‚¹å‡»åŠ«æŒå’Œæ³¨å…¥ç­‰æ”»å‡»ã€‚æ­£ç¡®é…ç½®çš„å¤´ä¸ºæ‚¨çš„ç½‘ç«™åˆ›å»ºäº†ä¸€ä¸ªå¼ºå¤§çš„é˜²å¾¡å±‚ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å®‰å…¨å¤´çš„å¥½å¤„</p>
<ul>
<li><strong>HSTSï¼š</strong> ç¡®ä¿æ‰€æœ‰è¿æ¥éƒ½å·²åŠ å¯†ï¼Œé˜²æ­¢åè®®é™çº§æ”»å‡»ã€‚</li>
<li><strong>CSPï¼š</strong> é˜²æ­¢æ¶æ„è„šæœ¬æ‰§è¡Œï¼Œé™ä½ XSS æ”»å‡»çš„é£é™©ã€‚</li>
<li><strong>X-Frame-Optionsï¼š</strong> é€šè¿‡æ§åˆ¶ iframe åµŒå…¥æ¥é˜»æ­¢ç‚¹å‡»åŠ«æŒå°è¯•ã€‚</li>
<li><strong>Referrer Policyï¼š</strong> é€šè¿‡ referrer å¤´é™åˆ¶æ•æ„Ÿä¿¡æ¯çš„æ³„éœ²ã€‚</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>STRICT_TRANSPORT_SECURITY</code></td>
<td><code>max-age=63072000; includeSubDomains; preload</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>HSTSï¼š</strong> å¼ºåˆ¶æ‰§è¡Œå®‰å…¨çš„ HTTPS è¿æ¥ï¼Œé™ä½ä¸­é—´äººæ”»å‡»çš„é£é™©ã€‚</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY</code></td>
<td><code>object-src 'none'; form-action 'self'; frame-ancestors 'self';</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>CSPï¼š</strong> å°†èµ„æºåŠ è½½é™åˆ¶åœ¨å—ä¿¡ä»»çš„æ¥æºï¼Œå‡è½»è·¨ç«™è„šæœ¬å’Œæ•°æ®æ³¨å…¥æ”»å‡»ã€‚</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>CSP æŠ¥å‘Šæ¨¡å¼ï¼š</strong> æŠ¥å‘Šè¿è§„è¡Œä¸ºè€Œä¸é˜»æ­¢å†…å®¹ï¼Œæœ‰åŠ©äºåœ¨æµ‹è¯•å®‰å…¨ç­–ç•¥çš„åŒæ—¶æ•è·æ—¥å¿—ã€‚</td>
</tr>
<tr>
<td><code>X_FRAME_OPTIONS</code></td>
<td><code>SAMEORIGIN</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>X-Frame-Optionsï¼š</strong> é€šè¿‡æ§åˆ¶æ‚¨çš„ç½‘ç«™æ˜¯å¦å¯ä»¥è¢«æ¡†æ¶åŒ–æ¥é˜²æ­¢ç‚¹å‡»åŠ«æŒã€‚</td>
</tr>
<tr>
<td><code>X_CONTENT_TYPE_OPTIONS</code></td>
<td><code>nosniff</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>X-Content-Type-Optionsï¼š</strong> é˜²æ­¢æµè§ˆå™¨è¿›è¡Œ MIME å—…æ¢ï¼Œé˜²æ­¢è·¯è¿‡å¼ä¸‹è½½æ”»å‡»ã€‚</td>
</tr>
<tr>
<td><code>X_DNS_PREFETCH_CONTROL</code></td>
<td><code>off</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>X-DNS-Prefetch-Controlï¼š</strong> è°ƒèŠ‚ DNS é¢„å–ä»¥å‡å°‘æ— æ„çš„ç½‘ç»œè¯·æ±‚å¹¶å¢å¼ºéšç§ã€‚</td>
</tr>
<tr>
<td><code>REFERRER_POLICY</code></td>
<td><code>strict-origin-when-cross-origin</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>Referrer Policyï¼š</strong> æ§åˆ¶å‘é€çš„å¼•èæ¥æºä¿¡æ¯çš„æ•°é‡ï¼Œä¿æŠ¤ç”¨æˆ·éšç§ã€‚</td>
</tr>
<tr>
<td><code>PERMISSIONS_POLICY</code></td>
<td><code>accelerometer=(), ambient-light-sensor=(), attribution-reporting=(), autoplay=(), battery=(), ...</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>Permissions Policyï¼š</strong> é™åˆ¶æµè§ˆå™¨åŠŸèƒ½è®¿é—®ï¼Œå‡å°‘æ½œåœ¨çš„æ”»å‡»å‘é‡ã€‚</td>
</tr>
<tr>
<td><code>KEEP_UPSTREAM_HEADERS</code></td>
<td><code>Content-Security-Policy Permissions-Policy X-Frame-Options</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¿ç•™æ ‡å¤´ï¼š</strong> ä¿ç•™é€‰å®šçš„ä¸Šæ¸¸æ ‡å¤´ï¼Œåœ¨ä¿æŒå®‰å…¨æ€§çš„åŒæ—¶å¸®åŠ©æ—§ç‰ˆé›†æˆã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">æœ€ä½³å®è·µ</p>
<ul>
<li>å®šæœŸå®¡æŸ¥å’Œæ›´æ–°æ‚¨çš„å®‰å…¨æ ‡å¤´ï¼Œä»¥ä¸ä¸æ–­å‘å±•çš„å®‰å…¨æ ‡å‡†ä¿æŒä¸€è‡´ã€‚</li>
<li>ä½¿ç”¨åƒ <a href="https://observatory.mozilla.org/">Mozilla Observatory</a> è¿™æ ·çš„å·¥å…·æ¥éªŒè¯æ‚¨çš„æ ‡å¤´é…ç½®ã€‚</li>
<li>åœ¨å¼ºåˆ¶æ‰§è¡Œ CSP ä¹‹å‰ï¼Œåœ¨ <code>Report-Only</code> æ¨¡å¼ä¸‹è¿›è¡Œæµ‹è¯•ï¼Œä»¥é¿å…ç ´ååŠŸèƒ½ã€‚</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>æ¦‚è¿°</strong></p>
<p>æ­£ç¡®çš„ cookie è®¾ç½®é€šè¿‡é˜²æ­¢åŠ«æŒã€å›ºå®šå’Œè·¨ç«™è„šæœ¬æ”»å‡»æ¥ç¡®ä¿å®‰å…¨çš„ç”¨æˆ·ä¼šè¯ã€‚å®‰å…¨çš„ cookie åœ¨ HTTPS ä¸Šç»´æŠ¤ä¼šè¯å®Œæ•´æ€§ï¼Œå¹¶å¢å¼ºæ•´ä½“ç”¨æˆ·æ•°æ®ä¿æŠ¤ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å®‰å…¨ Cookie çš„å¥½å¤„</p>
<ul>
<li><strong>HttpOnly æ ‡å¿—ï¼š</strong> é˜²æ­¢å®¢æˆ·ç«¯è„šæœ¬è®¿é—® cookieï¼Œå‡è½» XSS é£é™©ã€‚</li>
<li><strong>SameSite æ ‡å¿—ï¼š</strong> é€šè¿‡é™åˆ¶è·¨æº cookie çš„ä½¿ç”¨æ¥å‡å°‘ CSRF æ”»å‡»ã€‚</li>
<li><strong>Secure æ ‡å¿—ï¼š</strong> ç¡®ä¿ cookie ä»…é€šè¿‡åŠ å¯†çš„ HTTPS è¿æ¥ä¼ è¾“ã€‚</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COOKIE_FLAGS</code></td>
<td><code>* HttpOnly SameSite=Lax</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>Cookie æ ‡å¿—ï¼š</strong> è‡ªåŠ¨æ·»åŠ å®‰å…¨æ ‡å¿—ï¼Œå¦‚ HttpOnly å’Œ SameSiteï¼Œä¿æŠ¤ cookie å…å—å®¢æˆ·ç«¯è„šæœ¬è®¿é—®å’Œ CSRF æ”»å‡»ã€‚</td>
</tr>
<tr>
<td><code>COOKIE_AUTO_SECURE_FLAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è‡ªåŠ¨å®‰å…¨æ ‡å¿—ï¼š</strong> é€šè¿‡è‡ªåŠ¨é™„åŠ  Secure æ ‡å¿—ï¼Œç¡®ä¿ cookie ä»…é€šè¿‡å®‰å…¨çš„ HTTPS è¿æ¥å‘é€ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">æœ€ä½³å®è·µ</p>
<ul>
<li>å¯¹æ•æ„Ÿ cookie ä½¿ç”¨ <code>SameSite=Strict</code> ä»¥é˜²æ­¢è·¨æºè®¿é—®ã€‚</li>
<li>å®šæœŸå®¡è®¡æ‚¨çš„ cookie è®¾ç½®ï¼Œä»¥ç¡®ä¿ç¬¦åˆå®‰å…¨å’Œéšç§æ³•è§„ã€‚</li>
<li>é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®æ²¡æœ‰ Secure æ ‡å¿—çš„ cookieã€‚</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>æ¦‚è¿°</strong></p>
<p>è‡ªå®šä¹‰æ ‡å¤´å…è®¸æ‚¨æ·»åŠ ç‰¹å®šçš„ HTTP æ ‡å¤´ä»¥æ»¡è¶³åº”ç”¨ç¨‹åºæˆ–æ€§èƒ½è¦æ±‚ã€‚å®ƒä»¬æä¾›äº†çµæ´»æ€§ï¼Œä½†å¿…é¡»ä»”ç»†é…ç½®ä»¥é¿å…æš´éœ²æ•æ„Ÿçš„æœåŠ¡å™¨è¯¦ç»†ä¿¡æ¯ã€‚</p>
<div class="admonition success">
<p class="admonition-title">è‡ªå®šä¹‰æ ‡å¤´çš„å¥½å¤„</p>
<ul>
<li>é€šè¿‡åˆ é™¤å¯èƒ½æ³„éœ²æœåŠ¡å™¨è¯¦ç»†ä¿¡æ¯çš„ä¸å¿…è¦æ ‡å¤´æ¥å¢å¼ºå®‰å…¨æ€§ã€‚</li>
<li>æ·»åŠ ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„æ ‡å¤´ä»¥æ”¹è¿›åŠŸèƒ½æˆ–è°ƒè¯•ã€‚</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šä¸ª</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CUSTOM_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è‡ªå®šä¹‰æ ‡å¤´ï¼š</strong> æä¾›äº†ä»¥ <code>HeaderName: HeaderValue</code> æ ¼å¼æ·»åŠ ç”¨æˆ·å®šä¹‰çš„æ ‡å¤´çš„æ–¹æ³•ï¼Œç”¨äºä¸“é—¨çš„å®‰å…¨æˆ–æ€§èƒ½å¢å¼ºã€‚</td>
</tr>
<tr>
<td><code>REMOVE_HEADERS</code></td>
<td><code>Server Expect-CT X-Powered-By X-AspNet-Version X-AspNetMvc-Version Public-Key-Pins</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>åˆ é™¤æ ‡å¤´ï¼š</strong> æŒ‡å®šè¦åˆ é™¤çš„æ ‡å¤´ï¼Œé™ä½æš´éœ²å†…éƒ¨æœåŠ¡å™¨è¯¦ç»†ä¿¡æ¯å’Œå·²çŸ¥æ¼æ´çš„å‡ ç‡ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<ul>
<li>é¿å…é€šè¿‡è‡ªå®šä¹‰æ ‡å¤´æš´éœ²æ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>å®šæœŸå®¡æŸ¥å’Œæ›´æ–°è‡ªå®šä¹‰æ ‡å¤´ï¼Œä»¥ä¸æ‚¨çš„åº”ç”¨ç¨‹åºçš„è¦æ±‚ä¿æŒä¸€è‡´ã€‚</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">æœ€ä½³å®è·µ</p>
<ul>
<li>ä½¿ç”¨ <code>REMOVE_HEADERS</code> å»é™¤åƒ <code>Server</code> å’Œ <code>X-Powered-By</code> è¿™æ ·çš„æ ‡å¤´ï¼Œä»¥å‡å°‘æŒ‡çº¹è¯†åˆ«é£é™©ã€‚</li>
<li>åœ¨å°†è‡ªå®šä¹‰æ ‡å¤´éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œåœ¨æš‚å­˜ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ã€‚</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="_67">ç¤ºä¾‹é…ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="25:4"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><input id="__tabbed_25_2" name="__tabbed_25" type="radio" /><input id="__tabbed_25_3" name="__tabbed_25" type="radio" /><input id="__tabbed_25_4" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">åŸºæœ¬å®‰å…¨å¤´</label><label for="__tabbed_25_2">å¢å¼ºçš„ Cookie å®‰å…¨æ€§</label><label for="__tabbed_25_3">API çš„è‡ªå®šä¹‰å¤´</label><label for="__tabbed_25_4">å†…å®¹å®‰å…¨ç­–ç•¥ - æŠ¥å‘Šæ¨¡å¼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªå¸¦æœ‰åŸºæœ¬å®‰å…¨å¤´çš„æ ‡å‡†é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">STRICT_TRANSPORT_SECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max-age=63072000;</span><span class="nv"> </span><span class="s">includeSubDomains;</span><span class="nv"> </span><span class="s">preload&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;&quot;</span>
<span class="nt">X_FRAME_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SAMEORIGIN&quot;</span>
<span class="nt">X_CONTENT_TYPE_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nosniff&quot;</span>
<span class="nt">REFERRER_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;strict-origin-when-cross-origin&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…·æœ‰å¼ºå¤§ cookie å®‰å…¨è®¾ç½®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">COOKIE_FLAGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict</span><span class="nv"> </span><span class="s">Max-Age=3600&quot;</span>
<span class="nt">COOKIE_AUTO_SECURE_FLAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰å¤´çš„ API æœåŠ¡é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">CUSTOM_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API-Version:</span><span class="nv"> </span><span class="s">1.2.3&quot;</span>
<span class="nt">CUSTOM_HEADER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Max-Age:</span><span class="nv"> </span><span class="s">86400&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;none&#39;&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version</span><span class="nv"> </span><span class="s">X-Runtime&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºåœ¨ä¸ç ´ååŠŸèƒ½çš„æƒ…å†µä¸‹æµ‹è¯• CSP çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">img-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">https://*.example.com;</span><span class="nv"> </span><span class="s">style-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">&#39;unsafe-inline&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">connect-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://api.example.com;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">form-action</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">base-uri</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">report-uri</span><span class="nv"> </span><span class="s">https://example.com/csp-reports&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY_REPORT_ONLY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="lets-encrypt">Let's Encrypt</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Let's Encrypt æ’ä»¶é€šè¿‡è‡ªåŠ¨åŒ–åˆ›å»ºã€ç»­è®¢å’Œé…ç½®æ¥è‡ª Let's Encrypt çš„å…è´¹è¯ä¹¦ï¼Œç®€åŒ–äº† SSL/TLS è¯ä¹¦ç®¡ç†ã€‚æ­¤åŠŸèƒ½å¯ä¸ºæ‚¨çš„ç½‘ç«™å¯ç”¨å®‰å…¨çš„ HTTPS è¿æ¥ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†è¯ä¹¦çš„å¤æ‚æ€§ï¼Œä»è€Œé™ä½æˆæœ¬å’Œç®¡ç†å¼€é”€ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å¯ç”¨åï¼ŒBunkerWeb ä¼šè‡ªåŠ¨æ£€æµ‹ä¸ºæ‚¨çš„ç½‘ç«™é…ç½®çš„åŸŸåã€‚</li>
<li>BunkerWeb ä» Let's Encrypt çš„è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚å…è´¹çš„ SSL/TLS è¯ä¹¦ã€‚</li>
<li>é€šè¿‡ HTTP éªŒè¯ï¼ˆè¯æ˜æ‚¨æ§åˆ¶ç½‘ç«™ï¼‰æˆ– DNS éªŒè¯ï¼ˆè¯æ˜æ‚¨æ§åˆ¶åŸŸåçš„ DNSï¼‰æ¥éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚</li>
<li>è¯ä¹¦ä¼šè‡ªåŠ¨ä¸ºæ‚¨çš„åŸŸåå®‰è£…å’Œé…ç½®ã€‚</li>
<li>BunkerWeb ä¼šåœ¨è¯ä¹¦åˆ°æœŸå‰åœ¨åå°å¤„ç†ç»­è®¢äº‹å®œï¼Œç¡®ä¿ HTTPS çš„æŒç»­å¯ç”¨æ€§ã€‚</li>
<li>æ•´ä¸ªè¿‡ç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œåˆæ¬¡è®¾ç½®åå‡ ä¹æ— éœ€å¹²é¢„ã€‚</li>
</ol>
<div class="admonition info">
<p class="admonition-title">å…ˆå†³æ¡ä»¶</p>
<p>è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·ç¡®ä¿ä¸ºæ¯ä¸ªåŸŸåé…ç½®äº†æ­£ç¡®çš„ DNS <strong>A è®°å½•</strong>ï¼ŒæŒ‡å‘ BunkerWeb å¯è®¿é—®çš„å…¬å…± IP åœ°å€ã€‚æ²¡æœ‰æ­£ç¡®çš„ DNS é…ç½®ï¼ŒåŸŸåéªŒè¯è¿‡ç¨‹å°†å¤±è´¥ã€‚</p>
</div>
<h3 id="_68">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ Let's Encrypt åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>AUTO_LETS_ENCRYPT</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è‡ªåŠ¨è¯ä¹¦é¢å‘å’Œç»­è®¢ã€‚</li>
<li><strong>æä¾›è”ç³»ç”µå­é‚®ä»¶ï¼š</strong> ä½¿ç”¨ <code>EMAIL_LETS_ENCRYPT</code> è®¾ç½®è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€ï¼Œä»¥æ¥æ”¶æœ‰å…³è¯ä¹¦çš„é‡è¦é€šçŸ¥ã€‚</li>
<li><strong>é€‰æ‹©éªŒè¯ç±»å‹ï¼š</strong> ä½¿ç”¨ <code>LETS_ENCRYPT_CHALLENGE</code> è®¾ç½®é€‰æ‹© <code>http</code> æˆ– <code>dns</code> éªŒè¯ã€‚</li>
<li><strong>é…ç½® DNS æä¾›å•†ï¼š</strong> å¦‚æœä½¿ç”¨ DNS éªŒè¯ï¼Œè¯·æŒ‡å®šæ‚¨çš„ DNS æä¾›å•†å’Œå‡­æ®ã€‚</li>
<li><strong>é€‰æ‹©è¯ä¹¦é…ç½®æ–‡ä»¶ï¼š</strong> ä½¿ç”¨ <code>LETS_ENCRYPT_PROFILE</code> è®¾ç½®é€‰æ‹©æ‚¨åå¥½çš„è¯ä¹¦é…ç½®æ–‡ä»¶ï¼ˆclassicã€tlsserver æˆ– shortlivedï¼‰ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œè¯ä¹¦å°†æ ¹æ®éœ€è¦è‡ªåŠ¨é¢å‘ã€å®‰è£…å’Œç»­è®¢ã€‚</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">è¯ä¹¦é…ç½®æ–‡ä»¶</p>
<p>Let's Encrypt ä¸ºä¸åŒçš„ç”¨ä¾‹æä¾›äº†ä¸åŒçš„è¯ä¹¦é…ç½®æ–‡ä»¶ï¼š- <strong>classic</strong>ï¼šé€šç”¨è¯ä¹¦ï¼Œæœ‰æ•ˆæœŸä¸º 90 å¤©ï¼ˆé»˜è®¤ï¼‰- <strong>tlsserver</strong>ï¼šé’ˆå¯¹ TLS æœåŠ¡å™¨èº«ä»½éªŒè¯è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œæœ‰æ•ˆè´Ÿè½½æ›´å° - <strong>shortlived</strong>ï¼šå¢å¼ºå®‰å…¨æ€§ï¼Œæœ‰æ•ˆæœŸä¸º 7 å¤©ï¼Œé€‚ç”¨äºè‡ªåŠ¨åŒ–ç¯å¢ƒ - <strong>custom</strong>ï¼šå¦‚æœæ‚¨çš„ ACME æœåŠ¡å™¨æ”¯æŒä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ <code>LETS_ENCRYPT_CUSTOM_PROFILE</code> è¿›è¡Œè®¾ç½®ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">é…ç½®æ–‡ä»¶å¯ç”¨æ€§</p>
<p>è¯·æ³¨æ„ï¼Œ<code>tlsserver</code> å’Œ <code>shortlived</code> é…ç½®æ–‡ä»¶ç›®å‰å¯èƒ½å¹¶éåœ¨æ‰€æœ‰ç¯å¢ƒæˆ–æ‰€æœ‰ ACME å®¢æˆ·ç«¯ä¸­éƒ½å¯ç”¨ã€‚<code>classic</code> é…ç½®æ–‡ä»¶å…·æœ‰æœ€å¹¿æ³›çš„å…¼å®¹æ€§ï¼Œæ¨èç»™å¤§å¤šæ•°ç”¨æˆ·ã€‚å¦‚æœæ‰€é€‰çš„é…ç½®æ–‡ä»¶ä¸å¯ç”¨ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨å›é€€åˆ° <code>classic</code> é…ç½®æ–‡ä»¶ã€‚</p>
</div>
<h3 id="_69">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTO_LETS_ENCRYPT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ Let's Encryptï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è‡ªåŠ¨è¯ä¹¦é¢å‘å’Œç»­è®¢ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PASSTHROUGH</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¼ é€’ Let's Encrypt è¯·æ±‚ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å°† Let's Encrypt è¯·æ±‚ä¼ é€’ç»™ Web æœåŠ¡å™¨ã€‚å½“ BunkerWeb ä½äºå¤„ç† SSL çš„å¦ä¸€ä¸ªåå‘ä»£ç†åé¢æ—¶ï¼Œæ­¤åŠŸèƒ½å¾ˆæœ‰ç”¨ã€‚</td>
</tr>
<tr>
<td><code>EMAIL_LETS_ENCRYPT</code></td>
<td><code>contact@{FIRST_SERVER}</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è”ç³»ç”µå­é‚®ä»¶ï¼š</strong> ç”¨äº Let's Encrypt é€šçŸ¥çš„ç”µå­é‚®ä»¶åœ°å€ï¼Œå¹¶åŒ…å«åœ¨è¯ä¹¦ä¸­ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CHALLENGE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>éªŒè¯ç±»å‹ï¼š</strong> ç”¨äºéªŒè¯åŸŸåæ‰€æœ‰æƒçš„æ–¹æ³•ã€‚é€‰é¡¹ï¼š<code>http</code> æˆ– <code>dns</code>ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROVIDER</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>DNS æä¾›å•†ï¼š</strong> ä½¿ç”¨ DNS éªŒè¯æ—¶ï¼Œè¦ä½¿ç”¨çš„ DNS æä¾›å•†ï¼ˆä¾‹å¦‚ cloudflareã€route53ã€digitaloceanï¼‰ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROPAGATION</code></td>
<td><code>default</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>DNS ä¼ æ’­ï¼š</strong> ç­‰å¾… DNS ä¼ æ’­çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚å¦‚æœæœªæä¾›å€¼ï¼Œåˆ™ä½¿ç”¨æä¾›å•†çš„é»˜è®¤ä¼ æ’­æ—¶é—´ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å‡­è¯é¡¹ï¼š</strong> ç”¨äº DNS æä¾›å•†èº«ä»½éªŒè¯çš„é…ç½®é¡¹ï¼ˆä¾‹å¦‚ <code>cloudflare_api_token 123456</code>ï¼‰ã€‚å€¼å¯ä»¥æ˜¯åŸå§‹æ–‡æœ¬ã€base64 ç¼–ç æˆ– JSON å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_WILDCARD</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>é€šé…ç¬¦è¯ä¹¦ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œä¸ºæ‰€æœ‰åŸŸååˆ›å»ºé€šé…ç¬¦è¯ä¹¦ã€‚ä»…é€‚ç”¨äº DNS éªŒè¯ã€‚</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_STAGING</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä½¿ç”¨æµ‹è¯•ç¯å¢ƒï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œä½¿ç”¨ Let's Encrypt çš„æµ‹è¯•ç¯å¢ƒè¿›è¡Œæµ‹è¯•ã€‚æµ‹è¯•ç¯å¢ƒçš„é€Ÿç‡é™åˆ¶è¾ƒé«˜ï¼Œä½†ç”Ÿæˆçš„è¯ä¹¦ä¸å—æµè§ˆå™¨ä¿¡ä»»ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CLEAR_OLD_CERTS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ¸…é™¤æ—§è¯ä¹¦ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œåœ¨ç»­è®¢æœŸé—´åˆ é™¤ä¸å†éœ€è¦çš„æ—§è¯ä¹¦ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PROFILE</code></td>
<td><code>classic</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦é…ç½®æ–‡ä»¶ï¼š</strong> é€‰æ‹©è¦ä½¿ç”¨çš„è¯ä¹¦é…ç½®æ–‡ä»¶ã€‚é€‰é¡¹ï¼š<code>classic</code>ï¼ˆé€šç”¨ï¼‰ã€<code>tlsserver</code>ï¼ˆé’ˆå¯¹ TLS æœåŠ¡å™¨ä¼˜åŒ–ï¼‰æˆ– <code>shortlived</code>ï¼ˆ7 å¤©è¯ä¹¦ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CUSTOM_PROFILE</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è‡ªå®šä¹‰è¯ä¹¦é…ç½®æ–‡ä»¶ï¼š</strong> å¦‚æœæ‚¨çš„ ACME æœåŠ¡å™¨æ”¯æŒéæ ‡å‡†é…ç½®æ–‡ä»¶ï¼Œè¯·è¾“å…¥è‡ªå®šä¹‰è¯ä¹¦é…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®äº†æ­¤é¡¹ï¼Œå®ƒå°†è¦†ç›– <code>LETS_ENCRYPT_PROFILE</code>ã€‚</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_MAX_RETRIES</code></td>
<td><code>3</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æœ€å¤§é‡è¯•æ¬¡æ•°ï¼š</strong> è¯ä¹¦ç”Ÿæˆå¤±è´¥æ—¶é‡è¯•çš„æ¬¡æ•°ã€‚è®¾ç½®ä¸º <code>0</code> ä»¥ç¦ç”¨é‡è¯•ã€‚ç”¨äºå¤„ç†ä¸´æ—¶ç½‘ç»œé—®é¢˜æˆ– API é€Ÿç‡é™åˆ¶ã€‚</td>
</tr>
</tbody>
</table>
<p>!!! info "ä¿¡æ¯å’Œè¡Œä¸º" - <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> è®¾ç½®æ˜¯ä¸€ä¸ªå¤šé€‰è®¾ç½®ï¼Œå¯ç”¨äºä¸º DNS æä¾›å•†è®¾ç½®å¤šä¸ªé¡¹ç›®ã€‚è¿™äº›é¡¹ç›®å°†ä¿å­˜ä¸ºç¼“å­˜æ–‡ä»¶ï¼ŒCertbot å°†ä»ä¸­è¯»å–å‡­æ®ã€‚- å¦‚æœæœªæä¾› <code>LETS_ENCRYPT_DNS_PROPAGATION</code> è®¾ç½®ï¼Œåˆ™ä½¿ç”¨æä¾›å•†çš„é»˜è®¤ä¼ æ’­æ—¶é—´ã€‚- åªè¦æ‚¨ä»å¤–éƒ¨æ‰“å¼€ <code>80/tcp</code> ç«¯å£ï¼Œä½¿ç”¨ <code>http</code> éªŒè¯çš„å®Œå…¨ Let's Encrypt è‡ªåŠ¨åŒ–å°±å¯ä»¥åœ¨æµæ¨¡å¼ä¸‹å·¥ä½œã€‚ä½¿ç”¨ <code>LISTEN_STREAM_PORT_SSL</code> è®¾ç½®æ¥é€‰æ‹©æ‚¨çš„ä¾¦å¬ SSL/TLS ç«¯å£ã€‚- å¦‚æœ <code>LETS_ENCRYPT_PASSTHROUGH</code> è®¾ç½®ä¸º <code>yes</code>ï¼ŒBunkerWeb å°†ä¸ä¼šè‡ªè¡Œå¤„ç† ACME éªŒè¯è¯·æ±‚ï¼Œè€Œæ˜¯å°†å®ƒä»¬ä¼ é€’ç»™åç«¯ Web æœåŠ¡å™¨ã€‚è¿™åœ¨ BunkerWeb ä½œä¸ºåå‘ä»£ç†ä½äºå·²é…ç½®ä¸ºå¤„ç† Let's Encrypt éªŒè¯çš„å¦ä¸€å°æœåŠ¡å™¨å‰é¢çš„åœºæ™¯ä¸­å¾ˆæœ‰ç”¨ã€‚</p>
<div class="admonition tip">
<p class="admonition-title">HTTP ä¸ DNS éªŒè¯</p>
<p><strong>HTTP éªŒè¯</strong> æ›´å®¹æ˜“è®¾ç½®ï¼Œå¹¶ä¸”é€‚ç”¨äºå¤§å¤šæ•°ç½‘ç«™ï¼š</p>
<ul>
<li>è¦æ±‚æ‚¨çš„ç½‘ç«™åœ¨ç«¯å£ 80 ä¸Šå¯å…¬å¼€è®¿é—®</li>
<li>ç”± BunkerWeb è‡ªåŠ¨é…ç½®</li>
<li>ä¸èƒ½ç”¨äºé€šé…ç¬¦è¯ä¹¦</li>
</ul>
<p><strong>DNS éªŒè¯</strong> æä¾›æ›´å¤§çš„çµæ´»æ€§ï¼Œå¹¶ä¸”æ˜¯é€šé…ç¬¦è¯ä¹¦æ‰€å¿…éœ€çš„ï¼š</p>
<ul>
<li>å³ä½¿æ‚¨çš„ç½‘ç«™æ— æ³•å…¬å¼€è®¿é—®ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ</li>
<li>éœ€è¦ DNS æä¾›å•†çš„ API å‡­æ®</li>
<li>é€šé…ç¬¦è¯ä¹¦ï¼ˆä¾‹å¦‚ *.example.comï¼‰æ‰€å¿…éœ€</li>
<li>åœ¨ç«¯å£ 80 è¢«é˜»æ­¢æˆ–ä¸å¯ç”¨æ—¶å¾ˆæœ‰ç”¨</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">é€šé…ç¬¦è¯ä¹¦</p>
<p>é€šé…ç¬¦è¯ä¹¦ä»…é€‚ç”¨äº DNS éªŒè¯ã€‚å¦‚æœè¦ä½¿ç”¨å®ƒä»¬ï¼Œå¿…é¡»å°† <code>USE_LETS_ENCRYPT_WILDCARD</code> è®¾ç½®ä¸º <code>yes</code> å¹¶æ­£ç¡®é…ç½®æ‚¨çš„ DNS æä¾›å•†å‡­æ®ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">é€Ÿç‡é™åˆ¶</p>
<p>Let's Encrypt å¯¹è¯ä¹¦é¢å‘æ–½åŠ é€Ÿç‡é™åˆ¶ã€‚åœ¨æµ‹è¯•é…ç½®æ—¶ï¼Œé€šè¿‡å°† <code>USE_LETS_ENCRYPT_STAGING</code> è®¾ç½®ä¸º <code>yes</code> æ¥ä½¿ç”¨æµ‹è¯•ç¯å¢ƒï¼Œä»¥é¿å…è¾¾åˆ°ç”Ÿäº§ç¯å¢ƒçš„é€Ÿç‡é™åˆ¶ã€‚æµ‹è¯•è¯ä¹¦ä¸å—æµè§ˆå™¨ä¿¡ä»»ï¼Œä½†å¯¹äºéªŒè¯æ‚¨çš„è®¾ç½®å¾ˆæœ‰ç”¨ã€‚</p>
</div>
<h3 id="dns">æ”¯æŒçš„ DNS æä¾›å•†</h3>
<p>Let's Encrypt æ’ä»¶æ”¯æŒå¹¿æ³›çš„ DNS æä¾›å•†è¿›è¡Œ DNS éªŒè¯ã€‚æ¯ä¸ªæä¾›å•†éƒ½éœ€è¦ä½¿ç”¨ <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> è®¾ç½®æä¾›ç‰¹å®šçš„å‡­æ®ã€‚</p>
<table>
<thead>
<tr>
<th>æä¾›å•†</th>
<th>æè¿°</th>
<th>å¼ºåˆ¶æ€§è®¾ç½®</th>
<th>å¯é€‰è®¾ç½®</th>
<th>æ–‡æ¡£</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bunny</code></td>
<td>bunny.net</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://github.com/mwt/certbot-dns-bunny/blob/main/README.rst">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>cloudflare</code></td>
<td>Cloudflare</td>
<td><code>api_token</code> æˆ– <code>email</code> å’Œ <code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-cloudflare.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>desec</code></td>
<td>deSEC</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/desec-io/certbot-dns-desec/blob/main/README.md">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>digitalocean</code></td>
<td>DigitalOcean</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-digitalocean.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>domainoffensive</code></td>
<td>Domain-Offensive</td>
<td><code>api_token</code></td>
<td></td>
<td><a href="https://github.com/domainoffensive/certbot-dns-domainoffensive/blob/master/README.md">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>dnsimple</code></td>
<td>DNSimple</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsimple.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>dnsmadeeasy</code></td>
<td>DNS Made Easy</td>
<td><code>api_key</code><br><code>secret_key</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsmadeeasy.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>dynu</code></td>
<td>Dynu</td>
<td><code>auth_token</code></td>
<td></td>
<td><a href="https://github.com/bikram990/certbot-dns-dynu/blob/main/README.md">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>gehirn</code></td>
<td>Gehirn DNS</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-gehirn.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>google</code></td>
<td>Google Cloud</td>
<td><code>project_id</code><br><code>private_key_id</code><br><code>private_key</code><br><code>client_email</code><br><code>client_id</code><br><code>client_x509_cert_url</code></td>
<td><code>type</code> (é»˜è®¤: <code>service_account</code>)<br><code>auth_uri</code> (é»˜è®¤: <code>https://accounts.google.com/o/oauth2/auth</code>)<br><code>token_uri</code> (é»˜è®¤: <code>https://accounts.google.com/o/oauth2/token</code>)<br><code>auth_provider_x509_cert_url</code> (é»˜è®¤: <code>https://www.googleapis.com/oauth2/v1/certs</code>)</td>
<td><a href="https://certbot-dns-google.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>infomaniak</code></td>
<td>Infomaniak</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/infomaniak/certbot-dns-infomaniak/blob/main/README.rst">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>ionos</code></td>
<td>IONOS</td>
<td><code>prefix</code><br><code>secret</code></td>
<td><code>endpoint</code> (é»˜è®¤: <code>https://api.hosting.ionos.com</code>)</td>
<td><a href="https://github.com/helgeerbe/certbot-dns-ionos/blob/master/README.md">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>linode</code></td>
<td>Linode</td>
<td><code>key</code></td>
<td></td>
<td><a href="https://certbot-dns-linode.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>luadns</code></td>
<td>LuaDNS</td>
<td><code>email</code><br><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-luadns.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>njalla</code></td>
<td>Njalla</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/chaptergy/certbot-dns-njalla/blob/main/README.md">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>nsone</code></td>
<td>NS1</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-nsone.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>ovh</code></td>
<td>OVH</td>
<td><code>application_key</code><br><code>application_secret</code><br><code>consumer_key</code></td>
<td><code>endpoint</code> (é»˜è®¤: <code>ovh-eu</code>)</td>
<td><a href="https://certbot-dns-ovh.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>rfc2136</code></td>
<td>RFC 2136</td>
<td><code>server</code><br><code>name</code><br><code>secret</code></td>
<td><code>port</code> (é»˜è®¤: <code>53</code>)<br><code>algorithm</code> (é»˜è®¤: <code>HMAC-SHA512</code>)<br><code>sign_query</code> (é»˜è®¤: <code>false</code>)</td>
<td><a href="https://certbot-dns-rfc2136.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>route53</code></td>
<td>Amazon Route 53</td>
<td><code>access_key_id</code><br><code>secret_access_key</code></td>
<td></td>
<td><a href="https://certbot-dns-route53.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>sakuracloud</code></td>
<td>Sakura Cloud</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-sakuracloud.readthedocs.io/en/stable/">æ–‡æ¡£</a></td>
</tr>
<tr>
<td><code>scaleway</code></td>
<td>Scaleway</td>
<td><code>application_token</code></td>
<td></td>
<td><a href="https://github.com/vanonox/certbot-dns-scaleway/blob/main/README.rst">æ–‡æ¡£</a></td>
</tr>
</tbody>
</table>
<h3 id="_70">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="26:6"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><input id="__tabbed_26_2" name="__tabbed_26" type="radio" /><input id="__tabbed_26_3" name="__tabbed_26" type="radio" /><input id="__tabbed_26_4" name="__tabbed_26" type="radio" /><input id="__tabbed_26_5" name="__tabbed_26" type="radio" /><input id="__tabbed_26_6" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">åŸºæœ¬ HTTP éªŒè¯</label><label for="__tabbed_26_2">ä½¿ç”¨é€šé…ç¬¦çš„ Cloudflare DNS</label><label for="__tabbed_26_3">AWS Route53 é…ç½®</label><label for="__tabbed_26_4">ä½¿ç”¨æµ‹è¯•ç¯å¢ƒå’Œé‡è¯•è¿›è¡Œæµ‹è¯•</label><label for="__tabbed_26_5">å…·æœ‰è‡ªå®šä¹‰ä¼ æ’­æ—¶é—´çš„ DigitalOcean</label><label for="__tabbed_26_6">Google Cloud DNS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä½¿ç”¨ HTTP éªŒè¯ä¸ºå•ä¸ªåŸŸè¿›è¡Œç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ Cloudflare DNS ä¸ºé€šé…ç¬¦è¯ä¹¦è¿›è¡Œé…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cloudflare&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api_token</span><span class="nv"> </span><span class="s">YOUR_API_TOKEN&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_WILDCARD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ Amazon Route53 è¿›è¡Œ DNS éªŒè¯çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;route53&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_access_key_id</span><span class="nv"> </span><span class="s">YOUR_ACCESS_KEY&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_secret_access_key</span><span class="nv"> </span><span class="s">YOUR_SECRET_KEY&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨æµ‹è¯•ç¯å¢ƒå’Œå¢å¼ºçš„é‡è¯•è®¾ç½®è¿›è¡Œæµ‹è¯•çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_STAGING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LETS_ENCRYPT_MAX_RETRIES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ DigitalOcean DNS å¹¶è®¾ç½®æ›´é•¿ä¼ æ’­ç­‰å¾…æ—¶é—´çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;digitalocean&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;token</span><span class="nv"> </span><span class="s">YOUR_API_TOKEN&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROPAGATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ Google Cloud DNS å’ŒæœåŠ¡å¸æˆ·å‡­æ®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;google&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;project_id</span><span class="nv"> </span><span class="s">your-project-id&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key_id</span><span class="nv"> </span><span class="s">your-private-key-id&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key</span><span class="nv"> </span><span class="s">your-private-key&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_email</span><span class="nv"> </span><span class="s">your-service-account-email&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_5</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_id</span><span class="nv"> </span><span class="s">your-client-id&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_6</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_x509_cert_url</span><span class="nv"> </span><span class="s">your-cert-url&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="limit">Limit</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>BunkerWeb ä¸­çš„é™åˆ¶æ’ä»¶æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½æ¥å¯¹æ‚¨çš„ç½‘ç«™å¼ºåˆ¶æ‰§è¡Œé™åˆ¶ç­–ç•¥ï¼Œç¡®ä¿å…¬å¹³ä½¿ç”¨å¹¶ä¿æŠ¤æ‚¨çš„èµ„æºå…å—æ»¥ç”¨ã€æ‹’ç»æœåŠ¡æ”»å‡»å’Œè¿‡åº¦çš„èµ„æºæ¶ˆè€—ã€‚è¿™äº›ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ¯ä¸ª IP åœ°å€çš„è¿æ¥æ•°</strong> (æµæ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" />)</li>
<li><strong>åœ¨ç‰¹å®šæ—¶é—´æ®µå†…æ¯ä¸ª IP åœ°å€å’Œ URL çš„è¯·æ±‚æ•°</strong> (æµæ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" />)</li>
</ul>
<h3 id="_71">å·¥ä½œåŸç†</h3>
<ol>
<li><strong>é€Ÿç‡é™åˆ¶ï¼š</strong> è·Ÿè¸ªæ¥è‡ªæ¯ä¸ªå®¢æˆ·ç«¯ IP åœ°å€åˆ°ç‰¹å®š URL çš„è¯·æ±‚æ•°ã€‚å¦‚æœå®¢æˆ·ç«¯è¶…è¿‡é…ç½®çš„é€Ÿç‡é™åˆ¶ï¼Œåç»­è¯·æ±‚å°†è¢«æš‚æ—¶æ‹’ç»ã€‚</li>
<li><strong>è¿æ¥é™åˆ¶ï¼š</strong> ç›‘æ§å¹¶é™åˆ¶æ¥è‡ªæ¯ä¸ªå®¢æˆ·ç«¯ IP åœ°å€çš„å¹¶å‘è¿æ¥æ•°ã€‚å¯ä»¥æ ¹æ®ä½¿ç”¨çš„åè®®ï¼ˆHTTP/1ã€HTTP/2ã€HTTP/3 æˆ–æµï¼‰åº”ç”¨ä¸åŒçš„è¿æ¥é™åˆ¶ã€‚</li>
<li>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œè¶…è¿‡å®šä¹‰é™åˆ¶çš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª HTTP çŠ¶æ€ç  <strong>â€œ429 - è¯·æ±‚è¿‡å¤šâ€</strong>ï¼Œè¿™æœ‰åŠ©äºé˜²æ­¢æœåŠ¡å™¨è¿‡è½½ã€‚</li>
</ol>
<h3 id="_72">ä½¿ç”¨æ­¥éª¤</h3>
<ol>
<li><strong>å¯ç”¨è¯·æ±‚é€Ÿç‡é™åˆ¶ï¼š</strong> ä½¿ç”¨ <code>USE_LIMIT_REQ</code> å¯ç”¨è¯·æ±‚é€Ÿç‡é™åˆ¶ï¼Œå¹¶å®šä¹‰ URL æ¨¡å¼åŠå…¶ç›¸åº”çš„é€Ÿç‡é™åˆ¶ã€‚</li>
<li><strong>å¯ç”¨è¿æ¥é™åˆ¶ï¼š</strong> ä½¿ç”¨ <code>USE_LIMIT_CONN</code> å¯ç”¨è¿æ¥é™åˆ¶ï¼Œå¹¶ä¸ºä¸åŒåè®®è®¾ç½®æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚</li>
<li><strong>åº”ç”¨ç²¾ç»†æ§åˆ¶ï¼š</strong> ä¸ºä¸åŒçš„ URL åˆ›å»ºå¤šä¸ªé€Ÿç‡é™åˆ¶è§„åˆ™ï¼Œä»¥ä¾¿åœ¨æ‚¨çš„ç½‘ç«™ä¸Šæä¾›ä¸åŒçº§åˆ«çš„ä¿æŠ¤ã€‚</li>
<li><strong>ç›‘æ§æœ‰æ•ˆæ€§ï¼š</strong> ä½¿ç”¨<a href="../web-ui/">Web UI</a>æŸ¥çœ‹æœ‰å…³å—é™è¯·æ±‚å’Œè¿æ¥çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ol>
<h3 id="_73">é…ç½®è®¾ç½®</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="27:2"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><input id="__tabbed_27_2" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">è¯·æ±‚é€Ÿç‡é™åˆ¶</label><label for="__tabbed_27_2">è¿æ¥é™åˆ¶</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_REQ</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨è¯·æ±‚é™åˆ¶ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è¯·æ±‚é€Ÿç‡é™åˆ¶åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td><code>LIMIT_REQ_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>URL æ¨¡å¼ï¼š</strong> å°†åº”ç”¨é€Ÿç‡é™åˆ¶çš„ URL æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼›ä½¿ç”¨ <code>/</code> ä»¥åº”ç”¨äºæ‰€æœ‰è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td><code>LIMIT_REQ_RATE</code></td>
<td><code>2r/s</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>é€Ÿç‡é™åˆ¶ï¼š</strong> æœ€å¤§è¯·æ±‚é€Ÿç‡ï¼Œæ ¼å¼ä¸º <code>Nr/t</code>ï¼Œå…¶ä¸­ N æ˜¯è¯·æ±‚æ•°ï¼Œt æ˜¯æ—¶é—´å•ä½ï¼šsï¼ˆç§’ï¼‰ã€mï¼ˆåˆ†é’Ÿï¼‰ã€hï¼ˆå°æ—¶ï¼‰æˆ– dï¼ˆå¤©ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">é€Ÿç‡é™åˆ¶æ ¼å¼</p>
<p>é€Ÿç‡é™åˆ¶æ ¼å¼æŒ‡å®šä¸º <code>Nr/t</code>ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>N</code> æ˜¯å…è®¸çš„è¯·æ±‚æ•°</li>
<li><code>r</code> æ˜¯å­—é¢ä¸Šçš„ 'r'ï¼ˆä»£è¡¨ 'requests'ï¼‰</li>
<li><code>/</code> æ˜¯å­—é¢ä¸Šçš„æ–œæ </li>
<li><code>t</code> æ˜¯æ—¶é—´å•ä½ï¼š<code>s</code>ï¼ˆç§’ï¼‰ã€<code>m</code>ï¼ˆåˆ†é’Ÿï¼‰ã€<code>h</code>ï¼ˆå°æ—¶ï¼‰æˆ– <code>d</code>ï¼ˆå¤©ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼Œ<code>5r/m</code> è¡¨ç¤ºæ¯ä¸ª IP åœ°å€æ¯åˆ†é’Ÿå…è®¸ 5 ä¸ªè¯·æ±‚ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_CONN</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨è¿æ¥é™åˆ¶ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è¿æ¥é™åˆ¶åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP1</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>HTTP/1.X è¿æ¥æ•°ï¼š</strong> æ¯ä¸ª IP åœ°å€çš„æœ€å¤§å¹¶å‘ HTTP/1.X è¿æ¥æ•°ã€‚</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP2</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>HTTP/2 æµæ•°ï¼š</strong> æ¯ä¸ª IP åœ°å€çš„æœ€å¤§å¹¶å‘ HTTP/2 æµæ•°ã€‚</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP3</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>HTTP/3 æµæ•°ï¼š</strong> æ¯ä¸ª IP åœ°å€çš„æœ€å¤§å¹¶å‘ HTTP/3 æµæ•°ã€‚</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_STREAM</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æµè¿æ¥æ•°ï¼š</strong> æ¯ä¸ª IP åœ°å€çš„æœ€å¤§å¹¶å‘æµè¿æ¥æ•°ã€‚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>!!! info "è¿æ¥é™åˆ¶ä¸è¯·æ±‚é™åˆ¶" - <strong>è¿æ¥é™åˆ¶</strong> é™åˆ¶å•ä¸ª IP åœ°å€å¯ä»¥ç»´æŒçš„å¹¶å‘è¿æ¥æ•°ã€‚- <strong>è¯·æ±‚é€Ÿç‡é™åˆ¶</strong> é™åˆ¶ä¸€ä¸ª IP åœ°å€åœ¨å®šä¹‰çš„æ—¶é—´æ®µå†…å¯ä»¥å‘å‡ºçš„è¯·æ±‚æ•°ã€‚</p>
<pre><code>åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•å¯ä»¥å…¨é¢é˜²æŠ¤å„ç§ç±»å‹çš„æ»¥ç”¨ã€‚
</code></pre>
<div class="admonition warning">
<p class="admonition-title">è®¾ç½®é€‚å½“çš„é™åˆ¶</p>
<p>è®¾ç½®è¿‡äºä¸¥æ ¼çš„é™åˆ¶å¯èƒ½ä¼šå½±å“åˆæ³•ç”¨æˆ·ï¼Œç‰¹åˆ«æ˜¯å¯¹äº HTTP/2 å’Œ HTTP/3ï¼Œæµè§ˆå™¨é€šå¸¸ä¼šä½¿ç”¨å¤šä¸ªæµã€‚é»˜è®¤å€¼åœ¨å¤§å¤šæ•°ç”¨ä¾‹ä¸­æ˜¯å¹³è¡¡çš„ï¼Œä½†è¯·è€ƒè™‘æ ¹æ®æ‚¨çš„åº”ç”¨ç¨‹åºéœ€æ±‚å’Œç”¨æˆ·è¡Œä¸ºè¿›è¡Œè°ƒæ•´ã€‚</p>
</div>
<h3 id="_74">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="28:4"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><input id="__tabbed_28_3" name="__tabbed_28" type="radio" /><input id="__tabbed_28_4" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">åŸºæœ¬ä¿æŠ¤</label><label for="__tabbed_28_2">ä¿æŠ¤ç‰¹å®šç«¯ç‚¹</label><label for="__tabbed_28_3">é«˜æµé‡ç½‘ç«™é…ç½®</label><label for="__tabbed_28_4">API æœåŠ¡å™¨é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨é»˜è®¤è®¾ç½®æ¥ä¿æŠ¤æ‚¨æ•´ä¸ªç½‘ç«™çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>é’ˆå¯¹ä¸åŒç«¯ç‚¹è®¾ç½®ä¸åŒé€Ÿç‡é™åˆ¶çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># é’ˆå¯¹æ‰€æœ‰è¯·æ±‚çš„é»˜è®¤è§„åˆ™</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/s&quot;</span>

<span class="c1"># å¯¹ç™»å½•é¡µé¢è®¾ç½®æ›´ä¸¥æ ¼çš„é™åˆ¶</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/login&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1r/s&quot;</span>

<span class="c1"># å¯¹ API è®¾ç½®æ›´ä¸¥æ ¼çš„é™åˆ¶</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºé«˜æµé‡ç½‘ç«™è°ƒæ•´çš„é…ç½®ï¼Œå…·æœ‰æ›´å®½æ¾çš„é™åˆ¶ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># é€šç”¨é™åˆ¶</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30r/s&quot;</span>

<span class="c1"># ç®¡ç†åŒºåŸŸä¿æŠ¤</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/admin/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;50&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸º API æœåŠ¡å™¨ä¼˜åŒ–çš„é…ç½®ï¼Œé€Ÿç‡é™åˆ¶ä»¥æ¯åˆ†é’Ÿè¯·æ±‚æ•°è¡¨ç¤ºï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># å…¬å…± API ç«¯ç‚¹</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/public/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120r/m&quot;</span>

<span class="c1"># ç§æœ‰ API ç«¯ç‚¹</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/private/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300r/m&quot;</span>

<span class="c1"># è®¤è¯ç«¯ç‚¹</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/auth&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/m&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="load-balancer-pro">Load Balancer <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p align='center'><iframe style='display: block;' width='560' height='315' data-src='https://www.youtube-nocookie.com/embed/cOVp0rAt5nw' title='è´Ÿè½½å‡è¡¡å™¨' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe></p>

<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides load balancing feature to group of upstreams with optional healthchecks.</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_DICT_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>å¦</td>
<td>Shared dict size (datastore for all healthchecks).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_NAME</code></td>
<td></td>
<td>global</td>
<td>æ˜¯</td>
<td>Name of the upstream (used in REVERSE_PROXY_HOST).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_SERVERS</code></td>
<td></td>
<td>global</td>
<td>æ˜¯</td>
<td>List of servers/IPs in the server group.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_MODE</code></td>
<td><code>round-robin</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Load balancing mode (round-robin or sticky).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_STICKY_METHOD</code></td>
<td><code>ip</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Sticky session method (ip or cookie).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_RESOLVE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Dynamically resolve upstream hostnames.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE</code></td>
<td></td>
<td>global</td>
<td>æ˜¯</td>
<td>Number of keepalive connections to cache per worker.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Keepalive timeout for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIME</code></td>
<td><code>1h</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Keepalive time for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_URL</code></td>
<td><code>/status</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>The healthcheck URL.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_INTERVAL</code></td>
<td><code>2000</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Healthcheck interval in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Healthcheck timeout in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_FALL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Number of failed healthchecks before marking the server as down.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_RISE</code></td>
<td><code>1</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Number of successful healthchecks before marking the server as up.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_VALID_STATUSES</code></td>
<td><code>200</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>HTTP status considered valid in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_CONCURRENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Maximum number of concurrent healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TYPE</code></td>
<td><code>http</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Type of healthcheck (http or https).</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>æ˜¯</td>
<td>Verify SSL certificate in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_HOST</code></td>
<td></td>
<td>global</td>
<td>æ˜¯</td>
<td>Host header for healthchecks (useful for HTTPS).</td>
</tr>
</tbody>
</table>
<h2 id="metrics">Metrics</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>æŒ‡æ ‡æ’ä»¶ä¸ºæ‚¨çš„ BunkerWeb å®ä¾‹æä¾›å…¨é¢çš„ç›‘æ§å’Œæ•°æ®æ”¶é›†åŠŸèƒ½ã€‚æ­¤åŠŸèƒ½ä½¿æ‚¨èƒ½å¤Ÿè·Ÿè¸ªå„ç§æ€§èƒ½æŒ‡æ ‡ã€å®‰å…¨äº‹ä»¶å’Œç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯ï¼Œä»è€Œä¸ºæ‚¨æä¾›æœ‰å…³å—ä¿æŠ¤ç½‘ç«™å’ŒæœåŠ¡è¡Œä¸ºåŠå¥åº·çŠ¶å†µçš„å®è´µè§è§£ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>BunkerWeb åœ¨å¤„ç†è¯·æ±‚å’Œå“åº”æœŸé—´æ”¶é›†å…³é”®æŒ‡æ ‡ã€‚</li>
<li>è¿™äº›æŒ‡æ ‡åŒ…æ‹¬è¢«é˜»æ­¢è¯·æ±‚çš„è®¡æ•°å™¨ã€æ€§èƒ½æµ‹é‡ä»¥åŠå„ç§ä¸å®‰å…¨ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
<li>æ•°æ®é«˜æ•ˆåœ°å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶å…·æœ‰å¯é…ç½®çš„é™åˆ¶ä»¥é˜²æ­¢è¿‡å¤šçš„èµ„æºä½¿ç”¨ã€‚</li>
<li>å¯¹äºå¤šå®ä¾‹è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ Redis æ¥é›†ä¸­å’ŒèšåˆæŒ‡æ ‡æ•°æ®ã€‚</li>
<li>æ”¶é›†åˆ°çš„æŒ‡æ ‡å¯ä»¥é€šè¿‡ API è®¿é—®æˆ–åœ¨<a href="../web-ui/">Web UI</a>ä¸­å¯è§†åŒ–ã€‚</li>
<li>æ­¤ä¿¡æ¯å¯å¸®åŠ©æ‚¨è¯†åˆ«å®‰å…¨å¨èƒã€è§£å†³é—®é¢˜å¹¶ä¼˜åŒ–æ‚¨çš„é…ç½®ã€‚</li>
</ol>
<h3 id="_75">æŠ€æœ¯å®ç°</h3>
<p>æŒ‡æ ‡æ’ä»¶çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨ NGINX ä¸­ä½¿ç”¨å…±äº«å­—å…¸ï¼Œå…¶ä¸­ <code>metrics_datastore</code> ç”¨äº HTTPï¼Œ<code>metrics_datastore_stream</code> ç”¨äº TCP/UDP æµé‡</li>
<li>åˆ©ç”¨ LRU ç¼“å­˜è¿›è¡Œé«˜æ•ˆçš„å†…å­˜å­˜å‚¨</li>
<li>ä½¿ç”¨è®¡æ—¶å™¨åœ¨å·¥ä½œè¿›ç¨‹ä¹‹é—´å®šæœŸåŒæ­¥æ•°æ®</li>
<li>å­˜å‚¨æœ‰å…³è¢«é˜»æ­¢è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯ IP åœ°å€ã€å›½å®¶/åœ°åŒºã€æ—¶é—´æˆ³ã€è¯·æ±‚è¯¦æƒ…å’Œé˜»æ­¢åŸå› </li>
<li>é€šè¿‡é€šç”¨çš„æŒ‡æ ‡æ”¶é›†æ¥å£æ”¯æŒæ’ä»¶ç‰¹å®šçš„æŒ‡æ ‡</li>
<li>æä¾›ç”¨äºæŸ¥è¯¢æ”¶é›†åˆ°çš„æŒ‡æ ‡çš„ API ç«¯ç‚¹</li>
</ul>
<h3 id="_76">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨æŒ‡æ ‡åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> æŒ‡æ ‡æ”¶é›†é»˜è®¤å¯ç”¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>USE_METRICS</code> è®¾ç½®æ¥æ§åˆ¶æ­¤åŠŸèƒ½ã€‚</li>
<li><strong>é…ç½®å†…å­˜åˆ†é…ï¼š</strong> ä½¿ç”¨ <code>METRICS_MEMORY_SIZE</code> è®¾ç½®æ¥è®¾ç½®ç”¨äºæŒ‡æ ‡å­˜å‚¨çš„å†…å­˜é‡ã€‚</li>
<li><strong>è®¾ç½®å­˜å‚¨é™åˆ¶ï¼š</strong> ä½¿ç”¨ç›¸åº”çš„è®¾ç½®å®šä¹‰æ¯ä¸ªå·¥ä½œè¿›ç¨‹å’Œ Redis ä¸­è¦å­˜å‚¨çš„è¢«é˜»æ­¢è¯·æ±‚çš„æ•°é‡ã€‚</li>
<li><strong>è®¿é—®æ•°æ®ï¼š</strong> é€šè¿‡<a href="../web-ui/">Web UI</a>æˆ– API ç«¯ç‚¹æŸ¥çœ‹æ”¶é›†åˆ°çš„æŒ‡æ ‡ã€‚</li>
<li><strong>åˆ†æä¿¡æ¯ï¼š</strong> ä½¿ç”¨æ”¶é›†åˆ°çš„æ•°æ®æ¥è¯†åˆ«æ¨¡å¼ã€æ£€æµ‹å®‰å…¨é—®é¢˜å¹¶ä¼˜åŒ–æ‚¨çš„é…ç½®ã€‚</li>
</ol>
<h3 id="_77">æ”¶é›†çš„æŒ‡æ ‡</h3>
<p>æŒ‡æ ‡æ’ä»¶æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ol>
<li>
<p><strong>è¢«é˜»æ­¢çš„è¯·æ±‚</strong>ï¼šå¯¹äºæ¯ä¸ªè¢«é˜»æ­¢çš„è¯·æ±‚ï¼Œå°†å­˜å‚¨ä»¥ä¸‹æ•°æ®ï¼š</p>
<ul>
<li>è¯·æ±‚ ID å’Œæ—¶é—´æˆ³</li>
<li>å®¢æˆ·ç«¯ IP åœ°å€å’Œå›½å®¶/åœ°åŒºï¼ˆå¦‚æœå¯ç”¨ï¼‰</li>
<li>HTTP æ–¹æ³•å’Œ URL</li>
<li>HTTP çŠ¶æ€ç </li>
<li>ç”¨æˆ·ä»£ç†</li>
<li>é˜»æ­¢åŸå› å’Œå®‰å…¨æ¨¡å¼</li>
<li>æœåŠ¡å™¨åç§°</li>
<li>ä¸é˜»æ­¢åŸå› ç›¸å…³çš„å…¶ä»–æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>æ’ä»¶è®¡æ•°å™¨</strong>ï¼šè·Ÿè¸ªæ´»åŠ¨å’Œäº‹ä»¶çš„å„ç§æ’ä»¶ç‰¹å®šè®¡æ•°å™¨ã€‚</p>
</li>
</ol>
<h3 id="api">API è®¿é—®</h3>
<p>æŒ‡æ ‡æ•°æ®å¯ä»¥é€šè¿‡ BunkerWeb çš„å†…éƒ¨ API ç«¯ç‚¹è®¿é—®ï¼š</p>
<ul>
<li><strong>ç«¯ç‚¹</strong>ï¼š<code>/metrics/{filter}</code></li>
<li><strong>æ–¹æ³•</strong>ï¼šGET</li>
<li><strong>æè¿°</strong>ï¼šæ ¹æ®æŒ‡å®šçš„è¿‡æ»¤å™¨æ£€ç´¢æŒ‡æ ‡æ•°æ®</li>
<li><strong>å“åº”æ ¼å¼</strong>ï¼šåŒ…å«æ‰€è¯·æ±‚æŒ‡æ ‡çš„ JSON å¯¹è±¡</li>
</ul>
<p>ä¾‹å¦‚ï¼Œ<code>/metrics/requests</code> è¿”å›æœ‰å…³è¢«é˜»æ­¢è¯·æ±‚çš„ä¿¡æ¯ã€‚</p>
<div class="admonition info">
<p class="admonition-title">API è®¿é—®é…ç½®</p>
<p>è¦é€šè¿‡ API è®¿é—®æŒ‡æ ‡ï¼Œæ‚¨å¿…é¡»ç¡®ä¿ï¼š</p>
<ol>
<li>API åŠŸèƒ½å·²é€šè¿‡ <code>USE_API: "yes"</code> å¯ç”¨ï¼ˆé»˜è®¤å¯ç”¨ï¼‰</li>
<li>æ‚¨çš„å®¢æˆ·ç«¯ IP åŒ…å«åœ¨ <code>API_WHITELIST_IP</code> è®¾ç½®ä¸­ï¼ˆé»˜è®¤ä¸º <code>127.0.0.0/8</code>ï¼‰</li>
<li>æ‚¨æ­£åœ¨é€šè¿‡é…ç½®çš„ç«¯å£è®¿é—® APIï¼ˆé»˜è®¤ä¸º <code>5000</code>ï¼Œé€šè¿‡ <code>API_HTTP_PORT</code> è®¾ç½®ï¼‰</li>
<li>æ‚¨åœ¨ Host æ ‡å¤´ä¸­ä½¿ç”¨äº†æ­£ç¡®çš„ <code>API_SERVER_NAME</code> å€¼ï¼ˆé»˜è®¤ä¸º <code>bwapi</code>ï¼‰</li>
<li>å¦‚æœé…ç½®äº† <code>API_TOKEN</code>ï¼Œè¯·åœ¨è¯·æ±‚æ ‡å¤´ä¸­åŒ…å« <code>Authorization: Bearer &lt;token&gt;</code>ã€‚</li>
</ol>
<p>å…¸å‹è¯·æ±‚ï¼š</p>
<p>ä¸å¸¦ä»¤ç‰Œï¼ˆå½“æœªè®¾ç½® <code>API_TOKEN</code> æ—¶ï¼‰ï¼š
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://your-bunkerweb-instance:5000/metrics/requests
</code></pre></div></p>
<p>å¸¦ä»¤ç‰Œï¼ˆå½“è®¾ç½®äº† <code>API_TOKEN</code> æ—¶ï¼‰ï¼š
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://your-bunkerweb-instance:5000/metrics/requests
</code></pre></div></p>
<p>å¦‚æœæ‚¨å·²å°† <code>API_SERVER_NAME</code> è‡ªå®šä¹‰ä¸ºé»˜è®¤ <code>bwapi</code> ä»¥å¤–çš„å€¼ï¼Œè¯·åœ¨ Host æ ‡å¤´ä¸­ä½¿ç”¨è¯¥å€¼ã€‚</p>
<p>å¯¹äºå®‰å…¨çš„ç”Ÿäº§ç¯å¢ƒï¼Œè¯·å°† API è®¿é—®é™åˆ¶ä¸ºå—ä¿¡ä»»çš„ IPï¼Œå¹¶å¯ç”¨ <code>API_TOKEN</code>ã€‚</p>
</div>
<h3 id="_78">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_METRICS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨æŒ‡æ ‡ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨æŒ‡æ ‡çš„æ”¶é›†å’Œæ£€ç´¢ã€‚</td>
</tr>
<tr>
<td><code>METRICS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å†…å­˜å¤§å°ï¼š</strong> æŒ‡æ ‡å†…éƒ¨å­˜å‚¨çš„å¤§å°ï¼ˆä¾‹å¦‚ï¼Œ<code>16m</code>ã€<code>32m</code>ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æœ€å¤§è¢«é˜»æ­¢è¯·æ±‚æ•°ï¼š</strong> æ¯ä¸ªå·¥ä½œè¿›ç¨‹è¦å­˜å‚¨çš„æœ€å¤§è¢«é˜»æ­¢è¯·æ±‚æ•°ã€‚</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code></td>
<td><code>100000</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis æœ€å¤§è¢«é˜»æ­¢è¯·æ±‚æ•°ï¼š</strong> åœ¨ Redis ä¸­è¦å­˜å‚¨çš„æœ€å¤§è¢«é˜»æ­¢è¯·æ±‚æ•°ã€‚</td>
</tr>
<tr>
<td><code>METRICS_SAVE_TO_REDIS</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å°†æŒ‡æ ‡ä¿å­˜åˆ° Redisï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å°†æŒ‡æ ‡ï¼ˆè®¡æ•°å™¨å’Œè¡¨ï¼‰ä¿å­˜åˆ° Redisï¼Œä»¥å®ç°é›†ç¾¤èŒƒå›´çš„èšåˆã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">è°ƒæ•´å†…å­˜åˆ†é…å¤§å°</p>
<p>åº”æ ¹æ®æ‚¨çš„æµé‡å’Œå®ä¾‹æ•°é‡è°ƒæ•´ <code>METRICS_MEMORY_SIZE</code> è®¾ç½®ã€‚å¯¹äºé«˜æµé‡ç½‘ç«™ï¼Œè¯·è€ƒè™‘å¢åŠ æ­¤å€¼ä»¥ç¡®ä¿æ‰€æœ‰æŒ‡æ ‡éƒ½èƒ½è¢«æ•è·è€Œä¸ä¼šä¸¢å¤±æ•°æ®ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">Redis é›†æˆ</p>
<p>å½“ BunkerWeb é…ç½®ä¸ºä½¿ç”¨<a href="#redis">Redis</a>æ—¶ï¼ŒæŒ‡æ ‡æ’ä»¶å°†è‡ªåŠ¨å°†è¢«é˜»æ­¢çš„è¯·æ±‚æ•°æ®åŒæ­¥åˆ° Redis æœåŠ¡å™¨ã€‚è¿™æä¾›äº†è·¨å¤šä¸ª BunkerWeb å®ä¾‹çš„å®‰å…¨äº‹ä»¶çš„é›†ä¸­è§†å›¾ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">æ€§èƒ½æ³¨æ„äº‹é¡¹</p>
<p>ä¸º <code>METRICS_MAX_BLOCKED_REQUESTS</code> æˆ– <code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code> è®¾ç½®éå¸¸é«˜çš„å€¼ä¼šå¢åŠ å†…å­˜ä½¿ç”¨é‡ã€‚è¯·ç›‘æ§æ‚¨çš„ç³»ç»Ÿèµ„æºï¼Œå¹¶æ ¹æ®æ‚¨çš„å®é™…éœ€æ±‚å’Œå¯ç”¨èµ„æºè°ƒæ•´è¿™äº›å€¼ã€‚</p>
</div>
<div class="admonition note">
<p class="admonition-title">å·¥ä½œè¿›ç¨‹ç‰¹å®šå­˜å‚¨</p>
<p>æ¯ä¸ª NGINX å·¥ä½œè¿›ç¨‹éƒ½åœ¨å†…å­˜ä¸­ç»´æŠ¤è‡ªå·±çš„æŒ‡æ ‡ã€‚é€šè¿‡ API è®¿é—®æŒ‡æ ‡æ—¶ï¼Œä¼šè‡ªåŠ¨èšåˆæ‰€æœ‰å·¥ä½œè¿›ç¨‹çš„æ•°æ®ä»¥æä¾›å®Œæ•´çš„è§†å›¾ã€‚</p>
</div>
<h3 id="_79">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="29:4"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><input id="__tabbed_29_2" name="__tabbed_29" type="radio" /><input id="__tabbed_29_3" name="__tabbed_29" type="radio" /><input id="__tabbed_29_4" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_29_2">ä½èµ„æºç¯å¢ƒ</label><label for="__tabbed_29_3">é«˜æµé‡ç¯å¢ƒ</label><label for="__tabbed_29_4">ç¦ç”¨æŒ‡æ ‡</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>é€‚ç”¨äºå¤§å¤šæ•°éƒ¨ç½²çš„é»˜è®¤é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºèµ„æºæœ‰é™çš„ç¯å¢ƒä¼˜åŒ–çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>éœ€è¦è·Ÿè¸ªæ›´å¤šå®‰å…¨äº‹ä»¶çš„é«˜æµé‡ç½‘ç«™çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç¦ç”¨æŒ‡æ ‡æ”¶é›†çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="migration-pro">Migration <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Migration of BunkerWeb configuration between instances made easy via the web UI</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>æ‚é¡¹æ’ä»¶æä¾›äº†<strong>å¿…è¦çš„åŸºå‡†è®¾ç½®</strong>ï¼Œæœ‰åŠ©äºç»´æŠ¤æ‚¨ç½‘ç«™çš„å®‰å…¨æ€§å’ŒåŠŸèƒ½æ€§ã€‚è¿™ä¸ªæ ¸å¿ƒç»„ä»¶æä¾›äº†å…¨é¢çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æœåŠ¡å™¨è¡Œä¸º</strong> - é…ç½®æ‚¨çš„æœåŠ¡å™¨å¦‚ä½•å“åº”å„ç§è¯·æ±‚</li>
<li><strong>HTTP è®¾ç½®</strong> - ç®¡ç†æ–¹æ³•ã€è¯·æ±‚å¤§å°å’Œåè®®é€‰é¡¹</li>
<li><strong>æ–‡ä»¶ç®¡ç†</strong> - æ§åˆ¶é™æ€æ–‡ä»¶çš„æä¾›å¹¶ä¼˜åŒ–äº¤ä»˜</li>
<li><strong>åè®®æ”¯æŒ</strong> - å¯ç”¨ç°ä»£ HTTP åè®®ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½</li>
<li><strong>ç³»ç»Ÿé…ç½®</strong> - æ‰©å±•åŠŸèƒ½å¹¶æé«˜å®‰å…¨æ€§</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯éœ€è¦é™åˆ¶ HTTP æ–¹æ³•ã€ç®¡ç†è¯·æ±‚å¤§å°ã€ä¼˜åŒ–æ–‡ä»¶ç¼“å­˜ï¼Œè¿˜æ˜¯æ§åˆ¶æœåŠ¡å™¨å¦‚ä½•å“åº”å„ç§è¯·æ±‚ï¼Œæ­¤æ’ä»¶éƒ½ä¸ºæ‚¨æä¾›äº†<strong>å¾®è°ƒ Web æœåŠ¡è¡Œä¸º</strong>çš„å·¥å…·ï¼ŒåŒæ—¶ä¼˜åŒ–äº†æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚</p>
<h3 id="_80">ä¸»è¦åŠŸèƒ½</h3>
<table>
<thead>
<tr>
<th>åŠŸèƒ½ç±»åˆ«</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>HTTP æ–¹æ³•æ§åˆ¶</strong></td>
<td>å®šä¹‰æ‚¨çš„åº”ç”¨ç¨‹åºå¯æ¥å—å“ªäº› HTTP æ–¹æ³•</td>
</tr>
<tr>
<td><strong>é»˜è®¤æœåŠ¡å™¨ä¿æŠ¤</strong></td>
<td>é˜²æ­¢é€šè¿‡ä¸»æœºåä¸åŒ¹é…è¿›è¡Œæœªç»æˆæƒçš„è®¿é—®ï¼Œå¹¶å¼ºåˆ¶ä½¿ç”¨ SNI ä»¥ç¡®ä¿å®‰å…¨è¿æ¥</td>
</tr>
<tr>
<td><strong>è¯·æ±‚å¤§å°ç®¡ç†</strong></td>
<td>ä¸ºå®¢æˆ·ç«¯è¯·æ±‚ä½“å’Œæ–‡ä»¶ä¸Šä¼ è®¾ç½®é™åˆ¶</td>
</tr>
<tr>
<td><strong>é™æ€æ–‡ä»¶æœåŠ¡</strong></td>
<td>é…ç½®å’Œä¼˜åŒ–ä»è‡ªå®šä¹‰æ ¹æ–‡ä»¶å¤¹äº¤ä»˜é™æ€å†…å®¹</td>
</tr>
<tr>
<td><strong>æ–‡ä»¶ç¼“å­˜</strong></td>
<td>é€šè¿‡å…·æœ‰å¯è‡ªå®šä¹‰è®¾ç½®çš„é«˜çº§æ–‡ä»¶æè¿°ç¬¦ç¼“å­˜æœºåˆ¶æé«˜æ€§èƒ½</td>
</tr>
<tr>
<td><strong>åè®®æ”¯æŒ</strong></td>
<td>é…ç½®ç°ä»£ HTTP åè®®é€‰é¡¹ (HTTP2/HTTP3) å’Œ Alt-Svc ç«¯å£è®¾ç½®</td>
</tr>
<tr>
<td><strong>åŒ¿åæŠ¥å‘Š</strong></td>
<td>å¯é€‰çš„ä½¿ç”¨ç»Ÿè®¡æŠ¥å‘Šï¼Œä»¥å¸®åŠ©æ”¹è¿› BunkerWeb</td>
</tr>
<tr>
<td><strong>å¤–éƒ¨æ’ä»¶æ”¯æŒ</strong></td>
<td>é€šè¿‡ URL é›†æˆå¤–éƒ¨æ’ä»¶æ¥æ‰©å±•åŠŸèƒ½</td>
</tr>
<tr>
<td><strong>HTTP çŠ¶æ€æ§åˆ¶</strong></td>
<td>é…ç½®æ‚¨çš„æœåŠ¡å™¨åœ¨æ‹’ç»è¯·æ±‚æ—¶çš„å“åº”æ–¹å¼ï¼ˆåŒ…æ‹¬ç»ˆæ­¢è¿æ¥ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="_81">é…ç½®æŒ‡å—</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="30:8"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><input id="__tabbed_30_2" name="__tabbed_30" type="radio" /><input id="__tabbed_30_3" name="__tabbed_30" type="radio" /><input id="__tabbed_30_4" name="__tabbed_30" type="radio" /><input id="__tabbed_30_5" name="__tabbed_30" type="radio" /><input id="__tabbed_30_6" name="__tabbed_30" type="radio" /><input id="__tabbed_30_7" name="__tabbed_30" type="radio" /><input id="__tabbed_30_8" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">é»˜è®¤æœåŠ¡å™¨å®‰å…¨</label><label for="__tabbed_30_2">æ‹’ç» HTTP çŠ¶æ€</label><label for="__tabbed_30_3">HTTP æ–¹æ³•</label><label for="__tabbed_30_4">è¯·æ±‚å¤§å°é™åˆ¶</label><label for="__tabbed_30_5">åè®®æ”¯æŒ</label><label for="__tabbed_30_6">é™æ€æ–‡ä»¶æœåŠ¡</label><label for="__tabbed_30_7">ç³»ç»Ÿè®¾ç½®</label><label for="__tabbed_30_8">æ–‡ä»¶ç¼“å­˜</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>é»˜è®¤æœåŠ¡å™¨æ§åˆ¶</strong></p>
<p>åœ¨ HTTP ä¸­ï¼Œ<code>Host</code> æ ‡å¤´æŒ‡å®šç›®æ ‡æœåŠ¡å™¨ï¼Œä½†å®ƒå¯èƒ½ç¼ºå¤±æˆ–æœªçŸ¥ï¼Œè¿™é€šå¸¸æ˜¯ç”±äºæœºå™¨äººæ‰«ææ¼æ´é€ æˆçš„ã€‚</p>
<p>è¦é˜»æ­¢æ­¤ç±»è¯·æ±‚ï¼š</p>
<ul>
<li>å°† <code>DISABLE_DEFAULT_SERVER</code> è®¾ç½®ä¸º <code>yes</code>ï¼Œä»¥ä½¿ç”¨ <a href="https://http.dev/444">NGINX çš„ <code>444</code> çŠ¶æ€ç </a> é™é»˜æ‹’ç»æ­¤ç±»è¯·æ±‚ã€‚</li>
<li>ä¸ºäº†æ›´ä¸¥æ ¼çš„å®‰å…¨æ€§ï¼Œå¯ç”¨ <code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code> ä»¥æ‹’ç»æ²¡æœ‰æœ‰æ•ˆ SNI çš„ SSL/TLS è¿æ¥ã€‚</li>
</ul>
<div class="admonition success">
<p class="admonition-title">å®‰å…¨ä¼˜åŠ¿</p>
<ul>
<li>é˜»æ­¢ Host æ ‡å¤´æ“çºµå’Œè™šæ‹Ÿä¸»æœºæ‰«æ</li>
<li>å‡è½» HTTP è¯·æ±‚èµ°ç§é£é™©</li>
<li>ç§»é™¤é»˜è®¤æœåŠ¡å™¨ä½œä¸ºæ”»å‡»åª’ä»‹</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DISABLE_DEFAULT_SERVER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>é»˜è®¤æœåŠ¡å™¨ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥åœ¨æ²¡æœ‰ä¸»æœºåä¸è¯·æ±‚åŒ¹é…æ—¶ç¦ç”¨é»˜è®¤æœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td><code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>ä¸¥æ ¼ SNIï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œè¦æ±‚ HTTPS è¿æ¥ä½¿ç”¨ SNIï¼Œå¹¶æ‹’ç»æ²¡æœ‰æœ‰æ•ˆ SNI çš„è¿æ¥ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">SNI å¼ºåˆ¶æ‰§è¡Œ</p>
<p>å¯ç”¨ä¸¥æ ¼çš„ SNI éªŒè¯å¯æä¾›æ›´å¼ºçš„å®‰å…¨æ€§ï¼Œä½†å¦‚æœ BunkerWeb ä½äºä¸€ä¸ªè½¬å‘ HTTPS è¯·æ±‚ä½†æœªä¿ç•™ SNI ä¿¡æ¯çš„åå‘ä»£ç†ä¹‹åï¼Œå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ä¹‹å‰è¯·è¿›è¡Œå½»åº•æµ‹è¯•ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>HTTP çŠ¶æ€æ§åˆ¶</strong></p>
<p>å¤„ç†è¢«æ‹’ç»çš„å®¢æˆ·ç«¯è®¿é—®çš„ç¬¬ä¸€æ­¥æ˜¯å®šä¹‰é€‚å½“çš„æ“ä½œã€‚è¿™å¯ä»¥ä½¿ç”¨ <code>DENY_HTTP_STATUS</code> è®¾ç½®è¿›è¡Œé…ç½®ã€‚å½“ BunkerWeb æ‹’ç»ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤è®¾ç½®æ§åˆ¶å…¶å“åº”ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›ä¸€ä¸ª <code>403 Forbidden</code> çŠ¶æ€ï¼Œå¹¶å‘å®¢æˆ·ç«¯æ˜¾ç¤ºä¸€ä¸ªç½‘é¡µæˆ–è‡ªå®šä¹‰å†…å®¹ã€‚</p>
<p>æˆ–è€…ï¼Œå°†å…¶è®¾ç½®ä¸º <code>444</code> ä¼šç«‹å³å…³é—­è¿æ¥è€Œä¸å‘é€ä»»ä½•å“åº”ã€‚è¿™ä¸ª<a href="https://http.dev/444">éæ ‡å‡†çŠ¶æ€ç </a>ï¼Œç‰¹å®šäº NGINXï¼Œå¯¹äºé™é»˜ä¸¢å¼ƒä¸éœ€è¦çš„è¯·æ±‚å¾ˆæœ‰ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DENY_HTTP_STATUS</code></td>
<td><code>403</code></td>
<td>global</td>
<td>no</td>
<td><strong>æ‹’ç» HTTP çŠ¶æ€ï¼š</strong> è¯·æ±‚è¢«æ‹’ç»æ—¶å‘é€çš„ HTTP çŠ¶æ€ç ï¼ˆ403 æˆ– 444ï¼‰ã€‚ä»£ç  444 ä¼šå…³é—­è¿æ¥ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">444 çŠ¶æ€ç çš„æ³¨æ„äº‹é¡¹</p>
<p>ç”±äºå®¢æˆ·ç«¯æ”¶ä¸åˆ°ä»»ä½•åé¦ˆï¼Œæ•…éšœæ’æŸ¥å¯èƒ½ä¼šæ›´å…·æŒ‘æˆ˜æ€§ã€‚åªæœ‰åœ¨æ‚¨å·²å½»åº•è§£å†³è¯¯æŠ¥é—®é¢˜ã€å¯¹ BunkerWeb æœ‰ä¸°å¯Œç»éªŒå¹¶éœ€è¦æ›´é«˜å®‰å…¨çº§åˆ«æ—¶ï¼Œæ‰å»ºè®®è®¾ç½®ä¸º <code>444</code>ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">æµæ¨¡å¼</p>
<p>åœ¨<strong>æµæ¨¡å¼</strong>ä¸‹ï¼Œæ­¤è®¾ç½®å§‹ç»ˆå¼ºåˆ¶ä¸º <code>444</code>ï¼Œè¿™æ„å‘³ç€æ— è®ºé…ç½®çš„å€¼å¦‚ä½•ï¼Œè¿æ¥éƒ½å°†è¢«å…³é—­ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>HTTP æ–¹æ³•æ§åˆ¶</strong></p>
<p>å°† HTTP æ–¹æ³•é™åˆ¶ä¸ºåº”ç”¨ç¨‹åºæ‰€éœ€çš„é‚£äº›æ–¹æ³•ï¼Œæ˜¯éµå¾ªæœ€å°æƒé™åŸåˆ™çš„ä¸€é¡¹åŸºæœ¬å®‰å…¨æªæ–½ã€‚é€šè¿‡æ˜ç¡®å®šä¹‰å¯æ¥å—çš„ HTTP æ–¹æ³•ï¼Œæ‚¨å¯ä»¥æœ€å¤§é™åº¦åœ°é™ä½é€šè¿‡æœªä½¿ç”¨æˆ–å±é™©çš„æ–¹æ³•è¢«åˆ©ç”¨çš„é£é™©ã€‚</p>
<p>æ­¤åŠŸèƒ½ä½¿ç”¨ <code>ALLOWED_METHODS</code> è®¾ç½®è¿›è¡Œé…ç½®ï¼Œå…¶ä¸­æ–¹æ³•ç”¨ <code>|</code> åˆ†éš”ï¼ˆé»˜è®¤å€¼ï¼š<code>GET|POST|HEAD</code>ï¼‰ã€‚å¦‚æœå®¢æˆ·ç«¯å°è¯•ä½¿ç”¨æœªåˆ—å‡ºçš„æ–¹æ³•ï¼ŒæœåŠ¡å™¨å°†ä»¥ <strong>405 - Method Not Allowed</strong> çŠ¶æ€å“åº”ã€‚</p>
<p>å¯¹äºå¤§å¤šæ•°ç½‘ç«™ï¼Œé»˜è®¤çš„ <code>GET|POST|HEAD</code> å°±è¶³å¤Ÿäº†ã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä½¿ç”¨ RESTful APIï¼Œæ‚¨å¯èƒ½éœ€è¦åŒ…å« <code>PUT</code> å’Œ <code>DELETE</code> ç­‰æ–¹æ³•ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å®‰å…¨ä¼˜åŠ¿</p>
<ul>
<li>é˜²æ­¢åˆ©ç”¨æœªä½¿ç”¨æˆ–ä¸å¿…è¦çš„ HTTP æ–¹æ³•</li>
<li>é€šè¿‡ç¦ç”¨å¯èƒ½æœ‰å®³çš„æ–¹æ³•æ¥å‡å°‘æ”»å‡»é¢</li>
<li>é˜»æ­¢æ”»å‡»è€…ä½¿ç”¨çš„ HTTP æ–¹æ³•æšä¸¾æŠ€æœ¯</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALLOWED_METHODS</code></td>
<td><code>GET   | POST   | HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP æ–¹æ³•ï¼š</strong> å…è®¸çš„ HTTP æ–¹æ³•åˆ—è¡¨ï¼Œç”¨ç«–çº¿å­—ç¬¦åˆ†éš”ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition abstract">
<p class="admonition-title">CORS å’Œé¢„æ£€è¯·æ±‚</p>
<p>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºæ”¯æŒ<a href="#cors">è·¨æºèµ„æºå…±äº« (CORS)</a>ï¼Œæ‚¨åº”è¯¥åœ¨ <code>ALLOWED_METHODS</code> è®¾ç½®ä¸­åŒ…å« <code>OPTIONS</code> æ–¹æ³•ä»¥å¤„ç†é¢„æ£€è¯·æ±‚ã€‚è¿™ç¡®ä¿äº†æµè§ˆå™¨å‘å‡ºè·¨æºè¯·æ±‚æ—¶çš„æ­£å¸¸åŠŸèƒ½ã€‚</p>
</div>
<div class="admonition danger">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<ul>
<li><strong>é¿å…å¯ç”¨ <code>TRACE</code> æˆ– <code>CONNECT</code>ï¼š</strong> è¿™äº›æ–¹æ³•å¾ˆå°‘éœ€è¦ï¼Œå¹¶ä¸”å¯èƒ½å¼•å…¥é‡å¤§çš„å®‰å…¨é£é™©ï¼Œä¾‹å¦‚å¯ç”¨è·¨ç«™è·Ÿè¸ª (XST) æˆ–éš§é“æ”»å‡»ã€‚</li>
<li><strong>å®šæœŸå®¡æŸ¥å…è®¸çš„æ–¹æ³•ï¼š</strong> å®šæœŸå®¡æ ¸ <code>ALLOWED_METHODS</code> è®¾ç½®ï¼Œä»¥ç¡®ä¿å…¶ä¸æ‚¨åº”ç”¨ç¨‹åºçš„å½“å‰è¦æ±‚ä¿æŒä¸€è‡´ã€‚</li>
<li><strong>éƒ¨ç½²å‰è¿›è¡Œå½»åº•æµ‹è¯•ï¼š</strong> å¯¹ HTTP æ–¹æ³•é™åˆ¶çš„æ›´æ”¹å¯èƒ½ä¼šå½±å“åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚åœ¨å°†å…¶åº”ç”¨äºç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¯·åœ¨é¢„æ¼”ç¯å¢ƒä¸­éªŒè¯æ‚¨çš„é…ç½®ã€‚</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>è¯·æ±‚å¤§å°é™åˆ¶</strong></p>
<p>æœ€å¤§è¯·æ±‚ä½“å¤§å°å¯ä»¥ä½¿ç”¨ <code>MAX_CLIENT_SIZE</code> è®¾ç½®è¿›è¡Œæ§åˆ¶ï¼ˆé»˜è®¤å€¼ï¼š<code>10m</code>ï¼‰ã€‚æ¥å—çš„å€¼éµå¾ª<a href="https://nginx.org/en/docs/syntax.html">æ­¤å¤„</a>æè¿°çš„è¯­æ³•ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å®‰å…¨ä¼˜åŠ¿</p>
<ul>
<li>é˜²æ­¢ç”±è¿‡å¤§è´Ÿè½½å¤§å°å¼•èµ·çš„æ‹’ç»æœåŠ¡æ”»å‡»</li>
<li>å‡è½»ç¼“å†²åŒºæº¢å‡ºæ¼æ´</li>
<li>é˜²æ­¢æ–‡ä»¶ä¸Šä¼ æ”»å‡»</li>
<li>é™ä½æœåŠ¡å™¨èµ„æºè€—å°½çš„é£é™©</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MAX_CLIENT_SIZE</code></td>
<td><code>10m</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>æœ€å¤§è¯·æ±‚å¤§å°ï¼š</strong> å®¢æˆ·ç«¯è¯·æ±‚ä½“ï¼ˆä¾‹å¦‚æ–‡ä»¶ä¸Šä¼ ï¼‰å…è®¸çš„æœ€å¤§å¤§å°ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">è¯·æ±‚å¤§å°é…ç½®æœ€ä½³å®è·µ</p>
<p>å¦‚æœæ‚¨éœ€è¦å…è®¸æ— é™å¤§å°çš„è¯·æ±‚ä½“ï¼Œå¯ä»¥å°† <code>MAX_CLIENT_SIZE</code> çš„å€¼è®¾ç½®ä¸º <code>0</code>ã€‚ä½†æ˜¯ï¼Œç”±äºæ½œåœ¨çš„å®‰å…¨å’Œæ€§èƒ½é£é™©ï¼Œ<strong>ä¸æ¨è</strong>è¿™æ ·åšã€‚</p>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>å§‹ç»ˆå°† <code>MAX_CLIENT_SIZE</code> é…ç½®ä¸ºæ»¡è¶³æ‚¨åº”ç”¨ç¨‹åºåˆæ³•è¦æ±‚çš„æœ€å°å€¼ã€‚</li>
<li>å®šæœŸå®¡æŸ¥å’Œè°ƒæ•´æ­¤è®¾ç½®ï¼Œä»¥é€‚åº”æ‚¨åº”ç”¨ç¨‹åºä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚</li>
<li>é™¤éç»å¯¹å¿…è¦ï¼Œå¦åˆ™é¿å…è®¾ç½®ä¸º <code>0</code>ï¼Œå› ä¸ºå®ƒå¯èƒ½ä½¿æ‚¨çš„æœåŠ¡å™¨é¢ä¸´æ‹’ç»æœåŠ¡æ”»å‡»å’Œèµ„æºè€—å°½çš„é£é™©ã€‚</li>
</ul>
<p>é€šè¿‡ä»”ç»†ç®¡ç†æ­¤è®¾ç½®ï¼Œæ‚¨å¯ä»¥ç¡®ä¿åº”ç”¨ç¨‹åºçš„æœ€ä½³å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>HTTP åè®®è®¾ç½®</strong></p>
<p>åƒ HTTP/2 å’Œ HTTP/3 è¿™æ ·çš„ç°ä»£ HTTP åè®®å¯ä»¥æé«˜æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚BunkerWeb å…è®¸è½»æ¾é…ç½®è¿™äº›åè®®ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å®‰å…¨å’Œæ€§èƒ½ä¼˜åŠ¿</p>
<ul>
<li><strong>å®‰å…¨ä¼˜åŠ¿ï¼š</strong> åƒ HTTP/2 å’Œ HTTP/3 è¿™æ ·çš„ç°ä»£åè®®é»˜è®¤å¼ºåˆ¶ä½¿ç”¨ TLS/HTTPSï¼Œå‡å°‘äº†å¯¹æŸäº›æ”»å‡»çš„æ˜“æ„Ÿæ€§ï¼Œå¹¶é€šè¿‡åŠ å¯†å¤´ï¼ˆHTTP/3ï¼‰æé«˜äº†éšç§æ€§ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong> å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€æœåŠ¡å™¨æ¨é€å’ŒäºŒè¿›åˆ¶æ•°æ®ä¼ è¾“ç­‰åŠŸèƒ½æé«˜äº†é€Ÿåº¦å’Œæ•ˆç‡ã€‚</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP ç›‘å¬ï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œå“åº”ï¼ˆä¸å®‰å…¨çš„ï¼‰HTTP è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td><code>HTTP2</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP2ï¼š</strong> å½“å¯ç”¨ HTTPS æ—¶ï¼Œæ”¯æŒ HTTP2 åè®®ã€‚</td>
</tr>
<tr>
<td><code>HTTP3</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP3ï¼š</strong> å½“å¯ç”¨ HTTPS æ—¶ï¼Œæ”¯æŒ HTTP3 åè®®ã€‚</td>
</tr>
<tr>
<td><code>HTTP3_ALT_SVC_PORT</code></td>
<td><code>443</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP3 Alt-Svc ç«¯å£ï¼š</strong> åœ¨ Alt-Svc æ ‡å¤´ä¸­ç”¨äº HTTP3 çš„ç«¯å£ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition example">
<p class="admonition-title">å…³äº HTTP/3</p>
<p>HTTP/3 æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨ QUIC over UDP è€Œä¸æ˜¯ TCPï¼Œè§£å†³äº†è¯¸å¦‚é˜Ÿå¤´é˜»å¡ç­‰é—®é¢˜ï¼Œä»¥å®ç°æ›´å¿«ã€æ›´å¯é çš„è¿æ¥ã€‚</p>
<p>NGINX ä» 1.25.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†å¯¹ HTTP/3 å’Œ QUIC çš„å®éªŒæ€§æ”¯æŒã€‚ä½†æ˜¯ï¼Œæ­¤åŠŸèƒ½ä»å¤„äºå®éªŒé˜¶æ®µï¼Œå»ºè®®åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨æ—¶ä¿æŒè°¨æ…ã€‚æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚é˜… <a href="https://nginx.org/en/docs/quic.html">NGINX çš„å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p>å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ HTTP/3 ä¹‹å‰è¿›è¡Œå½»åº•æµ‹è¯•ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>æ–‡ä»¶æœåŠ¡é…ç½®</strong></p>
<p>BunkerWeb å¯ä»¥ç›´æ¥æä¾›é™æ€æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„åå‘ä»£ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä» <code>/var/www/html/{server_name}</code> æä¾›ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVE_FILES</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>æä¾›æ–‡ä»¶ï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼ŒBunkerWeb å°†ä»é…ç½®çš„æ ¹æ–‡ä»¶å¤¹æä¾›é™æ€æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td><code>ROOT_FOLDER</code></td>
<td><code>/var/www/html/{server_name}</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>æ ¹æ–‡ä»¶å¤¹ï¼š</strong> æä¾›é™æ€æ–‡ä»¶çš„ç›®å½•ã€‚ä¸ºç©ºè¡¨ç¤ºä½¿ç”¨é»˜è®¤ä½ç½®ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">é™æ€æ–‡ä»¶æœåŠ¡æœ€ä½³å®è·µ</p>
<ul>
<li><strong>ç›´æ¥æœåŠ¡ï¼š</strong> å½“ BunkerWeb è´Ÿè´£ç›´æ¥æä¾›é™æ€æ–‡ä»¶æ—¶ï¼Œå¯ç”¨æ–‡ä»¶æœåŠ¡ (<code>SERVE_FILES=yes</code>)ã€‚</li>
<li><strong>åå‘ä»£ç†ï¼š</strong> å¦‚æœ BunkerWeb ä½œä¸ºåå‘ä»£ç†ï¼Œ<strong>åœç”¨æ–‡ä»¶æœåŠ¡</strong> (<code>SERVE_FILES=no</code>) ä»¥å‡å°‘æ”»å‡»é¢å¹¶é¿å…æš´éœ²ä¸å¿…è¦çš„ç›®å½•ã€‚</li>
<li><strong>æƒé™ï¼š</strong> ç¡®ä¿æ­£ç¡®çš„æ–‡ä»¶æƒé™å’Œè·¯å¾„é…ç½®ï¼Œä»¥é˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ã€‚</li>
<li><strong>å®‰å…¨ï¼š</strong> é¿å…å› é…ç½®ä¸å½“è€Œæš´éœ²æ•æ„Ÿç›®å½•æˆ–æ–‡ä»¶ã€‚</li>
</ul>
<p>é€šè¿‡ä»”ç»†ç®¡ç†é™æ€æ–‡ä»¶æœåŠ¡ï¼Œæ‚¨å¯ä»¥åœ¨ä¿æŒå®‰å…¨ç¯å¢ƒçš„åŒæ—¶ä¼˜åŒ–æ€§èƒ½ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>æ’ä»¶å’Œç³»ç»Ÿç®¡ç†</strong></p>
<p>è¿™äº›è®¾ç½®ç®¡ç† BunkerWeb ä¸å¤–éƒ¨ç³»ç»Ÿçš„äº¤äº’ï¼Œå¹¶é€šè¿‡å¯é€‰çš„åŒ¿åä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ä¸ºæ”¹è¿›äº§å“åšå‡ºè´¡çŒ®ã€‚</p>
<p><strong>åŒ¿åæŠ¥å‘Š</strong></p>
<p>åŒ¿åæŠ¥å‘Šä¸º BunkerWeb å›¢é˜Ÿæä¾›äº†æœ‰å…³è½¯ä»¶ä½¿ç”¨æƒ…å†µçš„è§è§£ã€‚è¿™æœ‰åŠ©äºç¡®å®šéœ€è¦æ”¹è¿›çš„é¢†åŸŸå¹¶ä¼˜å…ˆå¼€å‘åŠŸèƒ½ã€‚æŠ¥å‘Šä¸¥æ ¼æ˜¯ç»Ÿè®¡æ€§çš„ï¼Œä¸åŒ…å«ä»»ä½•æ•æ„Ÿæˆ–ä¸ªäººå¯è¯†åˆ«ä¿¡æ¯ã€‚å®ƒä»¬æ¶µç›–ï¼š</p>
<ul>
<li>å¯ç”¨çš„åŠŸèƒ½</li>
<li>é€šç”¨é…ç½®æ¨¡å¼</li>
</ul>
<p>å¦‚æœæ‚¨æ„¿æ„ï¼Œå¯ä»¥é€šè¿‡å°† <code>SEND_ANONYMOUS_REPORT</code> è®¾ç½®ä¸º <code>no</code> æ¥ç¦ç”¨æ­¤åŠŸèƒ½ã€‚</p>
<p><strong>å¤–éƒ¨æ’ä»¶</strong></p>
<p>å¤–éƒ¨æ’ä»¶ä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡é›†æˆç¬¬ä¸‰æ–¹æ¨¡å—æ¥æ‰©å±• BunkerWeb çš„åŠŸèƒ½ã€‚è¿™å…è®¸è¿›è¡Œé¢å¤–çš„å®šåˆ¶å’Œé«˜çº§ç”¨ä¾‹ã€‚</p>
<div class="admonition danger">
<p class="admonition-title">å¤–éƒ¨æ’ä»¶å®‰å…¨</p>
<p><strong>å¦‚æœæœªç»é€‚å½“å®¡æŸ¥ï¼Œå¤–éƒ¨æ’ä»¶å¯èƒ½ä¼šå¼•å…¥å®‰å…¨é£é™©ã€‚</strong> è¯·éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æ½œåœ¨å¨èƒï¼š</p>
<ul>
<li>ä»…ä½¿ç”¨æ¥è‡ªå¯ä¿¡æ¥æºçš„æ’ä»¶ã€‚</li>
<li>åœ¨å¯ç”¨æ—¶ä½¿ç”¨æ ¡éªŒå’ŒéªŒè¯æ’ä»¶çš„å®Œæ•´æ€§ã€‚</li>
<li>å®šæœŸå®¡æŸ¥å’Œæ›´æ–°æ’ä»¶ä»¥ç¡®ä¿å®‰å…¨æ€§å’Œå…¼å®¹æ€§ã€‚</li>
</ul>
<p>æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚é˜…<a href="../plugins/">æ’ä»¶æ–‡æ¡£</a>ã€‚</p>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SEND_ANONYMOUS_REPORT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>åŒ¿åæŠ¥å‘Šï¼š</strong> å‘ BunkerWeb ç»´æŠ¤è€…å‘é€åŒ¿åä½¿ç”¨æŠ¥å‘Šã€‚</td>
</tr>
<tr>
<td><code>EXTERNAL_PLUGIN_URLS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>å¤–éƒ¨æ’ä»¶ï¼š</strong> ç”¨äºä¸‹è½½å¤–éƒ¨æ’ä»¶çš„ URLï¼ˆä»¥ç©ºæ ¼åˆ†éš”ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>æ–‡ä»¶ç¼“å­˜ä¼˜åŒ–</strong></p>
<p>æ‰“å¼€æ–‡ä»¶ç¼“å­˜é€šè¿‡åœ¨å†…å­˜ä¸­å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦å’Œå…ƒæ•°æ®æ¥æé«˜æ€§èƒ½ï¼Œå‡å°‘äº†é‡å¤æ–‡ä»¶ç³»ç»Ÿæ“ä½œçš„éœ€æ±‚ã€‚</p>
<div class="admonition success">
<p class="admonition-title">æ–‡ä»¶ç¼“å­˜çš„å¥½å¤„</p>
<ul>
<li><strong>æ€§èƒ½ï¼š</strong> å‡å°‘æ–‡ä»¶ç³»ç»Ÿ I/Oï¼Œé™ä½å»¶è¿Ÿï¼Œå¹¶é™ä½æ–‡ä»¶æ“ä½œçš„ CPU ä½¿ç”¨ç‡ã€‚</li>
<li><strong>å®‰å…¨ï¼š</strong> é€šè¿‡ç¼“å­˜é”™è¯¯å“åº”æ¥å‡è½»æ—¶åºæ”»å‡»ï¼Œå¹¶å‡å°‘é’ˆå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ DoS æ”»å‡»çš„å½±å“ã€‚</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_OPEN_FILE_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>å¯ç”¨ç¼“å­˜ï¼š</strong> å¯ç”¨æ–‡ä»¶æè¿°ç¬¦å’Œå…ƒæ•°æ®çš„ç¼“å­˜ä»¥æé«˜æ€§èƒ½ã€‚</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE</code></td>
<td><code>max=1000 inactive=20s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>ç¼“å­˜é…ç½®ï¼š</strong> é…ç½®æ‰“å¼€æ–‡ä»¶ç¼“å­˜ï¼ˆä¾‹å¦‚ï¼Œæœ€å¤§æ¡ç›®æ•°å’Œéæ´»åŠ¨è¶…æ—¶ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>ç¼“å­˜é”™è¯¯ï¼š</strong> ç¼“å­˜æ–‡ä»¶æè¿°ç¬¦æŸ¥æ‰¾é”™è¯¯ä»¥åŠæˆåŠŸæŸ¥æ‰¾ã€‚</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>æœ€å°‘ä½¿ç”¨æ¬¡æ•°ï¼š</strong> åœ¨éæ´»åŠ¨æœŸé—´ï¼Œæ–‡ä»¶ä¿æŒç¼“å­˜æ‰€éœ€çš„æœ€å°‘è®¿é—®æ¬¡æ•°ã€‚</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_VALID</code></td>
<td><code>30s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>ç¼“å­˜æœ‰æ•ˆæœŸï¼š</strong> ç¼“å­˜å…ƒç´ é‡æ–°éªŒè¯çš„æ—¶é—´ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>é…ç½®æŒ‡å—</strong></p>
<p>è¦å¯ç”¨å’Œé…ç½®æ–‡ä»¶ç¼“å­˜ï¼š
1.  å°† <code>USE_OPEN_FILE_CACHE</code> è®¾ç½®ä¸º <code>yes</code> ä»¥æ¿€æ´»è¯¥åŠŸèƒ½ã€‚
2.  è°ƒæ•´ <code>OPEN_FILE_CACHE</code> å‚æ•°ä»¥å®šä¹‰ç¼“å­˜æ¡ç›®çš„æœ€å¤§æ•°é‡åŠå…¶éæ´»åŠ¨è¶…æ—¶ã€‚
3.  ä½¿ç”¨ <code>OPEN_FILE_CACHE_ERRORS</code> ç¼“å­˜æˆåŠŸå’Œå¤±è´¥çš„æŸ¥æ‰¾ï¼Œä»¥å‡å°‘é‡å¤çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚
4.  è®¾ç½® <code>OPEN_FILE_CACHE_MIN_USES</code> ä»¥æŒ‡å®šæ–‡ä»¶ä¿æŒç¼“å­˜æ‰€éœ€çš„æœ€å°‘è®¿é—®æ¬¡æ•°ã€‚
5.  ä½¿ç”¨ <code>OPEN_FILE_CACHE_VALID</code> å®šä¹‰ç¼“å­˜æœ‰æ•ˆæœŸï¼Œä»¥æ§åˆ¶ç¼“å­˜å…ƒç´ çš„é‡æ–°éªŒè¯é¢‘ç‡ã€‚</p>
<div class="admonition tip">
<p class="admonition-title">æœ€ä½³å®è·µ</p>
<ul>
<li>ä¸ºå…·æœ‰å¤§é‡é™æ€æ–‡ä»¶çš„ç½‘ç«™å¯ç”¨æ–‡ä»¶ç¼“å­˜ä»¥æé«˜æ€§èƒ½ã€‚</li>
<li>å®šæœŸå®¡æŸ¥å’Œå¾®è°ƒç¼“å­˜è®¾ç½®ï¼Œä»¥å¹³è¡¡æ€§èƒ½å’Œèµ„æºä½¿ç”¨ã€‚</li>
<li>åœ¨æ–‡ä»¶é¢‘ç¹æ›´æ”¹çš„åŠ¨æ€ç¯å¢ƒä¸­ï¼Œè€ƒè™‘ç¼©çŸ­ç¼“å­˜æœ‰æ•ˆæœŸæˆ–ç¦ç”¨è¯¥åŠŸèƒ½ä»¥ç¡®ä¿å†…å®¹æ–°é²œåº¦ã€‚</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="_82">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="31:7"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><input id="__tabbed_31_2" name="__tabbed_31" type="radio" /><input id="__tabbed_31_3" name="__tabbed_31" type="radio" /><input id="__tabbed_31_4" name="__tabbed_31" type="radio" /><input id="__tabbed_31_5" name="__tabbed_31" type="radio" /><input id="__tabbed_31_6" name="__tabbed_31" type="radio" /><input id="__tabbed_31_7" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">é»˜è®¤æœåŠ¡å™¨å®‰å…¨</label><label for="__tabbed_31_2">æ‹’ç» HTTP çŠ¶æ€</label><label for="__tabbed_31_3">HTTP æ–¹æ³•</label><label for="__tabbed_31_4">è¯·æ±‚å¤§å°é™åˆ¶</label><label for="__tabbed_31_5">åè®®æ”¯æŒ</label><label for="__tabbed_31_6">é™æ€æ–‡ä»¶æœåŠ¡</label><label for="__tabbed_31_7">æ–‡ä»¶ç¼“å­˜</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ç¦ç”¨é»˜è®¤æœåŠ¡å™¨å¹¶å¼ºåˆ¶æ‰§è¡Œä¸¥æ ¼ SNI çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">DISABLE_DEFAULT_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DISABLE_DEFAULT_SERVER_STRICT_SNI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>é™é»˜ä¸¢å¼ƒä¸éœ€è¦çš„è¯·æ±‚çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">DENY_HTTP_STATUS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;444&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å°† HTTP æ–¹æ³•é™åˆ¶ä¸º RESTful API æ‰€éœ€æ–¹æ³•çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">ALLOWED_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET|POST|PUT|DELETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>é™åˆ¶æœ€å¤§è¯·æ±‚ä½“å¤§å°çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">MAX_CLIENT_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5m&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ HTTP/2 å’Œ HTTP/3 å¹¶ä½¿ç”¨è‡ªå®šä¹‰ Alt-Svc ç«¯å£çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3_ALT_SVC_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;443&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä»è‡ªå®šä¹‰æ ¹æ–‡ä»¶å¤¹æä¾›é™æ€æ–‡ä»¶çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVE_FILES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROOT_FOLDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/custom-folder&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨å’Œä¼˜åŒ–æ–‡ä»¶ç¼“å­˜çš„ç¤ºä¾‹é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_OPEN_FILE_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">OPEN_FILE_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max=2000</span><span class="nv"> </span><span class="s">inactive=30s&quot;</span>
<span class="nt">OPEN_FILE_CACHE_ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">OPEN_FILE_CACHE_MIN_USES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">OPEN_FILE_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="modsecurity">ModSecurity</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>ModSecurity æ’ä»¶å°†åŠŸèƒ½å¼ºå¤§çš„ <a href="https://modsecurity.org">ModSecurity</a> Web åº”ç”¨ç¨‹åºé˜²ç«å¢™ (WAF) é›†æˆåˆ° BunkerWeb ä¸­ã€‚é€šè¿‡åˆ©ç”¨ <a href="https://coreruleset.org">OWASP æ ¸å¿ƒè§„åˆ™é›† (CRS)</a>ï¼Œæ­¤é›†æˆå¯æ£€æµ‹å¹¶é˜»æ­¢ SQL æ³¨å…¥ã€è·¨ç«™è„šæœ¬ (XSS)ã€æœ¬åœ°æ–‡ä»¶åŒ…å«ç­‰å¨èƒï¼Œä»è€Œæä¾›é’ˆå¯¹å„ç§ Web æ”»å‡»çš„å¼ºå¤§é˜²æŠ¤ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼ŒModSecurity ä¼šæ ¹æ®æ´»åŠ¨è§„åˆ™é›†å¯¹å…¶è¿›è¡Œè¯„ä¼°ã€‚</li>
<li>OWASP æ ¸å¿ƒè§„åˆ™é›†ä¼šæ£€æŸ¥æ ‡å¤´ã€Cookieã€URL å‚æ•°å’Œæ­£æ–‡å†…å®¹ã€‚</li>
<li>æ¯ä¸ªæ£€æµ‹åˆ°çš„è¿è§„è¡Œä¸ºéƒ½ä¼šå¢åŠ æ€»ä½“å¼‚å¸¸åˆ†æ•°ã€‚</li>
<li>å¦‚æœæ­¤åˆ†æ•°è¶…è¿‡é…ç½®çš„é˜ˆå€¼ï¼Œåˆ™è¯·æ±‚å°†è¢«é˜»æ­¢ã€‚</li>
<li>åˆ›å»ºè¯¦ç»†çš„æ—¥å¿—ä»¥å¸®åŠ©è¯Šæ–­è§¦å‘äº†å“ªäº›è§„åˆ™ä»¥åŠåŸå› ã€‚</li>
</ol>
<div class="admonition success">
<p class="admonition-title">ä¸»è¦ä¼˜åŠ¿</p>
<ol>
<li><strong>è¡Œä¸šæ ‡å‡†ä¿æŠ¤ï¼š</strong> åˆ©ç”¨å¹¿æ³›ä½¿ç”¨çš„å¼€æº ModSecurity é˜²ç«å¢™ã€‚</li>
<li><strong>OWASP æ ¸å¿ƒè§„åˆ™é›†ï¼š</strong> é‡‡ç”¨ç¤¾åŒºç»´æŠ¤çš„è§„åˆ™ï¼Œæ¶µç›– OWASP åå¤§æ¼æ´åŠæ›´å¤šå†…å®¹ã€‚</li>
<li><strong>å¯é…ç½®çš„å®‰å…¨çº§åˆ«ï¼š</strong> è°ƒæ•´åæ‰§çº§åˆ«ä»¥åœ¨å®‰å…¨æ€§ä¸æ½œåœ¨çš„è¯¯æŠ¥ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</li>
<li><strong>è¯¦ç»†æ—¥å¿—è®°å½•ï¼š</strong> æä¾›è¯¦å°½çš„å®¡è®¡æ—¥å¿—ä»¥è¿›è¡Œæ”»å‡»åˆ†æã€‚</li>
<li><strong>æ’ä»¶æ”¯æŒï¼š</strong> é€šè¿‡ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºé‡èº«å®šåˆ¶çš„å¯é€‰ CRS æ’ä»¶æ¥æ‰©å±•ä¿æŠ¤ã€‚</li>
</ol>
</div>
<h3 id="_83">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ ModSecurityï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> ModSecurity é»˜è®¤å¯ç”¨ã€‚å¯ä»¥ä½¿ç”¨ <code>USE_MODSECURITY</code> è®¾ç½®è¿›è¡Œæ§åˆ¶ã€‚</li>
<li><strong>é€‰æ‹© CRS ç‰ˆæœ¬ï¼š</strong> é€‰æ‹©ä¸€ä¸ª OWASP æ ¸å¿ƒè§„åˆ™é›†ç‰ˆæœ¬ï¼ˆv3ã€v4 æˆ– nightlyï¼‰ã€‚</li>
<li><strong>æ·»åŠ æ’ä»¶ï¼š</strong> å¯é€‰æ‹©æ¿€æ´» CRS æ’ä»¶ä»¥å¢å¼ºè§„åˆ™è¦†ç›–èŒƒå›´ã€‚</li>
<li><strong>ç›‘æ§å’Œè°ƒæ•´ï¼š</strong> ä½¿ç”¨æ—¥å¿—å’Œ <a href="../web-ui/">Web UI</a> è¯†åˆ«è¯¯æŠ¥å¹¶è°ƒæ•´è®¾ç½®ã€‚</li>
</ol>
<h3 id="_84">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MODSECURITY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ ModSecurityï¼š</strong> å¼€å¯ ModSecurity Web åº”ç”¨ç¨‹åºé˜²ç«å¢™ä¿æŠ¤ã€‚</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä½¿ç”¨æ ¸å¿ƒè§„åˆ™é›†ï¼š</strong> ä¸º ModSecurity å¯ç”¨ OWASP æ ¸å¿ƒè§„åˆ™é›†ã€‚</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_VERSION</code></td>
<td><code>4</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>CRS ç‰ˆæœ¬ï¼š</strong> è¦ä½¿ç”¨çš„ OWASP æ ¸å¿ƒè§„åˆ™é›†ç‰ˆæœ¬ã€‚é€‰é¡¹ï¼š<code>3</code>ã€<code>4</code> æˆ– <code>nightly</code>ã€‚</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_RULE_ENGINE</code></td>
<td><code>On</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è§„åˆ™å¼•æ“ï¼š</strong> æ§åˆ¶æ˜¯å¦å¼ºåˆ¶æ‰§è¡Œè§„åˆ™ã€‚é€‰é¡¹ï¼š<code>On</code>ã€<code>DetectionOnly</code> æˆ– <code>Off</code>ã€‚</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_ENGINE</code></td>
<td><code>RelevantOnly</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å®¡è®¡å¼•æ“ï¼š</strong> æ§åˆ¶å®¡è®¡æ—¥å¿—çš„å·¥ä½œæ–¹å¼ã€‚é€‰é¡¹ï¼š<code>On</code>ã€<code>Off</code> æˆ– <code>RelevantOnly</code>ã€‚</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_LOG_PARTS</code></td>
<td><code>ABIJDEFHZ</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å®¡è®¡æ—¥å¿—éƒ¨åˆ†ï¼š</strong> å®¡è®¡æ—¥å¿—ä¸­è¦åŒ…å«çš„è¯·æ±‚/å“åº”çš„å“ªäº›éƒ¨åˆ†ã€‚</td>
</tr>
<tr>
<td><code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code></td>
<td><code>131072</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯·æ±‚ä½“é™åˆ¶ï¼ˆæ— æ–‡ä»¶ï¼‰ï¼š</strong> ä¸å«æ–‡ä»¶ä¸Šä¼ çš„è¯·æ±‚ä½“çš„æœ€å¤§å¤§å°ã€‚æ¥å—çº¯å­—èŠ‚æˆ–äººç±»å¯è¯»çš„åç¼€ï¼ˆ<code>k</code>ã€<code>m</code>ã€<code>g</code>ï¼‰ï¼Œä¾‹å¦‚ <code>131072</code>ã€<code>256k</code>ã€<code>1m</code>ã€<code>2g</code>ã€‚</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS_PLUGINS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ CRS æ’ä»¶ï¼š</strong> ä¸ºæ ¸å¿ƒè§„åˆ™é›†å¯ç”¨å…¶ä»–æ’ä»¶è§„åˆ™é›†ã€‚</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_PLUGINS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>CRS æ’ä»¶åˆ—è¡¨ï¼š</strong> è¦ä¸‹è½½å’Œå®‰è£…çš„æ’ä»¶çš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ï¼ˆ<code>plugin-name[/tag]</code> æˆ– URLï¼‰ã€‚</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_GLOBAL_CRS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å…¨å±€ CRSï¼š</strong> å¯ç”¨åï¼Œåœ¨ HTTP çº§åˆ«è€Œä¸æ˜¯æ¯ä¸ªæœåŠ¡å™¨ä¸Šå…¨å±€åº”ç”¨ CRS è§„åˆ™ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">ModSecurity å’Œ OWASP æ ¸å¿ƒè§„åˆ™é›†</p>
<p><strong>æˆ‘ä»¬å¼ºçƒˆå»ºè®®åŒæ—¶å¯ç”¨ ModSecurity å’Œ OWASP æ ¸å¿ƒè§„åˆ™é›† (CRS)</strong>ï¼Œä»¥æä¾›é’ˆå¯¹å¸¸è§ Web æ¼æ´çš„å¼ºå¤§ä¿æŠ¤ã€‚è™½ç„¶å¶å°”å¯èƒ½ä¼šå‡ºç°è¯¯æŠ¥ï¼Œä½†å¯ä»¥é€šè¿‡å¾®è°ƒè§„åˆ™æˆ–ä½¿ç”¨é¢„å®šä¹‰çš„æ’é™¤é¡¹æ¥è§£å†³ã€‚</p>
<p>CRS å›¢é˜Ÿç§¯æç»´æŠ¤ç€é’ˆå¯¹ WordPressã€Nextcloudã€Drupal å’Œ Cpanel ç­‰æµè¡Œåº”ç”¨ç¨‹åºçš„æ’é™¤é¡¹åˆ—è¡¨ï¼Œä»è€Œæ›´å®¹æ˜“åœ¨ä¸å½±å“åŠŸèƒ½çš„æƒ…å†µä¸‹è¿›è¡Œé›†æˆã€‚å…¶å®‰å…¨ä¼˜åŠ¿è¿œè¿œè¶…è¿‡äº†è§£å†³è¯¯æŠ¥æ‰€éœ€çš„æœ€ä½é…ç½®å·¥ä½œé‡ã€‚</p>
</div>
<h3 id="crs">å¯ç”¨çš„ CRS ç‰ˆæœ¬</h3>
<p>é€‰æ‹©ä¸€ä¸ª CRS ç‰ˆæœ¬ä»¥æœ€ç¬¦åˆæ‚¨çš„å®‰å…¨éœ€æ±‚ï¼š</p>
<ul>
<li><strong><code>3</code></strong>ï¼šç¨³å®šç‰ˆ <a href="https://github.com/coreruleset/coreruleset/releases/tag/v3.3.7">v3.3.7</a>ã€‚</li>
<li><strong><code>4</code></strong>ï¼šç¨³å®šç‰ˆ <a href="https://github.com/coreruleset/coreruleset/releases/tag/v4.19.0">v4.19.0</a> (<strong>é»˜è®¤</strong>)ã€‚</li>
<li><strong><code>nightly</code></strong>ï¼š<a href="https://github.com/coreruleset/coreruleset/releases/tag/nightly">æ¯æ—¥æ„å»ºç‰ˆ</a>ï¼Œæä¾›æœ€æ–°çš„è§„åˆ™æ›´æ–°ã€‚</li>
</ul>
<div class="admonition example">
<p class="admonition-title">æ¯æ—¥æ„å»ºç‰ˆ</p>
<p><strong>æ¯æ—¥æ„å»ºç‰ˆ</strong>åŒ…å«æœ€æ–°çš„è§„åˆ™ï¼Œæä¾›é’ˆå¯¹æ–°å…´å¨èƒçš„æœ€æ–°ä¿æŠ¤ã€‚ç„¶è€Œï¼Œç”±äºå®ƒæ¯å¤©æ›´æ–°ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«å®éªŒæ€§æˆ–æœªç»æµ‹è¯•çš„æ›´æ”¹ï¼Œå»ºè®®åœ¨å°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œé¦–å…ˆåœ¨<strong>é¢„æ¼”ç¯å¢ƒ</strong>ä¸­ä½¿ç”¨æ¯æ—¥æ„å»ºç‰ˆã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">åæ‰§çº§åˆ«</p>
<p>OWASP æ ¸å¿ƒè§„åˆ™é›†ä½¿ç”¨â€œåæ‰§çº§åˆ«â€(PL) æ¥æ§åˆ¶è§„åˆ™çš„ä¸¥æ ¼æ€§ï¼š</p>
<ul>
<li><strong>PL1 (é»˜è®¤):</strong> åŸºæœ¬ä¿æŠ¤ï¼Œè¯¯æŠ¥æœ€å°‘</li>
<li><strong>PL2:</strong> æ›´ä¸¥æ ¼çš„å®‰å…¨æ€§ï¼Œå…·æœ‰æ›´ä¸¥æ ¼çš„æ¨¡å¼åŒ¹é…</li>
<li><strong>PL3:</strong> å¢å¼ºçš„å®‰å…¨æ€§ï¼Œå…·æœ‰æ›´ä¸¥æ ¼çš„éªŒè¯</li>
<li><strong>PL4:</strong> æœ€é«˜å®‰å…¨æ€§ï¼Œè§„åˆ™éå¸¸ä¸¥æ ¼ï¼ˆå¯èƒ½å¯¼è‡´è®¸å¤šè¯¯æŠ¥ï¼‰</li>
</ul>
<p>æ‚¨å¯ä»¥é€šè¿‡åœ¨ <code>/etc/bunkerweb/configs/modsec-crs/</code> ä¸­æ·»åŠ è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ¥è®¾ç½®åæ‰§çº§åˆ«ã€‚</p>
</div>
<h3 id="custom-configurations">è‡ªå®šä¹‰é…ç½®</h3>
<p>å¯ä»¥é€šè¿‡è‡ªå®šä¹‰é…ç½®æ¥è°ƒæ•´ ModSecurity å’Œ OWASP æ ¸å¿ƒè§„åˆ™é›† (CRS)ã€‚è¿™äº›é…ç½®å…è®¸æ‚¨åœ¨å®‰å…¨è§„åˆ™å¤„ç†çš„ç‰¹å®šé˜¶æ®µè‡ªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li><strong><code>modsec-crs</code></strong>ï¼šåœ¨åŠ è½½ OWASP æ ¸å¿ƒè§„åˆ™é›†<strong>ä¹‹å‰</strong>åº”ç”¨ã€‚</li>
<li><strong><code>modsec</code></strong>ï¼šåœ¨åŠ è½½ OWASP æ ¸å¿ƒè§„åˆ™é›†<strong>ä¹‹å</strong>åº”ç”¨ã€‚å¦‚æœæ ¹æœ¬æ²¡æœ‰åŠ è½½ CRSï¼Œä¹Ÿä¼šä½¿ç”¨æ­¤é…ç½®ã€‚</li>
<li><strong><code>crs-plugins-before</code></strong>ï¼šåœ¨åŠ è½½ CRS æ’ä»¶<strong>ä¹‹å‰</strong>åº”ç”¨ã€‚</li>
<li><strong><code>crs-plugins-after</code></strong>ï¼šåœ¨åŠ è½½ CRS æ’ä»¶<strong>ä¹‹å</strong>åº”ç”¨ã€‚</li>
</ul>
<p>è¿™ç§ç»“æ„æä¾›äº†çµæ´»æ€§ï¼Œå…è®¸æ‚¨æ ¹æ®åº”ç”¨ç¨‹åºçš„ç‰¹å®šéœ€æ±‚å¾®è°ƒ ModSecurity å’Œ CRS è®¾ç½®ï¼ŒåŒæ—¶ä¿æŒæ¸…æ™°çš„é…ç½®æµç¨‹ã€‚</p>
<h4 id="modsec-crs-crs">ä½¿ç”¨ <code>modsec-crs</code> æ·»åŠ  CRS æ’é™¤é¡¹</h4>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>modsec-crs</code> ç±»å‹çš„è‡ªå®šä¹‰é…ç½®æ¥ä¸ºç‰¹å®šç”¨ä¾‹æ·»åŠ æ’é™¤é¡¹ï¼Œä¾‹å¦‚ä¸º WordPress å¯ç”¨é¢„å®šä¹‰çš„æ’é™¤é¡¹ï¼š</p>
<div class="highlight"><pre><span></span><code>SecAction \
 &quot;id:900130,\
  phase:1,\
  nolog,\
  pass,\
  t:none,\
  setvar:tx.crs_exclusions_wordpress=1&quot;
</code></pre></div>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼š</p>
<ul>
<li>è¯¥æ“ä½œåœ¨<strong>é˜¶æ®µ 1</strong>ï¼ˆè¯·æ±‚ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸï¼‰æ‰§è¡Œã€‚</li>
<li>å®ƒé€šè¿‡è®¾ç½®å˜é‡ <code>tx.crs_exclusions_wordpress</code> æ¥å¯ç”¨ WordPress ç‰¹å®šçš„ CRS æ’é™¤é¡¹ã€‚</li>
</ul>
<h4 id="modsec-crs">ä½¿ç”¨ <code>modsec</code> æ›´æ–° CRS è§„åˆ™</h4>
<p>è¦å¾®è°ƒå·²åŠ è½½çš„ CRS è§„åˆ™ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>modsec</code> ç±»å‹çš„è‡ªå®šä¹‰é…ç½®ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä¸ºæŸäº›è¯·æ±‚è·¯å¾„åˆ é™¤ç‰¹å®šçš„è§„åˆ™æˆ–æ ‡ç­¾ï¼š</p>
<div class="highlight"><pre><span></span><code>SecRule REQUEST_FILENAME &quot;/wp-admin/admin-ajax.php&quot; &quot;id:1,ctl:ruleRemoveByTag=attack-xss,ctl:ruleRemoveByTag=attack-rce&quot;
SecRule REQUEST_FILENAME &quot;/wp-admin/options.php&quot; &quot;id:2,ctl:ruleRemoveByTag=attack-xss&quot;
SecRule REQUEST_FILENAME &quot;^/wp-json/yoast&quot; &quot;id:3,ctl:ruleRemoveById=930120&quot;
</code></pre></div>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼š</p>
<ul>
<li><strong>è§„åˆ™ 1</strong>ï¼šä¸ºå¯¹ <code>/wp-admin/admin-ajax.php</code> çš„è¯·æ±‚åˆ é™¤æ ‡è®°ä¸º <code>attack-xss</code> å’Œ <code>attack-rce</code> çš„è§„åˆ™ã€‚</li>
<li><strong>è§„åˆ™ 2</strong>ï¼šä¸ºå¯¹ <code>/wp-admin/options.php</code> çš„è¯·æ±‚åˆ é™¤æ ‡è®°ä¸º <code>attack-xss</code> çš„è§„åˆ™ã€‚</li>
<li><strong>è§„åˆ™ 3</strong>ï¼šä¸ºåŒ¹é… <code>/wp-json/yoast</code> çš„è¯·æ±‚åˆ é™¤ç‰¹å®šè§„åˆ™ï¼ˆID <code>930120</code>ï¼‰ã€‚</li>
</ul>
<div class="admonition info">
<p class="admonition-title">æ‰§è¡Œé¡ºåº</p>
<p>BunkerWeb ä¸­ ModSecurity çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼Œç¡®ä¿äº†è§„åˆ™åº”ç”¨çš„æ¸…æ™°å’Œé€»è¾‘æ€§ï¼š</p>
<ol>
<li><strong>OWASP CRS é…ç½®</strong>ï¼šOWASP æ ¸å¿ƒè§„åˆ™é›†çš„åŸºç¡€é…ç½®ã€‚</li>
<li><strong>è‡ªå®šä¹‰æ’ä»¶é…ç½® (<code>crs-plugins-before</code>)</strong>ï¼šç‰¹å®šäºæ’ä»¶çš„è®¾ç½®ï¼Œåœ¨ä»»ä½• CRS è§„åˆ™ä¹‹å‰åº”ç”¨ã€‚</li>
<li><strong>è‡ªå®šä¹‰æ’ä»¶è§„åˆ™ï¼ˆåœ¨ CRS è§„åˆ™ä¹‹å‰ï¼‰(<code>crs-plugins-before</code>)</strong>ï¼šåœ¨ CRS è§„åˆ™ä¹‹å‰æ‰§è¡Œçš„æ’ä»¶è‡ªå®šä¹‰è§„åˆ™ã€‚</li>
<li><strong>ä¸‹è½½çš„æ’ä»¶é…ç½®</strong>ï¼šå¤–éƒ¨ä¸‹è½½æ’ä»¶çš„é…ç½®ã€‚</li>
<li><strong>ä¸‹è½½çš„æ’ä»¶è§„åˆ™ï¼ˆåœ¨ CRS è§„åˆ™ä¹‹å‰ï¼‰</strong>ï¼šåœ¨ CRS è§„åˆ™ä¹‹å‰æ‰§è¡Œçš„ä¸‹è½½æ’ä»¶è§„åˆ™ã€‚</li>
<li><strong>è‡ªå®šä¹‰ CRS è§„åˆ™ (<code>modsec-crs</code>)</strong>ï¼šåœ¨åŠ è½½ CRS è§„åˆ™ä¹‹å‰åº”ç”¨çš„ç”¨æˆ·å®šä¹‰è§„åˆ™ã€‚</li>
<li><strong>OWASP CRS è§„åˆ™</strong>ï¼šç”± OWASP æä¾›çš„æ ¸å¿ƒå®‰å…¨è§„åˆ™é›†ã€‚</li>
<li><strong>è‡ªå®šä¹‰æ’ä»¶è§„åˆ™ï¼ˆåœ¨ CRS è§„åˆ™ä¹‹åï¼‰(<code>crs-plugins-after</code>)</strong>ï¼šåœ¨ CRS è§„åˆ™ä¹‹åæ‰§è¡Œçš„è‡ªå®šä¹‰æ’ä»¶è§„åˆ™ã€‚</li>
<li><strong>ä¸‹è½½çš„æ’ä»¶è§„åˆ™ï¼ˆåœ¨ CRS è§„åˆ™ä¹‹åï¼‰</strong>ï¼šåœ¨ CRS è§„åˆ™ä¹‹åæ‰§è¡Œçš„ä¸‹è½½æ’ä»¶è§„åˆ™ã€‚</li>
<li><strong>è‡ªå®šä¹‰è§„åˆ™ (<code>modsec</code>)</strong>ï¼šåœ¨æ‰€æœ‰ CRS å’Œæ’ä»¶è§„åˆ™ä¹‹ååº”ç”¨çš„ç”¨æˆ·å®šä¹‰è§„åˆ™ã€‚</li>
</ol>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>CRS å‰çš„è‡ªå®šä¹‰</strong>ï¼ˆ<code>crs-plugins-before</code>ã€<code>modsec-crs</code>ï¼‰å…è®¸æ‚¨åœ¨åŠ è½½æ ¸å¿ƒ CRS è§„åˆ™ä¹‹å‰å®šä¹‰ä¾‹å¤–æˆ–å‡†å¤‡æ€§è§„åˆ™ã€‚</li>
<li><strong>CRS åçš„è‡ªå®šä¹‰</strong>ï¼ˆ<code>crs-plugins-after</code>ã€<code>modsec</code>ï¼‰æ˜¯åœ¨åº”ç”¨ CRS å’Œæ’ä»¶è§„åˆ™ä¹‹åè¦†ç›–æˆ–æ‰©å±•è§„åˆ™çš„ç†æƒ³é€‰æ‹©ã€‚</li>
<li>è¿™ç§ç»“æ„æä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œèƒ½å¤Ÿåœ¨ä¿æŒå¼ºå¤§å®‰å…¨åŸºçº¿çš„åŒæ—¶ï¼Œç²¾ç¡®æ§åˆ¶è§„åˆ™çš„æ‰§è¡Œå’Œè‡ªå®šä¹‰ã€‚</li>
</ul>
</div>
<h3 id="owasp-crs">OWASP CRS æ’ä»¶</h3>
<p>OWASP æ ¸å¿ƒè§„åˆ™é›†è¿˜æ”¯æŒä¸€ç³»åˆ—<strong>æ’ä»¶</strong>ï¼Œæ—¨åœ¨æ‰©å±•å…¶åŠŸèƒ½å¹¶æé«˜ä¸ç‰¹å®šåº”ç”¨ç¨‹åºæˆ–ç¯å¢ƒçš„å…¼å®¹æ€§ã€‚è¿™äº›æ’ä»¶å¯ä»¥å¸®åŠ©å¾®è°ƒ CRSï¼Œä»¥ç”¨äº WordPressã€Nextcloud å’Œ Drupal ç­‰æµè¡Œå¹³å°ï¼Œç”šè‡³æ˜¯è‡ªå®šä¹‰è®¾ç½®ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯å’Œå¯ç”¨æ’ä»¶åˆ—è¡¨ï¼Œè¯·å‚é˜… <a href="https://github.com/coreruleset/plugin-registry">OWASP CRS æ’ä»¶æ³¨å†Œè¡¨</a>ã€‚</p>
<div class="admonition tip">
<p class="admonition-title">æ’ä»¶ä¸‹è½½</p>
<p><code>MODSECURITY_CRS_PLUGINS</code> è®¾ç½®å…è®¸æ‚¨ä¸‹è½½å’Œå®‰è£…æ’ä»¶ï¼Œä»¥æ‰©å±• OWASP æ ¸å¿ƒè§„åˆ™é›† (CRS) çš„åŠŸèƒ½ã€‚æ­¤è®¾ç½®æ¥å—å¸¦æœ‰å¯é€‰æ ‡ç­¾æˆ– URL çš„æ’ä»¶åç§°åˆ—è¡¨ï¼Œä»è€Œå¯ä»¥è½»æ¾é›†æˆæ ¹æ®æ‚¨çš„ç‰¹å®šéœ€æ±‚é‡èº«å®šåˆ¶çš„å…¶ä»–å®‰å…¨åŠŸèƒ½ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ <code>MODSECURITY_CRS_PLUGINS</code> è®¾ç½®æ¥å—çš„å€¼çš„éè¯¦å°½åˆ—è¡¨ï¼š</p>
<ul>
<li><code>fake-bot</code> - ä¸‹è½½æ’ä»¶çš„æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li><code>wordpress-rule-exclusions/v1.0.0</code> - ä¸‹è½½æ’ä»¶çš„ 1.0.0 ç‰ˆæœ¬ã€‚</li>
<li><code>https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip</code> - ç›´æ¥ä» URL ä¸‹è½½æ’ä»¶ã€‚</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">è¯¯æŠ¥</p>
<p>è¾ƒé«˜çš„å®‰å…¨è®¾ç½®å¯èƒ½ä¼šé˜»æ­¢åˆæ³•æµé‡ã€‚è¯·ä»é»˜è®¤è®¾ç½®å¼€å§‹ï¼Œå¹¶åœ¨æé«˜å®‰å…¨çº§åˆ«ä¹‹å‰ç›‘æ§æ—¥å¿—ã€‚è¯·å‡†å¤‡å¥½ä¸ºæ‚¨çš„ç‰¹å®šåº”ç”¨ç¨‹åºéœ€æ±‚æ·»åŠ æ’é™¤è§„åˆ™ã€‚</p>
</div>
<h3 id="_85">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="32:6"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><input id="__tabbed_32_2" name="__tabbed_32" type="radio" /><input id="__tabbed_32_3" name="__tabbed_32" type="radio" /><input id="__tabbed_32_4" name="__tabbed_32" type="radio" /><input id="__tabbed_32_5" name="__tabbed_32" type="radio" /><input id="__tabbed_32_6" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_32_2">ä»…æ£€æµ‹æ¨¡å¼</label><label for="__tabbed_32_3">å¸¦æ’ä»¶çš„é«˜çº§é…ç½®</label><label for="__tabbed_32_4">æ—§ç‰ˆé…ç½®</label><label for="__tabbed_32_5">å…¨å±€ ModSecurity</label><label for="__tabbed_32_6">å¸¦è‡ªå®šä¹‰æ’ä»¶çš„æ¯æ—¥æ„å»ºç‰ˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>å¯ç”¨ ModSecurity å’Œ CRS v4 çš„æ ‡å‡†é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºç›‘æ§æ½œåœ¨å¨èƒè€Œä¸è¿›è¡Œé˜»æ­¢çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DetectionOnly&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_LOG_PARTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ABIJDEFHZ&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨ CRS v4 å’Œæ’ä»¶ä»¥æä¾›é¢å¤–ä¿æŠ¤çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions</span><span class="nv"> </span><span class="s">fake-bot&quot;</span>
<span class="nt">MODSECURITY_REQ_BODY_NO_FILES_LIMIT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;262144&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ CRS v3 ä»¥ä¸æ—§è®¾ç½®å…¼å®¹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>åœ¨æ‰€æœ‰ HTTP è¿æ¥ä¸Šå…¨å±€åº”ç”¨ ModSecurity çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">USE_MODSECURITY_GLOBAL_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ CRS çš„æ¯æ—¥æ„å»ºç‰ˆå¹¶å¸¦æœ‰è‡ªå®šä¹‰æ’ä»¶çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nightly&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions/v1.0.0</span><span class="nv"> </span><span class="s">https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">äººç±»å¯è¯»çš„å¤§å°å€¼</p>
<p>å¯¹äºåƒ <code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code> è¿™æ ·çš„ å¤§å°è®¾ç½®ï¼Œæ”¯æŒ <code>k</code>ã€<code>m</code> å’Œ <code>g</code>ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰åç¼€ï¼Œåˆ†åˆ«ä»£è¡¨ kibibytesã€mebibytes å’Œ gibibytesï¼ˆ1024 çš„å€æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼š<code>256k</code> = 262144ï¼Œ<code>1m</code> = 1048576ï¼Œ<code>2g</code> = 2147483648ã€‚</p>
</div>
<h2 id="monitoring-pro">Monitoring <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>BunkerWeb monitoring pro system. This plugin is a prerequisite for some other plugins.</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MONITORING</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td>Enable monitoring of BunkerWeb.</td>
</tr>
<tr>
<td><code>MONITORING_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>å¦</td>
<td>Size of the dict to store monitoring metrics.</td>
</tr>
<tr>
<td><code>MONITORING_IGNORE_URLS</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>List of URLs to ignore when monitoring separated with spaces (e.g. /health)</td>
</tr>
</tbody>
</table>
<h2 id="php">PHP</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>PHP æ’ä»¶ä¸º BunkerWeb æä¾›äº†ä¸ PHP-FPM çš„æ— ç¼é›†æˆï¼Œä»è€Œä¸ºæ‚¨çš„ç½‘ç«™å¯ç”¨åŠ¨æ€ PHP å¤„ç†ã€‚æ­¤åŠŸèƒ½æ”¯æŒåœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œçš„æœ¬åœ° PHP-FPM å®ä¾‹å’Œè¿œç¨‹ PHP-FPM æœåŠ¡å™¨ï¼Œè®©æ‚¨åœ¨é…ç½® PHP ç¯å¢ƒæ—¶æ‹¥æœ‰çµæ´»æ€§ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯ä»æ‚¨çš„ç½‘ç«™è¯·æ±‚ PHP æ–‡ä»¶æ—¶ï¼ŒBunkerWeb ä¼šå°†è¯·æ±‚è·¯ç”±åˆ°å·²é…ç½®çš„ PHP-FPM å®ä¾‹ã€‚</li>
<li>å¯¹äºæœ¬åœ° PHP-FPMï¼ŒBunkerWeb é€šè¿‡ Unix å¥—æ¥å­—æ–‡ä»¶ä¸ PHP è§£é‡Šå™¨é€šä¿¡ã€‚</li>
<li>å¯¹äºè¿œç¨‹ PHP-FPMï¼ŒBunkerWeb ä½¿ç”¨ FastCGI åè®®å°†è¯·æ±‚è½¬å‘åˆ°æŒ‡å®šçš„ä¸»æœºå’Œç«¯å£ã€‚</li>
<li>PHP-FPM å¤„ç†è„šæœ¬å¹¶è¿”å›ç”Ÿæˆçš„å†…å®¹ç»™ BunkerWebï¼Œç„¶åç”± BunkerWeb å°†å…¶äº¤ä»˜ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>URL é‡å†™ä¼šè‡ªåŠ¨é…ç½®ï¼Œä»¥æ”¯æŒä½¿ç”¨â€œç¾è§‚ URLâ€çš„å¸¸è§ PHP æ¡†æ¶å’Œåº”ç”¨ç¨‹åºã€‚</li>
</ol>
<h3 id="_86">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ PHP åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é€‰æ‹©æ‚¨çš„ PHP-FPM è®¾ç½®ï¼š</strong> å†³å®šæ‚¨å°†ä½¿ç”¨æœ¬åœ°è¿˜æ˜¯è¿œç¨‹ PHP-FPM å®ä¾‹ã€‚</li>
<li><strong>é…ç½®è¿æ¥ï¼š</strong> å¯¹äºæœ¬åœ° PHPï¼Œè¯·æŒ‡å®šå¥—æ¥å­—è·¯å¾„ï¼›å¯¹äºè¿œç¨‹ PHPï¼Œè¯·æä¾›ä¸»æœºåå’Œç«¯å£ã€‚</li>
<li><strong>è®¾ç½®æ–‡æ¡£æ ¹ç›®å½•ï¼š</strong> ä½¿ç”¨é€‚å½“çš„è·¯å¾„è®¾ç½®ï¼Œé…ç½®åŒ…å«æ‚¨çš„ PHP æ–‡ä»¶çš„æ ¹æ–‡ä»¶å¤¹ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼ŒBunkerWeb ä¼šè‡ªåŠ¨å°† PHP è¯·æ±‚è·¯ç”±åˆ°æ‚¨çš„ PHP-FPM å®ä¾‹ã€‚</li>
</ol>
<h3 id="_87">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REMOTE_PHP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¿œç¨‹ PHP ä¸»æœºï¼š</strong> è¿œç¨‹ PHP-FPM å®ä¾‹çš„ä¸»æœºåã€‚ç•™ç©ºä»¥ä½¿ç”¨æœ¬åœ° PHPã€‚</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¿œç¨‹è·¯å¾„ï¼š</strong> è¿œç¨‹ PHP-FPM å®ä¾‹ä¸­åŒ…å«æ–‡ä»¶çš„æ ¹æ–‡ä»¶å¤¹ã€‚</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PORT</code></td>
<td><code>9000</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¿œç¨‹ç«¯å£ï¼š</strong> è¿œç¨‹ PHP-FPM å®ä¾‹çš„ç«¯å£ã€‚</td>
</tr>
<tr>
<td><code>LOCAL_PHP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æœ¬åœ° PHP å¥—æ¥å­—ï¼š</strong> PHP-FPM å¥—æ¥å­—æ–‡ä»¶çš„è·¯å¾„ã€‚ç•™ç©ºä»¥ä½¿ç”¨è¿œç¨‹ PHP-FPM å®ä¾‹ã€‚</td>
</tr>
<tr>
<td><code>LOCAL_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æœ¬åœ°è·¯å¾„ï¼š</strong> æœ¬åœ° PHP-FPM å®ä¾‹ä¸­åŒ…å«æ–‡ä»¶çš„æ ¹æ–‡ä»¶å¤¹ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">æœ¬åœ°ä¸è¿œç¨‹ PHP-FPM</p>
<p>é€‰æ‹©æœ€é€‚åˆæ‚¨åŸºç¡€æ¶æ„çš„è®¾ç½®ï¼š</p>
<ul>
<li><strong>æœ¬åœ° PHP-FPM</strong> ç”±äºåŸºäºå¥—æ¥å­—çš„é€šä¿¡è€Œæä¾›æ›´å¥½çš„æ€§èƒ½ï¼Œå¹¶ä¸”åœ¨ PHP ä¸ BunkerWeb åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œæ—¶æ˜¯ç†æƒ³é€‰æ‹©ã€‚</li>
<li><strong>è¿œç¨‹ PHP-FPM</strong> é€šè¿‡å…è®¸åœ¨å•ç‹¬çš„æœåŠ¡å™¨ä¸Šè¿›è¡Œ PHP å¤„ç†ï¼Œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œå¯ä¼¸ç¼©æ€§ã€‚</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">è·¯å¾„é…ç½®</p>
<p><code>REMOTE_PHP_PATH</code> æˆ– <code>LOCAL_PHP_PATH</code> å¿…é¡»ä¸å­˜å‚¨ PHP æ–‡ä»¶çš„å®é™…æ–‡ä»¶ç³»ç»Ÿè·¯å¾„åŒ¹é…ï¼›å¦åˆ™ï¼Œå°†å‘ç”Ÿâ€œæ–‡ä»¶æœªæ‰¾åˆ°â€é”™è¯¯ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">URL é‡å†™</p>
<p>PHP æ’ä»¶ä¼šè‡ªåŠ¨é…ç½® URL é‡å†™ä»¥æ”¯æŒç°ä»£ PHP åº”ç”¨ç¨‹åºã€‚å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶çš„è¯·æ±‚å°†è¢«å®šå‘åˆ° <code>index.php</code>ï¼ŒåŸå§‹è¯·æ±‚ URI å°†ä½œä¸ºæŸ¥è¯¢å‚æ•°æä¾›ã€‚</p>
</div>
<h3 id="_88">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="33:4"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><input id="__tabbed_33_3" name="__tabbed_33" type="radio" /><input id="__tabbed_33_4" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">æœ¬åœ° PHP-FPM é…ç½®</label><label for="__tabbed_33_2">è¿œç¨‹ PHP-FPM é…ç½®</label><label for="__tabbed_33_3">è‡ªå®šä¹‰ç«¯å£é…ç½®</label><label for="__tabbed_33_4">WordPress é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä½¿ç”¨æœ¬åœ° PHP-FPM å®ä¾‹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨è¿œç¨‹ PHP-FPM å®ä¾‹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9000&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>åœ¨éæ ‡å‡†ç«¯å£ä¸Šä½¿ç”¨ PHP-FPM çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9001&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸º WordPress ä¼˜åŒ–çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html/wordpress&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="pro">Pro</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Pro æ’ä»¶ä¸º BunkerWeb çš„ä¼ä¸šéƒ¨ç½²æ†ç»‘äº†é«˜çº§åŠŸèƒ½å’Œå¢å¼ºåŠŸèƒ½ã€‚å®ƒè§£é”äº†é¢å¤–çš„åŠŸèƒ½ã€é«˜çº§æ’ä»¶å’Œæ‰©å±•åŠŸèƒ½ï¼Œä»¥è¡¥å……æ ¸å¿ƒ BunkerWeb å¹³å°ã€‚å®ƒä¸ºä¼ä¸šçº§éƒ¨ç½²æä¾›äº†å¢å¼ºçš„å®‰å…¨æ€§ã€æ€§èƒ½å’Œç®¡ç†é€‰é¡¹ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨æœ‰æ•ˆçš„ Pro è®¸å¯è¯å¯†é’¥ï¼ŒBunkerWeb ä¼šè¿æ¥åˆ° Pro API æœåŠ¡å™¨ä»¥éªŒè¯æ‚¨çš„è®¢é˜…ã€‚</li>
<li>ä¸€æ—¦é€šè¿‡èº«ä»½éªŒè¯ï¼Œè¯¥æ’ä»¶ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£… Pro ä¸“å±æ’ä»¶å’Œæ‰©å±•ã€‚</li>
<li>æ‚¨çš„ Pro çŠ¶æ€ä¼šå®šæœŸéªŒè¯ï¼Œä»¥ç¡®ä¿æ‚¨èƒ½æŒç»­è®¿é—®é«˜çº§åŠŸèƒ½ã€‚</li>
<li>é«˜çº§æ’ä»¶ä¼šæ— ç¼é›†æˆåˆ°æ‚¨ç°æœ‰çš„ BunkerWeb é…ç½®ä¸­ã€‚</li>
<li>æ‰€æœ‰ Pro åŠŸèƒ½éƒ½ä¸å¼€æºæ ¸å¿ƒåè°ƒå·¥ä½œï¼Œæ˜¯å¢å¼ºè€Œéå–ä»£åŠŸèƒ½ã€‚</li>
</ol>
<div class="admonition success">
<p class="admonition-title">ä¸»è¦ä¼˜åŠ¿</p>
<ol>
<li><strong>é«˜çº§æ‰©å±•ï¼š</strong> è®¿é—®ç¤¾åŒºç‰ˆä¸­æ²¡æœ‰çš„ä¸“å±æ’ä»¶å’ŒåŠŸèƒ½ã€‚</li>
<li><strong>å¢å¼ºæ€§èƒ½ï¼š</strong> ä¼˜åŒ–çš„é…ç½®å’Œé«˜çº§ç¼“å­˜æœºåˆ¶ã€‚</li>
<li><strong>ä¼ä¸šæ”¯æŒï¼š</strong> ä¼˜å…ˆååŠ©å’Œä¸“å±æ”¯æŒæ¸ é“ã€‚</li>
<li><strong>æ— ç¼é›†æˆï¼š</strong> Pro åŠŸèƒ½ä¸ç¤¾åŒºåŠŸèƒ½å¹¶è¡Œå·¥ä½œï¼Œä¸ä¼šäº§ç”Ÿé…ç½®å†²çªã€‚</li>
<li><strong>è‡ªåŠ¨æ›´æ–°ï¼š</strong> é«˜çº§æ’ä»¶ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶ä¿æŒæœ€æ–°çŠ¶æ€ã€‚</li>
</ol>
</div>
<h3 id="_89">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ Pro åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>è·å–è®¸å¯è¯å¯†é’¥ï¼š</strong> ä» <a href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&amp;utm_source=doc">BunkerWeb é¢æ¿</a> è´­ä¹° Pro è®¸å¯è¯ã€‚</li>
<li><strong>é…ç½®æ‚¨çš„è®¸å¯è¯å¯†é’¥ï¼š</strong> ä½¿ç”¨ <code>PRO_LICENSE_KEY</code> è®¾ç½®æ¥é…ç½®æ‚¨çš„è®¸å¯è¯ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> ä¸€æ—¦é…ç½®äº†æœ‰æ•ˆçš„è®¸å¯è¯ï¼ŒPro æ’ä»¶å°†è‡ªåŠ¨ä¸‹è½½å¹¶æ¿€æ´»ã€‚</li>
<li><strong>ç›‘æ§æ‚¨çš„ Pro çŠ¶æ€ï¼š</strong> åœ¨ <a href="../web-ui/">Web UI</a> ä¸­æ£€æŸ¥å¥åº·æŒ‡ç¤ºå™¨ï¼Œä»¥ç¡®è®¤æ‚¨çš„ Pro è®¢é˜…çŠ¶æ€ã€‚</li>
</ol>
<h3 id="_90">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PRO_LICENSE_KEY</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Pro è®¸å¯è¯å¯†é’¥ï¼š</strong> ç”¨äºèº«ä»½éªŒè¯çš„ BunkerWeb Pro è®¸å¯è¯å¯†é’¥ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">è®¸å¯è¯ç®¡ç†</p>
<p>æ‚¨çš„ Pro è®¸å¯è¯ä¸æ‚¨çš„ç‰¹å®šéƒ¨ç½²ç¯å¢ƒç›¸å…³è”ã€‚å¦‚æœæ‚¨éœ€è¦è½¬ç§»è®¸å¯è¯æˆ–å¯¹æ‚¨çš„è®¢é˜…æœ‰ç–‘é—®ï¼Œè¯·é€šè¿‡ <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">BunkerWeb é¢æ¿</a> è”ç³»æ”¯æŒã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">Pro åŠŸèƒ½</p>
<p>éšç€æ–°åŠŸèƒ½çš„å¢åŠ ï¼Œå¯ç”¨çš„å…·ä½“ Pro åŠŸèƒ½å¯èƒ½ä¼šéšæ—¶é—´æ¼”å˜ã€‚Pro æ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰å¯ç”¨åŠŸèƒ½çš„å®‰è£…å’Œé…ç½®ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">ç½‘ç»œè¦æ±‚</p>
<p>Pro æ’ä»¶éœ€è¦å‡ºç«™äº’è”ç½‘è®¿é—®æƒé™ï¼Œä»¥è¿æ¥åˆ° BunkerWeb API è¿›è¡Œè®¸å¯è¯éªŒè¯å’Œä¸‹è½½é«˜çº§æ’ä»¶ã€‚è¯·ç¡®ä¿æ‚¨çš„é˜²ç«å¢™å…è®¸è¿æ¥åˆ° <code>api.bunkerweb.io</code> çš„ 443 ç«¯å£ (HTTPS)ã€‚</p>
</div>
<h3 id="_91">å¸¸è§é—®é¢˜è§£ç­”</h3>
<p><strong>é—®ï¼šå¦‚æœæˆ‘çš„ Pro è®¸å¯è¯åˆ°æœŸä¼šæ€æ ·ï¼Ÿ</strong></p>
<p>ç­”ï¼šå¦‚æœæ‚¨çš„ Pro è®¸å¯è¯åˆ°æœŸï¼Œå¯¹é«˜çº§åŠŸèƒ½å’Œæ’ä»¶çš„è®¿é—®å°†è¢«ç¦ç”¨ã€‚ä½†æ˜¯ï¼Œæ‚¨çš„ BunkerWeb å®‰è£…å°†ç»§ç»­ä½¿ç”¨æ‰€æœ‰ç¤¾åŒºç‰ˆåŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚è¦é‡æ–°è·å¾—å¯¹ Pro åŠŸèƒ½çš„è®¿é—®æƒé™ï¼Œåªéœ€ç»­è®¢æ‚¨çš„è®¸å¯è¯å³å¯ã€‚</p>
<p><strong>é—®ï¼šPro åŠŸèƒ½ä¼šå¹²æ‰°æˆ‘ç°æœ‰çš„é…ç½®å—ï¼Ÿ</strong></p>
<p>ç­”ï¼šä¸ä¼šï¼ŒPro åŠŸèƒ½æ—¨åœ¨ä¸æ‚¨å½“å‰çš„ BunkerWeb è®¾ç½®æ— ç¼é›†æˆã€‚å®ƒä»¬åœ¨ä¸æ›´æ”¹æˆ–å¹²æ‰°æ‚¨ç°æœ‰é…ç½®çš„æƒ…å†µä¸‹å¢å¼ºåŠŸèƒ½ï¼Œç¡®ä¿äº†å¹³ç¨³å¯é çš„ä½“éªŒã€‚</p>
<p><strong>é—®ï¼šæˆ‘å¯ä»¥åœ¨è´­ä¹°å‰è¯•ç”¨ Pro åŠŸèƒ½å—ï¼Ÿ</strong></p>
<p>ç­”ï¼šå½“ç„¶å¯ä»¥ï¼BunkerWeb æä¾›ä¸¤ç§ Pro è®¡åˆ’ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼š</p>
<ul>
<li><strong>BunkerWeb PRO Standardï¼š</strong> å®Œå…¨è®¿é—® Pro åŠŸèƒ½ï¼Œä½†ä¸æä¾›æŠ€æœ¯æ”¯æŒã€‚</li>
<li><strong>BunkerWeb PRO Enterpriseï¼š</strong> å®Œå…¨è®¿é—® Pro åŠŸèƒ½ï¼Œå¹¶æä¾›ä¸“å±æŠ€æœ¯æ”¯æŒã€‚</li>
</ul>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ä¿ƒé”€ç  <code>freetrial</code> å…è´¹è¯•ç”¨ Pro åŠŸèƒ½ 1 ä¸ªæœˆã€‚è¯·è®¿é—® <a href="https://panel.bunkerweb.io/?utm_campaign=self&amp;utm_source=doc">BunkerWeb é¢æ¿</a> æ¿€æ´»æ‚¨çš„è¯•ç”¨ï¼Œå¹¶äº†è§£æ›´å¤šå…³äºåŸºäº BunkerWeb PRO ä¿æŠ¤çš„æœåŠ¡æ•°é‡çš„çµæ´»å®šä»·é€‰é¡¹ã€‚</p>
<h2 id="prometheus-exporter-pro">Prometheus exporter <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Prometheus exporter for BunkerWeb internal metrics.</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROMETHEUS_EXPORTER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td>Enable the Prometheus export.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>å¦</td>
<td>Listening IP of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_PORT</code></td>
<td><code>9113</code></td>
<td>global</td>
<td>å¦</td>
<td>Listening port of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_URL</code></td>
<td><code>/metrics</code></td>
<td>global</td>
<td>å¦</td>
<td>HTTP URL of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_ALLOW_IP</code></td>
<td><code>127.0.0.0/8 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16</code></td>
<td>global</td>
<td>å¦</td>
<td>List of IP/networks allowed to contact the Prometheus exporter endpoint.</td>
</tr>
</tbody>
</table>
<h2 id="real-ip">Real IP</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>Real IP æ’ä»¶å¯ç¡®ä¿ BunkerWeb å³ä½¿åœ¨ä»£ç†åé¢ä¹Ÿèƒ½æ­£ç¡®è¯†åˆ«å®¢æˆ·ç«¯çš„ IP åœ°å€ã€‚è¿™å¯¹äºæ­£ç¡®åº”ç”¨å®‰å…¨è§„åˆ™ã€é€Ÿç‡é™åˆ¶å’Œæ—¥å¿—è®°å½•è‡³å…³é‡è¦ï¼›æ²¡æœ‰å®ƒï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å°†çœ‹èµ·æ¥æ¥è‡ªæ‚¨çš„ä»£ç† IPï¼Œè€Œä¸æ˜¯å®¢æˆ·ç«¯çš„å®é™… IPã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å¯ç”¨åï¼ŒBunkerWeb ä¼šæ£€æŸ¥ä¼ å…¥è¯·æ±‚ä¸­æ˜¯å¦åŒ…å«ç‰¹å®šæ ‡å¤´ï¼ˆå¦‚ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Reference/Headers/X-Forwarded-For"><code>X-Forwarded-For</code></a>ï¼‰ï¼Œè¿™äº›æ ‡å¤´åŒ…å«å®¢æˆ·ç«¯çš„åŸå§‹ IP åœ°å€ã€‚</li>
<li>BunkerWeb ä¼šæ£€æŸ¥ä¼ å…¥çš„ IP æ˜¯å¦åœ¨æ‚¨çš„å—ä¿¡ä»»ä»£ç†åˆ—è¡¨ (<code>REAL_IP_FROM</code>) ä¸­ï¼Œç¡®ä¿åªæœ‰åˆæ³•çš„ä»£ç†æ‰èƒ½ä¼ é€’å®¢æˆ·ç«¯ IPã€‚</li>
<li>ä»æŒ‡å®šçš„æ ‡å¤´ (<code>REAL_IP_HEADER</code>) ä¸­æå–åŸå§‹å®¢æˆ·ç«¯ IPï¼Œå¹¶ç”¨äºæ‰€æœ‰å®‰å…¨è¯„ä¼°å’Œæ—¥å¿—è®°å½•ã€‚</li>
<li>å¯¹äºé€’å½’ IP é“¾ï¼ŒBunkerWeb å¯ä»¥è¿½æº¯å¤šä¸ªä»£ç†è·ƒç‚¹ä»¥ç¡®å®šå§‹å‘å®¢æˆ·ç«¯ IPã€‚</li>
<li>æ­¤å¤–ï¼Œå¯ä»¥å¯ç”¨ <a href="https://netnut.io/what-is-proxy-protocol-and-how-does-it-work/">PROXY åè®®</a> æ”¯æŒï¼Œä»¥ç›´æ¥ä»å…¼å®¹çš„ä»£ç†ï¼ˆå¦‚ <a href="https://www.haproxy.org/">HAProxy</a>ï¼‰æ¥æ”¶å®¢æˆ·ç«¯ IPã€‚</li>
<li>å—ä¿¡ä»»çš„ä»£ç† IP åˆ—è¡¨å¯ä»¥é€šè¿‡ URL ä»å¤–éƒ¨æºè‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ã€‚</li>
</ol>
<h3 id="_92">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ Real IP åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_REAL_IP</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨çœŸå® IP æ£€æµ‹ã€‚</li>
<li><strong>å®šä¹‰å—ä¿¡ä»»çš„ä»£ç†ï¼š</strong> ä½¿ç”¨ <code>REAL_IP_FROM</code> è®¾ç½®åˆ—å‡ºæ‚¨å—ä¿¡ä»»çš„ä»£ç†çš„ IP åœ°å€æˆ–ç½‘ç»œã€‚</li>
<li><strong>æŒ‡å®šæ ‡å¤´ï¼š</strong> ä½¿ç”¨ <code>REAL_IP_HEADER</code> è®¾ç½®é…ç½®å“ªä¸ªæ ‡å¤´åŒ…å«çœŸå® IPã€‚</li>
<li><strong>é…ç½®é€’å½’ï¼š</strong> ä½¿ç”¨ <code>REAL_IP_RECURSIVE</code> è®¾ç½®å†³å®šæ˜¯å¦é€’å½’åœ°è¿½æº¯ IP é“¾ã€‚</li>
<li><strong>å¯é€‰çš„ URL æºï¼š</strong> ä½¿ç”¨ <code>REAL_IP_FROM_URLS</code> è®¾ç½®è‡ªåŠ¨ä¸‹è½½å—ä¿¡ä»»çš„ä»£ç†åˆ—è¡¨ã€‚</li>
<li><strong>PROXY åè®®ï¼š</strong> å¯¹äºç›´æ¥çš„ä»£ç†é€šä¿¡ï¼Œå¦‚æœæ‚¨çš„ä¸Šæ¸¸æ”¯æŒï¼Œè¯·ä½¿ç”¨ <code>USE_PROXY_PROTOCOL</code> å¯ç”¨ã€‚</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">PROXY åè®®è­¦å‘Š</p>
<p>åœ¨æœªæ­£ç¡®é…ç½®æ‚¨çš„ä¸Šæ¸¸ä»£ç†ä»¥å‘é€ PROXY åè®®æ ‡å¤´çš„æƒ…å†µä¸‹å¯ç”¨ <code>USE_PROXY_PROTOCOL</code> å°†<strong>ç ´åæ‚¨çš„åº”ç”¨ç¨‹åº</strong>ã€‚ä»…å½“æ‚¨ç¡®å®šæ‚¨çš„ä¸Šæ¸¸ä»£ç†å·²æ­£ç¡®é…ç½®ä¸ºå‘é€ PROXY åè®®ä¿¡æ¯æ—¶ï¼Œæ‰å¯ç”¨æ­¤è®¾ç½®ã€‚å¦‚æœæ‚¨çš„ä»£ç†æœªå‘é€ PROXY åè®®æ ‡å¤´ï¼Œæ‰€æœ‰åˆ° BunkerWeb çš„è¿æ¥éƒ½å°†å› åè®®é”™è¯¯è€Œå¤±è´¥ã€‚</p>
</div>
<h3 id="_93">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REAL_IP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨çœŸå® IPï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ä»æ ‡å¤´æˆ– PROXY åè®®ä¸­æ£€ç´¢å®¢æˆ·ç«¯çš„çœŸå® IPã€‚</td>
</tr>
<tr>
<td><code>REAL_IP_FROM</code></td>
<td><code>192.168.0.0/16 172.16.0.0/12 10.0.0.0/8</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å—ä¿¡ä»»çš„ä»£ç†ï¼š</strong> ä»£ç†è¯·æ±‚æ¥æºçš„å—ä¿¡ä»» IP åœ°å€æˆ–ç½‘ç»œåˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>REAL_IP_HEADER</code></td>
<td><code>X-Forwarded-For</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>çœŸå® IP æ ‡å¤´ï¼š</strong> åŒ…å«çœŸå® IP çš„ HTTP æ ‡å¤´æˆ–ç”¨äº PROXY åè®®çš„ç‰¹æ®Šå€¼ <code>proxy_protocol</code>ã€‚</td>
</tr>
<tr>
<td><code>REAL_IP_RECURSIVE</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>é€’å½’æœç´¢ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œåœ¨åŒ…å«å¤šä¸ª IP åœ°å€çš„æ ‡å¤´ä¸­æ‰§è¡Œé€’å½’æœç´¢ã€‚</td>
</tr>
<tr>
<td><code>REAL_IP_FROM_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦ä¸‹è½½çš„å—ä¿¡ä»»ä»£ç† IP/ç½‘ç»œçš„ URLï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚æ”¯æŒ file:// URLã€‚</td>
</tr>
<tr>
<td><code>USE_PROXY_PROTOCOL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>PROXY åè®®ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ PROXY åè®®æ”¯æŒï¼Œç”¨äºç›´æ¥çš„ä»£ç†åˆ° BunkerWeb çš„é€šä¿¡ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">äº‘æä¾›å•†ç½‘ç»œ</p>
<p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨åƒ AWSã€GCP æˆ– Azure è¿™æ ·çš„äº‘æä¾›å•†ï¼Œè¯·è€ƒè™‘å°†å…¶è´Ÿè½½å‡è¡¡å™¨çš„ IP èŒƒå›´æ·»åŠ åˆ°æ‚¨çš„ <code>REAL_IP_FROM</code> è®¾ç½®ä¸­ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„å®¢æˆ·ç«¯ IP è¯†åˆ«ã€‚</p>
</div>
<div class="admonition danger">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>ä»…åœ¨æ‚¨çš„é…ç½®ä¸­åŒ…å«å—ä¿¡ä»»çš„ä»£ç† IPã€‚æ·»åŠ ä¸å—ä¿¡ä»»çš„æºå¯èƒ½ä¼šå…è®¸ IP æ¬ºéª—æ”»å‡»ï¼Œæ¶æ„è¡Œä¸ºè€…å¯ä»¥é€šè¿‡æ“çºµæ ‡å¤´æ¥ä¼ªé€ å®¢æˆ·ç«¯ IPã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">å¤šä¸ª IP åœ°å€</p>
<p>å½“ <code>REAL_IP_RECURSIVE</code> å¯ç”¨å¹¶ä¸”æ ‡å¤´åŒ…å«å¤šä¸ª IPï¼ˆä¾‹å¦‚ï¼Œ<code>X-Forwarded-For: client, proxy1, proxy2</code>ï¼‰æ—¶ï¼ŒBunkerWeb ä¼šå°†ä¸åœ¨æ‚¨å—ä¿¡ä»»ä»£ç†åˆ—è¡¨ä¸­çš„æœ€å·¦ä¾§ IP è¯†åˆ«ä¸ºå®¢æˆ·ç«¯ IPã€‚</p>
</div>
<h3 id="_94">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="34:6"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><input id="__tabbed_34_2" name="__tabbed_34" type="radio" /><input id="__tabbed_34_3" name="__tabbed_34" type="radio" /><input id="__tabbed_34_4" name="__tabbed_34" type="radio" /><input id="__tabbed_34_5" name="__tabbed_34" type="radio" /><input id="__tabbed_34_6" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_34_2">äº‘è´Ÿè½½å‡è¡¡å™¨</label><label for="__tabbed_34_3">PROXY åè®®</label><label for="__tabbed_34_4">å¸¦æœ‰ URL çš„å¤šä¸ªä»£ç†æº</label><label for="__tabbed_34_5">CDN é…ç½®</label><label for="__tabbed_34_6">ä½äº Cloudflare åé¢</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç”¨äºä½äºåå‘ä»£ç†åé¢çš„ç«™ç‚¹çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.5&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºä½äºäº‘è´Ÿè½½å‡è¡¡å™¨åé¢çš„ç«™ç‚¹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.0/16</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ PROXY åè®®ä¸å…¼å®¹çš„è´Ÿè½½å‡è¡¡å™¨çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;proxy_protocol&quot;</span>
<span class="nt">USE_PROXY_PROTOCOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…·æœ‰è‡ªåŠ¨æ›´æ–°çš„ä»£ç† IP åˆ—è¡¨çš„é«˜çº§é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.0/16</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP&quot;</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/proxy-ips.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/custom-proxies.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºä½äº CDN åé¢çš„ç½‘ç«™çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.0/16</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://cdn-provider.com/ip-ranges.txt&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CF-Connecting-IP&quot;</span><span class="w">  </span><span class="c1"># Cloudflare ç¤ºä¾‹</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span><span class="w">  </span><span class="c1"># å¯¹äºå•ä¸ª IP æ ‡å¤´ä¸éœ€è¦</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºä½äº Cloudflare åé¢çš„ç½‘ç«™çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># æˆ‘ä»¬åªä¿¡ä»» Cloudflare çš„ IP</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.cloudflare.com/ips-v4/</span><span class="nv"> </span><span class="s">https://www.cloudflare.com/ips-v6/&quot;</span><span class="w"> </span><span class="c1"># è‡ªåŠ¨ä¸‹è½½ Cloudflare IP</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CF-Connecting-IP&quot;</span><span class="w">  </span><span class="c1"># Cloudflare ç”¨äºå®¢æˆ·ç«¯ IP çš„æ ‡å¤´</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redirect">Redirect</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>é‡å®šå‘æ’ä»¶ä¸ºå— BunkerWeb ä¿æŠ¤çš„ç½‘ç«™æä¾›äº†ç®€å•é«˜æ•ˆçš„ HTTP é‡å®šå‘åŠŸèƒ½ã€‚æ­¤åŠŸèƒ½ä½¿æ‚¨èƒ½å¤Ÿè½»æ¾åœ°å°†è®¿é—®è€…ä»ä¸€ä¸ª URL é‡å®šå‘åˆ°å¦ä¸€ä¸ª URLï¼Œæ”¯æŒå…¨åŸŸåé‡å®šå‘ã€ç‰¹å®šè·¯å¾„é‡å®šå‘å’Œè·¯å¾„ä¿ç•™é‡å®šå‘ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“è®¿é—®è€…è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶ï¼ŒBunkerWeb ä¼šéªŒè¯æ˜¯å¦é…ç½®äº†é‡å®šå‘ã€‚</li>
<li>å¦‚æœå¯ç”¨ï¼ŒBunkerWeb ä¼šå°†è®¿é—®è€…é‡å®šå‘åˆ°æŒ‡å®šçš„ç›®æ ‡ URLã€‚</li>
<li>æ‚¨å¯ä»¥é…ç½®æ˜¯ä¿ç•™åŸå§‹è¯·æ±‚è·¯å¾„ï¼ˆè‡ªåŠ¨å°†å…¶é™„åŠ åˆ°ç›®æ ‡ URLï¼‰è¿˜æ˜¯é‡å®šå‘åˆ°ç¡®åˆ‡çš„ç›®æ ‡ URLã€‚</li>
<li>ç”¨äºé‡å®šå‘çš„ HTTP çŠ¶æ€ç å¯ä»¥åœ¨æ°¸ä¹…ï¼ˆ301ï¼‰å’Œä¸´æ—¶ï¼ˆ302ï¼‰é‡å®šå‘ä¹‹é—´è¿›è¡Œè‡ªå®šä¹‰ã€‚</li>
<li>æ­¤åŠŸèƒ½éå¸¸é€‚ç”¨äºåŸŸåè¿ç§»ã€å»ºç«‹è§„èŒƒåŸŸåæˆ–é‡å®šå‘å·²å¼ƒç”¨çš„ URLã€‚</li>
</ol>
<h3 id="_95">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨é‡å®šå‘åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>è®¾ç½®æºè·¯å¾„ï¼š</strong> ä½¿ç”¨ <code>REDIRECT_FROM</code> è®¾ç½®é…ç½®è¦é‡å®šå‘çš„è·¯å¾„ï¼ˆä¾‹å¦‚ <code>/</code>ã€<code>/old-page</code>ï¼‰ã€‚</li>
<li><strong>è®¾ç½®ç›®æ ‡ URLï¼š</strong> ä½¿ç”¨ <code>REDIRECT_TO</code> è®¾ç½®é…ç½®è®¿é—®è€…åº”è¢«é‡å®šå‘åˆ°çš„ç›®æ ‡ URLã€‚</li>
<li><strong>é€‰æ‹©é‡å®šå‘ç±»å‹ï¼š</strong> ä½¿ç”¨ <code>REDIRECT_TO_REQUEST_URI</code> è®¾ç½®å†³å®šæ˜¯å¦ä¿ç•™åŸå§‹è¯·æ±‚è·¯å¾„ã€‚</li>
<li><strong>é€‰æ‹©çŠ¶æ€ç ï¼š</strong> ä½¿ç”¨ <code>REDIRECT_TO_STATUS_CODE</code> è®¾ç½®è®¾ç½®é€‚å½“çš„ HTTP çŠ¶æ€ç ï¼Œä»¥æŒ‡ç¤ºæ˜¯æ°¸ä¹…é‡å®šå‘è¿˜æ˜¯ä¸´æ—¶é‡å®šå‘ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œæ‰€æœ‰å¯¹è¯¥ç«™ç‚¹çš„è¯·æ±‚éƒ½å°†æ ¹æ®æ‚¨çš„è®¾ç½®è‡ªåŠ¨é‡å®šå‘ã€‚</li>
</ol>
<h3 id="_96">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_FROM</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è¦é‡å®šå‘çš„æºè·¯å¾„ï¼š</strong> å°†è¢«é‡å®šå‘çš„è·¯å¾„ã€‚</td>
</tr>
<tr>
<td><code>REDIRECT_TO</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ç›®æ ‡ URLï¼š</strong> è®¿é—®è€…å°†è¢«é‡å®šå‘åˆ°çš„ç›®æ ‡ URLã€‚ç•™ç©ºä»¥ç¦ç”¨é‡å®šå‘ã€‚</td>
</tr>
<tr>
<td><code>REDIRECT_TO_REQUEST_URI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ä¿ç•™è·¯å¾„ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œå°†åŸå§‹è¯·æ±‚ URI é™„åŠ åˆ°ç›®æ ‡ URLã€‚</td>
</tr>
<tr>
<td><code>REDIRECT_TO_STATUS_CODE</code></td>
<td><code>301</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>HTTP çŠ¶æ€ç ï¼š</strong> ç”¨äºé‡å®šå‘çš„ HTTP çŠ¶æ€ç ã€‚é€‰é¡¹ï¼š<code>301</code>ï¼ˆæ°¸ä¹…ï¼‰æˆ– <code>302</code>ï¼ˆä¸´æ—¶ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<p>!!! tip "é€‰æ‹©æ­£ç¡®çš„çŠ¶æ€ç " - å½“é‡å®šå‘æ˜¯æ°¸ä¹…æ€§çš„æ—¶ï¼Œä¾‹å¦‚åŸŸåè¿ç§»æˆ–å»ºç«‹è§„èŒƒ URLï¼Œè¯·ä½¿ç”¨ <code>301</code>ï¼ˆæ°¸ä¹…ç§»åŠ¨ï¼‰ã€‚è¿™æœ‰åŠ©äºæœç´¢å¼•æ“æ›´æ–°å…¶ç´¢å¼•ã€‚- å½“é‡å®šå‘æ˜¯ä¸´æ—¶æ€§çš„ï¼Œæˆ–è€…å¦‚æœæ‚¨å°†æ¥å¯èƒ½æƒ³é‡æ–°ä½¿ç”¨åŸå§‹ URLï¼Œè¯·ä½¿ç”¨ <code>302</code>ï¼ˆæ‰¾åˆ°/ä¸´æ—¶é‡å®šå‘ï¼‰ã€‚</p>
<div class="admonition info">
<p class="admonition-title">è·¯å¾„ä¿ç•™</p>
<p>å½“ <code>REDIRECT_TO_REQUEST_URI</code> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼ŒBunkerWeb ä¼šä¿ç•™åŸå§‹è¯·æ±‚è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·è®¿é—® <code>https://old-domain.com/blog/post-1</code>ï¼Œå¹¶ä¸”æ‚¨å·²è®¾ç½®ä¸ºé‡å®šå‘åˆ° <code>https://new-domain.com</code>ï¼Œä»–ä»¬å°†è¢«é‡å®šå‘åˆ° <code>https://new-domain.com/blog/post-1</code>ã€‚</p>
</div>
<h3 id="_97">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="35:5"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><input id="__tabbed_35_2" name="__tabbed_35" type="radio" /><input id="__tabbed_35_3" name="__tabbed_35" type="radio" /><input id="__tabbed_35_4" name="__tabbed_35" type="radio" /><input id="__tabbed_35_5" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">å¤šè·¯å¾„é‡å®šå‘</label><label for="__tabbed_35_2">ç®€å•åŸŸåé‡å®šå‘</label><label for="__tabbed_35_3">ä¿ç•™è·¯å¾„çš„é‡å®šå‘</label><label for="__tabbed_35_4">ä¸´æ—¶é‡å®šå‘</label><label for="__tabbed_35_5">å­åŸŸåæ•´åˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªå°†å¤šä¸ªè·¯å¾„é‡å®šå‘åˆ°ä¸åŒç›®æ ‡çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="c1"># å°† /blog é‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„åšå®¢åŸŸå</span>
<span class="nt">REDIRECT_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/blog/&quot;</span>
<span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://blog.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="c1"># å°† /shop é‡å®šå‘åˆ°å¦ä¸€ä¸ªåŸŸå</span>
<span class="nt">REDIRECT_FROM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/shop/&quot;</span>
<span class="nt">REDIRECT_TO_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://shop.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="c1"># é‡å®šå‘ç½‘ç«™çš„å…¶ä½™éƒ¨åˆ†</span>
<span class="nt">REDIRECT_FROM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REDIRECT_TO_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªå°†æ‰€æœ‰è®¿é—®è€…é‡å®šå‘åˆ°ä¸€ä¸ªæ–°åŸŸåçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªå°†è®¿é—®è€…é‡å®šå‘åˆ°ä¸€ä¸ªæ–°åŸŸåï¼ŒåŒæ—¶ä¿ç•™æ‰€è¯·æ±‚è·¯å¾„çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªç”¨äºä¸´æ—¶é‡å®šå‘åˆ°ç»´æŠ¤ç«™ç‚¹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://maintenance.example.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;302&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªå°†å­åŸŸåé‡å®šå‘åˆ°ä¸»åŸŸåä¸Šç‰¹å®šè·¯å¾„çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/support&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redis">Redis</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Redis æ’ä»¶å°† <a href="https://redis.io/">Redis</a> æˆ– <a href="https://valkey.io/">Valkey</a> é›†æˆåˆ° BunkerWeb ä¸­ï¼Œç”¨äºç¼“å­˜å’Œå¿«é€Ÿæ•°æ®æ£€ç´¢ã€‚æ­¤åŠŸèƒ½å¯¹äºåœ¨éœ€è¦è·¨å¤šä¸ªèŠ‚ç‚¹è®¿é—®ä¼šè¯æ•°æ®ã€æŒ‡æ ‡å’Œå…¶ä»–å…±äº«ä¿¡æ¯çš„é«˜å¯ç”¨æ€§ç¯å¢ƒä¸­éƒ¨ç½² BunkerWeb è‡³å…³é‡è¦ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å¯ç”¨åï¼ŒBunkerWeb ä¼šä¸æ‚¨é…ç½®çš„ Redis æˆ– Valkey æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚</li>
<li>ä¼šè¯ä¿¡æ¯ã€æŒ‡æ ‡å’Œå®‰å…¨ç›¸å…³æ•°æ®ç­‰å…³é”®æ•°æ®å­˜å‚¨åœ¨ Redis/Valkey ä¸­ã€‚</li>
<li>å¤šä¸ª BunkerWeb å®ä¾‹å¯ä»¥å…±äº«è¿™äº›æ•°æ®ï¼Œä»è€Œå®ç°æ— ç¼é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡ã€‚</li>
<li>è¯¥æ’ä»¶æ”¯æŒå„ç§ Redis/Valkey éƒ¨ç½²é€‰é¡¹ï¼ŒåŒ…æ‹¬ç‹¬ç«‹æœåŠ¡å™¨ã€å¯†ç éªŒè¯ã€SSL/TLS åŠ å¯†å’Œç”¨äºé«˜å¯ç”¨æ€§çš„ Redis Sentinelã€‚</li>
<li>è‡ªåŠ¨é‡æ–°è¿æ¥å’Œå¯é…ç½®çš„è¶…æ—¶å¯ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ç¨³å¥æ€§ã€‚</li>
</ol>
<h3 id="_98">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ Redis æ’ä»¶ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_REDIS</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ Redis/Valkey é›†æˆã€‚</li>
<li><strong>é…ç½®è¿æ¥è¯¦ç»†ä¿¡æ¯ï¼š</strong> æŒ‡å®šæ‚¨çš„ Redis/Valkey æœåŠ¡å™¨çš„ä¸»æœºå/IP åœ°å€å’Œç«¯å£ã€‚</li>
<li><strong>è®¾ç½®å®‰å…¨é€‰é¡¹ï¼š</strong> å¦‚æœæ‚¨çš„ Redis/Valkey æœåŠ¡å™¨éœ€è¦ï¼Œè¯·é…ç½®èº«ä»½éªŒè¯å‡­æ®ã€‚</li>
<li><strong>é…ç½®é«˜çº§é€‰é¡¹ï¼š</strong> æ ¹æ®éœ€è¦è®¾ç½®æ•°æ®åº“é€‰æ‹©ã€SSL é€‰é¡¹å’Œè¶…æ—¶ã€‚</li>
<li><strong>å¯¹äºé«˜å¯ç”¨æ€§ï¼Œ</strong>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ Redis Sentinelï¼Œè¯·é…ç½® Sentinel è®¾ç½®ã€‚</li>
</ol>
<h3 id="_99">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REDIS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>å¯ç”¨ Redisï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ Redis/Valkey é›†æˆä»¥ç”¨äºé›†ç¾¤æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td><code>REDIS_HOST</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey æœåŠ¡å™¨ï¼š</strong> Redis/Valkey æœåŠ¡å™¨çš„ IP åœ°å€æˆ–ä¸»æœºåã€‚</td>
</tr>
<tr>
<td><code>REDIS_PORT</code></td>
<td><code>6379</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey ç«¯å£ï¼š</strong> Redis/Valkey æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</td>
</tr>
<tr>
<td><code>REDIS_DATABASE</code></td>
<td><code>0</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey æ•°æ®åº“ï¼š</strong> åœ¨ Redis/Valkey æœåŠ¡å™¨ä¸Šä½¿ç”¨çš„æ•°æ®åº“ç¼–å· (0-15)ã€‚</td>
</tr>
<tr>
<td><code>REDIS_SSL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey SSLï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ Redis/Valkey è¿æ¥çš„ SSL/TLS åŠ å¯†ã€‚</td>
</tr>
<tr>
<td><code>REDIS_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey SSL éªŒè¯ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥éªŒè¯ Redis/Valkey æœåŠ¡å™¨çš„ SSL è¯ä¹¦ã€‚</td>
</tr>
<tr>
<td><code>REDIS_TIMEOUT</code></td>
<td><code>5</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey è¶…æ—¶ï¼š</strong> Redis/Valkey æ“ä½œçš„è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>REDIS_USERNAME</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey ç”¨æˆ·åï¼š</strong> ç”¨äº Redis/Valkey èº«ä»½éªŒè¯çš„ç”¨æˆ·å (Redis 6.0+)ã€‚</td>
</tr>
<tr>
<td><code>REDIS_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Redis/Valkey å¯†ç ï¼š</strong> ç”¨äº Redis/Valkey èº«ä»½éªŒè¯çš„å¯†ç ã€‚</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_HOSTS</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Sentinel ä¸»æœºï¼š</strong> Redis Sentinel ä¸»æœºçš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ (hostname:port)ã€‚</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_USERNAME</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Sentinel ç”¨æˆ·åï¼š</strong> ç”¨äº Redis Sentinel èº«ä»½éªŒè¯çš„ç”¨æˆ·åã€‚</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td><strong>Sentinel å¯†ç ï¼š</strong> ç”¨äº Redis Sentinel èº«ä»½éªŒè¯çš„å¯†ç ã€‚</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_MASTER</code></td>
<td><code>mymaster</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Sentinel ä¸»èŠ‚ç‚¹ï¼š</strong> Redis Sentinel é…ç½®ä¸­ä¸»èŠ‚ç‚¹çš„åç§°ã€‚</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_IDLE</code></td>
<td><code>300</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Keepalive ç©ºé—²æ—¶é—´ï¼š</strong> ç©ºé—²è¿æ¥çš„ TCP keepalive æ¢æµ‹ä¹‹é—´çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_POOL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Keepalive æ± ï¼š</strong> æ± ä¸­ä¿ç•™çš„æœ€å¤§ Redis/Valkey è¿æ¥æ•°ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ä½¿ç”¨ Redis Sentinel å®ç°é«˜å¯ç”¨æ€§</p>
<p>å¯¹äºéœ€è¦é«˜å¯ç”¨æ€§çš„ç”Ÿäº§ç¯å¢ƒï¼Œè¯·é…ç½® Redis Sentinel è®¾ç½®ã€‚å¦‚æœä¸» Redis æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè¿™å°†æä¾›è‡ªåŠ¨æ•…éšœè½¬ç§»åŠŸèƒ½ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Redis æ—¶ï¼š</p>
<ul>
<li>å§‹ç»ˆä¸º Redis å’Œ Sentinel èº«ä»½éªŒè¯è®¾ç½®å¼ºå¯†ç </li>
<li>è€ƒè™‘ä¸º Redis è¿æ¥å¯ç”¨ SSL/TLS åŠ å¯†</li>
<li>ç¡®ä¿æ‚¨çš„ Redis æœåŠ¡å™¨æœªæš´éœ²äºå…¬å…±äº’è”ç½‘</li>
<li>ä½¿ç”¨é˜²ç«å¢™æˆ–ç½‘ç»œåˆ†æ®µé™åˆ¶å¯¹ Redis ç«¯å£çš„è®¿é—®</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">é›†ç¾¤è¦æ±‚</p>
<p>åœ¨é›†ç¾¤ä¸­éƒ¨ç½² BunkerWeb æ—¶ï¼š</p>
<ul>
<li>æ‰€æœ‰ BunkerWeb å®ä¾‹éƒ½åº”è¿æ¥åˆ°ç›¸åŒçš„ Redis æˆ– Valkey æœåŠ¡å™¨æˆ– Sentinel é›†ç¾¤</li>
<li>åœ¨æ‰€æœ‰å®ä¾‹ä¸­é…ç½®ç›¸åŒçš„æ•°æ®åº“ç¼–å·</li>
<li>ç¡®ä¿æ‰€æœ‰ BunkerWeb å®ä¾‹ä¸ Redis/Valkey æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥</li>
</ul>
</div>
<h3 id="_100">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="36:4"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><input id="__tabbed_36_2" name="__tabbed_36" type="radio" /><input id="__tabbed_36_3" name="__tabbed_36" type="radio" /><input id="__tabbed_36_4" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_36_2">å®‰å…¨é…ç½®</label><label for="__tabbed_36_3">Redis Sentinel é…ç½®</label><label for="__tabbed_36_4">é«˜çº§è°ƒä¼˜</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç”¨äºè¿æ¥åˆ°æœ¬åœ°è®¡ç®—æœºä¸Šçš„ Redis æˆ– Valkey æœåŠ¡å™¨çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨äº†å¯†ç èº«ä»½éªŒè¯å’Œ SSL çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨ Redis Sentinel å®ç°é«˜å¯ç”¨æ€§çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SENTINEL_HOSTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel1:26379</span><span class="nv"> </span><span class="s">sentinel2:26379</span><span class="nv"> </span><span class="s">sentinel3:26379&quot;</span>
<span class="nt">REDIS_SENTINEL_MASTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mymaster&quot;</span>
<span class="nt">REDIS_SENTINEL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel-password&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis-password&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…·æœ‰ç”¨äºæ€§èƒ½ä¼˜åŒ–çš„é«˜çº§è¿æ¥å‚æ•°çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_KEEPALIVE_IDLE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">REDIS_KEEPALIVE_POOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="redis_1">Redis æœ€ä½³å®è·µ</h3>
<p>åœ¨ä½¿ç”¨ Redis æˆ– Valkey ä¸ BunkerWeb æ—¶ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹æœ€ä½³å®è·µä»¥ç¡®ä¿æœ€ä½³æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯é æ€§ï¼š</p>
<h4 id="_101">å†…å­˜ç®¡ç†</h4>
<ul>
<li><strong>ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µï¼š</strong> ä½¿ç”¨é€‚å½“çš„ <code>maxmemory</code> è®¾ç½®é…ç½® Redisï¼Œä»¥é˜²æ­¢å†…å­˜ä¸è¶³é”™è¯¯</li>
<li><strong>è®¾ç½®æ·˜æ±°ç­–ç•¥ï¼š</strong> ä½¿ç”¨é€‚åˆæ‚¨ç”¨ä¾‹çš„ <code>maxmemory-policy</code>ï¼ˆä¾‹å¦‚ <code>volatile-lru</code> æˆ– <code>allkeys-lru</code>ï¼‰</li>
<li><strong>é¿å…å¤§é”®ï¼š</strong> ç¡®ä¿å°†å•ä¸ª Redis é”®ä¿æŒåœ¨åˆç†çš„å¤§å°ï¼Œä»¥é˜²æ­¢æ€§èƒ½ä¸‹é™</li>
</ul>
<h4 id="_102">æ•°æ®æŒä¹…æ€§</h4>
<ul>
<li><strong>å¯ç”¨ RDB å¿«ç…§ï¼š</strong> é…ç½®å®šæœŸå¿«ç…§ä»¥å®ç°æ•°æ®æŒä¹…æ€§ï¼Œè€Œä¸ä¼šå¯¹æ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“</li>
<li><strong>è€ƒè™‘ AOFï¼š</strong> å¯¹äºå…³é”®æ•°æ®ï¼Œå¯ç”¨å…·æœ‰é€‚å½“ fsync ç­–ç•¥çš„ AOFï¼ˆä»…è¿½åŠ æ–‡ä»¶ï¼‰æŒä¹…æ€§</li>
<li><strong>å¤‡ä»½ç­–ç•¥ï¼š</strong> å°†å®šæœŸ Redis å¤‡ä»½ä½œä¸ºç¾éš¾æ¢å¤è®¡åˆ’çš„ä¸€éƒ¨åˆ†</li>
</ul>
<h4 id="_103">æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li><strong>è¿æ¥æ± ï¼š</strong> BunkerWeb å·²ç»å®ç°äº†è¿™ä¸€ç‚¹ï¼Œä½†è¯·ç¡®ä¿å…¶ä»–åº”ç”¨ç¨‹åºéµå¾ªæ­¤å®è·µ</li>
<li><strong>ç®¡é“ï¼š</strong> å¦‚æœå¯èƒ½ï¼Œè¯·ä½¿ç”¨ç®¡é“è¿›è¡Œæ‰¹é‡æ“ä½œä»¥å‡å°‘ç½‘ç»œå¼€é”€</li>
<li><strong>é¿å…æ˜‚è´µçš„æ“ä½œï¼š</strong> åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°¨æ…ä½¿ç”¨åƒ KEYS è¿™æ ·çš„å‘½ä»¤</li>
<li><strong>å¯¹æ‚¨çš„å·¥ä½œè´Ÿè½½è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼š</strong> ä½¿ç”¨ redis-benchmark æµ‹è¯•æ‚¨çš„ç‰¹å®šå·¥ä½œè´Ÿè½½æ¨¡å¼</li>
</ul>
<h3 id="_104">æ›´å¤šèµ„æº</h3>
<ul>
<li><a href="https://redis.io/documentation">Redis æ–‡æ¡£</a></li>
<li><a href="https://redis.io/topics/security">Redis å®‰å…¨æŒ‡å—</a></li>
<li><a href="https://redis.io/topics/sentinel">Redis é«˜å¯ç”¨æ€§</a></li>
<li><a href="https://redis.io/topics/persistence">Redis æŒä¹…æ€§</a></li>
</ul>
<h2 id="reporting-pro">Reporting <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Regular reporting of important data from BunkerWeb (global, attacks, bans, requests, reasons, AS...). Monitoring pro plugin needed to work.</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REPORTING_SMTP</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td>Enable sending the report via email.</td>
</tr>
<tr>
<td><code>USE_REPORTING_WEBHOOK</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td>Enable sending the report via webhook.</td>
</tr>
<tr>
<td><code>REPORTING_SCHEDULE</code></td>
<td><code>weekly</code></td>
<td>global</td>
<td>å¦</td>
<td>The frequency at which reports are sent.</td>
</tr>
<tr>
<td><code>REPORTING_WEBHOOK_URLS</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>List of webhook URLs to receive the report in Markdown (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_EMAILS</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>List of email addresses to receive the report in HTML format (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_HOST</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The host server used for SMTP sending.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_PORT</code></td>
<td><code>465</code></td>
<td>global</td>
<td>å¦</td>
<td>The port used for SMTP. Please note that there are different standards depending on the type of connection (SSL = 465, TLS = 587).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_EMAIL</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The email address used as the sender. Note that 2FA must be disabled for this email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_USER</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The user authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>The password authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SSL</code></td>
<td><code>SSL</code></td>
<td>global</td>
<td>å¦</td>
<td>Determine whether or not to use a secure connection for SMTP.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SUBJECT</code></td>
<td><code>BunkerWeb Report</code></td>
<td>global</td>
<td>å¦</td>
<td>The subject line of the email.</td>
</tr>
</tbody>
</table>
<h2 id="reverse-proxy">Reverse proxy</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>åå‘ä»£ç†æ’ä»¶ä¸º BunkerWeb æä¾›äº†æ— ç¼çš„ä»£ç†åŠŸèƒ½ï¼Œå…è®¸æ‚¨å°†è¯·æ±‚è·¯ç”±åˆ°åç«¯æœåŠ¡å™¨å’ŒæœåŠ¡ã€‚æ­¤åŠŸèƒ½ä½¿ BunkerWeb èƒ½å¤Ÿå……å½“æ‚¨åº”ç”¨ç¨‹åºçš„å®‰å…¨å‰ç«¯ï¼ŒåŒæ—¶æä¾› SSL ç»ˆæ­¢å’Œå®‰å…¨è¿‡æ»¤ç­‰é¢å¤–çš„å¥½å¤„ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯å‘ BunkerWeb å‘é€è¯·æ±‚æ—¶ï¼Œåå‘ä»£ç†æ’ä»¶ä¼šå°†è¯·æ±‚è½¬å‘åˆ°æ‚¨é…ç½®çš„åç«¯æœåŠ¡å™¨ã€‚</li>
<li>åœ¨å°†è¯·æ±‚ä¼ é€’ç»™æ‚¨çš„åº”ç”¨ç¨‹åºä¹‹å‰ï¼ŒBunkerWeb ä¼šæ·»åŠ å®‰å…¨æ ‡å¤´ã€åº”ç”¨ WAF è§„åˆ™å¹¶æ‰§è¡Œå…¶ä»–å®‰å…¨æ£€æŸ¥ã€‚</li>
<li>åç«¯æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶å‘ BunkerWeb è¿”å›å“åº”ã€‚</li>
<li>BunkerWeb åœ¨å°†å“åº”å‘é€å›å®¢æˆ·ç«¯ä¹‹å‰ï¼Œä¼šå¯¹å“åº”åº”ç”¨é¢å¤–çš„å®‰å…¨æªæ–½ã€‚</li>
<li>è¯¥æ’ä»¶æ”¯æŒ HTTP å’Œ TCP/UDP æµä»£ç†ï¼Œä»è€Œæ”¯æŒåŒ…æ‹¬ WebSockets å’Œå…¶ä»–é HTTP åè®®åœ¨å†…çš„å¹¿æ³›åº”ç”¨ã€‚</li>
</ol>
<h3 id="_105">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨åå‘ä»£ç†åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_REVERSE_PROXY</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨åå‘ä»£ç†åŠŸèƒ½ã€‚</li>
<li><strong>é…ç½®æ‚¨çš„åç«¯æœåŠ¡å™¨ï¼š</strong> ä½¿ç”¨ <code>REVERSE_PROXY_HOST</code> è®¾ç½®æŒ‡å®šä¸Šæ¸¸æœåŠ¡å™¨ã€‚</li>
<li><strong>è°ƒæ•´ä»£ç†è®¾ç½®ï¼š</strong> ä½¿ç”¨è¶…æ—¶ã€ç¼“å†²åŒºå¤§å°å’Œå…¶ä»–å‚æ•°çš„å¯é€‰è®¾ç½®æ¥å¾®è°ƒè¡Œä¸ºã€‚</li>
<li><strong>é…ç½®ç‰¹å®šäºåè®®çš„é€‰é¡¹ï¼š</strong> å¯¹äº WebSockets æˆ–ç‰¹æ®Šçš„ HTTP è¦æ±‚ï¼Œè¯·è°ƒæ•´ç›¸åº”çš„è®¾ç½®ã€‚</li>
<li><strong>è®¾ç½®ç¼“å­˜ï¼ˆå¯é€‰ï¼‰ï¼š</strong> å¯ç”¨å’Œé…ç½®ä»£ç†ç¼“å­˜ï¼Œä»¥æé«˜é¢‘ç¹è®¿é—®å†…å®¹çš„æ€§èƒ½ã€‚</li>
</ol>
<h3 id="_106">é…ç½®æŒ‡å—</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="37:8"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><input id="__tabbed_37_2" name="__tabbed_37" type="radio" /><input id="__tabbed_37_3" name="__tabbed_37" type="radio" /><input id="__tabbed_37_4" name="__tabbed_37" type="radio" /><input id="__tabbed_37_5" name="__tabbed_37" type="radio" /><input id="__tabbed_37_6" name="__tabbed_37" type="radio" /><input id="__tabbed_37_7" name="__tabbed_37" type="radio" /><input id="__tabbed_37_8" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_37_2">è¿æ¥è®¾ç½®</label><label for="__tabbed_37_3">SSL/TLS é…ç½®</label><label for="__tabbed_37_4">åè®®æ”¯æŒ</label><label for="__tabbed_37_5">æ ‡å¤´ç®¡ç†</label><label for="__tabbed_37_6">è®¤è¯</label><label for="__tabbed_37_7">é«˜çº§é…ç½®</label><label for="__tabbed_37_8">ç¼“å­˜é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>æ ¸å¿ƒè®¾ç½®</strong></p>
<p>åŸºæœ¬çš„é…ç½®è®¾ç½®å¯ç”¨å¹¶æ§åˆ¶åå‘ä»£ç†åŠŸèƒ½çš„åŸºæœ¬åŠŸèƒ½ã€‚</p>
<div class="admonition success">
<p class="admonition-title">åå‘ä»£ç†çš„å¥½å¤„</p>
<ul>
<li><strong>å®‰å…¨å¢å¼ºï¼š</strong> æ‰€æœ‰æµé‡åœ¨åˆ°è¾¾æ‚¨çš„åº”ç”¨ç¨‹åºä¹‹å‰éƒ½ä¼šç»è¿‡ BunkerWeb çš„å®‰å…¨å±‚</li>
<li><strong>SSL ç»ˆæ­¢ï¼š</strong> é›†ä¸­ç®¡ç† SSL/TLS è¯ä¹¦ï¼Œè€Œåç«¯æœåŠ¡å¯ä»¥ä½¿ç”¨æœªåŠ å¯†çš„è¿æ¥</li>
<li><strong>åè®®å¤„ç†ï¼š</strong> æ”¯æŒ HTTPã€HTTPSã€WebSockets å’Œå…¶ä»–åè®®</li>
<li><strong>é”™è¯¯æ‹¦æˆªï¼š</strong> è‡ªå®šä¹‰é”™è¯¯é¡µé¢ä»¥è·å¾—ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_PROXY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨åå‘ä»£ç†ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨åå‘ä»£ç†åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HOST</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>åç«¯ä¸»æœºï¼š</strong> ä»£ç†èµ„æºçš„å®Œæ•´ URL (proxy_pass)ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ä½ç½® URLï¼š</strong> å°†è¢«ä»£ç†åˆ°åç«¯æœåŠ¡å™¨çš„è·¯å¾„ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_BUFFERING</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å“åº”ç¼“å†²ï¼š</strong> å¯ç”¨æˆ–ç¦ç”¨æ¥è‡ªä»£ç†èµ„æºçš„å“åº”ç¼“å†²ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_KEEPALIVE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ä¿æŒè¿æ¥ï¼š</strong> å¯ç”¨æˆ–ç¦ç”¨ä¸ä»£ç†èµ„æºçš„ä¿æŒè¿æ¥ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_CUSTOM_HOST</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è‡ªå®šä¹‰ä¸»æœºï¼š</strong> è¦†ç›–å‘é€åˆ°ä¸Šæ¸¸æœåŠ¡å™¨çš„ Host æ ‡å¤´ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_INTERCEPT_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ‹¦æˆªé”™è¯¯ï¼š</strong> æ˜¯å¦æ‹¦æˆªå’Œé‡å†™æ¥è‡ªåç«¯çš„é”™è¯¯å“åº”ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">æœ€ä½³å®è·µ</p>
<ul>
<li>å§‹ç»ˆåœ¨ <code>REVERSE_PROXY_HOST</code> ä¸­æŒ‡å®šå®Œæ•´çš„ URLï¼ŒåŒ…æ‹¬åè®®ï¼ˆhttp:// æˆ– https://ï¼‰</li>
<li>ä½¿ç”¨ <code>REVERSE_PROXY_INTERCEPT_ERRORS</code> åœ¨æ‚¨æ‰€æœ‰æœåŠ¡ä¸­æä¾›ä¸€è‡´çš„é”™è¯¯é¡µé¢</li>
<li>å½“é…ç½®å¤šä¸ªåç«¯æ—¶ï¼Œä½¿ç”¨å¸¦ç¼–å·çš„åç¼€æ ¼å¼ï¼ˆä¾‹å¦‚ï¼Œ<code>REVERSE_PROXY_HOST_2</code>ã€<code>REVERSE_PROXY_URL_2</code>ï¼‰</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>è¿æ¥å’Œè¶…æ—¶é…ç½®</strong></p>
<p>è¿™äº›è®¾ç½®æ§åˆ¶ä»£ç†è¿æ¥çš„è¿æ¥è¡Œä¸ºã€ç¼“å†²å’Œè¶…æ—¶å€¼ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>ä¼˜åŒ–æ€§èƒ½ï¼š</strong> æ ¹æ®æ‚¨çš„åº”ç”¨ç¨‹åºéœ€æ±‚è°ƒæ•´ç¼“å†²åŒºå¤§å°å’Œè¿æ¥è®¾ç½®</li>
<li><strong>èµ„æºç®¡ç†ï¼š</strong> é€šè¿‡é€‚å½“çš„ç¼“å†²åŒºé…ç½®æ§åˆ¶å†…å­˜ä½¿ç”¨</li>
<li><strong>å¯é æ€§ï¼š</strong> é…ç½®é€‚å½“çš„è¶…æ—¶ä»¥å¤„ç†æ…¢é€Ÿè¿æ¥æˆ–åç«¯é—®é¢˜</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_CONNECT_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è¿æ¥è¶…æ—¶ï¼š</strong> å»ºç«‹åˆ°åç«¯æœåŠ¡å™¨è¿æ¥çš„æœ€é•¿æ—¶é—´ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_READ_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è¯»å–è¶…æ—¶ï¼š</strong> ä»åç«¯æœåŠ¡å™¨ä¼ è¾“ä¸¤ä¸ªè¿ç»­æ•°æ®åŒ…ä¹‹é—´çš„æœ€é•¿æ—¶é—´ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SEND_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å‘é€è¶…æ—¶ï¼š</strong> å‘åç«¯æœåŠ¡å™¨ä¼ è¾“ä¸¤ä¸ªè¿ç»­æ•°æ®åŒ…ä¹‹é—´çš„æœ€é•¿æ—¶é—´ã€‚</td>
</tr>
<tr>
<td><code>PROXY_BUFFERS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¼“å†²åŒºï¼š</strong> ç”¨äºä»åç«¯æœåŠ¡å™¨è¯»å–å“åº”çš„ç¼“å†²åŒºçš„æ•°é‡å’Œå¤§å°ã€‚</td>
</tr>
<tr>
<td><code>PROXY_BUFFER_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¼“å†²åŒºå¤§å°ï¼š</strong> ç”¨äºä»åç«¯æœåŠ¡å™¨è¯»å–å“åº”ç¬¬ä¸€éƒ¨åˆ†çš„å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>PROXY_BUSY_BUFFERS_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¹å¿™ç¼“å†²åŒºå¤§å°ï¼š</strong> å¯ç”¨äºå‘å®¢æˆ·ç«¯å‘é€å“åº”çš„ç¹å¿™ç¼“å†²åŒºçš„å¤§å°ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">è¶…æ—¶æ³¨æ„äº‹é¡¹</p>
<ul>
<li>è®¾ç½®è¿‡ä½çš„è¶…æ—¶å¯èƒ½ä¼šå¯¼è‡´åˆæ³•ä½†ç¼“æ…¢çš„è¿æ¥è¢«ç»ˆæ­¢</li>
<li>è®¾ç½®è¿‡é«˜çš„è¶…æ—¶å¯èƒ½ä¼šä¸å¿…è¦åœ°ä¿æŒè¿æ¥æ‰“å¼€ï¼Œä»è€Œå¯èƒ½è€—å°½èµ„æº</li>
<li>å¯¹äº WebSocket åº”ç”¨ç¨‹åºï¼Œè¯·æ˜¾è‘—å¢åŠ è¯»å–å’Œå‘é€è¶…æ—¶ï¼ˆå»ºè®® 300 ç§’æˆ–æ›´é•¿ï¼‰</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>åç«¯è¿æ¥çš„ SSL/TLS è®¾ç½®</strong></p>
<p>è¿™äº›è®¾ç½®æ§åˆ¶ BunkerWeb å¦‚ä½•ä¸åç«¯æœåŠ¡å™¨å»ºç«‹å®‰å…¨è¿æ¥ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>ç«¯åˆ°ç«¯åŠ å¯†ï¼š</strong> ä¿æŒä»å®¢æˆ·ç«¯åˆ°åç«¯çš„åŠ å¯†è¿æ¥</li>
<li><strong>è¯ä¹¦éªŒè¯ï¼š</strong> æ§åˆ¶å¦‚ä½•éªŒè¯åç«¯æœåŠ¡å™¨è¯ä¹¦</li>
<li><strong>SNI æ”¯æŒï¼š</strong> ä¸ºæ‰˜ç®¡å¤šä¸ªç«™ç‚¹çš„åç«¯æŒ‡å®šæœåŠ¡å™¨åç§°æŒ‡ç¤º</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>SSL SNIï¼š</strong> å¯ç”¨æˆ–ç¦ç”¨å‘ä¸Šæ¸¸å‘é€ SNIï¼ˆæœåŠ¡å™¨åç§°æŒ‡ç¤ºï¼‰ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI_NAME</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>SSL SNI åç§°ï¼š</strong> å½“å¯ç”¨ SSL SNI æ—¶ï¼Œè®¾ç½®è¦å‘é€åˆ°ä¸Šæ¸¸çš„ SNI ä¸»æœºåã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">SNI è§£é‡Š</p>
<p>æœåŠ¡å™¨åç§°æŒ‡ç¤º (SNI) æ˜¯ TLS çš„ä¸€ä¸ªæ‰©å±•ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­æŒ‡å®šå®ƒè¯•å›¾è¿æ¥çš„ä¸»æœºåã€‚è¿™ä½¿æœåŠ¡å™¨èƒ½å¤Ÿåœ¨åŒä¸€ä¸ª IP åœ°å€å’Œç«¯å£ä¸Šå‘ˆç°å¤šä¸ªè¯ä¹¦ï¼Œä»è€Œå…è®¸ä»å•ä¸ª IP åœ°å€æä¾›å¤šä¸ªå®‰å…¨ (HTTPS) ç½‘ç«™ï¼Œè€Œæ— éœ€æ‰€æœ‰è¿™äº›ç½‘ç«™éƒ½ä½¿ç”¨ç›¸åŒçš„è¯ä¹¦ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>åè®®ç‰¹å®šé…ç½®</strong></p>
<p>é…ç½®ç‰¹æ®Šçš„åè®®å¤„ç†ï¼Œç‰¹åˆ«æ˜¯å¯¹äº WebSockets å’Œå…¶ä»–é HTTP åè®®ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>åè®®çµæ´»æ€§ï¼š</strong> æ”¯æŒ WebSockets ä½¿å®æ—¶åº”ç”¨ç¨‹åºæˆä¸ºå¯èƒ½</li>
<li><strong>ç°ä»£ Web åº”ç”¨ï¼š</strong> å¯ç”¨éœ€è¦åŒå‘é€šä¿¡çš„äº¤äº’å¼åŠŸèƒ½</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_WS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>WebSocket æ”¯æŒï¼š</strong> åœ¨èµ„æºä¸Šå¯ç”¨ WebSocket åè®®ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">WebSocket é…ç½®</p>
<ul>
<li>å½“ä½¿ç”¨ <code>REVERSE_PROXY_WS: "yes"</code> å¯ç”¨ WebSockets æ—¶ï¼Œè¯·è€ƒè™‘å¢åŠ è¶…æ—¶å€¼</li>
<li>WebSocket è¿æ¥çš„ä¿æŒæ—¶é—´æ¯”å…¸å‹çš„ HTTP è¿æ¥æ›´é•¿</li>
<li>å¯¹äº WebSocket åº”ç”¨ç¨‹åºï¼Œæ¨èçš„é…ç½®æ˜¯ï¼š
  <div class="highlight"><pre><span></span><code><span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div></li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>HTTP æ ‡å¤´é…ç½®</strong></p>
<p>æ§åˆ¶å“ªäº›æ ‡å¤´å‘é€åˆ°åç«¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œå…è®¸æ‚¨æ·»åŠ ã€ä¿®æ”¹æˆ–ä¿ç•™ HTTP æ ‡å¤´ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>ä¿¡æ¯æ§åˆ¶ï¼š</strong> ç²¾ç¡®ç®¡ç†åœ¨å®¢æˆ·ç«¯å’Œåç«¯ä¹‹é—´å…±äº«çš„ä¿¡æ¯</li>
<li><strong>å®‰å…¨å¢å¼ºï¼š</strong> æ·»åŠ ä¸å®‰å…¨ç›¸å…³çš„æ ‡å¤´æˆ–åˆ é™¤å¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯çš„æ ‡å¤´</li>
<li><strong>é›†æˆæ”¯æŒï¼š</strong> ä¸ºèº«ä»½éªŒè¯å’Œæ­£å¸¸çš„åç«¯æ“ä½œæä¾›å¿…è¦çš„æ ‡å¤´</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_HEADERS</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è‡ªå®šä¹‰æ ‡å¤´ï¼š</strong> å‘é€åˆ°åç«¯çš„ HTTP æ ‡å¤´ï¼Œç”¨åˆ†å·åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HIDE_HEADERS</code></td>
<td><code>Upgrade</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>éšè—æ ‡å¤´ï¼š</strong> ä»åç«¯æ¥æ”¶æ—¶å‘å®¢æˆ·ç«¯éšè—çš„ HTTP æ ‡å¤´ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HEADERS_CLIENT</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å®¢æˆ·ç«¯æ ‡å¤´ï¼š</strong> å‘é€ç»™å®¢æˆ·ç«¯çš„ HTTP æ ‡å¤´ï¼Œç”¨åˆ†å·åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_UNDERSCORES_IN_HEADERS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ ‡å¤´ä¸­ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š</strong> å¯ç”¨æˆ–ç¦ç”¨ <code>underscores_in_headers</code> æŒ‡ä»¤ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>ä½¿ç”¨åå‘ä»£ç†åŠŸèƒ½æ—¶ï¼Œè¯·è°¨æ…è½¬å‘å“ªäº›æ ‡å¤´åˆ°æ‚¨çš„åç«¯åº”ç”¨ç¨‹åºã€‚æŸäº›æ ‡å¤´å¯èƒ½ä¼šæš´éœ²æœ‰å…³æ‚¨çš„åŸºç¡€æ¶æ„çš„æ•æ„Ÿä¿¡æ¯æˆ–ç»•è¿‡å®‰å…¨æ§åˆ¶ã€‚</p>
</div>
<div class="admonition example">
<p class="admonition-title">æ ‡å¤´æ ¼å¼ç¤ºä¾‹</p>
<p>å‘é€åˆ°åç«¯æœåŠ¡å™¨çš„è‡ªå®šä¹‰æ ‡å¤´ï¼š
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS: &quot;X-Real-IP $remote_addr;X-Forwarded-For $proxy_add_x_forwarded_for;X-Forwarded-Proto $scheme&quot;
</code></pre></div></p>
<p>å‘é€ç»™å®¢æˆ·ç«¯çš„è‡ªå®šä¹‰æ ‡å¤´ï¼š
<div class="highlight"><pre><span></span><code>REVERSE_PROXY_HEADERS_CLIENT: &quot;X-Powered-By BunkerWeb;X-Frame-Options SAMEORIGIN&quot;
</code></pre></div></p>
</div>
</div>
<div class="tabbed-block">
<p><strong>å¤–éƒ¨è®¤è¯é…ç½®</strong></p>
<p>ä¸å¤–éƒ¨è®¤è¯ç³»ç»Ÿé›†æˆï¼Œä»¥é›†ä¸­ç®¡ç†æ‚¨åº”ç”¨ç¨‹åºçš„æˆæƒé€»è¾‘ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>é›†ä¸­å¼è®¤è¯ï¼š</strong> ä¸ºå¤šä¸ªåº”ç”¨ç¨‹åºå®ç°å•ä¸€è®¤è¯ç‚¹</li>
<li><strong>ä¸€è‡´çš„å®‰å…¨æ€§ï¼š</strong> åœ¨ä¸åŒæœåŠ¡ä¹‹é—´åº”ç”¨ç»Ÿä¸€çš„è®¤è¯ç­–ç•¥</li>
<li><strong>å¢å¼ºçš„æ§åˆ¶ï¼š</strong> é€šè¿‡æ ‡å¤´æˆ–å˜é‡å°†è®¤è¯è¯¦ç»†ä¿¡æ¯è½¬å‘åˆ°åç«¯åº”ç”¨ç¨‹åº</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è®¤è¯è¯·æ±‚ï¼š</strong> ä½¿ç”¨å¤–éƒ¨æä¾›å•†å¯ç”¨è®¤è¯ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ç™»å½• URLï¼š</strong> å½“è®¤è¯å¤±è´¥æ—¶ï¼Œå°†å®¢æˆ·ç«¯é‡å®šå‘åˆ°ç™»å½• URLã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SET</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è®¤è¯è¯·æ±‚è®¾ç½®ï¼š</strong> ä»è®¤è¯æä¾›å•†è®¾ç½®çš„å˜é‡ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">è®¤è¯é›†æˆ</p>
<ul>
<li>è®¤è¯è¯·æ±‚åŠŸèƒ½å¯ä»¥å®ç°é›†ä¸­å¼è®¤è¯å¾®æœåŠ¡</li>
<li>æ‚¨çš„è®¤è¯æœåŠ¡åº”åœ¨æˆåŠŸè®¤è¯æ—¶è¿”å› 200 çŠ¶æ€ç ï¼Œå¤±è´¥æ—¶è¿”å› 401/403</li>
<li>ä½¿ç”¨ auth_request_set æŒ‡ä»¤ä»è®¤è¯æœåŠ¡ä¸­æå–å¹¶è½¬å‘ä¿¡æ¯</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p><strong>é™„åŠ é…ç½®é€‰é¡¹</strong></p>
<p>è¿™äº›è®¾ç½®ä¸ºç‰¹æ®Šåœºæ™¯æä¾›äº†å¯¹åå‘ä»£ç†è¡Œä¸ºçš„è¿›ä¸€æ­¥å®šåˆ¶ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>å®šåˆ¶åŒ–ï¼š</strong> ä¸ºå¤æ‚éœ€æ±‚åŒ…å«é¢å¤–çš„é…ç½®ç‰‡æ®µ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong> é’ˆå¯¹ç‰¹å®šç”¨ä¾‹å¾®è°ƒè¯·æ±‚å¤„ç†</li>
<li><strong>çµæ´»æ€§ï¼š</strong> é€šè¿‡ä¸“é—¨çš„é…ç½®é€‚åº”ç‹¬ç‰¹çš„åº”ç”¨ç¨‹åºéœ€æ±‚</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_INCLUDES</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>é™„åŠ é…ç½®ï¼š</strong> åœ¨ location å—ä¸­åŒ…å«é¢å¤–çš„é…ç½®ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_PASS_REQUEST_BODY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>ä¼ é€’è¯·æ±‚ä½“ï¼š</strong> å¯ç”¨æˆ–ç¦ç”¨ä¼ é€’è¯·æ±‚ä½“ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p>åŒ…å«è‡ªå®šä¹‰é…ç½®ç‰‡æ®µæ—¶è¯·å°å¿ƒï¼Œå› ä¸ºå¦‚æœé…ç½®ä¸å½“ï¼Œå®ƒä»¬å¯èƒ½ä¼šè¦†ç›– BunkerWeb çš„å®‰å…¨è®¾ç½®æˆ–å¼•å…¥æ¼æ´ã€‚</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>å“åº”ç¼“å­˜è®¾ç½®</strong></p>
<p>é€šè¿‡ç¼“å­˜æ¥è‡ªåç«¯æœåŠ¡å™¨çš„å“åº”æ¥æé«˜æ€§èƒ½ï¼Œå‡å°‘è´Ÿè½½å¹¶æ”¹å–„å“åº”æ—¶é—´ã€‚</p>
<div class="admonition success">
<p class="admonition-title">å¥½å¤„</p>
<ul>
<li><strong>æ€§èƒ½ï¼š</strong> é€šè¿‡æä¾›ç¼“å­˜å†…å®¹æ¥å‡å°‘åç«¯æœåŠ¡å™¨çš„è´Ÿè½½</li>
<li><strong>å‡å°‘å»¶è¿Ÿï¼š</strong> å¯¹é¢‘ç¹è¯·æ±‚çš„å†…å®¹å“åº”æ—¶é—´æ›´å¿«</li>
<li><strong>èŠ‚çœå¸¦å®½ï¼š</strong> é€šè¿‡ç¼“å­˜å“åº”æ¥æœ€å°åŒ–å†…éƒ¨ç½‘ç»œæµé‡</li>
<li><strong>å®šåˆ¶åŒ–ï¼š</strong> ç²¾ç¡®é…ç½®ç¼“å­˜çš„å†…å®¹ã€æ—¶é—´å’Œæ–¹å¼</li>
</ul>
</div>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROXY_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ç¼“å­˜ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨åç«¯å“åº”çš„ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_LEVELS</code></td>
<td><code>1:2</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜è·¯å¾„çº§åˆ«ï¼š</strong> å¦‚ä½•æ„å»ºç¼“å­˜ç›®å½•å±‚æ¬¡ç»“æ„ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_ZONE_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜åŒºåŸŸå¤§å°ï¼š</strong> ç”¨äºç¼“å­˜å…ƒæ•°æ®çš„å…±äº«å†…å­˜åŒºåŸŸçš„å¤§å°ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_PARAMS</code></td>
<td><code>max_size=100m</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç¼“å­˜è·¯å¾„å‚æ•°ï¼š</strong> ç¼“å­˜è·¯å¾„çš„é™„åŠ å‚æ•°ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_METHODS</code></td>
<td><code>GET HEAD</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¼“å­˜æ–¹æ³•ï¼š</strong> å¯ä»¥è¢«ç¼“å­˜çš„ HTTP æ–¹æ³•ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¼“å­˜æœ€å°ä½¿ç”¨æ¬¡æ•°ï¼š</strong> å“åº”è¢«ç¼“å­˜å‰çš„æœ€å°è¯·æ±‚æ¬¡æ•°ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_KEY</code></td>
<td><code>$scheme$host$request_uri</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¼“å­˜é”®ï¼š</strong> ç”¨äºå”¯ä¸€æ ‡è¯†ç¼“å­˜å“åº”çš„é”®ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_VALID</code></td>
<td><code>200=24h 301=1h 302=24h</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç¼“å­˜æœ‰æ•ˆæœŸï¼š</strong> ç‰¹å®šå“åº”ç çš„ç¼“å­˜æ—¶é—´ã€‚</td>
</tr>
<tr>
<td><code>PROXY_NO_CACHE</code></td>
<td><code>$http_pragma $http_authorization</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä¸ç¼“å­˜ï¼š</strong> å³ä½¿é€šå¸¸å¯ç¼“å­˜ä¹Ÿä¸ç¼“å­˜å“åº”çš„æ¡ä»¶ã€‚</td>
</tr>
<tr>
<td><code>PROXY_CACHE_BYPASS</code></td>
<td><code>0</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç»•è¿‡ç¼“å­˜ï¼š</strong> ç»•è¿‡ç¼“å­˜çš„æ¡ä»¶ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">ç¼“å­˜æœ€ä½³å®è·µ</p>
<ul>
<li>åªç¼“å­˜ä¸ç»å¸¸æ›´æ”¹æˆ–éä¸ªæ€§åŒ–çš„å†…å®¹</li>
<li>æ ¹æ®å†…å®¹ç±»å‹ä½¿ç”¨é€‚å½“çš„ç¼“å­˜æŒç»­æ—¶é—´ï¼ˆé™æ€èµ„æºå¯ä»¥ç¼“å­˜æ›´é•¿æ—¶é—´ï¼‰</li>
<li>é…ç½® <code>PROXY_NO_CACHE</code> ä»¥é¿å…ç¼“å­˜æ•æ„Ÿæˆ–ä¸ªæ€§åŒ–å†…å®¹</li>
<li>ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡å¹¶ç›¸åº”åœ°è°ƒæ•´è®¾ç½®</li>
</ul>
</div>
</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">Docker Compose ç”¨æˆ· - NGINX å˜é‡</p>
<p>å½“åœ¨ Docker Compose ä¸­ä½¿ç”¨ NGINX å˜é‡è¿›è¡Œé…ç½®æ—¶ï¼Œæ‚¨å¿…é¡»é€šè¿‡ä½¿ç”¨åŒç¾å…ƒç¬¦å· (<code>$$</code>) æ¥è½¬ä¹‰ç¾å…ƒç¬¦å· (<code>$</code>)ã€‚è¿™é€‚ç”¨äºæ‰€æœ‰åŒ…å« NGINX å˜é‡çš„è®¾ç½®ï¼Œå¦‚ <code>$remote_addr</code>ã€<code>$proxy_add_x_forwarded_for</code> ç­‰ã€‚</p>
<p>å¦‚æœä¸è¿›è¡Œæ­¤è½¬ä¹‰ï¼ŒDocker Compose å°†å°è¯•ç”¨ç¯å¢ƒå˜é‡æ›¿æ¢è¿™äº›å˜é‡ï¼Œè€Œè¿™äº›ç¯å¢ƒå˜é‡é€šå¸¸ä¸å­˜åœ¨ï¼Œå¯¼è‡´æ‚¨çš„ NGINX é…ç½®ä¸­å‡ºç°ç©ºå€¼ã€‚</p>
</div>
<h3 id="_107">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="38:6"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><input id="__tabbed_38_2" name="__tabbed_38" type="radio" /><input id="__tabbed_38_3" name="__tabbed_38" type="radio" /><input id="__tabbed_38_4" name="__tabbed_38" type="radio" /><input id="__tabbed_38_5" name="__tabbed_38" type="radio" /><input id="__tabbed_38_6" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">åŸºæœ¬ HTTP ä»£ç†</label><label for="__tabbed_38_2">WebSocket åº”ç”¨</label><label for="__tabbed_38_3">å¤šä¸ªä½ç½®</label><label for="__tabbed_38_4">ç¼“å­˜é…ç½®</label><label for="__tabbed_38_5">é«˜çº§æ ‡å¤´ç®¡ç†</label><label for="__tabbed_38_6">è®¤è¯é›†æˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç”¨äºå°† HTTP è¯·æ±‚ä»£ç†åˆ°åç«¯åº”ç”¨æœåŠ¡å™¨çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸º WebSocket åº”ç”¨ç¨‹åºä¼˜åŒ–çš„é…ç½®ï¼Œå…·æœ‰æ›´é•¿çš„è¶…æ—¶æ—¶é—´ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://websocket-app:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å°†ä¸åŒè·¯å¾„è·¯ç”±åˆ°ä¸åŒåç«¯æœåŠ¡çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># API åç«¯</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://api-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/&quot;</span>

<span class="c1"># ç®¡ç†åç«¯</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://admin-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>

<span class="c1"># å‰ç«¯åº”ç”¨</span>
<span class="nt">REVERSE_PROXY_HOST_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://frontend:3000&quot;</span>
<span class="nt">REVERSE_PROXY_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å¯ç”¨äº†ä»£ç†ç¼“å­˜ä»¥æé«˜æ€§èƒ½çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">USE_PROXY_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">PROXY_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200=24h</span><span class="nv"> </span><span class="s">301=1h</span><span class="nv"> </span><span class="s">302=24h&quot;</span>
<span class="nt">PROXY_CACHE_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET</span><span class="nv"> </span><span class="s">HEAD&quot;</span>
<span class="nt">PROXY_NO_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$http_authorization&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…·æœ‰è‡ªå®šä¹‰æ ‡å¤´æ“ä½œçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># å‘é€åˆ°åç«¯çš„è‡ªå®šä¹‰æ ‡å¤´</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP</span><span class="nv"> </span><span class="s">$remote_addr;X-Forwarded-For</span><span class="nv"> </span><span class="s">$proxy_add_x_forwarded_for;X-Forwarded-Proto</span><span class="nv"> </span><span class="s">$scheme&quot;</span>

<span class="c1"># å‘é€ç»™å®¢æˆ·ç«¯çš„è‡ªå®šä¹‰æ ‡å¤´</span>
<span class="nt">REVERSE_PROXY_HEADERS_CLIENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Powered-By</span><span class="nv"> </span><span class="s">BunkerWeb;X-Frame-Options</span><span class="nv"> </span><span class="s">SAMEORIGIN&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸å¤–éƒ¨è®¤è¯é›†æˆçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># è®¤è¯é…ç½®</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://login.example.com&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$auth_user</span><span class="nv"> </span><span class="s">$upstream_http_x_user;$auth_role</span><span class="nv"> </span><span class="s">$upstream_http_x_role&quot;</span>

<span class="c1"># è®¤è¯æœåŠ¡åç«¯</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://auth-service:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="reverse-scan">Reverse scan</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>åå‘æ‰«ææ’ä»¶é€šè¿‡æ‰«æå®¢æˆ·ç«¯ç«¯å£æ¥æ£€æµ‹å…¶æ˜¯å¦æ­£åœ¨è¿è¡Œä»£ç†æœåŠ¡å™¨æˆ–å…¶ä»–ç½‘ç»œæœåŠ¡ï¼Œä»è€Œæœ‰åŠ›åœ°é˜²æ­¢ä»£ç†ç»•è¿‡ä¼å›¾ã€‚æ­¤åŠŸèƒ½æœ‰åŠ©äºè¯†åˆ«å’Œé˜»æ­¢å¯èƒ½è¯•å›¾éšè—å…¶çœŸå®èº«ä»½æˆ–æ¥æºçš„å®¢æˆ·ç«¯å¸¦æ¥çš„æ½œåœ¨å¨èƒï¼Œä»è€Œå¢å¼ºæ‚¨ç½‘ç«™çš„å®‰å…¨çŠ¶å†µã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯è¿æ¥åˆ°æ‚¨çš„æœåŠ¡å™¨æ—¶ï¼ŒBunkerWeb ä¼šå°è¯•æ‰«æå®¢æˆ·ç«¯ IP åœ°å€ä¸Šçš„ç‰¹å®šç«¯å£ã€‚</li>
<li>è¯¥æ’ä»¶ä¼šæ£€æŸ¥å®¢æˆ·ç«¯ä¸Šæ˜¯å¦æœ‰ä»»ä½•å¸¸è§çš„ä»£ç†ç«¯å£ï¼ˆä¾‹å¦‚ 80ã€443ã€8080 ç­‰ï¼‰å¤„äºæ‰“å¼€çŠ¶æ€ã€‚</li>
<li>å¦‚æœæ£€æµ‹åˆ°æ‰“å¼€çš„ç«¯å£ï¼Œè¡¨æ˜å®¢æˆ·ç«¯å¯èƒ½æ­£åœ¨è¿è¡Œä»£ç†æœåŠ¡å™¨ï¼Œåˆ™è¿æ¥å°†è¢«æ‹’ç»ã€‚</li>
<li>è¿™ä¸ºé˜²æ­¢è‡ªåŠ¨åŒ–å·¥å…·ã€æœºå™¨äººå’Œè¯•å›¾æ©ç›–å…¶èº«ä»½çš„æ¶æ„ç”¨æˆ·å¢åŠ äº†ä¸€å±‚é¢å¤–çš„å®‰å…¨ä¿éšœã€‚</li>
</ol>
<div class="admonition success">
<p class="admonition-title">ä¸»è¦ä¼˜åŠ¿</p>
<ol>
<li><strong>å¢å¼ºå®‰å…¨æ€§ï¼š</strong> è¯†åˆ«å¯èƒ½è¿è¡Œç”¨äºæ¶æ„ç›®çš„çš„ä»£ç†æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ã€‚</li>
<li><strong>ä»£ç†æ£€æµ‹ï¼š</strong> å¸®åŠ©æ£€æµ‹å¹¶é˜»æ­¢è¯•å›¾éšè—å…¶çœŸå®èº«ä»½çš„å®¢æˆ·ç«¯ã€‚</li>
<li><strong>å¯é…ç½®è®¾ç½®ï¼š</strong> æ ¹æ®æ‚¨çš„ç‰¹å®šå®‰å…¨è¦æ±‚è‡ªå®šä¹‰è¦æ‰«æçš„ç«¯å£ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong> æ™ºèƒ½æ‰«æï¼Œå…·æœ‰å¯é…ç½®çš„è¶…æ—¶ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å¯¹åˆæ³•ç”¨æˆ·çš„å½±å“ã€‚</li>
<li><strong>æ— ç¼é›†æˆï¼š</strong> ä¸æ‚¨ç°æœ‰çš„å®‰å…¨å±‚é€æ˜åœ°ååŒå·¥ä½œã€‚</li>
</ol>
</div>
<h3 id="_108">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨åå‘æ‰«æåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_REVERSE_SCAN</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®¢æˆ·ç«¯ç«¯å£æ‰«æã€‚</li>
<li><strong>é…ç½®è¦æ‰«æçš„ç«¯å£ï¼š</strong> è‡ªå®šä¹‰ <code>REVERSE_SCAN_PORTS</code> è®¾ç½®ä»¥æŒ‡å®šåº”æ£€æŸ¥å“ªäº›å®¢æˆ·ç«¯ç«¯å£ã€‚</li>
<li><strong>è®¾ç½®æ‰«æè¶…æ—¶ï¼š</strong> è°ƒæ•´ <code>REVERSE_SCAN_TIMEOUT</code> ä»¥åœ¨å½»åº•æ‰«æå’Œæ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</li>
<li><strong>ç›‘æ§æ‰«ææ´»åŠ¨ï¼š</strong> æ£€æŸ¥æ—¥å¿—å’Œ <a href="../web-ui/">Web UI</a> ä»¥å®¡æŸ¥æ‰«æç»“æœå’Œæ½œåœ¨çš„å®‰å…¨äº‹ä»¶ã€‚</li>
</ol>
<h3 id="_109">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_SCAN</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨åå‘æ‰«æï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®¢æˆ·ç«¯ç«¯å£æ‰«æã€‚</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_PORTS</code></td>
<td><code>22 80 443 3128 8000 8080</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¦æ‰«æçš„ç«¯å£ï¼š</strong> è¦åœ¨å®¢æˆ·ç«¯æ£€æŸ¥çš„ç«¯å£çš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_TIMEOUT</code></td>
<td><code>500</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>æ‰«æè¶…æ—¶ï¼š</strong> å…è®¸æ‰«æç«¯å£çš„æœ€é•¿æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">æ€§èƒ½æ³¨æ„äº‹é¡¹</p>
<p>æ‰«æå¤šä¸ªç«¯å£ä¼šå¢åŠ å®¢æˆ·ç«¯è¿æ¥çš„å»¶è¿Ÿã€‚è¯·ä½¿ç”¨é€‚å½“çš„è¶…æ—¶å€¼å¹¶é™åˆ¶æ‰«æçš„ç«¯å£æ•°é‡ä»¥ä¿æŒè‰¯å¥½çš„æ€§èƒ½ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">å¸¸è§ä»£ç†ç«¯å£</p>
<p>é»˜è®¤é…ç½®åŒ…æ‹¬ä»£ç†æœåŠ¡å™¨ï¼ˆ80ã€443ã€8080ã€3128ï¼‰å’Œ SSHï¼ˆ22ï¼‰ä½¿ç”¨çš„å¸¸è§ç«¯å£ã€‚æ‚¨å¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„å¨èƒæ¨¡å‹è‡ªå®šä¹‰æ­¤åˆ—è¡¨ã€‚</p>
</div>
<h3 id="_110">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="39:4"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><input id="__tabbed_39_2" name="__tabbed_39" type="radio" /><input id="__tabbed_39_3" name="__tabbed_39" type="radio" /><input id="__tabbed_39_4" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_39_2">å…¨é¢æ‰«æ</label><label for="__tabbed_39_3">æ€§èƒ½ä¼˜åŒ–é…ç½®</label><label for="__tabbed_39_4">é«˜å®‰å…¨æ€§é…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç”¨äºå¯ç”¨å®¢æˆ·ç«¯ç«¯å£æ‰«æçš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªæ›´å½»åº•çš„é…ç½®ï¼Œæ£€æŸ¥å…¶ä»–ç«¯å£ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">8081&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>é€šè¿‡æ£€æŸ¥æ›´å°‘çš„ç«¯å£å’Œæ›´ä½çš„è¶…æ—¶æ¥è°ƒæ•´ä»¥è·å¾—æ›´å¥½æ€§èƒ½çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸“æ³¨äºæœ€å¤§å®‰å…¨æ€§å¹¶è¿›è¡Œæ‰©å±•æ‰«æçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">25</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">4444</span><span class="nv"> </span><span class="s">5555</span><span class="nv"> </span><span class="s">6588</span><span class="nv"> </span><span class="s">6666</span><span class="nv"> </span><span class="s">7777</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8081</span><span class="nv"> </span><span class="s">8800</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">9999&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="robotstxt">Robots.txt</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Robots.txt æ’ä»¶ä¸ºæ‚¨çš„ç½‘ç«™ç®¡ç† <a href="https://www.robotstxt.org/">robots.txt</a> æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å‘ŠçŸ¥ç½‘ç»œçˆ¬è™«å’Œæœºå™¨äººå®ƒä»¬å¯ä»¥æˆ–ä¸å¯ä»¥è®¿é—®æ‚¨ç½‘ç«™çš„å“ªäº›éƒ¨åˆ†ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<p>å¯ç”¨åï¼ŒBunkerWeb ä¼šåœ¨æ‚¨ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹åŠ¨æ€ç”Ÿæˆ <code>/robots.txt</code> æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶ä¸­çš„è§„åˆ™æŒ‰ä»¥ä¸‹é¡ºåºä»å¤šä¸ªæ¥æºèšåˆè€Œæˆï¼š</p>
<ol>
<li><strong>DarkVisitors APIï¼š</strong> å¦‚æœæä¾›äº† <code>ROBOTSTXT_DARKVISITORS_TOKEN</code>ï¼Œè§„åˆ™å°†ä» <a href="https://darkvisitors.com/">DarkVisitors</a> API è·å–ï¼Œä»è€Œå¯ä»¥æ ¹æ®é…ç½®çš„ä»£ç†ç±»å‹å’Œä¸å…è®¸çš„ç”¨æˆ·ä»£ç†åŠ¨æ€é˜»æ­¢æ¶æ„æœºå™¨äººå’Œ AI çˆ¬è™«ã€‚</li>
<li><strong>ç¤¾åŒºåˆ—è¡¨ï¼š</strong> åŒ…å«æ¥è‡ªé¢„å®šä¹‰ã€ç¤¾åŒºç»´æŠ¤çš„ <code>robots.txt</code> åˆ—è¡¨ï¼ˆç”± <code>ROBOTSTXT_COMMUNITY_LISTS</code> æŒ‡å®šï¼‰çš„è§„åˆ™ã€‚</li>
<li><strong>è‡ªå®šä¹‰ URLï¼š</strong> è§„åˆ™ä»ç”¨æˆ·æä¾›çš„ URLï¼ˆç”± <code>ROBOTSTXT_URLS</code> æŒ‡å®šï¼‰è·å–ã€‚</li>
<li><strong>æ‰‹åŠ¨è§„åˆ™ï¼š</strong> æ·»åŠ ç›´æ¥é€šè¿‡ <code>ROBOTSTXT_RULE</code> ç¯å¢ƒå˜é‡å®šä¹‰çš„è§„åˆ™ã€‚</li>
</ol>
<p>æ‰€æœ‰è¿™äº›æ¥æºçš„è§„åˆ™éƒ½ä¼šè¢«åˆå¹¶ã€‚èšåˆåï¼Œå°†åº”ç”¨ <code>ROBOTSTXT_IGNORE_RULE</code> æ¥ä½¿ç”¨ PCRE æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¿‡æ»¤æ‰ä»»ä½•ä¸éœ€è¦çš„è§„åˆ™ã€‚æœ€åï¼Œå¦‚æœæ•´ä¸ªè¿‡ç¨‹åæ²¡æœ‰ä»»ä½•è§„åˆ™å‰©ä¸‹ï¼Œå°†è‡ªåŠ¨åº”ç”¨é»˜è®¤çš„ <code>User-agent: *</code> å’Œ <code>Disallow: /</code> è§„åˆ™ï¼Œä»¥ç¡®ä¿åŸºæœ¬çº§åˆ«çš„ä¿æŠ¤ã€‚å¯é€‰çš„ç«™ç‚¹åœ°å›¾ URLï¼ˆç”± <code>ROBOTSTXT_SITEMAP</code> æŒ‡å®šï¼‰ä¹Ÿä¼šåŒ…å«åœ¨æœ€ç»ˆçš„ <code>robots.txt</code> è¾“å‡ºä¸­ã€‚</p>
<h3 id="darkvisitors-api">ä½¿ç”¨ DarkVisitors API åŠ¨æ€è§„é¿æœºå™¨äºº</h3>
<p><a href="https://darkvisitors.com/">DarkVisitors</a> æ˜¯ä¸€é¡¹æä¾›åŠ¨æ€ <code>robots.txt</code> æ–‡ä»¶çš„æœåŠ¡ï¼Œä»¥å¸®åŠ©é˜»æ­¢å·²çŸ¥çš„æ¶æ„æœºå™¨äººå’Œ AI çˆ¬è™«ã€‚é€šè¿‡ä¸ DarkVisitors é›†æˆï¼ŒBunkerWeb å¯ä»¥è‡ªåŠ¨è·å–å¹¶æä¾›æœ€æ–°çš„ <code>robots.txt</code>ï¼Œå¸®åŠ©ä¿æŠ¤æ‚¨çš„ç½‘ç«™å…å—ä¸å¿…è¦çš„è‡ªåŠ¨åŒ–æµé‡ã€‚</p>
<p>è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œæ‚¨éœ€è¦åœ¨ <a href="https://darkvisitors.com/docs/robots-txt">darkvisitors.com</a> æ³¨å†Œå¹¶è·å–ä¸€ä¸ª bearer ä»¤ç‰Œã€‚</p>
<h3 id="_111">å¦‚ä½•ä½¿ç”¨</h3>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_ROBOTSTXT</code> è®¾ç½®ä¸º <code>yes</code>ã€‚</li>
<li><strong>é…ç½®è§„åˆ™ï¼š</strong> é€‰æ‹©ä¸€ç§æˆ–å¤šç§æ–¹æ³•æ¥å®šä¹‰æ‚¨çš„ <code>robots.txt</code> è§„åˆ™ï¼š<ul>
<li><strong>DarkVisitors APIï¼š</strong> æä¾› <code>ROBOTSTXT_DARKVISITORS_TOKEN</code>ï¼Œå¹¶å¯é€‰æ‹©æ€§åœ°æä¾› <code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code> å’Œ <code>ROBOTSTXT_DARKVISITORS_DISALLOW</code>ã€‚</li>
<li><strong>ç¤¾åŒºåˆ—è¡¨ï¼š</strong> æŒ‡å®š <code>ROBOTSTXT_COMMUNITY_LISTS</code>ï¼ˆä»¥ç©ºæ ¼åˆ†éš”çš„ IDï¼‰ã€‚</li>
<li><strong>è‡ªå®šä¹‰ URLï¼š</strong> æä¾› <code>ROBOTSTXT_URLS</code>ï¼ˆä»¥ç©ºæ ¼åˆ†éš”çš„ URLï¼‰ã€‚</li>
<li><strong>æ‰‹åŠ¨è§„åˆ™ï¼š</strong> ä½¿ç”¨ <code>ROBOTSTXT_RULE</code> å®šä¹‰å•ä¸ªè§„åˆ™ï¼ˆå¯ä»¥ä½¿ç”¨ <code>ROBOTSTXT_RULE_N</code> æŒ‡å®šå¤šä¸ªè§„åˆ™ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>è¿‡æ»¤è§„åˆ™ï¼ˆå¯é€‰ï¼‰ï¼š</strong> ä½¿ç”¨ <code>ROBOTSTXT_IGNORE_RULE_N</code> é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æ’é™¤ç‰¹å®šè§„åˆ™ã€‚</li>
<li><strong>æ·»åŠ ç«™ç‚¹åœ°å›¾ï¼ˆå¯é€‰ï¼‰ï¼š</strong> ä½¿ç”¨ <code>ROBOTSTXT_SITEMAP_N</code> å®šä¹‰ç«™ç‚¹åœ°å›¾ URLã€‚</li>
<li><strong>è·å–ç”Ÿæˆçš„ robots.txt æ–‡ä»¶ï¼š</strong> åœ¨ BunkerWeb ä½¿ç”¨ä¸Šè¿°è®¾ç½®è¿è¡Œåï¼Œæ‚¨å¯ä»¥é€šè¿‡å‘ <code>http(s)://your-domain.com/robots.txt</code> å‘å‡º HTTP GET è¯·æ±‚æ¥è®¿é—®åŠ¨æ€ç”Ÿæˆçš„ <code>robots.txt</code> æ–‡ä»¶ã€‚</li>
</ol>
<h3 id="_112">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ROBOTSTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td>å¯ç”¨æˆ–ç¦ç”¨ <code>robots.txt</code> åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_TOKEN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td>ç”¨äº DarkVisitors API çš„ Bearer ä»¤ç‰Œã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td>ä» DarkVisitors åŒ…å«çš„ä»£ç†ç±»å‹ï¼ˆä¾‹å¦‚ <code>AI Data Scraper</code>ï¼‰çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_DISALLOW</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>å¦</td>
<td>æŒ‡å®šä¸å…è®¸å“ªäº› URL çš„å­—ç¬¦ä¸²ã€‚åœ¨è”ç³» DarkVisitors API æ—¶ï¼Œæ­¤å€¼å°†ä½œä¸º disallow å­—æ®µå‘é€ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_COMMUNITY_LISTS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td>è¦åŒ…å«çš„ç¤¾åŒºç»´æŠ¤è§„åˆ™é›† ID çš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td>ç”¨äºè·å–é¢å¤– <code>robots.txt</code> è§„åˆ™çš„ URL çš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ã€‚æ”¯æŒ <code>file://</code> å’ŒåŸºæœ¬èº«ä»½éªŒè¯ (<code>http://user:pass@url</code>)ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_RULE</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><code>robots.txt</code> çš„å•æ¡è§„åˆ™ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><code>robots.txt</code> æ–‡ä»¶çš„é¡µçœ‰ï¼ˆåœ¨è§„åˆ™ä¹‹å‰ï¼‰ã€‚å¯ä»¥æ˜¯ Base64 ç¼–ç ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_FOOTER</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><code>robots.txt</code> æ–‡ä»¶çš„é¡µè„šï¼ˆåœ¨è§„åˆ™ä¹‹åï¼‰ã€‚å¯ä»¥æ˜¯ Base64 ç¼–ç ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_IGNORE_RULE</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td>ç”¨äºå¿½ç•¥è§„åˆ™çš„å•ä¸ª PCRE æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td><code>ROBOTSTXT_SITEMAP</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td>å•ä¸ªç«™ç‚¹åœ°å›¾ URLã€‚</td>
</tr>
</tbody>
</table>
<h3 id="_113">é…ç½®ç¤ºä¾‹</h3>
<p><strong>åŸºæœ¬æ‰‹åŠ¨è§„åˆ™</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span><span class="err">```</span>

<span class="err">*</span><span class="nv">*ä½¿ç”¨åŠ¨æ€æº</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(DarkVisitors &amp; ç¤¾åŒºåˆ—è¡¨)**</span>

<span class="err">```</span><span class="l l-Scalar l-Scalar-Plain">yaml</span>
<span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-darkvisitors-token-here&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_AGENT_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AI</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Scraper&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots-disallowed&quot;</span>
<span class="nt">ROBOTSTT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
</code></pre></div>
<p><strong>ç»„åˆé…ç½®</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-darkvisitors-token-here&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-robots-txt&quot;</span>
<span class="nt">ROBOTSTXT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/my-custom-rules.txt&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">MyOwnBot&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/admin&quot;</span>
<span class="nt">ROBOTSTT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p><strong>å¸¦é¡µçœ‰å’Œé¡µè„š</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é¡µçœ‰&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_FOOTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é¡µè„š&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<hr />
<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://www.robotstxt.org/robotstxt.html">robots.txt æ–‡æ¡£</a>ã€‚</p>
<h2 id="ssl">SSL</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>SSL æ’ä»¶ä¸ºæ‚¨çš„ BunkerWeb ä¿æŠ¤çš„ç½‘ç«™æä¾›å¼ºå¤§çš„ SSL/TLS åŠ å¯†åŠŸèƒ½ã€‚è¿™ä¸ªæ ¸å¿ƒç»„ä»¶é€šè¿‡é…ç½®å’Œä¼˜åŒ–åŠ å¯†åè®®ã€å¯†ç å¥—ä»¶ä»¥åŠç›¸å…³çš„å®‰å…¨è®¾ç½®æ¥å¯ç”¨å®‰å…¨çš„ HTTPS è¿æ¥ï¼Œä»¥ä¿æŠ¤å®¢æˆ·ç«¯å’Œæ‚¨çš„ Web æœåŠ¡ä¹‹é—´ä¼ è¾“ä¸­çš„æ•°æ®ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“å®¢æˆ·ç«¯å‘æ‚¨çš„ç½‘ç«™å‘èµ· HTTPS è¿æ¥æ—¶ï¼ŒBunkerWeb ä¼šä½¿ç”¨æ‚¨é…ç½®çš„è®¾ç½®å¤„ç† SSL/TLS æ¡æ‰‹ã€‚</li>
<li>è¯¥æ’ä»¶å¼ºåˆ¶ä½¿ç”¨ç°ä»£åŠ å¯†åè®®å’Œå¼ºå¤§çš„å¯†ç å¥—ä»¶ï¼ŒåŒæ—¶ç¦ç”¨å·²çŸ¥çš„æ˜“å—æ”»å‡»çš„é€‰é¡¹ã€‚</li>
<li>ä¼˜åŒ–çš„ SSL ä¼šè¯å‚æ•°å¯åœ¨ä¸ç‰ºç‰²å®‰å…¨æ€§çš„æƒ…å†µä¸‹æé«˜è¿æ¥æ€§èƒ½ã€‚</li>
<li>è¯ä¹¦çš„å‘ˆç°æ ¹æ®æœ€ä½³å®è·µè¿›è¡Œé…ç½®ï¼Œä»¥ç¡®ä¿å…¼å®¹æ€§å’Œå®‰å…¨æ€§ã€‚</li>
</ol>
<p>!!! success "å®‰å…¨ä¼˜åŠ¿" - <strong>æ•°æ®ä¿æŠ¤ï¼š</strong> åŠ å¯†ä¼ è¾“ä¸­çš„æ•°æ®ï¼Œé˜²æ­¢çªƒå¬å’Œä¸­é—´äººæ”»å‡» - <strong>èº«ä»½éªŒè¯ï¼š</strong> å‘å®¢æˆ·ç«¯éªŒè¯æ‚¨æœåŠ¡å™¨çš„èº«ä»½ - <strong>å®Œæ•´æ€§ï¼š</strong> ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹ - <strong>ç°ä»£æ ‡å‡†ï¼š</strong> é…ç½®ç¬¦åˆè¡Œä¸šæœ€ä½³å®è·µå’Œå®‰å…¨æ ‡å‡†</p>
<h3 id="_114">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ SSL åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é…ç½®åè®®ï¼š</strong> ä½¿ç”¨ <code>SSL_PROTOCOLS</code> è®¾ç½®é€‰æ‹©è¦æ”¯æŒçš„ SSL/TLS åè®®ç‰ˆæœ¬ã€‚</li>
<li><strong>é€‰æ‹©å¯†ç å¥—ä»¶ï¼š</strong> ä½¿ç”¨ <code>SSL_CIPHERS_LEVEL</code> è®¾ç½®æŒ‡å®šåŠ å¯†å¼ºåº¦ï¼Œæˆ–ä½¿ç”¨ <code>SSL_CIPHERS_CUSTOM</code> æä¾›è‡ªå®šä¹‰å¯†ç ã€‚</li>
<li><strong>é…ç½® HTTP åˆ° HTTPS é‡å®šå‘ï¼š</strong> ä½¿ç”¨ <code>AUTO_REDIRECT_HTTP_TO_HTTPS</code> æˆ– <code>REDIRECT_HTTP_TO_HTTPS</code> è®¾ç½®æ¥è®¾ç½®è‡ªåŠ¨é‡å®šå‘ã€‚</li>
</ol>
<h3 id="_115">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>HTTP é‡å®šå‘åˆ° HTTPSï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œæ‰€æœ‰ HTTP è¯·æ±‚éƒ½ä¼šé‡å®šå‘åˆ° HTTPSã€‚</td>
</tr>
<tr>
<td><code>AUTO_REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è‡ªåŠ¨ HTTP é‡å®šå‘åˆ° HTTPSï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œå¦‚æœæ£€æµ‹åˆ° HTTPSï¼Œåˆ™è‡ªåŠ¨å°† HTTP é‡å®šå‘åˆ° HTTPSã€‚</td>
</tr>
<tr>
<td><code>SSL_PROTOCOLS</code></td>
<td><code>TLSv1.2 TLSv1.3</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>SSL åè®®ï¼š</strong> è¦æ”¯æŒçš„ SSL/TLS åè®®çš„ç©ºæ ¼åˆ†éš”åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_LEVEL</code></td>
<td><code>modern</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>SSL å¯†ç çº§åˆ«ï¼š</strong> å¯†ç å¥—ä»¶çš„é¢„è®¾å®‰å…¨çº§åˆ«ï¼ˆ<code>modern</code>ã€<code>intermediate</code> æˆ– <code>old</code>ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_CUSTOM</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è‡ªå®šä¹‰ SSL å¯†ç ï¼š</strong> ç”¨äº SSL/TLS è¿æ¥çš„å¯†ç å¥—ä»¶çš„å†’å·åˆ†éš”åˆ—è¡¨ï¼ˆè¦†ç›–çº§åˆ«ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">SSL Labs æµ‹è¯•</p>
<p>é…ç½® SSL è®¾ç½®åï¼Œè¯·ä½¿ç”¨ <a href="https://www.ssllabs.com/ssltest/">Qualys SSL Labs æœåŠ¡å™¨æµ‹è¯•</a> æ¥éªŒè¯æ‚¨çš„é…ç½®å¹¶æ£€æŸ¥æ½œåœ¨çš„å®‰å…¨é—®é¢˜ã€‚ä¸€ä¸ªæ­£ç¡®çš„ BunkerWeb SSL é…ç½®åº”è¯¥èƒ½è·å¾— A+ è¯„çº§ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">åè®®é€‰æ‹©</p>
<p>ç”±äºå·²çŸ¥çš„æ¼æ´ï¼Œé»˜è®¤æƒ…å†µä¸‹æœ‰æ„ç¦ç”¨äº†å¯¹ SSLv3ã€TLSv1.0 å’Œ TLSv1.1 ç­‰æ—§åè®®çš„æ”¯æŒã€‚åªæœ‰åœ¨æ‚¨ç»å¯¹éœ€è¦æ”¯æŒæ—§ç‰ˆå®¢æˆ·ç«¯å¹¶äº†è§£è¿™æ ·åšçš„å®‰å…¨éšæ‚£æ—¶ï¼Œæ‰å¯ç”¨è¿™äº›åè®®ã€‚</p>
</div>
<h3 id="_116">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="40:4"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><input id="__tabbed_40_2" name="__tabbed_40" type="radio" /><input id="__tabbed_40_3" name="__tabbed_40" type="radio" /><input id="__tabbed_40_4" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">ç°ä»£å®‰å…¨ï¼ˆé»˜è®¤ï¼‰</label><label for="__tabbed_40_2">æœ€é«˜å®‰å…¨</label><label for="__tabbed_40_3">æ—§ç‰ˆå…¼å®¹æ€§</label><label for="__tabbed_40_4">è‡ªå®šä¹‰å¯†ç </label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>é»˜è®¤é…ç½®æä¾›äº†å¼ºå¤§çš„å®‰å…¨æ€§ï¼ŒåŒæ—¶ä¿æŒäº†ä¸ç°ä»£æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸“æ³¨äºæœ€é«˜å®‰å…¨æ€§çš„é…ç½®ï¼Œå¯èƒ½ä¼šé™ä½å¯¹æ—§ç‰ˆå®¢æˆ·ç«¯çš„å…¼å®¹æ€§ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸ºæ—§ç‰ˆå®¢æˆ·ç«¯æä¾›æ›´å¹¿æ³›å…¼å®¹æ€§çš„é…ç½®ï¼ˆä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼‰ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨è‡ªå®šä¹‰å¯†ç è§„èŒƒçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_CUSTOM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="securitytxt">Security.txt</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Security.txt æ’ä»¶ä¸ºæ‚¨çš„ç½‘ç«™å®æ–½ <a href="https://securitytxt.org/">Security.txt</a> æ ‡å‡† (<a href="https://www.rfc-editor.org/rfc/rfc9116">RFC 9116</a>)ã€‚æ­¤åŠŸèƒ½å¯å¸®åŠ©å®‰å…¨ç ”ç©¶äººå‘˜è®¿é—®æ‚¨çš„å®‰å…¨ç­–ç•¥ï¼Œå¹¶ä¸ºä»–ä»¬æä¾›ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥æŠ¥å‘Šä»–ä»¬åœ¨æ‚¨çš„ç³»ç»Ÿä¸­å‘ç°çš„å®‰å…¨æ¼æ´ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å¯ç”¨åï¼ŒBunkerWeb ä¼šåœ¨æ‚¨ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>/.well-known/security.txt</code> æ–‡ä»¶ã€‚</li>
<li>æ­¤æ–‡ä»¶åŒ…å«æœ‰å…³æ‚¨çš„å®‰å…¨ç­–ç•¥ã€è”ç³»äººå’Œå…¶ä»–ç›¸å…³è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li>å®‰å…¨ç ”ç©¶äººå‘˜å’Œè‡ªåŠ¨åŒ–å·¥å…·å¯ä»¥è½»æ¾åœ°åœ¨æ ‡å‡†ä½ç½®æ‰¾åˆ°æ­¤æ–‡ä»¶ã€‚</li>
<li>å†…å®¹ä½¿ç”¨ç®€å•çš„è®¾ç½®è¿›è¡Œé…ç½®ï¼Œå…è®¸æ‚¨æŒ‡å®šè”ç³»ä¿¡æ¯ã€åŠ å¯†å¯†é’¥ã€ç­–ç•¥å’Œè‡´è°¢ã€‚</li>
<li>BunkerWeb ä¼šè‡ªåŠ¨æ ¹æ® RFC 9116 æ ¼å¼åŒ–è¯¥æ–‡ä»¶ã€‚</li>
</ol>
<h3 id="_117">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ Security.txt åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>USE_SECURITYTXT</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ security.txt æ–‡ä»¶ã€‚</li>
<li><strong>é…ç½®è”ç³»ä¿¡æ¯ï¼š</strong> ä½¿ç”¨ <code>SECURITYTXT_CONTACT</code> è®¾ç½®è‡³å°‘æŒ‡å®šä¸€ç§è”ç³»æ–¹å¼ã€‚</li>
<li><strong>è®¾ç½®é™„åŠ ä¿¡æ¯ï¼š</strong> é…ç½®å¯é€‰å­—æ®µï¼Œå¦‚åˆ°æœŸæ—¥æœŸã€åŠ å¯†ã€è‡´è°¢å’Œç­–ç•¥ URLã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼ŒBunkerWeb å°†è‡ªåŠ¨åœ¨æ ‡å‡†ä½ç½®åˆ›å»ºå¹¶æä¾› security.txt æ–‡ä»¶ã€‚</li>
</ol>
<h3 id="_118">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_SECURITYTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ Security.txtï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ security.txt æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_URI</code></td>
<td><code>/.well-known/security.txt</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>Security.txt URIï¼š</strong> æŒ‡ç¤º security.txt æ–‡ä»¶å¯è®¿é—®çš„ URIã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_CONTACT</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è”ç³»ä¿¡æ¯ï¼š</strong> å®‰å…¨ç ”ç©¶äººå‘˜å¦‚ä½•ä¸æ‚¨è”ç³»ï¼ˆä¾‹å¦‚ï¼Œ<code>mailto:security@example.com</code>ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_EXPIRES</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>åˆ°æœŸæ—¥æœŸï¼š</strong> æ­¤ security.txt æ–‡ä»¶åº”è¢«è§†ä¸ºåˆ°æœŸçš„æ—¥æœŸï¼ˆISO 8601 æ ¼å¼ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_ENCRYPTION</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>åŠ å¯†ï¼š</strong> æŒ‡å‘ç”¨äºå®‰å…¨é€šä¿¡çš„åŠ å¯†å¯†é’¥çš„ URLã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_ACKNOWLEDGEMENTS</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è‡´è°¢ï¼š</strong> è®¤å¯å®‰å…¨ç ”ç©¶äººå‘˜æŠ¥å‘Šçš„ URLã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_POLICY</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å®‰å…¨ç­–ç•¥ï¼š</strong> æŒ‡å‘æè¿°å¦‚ä½•æŠ¥å‘Šæ¼æ´çš„å®‰å…¨ç­–ç•¥çš„ URLã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_HIRING</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>å®‰å…¨èŒä½ï¼š</strong> æŒ‡å‘ä¸å®‰å…¨ç›¸å…³çš„èŒä½ç©ºç¼ºçš„ URLã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_CANONICAL</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>è§„èŒƒ URLï¼š</strong> æ­¤ security.txt æ–‡ä»¶çš„è§„èŒƒ URIã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_PREFERRED_LANG</code></td>
<td><code>en</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>é¦–é€‰è¯­è¨€ï¼š</strong> é€šä¿¡ä¸­ä½¿ç”¨çš„è¯­è¨€ã€‚æŒ‡å®šä¸º ISO 639-1 è¯­è¨€ä»£ç ã€‚</td>
</tr>
<tr>
<td><code>SECURITYTXT_CSAF</code></td>
<td></td>
<td>multisite</td>
<td>æ˜¯</td>
<td><strong>CSAFï¼š</strong> æŒ‡å‘æ‚¨çš„é€šç”¨å®‰å…¨å’¨è¯¢æ¡†æ¶æä¾›å•†çš„ provider-metadata.json çš„é“¾æ¥ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">éœ€è¦åˆ°æœŸæ—¥æœŸ</p>
<p>æ ¹æ® RFC 9116ï¼Œ<code>Expires</code> å­—æ®µæ˜¯å¿…éœ€çš„ã€‚å¦‚æœæ‚¨æ²¡æœ‰ä¸º <code>SECURITYTXT_EXPIRES</code> æä¾›å€¼ï¼ŒBunkerWeb ä¼šè‡ªåŠ¨å°†åˆ°æœŸæ—¥æœŸè®¾ç½®ä¸ºä»å½“å‰æ—¥æœŸç®—èµ·çš„ä¸€å¹´ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">è”ç³»ä¿¡æ¯è‡³å…³é‡è¦</p>
<p><code>Contact</code> å­—æ®µæ˜¯ security.txt æ–‡ä»¶ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚æ‚¨åº”è¯¥è‡³å°‘æä¾›ä¸€ç§æ–¹å¼è®©å®‰å…¨ç ”ç©¶äººå‘˜ä¸æ‚¨è”ç³»ã€‚è¿™å¯ä»¥æ˜¯ç”µå­é‚®ä»¶åœ°å€ã€Web è¡¨å•ã€ç”µè¯å·ç æˆ–ä»»ä½•å…¶ä»–é€‚åˆæ‚¨ç»„ç»‡çš„æ–¹å¼ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">URL å¿…é¡»ä½¿ç”¨ HTTPS</p>
<p>æ ¹æ® RFC 9116ï¼Œsecurity.txt æ–‡ä»¶ä¸­çš„æ‰€æœ‰ URLï¼ˆ<code>mailto:</code> å’Œ <code>tel:</code> é“¾æ¥é™¤å¤–ï¼‰éƒ½å¿…é¡»ä½¿ç”¨ HTTPSã€‚é HTTPS URL å°†è¢« BunkerWeb è‡ªåŠ¨è½¬æ¢ä¸º HTTPSï¼Œä»¥ç¡®ä¿ç¬¦åˆæ ‡å‡†ã€‚</p>
</div>
<h3 id="_119">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="41:3"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><input id="__tabbed_41_2" name="__tabbed_41" type="radio" /><input id="__tabbed_41_3" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_41_2">ç»¼åˆé…ç½®</label><label for="__tabbed_41_3">å¤šè”ç³»äººé…ç½®</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä»…åŒ…å«è”ç³»ä¿¡æ¯çš„æœ€å°é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªåŒ…å«æ‰€æœ‰å­—æ®µçš„æ›´å®Œæ•´çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-contact-form&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-12-31T23:59:59+00:00&quot;</span>
<span class="nt">SECURITYTXT_ENCRYPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/pgp-key.txt&quot;</span>
<span class="nt">SECURITYTXT_ACKNOWLEDGEMENTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/hall-of-fame&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_HIRING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/jobs/security&quot;</span>
<span class="nt">SECURITYTXT_CANONICAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/.well-known/security.txt&quot;</span>
<span class="nt">SECURITYTXT_PREFERRED_LANG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="nt">SECURITYTXT_CSAF</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/provider-metadata.json&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…·æœ‰å¤šç§è”ç³»æ–¹å¼çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tel:+1-201-555-0123&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-form&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-06-30T23:59:59+00:00&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="self-signed-certificate">Self-signed certificate</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>è‡ªç­¾åè¯ä¹¦æ’ä»¶å¯ç›´æ¥åœ¨ BunkerWeb ä¸­è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç† SSL/TLS è¯ä¹¦ï¼Œæ— éœ€å¤–éƒ¨è¯ä¹¦é¢å‘æœºæ„å³å¯å¯ç”¨å®‰å…¨çš„ HTTPS è¿æ¥ã€‚æ­¤åŠŸèƒ½åœ¨å¼€å‘ç¯å¢ƒã€å†…éƒ¨ç½‘ç»œæˆ–éœ€è¦å¿«é€Ÿéƒ¨ç½² HTTPS è€Œæ— éœ€é…ç½®å¤–éƒ¨è¯ä¹¦æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å¯ç”¨åï¼ŒBunkerWeb ä¼šä¸ºæ‚¨çš„å·²é…ç½®åŸŸåè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªè‡ªç­¾å SSL/TLS è¯ä¹¦ã€‚</li>
<li>è¯¥è¯ä¹¦åŒ…å«æ‚¨é…ç½®ä¸­å®šä¹‰çš„æ‰€æœ‰æœåŠ¡å™¨åç§°ï¼Œç¡®ä¿æ¯ä¸ªåŸŸåçš„ SSL éªŒè¯æ­£ç¡®æ— è¯¯ã€‚</li>
<li>è¯ä¹¦è¢«å®‰å…¨åœ°å­˜å‚¨ï¼Œå¹¶ç”¨äºåŠ å¯†æ‰€æœ‰åˆ°æ‚¨ç½‘ç«™çš„ HTTPS æµé‡ã€‚</li>
<li>è¯ä¹¦åœ¨åˆ°æœŸå‰ä¼šè‡ªåŠ¨ç»­è®¢ï¼Œç¡®ä¿ HTTPS çš„æŒç»­å¯ç”¨æ€§ã€‚</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">æµè§ˆå™¨å®‰å…¨è­¦å‘Š</p>
<p>å½“ç”¨æˆ·è®¿é—®ä½¿ç”¨è‡ªç­¾åè¯ä¹¦çš„ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤ºå®‰å…¨è­¦å‘Šï¼Œå› ä¸ºè¿™äº›è¯ä¹¦æœªç»å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„éªŒè¯ã€‚å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·è€ƒè™‘æ”¹ç”¨ <a href="#lets-encrypt">Let's Encrypt</a>ã€‚</p>
</div>
<h3 id="_120">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨è‡ªç­¾åè¯ä¹¦åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> å°† <code>GENERATE_SELF_SIGNED_SSL</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è‡ªç­¾åè¯ä¹¦ç”Ÿæˆã€‚</li>
<li><strong>é€‰æ‹©åŠ å¯†ç®—æ³•ï¼š</strong> ä½¿ç”¨ <code>SELF_SIGNED_SSL_ALGORITHM</code> è®¾ç½®é€‰æ‹©æ‚¨åå¥½çš„ç®—æ³•ã€‚</li>
<li><strong>é…ç½®æœ‰æ•ˆæœŸï¼š</strong> å¯é€‰åœ°ä½¿ç”¨ <code>SELF_SIGNED_SSL_EXPIRY</code> è®¾ç½®è¯ä¹¦çš„æœ‰æ•ˆæ—¶é•¿ã€‚</li>
<li><strong>è®¾ç½®è¯ä¹¦ä¸»é¢˜ï¼š</strong> ä½¿ç”¨ <code>SELF_SIGNED_SSL_SUBJ</code> è®¾ç½®é…ç½®è¯ä¹¦ä¸»é¢˜ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œè¯ä¹¦ä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶åº”ç”¨äºæ‚¨çš„åŸŸåã€‚</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">æµæ¨¡å¼é…ç½®</p>
<p>å¯¹äºæµæ¨¡å¼ï¼Œè¯·é…ç½® <code>LISTEN_STREAM_PORT_SSL</code> è®¾ç½®ä»¥æŒ‡å®š SSL/TLS ç›‘å¬ç«¯å£ã€‚æ­¤æ­¥éª¤å¯¹äºåœ¨æµæ¨¡å¼ä¸‹æ­£å¸¸è¿è¡Œè‡³å…³é‡è¦ã€‚</p>
</div>
<h3 id="_121">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GENERATE_SELF_SIGNED_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨è‡ªç­¾åï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨è‡ªåŠ¨è‡ªç­¾åè¯ä¹¦ç”Ÿæˆã€‚</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_ALGORITHM</code></td>
<td><code>ec-prime256v1</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦ç®—æ³•ï¼š</strong> ç”¨äºè¯ä¹¦ç”Ÿæˆçš„ç®—æ³•ï¼š<code>ec-prime256v1</code>ã€<code>ec-secp384r1</code>ã€<code>rsa-2048</code> æˆ– <code>rsa-4096</code>ã€‚</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_EXPIRY</code></td>
<td><code>365</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦æœ‰æ•ˆæœŸï¼š</strong> è‡ªç­¾åè¯ä¹¦çš„æœ‰æ•ˆå¤©æ•°ï¼ˆé»˜è®¤ä¸º 1 å¹´ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_SUBJ</code></td>
<td><code>/CN=www.example.com/</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>è¯ä¹¦ä¸»é¢˜ï¼š</strong> è¯ä¹¦çš„ä¸»é¢˜å­—æ®µï¼Œç”¨äºæ ‡è¯†åŸŸåã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">å¼€å‘ç¯å¢ƒ</p>
<p>è‡ªç­¾åè¯ä¹¦éå¸¸é€‚åˆå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œåœ¨è¿™äº›ç¯å¢ƒä¸­æ‚¨éœ€è¦ HTTPSï¼Œä½†ä¸éœ€è¦å—å…¬å…±æµè§ˆå™¨ä¿¡ä»»çš„è¯ä¹¦ã€‚</p>
</div>
<div class="admonition info">
<p class="admonition-title">è¯ä¹¦ä¿¡æ¯</p>
<p>ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦ä½¿ç”¨æŒ‡å®šçš„ç®—æ³•ï¼ˆé»˜è®¤ä¸ºä½¿ç”¨ prime256v1 æ›²çº¿çš„æ¤­åœ†æ›²çº¿åŠ å¯†ï¼‰ï¼Œå¹¶åŒ…å«é…ç½®çš„ä¸»é¢˜ï¼Œç¡®ä¿æ‚¨çš„åŸŸååŠŸèƒ½æ­£å¸¸ã€‚</p>
</div>
<h3 id="_122">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="42:3"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><input id="__tabbed_42_2" name="__tabbed_42" type="radio" /><input id="__tabbed_42_3" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_42_2">çŸ­æœŸè¯ä¹¦</label><label for="__tabbed_42_3">ä½¿ç”¨ RSA è¯ä¹¦è¿›è¡Œæµ‹è¯•</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªä½¿ç”¨é»˜è®¤è®¾ç½®çš„è‡ªç­¾åè¯ä¹¦çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=mysite.local/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>è¯ä¹¦è¿‡æœŸæ›´é¢‘ç¹çš„é…ç½®ï¼ˆç”¨äºå®šæœŸæµ‹è¯•è¯ä¹¦ç»­è®¢æµç¨‹ï¼‰ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;90&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=dev.example.com/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªæµ‹è¯•ç¯å¢ƒçš„é…ç½®ï¼Œå…¶ä¸­åŸŸåä½¿ç”¨è‡ªç­¾åçš„ RSA è¯ä¹¦ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test.example.com&quot;</span>
<span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rsa-4096&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=test.example.com/&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="sessions">Sessions</h2>
<p>STREAM æ”¯æŒ <img alt="âœ…" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>ä¼šè¯æ’ä»¶ä¸º BunkerWeb æä¾›äº†å¼ºå¤§çš„ HTTP ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼Œå¯åœ¨è¯·æ±‚ä¹‹é—´å®ç°å®‰å…¨å¯é çš„ç”¨æˆ·ä¼šè¯è·Ÿè¸ªã€‚æ­¤æ ¸å¿ƒåŠŸèƒ½å¯¹äºç»´æŠ¤ç”¨æˆ·çŠ¶æ€ã€èº«ä»½éªŒè¯æŒä¹…æ€§ä»¥åŠæ”¯æŒéœ€è¦èº«ä»½è¿ç»­æ€§çš„å…¶ä»–åŠŸèƒ½ï¼ˆä¾‹å¦‚<a href="#antibot">åæœºå™¨äºº</a>ä¿æŠ¤å’Œç”¨æˆ·èº«ä»½éªŒè¯ç³»ç»Ÿï¼‰è‡³å…³é‡è¦ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>å½“ç”¨æˆ·é¦–æ¬¡ä¸æ‚¨çš„ç½‘ç«™äº’åŠ¨æ—¶ï¼ŒBunkerWeb ä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ä¼šè¯æ ‡è¯†ç¬¦ã€‚</li>
<li>æ­¤æ ‡è¯†ç¬¦å®‰å…¨åœ°å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨çš„ Cookie ä¸­ã€‚</li>
<li>åœ¨åç»­è¯·æ±‚ä¸­ï¼ŒBunkerWeb ä» Cookie ä¸­æ£€ç´¢ä¼šè¯æ ‡è¯†ç¬¦ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è®¿é—®ç”¨æˆ·çš„ä¼šè¯æ•°æ®ã€‚</li>
<li>å¯¹äºå…·æœ‰å¤šä¸ª BunkerWeb å®ä¾‹çš„åˆ†å¸ƒå¼ç¯å¢ƒï¼Œä¼šè¯æ•°æ®å¯ä»¥æœ¬åœ°å­˜å‚¨æˆ–å­˜å‚¨åœ¨ <a href="#redis">Redis</a> ä¸­ã€‚</li>
<li>ä¼šè¯é€šè¿‡å¯é…ç½®çš„è¶…æ—¶è¿›è¡Œè‡ªåŠ¨ç®¡ç†ï¼Œåœ¨ä¿æŒå¯ç”¨æ€§çš„åŒæ—¶ç¡®ä¿å®‰å…¨æ€§ã€‚</li>
<li>ä¼šè¯çš„åŠ å¯†å®‰å…¨æ€§é€šè¿‡ç”¨äºç­¾ç½²ä¼šè¯ Cookie çš„å¯†é’¥æ¥ä¿è¯ã€‚</li>
</ol>
<h3 id="_123">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ä¼šè¯åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é…ç½®ä¼šè¯å®‰å…¨æ€§ï¼š</strong> è®¾ç½®ä¸€ä¸ªå¼ºå¤§çš„ã€å”¯ä¸€çš„ <code>SESSIONS_SECRET</code>ï¼Œä»¥ç¡®ä¿ä¼šè¯ Cookie æ— æ³•è¢«ä¼ªé€ ã€‚ï¼ˆé»˜è®¤å€¼ä¸ºâ€œrandomâ€ï¼Œè¿™ä¼šè§¦å‘ BunkerWeb ç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯†é’¥ã€‚ï¼‰</li>
<li><strong>é€‰æ‹©ä¼šè¯åç§°ï¼š</strong> å¯é€‰åœ°è‡ªå®šä¹‰ <code>SESSIONS_NAME</code>ï¼Œä»¥å®šä¹‰æ‚¨çš„ä¼šè¯ Cookie åœ¨æµè§ˆå™¨ä¸­çš„åç§°ã€‚ï¼ˆé»˜è®¤å€¼ä¸ºâ€œrandomâ€ï¼Œè¿™ä¼šè§¦å‘ BunkerWeb ç”Ÿæˆä¸€ä¸ªéšæœºçš„åç§°ã€‚ï¼‰</li>
<li><strong>è®¾ç½®ä¼šè¯è¶…æ—¶ï¼š</strong> ä½¿ç”¨è¶…æ—¶è®¾ç½®ï¼ˆ<code>SESSIONS_IDLING_TIMEOUT</code>ã€<code>SESSIONS_ROLLING_TIMEOUT</code>ã€<code>SESSIONS_ABSOLUTE_TIMEOUT</code>ï¼‰é…ç½®ä¼šè¯çš„æœ‰æ•ˆæ—¶é•¿ã€‚</li>
<li><strong>é…ç½® Redis é›†æˆï¼š</strong> å¯¹äºåˆ†å¸ƒå¼ç¯å¢ƒï¼Œå°† <code>USE_REDIS</code> è®¾ç½®ä¸ºâ€œyesâ€ï¼Œå¹¶é…ç½®æ‚¨çš„ <a href="#redis">Redis è¿æ¥</a> ä»¥åœ¨å¤šä¸ª BunkerWeb èŠ‚ç‚¹ä¹‹é—´å…±äº«ä¼šè¯æ•°æ®ã€‚</li>
<li><strong>è®© BunkerWeb å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š</strong> é…ç½®å®Œæˆåï¼Œæ‚¨çš„ç½‘ç«™ä¼šè‡ªåŠ¨è¿›è¡Œä¼šè¯ç®¡ç†ã€‚</li>
</ol>
<h3 id="_124">é…ç½®è®¾ç½®</h3>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SESSIONS_SECRET</code></td>
<td><code>random</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ä¼šè¯å¯†é’¥ï¼š</strong> ç”¨äºç­¾ç½²ä¼šè¯ Cookie çš„åŠ å¯†å¯†é’¥ã€‚åº”è¯¥æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€éšæœºçš„ã€å¯¹æ‚¨çš„ç«™ç‚¹å”¯ä¸€çš„å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td><code>SESSIONS_NAME</code></td>
<td><code>random</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>Cookie åç§°ï¼š</strong> å°†å­˜å‚¨ä¼šè¯æ ‡è¯†ç¬¦çš„ Cookie çš„åç§°ã€‚</td>
</tr>
<tr>
<td><code>SESSIONS_IDLING_TIMEOUT</code></td>
<td><code>1800</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç©ºé—²è¶…æ—¶ï¼š</strong> ä¼šè¯åœ¨å¤±æ•ˆå‰ä¸æ´»åŠ¨çš„æœ€é•¿æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SESSIONS_ROLLING_TIMEOUT</code></td>
<td><code>3600</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ»šåŠ¨è¶…æ—¶ï¼š</strong> ä¼šè¯å¿…é¡»ç»­è®¢å‰çš„æœ€é•¿æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SESSIONS_ABSOLUTE_TIMEOUT</code></td>
<td><code>86400</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>ç»å¯¹è¶…æ—¶ï¼š</strong> æ— è®ºæ´»åŠ¨å¦‚ä½•ï¼Œä¼šè¯è¢«é”€æ¯å‰çš„æœ€é•¿æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_IP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ£€æŸ¥ IPï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œå¦‚æœå®¢æˆ·ç«¯ IP åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é”€æ¯ä¼šè¯ã€‚</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_USER_AGENT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>å¦</td>
<td><strong>æ£€æŸ¥ User-Agentï¼š</strong> è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œå¦‚æœå®¢æˆ·ç«¯ User-Agent å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é”€æ¯ä¼šè¯ã€‚</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨æ³¨æ„äº‹é¡¹</p>
<p><code>SESSIONS_SECRET</code> è®¾ç½®å¯¹å®‰å…¨è‡³å…³é‡è¦ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼š</p>
<ol>
<li>ä½¿ç”¨ä¸€ä¸ªå¼ºå¤§çš„ã€éšæœºçš„å€¼ï¼ˆè‡³å°‘ 32 ä¸ªå­—ç¬¦ï¼‰</li>
<li>å¯¹æ­¤å€¼ä¿å¯†</li>
<li>åœ¨é›†ç¾¤ä¸­çš„æ‰€æœ‰ BunkerWeb å®ä¾‹ä¸­ä½¿ç”¨ç›¸åŒçš„å€¼</li>
<li>è€ƒè™‘ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†ï¼Œä»¥é¿å…ä»¥çº¯æ–‡æœ¬å½¢å¼å­˜å‚¨æ­¤å€¼</li>
</ol>
</div>
<div class="admonition tip">
<p class="admonition-title">é›†ç¾¤ç¯å¢ƒ</p>
<p>å¦‚æœæ‚¨åœ¨è´Ÿè½½å‡è¡¡å™¨åé¢è¿è¡Œå¤šä¸ª BunkerWeb å®ä¾‹ï¼š</p>
<ol>
<li>å°† <code>USE_REDIS</code> è®¾ç½®ä¸º <code>yes</code> å¹¶é…ç½®æ‚¨çš„ Redis è¿æ¥</li>
<li>ç¡®ä¿æ‰€æœ‰å®ä¾‹ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ <code>SESSIONS_SECRET</code> å’Œ <code>SESSIONS_NAME</code></li>
<li>è¿™ç¡®ä¿äº†æ— è®ºå“ªä¸ª BunkerWeb å®ä¾‹å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œä»–ä»¬éƒ½èƒ½ä¿æŒå…¶ä¼šè¯</li>
</ol>
</div>
<h3 id="_125">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="43:4"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><input id="__tabbed_43_2" name="__tabbed_43" type="radio" /><input id="__tabbed_43_3" name="__tabbed_43" type="radio" /><input id="__tabbed_43_4" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">åŸºæœ¬é…ç½®</label><label for="__tabbed_43_2">å¢å¼ºå®‰å…¨æ€§</label><label for="__tabbed_43_3">å¸¦ Redis çš„é›†ç¾¤ç¯å¢ƒ</label><label for="__tabbed_43_4">é•¿æ•ˆä¼šè¯</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>å•ä¸ª BunkerWeb å®ä¾‹çš„ç®€å•é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myappsession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>å…·æœ‰æ›´é«˜å®‰å…¨è®¾ç½®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-very-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;securesession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;900&quot;</span><span class="w">  </span><span class="c1"># 15 åˆ†é’Ÿ</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span><span class="w">  </span><span class="c1"># 30 åˆ†é’Ÿ</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;43200&quot;</span><span class="w">  </span><span class="c1"># 12 å°æ—¶</span>
<span class="nt">SESSIONS_CHECK_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SESSIONS_CHECK_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºå¤šä¸ª BunkerWeb å®ä¾‹å…±äº«ä¼šè¯æ•°æ®çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;clustersession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="c1"># ç¡®ä¿ Redis è¿æ¥é…ç½®æ­£ç¡®</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ç”¨äºéœ€è¦å»¶é•¿ä¼šè¯æŒä¹…æ€§çš„åº”ç”¨ç¨‹åºçš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-random-secret-key-here&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;persistentsession&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span><span class="w">  </span><span class="c1"># 1 å¤©</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;172800&quot;</span><span class="w">  </span><span class="c1"># 2 å¤©</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span><span class="w">  </span><span class="c1"># 7 å¤©</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="ui">UI</h2>
<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Integrate easily the BunkerWeb UI.</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_UI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td>Use UI</td>
</tr>
<tr>
<td><code>UI_HOST</code></td>
<td></td>
<td>global</td>
<td>å¦</td>
<td>Address of the web UI used for initial setup</td>
</tr>
</tbody>
</table>
<h2 id="user-manager-pro">User Manager <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p align='center'><iframe style='display: block;' width='560' height='315' data-src='https://www.youtube-nocookie.com/embed/EIohiUf9Fg4' title='ç”¨æˆ·ç®¡ç†å™¨é¡µé¢' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe></p>

<p>STREAM æ”¯æŒ <img alt="âŒ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Add the possibility to manage users on the web interface</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¯é‡å¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USERS_REQUIRE_2FA</code></td>
<td><code>no</code></td>
<td>global</td>
<td>å¦</td>
<td>Require two-factor authentication for all users</td>
</tr>
</tbody>
</table>
<h2 id="whitelist">Whitelist</h2>
<p>STREAM æ”¯æŒ <img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>ç™½åå•æ’ä»¶å…è®¸æ‚¨å®šä¹‰ä¸€ä¸ªå—ä¿¡ä»»çš„ IP åœ°å€åˆ—è¡¨ï¼Œè¿™äº›åœ°å€å¯ä»¥ç»•è¿‡å…¶ä»–å®‰å…¨è¿‡æ»¤å™¨ã€‚
è¦é˜»æ­¢ä¸éœ€è¦çš„å®¢æˆ·ç«¯ï¼Œè¯·å‚è€ƒ <a href="#blacklist">é»‘åå•æ’ä»¶</a>ã€‚</p>
<p>ç™½åå•æ’ä»¶æä¾›äº†ä¸€ç§å…¨é¢çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®å„ç§å®¢æˆ·ç«¯å±æ€§æ˜ç¡®å…è®¸è®¿é—®æ‚¨çš„ç½‘ç«™ã€‚æ­¤åŠŸèƒ½æä¾›äº†ä¸€ç§å®‰å…¨æœºåˆ¶ï¼šç¬¦åˆç‰¹å®šæ¡ä»¶çš„è®¿é—®è€…å°†è¢«æˆäºˆç«‹å³è®¿é—®æƒé™ï¼Œè€Œæ‰€æœ‰å…¶ä»–è®¿é—®è€…åˆ™å¿…é¡»é€šè¿‡å¸¸è§„çš„å®‰å…¨æ£€æŸ¥ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li>æ‚¨å®šä¹‰åº”è¢«â€œåˆ—å…¥ç™½åå•â€çš„è®¿é—®è€…çš„æ ‡å‡†ï¼ˆ<em>IP åœ°å€ã€ç½‘ç»œã€åå‘ DNSã€ASNã€ç”¨æˆ·ä»£ç†æˆ– URI æ¨¡å¼</em>ï¼‰ã€‚</li>
<li>å½“è®¿é—®è€…å°è¯•è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶ï¼ŒBunkerWeb ä¼šæ£€æŸ¥ä»–ä»¬æ˜¯å¦ç¬¦åˆä»»ä½•è¿™äº›ç™½åå•æ ‡å‡†ã€‚</li>
<li>å¦‚æœè®¿é—®è€…ç¬¦åˆä»»ä½•ç™½åå•è§„åˆ™ï¼ˆå¹¶ä¸”ä¸ç¬¦åˆä»»ä½•å¿½ç•¥è§„åˆ™ï¼‰ï¼Œä»–ä»¬å°†è¢«æˆäºˆè®¿é—®æ‚¨ç½‘ç«™çš„æƒé™ï¼Œå¹¶<strong>ç»•è¿‡æ‰€æœ‰å…¶ä»–å®‰å…¨æ£€æŸ¥</strong>ã€‚</li>
<li>å¦‚æœè®¿é—®è€…ä¸ç¬¦åˆä»»ä½•ç™½åå•æ ‡å‡†ï¼Œä»–ä»¬å°†ç…§å¸¸é€šè¿‡æ‰€æœ‰æ­£å¸¸çš„å®‰å…¨æ£€æŸ¥ã€‚</li>
<li>ç™½åå•å¯ä»¥æŒ‰è®¡åˆ’ä»å¤–éƒ¨æ¥æºè‡ªåŠ¨æ›´æ–°ã€‚</li>
</ol>
<h3 id="_126">å¦‚ä½•ä½¿ç”¨</h3>
<p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®å’Œä½¿ç”¨ç™½åå•åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å¯ç”¨è¯¥åŠŸèƒ½ï¼š</strong> ç™½åå•åŠŸèƒ½é»˜è®¤è¢«ç¦ç”¨ã€‚å°† <code>USE_WHITELIST</code> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨å®ƒã€‚</li>
<li><strong>é…ç½®å…è®¸è§„åˆ™ï¼š</strong> å®šä¹‰å“ªäº› IPã€ç½‘ç»œã€åå‘ DNS æ¨¡å¼ã€ASNã€ç”¨æˆ·ä»£ç†æˆ– URI åº”è¢«åˆ—å…¥ç™½åå•ã€‚</li>
<li><strong>è®¾ç½®å¿½ç•¥è§„åˆ™ï¼š</strong> æŒ‡å®šä»»ä½•åº”ç»•è¿‡ç™½åå•æ£€æŸ¥çš„ä¾‹å¤–æƒ…å†µã€‚</li>
<li><strong>æ·»åŠ å¤–éƒ¨æ¥æºï¼š</strong> é…ç½®ç”¨äºè‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ç™½åå•æ•°æ®çš„ URLã€‚</li>
<li><strong>ç›‘æ§è®¿é—®ï¼š</strong> æ£€æŸ¥ <a href="../web-ui/">Web UI</a> ä»¥æŸ¥çœ‹å“ªäº›è®¿é—®è€…è¢«å…è®¸æˆ–æ‹’ç»ã€‚</li>
</ol>
<div class="admonition info">
<p class="admonition-title">æµæ¨¡å¼</p>
<p>å½“ä½¿ç”¨æµæ¨¡å¼æ—¶ï¼Œä»…æ‰§è¡Œ IPã€åå‘ DNS å’Œ ASN æ£€æŸ¥ã€‚</p>
</div>
<h3 id="_127">é…ç½®è®¾ç½®</h3>
<p><strong>é€šç”¨</strong></p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_WHITELIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>å¯ç”¨ç™½åå•ï¼š</strong> è®¾ç½®ä¸º <code>yes</code> ä»¥å¯ç”¨ç™½åå•åŠŸèƒ½ã€‚</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="44:5"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><input id="__tabbed_44_2" name="__tabbed_44" type="radio" /><input id="__tabbed_44_3" name="__tabbed_44" type="radio" /><input id="__tabbed_44_4" name="__tabbed_44" type="radio" /><input id="__tabbed_44_5" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">IP åœ°å€</label><label for="__tabbed_44_2">åå‘ DNS</label><label for="__tabbed_44_3">ASN</label><label for="__tabbed_44_4">ç”¨æˆ·ä»£ç†</label><label for="__tabbed_44_5">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>åŠŸèƒ½è¯´æ˜ï¼š</strong> æ ¹æ®è®¿é—®è€…çš„ IP åœ°å€æˆ–ç½‘ç»œå°†å…¶åˆ—å…¥ç™½åå•ã€‚è¿™äº›è®¿é—®è€…å°†ç»•è¿‡æ‰€æœ‰å®‰å…¨æ£€æŸ¥ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP ç™½åå•ï¼š</strong> å…è®¸çš„ IP åœ°å€æˆ–ç½‘ç»œï¼ˆCIDR è¡¨ç¤ºæ³•ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ IP ç™½åå•æ£€æŸ¥çš„ IP åœ°å€æˆ–ç½‘ç»œåˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP ç™½åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç™½åå•çš„ IP åœ°å€æˆ–ç½‘ç»œçš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>IP å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ IP åœ°å€æˆ–ç½‘ç»œçš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>åŠŸèƒ½è¯´æ˜ï¼š</strong> æ ¹æ®è®¿é—®è€…çš„åŸŸåï¼ˆåå‘ï¼‰å°†å…¶åˆ—å…¥ç™½åå•ã€‚è¿™å¯¹äºå…è®¸æ¥è‡ªç‰¹å®šç»„ç»‡æˆ–ç½‘ç»œçš„è®¿é—®è€…æŒ‰å…¶åŸŸåè®¿é—®éå¸¸æœ‰ç”¨ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS ç™½åå•ï¼š</strong> å…è®¸çš„åå‘ DNS åç¼€åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ä»…é™å…¨å±€ rDNSï¼š</strong> å½“è®¾ç½®ä¸º <code>yes</code> æ—¶ï¼Œä»…å¯¹å…¨å±€ IP åœ°å€æ‰§è¡Œ rDNS ç™½åå•æ£€æŸ¥ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ rDNS ç™½åå•æ£€æŸ¥çš„åå‘ DNS åç¼€åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS ç™½åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç™½åå•çš„åå‘ DNS åç¼€çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>rDNS å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„åå‘ DNS åç¼€çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>åŠŸèƒ½è¯´æ˜ï¼š</strong> ä½¿ç”¨è‡ªæ²»ç³»ç»Ÿç¼–å·ï¼ˆASNï¼‰å°†æ¥è‡ªç‰¹å®šç½‘ç»œæä¾›å•†çš„è®¿é—®è€…åˆ—å…¥ç™½åå•ã€‚ASN æ ‡è¯† IP å±äºå“ªä¸ªæä¾›å•†æˆ–ç»„ç»‡ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN ç™½åå•ï¼š</strong> å…è®¸çš„è‡ªæ²»ç³»ç»Ÿç¼–å·åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ ASN ç™½åå•æ£€æŸ¥çš„ ASN åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN ç™½åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç™½åå•çš„ ASN çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ASN å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ ASN çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>åŠŸèƒ½è¯´æ˜ï¼š</strong> æ ¹æ®è®¿é—®è€…å£°ç§°ä½¿ç”¨çš„æµè§ˆå™¨æˆ–å·¥å…·å°†å…¶åˆ—å…¥ç™½åå•ã€‚è¿™å¯¹äºå…è®¸è®¿é—®ç‰¹å®šçš„å·²çŸ¥å·¥å…·æˆ–æœåŠ¡éå¸¸æœ‰æ•ˆã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†ç™½åå•ï¼š</strong> å…è®¸çš„ç”¨æˆ·ä»£ç†æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ç”¨æˆ·ä»£ç†ç™½åå•æ£€æŸ¥çš„ç”¨æˆ·ä»£ç†æ¨¡å¼åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†ç™½åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç™½åå•çš„ç”¨æˆ·ä»£ç†æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>ç”¨æˆ·ä»£ç†å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ç”¨æˆ·ä»£ç†æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>åŠŸèƒ½è¯´æ˜ï¼š</strong> å°†å¯¹æ‚¨ç½‘ç«™ä¸Šç‰¹å®š URL çš„è¯·æ±‚åˆ—å…¥ç™½åå•ã€‚è¿™å¯¹äºå…è®¸è®¿é—®ç‰¹å®šç«¯ç‚¹è€Œä¸è€ƒè™‘å…¶ä»–å› ç´ å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®</th>
<th>é»˜è®¤å€¼</th>
<th>ä¸Šä¸‹æ–‡</th>
<th>å¤šé€‰</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI ç™½åå•ï¼š</strong> å…è®¸çš„ URI æ¨¡å¼ï¼ˆPCRE æ­£åˆ™è¡¨è¾¾å¼ï¼‰åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI å¿½ç•¥åˆ—è¡¨ï¼š</strong> åº”ç»•è¿‡ URI ç™½åå•æ£€æŸ¥çš„ URI æ¨¡å¼åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI ç™½åå• URLï¼š</strong> åŒ…å«è¦åˆ—å…¥ç™½åå•çš„ URI æ¨¡å¼çš„ URL åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>å¦</td>
<td><strong>URI å¿½ç•¥åˆ—è¡¨ URLï¼š</strong> åŒ…å«è¦å¿½ç•¥çš„ URI æ¨¡å¼çš„ URL åˆ—è¡¨ã€‚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">URL æ ¼å¼æ”¯æŒ</p>
<p>æ‰€æœ‰ <code>*_URLS</code> è®¾ç½®éƒ½æ”¯æŒ HTTP/HTTPS URL ä»¥åŠä½¿ç”¨ <code>file:///</code> å‰ç¼€çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚æ”¯æŒä½¿ç”¨ <code>http://user:pass@url</code> æ ¼å¼è¿›è¡ŒåŸºæœ¬èº«ä»½éªŒè¯ã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">å®šæœŸæ›´æ–°</p>
<p>ä» URL è·å–çš„ç™½åå•ä¼šæ¯å°æ—¶è‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ï¼Œä»¥ç¡®ä¿æ‚¨çš„ä¿æŠ¤ä¸æœ€æ–°çš„å—ä¿¡ä»»æ¥æºä¿æŒåŒæ­¥ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">å®‰å…¨ç»•è¿‡</p>
<p>è¢«åˆ—å…¥ç™½åå•çš„è®¿é—®è€…å°†å®Œå…¨<strong>ç»•è¿‡ BunkerWeb ä¸­çš„æ‰€æœ‰å…¶ä»–å®‰å…¨æ£€æŸ¥</strong>ï¼ŒåŒ…æ‹¬ WAF è§„åˆ™ã€é€Ÿç‡é™åˆ¶ã€æ¶æ„æœºå™¨äººæ£€æµ‹ä»¥åŠä»»ä½•å…¶ä»–å®‰å…¨æœºåˆ¶ã€‚ä»…å¯¹æ‚¨ç»å¯¹ä¿¡ä»»çš„æ¥æºä½¿ç”¨ç™½åå•ã€‚</p>
</div>
<h3 id="_128">é…ç½®ç¤ºä¾‹</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="45:5"><input checked="checked" id="__tabbed_45_1" name="__tabbed_45" type="radio" /><input id="__tabbed_45_2" name="__tabbed_45" type="radio" /><input id="__tabbed_45_3" name="__tabbed_45" type="radio" /><input id="__tabbed_45_4" name="__tabbed_45" type="radio" /><input id="__tabbed_45_5" name="__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="__tabbed_45_1">åŸºæœ¬ç»„ç»‡è®¿é—®</label><label for="__tabbed_45_2">é«˜çº§é…ç½®</label><label for="__tabbed_45_3">ä½¿ç”¨æœ¬åœ°æ–‡ä»¶</label><label for="__tabbed_45_4">API è®¿é—®æ¨¡å¼</label><label for="__tabbed_45_5">çŸ¥åçˆ¬è™«</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œå°†å…¬å¸åŠå…¬å®¤çš„ IP åˆ—å…¥ç™½åå•ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.0/8</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªæ›´å…¨é¢çš„é…ç½®ï¼Œå…·æœ‰å¤šä¸ªç™½åå•æ ‡å‡†ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># å…¬å¸å’Œå—ä¿¡ä»»çš„åˆä½œä¼™ä¼´èµ„äº§</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">WHITELIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.company.com</span><span class="nv"> </span><span class="s">.partner-company.org&quot;</span>
<span class="nt">WHITELIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345</span><span class="nv"> </span><span class="s">67890&quot;</span><span class="w">  </span><span class="c1"># å…¬å¸å’Œåˆä½œä¼™ä¼´çš„ ASN</span>
<span class="nt">WHITELIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)CompanyBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)PartnerCrawler(?:\b)&quot;</span>

<span class="c1"># å¤–éƒ¨å—ä¿¡ä»»çš„æ¥æº</span>
<span class="nt">WHITELIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-networks.txt&quot;</span>
<span class="nt">WHITELIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-crawlers.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶è¿›è¡Œç™½åå•çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/ip-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/rdns-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/asn-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/user-agent-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///path/to/uri-whitelist.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªä¸“æ³¨äºä»…å…è®¸è®¿é—®ç‰¹å®š API ç«¯ç‚¹çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/public/</span><span class="nv"> </span><span class="s">^/api/v1/status&quot;</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24&quot;</span><span class="w">  </span><span class="c1"># é€‚ç”¨äºæ‰€æœ‰ç«¯ç‚¹çš„å†…éƒ¨ç½‘ç»œ</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>ä¸€ä¸ªå°†å¸¸è§çš„æœç´¢å¼•æ“å’Œç¤¾äº¤åª’ä½“çˆ¬è™«åˆ—å…¥ç™½åå•çš„é…ç½®ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># ä½¿ç”¨åå‘ DNS è¿›è¡ŒéªŒè¯ä»¥å¢åŠ å®‰å…¨æ€§</span>
<span class="nt">WHITELIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.googlebot.com</span><span class="nv"> </span><span class="s">.search.msn.com</span><span class="nv"> </span><span class="s">.crawl.yahoo.net</span><span class="nv"> </span><span class="s">.yandex.com</span><span class="nv"> </span><span class="s">.baidu.com</span><span class="nv"> </span><span class="s">.facebook.com&quot;</span>
<span class="nt">WHITELIST_RDNS_GLOBAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w">  </span><span class="c1"># ä»…æ£€æŸ¥å…¨å±€ IP</span>
</code></pre></div>
<p>æ­¤é…ç½®å…è®¸åˆæ³•çš„çˆ¬è™«ç´¢å¼•æ‚¨çš„ç½‘ç«™ï¼Œè€Œä¸ä¼šå—åˆ°å¯èƒ½é˜»æ­¢å®ƒä»¬çš„é€Ÿç‡é™åˆ¶æˆ–å…¶ä»–å®‰å…¨æªæ–½çš„å½±å“ã€‚rDNS æ£€æŸ¥æœ‰åŠ©äºéªŒè¯çˆ¬è™«æ˜¯å¦ç¡®å®æ¥è‡ªå…¶å£°ç§°çš„å…¬å¸ã€‚</p>
</div>
</div>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Bunkerity
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/fTf46FmtyD" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/bunkerity" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/bunkerity/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/r/BunkerWeb/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/bunkerweb/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/bunkerity" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike", "version": "latest"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="https://chatbot.bunkerweb.io/static/js/chatbot.js"></script>
      
        <script src="../../assets/preserve-version-on-language-switch.js"></script>
      
        <script src="../../assets/toc-dropdown.js"></script>
      
    
  </body>
</html>