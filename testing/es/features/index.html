
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BunkerWeb, the open source and next generation WAF.">
      
      
      
        <link rel="canonical" href="https://docs.bunkerweb.io/latest/es/features/">
      
      
        <link rel="prev" href="../quickstart-guide/">
      
      
        <link rel="next" href="../advanced/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Funcionalidades - Documentación de BunkerWeb</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
    <script async
            defer
            data-domain="docs.bunkerweb.io"
            src="https://data.bunkerity.com/js/script.js"></script>

    <script defer>
      window.addEventListener('DOMContentLoaded', (e) => {

        const customHeaders = document.querySelectorAll('[data-custom-header]')
        customHeaders.forEach(header => {
          const getHeaders = document.querySelectorAll(`#${header.getAttribute('id')}`);
          getHeaders.forEach(el => {

            if(!el.hasAttribute('data-custom-header')) el.remove()
        })})
      })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script>

    <script defer>
  // Lazy load images and embed youtube videos
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-src]").forEach((el) => {
      el.setAttribute("src", el.getAttribute("data-src"));
    });
  });
  // Add missing label
  try {
    document
      .querySelector('div.md-search[data-md-component="search"][role="dialog"]')
      .setAttribute("aria-label", "Search in documentation");
  } catch (err) {}
    </script>

    <script defer>
      window.addEventListener('DOMContentLoaded', () => {
        const bannerEl = document.querySelector('aside.md-banner');
        let defaultContent = [{ "content" : '<p>Get the most of BunkerWeb by upgrading to the PRO version. Click <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&utm_source=doc">here</a> and use the <strong>freetrial</strong> promo code to get started.</p>'},
        { "content" : '<p>Need premium support or tailored consulting around BunkerWeb ? Check out our <a style="text-decoration:underline; color :  white;" href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc#services">professional services</a>.</p>'},
        { "content" : '<p>Be part of the Bunker community by joining the <a style="text-decoration:underline; color: white;" href="https://discord.bunkerweb.io">Discord chat</a> and following us on <a style="text-decoration:underline; color: white;" href="https://www.linkedin.com/company/bunkerity/">LinkedIn</a>.</p>'}
        ]

      function setBannerStyle() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        bannerEl.style.backgroundColor = "#2eac68";
        bannerItem.style.textAlign = "center";
        bannerItem.style.transition = "all 0.5s ease-out";
      }

      function setDefault() {
        const bannerItem = bannerEl.querySelector('.md-banner__inner');
        const clone = bannerItem.cloneNode(true);
        clone.innerHTML = defaultContent[0]["content"];
        bannerEl.replaceChild(clone, bannerItem);
      }

      function startBannerLoop() {
        const switchDelay = 7000;
        let i = 0;

        setInterval(() => {
          // Update or reset index
          if(i + 1 === defaultContent.length) {
            i = 0;
          } else {
            i++;
          }

          // Prepare data with next el with opacity 0 too
          const currItem = bannerEl.querySelector('.md-banner__inner');
          currItem.style.opacity = 0;
          const clone = currItem.cloneNode(true);
          clone.innerHTML = defaultContent[i]["content"];
          setTimeout(() => {
            bannerEl.replaceChild(clone, currItem);
            setTimeout(() => {
              const newItem = bannerEl.querySelector('.md-banner__inner');
              newItem.style.opacity = 1;
            }, 20);
          }, 600);

        }, switchDelay);
      }

      function runBanner() {
        startBannerLoop();
        // Try to get dynamic content
        // Else keep static ones
        // fetch("https://www.bunkerweb.io/api/bw-ui-news")
        // .then((res) => {
        //   return res.json();
        // })
        // .then((res) => {
        //   defaultContent = res.data[0].data;
        //   startBannerLoop();
        // })
        // .catch((e) => {
        //   startBannerLoop();
        // });
      }

        setBannerStyle();
        setDefault();
        runBanner()

      })
    </script>

    
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Funcionalidades - Documentación de BunkerWeb" >
      
        <meta  property="og:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  property="og:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/es/features.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.bunkerweb.io/latest/es/features/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Funcionalidades - Documentación de BunkerWeb" >
      
        <meta  name="twitter:description"  content="Documentation of BunkerWeb, the open source and next generation WAF." >
      
        <meta  name="twitter:image"  content="https://docs.bunkerweb.io/latest/assets/images/social/es/features.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#caracteristicas" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    📢 Looking for BunkerWeb CLOUD, PRO version, technical support or tailored services ? Visit the
    <a href="https://panel.bunkerweb.io/?utm_campaign=self&utm_source=doc"
       style="color: #3f6ec6;
              text-decoration: underline">BunkerWeb Panel</a>
    for more information on our enterprise offers.

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
    You're not viewing the
    documentation of the latest version.
    <a href="../../..">
        <strong>Click here to view latest.</strong>
    </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../" title="Documentación de BunkerWeb" class="md-header__button md-logo" aria-label="Documentación de BunkerWeb" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentación de BunkerWeb
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Funcionalidades
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Seleccionar idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../features/" hreflang="en" class="md-select__link">
              English - 🇬🇧
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../fr/features/" hreflang="fr" class="md-select__link">
              Français - 🇫🇷
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../de/features/" hreflang="de" class="md-select__link">
              Deutsch - 🇩🇪
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="es" class="md-select__link">
              Español - 🇪🇸
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh/features/" hreflang="zh" class="md-select__link">
              中文 - 🇨🇳
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bunkerity/bunkerweb" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Introducción

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        
  
  
    
  
  Conceptos

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../integrations/" class="md-tabs__link">
        
  
  
    
  
  Integraciones

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-guide/" class="md-tabs__link">
        
  
  
    
  
  Guía de inicio rápido

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Funcionalidades

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../advanced/" class="md-tabs__link">
        
  
  
    
  
  Usos avanzados

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../web-ui/" class="md-tabs__link">
        
  
  
    
  
  Interfaz web

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../upgrading/" class="md-tabs__link">
        
  
  
    
  
  Actualización

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  Solución de problemas

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
  
    
  
  Plugins

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../professional-services/" class="md-tabs__link">
        
  
  
    
  
  Servicios profesionales

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
  
    
  
  Acerca de

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="Documentación de BunkerWeb" class="md-nav__button md-logo" aria-label="Documentación de BunkerWeb" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Documentación de BunkerWeb
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bunkerity/bunkerweb" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conceptos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integraciones
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guía de inicio rápido
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Funcionalidades
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Funcionalidades
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuracion-global" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración global
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuración global">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modo-multisite" class="md-nav__link">
    <span class="md-ellipsis">
      Modo Multisite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-multiples" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes Múltiples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modos-de-seguridad" class="md-nav__link">
    <span class="md-ellipsis">
      Modos de Seguridad
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de Configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-ddos-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Anti DDoS (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antibot" class="md-nav__link">
    <span class="md-ellipsis">
      Antibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-comunes" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones comunes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excluir-trafico-de-los-desafios" class="md-nav__link">
    <span class="md-ellipsis">
      Excluir tráfico de los desafíos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mecanismos-de-desafio-compatibles" class="md-nav__link">
    <span class="md-ellipsis">
      Mecanismos de desafío compatibles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_1" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-basic" class="md-nav__link">
    <span class="md-ellipsis">
      Auth basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_1" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_2" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_2" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_2" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaz-de-linea-de-comandos" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaz de línea de comandos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_3" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-s3-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Backup S3 (PRO)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bad-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Bad behavior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bad behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_3" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_3" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_4" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blacklist" class="md-nav__link">
    <span class="md-ellipsis">
      Blacklist
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blacklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_4" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_4" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_5" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brotli" class="md-nav__link">
    <span class="md-ellipsis">
      Brotli
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Brotli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_5" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_5" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_6" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkernet" class="md-nav__link">
    <span class="md-ellipsis">
      BunkerNet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BunkerNet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_6" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_6" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_7" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integracion-con-la-consola-de-crowdsec" class="md-nav__link">
    <span class="md-ellipsis">
      Integración con la Consola de CrowdSec
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_7" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_7" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de Configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_8" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Client cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_8" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_8" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de Configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_9" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Country">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#como-usar_9" class="md-nav__link">
    <span class="md-ellipsis">
      Cómo usar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_9" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_10" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crowdsec" class="md-nav__link">
    <span class="md-ellipsis">
      CrowdSec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CrowdSec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajustes-de-configuracion_10" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes de Configuración
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ajustes de Configuración">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ajustes-del-componente-de-seguridad-de-aplicaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Ajustes del Componente de Seguridad de Aplicaciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuraciones-de-ejemplo_11" class="md-nav__link">
    <span class="md-ellipsis">
      Configuraciones de Ejemplo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usos avanzados
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interfaz web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Actualización
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solución de problemas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../professional-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Servicios profesionales
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acerca de
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="caracteristicas">Características</h1>
<p>Esta sección contiene la lista completa de ajustes admitidos por BunkerWeb. Si aún no está familiarizado con BunkerWeb, primero lea la sección de <a href="../concepts/">conceptos</a> de la documentación. Siga las instrucciones de su <a href="../integrations/">integración</a> para aplicar los ajustes.</p>
<h2 id="configuracion-global">Configuración global</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El plugin General proporciona el marco de configuración principal para BunkerWeb, permitiéndote definir los ajustes esenciales que controlan cómo se protegen y entregan tus servicios web. Este plugin fundamental gestiona aspectos básicos como los modos de seguridad, los valores predeterminados del servidor, el comportamiento de los registros y los parámetros operativos críticos para todo el ecosistema de BunkerWeb.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando BunkerWeb se inicia, el plugin General carga y aplica tus ajustes de configuración principales.</li>
<li>Los modos de seguridad se establecen de forma global o por sitio, determinando el nivel de protección aplicado.</li>
<li>Los ajustes predeterminados del servidor establecen valores de respaldo para cualquier configuración multisitio no especificada.</li>
<li>Los parámetros de registro controlan qué información se graba y cómo se formatea.</li>
<li>Estos ajustes crean la base sobre la que operan todos los demás plugins y funcionalidades de BunkerWeb.</li>
</ol>
<h3 id="modo-multisite">Modo Multisite</h3>
<p>Cuando <code>MULTISITE</code> se establece en <code>yes</code>, BunkerWeb puede alojar y proteger múltiples sitios web, cada uno con su propia configuración única. Esta característica es particularmente útil para escenarios como:</p>
<ul>
<li>Alojar múltiples dominios con configuraciones distintas</li>
<li>Ejecutar múltiples aplicaciones con diferentes requisitos de seguridad</li>
<li>Aplicar políticas de seguridad personalizadas a diferentes servicios</li>
</ul>
<p>En el modo multisitio, cada sitio se identifica por un <code>SERVER_NAME</code> único. Para aplicar ajustes específicos a un sitio, antepón el <code>SERVER_NAME</code> principal al nombre del ajuste. Por ejemplo:</p>
<ul>
<li><code>www.example.com_USE_ANTIBOT=captcha</code> habilita el CAPTCHA para <code>www.example.com</code>.</li>
<li><code>myapp.example.com_USE_GZIP=yes</code> habilita la compresión GZIP para <code>myapp.example.com</code>.</li>
</ul>
<p>Este enfoque asegura que los ajustes se apliquen al sitio correcto en un entorno multisitio.</p>
<h3 id="ajustes-multiples">Ajustes Múltiples</h3>
<p>Algunos ajustes en BunkerWeb admiten múltiples configuraciones para la misma característica. Para definir múltiples grupos de ajustes, añade un sufijo numérico al nombre del ajuste. Por ejemplo:</p>
<ul>
<li><code>REVERSE_PROXY_URL_1=/subdir</code> y <code>REVERSE_PROXY_HOST_1=http://myhost1</code> configuran el primer proxy inverso.</li>
<li><code>REVERSE_PROXY_URL_2=/anotherdir</code> y <code>REVERSE_PROXY_HOST_2=http://myhost2</code> configuran el segundo proxy inverso.</li>
</ul>
<p>Este patrón te permite gestionar múltiples configuraciones para características como proxies inversos, puertos u otros ajustes que requieren valores distintos para diferentes casos de uso.</p>
<h3 id="modos-de-seguridad">Modos de Seguridad</h3>
<p>El ajuste <code>SECURITY_MODE</code> determina cómo BunkerWeb maneja las amenazas detectadas. Esta característica flexible te permite elegir entre monitorizar o bloquear activamente la actividad sospechosa, dependiendo de tus necesidades específicas:</p>
<ul>
<li><strong><code>detect</code></strong>: Registra las amenazas potenciales sin bloquear el acceso. Este modo es útil para identificar y analizar falsos positivos de una manera segura y no disruptiva.</li>
<li><strong><code>block</code></strong> (predeterminado): Bloquea activamente las amenazas detectadas mientras registra los incidentes para prevenir el acceso no autorizado y proteger tu aplicación.</li>
</ul>
<p>Cambiar al modo <code>detect</code> puede ayudarte a identificar y resolver posibles falsos positivos sin interrumpir a los clientes legítimos. Una vez que estos problemas se resuelvan, puedes volver con confianza al modo <code>block</code> para una protección completa.</p>
<h3 id="ajustes-de-configuracion">Ajustes de Configuración</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:9"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Ajustes Principales</label><label for="__tabbed_1_2">Ajustes de la API</label><label for="__tabbed_1_3">Ajustes de Red y Puertos</label><label for="__tabbed_1_4">Ajustes del Servidor de Stream</label><label for="__tabbed_1_5">Ajustes de Workers</label><label for="__tabbed_1_6">Ajustes de Memoria</label><label for="__tabbed_1_7">Ajustes de Registro</label><label for="__tabbed_1_8">Ajustes de Integración</label><label for="__tabbed_1_9">Ajustes de Nginx</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVER_NAME</code></td>
<td><code>www.example.com</code></td>
<td>multisite</td>
<td>No</td>
<td><strong>Dominio Principal:</strong> El nombre de dominio principal para este sitio. Requerido en modo multisitio.</td>
</tr>
<tr>
<td><code>BUNKERWEB_INSTANCES</code></td>
<td><code>127.0.0.1</code></td>
<td>global</td>
<td>No</td>
<td><strong>Instancias de BunkerWeb:</strong> Lista de instancias de BunkerWeb separadas por espacios.</td>
</tr>
<tr>
<td><code>MULTISITE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>No</td>
<td><strong>Múltiples Sitios:</strong> Establécelo en <code>yes</code> para permitir el alojamiento de múltiples sitios web con diferentes configuraciones.</td>
</tr>
<tr>
<td><code>SECURITY_MODE</code></td>
<td><code>block</code></td>
<td>multisite</td>
<td>No</td>
<td><strong>Nivel de Seguridad:</strong> Controla el nivel de aplicación de la seguridad. Opciones: <code>detect</code> o <code>block</code>.</td>
</tr>
<tr>
<td><code>SERVER_TYPE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>No</td>
<td><strong>Tipo de Servidor:</strong> Define si el servidor es de tipo <code>http</code> o <code>stream</code>.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_API</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>No</td>
<td><strong>Activar API:</strong> Activa la API para controlar BunkerWeb.</td>
</tr>
<tr>
<td><code>API_HTTP_PORT</code></td>
<td><code>5000</code></td>
<td>global</td>
<td>No</td>
<td><strong>Puerto de la API:</strong> Número de puerto de escucha para la API.</td>
</tr>
<tr>
<td><code>API_HTTPS_PORT</code></td>
<td><code>5443</code></td>
<td>global</td>
<td>No</td>
<td><strong>Puerto HTTPS de la API:</strong> Número de puerto de escucha (TLS) para la API.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>No</td>
<td><strong>Escucha HTTP de la API:</strong> Habilita el listener HTTP para la API.</td>
</tr>
<tr>
<td><code>API_LISTEN_HTTPS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>No</td>
<td><strong>Escucha HTTPS de la API:</strong> Habilita el listener HTTPS (TLS) para la API.</td>
</tr>
<tr>
<td><code>API_LISTEN_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>No</td>
<td><strong>IP de Escucha de la API:</strong> Dirección IP de escucha para la API.</td>
</tr>
<tr>
<td><code>API_SERVER_NAME</code></td>
<td><code>bwapi</code></td>
<td>global</td>
<td>No</td>
<td><strong>Nombre del Servidor de la API:</strong> Nombre del servidor (host virtual) para la API.</td>
</tr>
<tr>
<td><code>API_WHITELIST_IP</code></td>
<td><code>127.0.0.0/8</code></td>
<td>global</td>
<td>No</td>
<td><strong>IP de la Lista Blanca de la API:</strong> Lista de IP/redes permitidas para contactar con la API.</td>
</tr>
<tr>
<td><code>API_TOKEN</code></td>
<td></td>
<td>global</td>
<td>No</td>
<td><strong>Token de Acceso a la API (opcional):</strong> Si se establece, todas las solicitudes a la API deben incluir <code>Authorization: Bearer &lt;token&gt;</code>.</td>
</tr>
</tbody>
</table>
<p>Nota: por razones de arranque, si habilitas <code>API_TOKEN</code> debes establecerlo en el entorno de AMBAS, la instancia de BunkerWeb y el Programador. El Programador incluye automáticamente el encabezado <code>Authorization</code> cuando <code>API_TOKEN</code> está presente en su entorno. Si no se establece, no se envía ningún encabezado y BunkerWeb no aplicará la autenticación por token. Puedes exponer la API a través de HTTPS estableciendo <code>API_LISTEN_HTTPS=yes</code> (puerto: <code>API_HTTPS_PORT</code>, predeterminado <code>5443</code>).</p>
<p>Prueba de ejemplo con curl (reemplaza el token y el host):</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://&lt;bunkerweb-host&gt;:5000/ping

curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--insecure<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>https://&lt;bunkerweb-host&gt;:5443/ping
</code></pre></div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HTTP_PORT</code></td>
<td><code>8080</code></td>
<td>global</td>
<td>Sí</td>
<td><strong>Puerto HTTP:</strong> Número de puerto para el tráfico HTTP.</td>
</tr>
<tr>
<td><code>HTTPS_PORT</code></td>
<td><code>8443</code></td>
<td>global</td>
<td>Sí</td>
<td><strong>Puerto HTTPS:</strong> Número de puerto para el tráfico HTTPS.</td>
</tr>
<tr>
<td><code>USE_IPV6</code></td>
<td><code>no</code></td>
<td>global</td>
<td>No</td>
<td><strong>Soporte IPv6:</strong> Habilita la conectividad IPv6.</td>
</tr>
<tr>
<td><code>DNS_RESOLVERS</code></td>
<td><code>127.0.0.11</code></td>
<td>global</td>
<td>No</td>
<td><strong>Resolutores DNS:</strong> Direcciones DNS de los resolutores a usar.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_STREAM</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>No</td>
<td><strong>Escucha de Stream:</strong> Habilita la escucha para no-ssl (passthrough).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT</code></td>
<td><code>1337</code></td>
<td>multisite</td>
<td>Sí</td>
<td><strong>Puerto de Stream:</strong> Puerto de escucha para no-ssl (passthrough).</td>
</tr>
<tr>
<td><code>LISTEN_STREAM_PORT_SSL</code></td>
<td><code>4242</code></td>
<td>multisite</td>
<td>Sí</td>
<td><strong>Puerto SSL de Stream:</strong> Puerto de escucha para ssl (passthrough).</td>
</tr>
<tr>
<td><code>USE_TCP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>No</td>
<td><strong>Escucha TCP:</strong> Habilita la escucha TCP (stream).</td>
</tr>
<tr>
<td><code>USE_UDP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>No</td>
<td><strong>Escucha UDP:</strong> Habilita la escucha UDP (stream).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKER_PROCESSES</code></td>
<td><code>auto</code></td>
<td>global</td>
<td>No</td>
<td><strong>Procesos Worker:</strong> Número de procesos worker. Establécelo en <code>auto</code> para usar los núcleos disponibles.</td>
</tr>
<tr>
<td><code>WORKER_CONNECTIONS</code></td>
<td><code>1024</code></td>
<td>global</td>
<td>No</td>
<td><strong>Conexiones por Worker:</strong> Número máximo de conexiones por worker.</td>
</tr>
<tr>
<td><code>WORKER_RLIMIT_NOFILE</code></td>
<td><code>2048</code></td>
<td>global</td>
<td>No</td>
<td><strong>Límite de Descriptores de Archivo:</strong> Número máximo de archivos abiertos por worker.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKERLOCK_MEMORY_SIZE</code></td>
<td><code>48k</code></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño de Memoria de Workerlock:</strong> Tamaño de lua_shared_dict para los workers de inicialización.</td>
</tr>
<tr>
<td><code>DATASTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño de Memoria del Datastore:</strong> Tamaño del datastore interno.</td>
</tr>
<tr>
<td><code>CACHESTORE_MEMORY_SIZE</code></td>
<td><code>64m</code></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño de Memoria del Cachestore:</strong> Tamaño del cachestore interno.</td>
</tr>
<tr>
<td><code>CACHESTORE_IPC_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño de Memoria IPC del Cachestore:</strong> Tamaño del cachestore interno (ipc).</td>
</tr>
<tr>
<td><code>CACHESTORE_MISS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño de Memoria de Fallos del Cachestore:</strong> Tamaño del cachestore interno (fallos).</td>
</tr>
<tr>
<td><code>CACHESTORE_LOCKS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño de Memoria de Bloqueos del Cachestore:</strong> Tamaño del cachestore interno (bloqueos).</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOG_FORMAT</code></td>
<td><code>$host $remote_addr - $request_id $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\"</code></td>
<td>global</td>
<td>No</td>
<td><strong>Formato de Registro:</strong> El formato a usar para los registros de acceso.</td>
</tr>
<tr>
<td><code>LOG_LEVEL</code></td>
<td><code>notice</code></td>
<td>global</td>
<td>No</td>
<td><strong>Nivel de Registro:</strong> Nivel de verbosidad para los registros de errores. Opciones: <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
<tr>
<td><code>TIMERS_LOG_LEVEL</code></td>
<td><code>debug</code></td>
<td>global</td>
<td>No</td>
<td><strong>Nivel de Registro de Temporizadores:</strong> Nivel de registro para los temporizadores. Opciones: <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>err</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Mejores Prácticas de Registro</p>
<ul>
<li>Para entornos de producción, usa los niveles de registro <code>notice</code>, <code>warn</code>, o <code>error</code> para minimizar el volumen de registros.</li>
<li>Para depurar problemas, establece temporalmente el nivel de registro en <code>debug</code> para obtener información más detallada.</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTOCONF_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>No</td>
<td><strong>Modo Autoconf:</strong> Habilita la integración con Docker Autoconf.</td>
</tr>
<tr>
<td><code>SWARM_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>No</td>
<td><strong>Modo Swarm:</strong> Habilita la integración con Docker Swarm.</td>
</tr>
<tr>
<td><code>KUBERNETES_MODE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>No</td>
<td><strong>Modo Kubernetes:</strong> Habilita la integración con Kubernetes.</td>
</tr>
<tr>
<td><code>USE_TEMPLATE</code></td>
<td></td>
<td>multisite</td>
<td>No</td>
<td><strong>Usar Plantilla:</strong> Plantilla de configuración a usar que sobrescribirá los valores predeterminados de ajustes específicos.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NGINX_PREFIX</code></td>
<td><code>/etc/nginx/</code></td>
<td>global</td>
<td>No</td>
<td><strong>Prefijo de Nginx:</strong> Dónde buscará Nginx las configuraciones.</td>
</tr>
<tr>
<td><code>SERVER_NAMES_HASH_BUCKET_SIZE</code></td>
<td></td>
<td>global</td>
<td>No</td>
<td><strong>Tamaño del Bucket de Hash de Nombres de Servidor:</strong> Valor para la directiva <code>server_names_hash_bucket_size</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h3 id="configuraciones-de-ejemplo">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Configuración Básica de Producción</label><label for="__tabbed_2_2">Modo de Desarrollo</label><label for="__tabbed_2_3">Configuración Multisite</label><label for="__tabbed_2_4">Configuración del Servidor de Stream</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración estándar para un sitio de producción con seguridad estricta:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notice&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un entorno de desarrollo con registro adicional:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dev.example.com&quot;</span>
<span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;debug&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para alojar múltiples sitios web:</p>
<div class="highlight"><pre><span></span><code><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Primer sitio</span>
<span class="nt">site1.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site1.example.com&quot;</span>
<span class="nt">site1.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span>

<span class="c1"># Segundo sitio</span>
<span class="nt">site2.example.com_SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;site2.example.com&quot;</span>
<span class="nt">site2.example.com_SECURITY_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;detect&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un servidor TCP/UDP:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream.example.com&quot;</span>
<span class="nt">LISTEN_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LISTEN_STREAM_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1337&quot;</span>
<span class="nt">USE_TCP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_UDP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="anti-ddos-pro">Anti DDoS <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides enhanced protection against DDoS attacks by analyzing and filtering suspicious traffic.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIDDOS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td>Enable or disable anti DDoS protection to mitigate high traffic spikes.</td>
</tr>
<tr>
<td><code>ANTIDDOS_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>no</td>
<td>Size of in-memory storage for DDoS metrics (e.g., 10M, 500k).</td>
</tr>
<tr>
<td><code>ANTIDDOS_THRESHOLD</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td>Maximum suspicious requests allowed from a single IP before blocking.</td>
</tr>
<tr>
<td><code>ANTIDDOS_WINDOW_TIME</code></td>
<td><code>10</code></td>
<td>global</td>
<td>no</td>
<td>Time window (seconds) to detect abnormal request patterns.</td>
</tr>
<tr>
<td><code>ANTIDDOS_STATUS_CODES</code></td>
<td><code>429 403 444</code></td>
<td>global</td>
<td>no</td>
<td>HTTP status codes treated as suspicious for DDoS analysis.</td>
</tr>
<tr>
<td><code>ANTIDDOS_DISTINCT_IP</code></td>
<td><code>5</code></td>
<td>global</td>
<td>no</td>
<td>Minimum distinct IP count before enabling anti DDoS measures.</td>
</tr>
</tbody>
</table>
<h2 id="antibot">Antibot</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Los atacantes suelen utilizar herramientas automatizadas (bots) para intentar explotar su sitio web. Para protegerse contra esto, BunkerWeb incluye una función "Antibot" que desafía a los usuarios a demostrar que son humanos. Si un usuario completa con éxito el desafío, se le concede acceso a su sitio web. Esta función está desactivada por defecto.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un usuario visita su sitio, BunkerWeb comprueba si ya ha superado el desafío antibot.</li>
<li>Si no, el usuario es redirigido a una página de desafío.</li>
<li>El usuario debe completar el desafío (por ejemplo, resolver un CAPTCHA, ejecutar JavaScript).</li>
<li>Si el desafío tiene éxito, el usuario es redirigido de nuevo a la página que intentaba visitar originalmente y puede navegar por su sitio web con normalidad.</li>
</ol>
<h3 id="como-usar">Cómo usar</h3>
<p>Siga estos pasos para habilitar y configurar la función Antibot:</p>
<ol>
<li><strong>Elija un tipo de desafío:</strong> Decida qué tipo de desafío antibot usar (p. ej., <a href="#__tabbed_3_3">captcha</a>, <a href="#__tabbed_3_5">hcaptcha</a>, <a href="#__tabbed_3_2">javascript</a>).</li>
<li><strong>Habilite la función:</strong> Establezca la configuración <code>USE_ANTIBOT</code> en el tipo de desafío elegido en su configuración de BunkerWeb.</li>
<li><strong>Configure los ajustes:</strong> Ajuste las otras configuraciones <code>ANTIBOT_*</code> según sea necesario. Para reCAPTCHA, hCaptcha, Turnstile y mCaptcha, debe crear una cuenta con el servicio respectivo y obtener claves de API.</li>
<li><strong>Importante:</strong> Asegúrese de que el <code>ANTIBOT_URI</code> sea una URL única en su sitio que no esté en uso.</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Acerca de la configuración <code>ANTIBOT_URI</code></p>
<p>Asegúrese de que el <code>ANTIBOT_URI</code> sea una URL única en su sitio que no esté en uso.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Configuración de sesión en entornos de clúster</p>
<p>La función antibot utiliza cookies para rastrear si un usuario ha completado el desafío. Si está ejecutando BunkerWeb en un entorno de clúster (múltiples instancias de BunkerWeb), <strong>debe</strong> configurar la gestión de sesiones correctamente. Esto implica establecer las configuraciones <code>SESSIONS_SECRET</code> y <code>SESSIONS_NAME</code> con los <strong>mismos valores</strong> en todas las instancias de BunkerWeb. Si no lo hace, es posible que a los usuarios se les pida repetidamente que completen el desafío antibot. Puede encontrar más información sobre la configuración de sesiones <a href="#sessions">aquí</a>.</p>
</div>
<h3 id="configuraciones-comunes">Configuraciones comunes</h3>
<p>Las siguientes configuraciones son compartidas por todos los mecanismos de desafío:</p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_URI</code></td>
<td><code>/challenge</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL del desafío:</strong> La URL a la que se redirigirá a los usuarios para completar el desafío. Asegúrese de que esta URL no se utilice para nada más en su sitio.</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_RESOLVE</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Límite de tiempo del desafío:</strong> El tiempo máximo (en segundos) que un usuario tiene para completar el desafío. Después de este tiempo, se generará un nuevo desafío.</td>
</tr>
<tr>
<td><code>ANTIBOT_TIME_VALID</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validez del desafío:</strong> Cuánto tiempo (en segundos) es válido un desafío completado. Después de este tiempo, los usuarios tendrán que resolver un nuevo desafío.</td>
</tr>
</tbody>
</table>
<h3 id="excluir-trafico-de-los-desafios">Excluir tráfico de los desafíos</h3>
<p>BunkerWeb le permite especificar ciertos usuarios, IP o solicitudes que deben omitir por completo el desafío antibot. Esto es útil para incluir en la lista blanca servicios de confianza, redes internas o páginas específicas que siempre deben ser accesibles sin desafío:</p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANTIBOT_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL excluidas:</strong> Lista de patrones regex de URI separados por espacios que deben omitir el desafío.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>IP excluidas:</strong> Lista de direcciones IP o rangos CIDR separados por espacios que deben omitir el desafío.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>DNS inverso excluido:</strong> Lista de sufijos de DNS inverso separados por espacios que deben omitir el desafío.</td>
</tr>
<tr>
<td><code>ANTIBOT_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Solo IP globales:</strong> Si se establece en <code>yes</code>, solo realiza comprobaciones de DNS inverso en direcciones IP públicas.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>ASN excluidos:</strong> Lista de números de ASN separados por espacios que deben omitir el desafío.</td>
</tr>
<tr>
<td><code>ANTIBOT_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>User-Agents excluidos:</strong> Lista de patrones regex de User-Agent separados por espacios que deben omitir el desafío.</td>
</tr>
</tbody>
</table>
<p><strong>Ejemplos:</strong></p>
<ul>
<li><code>ANTIBOT_IGNORE_URI: "^/api/ ^/webhook/ ^/assets/"</code>
  Esto excluirá del desafío antibot todas las URI que comiencen con <code>/api/</code>, <code>/webhook/</code> o <code>/assets/</code>.</li>
<li><code>ANTIBOT_IGNORE_IP: "192.168.1.0/24 10.0.0.1"</code>
  Esto excluirá del desafío antibot la red interna <code>192.168.1.0/24</code> y la IP específica <code>10.0.0.1</code>.</li>
<li><code>ANTIBOT_IGNORE_RDNS: ".googlebot.com .bingbot.com"</code>
  Esto excluirá del desafío antibot las solicitudes de hosts con DNS inverso que terminen en <code>googlebot.com</code> o <code>bingbot.com</code>.</li>
<li><code>ANTIBOT_IGNORE_ASN: "15169 8075"</code>
  Esto excluirá del desafío antibot las solicitudes de los ASN 15169 (Google) y 8075 (Microsoft).</li>
<li><code>ANTIBOT_IGNORE_USER_AGENT: "^Mozilla.+Chrome.+Safari"</code>
  Esto excluirá del desafío antibot las solicitudes con User-Agents que coincidan con el patrón regex especificado.</li>
</ul>
<h3 id="mecanismos-de-desafio-compatibles">Mecanismos de desafío compatibles</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:7"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><input id="__tabbed_3_7" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Cookie</label><label for="__tabbed_3_2">JavaScript</label><label for="__tabbed_3_3">Captcha</label><label for="__tabbed_3_4">reCAPTCHA</label><label for="__tabbed_3_5">hCaptcha</label><label for="__tabbed_3_6">Turnstile</label><label for="__tabbed_3_7">mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>El desafío de Cookie es un mecanismo ligero que se basa en establecer una cookie en el navegador del usuario. Cuando un usuario accede al sitio, el servidor envía una cookie al cliente. En solicitudes posteriores, el servidor comprueba la presencia de esta cookie para verificar que el usuario es legítimo. Este método es simple y eficaz para la protección básica contra bots sin requerir interacción adicional del usuario.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>El servidor genera una cookie única y la envía al cliente.</li>
<li>El cliente debe devolver la cookie en las solicitudes posteriores.</li>
<li>Si la cookie falta o no es válida, el usuario es redirigido a la página del desafío.</li>
</ol>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Antibot:</strong> Establezca en <code>cookie</code> para habilitar el desafío de Cookie.</td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
<div class="tabbed-block">
<p>El desafío de JavaScript requiere que el cliente resuelva una tarea computacional usando JavaScript. Este mecanismo asegura que el cliente tenga JavaScript habilitado y pueda ejecutar el código requerido, lo cual está típicamente fuera de la capacidad de la mayoría de los bots.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>El servidor envía un script de JavaScript al cliente.</li>
<li>El script realiza una tarea computacional (p. ej., hashing) y envía el resultado de vuelta al servidor.</li>
<li>El servidor verifica el resultado para confirmar la legitimidad del cliente.</li>
</ol>
<p><strong>Características principales:</strong></p>
<ul>
<li>El desafío genera dinámicamente una tarea única para cada cliente.</li>
<li>La tarea computacional implica hashing con condiciones específicas (p. ej., encontrar un hash con un prefijo determinado).</li>
</ul>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Antibot:</strong> Establezca en <code>javascript</code> para habilitar el desafío de JavaScript.</td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
<div class="tabbed-block">
<p>El desafío de Captcha es un mecanismo casero que genera desafíos basados en imágenes alojados completamente dentro de su entorno de BunkerWeb. Pone a prueba la capacidad de los usuarios para reconocer e interpretar caracteres aleatorios, asegurando que los bots automatizados sean bloqueados eficazmente sin depender de servicios externos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>El servidor genera una imagen CAPTCHA que contiene caracteres aleatorios.</li>
<li>El usuario debe introducir los caracteres que se muestran en la imagen en un campo de texto.</li>
<li>El servidor valida la entrada del usuario con el CAPTCHA generado.</li>
</ol>
<p><strong>Características principales:</strong></p>
<ul>
<li>Totalmente autoalojado, eliminando la necesidad de API de terceros.</li>
<li>Los desafíos generados dinámicamente aseguran la unicidad para cada sesión de usuario.</li>
<li>Utiliza un conjunto de caracteres personalizable para la generación de CAPTCHA.</li>
</ul>
<p><strong>Caracteres admitidos:</strong></p>
<p>El sistema CAPTCHA admite los siguientes tipos de caracteres:</p>
<ul>
<li><strong>Letras:</strong> Todas las letras minúsculas (a-z) y mayúsculas (A-Z)</li>
<li><strong>Números:</strong> 2, 3, 4, 5, 6, 7, 8, 9 (excluye 0 y 1 para evitar confusiones)</li>
<li><strong>Caracteres especiales:</strong> <code>+-/=%"'&amp;_(),.;:?!§`^ÄÖÜßäöüé''‚""„</code></li>
</ul>
<p>Para tener el conjunto completo de caracteres admitidos, consulte el <a href="https://www.dafont.com/moms-typewriter.charmap?back=theme">mapa de caracteres de la fuente</a> utilizada para el CAPTCHA.</p>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Antibot:</strong> Establezca en <code>captcha</code> para habilitar el desafío de Captcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_CAPTCHA_ALPHABET</code></td>
<td><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Alfabeto del Captcha:</strong> Una cadena de caracteres para usar en la generación del CAPTCHA. Caracteres admitidos: todas las letras (a-z, A-Z), números 2-9 (excluye 0 y 1) y caracteres especiales: <code>+-/=%"'&amp;_(),.;:?!§`^ÄÖÜßäöüé''‚""„</code></td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
<div class="tabbed-block">
<p>Cuando está habilitado, reCAPTCHA se ejecuta en segundo plano (v3) para asignar una puntuación basada en el comportamiento del usuario. Una puntuación inferior al umbral configurado solicitará una verificación adicional o bloqueará la solicitud. Para los desafíos visibles (v2), los usuarios deben interactuar con el widget de reCAPTCHA antes de continuar.</p>
<p>Ahora hay dos formas de integrar reCAPTCHA:
*   La versión clásica (claves de sitio/secretas, punto final de verificación v2/v3)
*   La nueva versión que utiliza Google Cloud (ID del proyecto + clave de API). La versión clásica sigue disponible y se puede activar con <code>ANTIBOT_RECAPTCHA_CLASSIC</code>.</p>
<p>Para la versión clásica, obtenga sus claves de sitio y secretas en la <a href="https://www.google.com/recaptcha/admin">consola de administración de Google reCAPTCHA</a>.
Para la nueva versión, cree una clave de reCAPTCHA en su proyecto de Google Cloud y use el ID del proyecto y una clave de API (consulte la <a href="https://console.cloud.google.com/security/recaptcha">consola de reCAPTCHA de Google Cloud</a>). Todavía se requiere una clave de sitio.</p>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td>Habilitar antibot; establezca en <code>recaptcha</code> para habilitar reCAPTCHA.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_CLASSIC</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td>Usar reCAPTCHA clásico. Establezca en <code>no</code> para usar la nueva versión basada en Google Cloud.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>Clave de sitio de reCAPTCHA. Requerida para las versiones clásica y nueva.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>Clave secreta de reCAPTCHA. Requerida solo para la versión clásica.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_PROJECT_ID</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>ID del proyecto de Google Cloud. Requerido solo para la nueva versión.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_API_KEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>Clave de API de Google Cloud utilizada para llamar a la API de reCAPTCHA Enterprise. Requerida solo para la nueva versión.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA3</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>Huella digital JA3 TLS opcional para incluir en las evaluaciones de Enterprise.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_JA4</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td>Huella digital JA4 TLS opcional para incluir en las evaluaciones de Enterprise.</td>
</tr>
<tr>
<td><code>ANTIBOT_RECAPTCHA_SCORE</code></td>
<td><code>0.7</code></td>
<td>multisite</td>
<td>no</td>
<td>Puntuación mínima requerida para pasar (se aplica tanto a la v3 clásica como a la nueva versión).</td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
<div class="tabbed-block">
<p>Cuando está habilitado, hCaptcha proporciona una alternativa eficaz a reCAPTCHA al verificar las interacciones del usuario sin depender de un mecanismo de puntuación. Desafía a los usuarios con una prueba simple e interactiva para confirmar su legitimidad.</p>
<p>Para integrar hCaptcha con BunkerWeb, debe obtener las credenciales necesarias del panel de hCaptcha en <a href="https://www.hcaptcha.com">hCaptcha</a>. Estas credenciales incluyen una clave de sitio y una clave secreta.</p>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Antibot:</strong> Establezca en <code>hcaptcha</code> para habilitar el desafío de hCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave del sitio de hCaptcha:</strong> Su clave de sitio de hCaptcha (obtenerla de hCaptcha).</td>
</tr>
<tr>
<td><code>ANTIBOT_HCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave secreta de hCaptcha:</strong> Su clave secreta de hCaptcha (obtenerla de hCaptcha).</td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
<div class="tabbed-block">
<p>Turnstile es un mecanismo de desafío moderno y respetuoso con la privacidad que aprovecha la tecnología de Cloudflare para detectar y bloquear el tráfico automatizado. Valida las interacciones del usuario de manera fluida y en segundo plano, reduciendo la fricción para los usuarios legítimos y desalentando eficazmente a los bots.</p>
<p>Para integrar Turnstile con BunkerWeb, asegúrese de obtener las credenciales necesarias de <a href="https://www.cloudflare.com/turnstile">Cloudflare Turnstile</a>.</p>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Antibot:</strong> Establezca en <code>turnstile</code> para habilitar el desafío Turnstile.</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave del sitio de Turnstile:</strong> Su clave de sitio de Turnstile (obtenerla de Cloudflare).</td>
</tr>
<tr>
<td><code>ANTIBOT_TURNSTILE_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave secreta de Turnstile:</strong> Su clave secreta de Turnstile (obtenerla de Cloudflare).</td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
<div class="tabbed-block">
<p>mCaptcha es un mecanismo de desafío CAPTCHA alternativo que verifica la legitimidad de los usuarios presentando una prueba interactiva similar a otras soluciones antibot. Cuando está habilitado, desafía a los usuarios con un CAPTCHA proporcionado por mCaptcha, asegurando que solo los usuarios genuinos omitan las comprobaciones de seguridad automatizadas.</p>
<p>mCaptcha está diseñado pensando en la privacidad. Es totalmente compatible con el GDPR, lo que garantiza que todos los datos del usuario involucrados en el proceso de desafío cumplan con estrictos estándares de protección de datos. Además, mCaptcha ofrece la flexibilidad de ser autoalojado, lo que permite a las organizaciones mantener un control total sobre sus datos e infraestructura. Esta capacidad de autoalojamiento no solo mejora la privacidad, sino que también optimiza el rendimiento y la personalización para adaptarse a las necesidades específicas de implementación.</p>
<p>Para integrar mCaptcha con BunkerWeb, debe obtener las credenciales necesarias de la plataforma <a href="https://mcaptcha.org/">mCaptcha</a> o de su propio proveedor. Estas credenciales incluyen una clave de sitio y una clave secreta para la verificación.</p>
<p><strong>Ajustes de configuración:</strong></p>
<table>
<thead>
<tr>
<th>Configuración</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ANTIBOT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Antibot:</strong> Establezca en <code>mcaptcha</code> para habilitar el desafío mCaptcha.</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SITEKEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave del sitio de mCaptcha:</strong> Su clave de sitio de mCaptcha (obtenerla de mCaptcha).</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_SECRET</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave secreta de mCaptcha:</strong> Su clave secreta de mCaptcha (obtenerla de mCaptcha).</td>
</tr>
<tr>
<td><code>ANTIBOT_MCAPTCHA_URL</code></td>
<td><code>https://demo.mcaptcha.org</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Dominio de mCaptcha:</strong> El dominio a utilizar para el desafío mCaptcha.</td>
</tr>
</tbody>
</table>
<p>Consulte los <a href="#configuraciones-comunes">Ajustes comunes</a> para opciones de configuración adicionales.</p>
</div>
</div>
</div>
<h3 id="configuraciones-de-ejemplo_1">Configuraciones de ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:8"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><input id="__tabbed_4_5" name="__tabbed_4" type="radio" /><input id="__tabbed_4_6" name="__tabbed_4" type="radio" /><input id="__tabbed_4_7" name="__tabbed_4" type="radio" /><input id="__tabbed_4_8" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Desafío de Cookie</label><label for="__tabbed_4_2">Desafío de JavaScript</label><label for="__tabbed_4_3">Desafío de Captcha</label><label for="__tabbed_4_4">reCAPTCHA Clásico</label><label for="__tabbed_4_5">reCAPTCHA (nuevo)</label><label for="__tabbed_4_6">Desafío de hCaptcha</label><label for="__tabbed_4_7">Desafío de Turnstile</label><label for="__tabbed_4_8">Desafío de mCaptcha</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar el desafío de Cookie:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cookie&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar el desafío de JavaScript:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;javascript&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar el desafío de Captcha:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;captcha&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">ANTIBOT_CAPTCHA_ALPHABET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;23456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
</code></pre></div>
<p>Nota: El ejemplo anterior utiliza los números del 2 al 9 y todas las letras, que son los caracteres más utilizados para los desafíos CAPTCHA. Puede personalizar el alfabeto para incluir caracteres especiales según sea necesario.</p>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para el reCAPTCHA clásico (claves de sitio/secretas):</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para el nuevo reCAPTCHA basado en Google Cloud (ID del proyecto + clave de API):</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;recaptcha&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_CLASSIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_PROJECT_ID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-project-id&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-gcp-api-key&quot;</span>
<span class="c1"># Huellas dactilares opcionales para mejorar las evaluaciones de Enterprise</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA3: &quot;&lt;ja3-fingerprint&gt;&quot;</span>
<span class="c1"># ANTIBOT_RECAPTCHA_JA4: &quot;&lt;ja4-fingerprint&gt;&quot;</span>
<span class="nt">ANTIBOT_RECAPTCHA_SCORE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.7&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar el desafío de hCaptcha:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hcaptcha&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_HCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar el desafío de Turnstile:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turnstile&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_TURNSTILE_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar el desafío de mCaptcha:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ANTIBOT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mcaptcha&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SITEKEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-site-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
<span class="nt">ANTIBOT_MCAPTCHA_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://demo.mcaptcha.org&quot;</span>
<span class="nt">ANTIBOT_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/challenge&quot;</span>
<span class="nt">ANTIBOT_TIME_RESOLVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">ANTIBOT_TIME_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="auth-basic">Auth basic</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El plugin Auth Basic proporciona autenticación básica HTTP para proteger su sitio web o recursos específicos. Esta función añade una capa extra de seguridad al requerir que los usuarios introduzcan un nombre de usuario y una contraseña antes de acceder al contenido protegido. Este tipo de autenticación es fácil de implementar y es ampliamente compatible con los navegadores.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un usuario intenta acceder a un área protegida de su sitio web, el servidor envía un desafío de autenticación.</li>
<li>El navegador muestra un cuadro de diálogo de inicio de sesión pidiendo al usuario un nombre de usuario y una contraseña.</li>
<li>El usuario introduce sus credenciales, que se envían al servidor.</li>
<li>Si las credenciales son válidas, se le concede al usuario acceso al contenido solicitado.</li>
<li>Si las credenciales no son válidas, se le muestra al usuario un mensaje de error con el código de estado 401 No autorizado.</li>
</ol>
<h3 id="como-usar_1">Cómo usar</h3>
<p>Siga estos pasos para habilitar y configurar la autenticación básica:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_AUTH_BASIC</code> en <code>yes</code> en su configuración de BunkerWeb.</li>
<li><strong>Elija el ámbito de protección:</strong> Decida si proteger todo su sitio o solo URL específicas configurando el ajuste <code>AUTH_BASIC_LOCATION</code>.</li>
<li><strong>Defina las credenciales:</strong> Configure al menos un par de nombre de usuario y contraseña utilizando los ajustes <code>AUTH_BASIC_USER</code> y <code>AUTH_BASIC_PASSWORD</code>.</li>
<li><strong>Personalice el mensaje:</strong> Opcionalmente, cambie el <code>AUTH_BASIC_TEXT</code> para mostrar un mensaje personalizado en la solicitud de inicio de sesión.</li>
</ol>
<h3 id="ajustes-de-configuracion_1">Ajustes de configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_AUTH_BASIC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar autenticación básica:</strong> Establezca en <code>yes</code> para habilitar la autenticación básica.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_LOCATION</code></td>
<td><code>sitewide</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Ámbito de protección:</strong> Establezca en <code>sitewide</code> para proteger todo el sitio, o especifique una ruta de URL (p. ej., <code>/admin</code>) para proteger solo áreas específicas.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_USER</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Nombre de usuario:</strong> El nombre de usuario requerido para la autenticación. Puede definir múltiples pares de nombre de usuario/contraseña.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_PASSWORD</code></td>
<td><code>changeme</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Contraseña:</strong> La contraseña requerida para la autenticación. Cada contraseña corresponde a un nombre de usuario.</td>
</tr>
<tr>
<td><code>AUTH_BASIC_TEXT</code></td>
<td><code>Restricted area</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Texto de la solicitud:</strong> El mensaje que se muestra en la solicitud de autenticación mostrada a los usuarios.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de seguridad</p>
<p>La autenticación básica HTTP transmite las credenciales codificadas (no cifradas) en Base64. Aunque esto es aceptable cuando se utiliza sobre HTTPS, no debe considerarse seguro sobre HTTP plano. Habilite siempre SSL/TLS cuando utilice la autenticación básica.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Uso de múltiples credenciales</p>
<p>Puede configurar múltiples pares de nombre de usuario/contraseña para el acceso. Cada ajuste <code>AUTH_BASIC_USER</code> debe tener un ajuste <code>AUTH_BASIC_PASSWORD</code> correspondiente.</p>
</div>
<h3 id="configuraciones-de-ejemplo_2">Configuraciones de ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Protección de todo el sitio</label><label for="__tabbed_5_2">Protección de áreas específicas</label><label for="__tabbed_5_3">Múltiples usuarios</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Para proteger todo su sitio web con un único conjunto de credenciales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para proteger solo una ruta específica, como un panel de administración:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secure_password&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Admin</span><span class="nv"> </span><span class="s">Access</span><span class="nv"> </span><span class="s">Only&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para configurar múltiples usuarios con diferentes credenciales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_AUTH_BASIC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">AUTH_BASIC_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sitewide&quot;</span>
<span class="nt">AUTH_BASIC_TEXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Staff</span><span class="nv"> </span><span class="s">Area&quot;</span>

<span class="c1"># Primer usuario</span>
<span class="nt">AUTH_BASIC_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin_password&quot;</span>

<span class="c1"># Segundo usuario</span>
<span class="nt">AUTH_BASIC_USER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;editor_password&quot;</span>

<span class="c1"># Tercer usuario</span>
<span class="nt">AUTH_BASIC_USER_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer&quot;</span>
<span class="nt">AUTH_BASIC_PASSWORD_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;viewer_password&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup">Backup</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de copia de seguridad proporciona una solución de respaldo automatizada para proteger sus datos de BunkerWeb. Esta función garantiza la seguridad y disponibilidad de su importante base de datos mediante la creación de copias de seguridad periódicas según el cronograma que prefiera. Las copias de seguridad se almacenan en una ubicación designada y se pueden gestionar fácilmente a través de procesos automatizados y comandos manuales.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Su base de datos se respalda automáticamente según el cronograma que establezca (diario, semanal o mensual).</li>
<li>Las copias de seguridad se almacenan en un directorio específico de su sistema.</li>
<li>Las copias de seguridad antiguas se rotan automáticamente según su configuración de retención.</li>
<li>Puede crear copias de seguridad manualmente, enumerar las copias de seguridad existentes o restaurar desde una copia de seguridad en cualquier momento.</li>
<li>Antes de cualquier operación de restauración, el estado actual se respalda automáticamente como medida de seguridad.</li>
</ol>
<h3 id="como-usar_2">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de copia de seguridad:</p>
<ol>
<li><strong>Habilite la función:</strong> La función de copia de seguridad está habilitada por defecto. Si es necesario, puede controlarla con el ajuste <code>USE_BACKUP</code>.</li>
<li><strong>Configure el cronograma de copia de seguridad:</strong> Elija la frecuencia con la que deben realizarse las copias de seguridad estableciendo el parámetro <code>BACKUP_SCHEDULE</code>.</li>
<li><strong>Establezca la política de retención:</strong> Especifique cuántas copias de seguridad conservar utilizando el ajuste <code>BACKUP_ROTATION</code>.</li>
<li><strong>Defina la ubicación de almacenamiento:</strong> Elija dónde se almacenarán las copias de seguridad utilizando el ajuste <code>BACKUP_DIRECTORY</code>.</li>
<li><strong>Use los comandos de la CLI:</strong> Gestione las copias de seguridad manualmente con los comandos <code>bwcli plugin backup</code> cuando sea necesario.</li>
</ol>
<h3 id="ajustes-de-configuracion_2">Ajustes de configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Habilitar copia de seguridad:</strong> Establezca en <code>yes</code> para habilitar las copias de seguridad automáticas.</td>
</tr>
<tr>
<td><code>BACKUP_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>no</td>
<td><strong>Frecuencia de la copia de seguridad:</strong> Con qué frecuencia se realizan las copias de seguridad. Opciones: <code>daily</code>, <code>weekly</code> o <code>monthly</code>.</td>
</tr>
<tr>
<td><code>BACKUP_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>no</td>
<td><strong>Retención de copias de seguridad:</strong> El número de archivos de copia de seguridad que se deben conservar. Las copias de seguridad más antiguas que este número se eliminarán automáticamente.</td>
</tr>
<tr>
<td><code>BACKUP_DIRECTORY</code></td>
<td><code>/var/lib/bunkerweb/backups</code></td>
<td>global</td>
<td>no</td>
<td><strong>Ubicación de la copia de seguridad:</strong> El directorio donde se almacenarán los archivos de copia de seguridad.</td>
</tr>
</tbody>
</table>
<h3 id="interfaz-de-linea-de-comandos">Interfaz de línea de comandos</h3>
<p>El complemento de copia de seguridad proporciona varios comandos de la CLI para gestionar sus copias de seguridad:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Listar todas las copias de seguridad disponibles</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>list

<span class="c1"># Crear una copia de seguridad manual</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save

<span class="c1"># Crear una copia de seguridad en una ubicación personalizada</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>save<span class="w"> </span>--directory<span class="w"> </span>/ruta/a/ubicacion/personalizada

<span class="c1"># Restaurar desde la copia de seguridad más reciente</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore

<span class="c1"># Restaurar desde un archivo de copia de seguridad específico</span>
bwcli<span class="w"> </span>plugin<span class="w"> </span>backup<span class="w"> </span>restore<span class="w"> </span>/ruta/a/copia/de/seguridad/backup-sqlite-2023-08-15_12-34-56.zip
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">La seguridad es lo primero</p>
<p>Antes de cualquier operación de restauración, el complemento de copia de seguridad crea automáticamente una copia de seguridad del estado actual de su base de datos en una ubicación temporal. Esto proporciona una protección adicional en caso de que necesite revertir la operación de restauración.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Compatibilidad de la base de datos</p>
<p>El complemento de copia de seguridad es compatible con las bases de datos SQLite, MySQL/MariaDB y PostgreSQL. Las bases de datos de Oracle no son compatibles actualmente para las operaciones de copia de seguridad y restauración.</p>
</div>
<h3 id="configuraciones-de-ejemplo_3">Configuraciones de ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Copias de seguridad diarias con retención de 7 días</label><label for="__tabbed_6_2">Copias de seguridad semanales con retención extendida</label><label for="__tabbed_6_3">Copias de seguridad mensuales en una ubicación personalizada</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuración por defecto que crea copias de seguridad diarias y conserva los 7 archivos más recientes:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para copias de seguridad menos frecuentes con una retención más prolongada:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;weekly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/bunkerweb/backups&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para copias de seguridad mensuales almacenadas en una ubicación personalizada:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BACKUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>
<span class="nt">BACKUP_ROTATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24&quot;</span>
<span class="nt">BACKUP_DIRECTORY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/backup-drive/bunkerweb-backups&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="backup-s3-pro">Backup S3 <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Automatically backup your data to an S3 bucket</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BACKUP_S3</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td>Enable or disable the S3 backup feature</td>
</tr>
<tr>
<td><code>BACKUP_S3_SCHEDULE</code></td>
<td><code>daily</code></td>
<td>global</td>
<td>no</td>
<td>The frequency of the backup</td>
</tr>
<tr>
<td><code>BACKUP_S3_ROTATION</code></td>
<td><code>7</code></td>
<td>global</td>
<td>no</td>
<td>The number of backups to keep</td>
</tr>
<tr>
<td><code>BACKUP_S3_ENDPOINT</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The S3 endpoint</td>
</tr>
<tr>
<td><code>BACKUP_S3_BUCKET</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The S3 bucket</td>
</tr>
<tr>
<td><code>BACKUP_S3_DIR</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The S3 directory</td>
</tr>
<tr>
<td><code>BACKUP_S3_REGION</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The S3 region</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_ID</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The S3 access key ID</td>
</tr>
<tr>
<td><code>BACKUP_S3_ACCESS_KEY_SECRET</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The S3 access key secret</td>
</tr>
<tr>
<td><code>BACKUP_S3_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>global</td>
<td>no</td>
<td>The compression level of the backup zip file</td>
</tr>
</tbody>
</table>
<h2 id="bad-behavior">Bad behavior</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de Mal Comportamiento protege su sitio web al detectar y bloquear automáticamente las direcciones IP que generan demasiados errores o códigos de estado HTTP "malos" dentro de un período de tiempo específico. Esto ayuda a defenderse contra ataques de fuerza bruta, raspadores web, escáneres de vulnerabilidades y otras actividades maliciosas que podrían generar numerosas respuestas de error.</p>
<p>Los atacantes a menudo generan códigos de estado HTTP "sospechosos" al sondear o explotar vulnerabilidades, códigos que un usuario típico es poco probable que active en un período de tiempo determinado. Al detectar este comportamiento, BunkerWeb puede bloquear automáticamente la dirección IP infractora, obligando al atacante a usar una nueva dirección IP para continuar sus intentos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>El complemento supervisa las respuestas HTTP de su sitio.</li>
<li>Cuando un visitante recibe un código de estado HTTP "malo" (como 400, 401, 403, 404, etc.), el contador para esa dirección IP se incrementa.</li>
<li>Si una dirección IP excede el umbral configurado de códigos de estado malos dentro del período de tiempo especificado, la IP se bloquea automáticamente.</li>
<li>Las IP bloqueadas pueden ser bloqueadas a nivel de servicio (solo para el sitio específico) o globalmente (en todos los sitios), dependiendo de su configuración.</li>
<li>Los bloqueos expiran automáticamente después de la duración de bloqueo configurada, o permanecen permanentes si se configuran con <code>0</code>.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Beneficios clave</p>
<ol>
<li><strong>Protección automática:</strong> Detecta y bloquea clientes potencialmente maliciosos sin requerir intervención manual.</li>
<li><strong>Reglas personalizables:</strong> Ajuste con precisión lo que constituye un "mal comportamiento" según sus necesidades específicas.</li>
<li><strong>Conservación de recursos:</strong> Evita que los actores maliciosos consuman recursos del servidor con repetidas solicitudes no válidas.</li>
<li><strong>Ámbito flexible:</strong> Elija si los bloqueos deben aplicarse solo al servicio actual o globalmente a todos los servicios.</li>
<li><strong>Control de la duración del bloqueo:</strong> Establezca bloqueos temporales que expiran automáticamente después de la duración configurada, o bloqueos permanentes que permanecen hasta que se eliminan manualmente.</li>
</ol>
</div>
<h3 id="como-usar_3">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de Mal Comportamiento:</p>
<ol>
<li><strong>Habilite la función:</strong> La función de Mal Comportamiento está habilitada por defecto. Si es necesario, puede controlarla con la configuración <code>USE_BAD_BEHAVIOR</code>.</li>
<li><strong>Configure los códigos de estado:</strong> Defina qué códigos de estado HTTP deben considerarse "malos" utilizando la configuración <code>BAD_BEHAVIOR_STATUS_CODES</code>.</li>
<li><strong>Establezca los valores de umbral:</strong> Determine cuántas respuestas "malas" deben desencadenar un bloqueo utilizando la configuración <code>BAD_BEHAVIOR_THRESHOLD</code>.</li>
<li><strong>Configure los períodos de tiempo:</strong> Especifique la duración para contar las respuestas malas y la duración del bloqueo utilizando las configuraciones <code>BAD_BEHAVIOR_COUNT_TIME</code> y <code>BAD_BEHAVIOR_BAN_TIME</code>.</li>
<li><strong>Elija el ámbito del bloqueo:</strong> Decida si los bloqueos deben aplicarse solo al servicio actual o globalmente a todos los servicios utilizando la configuración <code>BAD_BEHAVIOR_BAN_SCOPE</code>.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Modo Stream</p>
<p>En <strong>modo stream</strong>, solo el código de estado <code>444</code> se considera "malo" y activará este comportamiento.</p>
</div>
<h3 id="ajustes-de-configuracion_3">Ajustes de configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BAD_BEHAVIOR</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Mal Comportamiento:</strong> Establezca en <code>yes</code> para habilitar la función de detección y bloqueo de mal comportamiento.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_STATUS_CODES</code></td>
<td><code>400 401 403 404 405 429 444</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Códigos de estado malos:</strong> Lista de códigos de estado HTTP que se contarán como comportamiento "malo" cuando se devuelvan a un cliente.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_THRESHOLD</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Umbral:</strong> El número de códigos de estado "malos" que una IP puede generar dentro del período de conteo antes de ser bloqueada.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_COUNT_TIME</code></td>
<td><code>60</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Período de conteo:</strong> La ventana de tiempo (en segundos) durante la cual se cuentan los códigos de estado malos para alcanzar el umbral.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_TIME</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Duración del bloqueo:</strong> Cuánto tiempo (en segundos) permanecerá bloqueada una IP después de exceder el umbral. El valor por defecto es de 24 horas (86400 segundos). Establezca en <code>0</code> para bloqueos permanentes que nunca expiran.</td>
</tr>
<tr>
<td><code>BAD_BEHAVIOR_BAN_SCOPE</code></td>
<td><code>service</code></td>
<td>global</td>
<td>no</td>
<td><strong>Ámbito del bloqueo:</strong> Determina si los bloqueos se aplican solo al servicio actual (<code>service</code>) o a todos los servicios (<code>global</code>).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Falsos positivos</p>
<p>Tenga cuidado al establecer el umbral y el tiempo de conteo. Establecer estos valores demasiado bajos puede bloquear inadvertidamente a usuarios legítimos que encuentren errores mientras navegan por su sitio.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Ajuste de su configuración</p>
<p>Comience con configuraciones conservadoras (umbral más alto, tiempo de bloqueo más corto) y ajústelas según sus necesidades específicas y patrones de tráfico. Supervise sus registros para asegurarse de que los usuarios legítimos no sean bloqueados por error.</p>
</div>
<h3 id="configuraciones-de-ejemplo_4">Configuraciones de ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Configuración por defecto</label><label for="__tabbed_7_2">Configuración estricta</label><label for="__tabbed_7_3">Configuración permisiva</label><label for="__tabbed_7_4">Configuración de bloqueo permanente</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>La configuración por defecto proporciona un enfoque equilibrado adecuado para la mayoría de los sitios web:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para aplicaciones de alta seguridad donde se desea ser más agresivo al bloquear amenazas potenciales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span><span class="w">  </span><span class="c1"># 7 días</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="c1"># Bloquear en todos los servicios</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para sitios con alto tráfico legítimo donde se desea evitar falsos positivos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">429&quot;</span><span class="w">  </span><span class="c1"># Solo contar no autorizados, prohibidos y con límite de velocidad</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span><span class="w">  </span><span class="c1"># 1 hora</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;service&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para escenarios donde desea que los atacantes detectados sean bloqueados permanentemente hasta que se desbloqueen manualmente:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BAD_BEHAVIOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BAD_BEHAVIOR_STATUS_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">444&quot;</span>
<span class="nt">BAD_BEHAVIOR_THRESHOLD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">BAD_BEHAVIOR_COUNT_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">BAD_BEHAVIOR_BAN_TIME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="w">  </span><span class="c1"># Bloqueo permanente (nunca expira)</span>
<span class="nt">BAD_BEHAVIOR_BAN_SCOPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global&quot;</span><span class="w"> </span><span class="c1"># Bloquear en todos los servicios</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="blacklist">Blacklist</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de Lista Negra proporciona una protección robusta para su sitio web al bloquear el acceso basado en varios atributos del cliente. Esta función defiende contra entidades maliciosas conocidas, escáneres y visitantes sospechosos al denegar el acceso basado en direcciones IP, redes, entradas de DNS inverso, ASN, agentes de usuario y patrones de URI específicos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>El complemento comprueba las solicitudes entrantes contra múltiples criterios de la lista negra (direcciones IP, redes, rDNS, ASN, User-Agent o patrones de URI).</li>
<li>Las listas negras se pueden especificar directamente en su configuración o cargar desde URL externas.</li>
<li>Si un visitante coincide con alguna regla de la lista negra (y no coincide con ninguna regla de omisión), se le deniega el acceso.</li>
<li>Las listas negras se actualizan automáticamente en un horario regular desde las URL configuradas.</li>
<li>Puede personalizar exactamente qué criterios se comprueban y se omiten según sus necesidades de seguridad específicas.</li>
</ol>
<h3 id="como-usar_4">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Lista Negra:</p>
<ol>
<li><strong>Habilite la función:</strong> La función de Lista Negra está habilitada por defecto. Si es necesario, puede controlarla con el ajuste <code>USE_BLACKLIST</code>.</li>
<li><strong>Configure las reglas de bloqueo:</strong> Defina qué IP, redes, patrones de rDNS, ASN, User-Agents o URI deben ser bloqueados.</li>
<li><strong>Configure las reglas de omisión:</strong> Especifique cualquier excepción que deba omitir las comprobaciones de la lista negra.</li>
<li><strong>Añada fuentes externas:</strong> Configure las URL para descargar y actualizar automáticamente los datos de la lista negra.</li>
<li><strong>Supervise la eficacia:</strong> Consulte la <a href="../web-ui/">interfaz de usuario web</a> para ver las estadísticas de las solicitudes bloqueadas.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">modo stream</p>
<p>Cuando se utiliza el modo stream, solo se realizarán comprobaciones de IP, rDNS y ASN.</p>
</div>
<h3 id="ajustes-de-configuracion_4">Ajustes de configuración</h3>
<p><strong>General</strong></p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BLACKLIST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Lista Negra:</strong> Establezca en <code>yes</code> para habilitar la función de lista negra.</td>
</tr>
<tr>
<td><code>BLACKLIST_COMMUNITY_LISTS</code></td>
<td><code>ip:danmeuk-tor-exit ua:mitchellkrogza-bad-user-agents</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Listas Negras de la Comunidad:</strong> Seleccione listas negras preconfiguradas mantenidas por la comunidad para incluirlas en el bloqueo.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="8:6"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><input id="__tabbed_8_4" name="__tabbed_8" type="radio" /><input id="__tabbed_8_5" name="__tabbed_8" type="radio" /><input id="__tabbed_8_6" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Listas Negras de la Comunidad</label><label for="__tabbed_8_2">Dirección IP</label><label for="__tabbed_8_3">DNS Inverso</label><label for="__tabbed_8_4">ASN</label><label for="__tabbed_8_5">Agente de Usuario</label><label for="__tabbed_8_6">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Le permite añadir rápidamente listas negras bien mantenidas y de origen comunitario sin tener que configurar manualmente las URL.</p>
<p>El ajuste <code>BLACKLIST_COMMUNITY_LISTS</code> le permite seleccionar de fuentes de listas negras curadas. Las opciones disponibles incluyen:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Descripción</th>
<th>Fuente</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ip:laurent-minne-data-shield-aggressive</code></td>
<td>Lista de bloqueo de IPv4 de Data-Shield. DST = Europa</td>
<td></td>
</tr>
<tr>
<td><code>https://raw.githubusercontent.com/duggytuxy/Data-Shield_IPv4_Blocklist/refs/heads/main/prod_data-shield_ipv4_blocklist.txt</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ip:danmeuk-tor-exit</code></td>
<td>IP de nodos de salida de Tor (dan.me.uk)</td>
<td><code>https://www.dan.me.uk/torlist/?exit</code></td>
</tr>
<tr>
<td><code>ua:mitchellkrogza-bad-user-agents</code></td>
<td>Nginx Block Bad Bots, Spam Referrer Blocker, Vulnerability Scanners, User-Agents, Malware, Adware, Ransomware, Malicious Sites, con anti-DDOS, Wordpress Theme Detector Blocking y Fail2Ban Jail para infractores reincidentes</td>
<td><code>https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list</code></td>
</tr>
</tbody>
</table>
<p><strong>Configuración:</strong> Especifique múltiples listas separadas por espacios. Por ejemplo:
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Comunidad vs Configuración Manual</p>
<p>Las listas negras de la comunidad proporcionan una forma conveniente de empezar con fuentes de listas negras probadas. Puede usarlas junto con configuraciones de URL manuales para una máxima flexibilidad.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Bloquea a los visitantes según su dirección IP o red.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Negra de IP:</strong> Lista de direcciones IP o redes (notación CIDR) a bloquear, separadas por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de IP:</strong> Lista de direcciones IP o redes que deben omitir las comprobaciones de la lista negra de IP.</td>
</tr>
<tr>
<td><code>BLACKLIST_IP_URLS</code></td>
<td><code>https://www.dan.me.uk/torlist/?exit</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista Negra de IP:</strong> Lista de URL que contienen direcciones IP o redes a bloquear, separadas por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista de Omisión de IP:</strong> Lista de URL que contienen direcciones IP o redes a omitir.</td>
</tr>
</tbody>
</table>
<p>El ajuste por defecto de <code>BLACKLIST_IP_URLS</code> incluye una URL que proporciona una <strong>lista de nodos de salida de Tor conocidos</strong>. Esta es una fuente común de tráfico malicioso y es un buen punto de partida para muchos sitios.</p>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Bloquea a los visitantes según su nombre de dominio inverso. Esto es útil para bloquear escáneres y rastreadores conocidos basados en los dominios de su organización.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_RDNS</code></td>
<td><code>.shodan.io .censys.io</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Negra de rDNS:</strong> Lista de sufijos de DNS inverso a bloquear, separados por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Solo Global para rDNS:</strong> Solo realizar comprobaciones de rDNS en direcciones IP globales cuando se establece en <code>yes</code>.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de rDNS:</strong> Lista de sufijos de DNS inverso que deben omitir las comprobaciones de la lista negra de rDNS.</td>
</tr>
<tr>
<td><code>BLACKLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista Negra de rDNS:</strong> Lista de URL que contienen sufijos de DNS inverso a bloquear, separadas por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista de Omisión de rDNS:</strong> Lista de URL que contienen sufijos de DNS inverso a omitir.</td>
</tr>
</tbody>
</table>
<p>El ajuste por defecto de <code>BLACKLIST_RDNS</code> incluye dominios de escáneres comunes como <strong>Shodan</strong> y <strong>Censys</strong>. Estos son a menudo utilizados por investigadores de seguridad y escáneres para identificar sitios vulnerables.</p>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Bloquea a los visitantes de proveedores de red específicos. Los ASN son como los códigos postales de Internet: identifican a qué proveedor u organización pertenece una IP.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Negra de ASN:</strong> Lista de Números de Sistema Autónomo a bloquear, separados por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de ASN:</strong> Lista de ASN que deben omitir las comprobaciones de la lista negra de ASN.</td>
</tr>
<tr>
<td><code>BLACKLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista Negra de ASN:</strong> Lista de URL que contienen ASN a bloquear, separadas por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista de Omisión de ASN:</strong> Lista de URL que contienen ASN a omitir.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Bloquea a los visitantes según el navegador o la herramienta que dicen estar usando. Esto es efectivo contra los bots que se identifican honestamente (como "ScannerBot" o "WebHarvestTool").</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Negra de User-Agent:</strong> Lista de patrones de User-Agent (expresión regular PCRE) a bloquear, separados por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de User-Agent:</strong> Lista de patrones de User-Agent que deben omitir las comprobaciones de la lista negra de User-Agent.</td>
</tr>
<tr>
<td><code>BLACKLIST_USER_AGENT_URLS</code></td>
<td><code>https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista Negra de User-Agent:</strong> Lista de URL que contienen patrones de User-Agent a bloquear.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista de Omisión de User-Agent:</strong> Lista de URL que contienen patrones de User-Agent a omitir.</td>
</tr>
</tbody>
</table>
<p>El ajuste por defecto de <code>BLACKLIST_USER_AGENT_URLS</code> incluye una URL que proporciona una <strong>lista de agentes de usuario maliciosos conocidos</strong>. Estos son a menudo utilizados por bots y escáneres maliciosos para identificar sitios vulnerables.</p>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Bloquea las solicitudes a URL específicas en su sitio. Esto es útil para bloquear intentos de acceso a páginas de administración, formularios de inicio de sesión u otras áreas sensibles que podrían ser objetivo de ataques.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BLACKLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Negra de URI:</strong> Lista de patrones de URI (expresión regular PCRE) a bloquear, separados por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de URI:</strong> Lista de patrones de URI que deben omitir las comprobaciones de la lista negra de URI.</td>
</tr>
<tr>
<td><code>BLACKLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista Negra de URI:</strong> Lista de URL que contienen patrones de URI a bloquear, separadas por espacios.</td>
</tr>
<tr>
<td><code>BLACKLIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista de Omisión de URI:</strong> Lista de URL que contienen patrones de URI a omitir.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Soporte de Formato de URL</p>
<p>Todos los ajustes <code>*_URLS</code> admiten URL HTTP/HTTPS así como rutas de archivos locales usando el prefijo <code>file:///</code>. Se admite la autenticación básica usando el formato <code>http://usuario:contraseña@url</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Actualizaciones Regulares</p>
<p>Las listas negras de las URL se descargan y actualizan automáticamente cada hora para asegurar que su protección se mantenga actualizada contra las últimas amenazas.</p>
</div>
<h3 id="configuraciones-de-ejemplo_5">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Protección Básica de IP y User-Agent</label><label for="__tabbed_9_2">Protección Avanzada con Reglas Personalizadas</label><label for="__tabbed_9_3">Usando Archivos Locales</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que bloquea los nodos de salida de Tor conocidos y los agentes de usuario maliciosos comunes usando listas negras de la comunidad:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ip:danmeuk-tor-exit</span><span class="nv"> </span><span class="s">ua:mitchellkrogza-bad-user-agents&quot;</span>
</code></pre></div>
<p>Alternativamente, puede usar la configuración manual de URL:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración más completa con entradas de lista negra personalizadas y excepciones:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Entradas de lista negra personalizadas</span>
<span class="nt">BLACKLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.100</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">BLACKLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.shodan.io</span><span class="nv"> </span><span class="s">.censys.io</span><span class="nv"> </span><span class="s">.scanner.com&quot;</span>
<span class="nt">BLACKLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16509</span><span class="nv"> </span><span class="s">14618&quot;</span><span class="w">  </span><span class="c1"># ASN de AWS y Amazon</span>
<span class="nt">BLACKLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)SemrushBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)AhrefsBot(?:\b)&quot;</span>
<span class="nt">BLACKLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/wp-login</span><span class="err">\</span><span class="s">.php$</span><span class="nv"> </span><span class="s">^/administrator/&quot;</span>

<span class="c1"># Reglas de omisión personalizadas</span>
<span class="nt">BLACKLIST_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.200</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>

<span class="c1"># Fuentes de listas negras externas</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.dan.me.uk/torlist/?exit</span><span class="nv"> </span><span class="s">https://www.spamhaus.org/drop/drop.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/mitchellkrogza/nginx-ultimate-bad-bot-blocker/master/_generator_lists/bad-user-agents.list&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración usando archivos locales para las listas negras:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BLACKLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BLACKLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/ip-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/rdns-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/asn-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/user-agent-blacklist.txt&quot;</span>
<span class="nt">BLACKLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/uri-blacklist.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="brotli">Brotli</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento Brotli permite la compresión eficiente de las respuestas HTTP utilizando el algoritmo Brotli. Esta función ayuda a reducir el uso de ancho de banda y a mejorar los tiempos de carga de la página al comprimir el contenido web antes de que se envíe al navegador del cliente.</p>
<p>En comparación con otros métodos de compresión como gzip, Brotli suele alcanzar mayores tasas de compresión, lo que se traduce en archivos de menor tamaño y una entrega de contenido más rápida.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente solicita contenido de su sitio web, BunkerWeb comprueba si el cliente admite la compresión Brotli.</li>
<li>Si es compatible, BunkerWeb comprime la respuesta utilizando el algoritmo Brotli en el nivel de compresión que haya configurado.</li>
<li>El contenido comprimido se envía al cliente con las cabeceras adecuadas que indican la compresión Brotli.</li>
<li>El navegador del cliente descomprime el contenido antes de mostrarlo al usuario.</li>
<li>Tanto el uso de ancho de banda como los tiempos de carga de la página se reducen, mejorando la experiencia general del usuario.</li>
</ol>
<h3 id="como-usar_5">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de compresión Brotli:</p>
<ol>
<li><strong>Habilite la función:</strong> La función Brotli está desactivada por defecto. Habilítela estableciendo el ajuste <code>USE_BROTLI</code> en <code>yes</code>.</li>
<li><strong>Configure los tipos MIME:</strong> Especifique qué tipos de contenido deben comprimirse utilizando el ajuste <code>BROTLI_TYPES</code>.</li>
<li><strong>Establezca el tamaño mínimo:</strong> Defina el tamaño mínimo de respuesta para la compresión con <code>BROTLI_MIN_LENGTH</code> para evitar comprimir archivos muy pequeños.</li>
<li><strong>Elija el nivel de compresión:</strong> Seleccione su equilibrio preferido entre velocidad y tasa de compresión con <code>BROTLI_COMP_LEVEL</code>.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, la compresión se realiza automáticamente para las respuestas que cumplan los requisitos.</li>
</ol>
<h3 id="ajustes-de-configuracion_5">Ajustes de configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BROTLI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Brotli:</strong> Establezca en <code>yes</code> para habilitar la compresión Brotli.</td>
</tr>
<tr>
<td><code>BROTLI_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tipos MIME:</strong> Lista de tipos de contenido que se comprimirán con Brotli.</td>
</tr>
<tr>
<td><code>BROTLI_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tamaño mínimo:</strong> El tamaño mínimo de respuesta (en bytes) para que se aplique la compresión Brotli.</td>
</tr>
<tr>
<td><code>BROTLI_COMP_LEVEL</code></td>
<td><code>6</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Nivel de compresión:</strong> Nivel de compresión de 0 (sin compresión) a 11 (compresión máxima). Los valores más altos consumen más CPU.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimización del nivel de compresión</p>
<p>El nivel de compresión por defecto (6) ofrece un buen equilibrio entre la tasa de compresión y el uso de la CPU. Para contenido estático o cuando los recursos de la CPU del servidor son abundantes, considere aumentarlo a 9-11 para una compresión máxima. Para contenido dinámico o cuando los recursos de la CPU son limitados, es posible que desee utilizar 4-5 para una compresión más rápida con una reducción de tamaño razonable.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Soporte de navegadores</p>
<p>Brotli es compatible con todos los navegadores modernos, incluidos Chrome, Firefox, Edge, Safari y Opera. Los navegadores más antiguos recibirán automáticamente el contenido sin comprimir, lo que garantiza la compatibilidad.</p>
</div>
<h3 id="configuraciones-de-ejemplo_6">Configuraciones de ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="10:3"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Configuración básica</label><label for="__tabbed_10_2">Compresión máxima</label><label for="__tabbed_10_3">Rendimiento equilibrado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración estándar que habilita Brotli con los ajustes por defecto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para un ahorro máximo de compresión:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;11&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que equilibra la tasa de compresión con el uso de la CPU:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BROTLI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BROTLI_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">BROTLI_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">BROTLI_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="bunkernet">BunkerNet</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento BunkerNet permite el intercambio colectivo de inteligencia sobre amenazas entre las instancias de BunkerWeb, creando una poderosa red de protección contra actores maliciosos. Al participar en BunkerNet, su instancia se beneficia y contribuye a una base de datos global de amenazas conocidas, mejorando la seguridad para toda la comunidad de BunkerWeb.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Su instancia de BunkerWeb se registra automáticamente con la API de BunkerNet para recibir un identificador único.</li>
<li>Cuando su instancia detecta y bloquea una dirección IP o comportamiento malicioso, informa anónimamente la amenaza a BunkerNet.</li>
<li>BunkerNet agrega la inteligencia sobre amenazas de todas las instancias participantes y distribuye la base de datos consolidada.</li>
<li>Su instancia descarga regularmente una base de datos actualizada de amenazas conocidas desde BunkerNet.</li>
<li>Esta inteligencia colectiva permite que su instancia bloquee proactivamente las direcciones IP que han exhibido comportamiento malicioso en otras instancias de BunkerWeb.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Beneficios clave</p>
<ol>
<li><strong>Defensa Colectiva:</strong> Aproveche los hallazgos de seguridad de miles de otras instancias de BunkerWeb a nivel mundial.</li>
<li><strong>Protección Proactiva:</strong> Bloquee a los actores maliciosos antes de que puedan atacar su sitio basándose en su comportamiento en otros lugares.</li>
<li><strong>Contribución a la Comunidad:</strong> Ayude a proteger a otros usuarios de BunkerWeb compartiendo datos de amenazas anónimos sobre los atacantes.</li>
<li><strong>Cero Configuración:</strong> Funciona desde el primer momento con valores predeterminados sensatos, requiriendo una configuración mínima.</li>
<li><strong>Enfoque en la Privacidad:</strong> Solo comparte la información de amenazas necesaria sin comprometer su privacidad ni la de sus usuarios.</li>
</ol>
</div>
<h3 id="como-usar_6">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función BunkerNet:</p>
<ol>
<li><strong>Habilite la función:</strong> La función BunkerNet está habilitada por defecto. Si es necesario, puede controlarla con la configuración <code>USE_BUNKERNET</code>.</li>
<li><strong>Registro inicial:</strong> En el primer arranque, su instancia se registrará automáticamente con la API de BunkerNet y recibirá un identificador único.</li>
<li><strong>Actualizaciones automáticas:</strong> Su instancia descargará automáticamente la última base de datos de amenazas en un horario regular.</li>
<li><strong>Informes automáticos:</strong> Cuando su instancia bloquee una dirección IP maliciosa, contribuirá automáticamente estos datos a la comunidad.</li>
<li><strong>Monitoree la protección:</strong> Consulte la <a href="../web-ui/">interfaz de usuario web</a> para ver estadísticas sobre las amenazas bloqueadas por la inteligencia de BunkerNet.</li>
</ol>
<h3 id="ajustes-de-configuracion_6">Ajustes de configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_BUNKERNET</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar BunkerNet:</strong> Establezca en <code>yes</code> para habilitar el intercambio de inteligencia sobre amenazas de BunkerNet.</td>
</tr>
<tr>
<td><code>BUNKERNET_SERVER</code></td>
<td><code>https://api.bunkerweb.io</code></td>
<td>global</td>
<td>no</td>
<td><strong>Servidor BunkerNet:</strong> La dirección del servidor de la API de BunkerNet para compartir inteligencia sobre amenazas.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Protección de Red</p>
<p>Cuando BunkerNet detecta que una dirección IP ha estado involucrada en actividades maliciosas en múltiples instancias de BunkerWeb, añade esa IP a una lista negra colectiva. Esto proporciona una capa de defensa proactiva, protegiendo su sitio de amenazas antes de que puedan atacarlo directamente.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Informes Anónimos</p>
<p>Al informar sobre amenazas a BunkerNet, su instancia solo comparte los datos necesarios para identificar la amenaza: la dirección IP, el motivo del bloqueo y datos contextuales mínimos. No se comparte información personal sobre sus usuarios ni detalles sensibles sobre su sitio.</p>
</div>
<h3 id="configuraciones-de-ejemplo_7">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="11:3"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Configuración por Defecto (Recomendada)</label><label for="__tabbed_11_2">Configuración Deshabilitada</label><label for="__tabbed_11_3">Configuración de Servidor Personalizado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>La configuración por defecto habilita BunkerNet con el servidor oficial de la API de BunkerWeb:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.bunkerweb.io&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Si prefiere no participar en la red de inteligencia sobre amenazas de BunkerNet:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para organizaciones que ejecutan su propio servidor BunkerNet (poco común):</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_BUNKERNET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">BUNKERNET_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://bunkernet.example.com&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="integracion-con-la-consola-de-crowdsec">Integración con la Consola de CrowdSec</h3>
<p>Si aún no está familiarizado con la integración de la Consola de CrowdSec, <a href="https://www.crowdsec.net/?utm_campaign=bunkerweb&amp;utm_source=doc">CrowdSec</a> aprovecha la inteligencia colectiva para combatir las ciberamenazas. Piense en ello como el "Waze de la ciberseguridad": cuando un servidor es atacado, otros sistemas en todo el mundo son alertados y protegidos de los mismos atacantes. Puede obtener más información al respecto <a href="https://www.crowdsec.net/about?utm_campaign=bunkerweb&amp;utm_source=blog">aquí</a>.</p>
<p>A través de nuestra asociación con CrowdSec, puede inscribir sus instancias de BunkerWeb en su <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">Consola de CrowdSec</a>. Esto significa que los ataques bloqueados por BunkerWeb serán visibles en su Consola de CrowdSec junto con los ataques bloqueados por los Motores de Seguridad de CrowdSec, brindándole una vista unificada de las amenazas.</p>
<p>Es importante destacar que no es necesario instalar CrowdSec para esta integración (aunque recomendamos encarecidamente probarlo con el <a href="https://github.com/bunkerity/bunkerweb-plugins/tree/main/crowdsec">complemento de CrowdSec para BunkerWeb</a> para mejorar aún más la seguridad de sus servicios web). Además, puede inscribir sus Motores de Seguridad de CrowdSec en la misma cuenta de la Consola para una sinergia aún mayor.</p>
<p><strong>Paso #1: Cree su cuenta en la Consola de CrowdSec</strong></p>
<p>Vaya a la <a href="https://app.crowdsec.net/signup?utm_source=external-blog&amp;utm_medium=cta&amp;utm_campaign=bunker-web-integration">Consola de CrowdSec</a> y regístrese si aún no tiene una cuenta. Una vez hecho esto, anote la clave de inscripción que se encuentra en "Security Engines" después de hacer clic en "Add Security Engine":</p>
<figure>
<p><img align="center" alt="Descripción general" src="../../assets/img/crowdity1.png" />
  </p>
<figcaption>Obtenga su clave de inscripción de la Consola de CrowdSec</figcaption>
</figure>
<p><strong>Paso #2: Obtenga su ID de BunkerNet</strong></p>
<p>Activar la función BunkerNet (habilitada por defecto) es obligatorio si desea inscribir su(s) instancia(s) de BunkerWeb en su Consola de CrowdSec. Habilítela estableciendo <code>USE_BUNKERNET</code> en <code>yes</code>.</p>
<p>Para Docker, obtenga su ID de BunkerNet usando:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>mi-bw-scheduler<span class="w"> </span>cat<span class="w"> </span>/var/cache/bunkerweb/bunkernet/instance.id
</code></pre></div>
<p>Para Linux, use:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/var/cache/bunkerweb/bunkernet/instance.id
</code></pre></div>
<p><strong>Paso #3: Inscriba su instancia usando el Panel</strong></p>
<p>Una vez que tenga su ID de BunkerNet y la clave de inscripción de la Consola de CrowdSec, <a href="https://panel.bunkerweb.io/store/bunkernet?utm_campaign=self&amp;utm_source=doc">solicite el producto gratuito "BunkerNet / CrowdSec" en el Panel</a>. Es posible que se le pida que cree una cuenta si aún no lo ha hecho.</p>
<p>Ahora puede seleccionar el servicio "BunkerNet / CrowdSec" y completar el formulario pegando su ID de BunkerNet y la clave de inscripción de la Consola de CrowdSec:</p>
<figure>
<p><img align="center" alt="Descripción general" src="../../assets/img/crowdity2.png" />
  </p>
<figcaption>Inscriba su instancia de BunkerWeb en la Consola de CrowdSec</figcaption>
</figure>
<p><strong>Paso #4: Acepte el nuevo motor de seguridad en la Consola</strong></p>
<p>Luego, vuelva a su Consola de CrowdSec y acepte el nuevo Motor de Seguridad:</p>
<figure>
<p><img align="center" alt="Descripción general" src="../../assets/img/crowdity3.png" />
  </p>
<figcaption>Acepte la inscripción en la Consola de CrowdSec</figcaption>
</figure>
<p><strong>¡Felicitaciones, su instancia de BunkerWeb ahora está inscrita en su Consola de CrowdSec!</strong></p>
<p>Consejo profesional: Al ver sus alertas, haga clic en la opción "columnas" y marque la casilla "contexto" para acceder a datos específicos de BunkerWeb.</p>
<figure>
<p><img align="center" alt="Descripción general" src="../../assets/img/crowdity4.png" />
  </p>
<figcaption>Datos de BunkerWeb mostrados en la columna de contexto</figcaption>
</figure>
<h2 id="cors">CORS</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento CORS habilita el Intercambio de Recursos de Origen Cruzado para su sitio web, permitiendo un acceso controlado a sus recursos desde diferentes dominios. Esta característica le ayuda a compartir su contenido de forma segura con sitios web de terceros de confianza, manteniendo la seguridad al definir explícitamente qué orígenes, métodos y encabezados están permitidos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un navegador realiza una solicitud de origen cruzado a su sitio web, primero envía una solicitud de comprobación previa (preflight) con el método <code>OPTIONS</code>.</li>
<li>BunkerWeb comprueba si el origen solicitante está permitido según su configuración.</li>
<li>Si está permitido, BunkerWeb responde con los encabezados CORS apropiados que definen lo que el sitio solicitante puede hacer.</li>
<li>Para los orígenes no permitidos, la solicitud puede ser denegada por completo o servida sin los encabezados CORS.</li>
<li>Se pueden configurar políticas adicionales de origen cruzado, como <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy">COEP</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy">COOP</a> y <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Resource-Policy">CORP</a>, para mejorar aún más la seguridad.</li>
</ol>
<h3 id="como-usar_7">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función CORS:</p>
<ol>
<li><strong>Habilite la función:</strong> La función CORS está deshabilitada por defecto. Establezca el ajuste <code>USE_CORS</code> en <code>yes</code> para habilitarla.</li>
<li><strong>Configure los orígenes permitidos:</strong> Especifique qué dominios pueden acceder a sus recursos utilizando el ajuste <code>CORS_ALLOW_ORIGIN</code>.</li>
<li><strong>Establezca los métodos permitidos:</strong> Defina qué métodos HTTP están permitidos para las solicitudes de origen cruzado con <code>CORS_ALLOW_METHODS</code>.</li>
<li><strong>Configure los encabezados permitidos:</strong> Especifique qué encabezados se pueden usar en las solicitudes con <code>CORS_ALLOW_HEADERS</code>.</li>
<li><strong>Controle las credenciales:</strong> Decida si las solicitudes de origen cruzado pueden incluir credenciales utilizando <code>CORS_ALLOW_CREDENTIALS</code>.</li>
</ol>
<h3 id="ajustes-de-configuracion_7">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CORS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar CORS:</strong> Establezca en <code>yes</code> para habilitar el Intercambio de Recursos de Origen Cruzado.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_ORIGIN</code></td>
<td><code>self</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Orígenes Permitidos:</strong> Expresión regular PCRE que representa los orígenes permitidos; use <code>*</code> para cualquier origen, o <code>self</code> solo para el mismo origen.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_METHODS</code></td>
<td><code>GET, POST, OPTIONS</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Métodos Permitidos:</strong> Métodos HTTP que se pueden usar en solicitudes de origen cruzado.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_HEADERS</code></td>
<td><code>DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Encabezados Permitidos:</strong> Encabezados HTTP que se pueden usar en solicitudes de origen cruzado.</td>
</tr>
<tr>
<td><code>CORS_ALLOW_CREDENTIALS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Permitir Credenciales:</strong> Establezca en <code>yes</code> para permitir credenciales (cookies, autenticación HTTP) en solicitudes CORS.</td>
</tr>
<tr>
<td><code>CORS_EXPOSE_HEADERS</code></td>
<td><code>Content-Length,Content-Range</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Encabezados Expuestos:</strong> Encabezados HTTP a los que los navegadores pueden acceder desde respuestas de origen cruzado.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_OPENER_POLICY</code></td>
<td><code>same-origin</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Cross-Origin-Opener-Policy:</strong> Controla la comunicación entre contextos de navegación.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_EMBEDDER_POLICY</code></td>
<td><code>require-corp</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Cross-Origin-Embedder-Policy:</strong> Controla si un documento puede cargar recursos de otros orígenes.</td>
</tr>
<tr>
<td><code>CROSS_ORIGIN_RESOURCE_POLICY</code></td>
<td><code>same-site</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Cross-Origin-Resource-Policy:</strong> Controla qué sitios web pueden incrustar sus recursos.</td>
</tr>
<tr>
<td><code>CORS_MAX_AGE</code></td>
<td><code>86400</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Duración de la Caché de Preflight:</strong> Cuánto tiempo (en segundos) los navegadores deben almacenar en caché la respuesta de preflight.</td>
</tr>
<tr>
<td><code>CORS_DENY_REQUEST</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Denegar Orígenes No Autorizados:</strong> Cuando es <code>yes</code>, las solicitudes de orígenes no autorizados se deniegan con un código de error.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimizando las Solicitudes de Preflight</p>
<p>El ajuste <code>CORS_MAX_AGE</code> determina cuánto tiempo los navegadores almacenarán en caché los resultados de una solicitud de preflight. Establecer esto en un valor más alto (como el predeterminado de 86400 segundos/24 horas) reduce el número de solicitudes de preflight, mejorando el rendimiento para los recursos a los que se accede con frecuencia.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Seguridad</p>
<p>Tenga cuidado al establecer <code>CORS_ALLOW_ORIGIN</code> en <code>*</code> (todos los orígenes) o <code>CORS_ALLOW_CREDENTIALS</code> en <code>yes</code> porque estas configuraciones pueden introducir riesgos de seguridad si no se gestionan adecuadamente. Generalmente es más seguro enumerar explícitamente los orígenes de confianza y limitar los métodos y encabezados permitidos.</p>
</div>
<h3 id="configuraciones-de-ejemplo_8">Configuraciones de Ejemplo</h3>
<p>Aquí hay ejemplos de posibles valores para el ajuste <code>CORS_ALLOW_ORIGIN</code>, junto con su comportamiento:</p>
<ul>
<li><strong><code>*</code></strong>: Permite solicitudes de todos los orígenes.</li>
<li><strong><code>self</code></strong>: Permite automáticamente solicitudes del mismo origen que el <code>server_name</code> configurado.</li>
<li><strong><code>^https://www\.example\.com$</code></strong>: Permite solicitudes solo de <code>https://www.example.com</code>.</li>
<li><strong><code>^https://.+\.example\.com$</code></strong>: Permite solicitudes de cualquier subdominio que termine en <code>.example.com</code>.</li>
<li><strong><code>^https://(www\.example1\.com|www\.example2\.com)$</code></strong>: Permite solicitudes de <code>https://www.example1.com</code> o <code>https://www.example2.com</code>.</li>
<li><strong><code>^https?://www\.example\.com$</code></strong>: Permite solicitudes tanto de <code>https://www.example.com</code> como de <code>http://www.example.com</code>.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="12:5"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><input id="__tabbed_12_4" name="__tabbed_12" type="radio" /><input id="__tabbed_12_5" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Configuración Básica</label><label for="__tabbed_12_2">Configuración de API Pública</label><label for="__tabbed_12_3">Múltiples Dominios de Confianza</label><label for="__tabbed_12_4">Comodín de Subdominio</label><label for="__tabbed_12_5">Múltiples Patrones de Dominio</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que permite solicitudes de origen cruzado desde el mismo dominio:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;self&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para una API pública que necesita ser accesible desde cualquier origen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">X-API-Key&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para permitir múltiples dominios específicos con un único patrón de expresión regular PCRE:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(app|api|dashboard)\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Requested-With&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_EXPOSE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Length,</span><span class="nv"> </span><span class="s">Content-Range,</span><span class="nv"> </span><span class="s">X-RateLimit-Remaining&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que permite todos los subdominios de un dominio principal utilizando un patrón de expresión regular PCRE:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://.*\\.example\\.com$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que permite solicitudes de múltiples patrones de dominio con alternancia:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CORS_ALLOW_ORIGIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(.*\\.example\\.com|.*\\.trusted-partner\\.org|api\\.third-party\\.net)$&quot;</span>
<span class="nt">CORS_ALLOW_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
<span class="nt">CORS_ALLOW_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Custom-Header&quot;</span>
<span class="nt">CORS_ALLOW_CREDENTIALS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">CORS_MAX_AGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">CORS_DENY_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="client-cache">Client cache</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento de Caché del Cliente optimiza el rendimiento del sitio web al controlar cómo los navegadores almacenan en caché el contenido estático. Reduce el uso de ancho de banda, disminuye la carga del servidor y mejora los tiempos de carga de la página al indicar a los navegadores que almacenen y reutilicen activos estáticos —como imágenes, archivos CSS y JavaScript— localmente en lugar de solicitarlos en cada visita a la página.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando está habilitado, BunkerWeb agrega encabezados <code>Cache-Control</code> a las respuestas para archivos estáticos.</li>
<li>Estos encabezados le dicen a los navegadores por cuánto tiempo deben almacenar el contenido en caché localmente.</li>
<li>Para los archivos con extensiones específicas (como imágenes, CSS, JavaScript), BunkerWeb aplica la política de almacenamiento en caché configurada.</li>
<li>El soporte opcional de ETag proporciona un mecanismo de validación adicional para determinar si el contenido en caché todavía está actualizado.</li>
<li>Cuando los visitantes regresan a su sitio, sus navegadores pueden usar los archivos almacenados en caché localmente en lugar de descargarlos nuevamente, lo que resulta en tiempos de carga de página más rápidos.</li>
</ol>
<h3 id="como-usar_8">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Caché del Cliente:</p>
<ol>
<li><strong>Habilite la función:</strong> La función de Caché del Cliente está deshabilitada por defecto; establezca la configuración <code>USE_CLIENT_CACHE</code> en <code>yes</code> para habilitarla.</li>
<li><strong>Configure las extensiones de archivo:</strong> Especifique qué tipos de archivo deben almacenarse en caché utilizando la configuración <code>CLIENT_CACHE_EXTENSIONS</code>.</li>
<li><strong>Establezca las directivas de control de caché:</strong> Personalice cómo los clientes deben almacenar el contenido en caché utilizando la configuración <code>CLIENT_CACHE_CONTROL</code>.</li>
<li><strong>Configure el soporte de ETag:</strong> Decida si habilitar los ETags para validar la frescura de la caché con la configuración <code>CLIENT_CACHE_ETAG</code>.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, los encabezados de caché se aplican automáticamente a las respuestas elegibles.</li>
</ol>
<h3 id="ajustes-de-configuracion_8">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CLIENT_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Caché del Cliente:</strong> Establezca en <code>yes</code> para habilitar el almacenamiento en caché del lado del cliente de los archivos estáticos.</td>
</tr>
<tr>
<td><code>CLIENT_CACHE_EXTENSIONS</code></td>
<td><code>jpg                       | jpeg      | png      | bmp                                                                                                                                            | ico | svg | tif | css | js | otf | ttf | eot | woff | woff2</code></td>
<td>global</td>
<td>no</td>
<td><strong>Extensiones Cacheadas:</strong> Lista de extensiones de archivo (separadas por barras verticales) que deben ser almacenadas en caché por el cliente.</td>
</tr>
<tr>
<td><code>CLIENT_CACHE_CONTROL</code></td>
<td><code>public, max-age=15552000</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Encabezado Cache-Control:</strong> Valor para el encabezado HTTP Cache-Control para controlar el comportamiento del almacenamiento en caché.</td>
</tr>
<tr>
<td><code>CLIENT_CACHE_ETAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar ETags:</strong> Establezca en <code>yes</code> para enviar el encabezado HTTP ETag para los recursos estáticos.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimizando los Ajustes de Caché</p>
<p>Para contenido que se actualiza con frecuencia, considere usar valores de <code>max-age</code> más cortos. Para contenido que cambia raramente (como bibliotecas de JavaScript versionadas o logotipos), use tiempos de caché más largos. El valor por defecto de 15552000 segundos (180 días) es apropiado para la mayoría de los activos estáticos.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Comportamiento del Navegador</p>
<p>Diferentes navegadores implementan el almacenamiento en caché de manera ligeramente diferente, pero todos los navegadores modernos respetan las directivas estándar de <code>Cache-Control</code>. Los ETags proporcionan un mecanismo de validación adicional que ayuda a los navegadores a determinar si el contenido en caché sigue siendo válido.</p>
</div>
<h3 id="configuraciones-de-ejemplo_9">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="13:3"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><input id="__tabbed_13_3" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Configuración Básica</label><label for="__tabbed_13_2">Almacenamiento en Caché Agresivo</label><label for="__tabbed_13_3">Estrategia de Contenido Mixto</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que habilita el almacenamiento en caché para activos estáticos comunes:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|gif|css|js|svg|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=86400&quot;</span><span class="w">  </span><span class="c1"># 1 día</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para un almacenamiento en caché máximo, adecuada para sitios con contenido estático que se actualiza con poca frecuencia:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2|pdf|xml|txt&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=31536000,</span><span class="nv"> </span><span class="s">immutable&quot;</span><span class="w">  </span><span class="c1"># 1 año</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Para sitios con una mezcla de contenido actualizado con frecuencia y con poca frecuencia, considere usar el versionado de archivos en su aplicación y una configuración como esta:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CLIENT_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CLIENT_CACHE_EXTENSIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;jpg|jpeg|png|bmp|ico|svg|tif|gif|css|js|otf|ttf|eot|woff|woff2&quot;</span>
<span class="nt">CLIENT_CACHE_CONTROL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public,</span><span class="nv"> </span><span class="s">max-age=604800&quot;</span><span class="w">  </span><span class="c1"># 1 semana</span>
<span class="nt">CLIENT_CACHE_ETAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="country">Country</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de País habilita la funcionalidad de bloqueo geográfico para su sitio web, permitiéndole restringir el acceso según la ubicación geográfica de sus visitantes. Esta función le ayuda a cumplir con las regulaciones regionales, prevenir actividades fraudulentas a menudo asociadas con regiones de alto riesgo e implementar restricciones de contenido basadas en límites geográficos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un visitante accede a su sitio web, BunkerWeb determina su país basándose en su dirección IP.</li>
<li>Su configuración especifica una lista blanca (países permitidos) o una lista negra (países bloqueados).</li>
<li>Si ha configurado una lista blanca, solo los visitantes de los países de esa lista tendrán acceso.</li>
<li>Si ha configurado una lista negra, se denegará el acceso a los visitantes de los países de esa lista.</li>
<li>El resultado se almacena en caché para mejorar el rendimiento de los visitantes recurrentes de la misma dirección IP.</li>
</ol>
<h3 id="como-usar_9">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de País:</p>
<ol>
<li><strong>Defina su estrategia:</strong> Decida si desea utilizar un enfoque de lista blanca (permitir solo países específicos) o un enfoque de lista negra (bloquear países específicos).</li>
<li><strong>Configure los códigos de país:</strong> Añada los códigos de país ISO 3166-1 alfa-2 (códigos de dos letras como US, GB, FR) a la configuración <code>WHITELIST_COUNTRY</code> o <code>BLACKLIST_COUNTRY</code>.</li>
<li><strong>Aplique la configuración:</strong> Una vez configuradas, las restricciones basadas en el país se aplicarán a todos los visitantes de su sitio.</li>
<li><strong>Supervise la eficacia:</strong> Consulte la <a href="../web-ui/">interfaz de usuario web</a> para ver estadísticas sobre las solicitudes bloqueadas por país.</li>
</ol>
<h3 id="ajustes-de-configuracion_9">Ajustes de configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Blanca de Países:</strong> Lista de códigos de país (formato ISO 3166-1 alfa-2) separados por espacios. Solo se permiten estos países.</td>
</tr>
<tr>
<td><code>BLACKLIST_COUNTRY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Negra de Países:</strong> Lista de códigos de país (formato ISO 3166-1 alfa-2) separados por espacios. Estos países están bloqueados.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Lista Blanca vs. Lista Negra</p>
<p>Elija el enfoque que mejor se adapte a sus necesidades:</p>
<ul>
<li>Use la lista blanca cuando quiera restringir el acceso a un pequeño número de países.</li>
<li>Use la lista negra cuando quiera bloquear el acceso desde regiones problemáticas específicas mientras permite a todos los demás.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Regla de Precedencia</p>
<p>Si se configuran tanto la lista blanca como la lista negra, la lista blanca tiene prioridad. Esto significa que el sistema primero comprueba si un país está en la lista blanca; si no, se deniega el acceso independientemente de la configuración de la lista negra.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Detección de País</p>
<p>BunkerWeb utiliza la <a href="https://db-ip.com/db/download/ip-to-country-lite">base de datos mmdb lite de db-ip</a> para determinar el país de origen basándose en las direcciones IP.</p>
</div>
<h3 id="configuraciones-de-ejemplo_10">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="14:4"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><input id="__tabbed_14_4" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Solo Lista Blanca</label><label for="__tabbed_14_2">Solo Lista Negra</label><label for="__tabbed_14_3">Acceso Solo para la UE</label><label for="__tabbed_14_4">Bloqueo de Países de Alto Riesgo</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Permitir el acceso solo desde Estados Unidos, Canadá y el Reino Unido:</p>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;US</span><span class="nv"> </span><span class="s">CA</span><span class="nv"> </span><span class="s">GB&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Bloquear el acceso desde países específicos mientras se permite a todos los demás:</p>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Permitir el acceso solo desde los estados miembros de la Unión Europea:</p>
<div class="highlight"><pre><span></span><code><span class="nt">WHITELIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AT</span><span class="nv"> </span><span class="s">BE</span><span class="nv"> </span><span class="s">BG</span><span class="nv"> </span><span class="s">HR</span><span class="nv"> </span><span class="s">CY</span><span class="nv"> </span><span class="s">CZ</span><span class="nv"> </span><span class="s">DK</span><span class="nv"> </span><span class="s">EE</span><span class="nv"> </span><span class="s">FI</span><span class="nv"> </span><span class="s">FR</span><span class="nv"> </span><span class="s">DE</span><span class="nv"> </span><span class="s">GR</span><span class="nv"> </span><span class="s">HU</span><span class="nv"> </span><span class="s">IE</span><span class="nv"> </span><span class="s">IT</span><span class="nv"> </span><span class="s">LV</span><span class="nv"> </span><span class="s">LT</span><span class="nv"> </span><span class="s">LU</span><span class="nv"> </span><span class="s">MT</span><span class="nv"> </span><span class="s">NL</span><span class="nv"> </span><span class="s">PL</span><span class="nv"> </span><span class="s">PT</span><span class="nv"> </span><span class="s">RO</span><span class="nv"> </span><span class="s">SK</span><span class="nv"> </span><span class="s">SI</span><span class="nv"> </span><span class="s">ES</span><span class="nv"> </span><span class="s">SE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Bloquear el acceso desde países a menudo asociados con ciertas ciberamenazas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">BLACKLIST_COUNTRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RU</span><span class="nv"> </span><span class="s">CN</span><span class="nv"> </span><span class="s">KP</span><span class="nv"> </span><span class="s">IR</span><span class="nv"> </span><span class="s">SY&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="crowdsec">CrowdSec</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<figure>
<p><img align="center," alt="Descripción general" src="../../assets/img/crowdsec.svg" width="600" /></p>
</figure>
<p>El complemento CrowdSec integra BunkerWeb con el motor de seguridad CrowdSec, proporcionando una capa adicional de protección contra diversas ciberamenazas. Este complemento actúa como un bouncer de <a href="https://crowdsec.net/?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs">CrowdSec</a>, denegando solicitudes basadas en decisiones de la API de CrowdSec.</p>
<p>CrowdSec es un motor de seguridad moderno y de código abierto que detecta y bloquea direcciones IP maliciosas basándose en el análisis de comportamiento y la inteligencia colectiva de su comunidad. También puede configurar <a href="https://docs.crowdsec.net/docs/concepts?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">escenarios</a> para prohibir automáticamente direcciones IP basadas en comportamiento sospechoso, beneficiándose de una lista negra de origen colectivo.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>El motor de CrowdSec analiza los registros y detecta actividades sospechosas en su infraestructura.</li>
<li>Cuando se detecta una actividad maliciosa, CrowdSec crea una decisión para bloquear la dirección IP infractora.</li>
<li>BunkerWeb, actuando como un bouncer, consulta la API local de CrowdSec para obtener decisiones sobre las solicitudes entrantes.</li>
<li>Si la dirección IP de un cliente tiene una decisión de bloqueo activa, BunkerWeb deniega el acceso a los servicios protegidos.</li>
<li>Opcionalmente, el Componente de Seguridad de Aplicaciones puede realizar una inspección profunda de las solicitudes para una mayor seguridad.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Beneficios clave</p>
<ol>
<li><strong>Seguridad impulsada por la comunidad:</strong> Benefíciese de la inteligencia de amenazas compartida en toda la comunidad de usuarios de CrowdSec.</li>
<li><strong>Análisis de comportamiento:</strong> Detecte ataques sofisticados basados en patrones de comportamiento, no solo en firmas.</li>
<li><strong>Integración ligera:</strong> Impacto mínimo en el rendimiento de su instancia de BunkerWeb.</li>
<li><strong>Protección multinivel:</strong> Combine la defensa perimetral (bloqueo de IP) con la seguridad de aplicaciones para una protección en profundidad.</li>
</ol>
</div>
<h3 id="configuracion">Configuración</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Docker</label><label for="__tabbed_15_2">Linux</label><label for="__tabbed_15_3">Todo en uno</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Archivo de adquisición</strong></p>
<p>Necesitará ejecutar una instancia de CrowdSec y configurarla para analizar los registros de BunkerWeb. Dado que BunkerWeb se basa en NGINX, puede usar el valor <code>nginx</code> para el parámetro <code>type</code> en su archivo de adquisición (suponiendo que los registros de BunkerWeb se almacenan tal cual sin datos adicionales):</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
</code></pre></div>
<p><strong>Componente de Seguridad de Aplicaciones (<em>opcional</em>)</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p><strong>Syslog</strong></p>
<div class="highlight"><pre><span></span><code>@version: 4.8

source s_net {
    udp(
        ip(&quot;0.0.0.0&quot;)
    );
};

template t_imp {
    template(&quot;$MSG\n&quot;);
    template_escape(no);
};

destination d_file {
    file(&quot;/var/log/bunkerweb.log&quot; template(t_imp));
};

log {
    source(s_net);
    destination(d_file);
};
</code></pre></div>
<p><strong>Docker Compose</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">x-bw-env</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;bw-env</span>
<span class="w">  </span><span class="c1"># Usamos un ancla para evitar repetir la misma configuración para ambos servicios</span>
<span class="w">  </span><span class="nt">API_WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.0/8</span><span class="nv"> </span><span class="s">10.20.30.0/24&quot;</span><span class="w"> </span><span class="c1"># Asegúrese de establecer el rango de IP correcto para que el planificador pueda enviar la configuración a la instancia</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bunkerweb</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Este es el nombre que se utilizará para identificar la instancia en el Planificador</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb:testing-rc3</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:8080/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/tcp&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;443:8443/udp&quot;</span><span class="w"> </span><span class="c1"># Para soporte de QUIC / HTTP3</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span><span class="w"> </span><span class="c1"># Usamos el ancla para evitar repetir la misma configuración para todos los servicios</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">    </span><span class="nt">logging</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">syslog</span><span class="w"> </span><span class="c1"># Enviar registros a syslog</span>
<span class="w">      </span><span class="nt">options</span><span class="p">:</span>
<span class="w">        </span><span class="nt">syslog-address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;udp://10.20.30.254:514&quot;</span><span class="w"> </span><span class="c1"># La dirección IP del servicio syslog</span>

<span class="w">  </span><span class="nt">bw-scheduler</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bunkerity/bunkerweb-scheduler:testing-rc3</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*bw-env</span>
<span class="w">      </span><span class="nt">BUNKERWEB_INSTANCES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span><span class="w"> </span><span class="c1"># Asegúrese de establecer el nombre de instancia correcto</span>
<span class="w">      </span><span class="nt">DATABASE_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb+pymysql://bunkerweb:changeme@bw-db:3306/db&quot;</span><span class="w"> </span><span class="c1"># Recuerde establecer una contraseña más segura para la base de datos</span>
<span class="w">      </span><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nt">MULTISITE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span><span class="w"> </span><span class="c1"># Esta es la dirección de la API del contenedor de CrowdSec en la misma red</span>
<span class="w">      </span><span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span><span class="w"> </span><span class="c1"># Comente si no desea usar el Componente AppSec</span>
<span class="w">      </span><span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3cr3tb0unc3rk3y&quot;</span><span class="w"> </span><span class="c1"># Recuerde establecer una clave más segura para el bouncer</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-storage:/data</span><span class="w"> </span><span class="c1"># Se utiliza para persistir la caché y otros datos como las copias de seguridad</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb:11</span>
<span class="w">    </span><span class="c1"># Establecemos el tamaño máximo de paquete permitido para evitar problemas con consultas grandes</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--max-allowed-packet=67108864</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;db&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bunkerweb&quot;</span>
<span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changeme&quot;</span><span class="w"> </span><span class="c1"># Recuerde establecer una contraseña más segura para la base de datos</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unless-stopped&quot;</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>

<span class="w">  </span><span class="nt">crowdsec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/crowdsec:v1.7.0</span><span class="w"> </span><span class="c1"># Use la última versión pero siempre fije la versión para una mejor estabilidad/seguridad</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cs-data:/var/lib/crowdsec/data</span><span class="w"> </span><span class="c1"># Para persistir los datos de CrowdSec</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-logs:/var/log:ro</span><span class="w"> </span><span class="c1"># Los registros de BunkerWeb para que CrowdSec los analice</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./acquis.yaml:/etc/crowdsec/acquis.yaml</span><span class="w"> </span><span class="c1"># El archivo de adquisición para los registros de BunkerWeb</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./appsec.yaml:/etc/crowdsec/acquis.d/appsec.yaml</span><span class="w"> </span><span class="c1"># Comente si no desea usar el Componente AppSec</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">BOUNCER_KEY_bunkerweb</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3cr3tb0unc3rk3y&quot;</span><span class="w"> </span><span class="c1"># Recuerde establecer una clave más segura para el bouncer</span>
<span class="w">      </span><span class="nt">COLLECTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;crowdsecurity/nginx</span><span class="nv"> </span><span class="s">crowdsecurity/appsec-virtual-patching</span><span class="nv"> </span><span class="s">crowdsecurity/appsec-generic-rules&quot;</span>
<span class="w">      </span><span class="c1">#   COLLECTIONS: &quot;crowdsecurity/nginx&quot; # Si no desea usar el Componente AppSec, use esta línea en su lugar</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>

<span class="w">  </span><span class="nt">syslog</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">balabit/syslog-ng:4.9.0</span>
<span class="w">    </span><span class="nt">cap_add</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_BIND_SERVICE</span><span class="w">  </span><span class="c1"># Vincular a puertos bajos</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_BROADCAST</span><span class="w">  </span><span class="c1"># Enviar difusiones</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NET_RAW</span><span class="w">  </span><span class="c1"># Usar sockets sin procesar</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAC_READ_SEARCH</span><span class="w">  </span><span class="c1"># Leer archivos omitiendo permisos</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DAC_OVERRIDE</span><span class="w">  </span><span class="c1"># Anular permisos de archivo</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CHOWN</span><span class="w">  </span><span class="c1"># Cambiar propietario</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SYSLOG</span><span class="w">  </span><span class="c1"># Escribir en registros del sistema</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-logs:/var/log/bunkerweb</span><span class="w"> </span><span class="c1"># Este es el volumen utilizado para almacenar los registros</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./syslog-ng.conf:/etc/syslog-ng/syslog-ng.conf</span><span class="w"> </span><span class="c1"># Este es el archivo de configuración de syslog-ng</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ipv4_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.254</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-storage</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-logs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cs-data</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bw-universe</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-universe</span>
<span class="w">    </span><span class="nt">ipam</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.20.30.0/24</span><span class="w"> </span><span class="c1"># Asegúrese de establecer el rango de IP correcto para que el planificador pueda enviar la configuración a la instancia</span>
<span class="w">  </span><span class="nt">bw-services</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-services</span>
<span class="w">  </span><span class="nt">bw-db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bw-db</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Necesita instalar CrowdSec y configurarlo para analizar los registros de BunkerWeb. Siga la <a href="https://doc.crowdsec.net/docs/getting_started/install_crowdsec?utm_source=external-docs&amp;utm_medium=cta&amp;utm_campaign=bunker-web-docs#scenarios">documentación oficial</a>.</p>
<p>Para permitir que CrowdSec analice los registros de BunkerWeb, agregue las siguientes líneas a su archivo de adquisición ubicado en <code>/etc/crowdsec/acquis.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">filenames</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/access.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/error.log</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/bunkerweb/modsec_audit.log</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
</code></pre></div>
<p>Ahora, agregue su bouncer personalizado a la API de CrowdSec usando la herramienta <code>cscli</code>:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>bouncers<span class="w"> </span>add<span class="w"> </span>crowdsec-bunkerweb-bouncer/v1.6
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Clave de API</p>
<p>Guarde la clave generada por el comando <code>cscli</code>; la necesitará más tarde.</p>
</div>
<p>Luego reinicie el servicio de CrowdSec:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>Componente de Seguridad de Aplicaciones (<em>opcional</em>)</strong></p>
<p>Si desea usar el Componente AppSec, debe crear otro archivo de adquisición para él ubicado en <code>/etc/crowdsec/acquis.d/appsec.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">appsec_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crowdsecurity/appsec-default</span>
<span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
<span class="nt">listen_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:7422</span>
<span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">appsec</span>
</code></pre></div>
<p>También necesitará instalar las colecciones del Componente AppSec:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-virtual-patching
sudo<span class="w"> </span>cscli<span class="w"> </span>collections<span class="w"> </span>install<span class="w"> </span>crowdsecurity/appsec-generic-rules
</code></pre></div>
<p>Finalmente, reinicie el servicio de CrowdSec:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>crowdsec
</code></pre></div>
<p><strong>Ajustes</strong></p>
<p>Configure el complemento agregando los siguientes ajustes a su archivo de configuración de BunkerWeb:</p>
<div class="highlight"><pre><span></span><code>USE_CROWDSEC=yes
CROWDSEC_API=http://127.0.0.1:8080
CROWDSEC_API_KEY=&lt;La clave proporcionada por cscli&gt;
# Comente si no desea usar el Componente AppSec
CROWDSEC_APPSEC_URL=http://127.0.0.1:7422
</code></pre></div>
<p>Finalmente, recargue el servicio de BunkerWeb:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>reload<span class="w"> </span>bunkerweb
</code></pre></div>
</div>
<div class="tabbed-block">
<p>La imagen Docker Todo en Uno (AIO) de BunkerWeb viene con CrowdSec totalmente integrado. No necesita configurar una instancia de CrowdSec separada ni configurar manualmente los archivos de adquisición para los registros de BunkerWeb cuando usa el agente interno de CrowdSec.</p>
<p>Consulte la <a href="../integrations/#crowdsec-integration">documentación de integración de la Imagen Todo en Uno (AIO)</a>.</p>
</div>
</div>
</div>
<h3 id="ajustes-de-configuracion_10">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CROWDSEC</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar CrowdSec:</strong> Establezca en <code>yes</code> para habilitar el bouncer de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_API</code></td>
<td><code>http://crowdsec:8080</code></td>
<td>global</td>
<td>no</td>
<td><strong>URL de la API de CrowdSec:</strong> La dirección del servicio de la API Local de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_API_KEY</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Clave de API de CrowdSec:</strong> La clave de API para autenticarse con la API de CrowdSec, obtenida usando <code>cscli bouncers add</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_MODE</code></td>
<td><code>live</code></td>
<td>global</td>
<td>no</td>
<td><strong>Modo de Operación:</strong> <code>live</code> (consultar la API para cada solicitud) o <code>stream</code> (almacenar en caché periódicamente todas las decisiones).</td>
</tr>
<tr>
<td><code>CROWDSEC_ENABLE_INTERNAL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tráfico Interno:</strong> Establezca en <code>yes</code> para verificar el tráfico interno contra las decisiones de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_REQUEST_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de Espera de la Solicitud:</strong> Tiempo de espera en milisegundos para las solicitudes HTTP a la API Local de CrowdSec en modo <code>live</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_EXCLUDE_LOCATION</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Ubicaciones Excluidas:</strong> Lista de ubicaciones (URI) separadas por comas para excluir de las verificaciones de CrowdSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_CACHE_EXPIRATION</code></td>
<td><code>1</code></td>
<td>global</td>
<td>no</td>
<td><strong>Expiración de la Caché:</strong> El tiempo de expiración de la caché en segundos para las decisiones de IP en modo <code>live</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_UPDATE_FREQUENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>no</td>
<td><strong>Frecuencia de Actualización:</strong> Con qué frecuencia (en segundos) obtener decisiones nuevas/expiradas de la API de CrowdSec en modo <code>stream</code>.</td>
</tr>
</tbody>
</table>
<h4 id="ajustes-del-componente-de-seguridad-de-aplicaciones">Ajustes del Componente de Seguridad de Aplicaciones</h4>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CROWDSEC_APPSEC_URL</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>URL de AppSec:</strong> La URL del Componente de Seguridad de Aplicaciones de CrowdSec. Dejar vacío para deshabilitar AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_FAILURE_ACTION</code></td>
<td><code>passthrough</code></td>
<td>global</td>
<td>no</td>
<td><strong>Acción en Caso de Falla:</strong> Acción a tomar cuando AppSec devuelve un error. Puede ser <code>passthrough</code> o <code>deny</code>.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_CONNECT_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de Espera de Conexión:</strong> El tiempo de espera en milisegundos para conectarse al Componente AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SEND_TIMEOUT</code></td>
<td><code>100</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de Espera de Envío:</strong> El tiempo de espera en milisegundos para enviar datos al Componente AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_PROCESS_TIMEOUT</code></td>
<td><code>500</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de Espera de Procesamiento:</strong> El tiempo de espera en milisegundos para procesar la solicitud en el Componente AppSec.</td>
</tr>
<tr>
<td><code>CROWDSEC_ALWAYS_SEND_TO_APPSEC</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Enviar Siempre:</strong> Establezca en <code>yes</code> para enviar siempre las solicitudes a AppSec, incluso si hay una decisión a nivel de IP.</td>
</tr>
<tr>
<td><code>CROWDSEC_APPSEC_SSL_VERIFY</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Verificar SSL:</strong> Establezca en <code>yes</code> para verificar el certificado SSL del Componente AppSec.</td>
</tr>
</tbody>
</table>
<p>!!! info "Sobre los Modos de Operación" - <strong>Modo <code>live</code></strong> consulta la API de CrowdSec para cada solicitud entrante, proporcionando protección en tiempo real a costa de una mayor latencia. - <strong>Modo <code>stream</code></strong> descarga periódicamente todas las decisiones de la API de CrowdSec y las almacena en caché localmente, reduciendo la latencia con un ligero retraso en la aplicación de nuevas decisiones.</p>
<h3 id="configuraciones-de-ejemplo_11">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Configuración Básica</label><label for="__tabbed_16_2">Configuración Avanzada con AppSec</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Esta es una configuración simple para cuando CrowdSec se ejecuta en el mismo host:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tu-clave-de-api-aqui&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;live&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración más completa que incluye el Componente de Seguridad de Aplicaciones:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CROWDSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:8080&quot;</span>
<span class="nt">CROWDSEC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tu-clave-de-api-aqui&quot;</span>
<span class="nt">CROWDSEC_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stream&quot;</span>
<span class="nt">CROWDSEC_UPDATE_FREQUENCY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="nt">CROWDSEC_EXCLUDE_LOCATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/health,/metrics&quot;</span>

<span class="c1"># Configuración de AppSec</span>
<span class="nt">CROWDSEC_APPSEC_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://crowdsec:7422&quot;</span>
<span class="nt">CROWDSEC_APPSEC_FAILURE_ACTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deny&quot;</span>
<span class="nt">CROWDSEC_ALWAYS_SEND_TO_APPSEC</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CROWDSEC_APPSEC_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
<h1 id="configuracion-de-appsec">Configuración de AppSec</h1>
<p>CROWDSEC_APPSEC_URL: "http://crowdsec:7422"
CROWDSEC_APPSEC_FAILURE_ACTION: "deny"
CROWDSEC_ALWAYS_SEND_TO_APPSEC: "yes"
CROWDSEC_APPSEC_SSL_VERIFY: "yes"
```</p>
</div>
</div>
</div>
<h2 id="custom-ssl-certificate">Custom SSL certificate</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de certificado SSL personalizado le permite usar sus propios certificados SSL/TLS con BunkerWeb en lugar de los generados automáticamente. Esta función es particularmente útil si tiene certificados existentes de una Autoridad de Certificación (CA) de confianza, necesita usar certificados con configuraciones específicas o desea mantener una gestión de certificados consistente en toda su infraestructura.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Usted proporciona a BunkerWeb sus archivos de certificado y clave privada, ya sea especificando las rutas de los archivos o proporcionando los datos en formato PEM codificado en base64 o en texto plano.</li>
<li>BunkerWeb valida su certificado y clave para asegurarse de que estén formateados correctamente y sean utilizables.</li>
<li>Cuando se establece una conexión segura, BunkerWeb sirve su certificado personalizado en lugar del generado automáticamente.</li>
<li>BunkerWeb supervisa automáticamente la validez de su certificado y muestra advertencias si se acerca a su vencimiento.</li>
<li>Usted tiene control total sobre la gestión de certificados, lo que le permite usar certificados de cualquier emisor que prefiera.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Monitoreo Automático de Certificados</p>
<p>Cuando habilita SSL/TLS personalizado estableciendo <code>USE_CUSTOM_SSL</code> en <code>yes</code>, BunkerWeb monitorea automáticamente el certificado personalizado especificado en <code>CUSTOM_SSL_CERT</code>. Comprueba los cambios diariamente y recarga NGINX si se detecta alguna modificación, asegurando que el certificado más reciente esté siempre en uso.</p>
</div>
<h3 id="como-usar_10">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de certificado SSL personalizado:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_CUSTOM_SSL</code> en <code>yes</code> para habilitar el soporte de certificados personalizados.</li>
<li><strong>Elija un método:</strong> Decida si proporcionar los certificados a través de rutas de archivo o como datos codificados en base64/texto plano, y establezca la prioridad usando <code>CUSTOM_SSL_CERT_PRIORITY</code>.</li>
<li><strong>Proporcione los archivos de certificado:</strong> Si usa rutas de archivo, especifique las ubicaciones de sus archivos de certificado y clave privada.</li>
<li><strong>O proporcione los datos del certificado:</strong> Si usa datos, proporcione su certificado y clave como cadenas codificadas en base64 o en formato PEM de texto plano.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, BunkerWeb usa automáticamente sus certificados personalizados para todas las conexiones HTTPS.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Configuración en Modo Stream</p>
<p>Para el modo stream, debe configurar el ajuste <code>LISTEN_STREAM_PORT_SSL</code> para especificar el puerto de escucha SSL/TLS. Este paso es esencial para el correcto funcionamiento en modo stream.</p>
</div>
<h3 id="ajustes-de-configuracion_11">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_CUSTOM_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar SSL personalizado:</strong> Establezca en <code>yes</code> para usar su propio certificado en lugar del generado automáticamente.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_PRIORITY</code></td>
<td><code>file</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Prioridad del Certificado:</strong> Elija si priorizar el certificado de la ruta del archivo o de los datos base64 (<code>file</code> o <code>data</code>).</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Ruta del Certificado:</strong> Ruta completa a su archivo de certificado SSL o paquete de certificados.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Ruta de la Clave Privada:</strong> Ruta completa a su archivo de clave privada SSL.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_CERT_DATA</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Datos del Certificado:</strong> Su certificado codificado en formato base64 o como texto plano PEM.</td>
</tr>
<tr>
<td><code>CUSTOM_SSL_KEY_DATA</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Datos de la Clave Privada:</strong> Su clave privada codificada en formato base64 o como texto plano PEM.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Seguridad</p>
<p>Cuando use certificados personalizados, asegúrese de que su clave privada esté debidamente protegida y tenga los permisos adecuados. Los archivos deben ser legibles por el programador de BunkerWeb.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Formato del Certificado</p>
<p>BunkerWeb espera los certificados en formato PEM. Si su certificado está en un formato diferente, es posible que necesite convertirlo primero.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Cadenas de Certificados</p>
<p>Si su certificado incluye una cadena (intermediarios), debe proporcionar la cadena de certificados completa en el orden correcto, con su certificado primero, seguido de los certificados intermedios.</p>
</div>
<h3 id="configuraciones-de-ejemplo_12">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="17:4"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><input id="__tabbed_17_4" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Usando Rutas de Archivo</label><label for="__tabbed_17_2">Usando Datos Base64</label><label for="__tabbed_17_3">Usando Datos PEM de Texto Plano</label><label for="__tabbed_17_4">Configuración de Respaldo</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración que usa archivos de certificado y clave en el disco:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/ruta/a/su/certificado.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/ruta/a/su/clave-privada.pem&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que usa datos de certificado y clave codificados en base64:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...certificado</span><span class="nv"> </span><span class="s">codificado</span><span class="nv"> </span><span class="s">en</span><span class="nv"> </span><span class="s">base64...Cg==&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...clave</span><span class="nv"> </span><span class="s">codificada</span><span class="nv"> </span><span class="s">en</span><span class="nv"> </span><span class="s">base64...Cg==&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que usa datos de certificado y clave en texto plano en formato PEM:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN CERTIFICATE-----</span>
<span class="w">  </span><span class="no">MIIDdzCCAl+gAwIBAgIUJH...contenido del certificado...AAAA</span>
<span class="w">  </span><span class="no">-----END CERTIFICATE-----</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-----BEGIN PRIVATE KEY-----</span>
<span class="w">  </span><span class="no">MIIEvQIBADAN...contenido de la clave...AAAA</span>
<span class="w">  </span><span class="no">-----END PRIVATE KEY-----</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que prioriza los archivos pero recurre a los datos base64 si los archivos no están disponibles:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_CUSTOM_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_PRIORITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span>
<span class="nt">CUSTOM_SSL_CERT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/ruta/a/su/certificado.pem&quot;</span>
<span class="nt">CUSTOM_SSL_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/ruta/a/su/clave-privada.pem&quot;</span>
<span class="nt">CUSTOM_SSL_CERT_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR...certificado</span><span class="nv"> </span><span class="s">codificado</span><span class="nv"> </span><span class="s">en</span><span class="nv"> </span><span class="s">base64...Cg==&quot;</span>
<span class="nt">CUSTOM_SSL_KEY_DATA</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSEV...clave</span><span class="nv"> </span><span class="s">codificada</span><span class="nv"> </span><span class="s">en</span><span class="nv"> </span><span class="s">base64...Cg==&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="dnsbl">DNSBL</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento DNSBL (Domain Name System Blacklist) proporciona protección contra direcciones IP maliciosas conocidas al verificar las direcciones IP de los clientes contra servidores DNSBL externos. Esta función ayuda a proteger su sitio web contra el spam, las redes de bots y diversos tipos de ciberamenazas al aprovechar listas mantenidas por la comunidad de direcciones IP problemáticas.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente se conecta a su sitio web, BunkerWeb consulta los servidores DNSBL que ha elegido utilizando el protocolo DNS.</li>
<li>La verificación se realiza enviando una consulta de DNS inversa a cada servidor DNSBL con la dirección IP del cliente.</li>
<li>Si algún servidor DNSBL confirma que la dirección IP del cliente está listada como maliciosa, BunkerWeb prohibirá automáticamente al cliente, evitando que amenazas potenciales lleguen a su aplicación.</li>
<li>Los resultados se almacenan en caché para mejorar el rendimiento de los visitantes recurrentes de la misma dirección IP.</li>
<li>Las búsquedas se realizan de manera eficiente utilizando consultas asíncronas para minimizar el impacto en los tiempos de carga de la página.</li>
</ol>
<h3 id="como-usar_11">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función DNSBL:</p>
<ol>
<li><strong>Habilite la función:</strong> La función DNSBL está deshabilitada de forma predeterminada. Establezca la configuración <code>USE_DNSBL</code> en <code>yes</code> para habilitarla.</li>
<li><strong>Configure los servidores DNSBL:</strong> Agregue los nombres de dominio de los servicios DNSBL que desea usar a la configuración <code>DNSBL_LIST</code>.</li>
<li><strong>Aplique la configuración:</strong> Una vez configurado, BunkerWeb verificará automáticamente las conexiones entrantes contra los servidores DNSBL especificados.</li>
<li><strong>Supervise la eficacia:</strong> Consulte la <a href="../web-ui/">interfaz de usuario web</a> para ver las estadísticas de las solicitudes bloqueadas por las verificaciones de DNSBL.</li>
</ol>
<h3 id="ajustes-de-configuracion_12">Ajustes de Configuración</h3>
<p><strong>General</strong></p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_DNSBL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td>Habilitar DNSBL: establezca en <code>yes</code> para habilitar las verificaciones de DNSBL para las conexiones entrantes.</td>
</tr>
<tr>
<td><code>DNSBL_LIST</code></td>
<td><code>bl.blocklist.de sbl.spamhaus.org xbl.spamhaus.org</code></td>
<td>global</td>
<td>no</td>
<td>Servidores DNSBL: lista de dominios de servidores DNSBL para verificar, separados por espacios.</td>
</tr>
</tbody>
</table>
<p><strong>Listas de Omisión</strong></p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DNSBL_IGNORE_IP</code></td>
<td>``</td>
<td>multisite</td>
<td>yes</td>
<td>IPs/CIDRs separados por espacios para omitir las verificaciones de DNSBL (lista blanca).</td>
</tr>
<tr>
<td><code>DNSBL_IGNORE_IP_URLS</code></td>
<td>``</td>
<td>multisite</td>
<td>yes</td>
<td>URL separadas por espacios que proporcionan IPs/CIDRs para omitir. Admite los esquemas <code>http(s)://</code> y <code>file://</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Elección de Servidores DNSBL</p>
<p>Elija proveedores de DNSBL de buena reputación para minimizar los falsos positivos. La lista predeterminada incluye servicios bien establecidos que son adecuados para la mayoría de los sitios web:</p>
<ul>
<li><strong>bl.blocklist.de:</strong> Lista las IP que han sido detectadas atacando otros servidores.</li>
<li><strong>sbl.spamhaus.org:</strong> Se centra en fuentes de spam y otras actividades maliciosas.</li>
<li><strong>xbl.spamhaus.org:</strong> Apunta a sistemas infectados, como máquinas comprometidas o proxies abiertos.</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Cómo Funciona DNSBL</p>
<p>Los servidores DNSBL funcionan respondiendo a consultas DNS con formato especial. Cuando BunkerWeb verifica una dirección IP, invierte la IP y añade el nombre de dominio del DNSBL. Si la consulta DNS resultante devuelve una respuesta de "éxito", la IP se considera en la lista negra.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Rendimiento</p>
<p>Aunque BunkerWeb optimiza las búsquedas de DNSBL para el rendimiento, agregar un gran número de servidores DNSBL podría afectar potencialmente los tiempos de respuesta. Comience con unos pocos servidores DNSBL de buena reputación y supervise el rendimiento antes de agregar más.</p>
</div>
<h3 id="configuraciones-de-ejemplo_13">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="18:5"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><input id="__tabbed_18_3" name="__tabbed_18" type="radio" /><input id="__tabbed_18_4" name="__tabbed_18" type="radio" /><input id="__tabbed_18_5" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">Configuración Básica</label><label for="__tabbed_18_2">Configuración Mínima</label><label for="__tabbed_18_3">Excluyendo IPs de Confianza</label><label for="__tabbed_18_4">Usando URL Remotas</label><label for="__tabbed_18_5">Usando Archivos Locales</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que utiliza los servidores DNSBL predeterminados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bl.blocklist.de</span><span class="nv"> </span><span class="s">sbl.spamhaus.org</span><span class="nv"> </span><span class="s">xbl.spamhaus.org&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración mínima que se centra en los servicios DNSBL más fiables:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
</code></pre></div>
<p>Esta configuración utiliza solo:</p>
<ul>
<li><strong>zen.spamhaus.org</strong>: La lista combinada de Spamhaus a menudo se considera suficiente como una solución independiente debido a su amplia cobertura y reputación de precisión. Combina las listas SBL, XBL y PBL en una sola consulta, lo que la hace eficiente y completa.</li>
</ul>
</div>
<div class="tabbed-block">
<p>Puede excluir clientes específicos de las verificaciones de DNSBL utilizando valores estáticos y/o archivos remotos:</p>
<ul>
<li><code>DNSBL_IGNORE_IP</code>: Agregue IPs y rangos CIDR separados por espacios. Ejemplo: <code>192.0.2.10 203.0.113.0/24 2001:db8::/32</code>.</li>
<li><code>DNSBL_IGNORE_IP_URLS</code>: Proporcione URL cuyo contenido liste una IP/CIDR por línea. Los comentarios que comienzan con <code>#</code> o <code>;</code> se ignoran. Las entradas duplicadas se eliminan.</li>
</ul>
<p>Cuando la IP de un cliente entrante coincide con la lista de omisión, BunkerWeb omite las búsquedas de DNSBL y almacena en caché el resultado como "ok" para solicitudes posteriores más rápidas.</p>
</div>
<div class="tabbed-block">
<p>El trabajo <code>dnsbl-download</code> descarga y almacena en caché las IPs a omitir cada hora:</p>
<ul>
<li>Protocolos: <code>https://</code>, <code>http://</code> y rutas locales <code>file://</code>.</li>
<li>La caché por URL con suma de verificación evita descargas redundantes (período de gracia de 1 hora).</li>
<li>Archivo combinado por servicio: <code>/var/cache/bunkerweb/dnsbl/&lt;service&gt;/IGNORE_IP.list</code>.</li>
<li>Se carga al inicio y se combina con <code>DNSBL_IGNORE_IP</code>.</li>
</ul>
<p>Ejemplo que combina fuentes estáticas y de URL:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.0.0.0/8</span><span class="nv"> </span><span class="s">192.168.0.0/16</span><span class="nv"> </span><span class="s">2001:db8::/32&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/allow-cidrs.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/dnsbl/ignore.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Cargue las IPs a omitir desde archivos locales usando URL <code>file://</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_DNSBL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DNSBL_LIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zen.spamhaus.org&quot;</span>
<span class="nt">DNSBL_IGNORE_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///etc/bunkerweb/dnsbl/ignore.txt</span><span class="nv"> </span><span class="s">file:///opt/data/allow-cidrs.txt&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="database">Database</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de Base de Datos proporciona una integración robusta de base de datos para BunkerWeb al habilitar el almacenamiento y la gestión centralizados de datos de configuración, registros y otra información esencial.</p>
<p>Este componente principal admite múltiples motores de base de datos, incluidos SQLite, PostgreSQL, MySQL/MariaDB y Oracle, lo que le permite elegir la solución de base de datos que mejor se adapte a su entorno y requisitos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>BunkerWeb se conecta a su base de datos configurada utilizando el URI proporcionado en el formato SQLAlchemy.</li>
<li>Los datos críticos de configuración, la información en tiempo de ejecución y los registros de trabajos se almacenan de forma segura en la base de datos.</li>
<li>Los procesos de mantenimiento automático optimizan su base de datos al gestionar el crecimiento de los datos y limpiar los registros sobrantes.</li>
<li>Para escenarios de alta disponibilidad, puede configurar un URI de base de datos de solo lectura que sirva tanto como respaldo (failover) como método para descargar las operaciones de lectura.</li>
<li>Las operaciones de la base de datos se registran según el nivel de registro especificado, proporcionando una visibilidad adecuada de las interacciones con la base de datos.</li>
</ol>
<h3 id="como-usar_12">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de Base de Datos:</p>
<ol>
<li><strong>Elija un motor de base de datos:</strong> Seleccione entre SQLite (predeterminado), PostgreSQL, MySQL/MariaDB u Oracle según sus requisitos.</li>
<li><strong>Configure el URI de la base de datos:</strong> Establezca el <code>DATABASE_URI</code> para conectarse a su base de datos principal utilizando el formato SQLAlchemy.</li>
<li><strong>Base de datos de solo lectura opcional:</strong> Para configuraciones de alta disponibilidad, configure un <code>DATABASE_URI_READONLY</code> como respaldo o para operaciones de lectura.</li>
</ol>
<h3 id="ajustes-de-configuracion_13">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DATABASE_URI</code></td>
<td><code>sqlite:////var/lib/bunkerweb/db.sqlite3</code></td>
<td>global</td>
<td>no</td>
<td><strong>URI de la Base de Datos:</strong> La cadena de conexión de la base de datos principal en formato SQLAlchemy.</td>
</tr>
<tr>
<td><code>DATABASE_URI_READONLY</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>URI de la Base de Datos de Solo Lectura:</strong> Base de datos opcional para operaciones de solo lectura o como respaldo si la base de datos principal está caída.</td>
</tr>
<tr>
<td><code>DATABASE_LOG_LEVEL</code></td>
<td><code>warning</code></td>
<td>global</td>
<td>no</td>
<td><strong>Nivel de Registro:</strong> El nivel de verbosidad para los registros de la base de datos. Opciones: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>warning</code> o <code>error</code>.</td>
</tr>
<tr>
<td><code>DATABASE_MAX_JOBS_RUNS</code></td>
<td><code>10000</code></td>
<td>global</td>
<td>no</td>
<td><strong>Máximo de Ejecuciones de Trabajos:</strong> El número máximo de registros de ejecución de trabajos que se conservarán en la base de datos antes de la limpieza automática.</td>
</tr>
<tr>
<td><code>DATABASE_MAX_SESSION_AGE_DAYS</code></td>
<td><code>14</code></td>
<td>global</td>
<td>no</td>
<td><strong>Retención de Sesiones:</strong> La edad máxima (en días) de las sesiones de usuarios de la UI antes de que se purguen automáticamente.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Selección de Base de Datos" - <strong>SQLite</strong> (predeterminado): Ideal para implementaciones de un solo nodo o entornos de prueba debido a su simplicidad y naturaleza basada en archivos. - <strong>PostgreSQL</strong>: Recomendado para entornos de producción con múltiples instancias de BunkerWeb debido a su robustez y soporte de concurrencia. - <strong>MySQL/MariaDB</strong>: Una buena alternativa a PostgreSQL con capacidades similares de nivel de producción. - <strong>Oracle</strong>: Adecuado para entornos empresariales donde Oracle ya es la plataforma de base de datos estándar.</p>
<div class="admonition info">
<p class="admonition-title">Formato de URI de SQLAlchemy</p>
<p>El URI de la base de datos sigue el formato de SQLAlchemy:</p>
<ul>
<li>SQLite: <code>sqlite:////ruta/a/database.sqlite3</code></li>
<li>PostgreSQL: <code>postgresql://usuario:contraseña@hostname:puerto/basededatos</code></li>
<li>MySQL/MariaDB: <code>mysql://usuario:contraseña@hostname:puerto/basededatos</code> o <code>mariadb://usuario:contraseña@hostname:puerto/basededatos</code></li>
<li>Oracle: <code>oracle://usuario:contraseña@hostname:puerto/basededatos</code></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Mantenimiento de la Base de Datos</p>
<p>El complemento ejecuta automáticamente trabajos de mantenimiento diarios:</p>
</div>
<ul>
<li><strong>Limpiar Ejecuciones de Trabajos en Exceso:</strong> Purga el historial que supera el límite <code>DATABASE_MAX_JOBS_RUNS</code>.</li>
<li><strong>Limpiar Sesiones de UI Caducadas:</strong> Elimina las sesiones de usuarios de la UI que superan <code>DATABASE_MAX_SESSION_AGE_DAYS</code>.</li>
</ul>
<p>Estas tareas evitan el crecimiento ilimitado de la base de datos mientras conservan un historial operativo útil.</p>
<h2 id="easy-resolve-pro">Easy Resolve <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides a simpler way to fix false positives in reports.</p>
<h2 id="errors">Errors</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento de Errores proporciona un manejo de errores personalizable para su sitio web, permitiéndole configurar cómo aparecen las respuestas de error HTTP a los usuarios. Esta característica le ayuda a presentar páginas de error amigables y con su marca que mejoran la experiencia del usuario durante escenarios de error, en lugar de mostrar las páginas de error predeterminadas del servidor, que pueden parecer técnicas y confusas para los visitantes.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente encuentra un error HTTP (por ejemplo, 400, 404 o 500), BunkerWeb intercepta la respuesta de error.</li>
<li>En lugar de mostrar la página de error predeterminada, BunkerWeb muestra una página de error personalizada y diseñada profesionalmente.</li>
<li>Las páginas de error son totalmente personalizables a través de su configuración, permitiéndole especificar páginas personalizadas para códigos de error específicos. <strong>Los archivos de las páginas de error personalizadas deben colocarse en el directorio definido por el ajuste <code>ROOT_FOLDER</code> (consulte la documentación del complemento Varios).</strong><ul>
<li>Por defecto, <code>ROOT_FOLDER</code> es <code>/var/www/html/{server_name}</code> (donde <code>{server_name}</code> se reemplaza por el nombre real del servidor).</li>
<li>En el modo multisitio, cada sitio puede tener su propio <code>ROOT_FOLDER</code>, por lo que las páginas de error personalizadas deben colocarse en el directorio correspondiente para cada sitio.</li>
</ul>
</li>
<li>Las páginas de error predeterminadas proporcionan explicaciones claras, ayudando a los usuarios a entender qué salió mal y qué pueden hacer a continuación.</li>
</ol>
<h3 id="como-usar_13">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Errores:</p>
<ol>
<li><strong>Defina las páginas de error personalizadas:</strong> Especifique qué códigos de error HTTP deben usar páginas de error personalizadas utilizando el ajuste <code>ERRORS</code>. Los archivos de las páginas de error personalizadas deben estar ubicados en la carpeta especificada por el ajuste <code>ROOT_FOLDER</code> para el sitio. En el modo multisitio, esto significa que cada sitio/servidor puede tener su propia carpeta para las páginas de error personalizadas.</li>
<li><strong>Configure sus páginas de error:</strong> Para cada código de error, puede usar la página de error predeterminada de BunkerWeb o proporcionar su propia página HTML personalizada (colocada en el <code>ROOT_FOLDER</code> apropiado).</li>
<li><strong>Establezca los códigos de error interceptados:</strong> Seleccione qué códigos de error siempre deben ser manejados por BunkerWeb con el ajuste <code>INTERCEPTED_ERROR_CODES</code>.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, el manejo de errores ocurre automáticamente para todos los códigos de error especificados.</li>
</ol>
<h3 id="ajustes-de-configuracion_14">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ERRORS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Páginas de Error Personalizadas:</strong> Asigne códigos de error específicos a archivos HTML personalizados usando el formato <code>CODIGO_DE_ERROR=/ruta/al/archivo.html</code>.</td>
</tr>
<tr>
<td><code>INTERCEPTED_ERROR_CODES</code></td>
<td><code>400 401 403 404 405 413 429 500 501 502 503 504</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Errores Interceptados:</strong> Lista de códigos de error HTTP que BunkerWeb debe manejar con su página de error predeterminada cuando no se especifica una página personalizada.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Diseño de la Página de Error</p>
<p>Las páginas de error predeterminadas de BunkerWeb están diseñadas para ser informativas, amigables y de apariencia profesional. Incluyen:</p>
<ul>
<li>Descripciones claras del error</li>
<li>Información sobre qué pudo haber causado el error</li>
<li>Acciones sugeridas para que los usuarios resuelvan el problema</li>
<li>Indicadores visuales que ayudan a los usuarios a comprender si el problema está del lado del cliente o del servidor</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Tipos de Error</p>
<p>Los códigos de error se clasifican por tipo:</p>
<ul>
<li><strong>Errores 4xx (del lado del cliente):</strong> Indican problemas con la solicitud del cliente, como intentar acceder a páginas inexistentes o carecer de la autenticación adecuada.</li>
<li><strong>Errores 5xx (del lado del servidor):</strong> Indican problemas con la capacidad del servidor para cumplir una solicitud válida, como errores internos del servidor o indisponibilidad temporal.</li>
</ul>
</div>
<h3 id="configuraciones-de-ejemplo_14">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="19:3"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">Manejo de Errores Predeterminado</label><label for="__tabbed_19_2">Páginas de Error Personalizadas</label><label for="__tabbed_19_3">Manejo de Errores Selectivo</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Deje que BunkerWeb maneje los códigos de error comunes con sus páginas de error predeterminadas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Use páginas de error personalizadas para códigos de error específicos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404=/custom/404.html</span><span class="nv"> </span><span class="s">500=/custom/500.html&quot;</span>
<span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;400</span><span class="nv"> </span><span class="s">401</span><span class="nv"> </span><span class="s">403</span><span class="nv"> </span><span class="s">404</span><span class="nv"> </span><span class="s">405</span><span class="nv"> </span><span class="s">413</span><span class="nv"> </span><span class="s">429</span><span class="nv"> </span><span class="s">500</span><span class="nv"> </span><span class="s">501</span><span class="nv"> </span><span class="s">502</span><span class="nv"> </span><span class="s">503</span><span class="nv"> </span><span class="s">504&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Solo maneje códigos de error específicos con BunkerWeb:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INTERCEPTED_ERROR_CODES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;404</span><span class="nv"> </span><span class="s">500&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="greylist">Greylist</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de Lista Gris proporciona un enfoque de seguridad flexible que permite el acceso de los visitantes mientras se mantienen las características de seguridad esenciales.</p>
<p>A diferencia de los enfoques tradicionales de <a href="#blacklist">lista negra</a>/<a href="#whitelist">lista blanca</a> —que bloquean o permiten completamente el acceso—, la lista gris crea un punto intermedio al conceder acceso a ciertos visitantes mientras los somete a controles de seguridad.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Usted define los criterios para que los visitantes sean incluidos en la lista gris (<em>direcciones IP, redes, DNS inverso, ASN, User-Agent o patrones de URI</em>).</li>
<li>Cuando un visitante coincide con cualquiera de estos criterios, se le concede acceso a su sitio mientras las demás características de seguridad permanecen activas.</li>
<li>Si un visitante no coincide con ningún criterio de la lista gris, se le deniega el acceso.</li>
<li>Los datos de la lista gris se pueden actualizar automáticamente desde fuentes externas de forma programada.</li>
</ol>
<h3 id="como-usar_14">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Lista Gris:</p>
<ol>
<li><strong>Habilite la función:</strong> La función de Lista Gris está desactivada por defecto. Establezca el ajuste <code>USE_GREYLIST</code> en <code>yes</code> para habilitarla.</li>
<li><strong>Configure las reglas de la lista gris:</strong> Defina qué IPs, redes, patrones de DNS inverso, ASNs, User-Agents o URIs deben incluirse en la lista gris.</li>
<li><strong>Añada fuentes externas:</strong> Opcionalmente, configure URLs para descargar y actualizar automáticamente los datos de la lista gris.</li>
<li><strong>Supervise el acceso:</strong> Revise la <a href="../web-ui/">interfaz de usuario web</a> para ver qué visitantes están siendo permitidos o denegados.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Comportamiento del Control de Acceso</p>
<p>Cuando la función de lista gris está habilitada con el ajuste <code>USE_GREYLIST</code> establecido en <code>yes</code>:</p>
<ol>
<li><strong>Visitantes en la lista gris:</strong> Se les permite el acceso pero siguen estando sujetos a todos los controles de seguridad.</li>
<li><strong>Visitantes no incluidos en la lista gris:</strong> Se les deniega completamente el acceso.</li>
</ol>
</div>
<div class="admonition info">
<p class="admonition-title">modo stream</p>
<p>Cuando se utiliza el modo stream, solo se realizan las comprobaciones de IP, DNS inverso y ASN.</p>
</div>
<h3 id="ajustes-de-configuracion_15">Ajustes de Configuración</h3>
<p><strong>General</strong></p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GREYLIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Lista Gris:</strong> Establezca en <code>yes</code> para habilitar la lista gris.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="20:5"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><input id="__tabbed_20_3" name="__tabbed_20" type="radio" /><input id="__tabbed_20_4" name="__tabbed_20" type="radio" /><input id="__tabbed_20_5" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">Dirección IP</label><label for="__tabbed_20_2">DNS Inverso</label><label for="__tabbed_20_3">ASN</label><label for="__tabbed_20_4">User Agent</label><label for="__tabbed_20_5">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Incluye en la lista gris a los visitantes según su dirección IP o red. Estos visitantes obtienen acceso pero siguen estando sujetos a los controles de seguridad.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Gris de IP:</strong> Lista de direcciones IP o redes (en notación CIDR) para incluir en la lista gris, separadas por espacios.</td>
</tr>
<tr>
<td><code>GREYLIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URLs de Lista Gris de IP:</strong> Lista de URLs que contienen direcciones IP o redes para incluir en la lista gris, separadas por espacios.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Incluye en la lista gris a los visitantes según su nombre de dominio (en inverso). Útil para permitir el acceso condicional a visitantes de organizaciones o redes específicas.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Gris de rDNS:</strong> Lista de sufijos de DNS inverso para incluir en la lista gris, separados por espacios.</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Solo rDNS Global:</strong> Realiza comprobaciones de la lista gris de rDNS solo en direcciones IP globales cuando se establece en <code>yes</code>.</td>
</tr>
<tr>
<td><code>GREYLIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URLs de Lista Gris de rDNS:</strong> Lista de URLs que contienen sufijos de DNS inverso para incluir en la lista gris, separadas por espacios.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Incluye en la lista gris a los visitantes de proveedores de red específicos utilizando Números de Sistema Autónomo. Los ASN identifican a qué proveedor u organización pertenece una IP.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Gris de ASN:</strong> Lista de Números de Sistema Autónomo para incluir en la lista gris, separados por espacios.</td>
</tr>
<tr>
<td><code>GREYLIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URLs de Lista Gris de ASN:</strong> Lista de URLs que contienen ASNs para incluir en la lista gris, separadas por espacios.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Incluye en la lista gris a los visitantes según el navegador o la herramienta que dicen estar usando. Esto permite el acceso controlado para herramientas específicas mientras se mantienen los controles de seguridad.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Gris de User-Agent:</strong> Lista de patrones de User-Agent (expresión regular PCRE) para incluir en la lista gris, separados por espacios.</td>
</tr>
<tr>
<td><code>GREYLIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URLs de Lista Gris de User-Agent:</strong> Lista de URLs que contienen patrones de User-Agent para incluir en la lista gris.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Incluye en la lista gris las solicitudes a URLs específicas de su sitio. Esto permite el acceso condicional a ciertos puntos finales mientras se mantienen los controles de seguridad.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GREYLIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Gris de URI:</strong> Lista de patrones de URI (expresión regular PCRE) para incluir en la lista gris, separados por espacios.</td>
</tr>
<tr>
<td><code>GREYLIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URLs de Lista Gris de URI:</strong> Lista de URLs que contienen patrones de URI para incluir en la lista gris, separadas por espacios.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Soporte de Formato de URL</p>
<p>Todos los ajustes <code>*_URLS</code> admiten URLs HTTP/HTTPS así como rutas de archivos locales usando el prefijo <code>file:///</code>. Se admite la autenticación básica usando el formato <code>http://usuario:contraseña@url</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Actualizaciones Regulares</p>
<p>Las listas grises de las URLs se descargan y actualizan automáticamente cada hora para asegurar que su protección se mantenga actualizada con las últimas fuentes de confianza.</p>
</div>
<h3 id="configuraciones-de-ejemplo_15">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="21:4"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><input id="__tabbed_21_2" name="__tabbed_21" type="radio" /><input id="__tabbed_21_3" name="__tabbed_21" type="radio" /><input id="__tabbed_21_4" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">Configuración Básica</label><label for="__tabbed_21_2">Configuración Avanzada</label><label for="__tabbed_21_3">Usando Archivos Locales</label><label for="__tabbed_21_4">Acceso Selectivo a la API</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que aplica la lista gris a la red interna y al rastreador de una empresa:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">GREYLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)CompanyCrawler(?:\b)&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración más completa con múltiples criterios de lista gris:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Activos de la empresa y rastreadores aprobados</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">GREYLIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.company.com</span><span class="nv"> </span><span class="s">.partner-company.org&quot;</span>
<span class="nt">GREYLIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345</span><span class="nv"> </span><span class="s">67890&quot;</span><span class="w">  </span><span class="c1"># ASNs de la empresa y del socio</span>
<span class="nt">GREYLIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)GoodBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)PartnerCrawler(?:\b)&quot;</span>
<span class="nt">GREYLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/&quot;</span>

<span class="c1"># Fuentes externas de confianza</span>
<span class="nt">GREYLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-networks.txt&quot;</span>
<span class="nt">GREYLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-crawlers.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración usando archivos locales para las listas grises:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/ip-greylist.txt&quot;</span>
<span class="nt">GREYLIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/rdns-greylist.txt&quot;</span>
<span class="nt">GREYLIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/asn-greylist.txt&quot;</span>
<span class="nt">GREYLIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/user-agent-greylist.txt&quot;</span>
<span class="nt">GREYLIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/uri-greylist.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que permite el acceso a puntos finales específicos de la API:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GREYLIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GREYLIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/public/</span><span class="nv"> </span><span class="s">^/api/v1/status&quot;</span>
<span class="nt">GREYLIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;203.0.113.0/24&quot;</span><span class="w">  </span><span class="c1"># Red del socio externo</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="gzip">Gzip</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento GZIP mejora el rendimiento del sitio web al comprimir las respuestas HTTP utilizando el algoritmo GZIP. Esta función reduce el uso de ancho de banda y mejora los tiempos de carga de la página al comprimir el contenido web antes de que se envíe al navegador del cliente, lo que resulta en una entrega más rápida y una mejor experiencia de usuario.</p>
<h3 id="como-funciona">Cómo funciona</h3>
<ol>
<li>Cuando un cliente solicita contenido de su sitio web, BunkerWeb comprueba si el cliente admite la compresión GZIP.</li>
<li>Si es compatible, BunkerWeb comprime la respuesta utilizando el algoritmo GZIP en el nivel de compresión que haya configurado.</li>
<li>El contenido comprimido se envía al cliente con las cabeceras adecuadas que indican la compresión GZIP.</li>
<li>El navegador del cliente descomprime el contenido antes de mostrarlo.</li>
<li>Tanto el uso de ancho de banda como los tiempos de carga de la página se reducen, mejorando el rendimiento general del sitio y la experiencia del usuario.</li>
</ol>
<h3 id="como-usar_15">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de compresión GZIP:</p>
<ol>
<li><strong>Habilite la función:</strong> La función GZIP está desactivada por defecto. Habilítela estableciendo el ajuste <code>USE_GZIP</code> en <code>yes</code>.</li>
<li><strong>Configure los tipos MIME:</strong> Especifique qué tipos de contenido deben comprimirse utilizando el ajuste <code>GZIP_TYPES</code>.</li>
<li><strong>Establezca el tamaño mínimo:</strong> Defina el tamaño mínimo de respuesta requerido para la compresión con el ajuste <code>GZIP_MIN_LENGTH</code> para evitar comprimir archivos pequeños.</li>
<li><strong>Elija un nivel de compresión:</strong> Seleccione su equilibrio preferido entre velocidad y tasa de compresión utilizando el ajuste <code>GZIP_COMP_LEVEL</code>.</li>
<li><strong>Configure las solicitudes proxy:</strong> Especifique qué solicitudes proxy deben comprimirse utilizando el ajuste <code>GZIP_PROXIED</code>.</li>
</ol>
<h3 id="ajustes-de-configuracion_16">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_GZIP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar GZIP:</strong> Establezca en <code>yes</code> para habilitar la compresión GZIP.</td>
</tr>
<tr>
<td><code>GZIP_TYPES</code></td>
<td><code>application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/x-javascript application/xhtml+xml application/xml font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tipos MIME:</strong> Lista de tipos de contenido que se comprimirán con GZIP.</td>
</tr>
<tr>
<td><code>GZIP_MIN_LENGTH</code></td>
<td><code>1000</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tamaño Mínimo:</strong> El tamaño mínimo de respuesta (en bytes) para que se aplique la compresión GZIP.</td>
</tr>
<tr>
<td><code>GZIP_COMP_LEVEL</code></td>
<td><code>5</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Nivel de Compresión:</strong> Nivel de compresión de 1 (compresión mínima) a 9 (compresión máxima). Los valores más altos consumen más CPU.</td>
</tr>
<tr>
<td><code>GZIP_PROXIED</code></td>
<td><code>no-cache no-store private expired auth</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Solicitudes Proxy:</strong> Especifica qué solicitudes proxy deben comprimirse según las cabeceras de respuesta.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Optimizando el Nivel de Compresión</p>
<p>El nivel de compresión por defecto (5) ofrece un buen equilibrio entre la tasa de compresión y el uso de la CPU. Para contenido estático o cuando los recursos de la CPU del servidor son abundantes, considere aumentarlo a 7-9 para una compresión máxima. Para contenido dinámico o cuando los recursos de la CPU son limitados, es posible que desee utilizar 1-3 para una compresión más rápida con una reducción de tamaño razonable.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Soporte de Navegadores</p>
<p>GZIP es compatible con todos los navegadores modernos y ha sido el método de compresión estándar para las respuestas HTTP durante muchos años, lo que garantiza una excelente compatibilidad en todos los dispositivos y navegadores.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Compresión vs. Uso de CPU</p>
<p>Aunque la compresión GZIP reduce el ancho de banda y mejora los tiempos de carga, los niveles de compresión más altos consumen más recursos de la CPU. Para sitios de alto tráfico, encuentre el equilibrio adecuado entre la eficiencia de la compresión y el rendimiento del servidor.</p>
</div>
<h3 id="configuraciones-de-ejemplo_16">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="22:4"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><input id="__tabbed_22_2" name="__tabbed_22" type="radio" /><input id="__tabbed_22_3" name="__tabbed_22" type="radio" /><input id="__tabbed_22_4" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">Configuración Básica</label><label for="__tabbed_22_2">Compresión Máxima</label><label for="__tabbed_22_3">Rendimiento Equilibrado</label><label for="__tabbed_22_4">Enfoque en Contenido Proxy</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración estándar que habilita GZIP con los ajustes por defecto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para un ahorro máximo de compresión:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/atom+xml</span><span class="nv"> </span><span class="s">application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">application/rss+xml</span><span class="nv"> </span><span class="s">application/vnd.ms-fontobject</span><span class="nv"> </span><span class="s">application/x-font-opentype</span><span class="nv"> </span><span class="s">application/x-font-truetype</span><span class="nv"> </span><span class="s">application/x-font-ttf</span><span class="nv"> </span><span class="s">application/x-javascript</span><span class="nv"> </span><span class="s">application/xhtml+xml</span><span class="nv"> </span><span class="s">application/xml</span><span class="nv"> </span><span class="s">font/eot</span><span class="nv"> </span><span class="s">font/opentype</span><span class="nv"> </span><span class="s">font/otf</span><span class="nv"> </span><span class="s">font/truetype</span><span class="nv"> </span><span class="s">image/svg+xml</span><span class="nv"> </span><span class="s">image/vnd.microsoft.icon</span><span class="nv"> </span><span class="s">image/x-icon</span><span class="nv"> </span><span class="s">image/x-win-bitmap</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain</span><span class="nv"> </span><span class="s">text/xml&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que equilibra la tasa de compresión con el uso de la CPU:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript</span><span class="nv"> </span><span class="s">text/plain&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no-cache</span><span class="nv"> </span><span class="s">no-store</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">expired&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que se centra en manejar adecuadamente la compresión para el contenido proxy:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_GZIP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">GZIP_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/javascript</span><span class="nv"> </span><span class="s">application/json</span><span class="nv"> </span><span class="s">text/css</span><span class="nv"> </span><span class="s">text/html</span><span class="nv"> </span><span class="s">text/javascript&quot;</span>
<span class="nt">GZIP_MIN_LENGTH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">GZIP_COMP_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">GZIP_PROXIED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;any&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="html-injection">HTML injection</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento de Inyección de HTML le permite agregar sin problemas código HTML personalizado a las páginas de su sitio web antes de las etiquetas de cierre <code>&lt;/body&gt;</code> o <code>&lt;/head&gt;</code>. Esta función es particularmente útil para agregar scripts de análisis, píxeles de seguimiento, JavaScript personalizado, estilos CSS u otras integraciones de terceros sin modificar el código fuente de su sitio web.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando se sirve una página de su sitio web, BunkerWeb examina la respuesta HTML.</li>
<li>Si ha configurado la inyección en el cuerpo (body), BunkerWeb inserta su código HTML personalizado justo antes de la etiqueta de cierre <code>&lt;/body&gt;</code>.</li>
<li>Si ha configurado la inyección en la cabecera (head), BunkerWeb inserta su código HTML personalizado justo antes de la etiqueta de cierre <code>&lt;/head&gt;</code>.</li>
<li>La inserción se realiza automáticamente para todas las páginas HTML servidas por su sitio web.</li>
<li>Esto le permite agregar scripts, estilos u otros elementos sin modificar el código de su aplicación.</li>
</ol>
<h3 id="como-usar_16">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Inyección de HTML:</p>
<ol>
<li><strong>Prepare su HTML personalizado:</strong> Decida qué código HTML desea inyectar en sus páginas.</li>
<li><strong>Elija las ubicaciones de inyección:</strong> Determine si necesita inyectar código en la sección <code>&lt;head&gt;</code>, en la sección <code>&lt;body&gt;</code>, o en ambas.</li>
<li><strong>Configure los ajustes:</strong> Agregue su HTML personalizado a los ajustes apropiados (<code>INJECT_HEAD</code> y/o <code>INJECT_BODY</code>).</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, el HTML se inyectará automáticamente en todas las páginas HTML servidas.</li>
</ol>
<h3 id="ajustes-de-configuracion_17">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INJECT_HEAD</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Código HTML de la Cabecera:</strong> El código HTML para inyectar antes de la etiqueta <code>&lt;/head&gt;</code>.</td>
</tr>
<tr>
<td><code>INJECT_BODY</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Código HTML del Cuerpo:</strong> El código HTML para inyectar antes de la etiqueta <code>&lt;/body&gt;</code>.</td>
</tr>
</tbody>
</table>
<p>!!! tip "Mejores Prácticas" - Por razones de rendimiento, coloque los archivos de JavaScript al final del cuerpo para evitar el bloqueo del renderizado. - Coloque CSS y JavaScript crítico en la sección de la cabecera para evitar un "destello" de contenido sin estilo (FOUC). - Tenga cuidado con el contenido inyectado que podría potencialmente romper la funcionalidad de su sitio.</p>
<p>!!! info "Casos de Uso Comunes" - Agregar scripts de análisis (como Google Analytics, Matomo) - Integrar widgets de chat o herramientas de soporte al cliente - Incluir píxeles de seguimiento para campañas de marketing - Agregar estilos CSS personalizados o funcionalidad de JavaScript - Incluir bibliotecas de terceros sin modificar el código de su aplicación</p>
<h3 id="configuraciones-de-ejemplo_17">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="23:4"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><input id="__tabbed_23_4" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">Google Analytics</label><label for="__tabbed_23_2">Estilos Personalizados</label><label for="__tabbed_23_3">Múltiples Integraciones</label><label for="__tabbed_23_4">Banner de Consentimiento de Cookies</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Agregar el seguimiento de Google Analytics a su sitio web:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;script</span><span class="nv"> </span><span class="s">async</span><span class="nv"> </span><span class="s">src=\&quot;https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\&quot;&gt;&lt;/script&gt;&lt;script&gt;window.dataLayer</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">window.dataLayer</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">[];function</span><span class="nv"> </span><span class="s">gtag(){dataLayer.push(arguments);}gtag(&#39;js&#39;,</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">Date());gtag(&#39;config&#39;,</span><span class="nv"> </span><span class="s">&#39;G-XXXXXXXXXX&#39;);&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Agregar estilos CSS personalizados a su sitio web:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.custom-element</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">blue;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Agregar tanto estilos personalizados como JavaScript:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;body</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">font-family:</span><span class="nv"> </span><span class="s">&#39;Arial&#39;,</span><span class="nv"> </span><span class="s">sans-serif;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.notification-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f8f9fa;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;script</span><span class="nv"> </span><span class="s">src=\&quot;https://cdn.example.com/js/widget.js\&quot;&gt;&lt;/script&gt;&lt;script&gt;initializeWidget(&#39;your-api-key&#39;);&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Agregar un banner simple de consentimiento de cookies:</p>
<div class="highlight"><pre><span></span><code><span class="nt">INJECT_HEAD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;style&gt;.cookie-banner</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">position:</span><span class="nv"> </span><span class="s">fixed;</span><span class="nv"> </span><span class="s">bottom:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">left:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">right:</span><span class="nv"> </span><span class="s">0;</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#f1f1f1;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">text-align:</span><span class="nv"> </span><span class="s">center;</span><span class="nv"> </span><span class="s">z-index:</span><span class="nv"> </span><span class="s">1000;</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">.cookie-banner</span><span class="nv"> </span><span class="s">button</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">background:</span><span class="nv"> </span><span class="s">#4CAF50;</span><span class="nv"> </span><span class="s">border:</span><span class="nv"> </span><span class="s">none;</span><span class="nv"> </span><span class="s">color:</span><span class="nv"> </span><span class="s">white;</span><span class="nv"> </span><span class="s">padding:</span><span class="nv"> </span><span class="s">10px</span><span class="nv"> </span><span class="s">20px;</span><span class="nv"> </span><span class="s">cursor:</span><span class="nv"> </span><span class="s">pointer;</span><span class="nv"> </span><span class="s">}&lt;/style&gt;&quot;</span>
<span class="nt">INJECT_BODY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;div</span><span class="nv"> </span><span class="s">id=\&quot;cookie-banner\&quot;</span><span class="nv"> </span><span class="s">class=\&quot;cookie-banner\&quot;&gt;Este</span><span class="nv"> </span><span class="s">sitio</span><span class="nv"> </span><span class="s">web</span><span class="nv"> </span><span class="s">utiliza</span><span class="nv"> </span><span class="s">cookies</span><span class="nv"> </span><span class="s">para</span><span class="nv"> </span><span class="s">garantizar</span><span class="nv"> </span><span class="s">que</span><span class="nv"> </span><span class="s">obtenga</span><span class="nv"> </span><span class="s">la</span><span class="nv"> </span><span class="s">mejor</span><span class="nv"> </span><span class="s">experiencia.</span><span class="nv"> </span><span class="s">&lt;button</span><span class="nv"> </span><span class="s">onclick=\&quot;acceptCookies()\&quot;&gt;Aceptar&lt;/button&gt;&lt;/div&gt;&lt;script&gt;function</span><span class="nv"> </span><span class="s">acceptCookies()</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(&#39;cookie-banner&#39;).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">localStorage.setItem(&#39;cookies-accepted&#39;,</span><span class="nv"> </span><span class="s">&#39;true&#39;);</span><span class="nv"> </span><span class="s">}</span><span class="nv"> </span><span class="s">if(localStorage.getItem(&#39;cookies-accepted&#39;)</span><span class="nv"> </span><span class="s">===</span><span class="nv"> </span><span class="s">&#39;true&#39;)</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">document.getElementById(&#39;cookie-banner&#39;).style.display</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">}&lt;/script&gt;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="headers">Headers</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Las cabeceras juegan un papel crucial en la seguridad HTTP. El complemento de Cabeceras proporciona una gestión robusta tanto de cabeceras HTTP estándar como personalizadas, mejorando la seguridad y la funcionalidad. Aplica dinámicamente medidas de seguridad, como <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Strict-Transport-Security">HSTS</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy">CSP</a> (incluido un modo de informe), y la inyección de cabeceras personalizadas, al tiempo que previene la fuga de información.</p>
<p><strong>Cómo funciona</strong></p>
<ol>
<li>Cuando un cliente solicita contenido de su sitio web, BunkerWeb procesa las cabeceras de la respuesta.</li>
<li>Se aplican las cabeceras de seguridad de acuerdo con su configuración.</li>
<li>Se pueden añadir cabeceras personalizadas para proporcionar información o funcionalidad adicional a los clientes.</li>
<li>Las cabeceras no deseadas que podrían revelar información del servidor se eliminan automáticamente.</li>
<li>Las cookies se modifican para incluir indicadores de seguridad apropiados según sus ajustes.</li>
<li>Las cabeceras de los servidores de origen (upstream) se pueden preservar selectivamente cuando sea necesario.</li>
</ol>
<h3 id="como-usar_17">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Cabeceras:</p>
<ol>
<li><strong>Configure las cabeceras de seguridad:</strong> Establezca valores para las cabeceras comunes.</li>
<li><strong>Añada cabeceras personalizadas:</strong> Defina cualquier cabecera personalizada usando el ajuste <code>CUSTOM_HEADER</code>.</li>
<li><strong>Elimine las cabeceras no deseadas:</strong> Use <code>REMOVE_HEADERS</code> para asegurarse de que se eliminen las cabeceras que podrían exponer detalles del servidor.</li>
<li><strong>Establezca la seguridad de las cookies:</strong> Habilite una seguridad robusta para las cookies configurando <code>COOKIE_FLAGS</code> y estableciendo <code>COOKIE_AUTO_SECURE_FLAG</code> en <code>yes</code> para que el indicador <code>Secure</code> se añada automáticamente en las conexiones HTTPS.</li>
<li><strong>Preserve las cabeceras de origen:</strong> Especifique qué cabeceras de origen conservar usando <code>KEEP_UPSTREAM_HEADERS</code>.</li>
<li><strong>Aproveche la aplicación condicional de cabeceras:</strong> Si desea probar políticas sin interrupciones, habilite el modo <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy-Report-Only">CSP Report-Only</a> a través de <code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code>.</li>
</ol>
<h3 id="guia-de-configuracion">Guía de Configuración</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">Cabeceras de Seguridad</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Descripción General</strong></p>
<p>Las cabeceras de seguridad imponen una comunicación segura, restringen la carga de recursos y previenen ataques como el clickjacking y la inyección. Unas cabeceras configuradas correctamente crean una capa defensiva robusta para su sitio web.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios de las Cabeceras de Seguridad</p>
<ul>
<li><strong>HSTS:</strong> Asegura que todas las conexiones estén cifradas, protegiendo contra ataques de degradación de protocolo.</li>
<li><strong>CSP:</strong> Previene la ejecución de scripts maliciosos, reduciendo el riesgo de ataques XSS.</li>
<li><strong>X-Frame-Options:</strong> Bloquea los intentos de clickjacking controlando la incrustación de iframes.</li>
<li><strong>Referrer Policy:</strong> Limita la fuga de información sensible a través de las cabeceras de referencia.</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>STRICT_TRANSPORT_SECURITY</code></td>
<td><code>max-age=63072000; includeSubDomains; preload</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HSTS:</strong> Impone conexiones HTTPS seguras, reduciendo los riesgos de ataques de intermediario (man-in-the-middle).</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY</code></td>
<td><code>object-src 'none'; form-action 'self'; frame-ancestors 'self';</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>CSP:</strong> Restringe la carga de recursos a fuentes de confianza, mitigando los ataques de cross-site scripting e inyección de datos.</td>
</tr>
<tr>
<td><code>CONTENT_SECURITY_POLICY_REPORT_ONLY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Modo de Informe CSP:</strong> Informa de las violaciones sin bloquear el contenido, ayudando a probar las políticas de seguridad mientras se capturan los registros.</td>
</tr>
<tr>
<td><code>X_FRAME_OPTIONS</code></td>
<td><code>SAMEORIGIN</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>X-Frame-Options:</strong> Previene el clickjacking controlando si su sitio puede ser enmarcado (framed).</td>
</tr>
<tr>
<td><code>X_CONTENT_TYPE_OPTIONS</code></td>
<td><code>nosniff</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>X-Content-Type-Options:</strong> Evita que los navegadores realicen "MIME-sniffing", protegiendo contra ataques de descarga no autorizada (drive-by download).</td>
</tr>
<tr>
<td><code>X_DNS_PREFETCH_CONTROL</code></td>
<td><code>off</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>X-DNS-Prefetch-Control:</strong> Regula la captación previa de DNS para reducir las solicitudes de red no intencionadas y mejorar la privacidad.</td>
</tr>
<tr>
<td><code>REFERRER_POLICY</code></td>
<td><code>strict-origin-when-cross-origin</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Política de Referencia:</strong> Controla la cantidad de información de referencia enviada, salvaguardando la privacidad del usuario.</td>
</tr>
<tr>
<td><code>PERMISSIONS_POLICY</code></td>
<td><code>accelerometer=(), ambient-light-sensor=(), attribution-reporting=(), autoplay=(), battery=(), ...</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Política de Permisos:</strong> Restringe el acceso a las funciones del navegador, reduciendo los posibles vectores de ataque.</td>
</tr>
<tr>
<td><code>KEEP_UPSTREAM_HEADERS</code></td>
<td><code>Content-Security-Policy Permissions-Policy X-Frame-Options</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Conservar Cabeceras:</strong> Preserva las cabeceras de origen seleccionadas, ayudando a la integración con sistemas heredados mientras se mantiene la seguridad.</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Mejores Prácticas"
    - Revise y actualice regularmente sus cabeceras de seguridad para alinearse con los estándares de seguridad en evolución.
    - Use herramientas como [Mozilla Observatory](https://observatory.mozilla.org/) para validar la configuración de sus cabeceras.
    - Pruebe el CSP en modo `Report-Only` antes de aplicarlo para evitar romper la funcionalidad.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="25:1"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">Configuración de Cookies</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Descripción General</strong></p>
<p>Una configuración adecuada de las cookies garantiza sesiones de usuario seguras al prevenir el secuestro, la fijación y el cross-site scripting. Las cookies seguras mantienen la integridad de la sesión sobre HTTPS y mejoran la protección general de los datos del usuario.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios de las Cookies Seguras</p>
<ul>
<li><strong>Indicador HttpOnly:</strong> Evita que los scripts del lado del cliente accedan a las cookies, mitigando los riesgos de XSS.</li>
<li><strong>Indicador SameSite:</strong> Reduce los ataques CSRF al restringir el uso de cookies entre diferentes orígenes.</li>
<li><strong>Indicador Secure:</strong> Asegura que las cookies se transmitan solo a través de conexiones HTTPS cifradas.</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COOKIE_FLAGS</code></td>
<td><code>* HttpOnly SameSite=Lax</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Indicadores de Cookie:</strong> Añade automáticamente indicadores de seguridad como HttpOnly y SameSite, protegiendo las cookies del acceso de scripts del lado del cliente y de ataques CSRF.</td>
</tr>
<tr>
<td><code>COOKIE_AUTO_SECURE_FLAG</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Indicador Secure Automático:</strong> Asegura que las cookies solo se envíen a través de conexiones HTTPS seguras añadiendo automáticamente el indicador Secure.</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Mejores Prácticas"
    - Use `SameSite=Strict` para cookies sensibles para prevenir el acceso entre orígenes.
    - Audite regularmente la configuración de sus cookies para asegurar el cumplimiento con las regulaciones de seguridad y privacidad.
    - Evite establecer cookies sin el indicador `Secure` en entornos de producción.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">Cabeceras Personalizadas</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Descripción General</strong></p>
<p>Las cabeceras personalizadas le permiten añadir cabeceras HTTP específicas para cumplir con los requisitos de la aplicación o el rendimiento. Ofrecen flexibilidad pero deben configurarse con cuidado para evitar exponer detalles sensibles del servidor.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios de las Cabeceras Personalizadas</p>
<ul>
<li>Mejore la seguridad eliminando cabeceras innecesarias que puedan filtrar detalles del servidor.</li>
<li>Añada cabeceras específicas de la aplicación para mejorar la funcionalidad o la depuración.</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CUSTOM_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Cabecera Personalizada:</strong> Proporciona un medio para añadir cabeceras definidas por el usuario en el formato <code>NombreCabecera: ValorCabecera</code> para mejoras especializadas de seguridad o rendimiento.</td>
</tr>
<tr>
<td><code>REMOVE_HEADERS</code></td>
<td><code>Server Expect-CT X-Powered-By X-AspNet-Version X-AspNetMvc-Version Public-Key-Pins</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Eliminar Cabeceras:</strong> Especifica las cabeceras a eliminar, disminuyendo la posibilidad de exponer detalles internos del servidor y vulnerabilidades conocidas.</td>
</tr>
</tbody>
</table>
<pre><code>!!! warning "Consideraciones de Seguridad"
    - Evite exponer información sensible a través de cabeceras personalizadas.
    - Revise y actualice regularmente las cabeceras personalizadas para alinearlas con los requisitos de su aplicación.

!!! tip "Mejores Prácticas"
    - Use `REMOVE_HEADERS` para eliminar cabeceras como `Server` y `X-Powered-By` para reducir los riesgos de "fingerprinting" (identificación del servidor).
    - Pruebe las cabeceras personalizadas en un entorno de preproducción (staging) antes de desplegarlas en producción.
</code></pre>
<h3 id="configuraciones-de-ejemplo_18">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="27:4"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><input id="__tabbed_27_2" name="__tabbed_27" type="radio" /><input id="__tabbed_27_3" name="__tabbed_27" type="radio" /><input id="__tabbed_27_4" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">Cabeceras de Seguridad Básicas</label><label for="__tabbed_27_2">Seguridad de Cookies Mejorada</label><label for="__tabbed_27_3">Cabeceras Personalizadas para API</label><label for="__tabbed_27_4">Content Security Policy - Modo de Informe</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración estándar con cabeceras de seguridad esenciales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">STRICT_TRANSPORT_SECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max-age=63072000;</span><span class="nv"> </span><span class="s">includeSubDomains;</span><span class="nv"> </span><span class="s">preload&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;&quot;</span>
<span class="nt">X_FRAME_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SAMEORIGIN&quot;</span>
<span class="nt">X_CONTENT_TYPE_OPTIONS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nosniff&quot;</span>
<span class="nt">REFERRER_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;strict-origin-when-cross-origin&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con ajustes robustos de seguridad para cookies:</p>
<div class="highlight"><pre><span></span><code><span class="nt">COOKIE_FLAGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict&quot;</span>
<span class="nt">COOKIE_FLAGS_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth_cookie</span><span class="nv"> </span><span class="s">Secure</span><span class="nv"> </span><span class="s">HttpOnly</span><span class="nv"> </span><span class="s">SameSite=Strict</span><span class="nv"> </span><span class="s">Max-Age=3600&quot;</span>
<span class="nt">COOKIE_AUTO_SECURE_FLAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un servicio de API con cabeceras personalizadas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">CUSTOM_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API-Version:</span><span class="nv"> </span><span class="s">1.2.3&quot;</span>
<span class="nt">CUSTOM_HEADER_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Access-Control-Max-Age:</span><span class="nv"> </span><span class="s">86400&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;none&#39;&quot;</span>
<span class="nt">REMOVE_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Server</span><span class="nv"> </span><span class="s">X-Powered-By</span><span class="nv"> </span><span class="s">X-AspNet-Version</span><span class="nv"> </span><span class="s">X-Runtime&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para probar CSP sin romper la funcionalidad:</p>
<div class="highlight"><pre><span></span><code><span class="nt">CONTENT_SECURITY_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-src</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">script-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">img-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">https://*.example.com;</span><span class="nv"> </span><span class="s">style-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">&#39;unsafe-inline&#39;</span><span class="nv"> </span><span class="s">https://trusted-cdn.example.com;</span><span class="nv"> </span><span class="s">connect-src</span><span class="nv"> </span><span class="s">&#39;self&#39;</span><span class="nv"> </span><span class="s">https://api.example.com;</span><span class="nv"> </span><span class="s">object-src</span><span class="nv"> </span><span class="s">&#39;none&#39;;</span><span class="nv"> </span><span class="s">frame-ancestors</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">form-action</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">base-uri</span><span class="nv"> </span><span class="s">&#39;self&#39;;</span><span class="nv"> </span><span class="s">report-uri</span><span class="nv"> </span><span class="s">https://example.com/csp-reports&quot;</span>
<span class="nt">CONTENT_SECURITY_POLICY_REPORT_ONLY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="lets-encrypt">Let's Encrypt</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de Let's Encrypt simplifica la gestión de certificados SSL/TLS al automatizar la creación, renovación y configuración de certificados gratuitos de Let's Encrypt. Esta función permite conexiones HTTPS seguras para sus sitios web sin la complejidad de la gestión manual de certificados, reduciendo tanto los costos como la sobrecarga administrativa.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando está habilitado, BunkerWeb detecta automáticamente los dominios configurados para su sitio web.</li>
<li>BunkerWeb solicita certificados SSL/TLS gratuitos a la autoridad de certificación de Let's Encrypt.</li>
<li>La propiedad del dominio se verifica mediante desafíos HTTP (demostrando que usted controla el sitio web) o desafíos DNS (demostrando que usted controla el DNS de su dominio).</li>
<li>Los certificados se instalan y configuran automáticamente para sus dominios.</li>
<li>BunkerWeb se encarga de las renovaciones de certificados en segundo plano antes de su vencimiento, garantizando la disponibilidad continua de HTTPS.</li>
<li>Todo el proceso está totalmente automatizado, requiriendo una intervención mínima después de la configuración inicial.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Requisitos previos</p>
<p>Para utilizar esta función, asegúrese de que los <strong>registros A</strong> de DNS adecuados estén configurados para cada dominio, apuntando a la(s) IP(s) pública(s) donde BunkerWeb es accesible. Sin una configuración de DNS correcta, el proceso de verificación del dominio fallará.</p>
</div>
<h3 id="como-usar_18">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Let's Encrypt:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>AUTO_LETS_ENCRYPT</code> en <code>yes</code> para habilitar la emisión y renovación automática de certificados.</li>
<li><strong>Proporcione un correo electrónico de contacto:</strong> Ingrese su dirección de correo electrónico utilizando el ajuste <code>EMAIL_LETS_ENCRYPT</code> para recibir notificaciones importantes sobre sus certificados.</li>
<li><strong>Elija el tipo de desafío:</strong> Seleccione la verificación <code>http</code> o <code>dns</code> con el ajuste <code>LETS_ENCRYPT_CHALLENGE</code>.</li>
<li><strong>Configure el proveedor de DNS:</strong> Si utiliza desafíos DNS, especifique su proveedor de DNS y sus credenciales.</li>
<li><strong>Seleccione el perfil del certificado:</strong> Elija su perfil de certificado preferido utilizando el ajuste <code>LETS_ENCRYPT_PROFILE</code> (classic, tlsserver o shortlived).</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, los certificados se emiten, instalan y renuevan automáticamente según sea necesario.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Perfiles de Certificado</p>
<p>Let's Encrypt proporciona diferentes perfiles de certificado para diferentes casos de uso: - <strong>classic</strong>: Certificados de propósito general con una validez de 90 días (predeterminado) - <strong>tlsserver</strong>: Optimizado para la autenticación de servidores TLS con una validez de 90 días y una carga útil más pequeña - <strong>shortlived</strong>: Seguridad mejorada con una validez de 7 días para entornos automatizados - <strong>custom</strong>: Si su servidor ACME admite un perfil diferente, configúrelo usando <code>LETS_ENCRYPT_CUSTOM_PROFILE</code>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Disponibilidad del Perfil</p>
<p>Tenga en cuenta que los perfiles <code>tlsserver</code> y <code>shortlived</code> pueden no estar disponibles en todos los entornos o con todos los clientes ACME en este momento. El perfil <code>classic</code> tiene la compatibilidad más amplia y se recomienda para la mayoría de los usuarios. Si un perfil seleccionado no está disponible, el sistema volverá automáticamente al perfil <code>classic</code>.</p>
</div>
<h3 id="ajustes-de-configuracion_18">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTO_LETS_ENCRYPT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Let's Encrypt:</strong> Establezca en <code>yes</code> para habilitar la emisión y renovación automática de certificados.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PASSTHROUGH</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Pasar a través de Let's Encrypt:</strong> Establezca en <code>yes</code> para pasar las solicitudes de Let's Encrypt al servidor web. Esto es útil cuando BunkerWeb está detrás de otro proxy inverso que maneja SSL.</td>
</tr>
<tr>
<td><code>EMAIL_LETS_ENCRYPT</code></td>
<td><code>contact@{FIRST_SERVER}</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Correo electrónico de contacto:</strong> Dirección de correo electrónico que se utiliza para las notificaciones de Let's Encrypt y se incluye en los certificados.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CHALLENGE</code></td>
<td><code>http</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tipo de desafío:</strong> Método utilizado para verificar la propiedad del dominio. Opciones: <code>http</code> o <code>dns</code>.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROVIDER</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Proveedor de DNS:</strong> Cuando se utilizan desafíos DNS, el proveedor de DNS a utilizar (por ejemplo, cloudflare, route53, digitalocean).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_PROPAGATION</code></td>
<td><code>default</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Propagación de DNS:</strong> El tiempo de espera para la propagación de DNS en segundos. Si no se proporciona ningún valor, se utiliza el tiempo de propagación predeterminado del proveedor.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Elemento de credencial:</strong> Elementos de configuración para la autenticación del proveedor de DNS (por ejemplo, <code>cloudflare_api_token 123456</code>). Los valores pueden ser texto sin formato, codificados en base64 o un objeto JSON.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_WILDCARD</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Certificados comodín:</strong> Cuando se establece en <code>yes</code>, crea certificados comodín para todos los dominios. Solo disponible con desafíos DNS.</td>
</tr>
<tr>
<td><code>USE_LETS_ENCRYPT_STAGING</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Usar entorno de prueba:</strong> Cuando se establece en <code>yes</code>, utiliza el entorno de prueba de Let's Encrypt para realizar pruebas. El entorno de prueba tiene límites de velocidad más altos pero produce certificados que no son de confianza para los navegadores.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CLEAR_OLD_CERTS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Limpiar certificados antiguos:</strong> Cuando se establece en <code>yes</code>, elimina los certificados antiguos que ya no son necesarios durante la renovación.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_PROFILE</code></td>
<td><code>classic</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Perfil de certificado:</strong> Seleccione el perfil de certificado a utilizar. Opciones: <code>classic</code> (propósito general), <code>tlsserver</code> (optimizado para servidores TLS) o <code>shortlived</code> (certificados de 7 días).</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_CUSTOM_PROFILE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Perfil de certificado personalizado:</strong> Ingrese un perfil de certificado personalizado si su servidor ACME admite perfiles no estándar. Esto anula <code>LETS_ENCRYPT_PROFILE</code> si está configurado.</td>
</tr>
<tr>
<td><code>LETS_ENCRYPT_MAX_RETRIES</code></td>
<td><code>3</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Máximo de reintentos:</strong> Número de veces que se reintentará la generación de certificados en caso de fallo. Establezca en <code>0</code> para deshabilitar los reintentos. Útil para manejar problemas de red temporales o límites de velocidad de la API.</td>
</tr>
</tbody>
</table>
<p>!!! info "Información y comportamiento" - El ajuste <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code> es un ajuste múltiple y se puede utilizar para establecer varios elementos para el proveedor de DNS. Los elementos se guardarán como un archivo de caché, y Certbot leerá las credenciales de él. - Si no se proporciona ningún ajuste <code>LETS_ENCRYPT_DNS_PROPAGATION</code>, se utiliza el tiempo de propagación predeterminado del proveedor. - La automatización completa de Let's Encrypt utilizando el desafío <code>http</code> funciona en modo de flujo (stream) siempre que abra el puerto <code>80/tcp</code> desde el exterior. Utilice el ajuste <code>LISTEN_STREAM_PORT_SSL</code> para elegir su puerto de escucha SSL/TLS. - Si <code>LETS_ENCRYPT_PASSTHROUGH</code> se establece en <code>yes</code>, BunkerWeb no manejará las solicitudes de desafío ACME por sí mismo, sino que las pasará al servidor web de backend. Esto es útil en escenarios donde BunkerWeb actúa como un proxy inverso frente a otro servidor que está configurado para manejar los desafíos de Let's Encrypt.</p>
<div class="admonition tip">
<p class="admonition-title">Desafíos HTTP vs. DNS</p>
<p><strong>Los desafíos HTTP</strong> son más fáciles de configurar y funcionan bien para la mayoría de los sitios web:</p>
<ul>
<li>Requiere que su sitio web sea accesible públicamente en el puerto 80</li>
<li>Configurado automáticamente por BunkerWeb</li>
<li>No se puede utilizar para certificados comodín</li>
</ul>
<p><strong>Los desafíos DNS</strong> ofrecen más flexibilidad y son necesarios para los certificados comodín:</p>
<ul>
<li>Funciona incluso cuando su sitio web no es accesible públicamente</li>
<li>Requiere credenciales de la API del proveedor de DNS</li>
<li>Requerido para certificados comodín (por ejemplo, *.example.com)</li>
<li>Útil cuando el puerto 80 está bloqueado o no está disponible</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Certificados comodín</p>
<p>Los certificados comodín solo están disponibles con desafíos DNS. Si desea utilizarlos, debe establecer el ajuste <code>USE_LETS_ENCRYPT_WILDCARD</code> en <code>yes</code> y configurar correctamente las credenciales de su proveedor de DNS.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Límites de velocidad</p>
<p>Let's Encrypt impone límites de velocidad en la emisión de certificados. Al probar las configuraciones, utilice el entorno de prueba estableciendo <code>USE_LETS_ENCRYPT_STAGING</code> en <code>yes</code> para evitar alcanzar los límites de velocidad de producción. Los certificados de prueba no son de confianza para los navegadores, pero son útiles para validar su configuración.</p>
</div>
<h3 id="proveedores-de-dns-compatibles">Proveedores de DNS compatibles</h3>
<p>El complemento de Let's Encrypt admite una amplia gama de proveedores de DNS para los desafíos de DNS. Cada proveedor requiere credenciales específicas que deben proporcionarse utilizando el ajuste <code>LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</code>.</p>
<table>
<thead>
<tr>
<th>Proveedor</th>
<th>Descripción</th>
<th>Ajustes obligatorios</th>
<th>Ajustes opcionales</th>
<th>Documentación</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bunny</code></td>
<td>bunny.net</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://github.com/mwt/certbot-dns-bunny/blob/main/README.rst">Documentación</a></td>
</tr>
<tr>
<td><code>cloudflare</code></td>
<td>Cloudflare</td>
<td>ya sea <code>api_token</code><br>o <code>email</code> y <code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-cloudflare.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>desec</code></td>
<td>deSEC</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/desec-io/certbot-dns-desec/blob/main/README.md">Documentación</a></td>
</tr>
<tr>
<td><code>digitalocean</code></td>
<td>DigitalOcean</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-digitalocean.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>domainoffensive</code></td>
<td>Domain-Offensive</td>
<td><code>api_token</code></td>
<td></td>
<td><a href="https://github.com/domainoffensive/certbot-dns-domainoffensive/blob/master/README.md">Documentación</a></td>
</tr>
<tr>
<td><code>dnsimple</code></td>
<td>DNSimple</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsimple.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>dnsmadeeasy</code></td>
<td>DNS Made Easy</td>
<td><code>api_key</code><br><code>secret_key</code></td>
<td></td>
<td><a href="https://certbot-dns-dnsmadeeasy.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>dynu</code></td>
<td>Dynu</td>
<td><code>auth_token</code></td>
<td></td>
<td><a href="https://github.com/bikram990/certbot-dns-dynu/blob/main/README.md">Documentación</a></td>
</tr>
<tr>
<td><code>gehirn</code></td>
<td>Gehirn DNS</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-gehirn.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>google</code></td>
<td>Google Cloud</td>
<td><code>project_id</code><br><code>private_key_id</code><br><code>private_key</code><br><code>client_email</code><br><code>client_id</code><br><code>client_x509_cert_url</code></td>
<td><code>type</code> (predeterminado: <code>service_account</code>)<br><code>auth_uri</code> (predeterminado: <code>https://accounts.google.com/o/oauth2/auth</code>)<br><code>token_uri</code> (predeterminado: <code>https://accounts.google.com/o/oauth2/token</code>)<br><code>auth_provider_x509_cert_url</code> (predeterminado: <code>https://www.googleapis.com/oauth2/v1/certs</code>)</td>
<td><a href="https://certbot-dns-google.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>infomaniak</code></td>
<td>Infomaniak</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/infomaniak/certbot-dns-infomaniak/blob/main/README.rst">Documentación</a></td>
</tr>
<tr>
<td><code>ionos</code></td>
<td>IONOS</td>
<td><code>prefix</code><br><code>secret</code></td>
<td><code>endpoint</code> (predeterminado: <code>https://api.hosting.ionos.com</code>)</td>
<td><a href="https://github.com/helgeerbe/certbot-dns-ionos/blob/master/README.md">Documentación</a></td>
</tr>
<tr>
<td><code>linode</code></td>
<td>Linode</td>
<td><code>key</code></td>
<td></td>
<td><a href="https://certbot-dns-linode.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>luadns</code></td>
<td>LuaDNS</td>
<td><code>email</code><br><code>token</code></td>
<td></td>
<td><a href="https://certbot-dns-luadns.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>njalla</code></td>
<td>Njalla</td>
<td><code>token</code></td>
<td></td>
<td><a href="https://github.com/chaptergy/certbot-dns-njalla/blob/main/README.md">Documentación</a></td>
</tr>
<tr>
<td><code>nsone</code></td>
<td>NS1</td>
<td><code>api_key</code></td>
<td></td>
<td><a href="https://certbot-dns-nsone.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>ovh</code></td>
<td>OVH</td>
<td><code>application_key</code><br><code>application_secret</code><br><code>consumer_key</code></td>
<td><code>endpoint</code> (predeterminado: <code>ovh-eu</code>)</td>
<td><a href="https://certbot-dns-ovh.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>rfc2136</code></td>
<td>RFC 2136</td>
<td><code>server</code><br><code>name</code><br><code>secret</code></td>
<td><code>port</code> (predeterminado: <code>53</code>)<br><code>algorithm</code> (predeterminado: <code>HMAC-SHA512</code>)<br><code>sign_query</code> (predeterminado: <code>false</code>)</td>
<td><a href="https://certbot-dns-rfc2136.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>route53</code></td>
<td>Amazon Route 53</td>
<td><code>access_key_id</code><br><code>secret_access_key</code></td>
<td></td>
<td><a href="https://certbot-dns-route53.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>sakuracloud</code></td>
<td>Sakura Cloud</td>
<td><code>api_token</code><br><code>api_secret</code></td>
<td></td>
<td><a href="https://certbot-dns-sakuracloud.readthedocs.io/en/stable/">Documentación</a></td>
</tr>
<tr>
<td><code>scaleway</code></td>
<td>Scaleway</td>
<td><code>application_token</code></td>
<td></td>
<td><a href="https://github.com/vanonox/certbot-dns-scaleway/blob/main/README.rst">Documentación</a></td>
</tr>
</tbody>
</table>
<h3 id="configuraciones-de-ejemplo_19">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="28:6"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><input id="__tabbed_28_3" name="__tabbed_28" type="radio" /><input id="__tabbed_28_4" name="__tabbed_28" type="radio" /><input id="__tabbed_28_5" name="__tabbed_28" type="radio" /><input id="__tabbed_28_6" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">Desafío HTTP Básico</label><label for="__tabbed_28_2">DNS de Cloudflare con Comodín</label><label for="__tabbed_28_3">Configuración de AWS Route53</label><label for="__tabbed_28_4">Pruebas con el Entorno de Prueba y Reintentos</label><label for="__tabbed_28_5">DigitalOcean con Tiempo de Propagación Personalizado</label><label for="__tabbed_28_6">DNS de Google Cloud</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuración simple que utiliza desafíos HTTP para un solo dominio:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para certificados comodín utilizando el DNS de Cloudflare:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cloudflare&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api_token</span><span class="nv"> </span><span class="s">SU_TOKEN_DE_API&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_WILDCARD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que utiliza Amazon Route53 para los desafíos de DNS:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;route53&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_access_key_id</span><span class="nv"> </span><span class="s">SU_CLAVE_DE_ACCESO&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aws_secret_access_key</span><span class="nv"> </span><span class="s">SU_CLAVE_SECRETA&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para probar la configuración con el entorno de prueba y ajustes de reintento mejorados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="nt">USE_LETS_ENCRYPT_STAGING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LETS_ENCRYPT_MAX_RETRIES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que utiliza el DNS de DigitalOcean con un tiempo de espera de propagación más largo:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;digitalocean&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;token</span><span class="nv"> </span><span class="s">SU_TOKEN_DE_API&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROPAGATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que utiliza el DNS de Google Cloud con credenciales de cuenta de servicio:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AUTO_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">EMAIL_LETS_ENCRYPT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin@example.com&quot;</span>
<span class="nt">LETS_ENCRYPT_CHALLENGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dns&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_PROVIDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;google&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;project_id</span><span class="nv"> </span><span class="s">su-id-de-proyecto&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key_id</span><span class="nv"> </span><span class="s">su-id-de-clave-privada&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;private_key</span><span class="nv"> </span><span class="s">su-clave-privada&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_email</span><span class="nv"> </span><span class="s">su-correo-de-cuenta-de-servicio&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_5</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_id</span><span class="nv"> </span><span class="s">su-id-de-cliente&quot;</span>
<span class="nt">LETS_ENCRYPT_DNS_CREDENTIAL_ITEM_6</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;client_x509_cert_url</span><span class="nv"> </span><span class="s">su-url-de-certificado&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="limit">Limit</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de Límite en BunkerWeb proporciona capacidades robustas para aplicar políticas de limitación en su sitio web, asegurando un uso justo y protegiendo sus recursos del abuso, ataques de denegación de servicio y consumo excesivo de recursos. Estas políticas incluyen:</p>
<ul>
<li><strong>Número de conexiones por dirección IP</strong> (soporte para STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" />)</li>
<li><strong>Número de solicitudes por dirección IP y URL dentro de un período de tiempo específico</strong> (soporte para STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" />)</li>
</ul>
<h3 id="como-funciona_1">Cómo funciona</h3>
<ol>
<li><strong>Limitación de Tasa de Solicitudes:</strong> Rastrea el número de solicitudes de cada dirección IP del cliente a URL específicas. Si un cliente excede el límite de tasa configurado, las solicitudes posteriores son denegadas temporalmente.</li>
<li><strong>Limitación de Conexiones:</strong> Monitorea y restringe el número de conexiones concurrentes de cada dirección IP del cliente. Se pueden aplicar diferentes límites de conexión según el protocolo utilizado (HTTP/1, HTTP/2, HTTP/3 o stream).</li>
<li>En ambos casos, los clientes que exceden los límites definidos reciben un código de estado HTTP <strong>"429 - Demasiadas Solicitudes"</strong>, lo que ayuda a prevenir la sobrecarga del servidor.</li>
</ol>
<h3 id="pasos-para-usar">Pasos para usar</h3>
<ol>
<li><strong>Habilitar la Limitación de Tasa de Solicitudes:</strong> Use <code>USE_LIMIT_REQ</code> para habilitar la limitación de tasa de solicitudes y defina patrones de URL junto con sus correspondientes límites de tasa.</li>
<li><strong>Habilitar la Limitación de Conexiones:</strong> Use <code>USE_LIMIT_CONN</code> para habilitar la limitación de conexiones y establezca el número máximo de conexiones concurrentes para diferentes protocolos.</li>
<li><strong>Aplicar Control Granular:</strong> Cree múltiples reglas de límite de tasa para diferentes URL para proporcionar diferentes niveles de protección en su sitio.</li>
<li><strong>Monitorear la Efectividad:</strong> Use la <a href="../web-ui/">interfaz de usuario web</a> para ver estadísticas sobre las solicitudes y conexiones limitadas.</li>
</ol>
<h3 id="ajustes-de-configuracion_19">Ajustes de Configuración</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="29:2"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><input id="__tabbed_29_2" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">Limitación de Tasa de Solicitudes</label><label for="__tabbed_29_2">Limitación de Conexiones</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_REQ</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Limitación de Solicitudes:</strong> Establezca en <code>yes</code> para habilitar la función de limitación de tasa de solicitudes.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Patrón de URL:</strong> Patrón de URL (expresión regular PCRE) al que se aplicará el límite de tasa; use <code>/</code> para aplicar a todas las solicitudes.</td>
</tr>
<tr>
<td><code>LIMIT_REQ_RATE</code></td>
<td><code>2r/s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Límite de Tasa:</strong> Tasa máxima de solicitudes en el formato <code>Nr/t</code>, donde N es el número de solicitudes y t es la unidad de tiempo: s (segundo), m (minuto), h (hora) o d (día).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Formato de Limitación de Tasa</p>
<p>El formato del límite de tasa se especifica como <code>Nr/t</code> donde:</p>
<ul>
<li><code>N</code> es el número de solicitudes permitidas</li>
<li><code>r</code> es una 'r' literal (para 'solicitudes')</li>
<li><code>/</code> es una barra literal</li>
<li><code>t</code> es la unidad de tiempo: <code>s</code> (segundo), <code>m</code> (minuto), <code>h</code> (hora) o <code>d</code> (día)</li>
</ul>
<p>Por ejemplo, <code>5r/m</code> significa que se permiten 5 solicitudes por minuto desde cada dirección IP.</p>
</div>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_LIMIT_CONN</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Limitación de Conexiones:</strong> Establezca en <code>yes</code> para habilitar la función de limitación de conexiones.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP1</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Conexiones HTTP/1.X:</strong> Número máximo de conexiones HTTP/1.X concurrentes por dirección IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP2</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Flujos HTTP/2:</strong> Número máximo de flujos HTTP/2 concurrentes por dirección IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_HTTP3</code></td>
<td><code>100</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Flujos HTTP/3:</strong> Número máximo de flujos HTTP/3 concurrentes por dirección IP.</td>
</tr>
<tr>
<td><code>LIMIT_CONN_MAX_STREAM</code></td>
<td><code>10</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Conexiones de Flujo:</strong> Número máximo de conexiones de flujo concurrentes por dirección IP.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>!!! info "Limitación de Conexiones vs. Solicitudes" - <strong>La limitación de conexiones</strong> restringe el número de conexiones simultáneas que una sola dirección IP puede mantener. - <strong>La limitación de tasa de solicitudes</strong> restringe el número de solicitudes que una dirección IP puede hacer dentro de un período de tiempo definido.</p>
<pre><code>El uso de ambos métodos proporciona una protección completa contra varios tipos de abuso.
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Estableciendo Límites Apropiados</p>
<p>Establecer límites demasiado restrictivos puede afectar a los usuarios legítimos, especialmente para HTTP/2 y HTTP/3, donde los navegadores a menudo usan múltiples flujos. Los valores predeterminados están equilibrados para la mayoría de los casos de uso, pero considere ajustarlos según las necesidades de su aplicación y el comportamiento del usuario.</p>
</div>
<h3 id="configuraciones-de-ejemplo_20">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="30:4"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><input id="__tabbed_30_2" name="__tabbed_30" type="radio" /><input id="__tabbed_30_3" name="__tabbed_30" type="radio" /><input id="__tabbed_30_4" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">Protección Básica</label><label for="__tabbed_30_2">Protegiendo Puntos Finales Específicos</label><label for="__tabbed_30_3">Configuración para un Sitio de Alto Tráfico</label><label for="__tabbed_30_4">Configuración para un Servidor API</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que utiliza los ajustes predeterminados para proteger todo su sitio:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con diferentes límites de tasa para varios puntos finales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Regla predeterminada para todas las solicitudes</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/s&quot;</span>

<span class="c1"># Límite más estricto para la página de inicio de sesión</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/login&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1r/s&quot;</span>

<span class="c1"># Límite más estricto para la API</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración ajustada para sitios de alto tráfico con límites más permisivos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Límite general</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30r/s&quot;</span>

<span class="c1"># Protección del área de administración</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/admin/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5r/s&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;50&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para un servidor API con límites de tasa expresados en solicitudes por minuto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_LIMIT_REQ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Puntos finales de la API pública</span>
<span class="nt">LIMIT_REQ_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/public/&quot;</span>
<span class="nt">LIMIT_REQ_RATE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120r/m&quot;</span>

<span class="c1"># Puntos finales de la API privada</span>
<span class="nt">LIMIT_REQ_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/private/&quot;</span>
<span class="nt">LIMIT_REQ_RATE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300r/m&quot;</span>

<span class="c1"># Punto final de autenticación</span>
<span class="nt">LIMIT_REQ_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/auth&quot;</span>
<span class="nt">LIMIT_REQ_RATE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10r/m&quot;</span>

<span class="nt">USE_LIMIT_CONN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="nt">LIMIT_CONN_MAX_STREAM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="load-balancer-pro">Load Balancer <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Provides load balancing feature to group of upstreams with optional healthchecks.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_DICT_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>no</td>
<td>Shared dict size (datastore for all healthchecks).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_NAME</code></td>
<td></td>
<td>global</td>
<td>sí</td>
<td>Name of the upstream (used in REVERSE_PROXY_HOST).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_SERVERS</code></td>
<td></td>
<td>global</td>
<td>sí</td>
<td>List of servers/IPs in the server group.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_MODE</code></td>
<td><code>round-robin</code></td>
<td>global</td>
<td>sí</td>
<td>Load balancing mode (round-robin or sticky).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_STICKY_METHOD</code></td>
<td><code>ip</code></td>
<td>global</td>
<td>sí</td>
<td>Sticky session method (ip or cookie).</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_RESOLVE</code></td>
<td><code>no</code></td>
<td>global</td>
<td>sí</td>
<td>Dynamically resolve upstream hostnames.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE</code></td>
<td></td>
<td>global</td>
<td>sí</td>
<td>Number of keepalive connections to cache per worker.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>global</td>
<td>sí</td>
<td>Keepalive timeout for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_UPSTREAM_KEEPALIVE_TIME</code></td>
<td><code>1h</code></td>
<td>global</td>
<td>sí</td>
<td>Keepalive time for upstream connections.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_URL</code></td>
<td><code>/status</code></td>
<td>global</td>
<td>sí</td>
<td>The healthcheck URL.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_INTERVAL</code></td>
<td><code>2000</code></td>
<td>global</td>
<td>sí</td>
<td>Healthcheck interval in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TIMEOUT</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>sí</td>
<td>Healthcheck timeout in milliseconds.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_FALL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>sí</td>
<td>Number of failed healthchecks before marking the server as down.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_RISE</code></td>
<td><code>1</code></td>
<td>global</td>
<td>sí</td>
<td>Number of successful healthchecks before marking the server as up.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_VALID_STATUSES</code></td>
<td><code>200</code></td>
<td>global</td>
<td>sí</td>
<td>HTTP status considered valid in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_CONCURRENCY</code></td>
<td><code>10</code></td>
<td>global</td>
<td>sí</td>
<td>Maximum number of concurrent healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_TYPE</code></td>
<td><code>http</code></td>
<td>global</td>
<td>sí</td>
<td>Type of healthcheck (http or https).</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>sí</td>
<td>Verify SSL certificate in healthchecks.</td>
</tr>
<tr>
<td><code>LOADBALANCER_HEALTHCHECK_HOST</code></td>
<td></td>
<td>global</td>
<td>sí</td>
<td>Host header for healthchecks (useful for HTTPS).</td>
</tr>
</tbody>
</table>
<h2 id="metrics">Metrics</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de Métricas proporciona capacidades completas de monitoreo y recolección de datos para su instancia de BunkerWeb. Esta función le permite rastrear varios indicadores de rendimiento, eventos de seguridad y estadísticas del sistema, brindándole información valiosa sobre el comportamiento y la salud de sus sitios web y servicios protegidos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>BunkerWeb recopila métricas clave durante el procesamiento de solicitudes y respuestas.</li>
<li>Estas métricas incluyen contadores de solicitudes bloqueadas, mediciones de rendimiento y varias estadísticas relacionadas con la seguridad.</li>
<li>Los datos se almacenan de manera eficiente en la memoria, con límites configurables para evitar el uso excesivo de recursos.</li>
<li>Para configuraciones de múltiples instancias, se puede usar Redis para centralizar y agregar datos de métricas.</li>
<li>Las métricas recopiladas se pueden acceder a través de la API o visualizarse en la <a href="../web-ui/">interfaz de usuario web</a>.</li>
<li>Esta información le ayuda a identificar amenazas de seguridad, solucionar problemas y optimizar su configuración.</li>
</ol>
<h3 id="implementacion-tecnica">Implementación Técnica</h3>
<p>El complemento de métricas funciona mediante:</p>
<ul>
<li>El uso de diccionarios compartidos en NGINX, donde <code>metrics_datastore</code> se utiliza para HTTP y <code>metrics_datastore_stream</code> para el tráfico TCP/UDP</li>
<li>El aprovechamiento de una caché LRU para un almacenamiento eficiente en memoria</li>
<li>La sincronización periódica de datos entre los trabajadores (workers) mediante temporizadores</li>
<li>El almacenamiento de información detallada sobre las solicitudes bloqueadas, incluida la dirección IP del cliente, el país, la marca de tiempo, los detalles de la solicitud y el motivo del bloqueo</li>
<li>El soporte para métricas específicas de complementos a través de una interfaz común de recolección de métricas</li>
<li>La provisión de puntos finales de API para consultar las métricas recopiladas</li>
</ul>
<h3 id="como-usar_19">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Métricas:</p>
<ol>
<li><strong>Habilite la función:</strong> La recolección de métricas está habilitada por defecto. Puede controlar esto con el ajuste <code>USE_METRICS</code>.</li>
<li><strong>Configure la asignación de memoria:</strong> Establezca la cantidad de memoria a asignar para el almacenamiento de métricas utilizando el ajuste <code>METRICS_MEMORY_SIZE</code>.</li>
<li><strong>Establezca los límites de almacenamiento:</strong> Defina cuántas solicitudes bloqueadas almacenar por trabajador y en Redis con los ajustes respectivos.</li>
<li><strong>Acceda a los datos:</strong> Vea las métricas recopiladas a través de la <a href="../web-ui/">interfaz de usuario web</a> o los puntos finales de la API.</li>
<li><strong>Analice la información:</strong> Use los datos recopilados para identificar patrones, detectar problemas de seguridad y optimizar su configuración.</li>
</ol>
<h3 id="metricas-recopiladas">Métricas Recopiladas</h3>
<p>El complemento de métricas recopila la siguiente información:</p>
<ol>
<li>
<p><strong>Solicitudes Bloqueadas</strong>: Para cada solicitud bloqueada, se almacenan los siguientes datos:</p>
<ul>
<li>ID de la solicitud y marca de tiempo</li>
<li>Dirección IP del cliente y país (cuando esté disponible)</li>
<li>Método HTTP y URL</li>
<li>Código de estado HTTP</li>
<li>Agente de usuario</li>
<li>Motivo del bloqueo y modo de seguridad</li>
<li>Nombre del servidor</li>
<li>Datos adicionales relacionados con el motivo del bloqueo</li>
</ul>
</li>
<li>
<p><strong>Contadores de Complementos</strong>: Varios contadores específicos de complementos que rastrean actividades y eventos.</p>
</li>
</ol>
<h3 id="acceso-a-la-api">Acceso a la API</h3>
<p>Se puede acceder a los datos de las métricas a través de los puntos finales de la API interna de BunkerWeb:</p>
<ul>
<li><strong>Punto final</strong>: <code>/metrics/{filtro}</code></li>
<li><strong>Método</strong>: GET</li>
<li><strong>Descripción</strong>: Recupera los datos de las métricas según el filtro especificado</li>
<li><strong>Formato de respuesta</strong>: Objeto JSON que contiene las métricas solicitadas</li>
</ul>
<p>Por ejemplo, <code>/metrics/requests</code> devuelve información sobre las solicitudes bloqueadas.</p>
<div class="admonition info">
<p class="admonition-title">Configuración del Acceso a la API</p>
<p>Para acceder a las métricas a través de la API, debe asegurarse de que:</p>
<ol>
<li>La función de API esté habilitada con <code>USE_API: "yes"</code> (habilitada por defecto)</li>
<li>Su IP de cliente esté incluida en el ajuste <code>API_WHITELIST_IP</code> (el valor predeterminado es <code>127.0.0.0/8</code>)</li>
<li>Esté accediendo a la API en el puerto configurado (el valor predeterminado es <code>5000</code> a través del ajuste <code>API_HTTP_PORT</code>)</li>
<li>Esté utilizando el valor correcto de <code>API_SERVER_NAME</code> en el encabezado Host (el valor predeterminado es <code>bwapi</code>)</li>
<li>Si <code>API_TOKEN</code> está configurado, incluya <code>Authorization: Bearer &lt;token&gt;</code> en los encabezados de la solicitud.</li>
</ol>
<p>Solicitudes típicas:</p>
<p>Sin token (cuando <code>API_TOKEN</code> no está configurado):
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://su-instancia-de-bunkerweb:5000/metrics/requests
</code></pre></div></p>
<p>Con token (cuando <code>API_TOKEN</code> está configurado):
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: bwapi&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$API_TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://su-instancia-de-bunkerweb:5000/metrics/requests
</code></pre></div></p>
<p>Si ha personalizado el <code>API_SERVER_NAME</code> a algo diferente del valor predeterminado <code>bwapi</code>, use ese valor en el encabezado Host en su lugar.</p>
<p>Para entornos de producción seguros, restrinja el acceso a la API a IPs de confianza y habilite <code>API_TOKEN</code>.</p>
</div>
<h3 id="ajustes-de-configuracion_20">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_METRICS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Métricas:</strong> Establezca en <code>yes</code> para habilitar la recolección y recuperación de métricas.</td>
</tr>
<tr>
<td><code>METRICS_MEMORY_SIZE</code></td>
<td><code>16m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tamaño de la Memoria:</strong> Tamaño del almacenamiento interno para las métricas (p. ej., <code>16m</code>, <code>32m</code>).</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS</code></td>
<td><code>1000</code></td>
<td>global</td>
<td>no</td>
<td><strong>Máximo de Solicitudes Bloqueadas:</strong> Número máximo de solicitudes bloqueadas para almacenar por trabajador.</td>
</tr>
<tr>
<td><code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code></td>
<td><code>100000</code></td>
<td>global</td>
<td>no</td>
<td><strong>Máximo de Solicitudes Bloqueadas en Redis:</strong> Número máximo de solicitudes bloqueadas para almacenar en Redis.</td>
</tr>
<tr>
<td><code>METRICS_SAVE_TO_REDIS</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Guardar Métricas en Redis:</strong> Establezca en <code>yes</code> para guardar las métricas (contadores y tablas) en Redis para la agregación en todo el clúster.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Dimensionamiento de la Asignación de Memoria</p>
<p>El ajuste <code>METRICS_MEMORY_SIZE</code> debe ajustarse en función de su volumen de tráfico y el número de instancias. Para sitios de alto tráfico, considere aumentar este valor para garantizar que todas las métricas se capturen sin pérdida de datos.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Integración con Redis</p>
<p>Cuando BunkerWeb está configurado para usar <a href="#redis">Redis</a>, el complemento de métricas sincronizará automáticamente los datos de las solicitudes bloqueadas con el servidor Redis. Esto proporciona una vista centralizada de los eventos de seguridad en múltiples instancias de BunkerWeb.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Rendimiento</p>
<p>Establecer valores muy altos para <code>METRICS_MAX_BLOCKED_REQUESTS</code> o <code>METRICS_MAX_BLOCKED_REQUESTS_REDIS</code> puede aumentar el uso de la memoria. Supervise los recursos de su sistema y ajuste estos valores según sus necesidades reales y los recursos disponibles.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Almacenamiento Específico del Trabajador</p>
<p>Cada trabajador de NGINX mantiene sus propias métricas en la memoria. Al acceder a las métricas a través de la API, los datos de todos los trabajadores se agregan automáticamente para proporcionar una vista completa.</p>
</div>
<h3 id="configuraciones-de-ejemplo_21">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="31:4"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><input id="__tabbed_31_2" name="__tabbed_31" type="radio" /><input id="__tabbed_31_3" name="__tabbed_31" type="radio" /><input id="__tabbed_31_4" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">Configuración Básica</label><label for="__tabbed_31_2">Entorno de Bajos Recursos</label><label for="__tabbed_31_3">Entorno de Alto Tráfico</label><label for="__tabbed_31_4">Métricas Deshabilitadas</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuración predeterminada adecuada para la mayoría de las implementaciones:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;16m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para entornos con recursos limitados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para sitios web de alto tráfico que necesitan rastrear más eventos de seguridad:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">METRICS_MEMORY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64m&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5000&quot;</span>
<span class="nt">METRICS_MAX_BLOCKED_REQUESTS_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500000&quot;</span>
<span class="nt">METRICS_SAVE_TO_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con la recolección de métricas deshabilitada:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_METRICS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="migration-pro">Migration <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>Migration of BunkerWeb configuration between instances made easy via the web UI</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento Varios proporciona <strong>ajustes básicos esenciales</strong> que ayudan a mantener la seguridad y la funcionalidad de su sitio web. Este componente principal ofrece controles integrales para:</p>
<ul>
<li><strong>Comportamiento del servidor</strong> - Configure cómo responde su servidor a diversas solicitudes</li>
<li><strong>Ajustes HTTP</strong> - Gestione métodos, tamaños de solicitud y opciones de protocolo</li>
<li><strong>Gestión de archivos</strong> - Controle la entrega de archivos estáticos y optimice la entrega</li>
<li><strong>Soporte de protocolos</strong> - Habilite protocolos HTTP modernos para un mejor rendimiento</li>
<li><strong>Configuraciones del sistema</strong> - Amplíe la funcionalidad y mejore la seguridad</li>
</ul>
<p>Ya sea que necesite restringir los métodos HTTP, gestionar los tamaños de las solicitudes, optimizar el almacenamiento en caché de archivos o controlar cómo responde su servidor a diversas solicitudes, este complemento le brinda las herramientas para <strong>afinar el comportamiento de su servicio web</strong> mientras optimiza tanto el rendimiento como la seguridad.</p>
<h3 id="caracteristicas-clave">Características Clave</h3>
<table>
<thead>
<tr>
<th>Categoría de Característica</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Control de Métodos HTTP</strong></td>
<td>Defina qué métodos HTTP son aceptables para su aplicación</td>
</tr>
<tr>
<td><strong>Protección del Servidor Predeterminado</strong></td>
<td>Prevenga el acceso no autorizado a través de discrepancias de nombre de host y exija SNI para conexiones seguras</td>
</tr>
<tr>
<td><strong>Gestión del Tamaño de la Solicitud</strong></td>
<td>Establezca límites para los cuerpos de las solicitudes de los clientes y las cargas de archivos</td>
</tr>
<tr>
<td><strong>Entrega de Archivos Estáticos</strong></td>
<td>Configure y optimice la entrega de contenido estático desde carpetas raíz personalizadas</td>
</tr>
<tr>
<td><strong>Almacenamiento en Caché de Archivos</strong></td>
<td>Mejore el rendimiento a través de mecanismos avanzados de almacenamiento en caché de descriptores de archivos con ajustes personalizables</td>
</tr>
<tr>
<td><strong>Soporte de Protocolos</strong></td>
<td>Configure opciones de protocolos HTTP modernos (HTTP2/HTTP3) y ajustes de puerto Alt-Svc</td>
</tr>
<tr>
<td><strong>Informes Anónimos</strong></td>
<td>Informes de estadísticas de uso opcionales para ayudar a mejorar BunkerWeb</td>
</tr>
<tr>
<td><strong>Soporte de Complementos Externos</strong></td>
<td>Amplíe la funcionalidad integrando complementos externos a través de URL</td>
</tr>
<tr>
<td><strong>Control de Estado HTTP</strong></td>
<td>Configure cómo responde su servidor al denegar solicitudes (incluida la terminación de la conexión)</td>
</tr>
</tbody>
</table>
<h3 id="guia-de-configuracion_1">Guía de Configuración</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="32:1"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">Seguridad del Servidor Predeterminado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Controles del Servidor Predeterminado</strong></p>
<p>En HTTP, el encabezado <code>Host</code> especifica el servidor de destino, pero puede estar ausente o ser desconocido, a menudo debido a que los bots buscan vulnerabilidades.</p>
<p>Para bloquear tales solicitudes:</p>
<ul>
<li>Establezca <code>DISABLE_DEFAULT_SERVER</code> en <code>yes</code> para denegar silenciosamente tales solicitudes utilizando el <a href="https://http.dev/444">código de estado <code>444</code> de NGINX</a>.</li>
<li>Para una seguridad más estricta, habilite <code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code> para rechazar las conexiones SSL/TLS sin un SNI válido.</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Beneficios de Seguridad</p>
<ul>
<li>Bloquea la manipulación del encabezado Host y el escaneo de hosts virtuales</li>
<li>Mitiga los riesgos de contrabando de solicitudes HTTP</li>
<li>Elimina el servidor predeterminado como un vector de ataque</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DISABLE_DEFAULT_SERVER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Servidor Predeterminado:</strong> Establezca en <code>yes</code> para deshabilitar el servidor predeterminado cuando ningún nombre de host coincida con la solicitud.</td>
</tr>
<tr>
<td><code>DISABLE_DEFAULT_SERVER_STRICT_SNI</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>SNI Estricto:</strong> Cuando se establece en <code>yes</code>, requiere SNI para las conexiones HTTPS y rechaza las conexiones sin un SNI válido.</td>
</tr>
</tbody>
</table>
<pre><code>!!! warning "Aplicación de SNI"
    Habilitar la validación estricta de SNI proporciona una seguridad más fuerte, pero puede causar problemas si BunkerWeb está detrás de un proxy inverso que reenvía las solicitudes HTTPS sin preservar la información de SNI. Pruebe a fondo antes de habilitarlo en entornos de producción.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="33:2"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">Estado HTTP de Denegación</label><label for="__tabbed_33_2">Métodos HTTP</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Control de Estado HTTP</strong></p>
<p>El primer paso para manejar el acceso denegado del cliente es definir la acción apropiada. Esto se puede configurar usando el ajuste <code>DENY_HTTP_STATUS</code>. Cuando BunkerWeb deniega una solicitud, puede controlar su respuesta usando este ajuste. Por defecto, devuelve un estado <code>403 Prohibido</code>, mostrando una página web o contenido personalizado al cliente.</p>
<p>Alternativamente, establecerlo en <code>444</code> cierra la conexión inmediatamente sin enviar ninguna respuesta. Este <a href="https://http.dev/444">código de estado no estándar</a>, específico de NGINX, es útil para descartar silenciosamente las solicitudes no deseadas.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DENY_HTTP_STATUS</code></td>
<td><code>403</code></td>
<td>global</td>
<td>no</td>
<td><strong>Estado HTTP de Denegación:</strong> Código de estado HTTP a enviar cuando se deniega la solicitud (403 o 444). El código 444 cierra la conexión.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consideraciones del Código de Estado 444</p>
<p>Dado que los clientes no reciben retroalimentación, la solución de problemas puede ser más desafiante. Se recomienda establecer <code>444</code> solo si ha abordado a fondo los falsos positivos, tiene experiencia con BunkerWeb y requiere un mayor nivel de seguridad.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Modo stream</p>
<p>En <strong>modo stream</strong>, este ajuste siempre se aplica como <code>444</code>, lo que significa que la conexión se cerrará, independientemente del valor configurado.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Control de Métodos HTTP</strong></p>
<p>Restringir los métodos HTTP solo a los requeridos por su aplicación es una medida de seguridad fundamental que se adhiere al principio de privilegio mínimo. Al definir explícitamente los métodos HTTP aceptables, puede minimizar el riesgo de explotación a través de métodos no utilizados o peligrosos.</p>
<p>Esta característica se configura utilizando el ajuste <code>ALLOWED_METHODS</code>, donde los métodos se enumeran y se separan por un <code>|</code> (predeterminado: <code>GET|POST|HEAD</code>). Si un cliente intenta utilizar un método no listado, el servidor responderá con un estado <strong>405 - Método No Permitido</strong>.</p>
<p>Para la mayoría de los sitios web, el predeterminado <code>GET|POST|HEAD</code> es suficiente. Si su aplicación utiliza API RESTful, es posible que deba incluir métodos como <code>PUT</code> y <code>DELETE</code>.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios de Seguridad</p>
<ul>
<li>Previene la explotación de métodos HTTP no utilizados o innecesarios</li>
<li>Reduce la superficie de ataque al deshabilitar métodos potencialmente dañinos</li>
<li>Bloquea las técnicas de enumeración de métodos HTTP utilizadas por los atacantes</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALLOWED_METHODS</code></td>
<td><code>GET              | POST     | HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Métodos HTTP:</strong> Lista de métodos HTTP permitidos, separados por caracteres de barra vertical.</td>
</tr>
</tbody>
</table>
<pre><code>!!! abstract "CORS y Solicitudes de Pre-vuelo"
    Si su aplicación admite [Intercambio de Recursos de Origen Cruzado (CORS)](#cors), debe incluir el método `OPTIONS` en el ajuste `ALLOWED_METHODS` para manejar las solicitudes de pre-vuelo. Esto garantiza la funcionalidad adecuada para los navegadores que realizan solicitudes de origen cruzado.

!!! danger "Consideraciones de Seguridad"
    -   **Evite habilitar `TRACE` o `CONNECT`:** Estos métodos rara vez se necesitan y pueden introducir riesgos de seguridad significativos, como habilitar el Rastreo entre Sitios (XST) o ataques de túnel.
    -   **Revise regularmente los métodos permitidos:** Audite periódicamente el ajuste `ALLOWED_METHODS` para asegurarse de que se alinee con los requisitos actuales de su aplicación.
    -   **Pruebe a fondo antes de la implementación:** Los cambios en las restricciones de los métodos HTTP pueden afectar la funcionalidad de la aplicación. Valide su configuración en un entorno de preproducción antes de aplicarla a la producción.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="34:1"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="__tabbed_34_1">Límites de Tamaño de Solicitud</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Límites de Tamaño de Solicitud</strong></p>
<p>El tamaño máximo del cuerpo de la solicitud se puede controlar utilizando el ajuste <code>MAX_CLIENT_SIZE</code> (predeterminado: <code>10m</code>). Los valores aceptados siguen la sintaxis descrita <a href="https://nginx.org/en/docs/syntax.html">aquí</a>.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios de Seguridad</p>
<ul>
<li>Protege contra ataques de denegación de servicio causados por tamaños de carga útil excesivos</li>
<li>Mitiga las vulnerabilidades de desbordamiento de búfer</li>
<li>Previene los ataques de carga de archivos</li>
<li>Reduce el riesgo de agotamiento de los recursos del servidor</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MAX_CLIENT_SIZE</code></td>
<td><code>10m</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tamaño Máximo de Solicitud:</strong> El tamaño máximo permitido para los cuerpos de las solicitudes de los clientes (por ejemplo, cargas de archivos).</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Mejores Prácticas de Configuración del Tamaño de la Solicitud"
    Si necesita permitir un cuerpo de solicitud de tamaño ilimitado, puede establecer el valor de `MAX_CLIENT_SIZE` en `0`. Sin embargo, esto **no se recomienda** debido a los posibles riesgos de seguridad y rendimiento.

    **Mejores Prácticas:**

    -   Siempre configure `MAX_CLIENT_SIZE` al valor más pequeño que cumpla con los requisitos legítimos de su aplicación.
    -   Revise y ajuste regularmente este ajuste para alinearlo con las necesidades cambiantes de su aplicación.
    -   Evite establecer `0` a menos que sea absolutamente necesario, ya que puede exponer su servidor a ataques de denegación de servicio y agotamiento de recursos.

    Al gestionar cuidadosamente este ajuste, puede garantizar una seguridad y un rendimiento óptimos para su aplicación.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="35:1"><input checked="checked" id="__tabbed_35_1" name="__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="__tabbed_35_1">Soporte de Protocolo</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Ajustes del Protocolo HTTP</strong></p>
<p>Los protocolos HTTP modernos como HTTP/2 y HTTP/3 mejoran el rendimiento y la seguridad. BunkerWeb permite una fácil configuración de estos protocolos.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios de Seguridad y Rendimiento</p>
<ul>
<li><strong>Ventajas de Seguridad:</strong> Los protocolos modernos como HTTP/2 y HTTP/3 imponen TLS/HTTPS por defecto, reducen la susceptibilidad a ciertos ataques y mejoran la privacidad a través de encabezados cifrados (HTTP/3).</li>
<li><strong>Beneficios de Rendimiento:</strong> Características como la multiplexación, la compresión de encabezados, el empuje del servidor y la transferencia de datos binarios mejoran la velocidad y la eficiencia.</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LISTEN_HTTP</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Escucha HTTP:</strong> Responda a las solicitudes HTTP (inseguras) cuando se establezca en <code>yes</code>.</td>
</tr>
<tr>
<td><code>HTTP2</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP2:</strong> Soporte para el protocolo HTTP2 cuando HTTPS está habilitado.</td>
</tr>
<tr>
<td><code>HTTP3</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>HTTP3:</strong> Soporte para el protocolo HTTP3 cuando HTTPS está habilitado.</td>
</tr>
<tr>
<td><code>HTTP3_ALT_SVC_PORT</code></td>
<td><code>443</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Puerto Alt-Svc de HTTP3:</strong> Puerto a utilizar en el encabezado Alt-Svc para HTTP3.</td>
</tr>
</tbody>
</table>
<pre><code>!!! example "Sobre HTTP/3"
    HTTP/3, la última versión del Protocolo de Transferencia de Hipertexto, utiliza QUIC sobre UDP en lugar de TCP, abordando problemas como el bloqueo de cabeza de línea para conexiones más rápidas y fiables.

    NGINX introdujo soporte experimental para HTTP/3 y QUIC a partir de la versión 1.25.0. Sin embargo, esta característica todavía es experimental y se recomienda precaución para su uso en producción. Para más detalles, consulte la [documentación oficial de NGINX](https://nginx.org/en/docs/quic.html).

    Se recomienda realizar pruebas exhaustivas antes de habilitar HTTP/3 en entornos de producción.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="36:2"><input checked="checked" id="__tabbed_36_1" name="__tabbed_36" type="radio" /><input id="__tabbed_36_2" name="__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="__tabbed_36_1">Entrega de Archivos Estáticos</label><label for="__tabbed_36_2">Ajustes del Sistema</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Configuración de Entrega de Archivos</strong></p>
<p>BunkerWeb puede servir archivos estáticos directamente o actuar como un proxy inverso a un servidor de aplicaciones. Por defecto, los archivos se sirven desde <code>/var/www/html/{server_name}</code>.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SERVE_FILES</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Servir Archivos:</strong> Cuando se establece en <code>yes</code>, BunkerWeb servirá archivos estáticos desde la carpeta raíz configurada.</td>
</tr>
<tr>
<td><code>ROOT_FOLDER</code></td>
<td><code>/var/www/html/{server_name}</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Carpeta Raíz:</strong> El directorio desde el cual servir archivos estáticos. Vacío significa usar la ubicación predeterminada.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Mejores Prácticas para la Entrega de Archivos Estáticos</p>
<ul>
<li><strong>Servicio Directo:</strong> Habilite el servicio de archivos (<code>SERVE_FILES=yes</code>) cuando BunkerWeb sea responsable de servir los archivos estáticos directamente.</li>
<li><strong>Proxy Inverso:</strong> Si BunkerWeb actúa como un proxy inverso, <strong>desactive el servicio de archivos</strong> (<code>SERVE_FILES=no</code>) para reducir la superficie de ataque y evitar exponer directorios innecesarios.</li>
<li><strong>Permisos:</strong> Asegúrese de tener los permisos de archivo y las configuraciones de ruta adecuados para evitar el acceso no autorizado.</li>
<li><strong>Seguridad:</strong> Evite exponer directorios o archivos sensibles a través de configuraciones incorrectas.</li>
</ul>
<p>Al gestionar cuidadosamente la entrega de archivos estáticos, puede optimizar el rendimiento mientras mantiene un entorno seguro.</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Gestión de Complementos y del Sistema</strong></p>
<p>Estos ajustes gestionan la interacción de BunkerWeb con sistemas externos y contribuyen a mejorar el producto a través de estadísticas de uso anónimas opcionales.</p>
<p><strong>Informes Anónimos</strong></p>
<p>Los informes anónimos proporcionan al equipo de BunkerWeb información sobre cómo se está utilizando el software. Esto ayuda a identificar áreas de mejora y a priorizar el desarrollo de características. Los informes son estrictamente estadísticos y no incluyen ninguna información sensible o de identificación personal. Cubren:</p>
<ul>
<li>Características habilitadas</li>
<li>Patrones de configuración generales</li>
</ul>
<p>Puede deshabilitar esta característica si lo desea estableciendo <code>SEND_ANONYMOUS_REPORT</code> en <code>no</code>.</p>
<p><strong>Complementos Externos</strong></p>
<p>Los complementos externos le permiten ampliar la funcionalidad de BunkerWeb integrando módulos de terceros. Esto permite una personalización adicional y casos de uso avanzados.</p>
<div class="admonition danger">
<p class="admonition-title">Seguridad de los Complementos Externos</p>
<p><strong>Los complementos externos pueden introducir riesgos de seguridad si no se examinan adecuadamente.</strong> Siga estas mejores prácticas para minimizar las amenazas potenciales:</p>
<ul>
<li>Solo use complementos de fuentes de confianza.</li>
<li>Verifique la integridad del complemento utilizando sumas de verificación cuando estén disponibles.</li>
<li>Revise y actualice regularmente los complementos para garantizar la seguridad y la compatibilidad.</li>
</ul>
<p>Para más detalles, consulte la <a href="../plugins/">documentación de Complementos</a>.</p>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SEND_ANONYMOUS_REPORT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Informes Anónimos:</strong> Envíe informes de uso anónimos a los mantenedores de BunkerWeb.</td>
</tr>
<tr>
<td><code>EXTERNAL_PLUGIN_URLS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Complementos Externos:</strong> URL para descargar complementos externos (separados por espacios).</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="37:1"><input checked="checked" id="__tabbed_37_1" name="__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="__tabbed_37_1">Almacenamiento en Caché de Archivos</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Optimización del Almacenamiento en Caché de Archivos</strong></p>
<p>La caché de archivos abiertos mejora el rendimiento al almacenar descriptores de archivos y metadatos en la memoria, reduciendo la necesidad de operaciones repetidas del sistema de archivos.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios del Almacenamiento en Caché de Archivos</p>
<ul>
<li><strong>Rendimiento:</strong> Reduce la E/S del sistema de archivos, disminuye la latencia y reduce el uso de la CPU para las operaciones de archivos.</li>
<li><strong>Seguridad:</strong> Mitiga los ataques de tiempo al almacenar en caché las respuestas de error y reduce el impacto de los ataques DoS dirigidos al sistema de archivos.</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_OPEN_FILE_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Caché:</strong> Habilite el almacenamiento en caché de descriptores de archivos y metadatos para mejorar el rendimiento.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE</code></td>
<td><code>max=1000 inactive=20s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Configuración de Caché:</strong> Configure la caché de archivos abiertos (por ejemplo, entradas máximas y tiempo de espera de inactividad).</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Errores de Caché:</strong> Almacene en caché los errores de búsqueda de descriptores de archivos, así como las búsquedas exitosas.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Usos Mínimos:</strong> Número mínimo de accesos durante el período de inactividad para que un archivo permanezca en caché.</td>
</tr>
<tr>
<td><code>OPEN_FILE_CACHE_VALID</code></td>
<td><code>30s</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validez de la Caché:</strong> Tiempo después del cual los elementos en caché se revalidan.</td>
</tr>
</tbody>
</table>
<pre><code>**Guía de Configuración**

Para habilitar y configurar el almacenamiento en caché de archivos:
1.  Establezca `USE_OPEN_FILE_CACHE` en `yes` para activar la característica.
2.  Ajuste los parámetros de `OPEN_FILE_CACHE` para definir el número máximo de entradas en caché y su tiempo de espera de inactividad.
3.  Use `OPEN_FILE_CACHE_ERRORS` para almacenar en caché tanto las búsquedas exitosas como las fallidas, reduciendo las operaciones repetidas del sistema de archivos.
4.  Establezca `OPEN_FILE_CACHE_MIN_USES` para especificar el número mínimo de accesos requeridos para que un archivo permanezca en caché.
5.  Defina el período de validez de la caché con `OPEN_FILE_CACHE_VALID` para controlar con qué frecuencia se revalidan los elementos en caché.

!!! tip "Mejores Prácticas"
    -   Habilite el almacenamiento en caché de archivos para sitios web con muchos archivos estáticos para mejorar el rendimiento.
    -   Revise y ajuste regularmente la configuración de la caché para equilibrar el rendimiento y el uso de recursos.
    -   En entornos dinámicos donde los archivos cambian con frecuencia, considere reducir el período de validez de la caché o deshabilitar la característica para garantizar la frescura del contenido.
</code></pre>
<h3 id="configuraciones-de-ejemplo_22">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="38:7"><input checked="checked" id="__tabbed_38_1" name="__tabbed_38" type="radio" /><input id="__tabbed_38_2" name="__tabbed_38" type="radio" /><input id="__tabbed_38_3" name="__tabbed_38" type="radio" /><input id="__tabbed_38_4" name="__tabbed_38" type="radio" /><input id="__tabbed_38_5" name="__tabbed_38" type="radio" /><input id="__tabbed_38_6" name="__tabbed_38" type="radio" /><input id="__tabbed_38_7" name="__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="__tabbed_38_1">Seguridad del Servidor Predeterminado</label><label for="__tabbed_38_2">Estado HTTP de Denegación</label><label for="__tabbed_38_3">Métodos HTTP</label><label for="__tabbed_38_4">Límites de Tamaño de Solicitud</label><label for="__tabbed_38_5">Soporte de Protocolo</label><label for="__tabbed_38_6">Entrega de Archivos Estáticos</label><label for="__tabbed_38_7">Almacenamiento en Caché de Archivos</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuración de ejemplo para deshabilitar el servidor predeterminado y aplicar un SNI estricto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">DISABLE_DEFAULT_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">DISABLE_DEFAULT_SERVER_STRICT_SNI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para descartar silenciosamente las solicitudes no deseadas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">DENY_HTTP_STATUS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;444&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para restringir los métodos HTTP solo a los requeridos por una API RESTful:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ALLOWED_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET|POST|PUT|DELETE&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para limitar el tamaño máximo del cuerpo de la solicitud:</p>
<div class="highlight"><pre><span></span><code><span class="nt">MAX_CLIENT_SIZE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5m&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar HTTP/2 y HTTP/3 con un puerto Alt-Svc personalizado:</p>
<div class="highlight"><pre><span></span><code><span class="nt">HTTP2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">HTTP3_ALT_SVC_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;443&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para servir archivos estáticos desde una carpeta raíz personalizada:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVE_FILES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROOT_FOLDER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/custom-folder&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración de ejemplo para habilitar y optimizar el almacenamiento en caché de archivos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_OPEN_FILE_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">OPEN_FILE_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max=2000</span><span class="nv"> </span><span class="s">inactive=30s&quot;</span>
<span class="nt">OPEN_FILE_CACHE_ERRORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">OPEN_FILE_CACHE_MIN_USES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">OPEN_FILE_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="modsecurity">ModSecurity</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento ModSecurity integra el potente Firewall de Aplicaciones Web (WAF) <a href="https://modsecurity.org">ModSecurity</a> en BunkerWeb. Esta integración ofrece una protección robusta contra una amplia gama de ataques web al aprovechar el <a href="https://coreruleset.org">OWASP Core Rule Set (CRS)</a> para detectar y bloquear amenazas como la inyección de SQL, el cross-site scripting (XSS), la inclusión de archivos locales y más.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando se recibe una solicitud, ModSecurity la evalúa con el conjunto de reglas activo.</li>
<li>El OWASP Core Rule Set inspecciona las cabeceras, las cookies, los parámetros de la URL y el contenido del cuerpo.</li>
<li>Cada violación detectada contribuye a una puntuación de anomalía general.</li>
<li>Si esta puntuación excede el umbral configurado, la solicitud se bloquea.</li>
<li>Se crean registros detallados para ayudar a diagnosticar qué reglas se activaron y por qué.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Beneficios clave</p>
<ol>
<li><strong>Protección estándar de la industria:</strong> Utiliza el firewall de código abierto ModSecurity, ampliamente utilizado.</li>
<li><strong>OWASP Core Rule Set:</strong> Emplea reglas mantenidas por la comunidad que cubren el OWASP Top Ten y más.</li>
<li><strong>Niveles de seguridad configurables:</strong> Ajuste los niveles de paranoia para equilibrar la seguridad con los posibles falsos positivos.</li>
<li><strong>Registro detallado:</strong> Proporciona registros de auditoría exhaustivos para el análisis de ataques.</li>
<li><strong>Soporte de complementos:</strong> Amplíe la protección con complementos CRS opcionales adaptados a sus aplicaciones.</li>
</ol>
</div>
<h3 id="como-usar_20">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar ModSecurity:</p>
<ol>
<li><strong>Habilite la función:</strong> ModSecurity está habilitado por defecto. Esto se puede controlar usando el ajuste <code>USE_MODSECURITY</code>.</li>
<li><strong>Seleccione una versión de CRS:</strong> Elija una versión del OWASP Core Rule Set (v3, v4 o nightly).</li>
<li><strong>Añada complementos:</strong> Opcionalmente, active los complementos de CRS para mejorar la cobertura de las reglas.</li>
<li><strong>Supervise y ajuste:</strong> Utilice los registros y la <a href="../web-ui/">interfaz de usuario web</a> para identificar falsos positivos y ajustar la configuración.</li>
</ol>
<h3 id="ajustes-de-configuracion_21">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MODSECURITY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar ModSecurity:</strong> Active la protección del Firewall de Aplicaciones Web ModSecurity.</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Usar Core Rule Set:</strong> Habilite el OWASP Core Rule Set para ModSecurity.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_VERSION</code></td>
<td><code>4</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Versión de CRS:</strong> La versión del OWASP Core Rule Set a utilizar. Opciones: <code>3</code>, <code>4</code> o <code>nightly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_RULE_ENGINE</code></td>
<td><code>On</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Motor de Reglas:</strong> Controle si se aplican las reglas. Opciones: <code>On</code>, <code>DetectionOnly</code> u <code>Off</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_ENGINE</code></td>
<td><code>RelevantOnly</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Motor de Auditoría:</strong> Controle cómo funciona el registro de auditoría. Opciones: <code>On</code>, <code>Off</code> o <code>RelevantOnly</code>.</td>
</tr>
<tr>
<td><code>MODSECURITY_SEC_AUDIT_LOG_PARTS</code></td>
<td><code>ABIJDEFHZ</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Partes del Registro de Auditoría:</strong> Qué partes de las solicitudes/respuestas incluir en los registros de auditoría.</td>
</tr>
<tr>
<td><code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code></td>
<td><code>131072</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Límite del Cuerpo de la Solicitud (Sin Archivos):</strong> Tamaño máximo para los cuerpos de las solicitudes sin carga de archivos. Acepta bytes simples o sufijos legibles por humanos (<code>k</code>, <code>m</code>, <code>g</code>), por ejemplo, <code>131072</code>, <code>256k</code>, <code>1m</code>, <code>2g</code>.</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_CRS_PLUGINS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Complementos de CRS:</strong> Habilite conjuntos de reglas de complementos adicionales para el Core Rule Set.</td>
</tr>
<tr>
<td><code>MODSECURITY_CRS_PLUGINS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Complementos de CRS:</strong> Lista de complementos separados por espacios para descargar e instalar (<code>nombre-plugin[/etiqueta]</code> o URL).</td>
</tr>
<tr>
<td><code>USE_MODSECURITY_GLOBAL_CRS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>CRS Global:</strong> Cuando está habilitado, aplica las reglas de CRS globalmente a nivel HTTP en lugar de por servidor.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">ModSecurity y el OWASP Core Rule Set</p>
<p><strong>Recomendamos encarecidamente mantener habilitados tanto ModSecurity como el OWASP Core Rule Set (CRS)</strong> para proporcionar una protección robusta contra las vulnerabilidades web comunes. Aunque pueden ocurrir falsos positivos ocasionales, se pueden resolver con un poco de esfuerzo ajustando las reglas o utilizando exclusiones predefinidas.</p>
<p>El equipo de CRS mantiene activamente una lista de exclusiones para aplicaciones populares como WordPress, Nextcloud, Drupal y Cpanel, lo que facilita la integración sin afectar la funcionalidad. Los beneficios de seguridad superan con creces el mínimo esfuerzo de configuración necesario para solucionar los falsos positivos.</p>
</div>
<h3 id="versiones-de-crs-disponibles">Versiones de CRS Disponibles</h3>
<p>Seleccione una versión de CRS que se ajuste mejor a sus necesidades de seguridad:</p>
<ul>
<li><strong><code>3</code></strong>: Estable <a href="https://github.com/coreruleset/coreruleset/releases/tag/v3.3.7">v3.3.7</a>.</li>
<li><strong><code>4</code></strong>: Estable <a href="https://github.com/coreruleset/coreruleset/releases/tag/v4.18.0">v4.18.0</a> (<strong>predeterminada</strong>).</li>
<li><strong><code>nightly</code></strong>: <a href="https://github.com/coreruleset/coreruleset/releases/tag/nightly">Compilación nocturna</a> que ofrece las últimas actualizaciones de reglas.</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Compilación Nocturna</p>
<p>La <strong>compilación nocturna</strong> contiene las reglas más actualizadas, ofreciendo las últimas protecciones contra amenazas emergentes. Sin embargo, dado que se actualiza diariamente y puede incluir cambios experimentales o no probados, se recomienda utilizar primero la compilación nocturna en un <strong>entorno de preproducción</strong> antes de implementarla en producción.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Niveles de Paranoia</p>
<p>El OWASP Core Rule Set utiliza "niveles de paranoia" (PL) para controlar la rigurosidad de las reglas:</p>
<ul>
<li><strong>PL1 (predeterminado):</strong> Protección básica con mínimos falsos positivos</li>
<li><strong>PL2:</strong> Seguridad más estricta con una coincidencia de patrones más rigurosa</li>
<li><strong>PL3:</strong> Seguridad mejorada con una validación más estricta</li>
<li><strong>PL4:</strong> Máxima seguridad con reglas muy estrictas (puede causar muchos falsos positivos)</li>
</ul>
<p>Puede establecer el nivel de paranoia agregando un archivo de configuración personalizado en <code>/etc/bunkerweb/configs/modsec-crs/</code>.</p>
</div>
<h3 id="configuraciones-personalizadas">Configuraciones Personalizadas</h3>
<p>El ajuste de ModSecurity y el OWASP Core Rule Set (CRS) se puede lograr a través de configuraciones personalizadas. Estas configuraciones le permiten personalizar el comportamiento en etapas específicas del procesamiento de las reglas de seguridad:</p>
<ul>
<li><strong><code>modsec-crs</code></strong>: Se aplica <strong>antes</strong> de que se cargue el OWASP Core Rule Set.</li>
<li><strong><code>modsec</code></strong>: Se aplica <strong>después</strong> de que se haya cargado el OWASP Core Rule Set. También se utiliza si el CRS no se carga en absoluto.</li>
<li><strong><code>crs-plugins-before</code></strong>: Se aplica <strong>antes</strong> de que se carguen los complementos de CRS.</li>
<li><strong><code>crs-plugins-after</code></strong>: Se aplica <strong>después</strong> de que se hayan cargado los complementos de CRS.</li>
</ul>
<p>Esta estructura proporciona flexibilidad, permitiéndole ajustar la configuración de ModSecurity y CRS para adaptarse a las necesidades específicas de su aplicación mientras mantiene un flujo de configuración claro.</p>
<h4 id="agregar-exclusiones-de-crs-con-modsec-crs">Agregar Exclusiones de CRS con <code>modsec-crs</code></h4>
<p>Puede usar una configuración personalizada de tipo <code>modsec-crs</code> para agregar exclusiones para casos de uso específicos, como habilitar exclusiones predefinidas para WordPress:</p>
<div class="highlight"><pre><span></span><code>SecAction \
 &quot;id:900130,\
  phase:1,\
  nolog,\
  pass,\
  t:none,\
  setvar:tx.crs_exclusions_wordpress=1&quot;
</code></pre></div>
<p>En este ejemplo:</p>
<ul>
<li>La acción se ejecuta en la <strong>Fase 1</strong> (temprano en el ciclo de vida de la solicitud).</li>
<li>Habilita las exclusiones de CRS específicas de WordPress estableciendo la variable <code>tx.crs_exclusions_wordpress</code>.</li>
</ul>
<h4 id="actualizar-las-reglas-de-crs-con-modsec">Actualizar las Reglas de CRS con <code>modsec</code></h4>
<p>Para ajustar las reglas de CRS cargadas, puede usar una configuración personalizada de tipo <code>modsec</code>. Por ejemplo, puede eliminar reglas o etiquetas específicas para ciertas rutas de solicitud:</p>
<div class="highlight"><pre><span></span><code>SecRule REQUEST_FILENAME &quot;/wp-admin/admin-ajax.php&quot; &quot;id:1,ctl:ruleRemoveByTag=attack-xss,ctl:ruleRemoveByTag=attack-rce&quot;
SecRule REQUEST_FILENAME &quot;/wp-admin/options.php&quot; &quot;id:2,ctl:ruleRemoveByTag=attack-xss&quot;
SecRule REQUEST_FILENAME &quot;^/wp-json/yoast&quot; &quot;id:3,ctl:ruleRemoveById=930120&quot;
</code></pre></div>
<p>En este ejemplo:</p>
<ul>
<li><strong>Regla 1</strong>: Elimina las reglas etiquetadas como <code>attack-xss</code> y <code>attack-rce</code> para las solicitudes a <code>/wp-admin/admin-ajax.php</code>.</li>
<li><strong>Regla 2</strong>: Elimina las reglas etiquetadas como <code>attack-xss</code> para las solicitudes a <code>/wp-admin/options.php</code>.</li>
<li><strong>Regla 3</strong>: Elimina una regla específica (ID <code>930120</code>) para las solicitudes que coinciden con <code>/wp-json/yoast</code>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Orden de ejecución</p>
<p>El orden de ejecución de ModSecurity en BunkerWeb es el siguiente, asegurando una progresión clara y lógica de la aplicación de reglas:</p>
<ol>
<li><strong>Configuración de OWASP CRS</strong>: Configuración base para el OWASP Core Rule Set.</li>
<li><strong>Configuración de Complementos Personalizados (<code>crs-plugins-before</code>)</strong>: Ajustes específicos de los complementos, aplicados antes de cualquier regla de CRS.</li>
<li><strong>Reglas de Complementos Personalizados (Antes de las Reglas de CRS) (<code>crs-plugins-before</code>)</strong>: Reglas personalizadas para los complementos ejecutadas antes de las reglas de CRS.</li>
<li><strong>Configuración de Complementos Descargados</strong>: Configuración para los complementos descargados externamente.</li>
<li><strong>Reglas de Complementos Descargados (Antes de las Reglas de CRS)</strong>: Reglas para los complementos descargados ejecutadas antes de las reglas de CRS.</li>
<li><strong>Reglas de CRS Personalizadas (<code>modsec-crs</code>)</strong>: Reglas definidas por el usuario aplicadas antes de cargar las reglas de CRS.</li>
<li><strong>Reglas de OWASP CRS</strong>: El conjunto principal de reglas de seguridad proporcionado por OWASP.</li>
<li><strong>Reglas de Complementos Personalizados (Después de las Reglas de CRS) (<code>crs-plugins-after</code>)</strong>: Reglas de complementos personalizadas ejecutadas después de las reglas de CRS.</li>
<li><strong>Reglas de Complementos Descargados (Después de las Reglas de CRS)</strong>: Reglas para los complementos descargados ejecutadas después de las reglas de CRS.</li>
<li><strong>Reglas Personalizadas (<code>modsec</code>)</strong>: Reglas definidas por el usuario aplicadas después de todas las reglas de CRS y de los complementos.</li>
</ol>
<p><strong>Notas Clave</strong>:</p>
<ul>
<li>Las personalizaciones <strong>pre-CRS</strong> (<code>crs-plugins-before</code>, <code>modsec-crs</code>) le permiten definir excepciones o reglas preparatorias antes de que se carguen las reglas principales de CRS.</li>
<li>Las personalizaciones <strong>post-CRS</strong> (<code>crs-plugins-after</code>, <code>modsec</code>) son ideales para anular o ampliar las reglas después de que se hayan aplicado las reglas de CRS y de los complementos.</li>
<li>Esta estructura proporciona la máxima flexibilidad, permitiendo un control preciso sobre la ejecución y personalización de las reglas mientras se mantiene una sólida línea de base de seguridad.</li>
</ul>
</div>
<h3 id="complementos-de-owasp-crs">Complementos de OWASP CRS</h3>
<p>El OWASP Core Rule Set también admite una gama de <strong>complementos</strong> diseñados para ampliar su funcionalidad y mejorar la compatibilidad con aplicaciones o entornos específicos. Estos complementos pueden ayudar a ajustar el CRS para su uso con plataformas populares como WordPress, Nextcloud y Drupal, o incluso con configuraciones personalizadas. Para obtener más información y una lista de los complementos disponibles, consulte el <a href="https://github.com/coreruleset/plugin-registry">registro de complementos de OWASP CRS</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Descarga de complementos</p>
<p>El ajuste <code>MODSECURITY_CRS_PLUGINS</code> le permite descargar e instalar complementos para ampliar la funcionalidad del OWASP Core Rule Set (CRS). Este ajuste acepta una lista de nombres de complementos con etiquetas o URL opcionales, lo que facilita la integración de funciones de seguridad adicionales adaptadas a sus necesidades específicas.</p>
<p>Aquí hay una lista no exhaustiva de valores aceptados para el ajuste <code>MODSECURITY_CRS_PLUGINS</code>:</p>
<ul>
<li><code>fake-bot</code> - Descargar la última versión del complemento.</li>
<li><code>wordpress-rule-exclusions/v1.0.0</code> - Descargar la versión 1.0.0 del complemento.</li>
<li><code>https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip</code> - Descargar el complemento directamente desde la URL.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Falsos Positivos</p>
<p>Una configuración de seguridad más alta puede bloquear el tráfico legítimo. Comience con la configuración predeterminada y supervise los registros antes de aumentar los niveles de seguridad. Esté preparado para agregar reglas de exclusión para las necesidades específicas de su aplicación.</p>
</div>
<h3 id="configuraciones-de-ejemplo_23">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="39:6"><input checked="checked" id="__tabbed_39_1" name="__tabbed_39" type="radio" /><input id="__tabbed_39_2" name="__tabbed_39" type="radio" /><input id="__tabbed_39_3" name="__tabbed_39" type="radio" /><input id="__tabbed_39_4" name="__tabbed_39" type="radio" /><input id="__tabbed_39_5" name="__tabbed_39" type="radio" /><input id="__tabbed_39_6" name="__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="__tabbed_39_1">Configuración Básica</label><label for="__tabbed_39_2">Modo de Solo Detección</label><label for="__tabbed_39_3">Configuración Avanzada con Complementos</label><label for="__tabbed_39_4">Configuración Heredada</label><label for="__tabbed_39_5">ModSecurity Global</label><label for="__tabbed_39_6">Compilación Nocturna con Complementos Personalizados</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración estándar con ModSecurity y CRS v4 habilitados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para monitorear amenazas potenciales sin bloquear:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DetectionOnly&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">MODSECURITY_SEC_AUDIT_LOG_PARTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ABIJDEFHZ&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con CRS v4 y complementos habilitados para protección adicional:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions</span><span class="nv"> </span><span class="s">fake-bot&quot;</span>
<span class="nt">MODSECURITY_REQ_BODY_NO_FILES_LIMIT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;262144&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que utiliza CRS v3 para compatibilidad con configuraciones más antiguas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">MODSECURITY_SEC_RULE_ENGINE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;On&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que aplica ModSecurity globalmente a todas las conexiones HTTP:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="nt">USE_MODSECURITY_GLOBAL_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que utiliza la compilación nocturna de CRS con complementos personalizados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_MODSECURITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">USE_MODSECURITY_CRS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nightly&quot;</span>
<span class="nt">USE_MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">MODSECURITY_CRS_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wordpress-rule-exclusions/v1.0.0</span><span class="nv"> </span><span class="s">https://github.com/coreruleset/dos-protection-plugin-modsecurity/archive/refs/heads/main.zip&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Valores de tamaño legibles por humanos</p>
<p>Para los ajustes de tamaño como <code>MODSECURITY_REQ_BODY_NO_FILES_LIMIT</code>, se admiten los sufijos <code>k</code>, <code>m</code> y <code>g</code> (sin distinción entre mayúsculas y minúsculas) y representan kibibytes, mebibytes y gibibytes (múltiplos de 1024). Ejemplos: <code>256k</code> = 262144, <code>1m</code> = 1048576, <code>2g</code> = 2147483648.</p>
</div>
<h2 id="monitoring-pro">Monitoring <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>BunkerWeb monitoring pro system. This plugin is a prerequisite for some other plugins.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_MONITORING</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td>Enable monitoring of BunkerWeb.</td>
</tr>
<tr>
<td><code>MONITORING_METRICS_DICT_SIZE</code></td>
<td><code>10M</code></td>
<td>global</td>
<td>no</td>
<td>Size of the dict to store monitoring metrics.</td>
</tr>
<tr>
<td><code>MONITORING_IGNORE_URLS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>List of URLs to ignore when monitoring separated with spaces (e.g. /health)</td>
</tr>
</tbody>
</table>
<h2 id="php">PHP</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento PHP proporciona una integración perfecta con PHP-FPM para BunkerWeb, lo que permite el procesamiento dinámico de PHP para sus sitios web. Esta característica es compatible tanto con instancias locales de PHP-FPM que se ejecutan en la misma máquina como con servidores remotos de PHP-FPM, lo que le brinda flexibilidad en la forma en que configura su entorno PHP.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente solicita un archivo PHP de su sitio web, BunkerWeb enruta la solicitud a la instancia de PHP-FPM configurada.</li>
<li>Para PHP-FPM local, BunkerWeb se comunica con el intérprete de PHP a través de un archivo de socket de Unix.</li>
<li>Para PHP-FPM remoto, BunkerWeb reenvía las solicitudes al host y puerto especificados utilizando el protocolo FastCGI.</li>
<li>PHP-FPM procesa el script y devuelve el contenido generado a BunkerWeb, que luego lo entrega al cliente.</li>
<li>La reescritura de URL se configura automáticamente para admitir los marcos de trabajo y aplicaciones PHP comunes que utilizan "URL amigables".</li>
</ol>
<h3 id="como-usar_21">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función PHP:</p>
<ol>
<li><strong>Elija su configuración de PHP-FPM:</strong> Decida si utilizará una instancia de PHP-FPM local o remota.</li>
<li><strong>Configure la conexión:</strong> Para PHP local, especifique la ruta del socket; para PHP remoto, proporcione el nombre de host y el puerto.</li>
<li><strong>Establezca la raíz del documento:</strong> Configure la carpeta raíz que contiene sus archivos PHP utilizando la configuración de ruta adecuada.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, BunkerWeb enruta automáticamente las solicitudes de PHP a su instancia de PHP-FPM.</li>
</ol>
<h3 id="ajustes-de-configuracion_22">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REMOTE_PHP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Host PHP Remoto:</strong> Nombre de host de la instancia remota de PHP-FPM. Deje en blanco para usar PHP local.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Ruta Remota:</strong> Carpeta raíz que contiene los archivos en la instancia remota de PHP-FPM.</td>
</tr>
<tr>
<td><code>REMOTE_PHP_PORT</code></td>
<td><code>9000</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Puerto Remoto:</strong> Puerto de la instancia remota de PHP-FPM.</td>
</tr>
<tr>
<td><code>LOCAL_PHP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Socket PHP Local:</strong> Ruta al archivo de socket de PHP-FPM. Deje en blanco para usar una instancia remota de PHP-FPM.</td>
</tr>
<tr>
<td><code>LOCAL_PHP_PATH</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Ruta Local:</strong> Carpeta raíz que contiene los archivos en la instancia local de PHP-FPM.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">PHP-FPM Local vs. Remoto</p>
<p>Elija la configuración que mejor se adapte a su infraestructura:</p>
<ul>
<li><strong>PHP-FPM local</strong> ofrece un mejor rendimiento debido a la comunicación basada en sockets y es ideal cuando PHP se ejecuta en la misma máquina que BunkerWeb.</li>
<li><strong>PHP-FPM remoto</strong> proporciona más flexibilidad y escalabilidad al permitir que el procesamiento de PHP se realice en servidores separados.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Configuración de la Ruta</p>
<p>La <code>REMOTE_PHP_PATH</code> o <code>LOCAL_PHP_PATH</code> debe coincidir con la ruta real del sistema de archivos donde se almacenan sus archivos PHP; de lo contrario, se producirá un error de "Archivo no encontrado".</p>
</div>
<div class="admonition info">
<p class="admonition-title">Reescritura de URL</p>
<p>El complemento PHP configura automáticamente la reescritura de URL para admitir aplicaciones PHP modernas. Las solicitudes de archivos inexistentes se dirigirán a <code>index.php</code> con el URI de la solicitud original disponible como parámetro de consulta.</p>
</div>
<h3 id="configuraciones-de-ejemplo_24">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="40:4"><input checked="checked" id="__tabbed_40_1" name="__tabbed_40" type="radio" /><input id="__tabbed_40_2" name="__tabbed_40" type="radio" /><input id="__tabbed_40_3" name="__tabbed_40" type="radio" /><input id="__tabbed_40_4" name="__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="__tabbed_40_1">Configuración de PHP-FPM Local</label><label for="__tabbed_40_2">Configuración de PHP-FPM Remoto</label><label for="__tabbed_40_3">Configuración de Puerto Personalizado</label><label for="__tabbed_40_4">Configuración de WordPress</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Configuración para usar una instancia de PHP-FPM local:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para usar una instancia de PHP-FPM remota:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9000&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para usar PHP-FPM en un puerto no estándar:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REMOTE_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;php-server.example.com&quot;</span>
<span class="nt">REMOTE_PHP_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9001&quot;</span>
<span class="nt">REMOTE_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para WordPress:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LOCAL_PHP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/run/php/php8.1-fpm.sock&quot;</span>
<span class="nt">LOCAL_PHP_PATH</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/www/html/wordpress&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="pro">Pro</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento Pro agrupa características avanzadas y mejoras para implementaciones empresariales de BunkerWeb. Desbloquea capacidades adicionales, complementos premium y funcionalidades extendidas que complementan la plataforma principal de BunkerWeb. Ofrece seguridad, rendimiento y opciones de gestión mejoradas para implementaciones de nivel empresarial.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Con una clave de licencia Pro válida, BunkerWeb se conecta al servidor de la API Pro para validar su suscripción.</li>
<li>Una vez autenticado, el complemento descarga e instala automáticamente los complementos y extensiones exclusivos de Pro.</li>
<li>Su estado Pro se verifica periódicamente para garantizar el acceso continuo a las funciones premium.</li>
<li>Los complementos premium se integran sin problemas con su configuración existente de BunkerWeb.</li>
<li>Todas las funciones Pro funcionan en armonía con el núcleo de código abierto, mejorando en lugar de reemplazar la funcionalidad.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Beneficios clave</p>
<ol>
<li><strong>Extensiones Premium:</strong> Acceso a complementos y características exclusivas no disponibles en la edición comunitaria.</li>
<li><strong>Rendimiento Mejorado:</strong> Configuraciones optimizadas y mecanismos de almacenamiento en caché avanzados.</li>
<li><strong>Soporte Empresarial:</strong> Asistencia prioritaria y canales de soporte dedicados.</li>
<li><strong>Integración Perfecta:</strong> Las características Pro funcionan junto con las características comunitarias sin conflictos de configuración.</li>
<li><strong>Actualizaciones Automáticas:</strong> Los complementos premium se descargan y se mantienen actualizados automáticamente.</li>
</ol>
</div>
<h3 id="como-usar_22">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar las características Pro:</p>
<ol>
<li><strong>Obtenga una clave de licencia:</strong> Compre una licencia Pro en el <a href="https://panel.bunkerweb.io/store/bunkerweb-pro?utm_campaign=self&amp;utm_source=doc">Panel de BunkerWeb</a>.</li>
<li><strong>Configure su clave de licencia:</strong> Use el ajuste <code>PRO_LICENSE_KEY</code> para configurar su licencia.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado con una licencia válida, los complementos Pro se descargan y activan automáticamente.</li>
<li><strong>Supervise su estado Pro:</strong> Verifique los indicadores de salud en la <a href="../web-ui/">interfaz de usuario web</a> para confirmar el estado de su suscripción Pro.</li>
</ol>
<h3 id="ajustes-de-configuracion_23">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PRO_LICENSE_KEY</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Clave de Licencia Pro:</strong> Su clave de licencia de BunkerWeb Pro para la autenticación.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Gestión de Licencias</p>
<p>Su licencia Pro está vinculada a su entorno de implementación específico. Si necesita transferir su licencia o tiene preguntas sobre su suscripción, póngase en contacto con el soporte a través del <a href="https://panel.bunkerweb.io/contact.php?utm_campaign=self&amp;utm_source=doc">Panel de BunkerWeb</a>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Características Pro</p>
<p>Las características Pro específicas disponibles pueden evolucionar con el tiempo a medida que se agregan nuevas capacidades. El complemento Pro se encarga automáticamente de la instalación y configuración de todas las características disponibles.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Requisitos de Red</p>
<p>El complemento Pro requiere acceso a Internet de salida para conectarse a la API de BunkerWeb para la verificación de la licencia y para descargar los complementos premium. Asegúrese de que su firewall permita conexiones a <code>api.bunkerweb.io</code> en el puerto 443 (HTTPS).</p>
</div>
<h3 id="preguntas-frecuentes">Preguntas Frecuentes</h3>
<p><strong>P: ¿Qué sucede si mi licencia Pro expira?</strong></p>
<p>R: Si su licencia Pro expira, se desactivará el acceso a las características y complementos premium. Sin embargo, su instalación de BunkerWeb seguirá funcionando con todas las características de la edición comunitaria intactas. Para recuperar el acceso a las características Pro, simplemente renueve su licencia.</p>
<p><strong>P: ¿Las características Pro interrumpirán mi configuración existente?</strong></p>
<p>R: No, las características Pro están diseñadas para integrarse sin problemas con su configuración actual de BunkerWeb. Mejoran la funcionalidad sin alterar ni interferir con su configuración existente, garantizando una experiencia fluida y confiable.</p>
<p><strong>P: ¿Puedo probar las características Pro antes de comprometerme a una compra?</strong></p>
<p>R: ¡Absolutamente! BunkerWeb ofrece dos planes Pro para satisfacer sus necesidades:</p>
<ul>
<li><strong>BunkerWeb PRO Standard:</strong> Acceso completo a las características Pro sin soporte técnico.</li>
<li><strong>BunkerWeb PRO Enterprise:</strong> Acceso completo a las características Pro con soporte técnico dedicado.</li>
</ul>
<p>Puede explorar las características Pro con una prueba gratuita de 1 mes utilizando el código de promoción <code>freetrial</code>. Visite el <a href="https://panel.bunkerweb.io/?utm_campaign=self&amp;utm_source=doc">Panel de BunkerWeb</a> para activar su prueba y obtener más información sobre las opciones de precios flexibles basadas en el número de servicios protegidos por BunkerWeb PRO.</p>
<h2 id="prometheus-exporter-pro">Prometheus exporter <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Prometheus exporter for BunkerWeb internal metrics.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROMETHEUS_EXPORTER</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td>Enable the Prometheus export.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_IP</code></td>
<td><code>0.0.0.0</code></td>
<td>global</td>
<td>no</td>
<td>Listening IP of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_PORT</code></td>
<td><code>9113</code></td>
<td>global</td>
<td>no</td>
<td>Listening port of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_URL</code></td>
<td><code>/metrics</code></td>
<td>global</td>
<td>no</td>
<td>HTTP URL of the Prometheus exporter.</td>
</tr>
<tr>
<td><code>PROMETHEUS_EXPORTER_ALLOW_IP</code></td>
<td><code>127.0.0.0/8 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16</code></td>
<td>global</td>
<td>no</td>
<td>List of IP/networks allowed to contact the Prometheus exporter endpoint.</td>
</tr>
</tbody>
</table>
<h2 id="real-ip">Real IP</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de IP Real asegura que BunkerWeb identifique correctamente la dirección IP del cliente incluso cuando se encuentra detrás de proxies. Esto es esencial para aplicar correctamente las reglas de seguridad, la limitación de velocidad y el registro; sin él, todas las solicitudes parecerían provenir de la IP de su proxy en lugar de la IP real del cliente.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando está habilitado, BunkerWeb examina las solicitudes entrantes en busca de encabezados específicos (como <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-For"><code>X-Forwarded-For</code></a>) que contienen la dirección IP original del cliente.</li>
<li>BunkerWeb comprueba si la IP entrante está en su lista de proxies de confianza (<code>REAL_IP_FROM</code>), asegurando que solo los proxies legítimos puedan pasar las IP de los clientes.</li>
<li>La IP original del cliente se extrae del encabezado especificado (<code>REAL_IP_HEADER</code>) y se utiliza para todas las evaluaciones de seguridad y el registro.</li>
<li>Para las cadenas de IP recursivas, BunkerWeb puede rastrear a través de múltiples saltos de proxy para determinar la IP del cliente de origen.</li>
<li>Además, se puede habilitar el soporte para el <a href="https://netnut.io/what-is-proxy-protocol-and-how-does-it-work/">protocolo PROXY</a> para recibir las IP de los clientes directamente de proxies compatibles como <a href="https://www.haproxy.org/">HAProxy</a>.</li>
<li>Las listas de IP de proxies de confianza se pueden descargar y actualizar automáticamente desde fuentes externas a través de URL.</li>
</ol>
<h3 id="como-usar_23">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de IP Real:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_REAL_IP</code> en <code>yes</code> para habilitar la detección de la IP real.</li>
<li><strong>Defina los proxies de confianza:</strong> Enumere las direcciones IP o redes de sus proxies de confianza utilizando el ajuste <code>REAL_IP_FROM</code>.</li>
<li><strong>Especifique el encabezado:</strong> Configure qué encabezado contiene la IP real utilizando el ajuste <code>REAL_IP_HEADER</code>.</li>
<li><strong>Configure la recursividad:</strong> Decida si desea rastrear las cadenas de IP de forma recursiva con el ajuste <code>REAL_IP_RECURSIVE</code>.</li>
<li><strong>Fuentes de URL opcionales:</strong> Configure las descargas automáticas de listas de proxies de confianza con <code>REAL_IP_FROM_URLS</code>.</li>
<li><strong>Protocolo PROXY:</strong> Para la comunicación directa con el proxy, habilítelo con <code>USE_PROXY_PROTOCOL</code> si su upstream lo admite.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Advertencia sobre el Protocolo PROXY</p>
<p>Habilitar <code>USE_PROXY_PROTOCOL</code> sin configurar correctamente su proxy upstream para enviar los encabezados del protocolo PROXY <strong>romperá su aplicación</strong>. Solo habilite este ajuste si está seguro de que su proxy upstream está configurado correctamente para enviar la información del protocolo PROXY. Si su proxy no está enviando los encabezados del protocolo PROXY, todas las conexiones a BunkerWeb fallarán con errores de protocolo.</p>
</div>
<h3 id="ajustes-de-configuracion_24">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REAL_IP</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar IP Real:</strong> Establezca en <code>yes</code> para habilitar la obtención de la IP real del cliente desde los encabezados o el protocolo PROXY.</td>
</tr>
<tr>
<td><code>REAL_IP_FROM</code></td>
<td><code>192.168.0.0/16 172.16.0.0/12 10.0.0.0/8</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Proxies de Confianza:</strong> Lista de direcciones IP o redes de confianza desde donde provienen las solicitudes de proxy, separadas por espacios.</td>
</tr>
<tr>
<td><code>REAL_IP_HEADER</code></td>
<td><code>X-Forwarded-For</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Encabezado de IP Real:</strong> Encabezado HTTP que contiene la IP real o el valor especial <code>proxy_protocol</code> para el protocolo PROXY.</td>
</tr>
<tr>
<td><code>REAL_IP_RECURSIVE</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Búsqueda Recursiva:</strong> Cuando se establece en <code>yes</code>, realiza una búsqueda recursiva en el encabezado que contiene múltiples direcciones IP.</td>
</tr>
<tr>
<td><code>REAL_IP_FROM_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de la Lista de IP:</strong> URL que contienen las IP/redes de los proxies de confianza para descargar, separadas por espacios. Admite URL de tipo <code>file://</code>.</td>
</tr>
<tr>
<td><code>USE_PROXY_PROTOCOL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Protocolo PROXY:</strong> Establezca en <code>yes</code> para habilitar el soporte del protocolo PROXY para la comunicación directa de proxy a BunkerWeb.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Redes de Proveedores de la Nube</p>
<p>Si está utilizando un proveedor de la nube como AWS, GCP o Azure, considere agregar los rangos de IP de sus balanceadores de carga a su ajuste <code>REAL_IP_FROM</code> para garantizar la correcta identificación de la IP del cliente.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Consideraciones de Seguridad</p>
<p>Solo incluya las IP de los proxies de confianza en su configuración. Agregar fuentes no confiables podría permitir ataques de suplantación de IP, donde los actores maliciosos podrían falsificar la IP del cliente manipulando los encabezados.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Múltiples Direcciones IP</p>
<p>Cuando <code>REAL_IP_RECURSIVE</code> está habilitado y un encabezado contiene múltiples IP (p. ej., <code>X-Forwarded-For: cliente, proxy1, proxy2</code>), BunkerWeb identificará como la IP del cliente la IP más a la izquierda que no esté en su lista de proxies de confianza.</p>
</div>
<h3 id="configuraciones-de-ejemplo_25">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="41:6"><input checked="checked" id="__tabbed_41_1" name="__tabbed_41" type="radio" /><input id="__tabbed_41_2" name="__tabbed_41" type="radio" /><input id="__tabbed_41_3" name="__tabbed_41" type="radio" /><input id="__tabbed_41_4" name="__tabbed_41" type="radio" /><input id="__tabbed_41_5" name="__tabbed_41" type="radio" /><input id="__tabbed_41_6" name="__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="__tabbed_41_1">Configuración Básica</label><label for="__tabbed_41_2">Balanceador de Carga en la Nube</label><label for="__tabbed_41_3">Protocolo PROXY</label><label for="__tabbed_41_4">Múltiples Fuentes de Proxy con URL</label><label for="__tabbed_41_5">Configuración de CDN</label><label for="__tabbed_41_6">Detrás de Cloudflare</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple para un sitio detrás de un proxy inverso:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.5&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un sitio detrás de un balanceador de carga en la nube:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.0/16</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración utilizando el protocolo PROXY con un balanceador de carga compatible:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;proxy_protocol&quot;</span>
<span class="nt">USE_PROXY_PROTOCOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración avanzada con listas de IP de proxy actualizadas automáticamente:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.0/16</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP&quot;</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/proxy-ips.txt</span><span class="nv"> </span><span class="s">file:///etc/bunkerweb/custom-proxies.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un sitio web detrás de una CDN:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.0/16</span><span class="nv"> </span><span class="s">172.16.0.0/12</span><span class="nv"> </span><span class="s">10.0.0.0/8&quot;</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://cdn-provider.com/ip-ranges.txt&quot;</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CF-Connecting-IP&quot;</span><span class="w">  </span><span class="c1"># Ejemplo para Cloudflare</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span><span class="w">  </span><span class="c1"># No es necesario con encabezados de una sola IP</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un sitio web detrás de Cloudflare:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REAL_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REAL_IP_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># Solo confiamos en las IPs de Cloudflare</span>
<span class="nt">REAL_IP_FROM_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://www.cloudflare.com/ips-v4/</span><span class="nv"> </span><span class="s">https://www.cloudflare.com/ips-v6/&quot;</span><span class="w"> </span><span class="c1"># Descargar las IPs de Cloudflare automáticamente</span>
<span class="nt">REAL_IP_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CF-Connecting-IP&quot;</span><span class="w">  </span><span class="c1"># Encabezado de Cloudflare para la IP del cliente</span>
<span class="nt">REAL_IP_RECURSIVE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redirect">Redirect</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>El complemento de Redirección proporciona capacidades de redirección HTTP simples y eficientes para sus sitios web protegidos por BunkerWeb. Esta función le permite redirigir fácilmente a los visitantes de una URL a otra, admitiendo tanto redirecciones de dominio completo, redirecciones de ruta específicas como redirecciones que preservan la ruta.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un visitante accede a su sitio web, BunkerWeb verifica si hay una redirección configurada.</li>
<li>Si está habilitado, BunkerWeb redirige al visitante a la URL de destino especificada.</li>
<li>Puede configurar si desea preservar la ruta de la solicitud original (agregándola automáticamente a la URL de destino) o redirigir a la URL de destino exacta.</li>
<li>El código de estado HTTP utilizado para la redirección se puede personalizar entre redirecciones permanentes (301) y temporales (302).</li>
<li>Esta funcionalidad es ideal para migraciones de dominio, establecer dominios canónicos o redirigir URL obsoletas.</li>
</ol>
<h3 id="como-usar_24">Cómo usar</h3>
<p>Siga estos pasos para configurar y utilizar la función de Redirección:</p>
<ol>
<li><strong>Establezca la ruta de origen:</strong> Configure la ruta desde la que se redirigirá utilizando el ajuste <code>REDIRECT_FROM</code> (por ejemplo, <code>/</code>, <code>/old-page</code>).</li>
<li><strong>Establezca la URL de destino:</strong> Configure la URL de destino a la que se redirigirá a los visitantes utilizando el ajuste <code>REDIRECT_TO</code>.</li>
<li><strong>Elija el tipo de redirección:</strong> Decida si desea preservar la ruta de la solicitud original con el ajuste <code>REDIRECT_TO_REQUEST_URI</code>.</li>
<li><strong>Seleccione el código de estado:</strong> Establezca el código de estado HTTP apropiado con el ajuste <code>REDIRECT_TO_STATUS_CODE</code> para indicar una redirección permanente o temporal.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, todas las solicitudes al sitio se redirigirán automáticamente según su configuración.</li>
</ol>
<h3 id="ajustes-de-configuracion_25">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_FROM</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Ruta desde la que redirigir:</strong> La ruta que se redirigirá.</td>
</tr>
<tr>
<td><code>REDIRECT_TO</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL de destino:</strong> La URL de destino a la que se redirigirá a los visitantes. Deje en blanco para deshabilitar la redirección.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_REQUEST_URI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Preservar ruta:</strong> Cuando se establece en <code>yes</code>, agrega el URI de la solicitud original a la URL de destino.</td>
</tr>
<tr>
<td><code>REDIRECT_TO_STATUS_CODE</code></td>
<td><code>301</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Código de estado HTTP:</strong> El código de estado HTTP a utilizar para la redirección. Opciones: <code>301</code> (permanente) o <code>302</code> (temporal).</td>
</tr>
</tbody>
</table>
<p>!!! tip "Elegir el Código de Estado Correcto" - Use <code>301</code> (Movido Permanentemente) cuando la redirección es permanente, como para migraciones de dominio o para establecer URL canónicas. Esto ayuda a los motores de búsqueda a actualizar sus índices. - Use <code>302</code> (Encontrado/Redirección Temporal) cuando la redirección es temporal o si desea reutilizar la URL original en el futuro.</p>
<div class="admonition info">
<p class="admonition-title">Preservación de la Ruta</p>
<p>Cuando <code>REDIRECT_TO_REQUEST_URI</code> se establece en <code>yes</code>, BunkerWeb preserva la ruta de la solicitud original. Por ejemplo, si un usuario visita <code>https://dominio-antiguo.com/blog/post-1</code> y ha configurado una redirección a <code>https://dominio-nuevo.com</code>, será redirigido a <code>https://dominio-nuevo.com/blog/post-1</code>.</p>
</div>
<h3 id="configuraciones-de-ejemplo_26">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="42:5"><input checked="checked" id="__tabbed_42_1" name="__tabbed_42" type="radio" /><input id="__tabbed_42_2" name="__tabbed_42" type="radio" /><input id="__tabbed_42_3" name="__tabbed_42" type="radio" /><input id="__tabbed_42_4" name="__tabbed_42" type="radio" /><input id="__tabbed_42_5" name="__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="__tabbed_42_1">Redirección de Múltiples Rutas</label><label for="__tabbed_42_2">Redirección de Dominio Simple</label><label for="__tabbed_42_3">Redirección con Preservación de Ruta</label><label for="__tabbed_42_4">Redirección Temporal</label><label for="__tabbed_42_5">Consolidación de Subdominios</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración que redirige múltiples rutas a diferentes destinos:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Redirigir /blog a un nuevo dominio de blog</span>
<span class="nt">REDIRECT_FROM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/blog/&quot;</span>
<span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://blog.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="c1"># Redirigir /shop a otro dominio</span>
<span class="nt">REDIRECT_FROM_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/shop/&quot;</span>
<span class="nt">REDIRECT_TO_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://shop.example.com/&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>

<span class="c1"># Redirigir el resto del sitio</span>
<span class="nt">REDIRECT_FROM_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REDIRECT_TO_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que redirige a todos los visitantes a un nuevo dominio:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que redirige a los visitantes a un nuevo dominio mientras preserva la ruta solicitada:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new-domain.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración para una redirección temporal a un sitio de mantenimiento:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://maintenance.example.com&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;302&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración para redirigir un subdominio a una ruta específica en el dominio principal:</p>
<div class="highlight"><pre><span></span><code><span class="nt">REDIRECT_TO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/support&quot;</span>
<span class="nt">REDIRECT_TO_REQUEST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_TO_STATUS_CODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="redis">Redis</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento Redis integra <a href="https://redis.io/">Redis</a> o <a href="https://valkey.io/">Valkey</a> en BunkerWeb para el almacenamiento en caché y la recuperación rápida de datos. Esta función es esencial para implementar BunkerWeb en entornos de alta disponibilidad donde los datos de sesión, las métricas y otra información compartida deben ser accesibles a través de múltiples nodos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando está habilitado, BunkerWeb establece una conexión con su servidor Redis o Valkey configurado.</li>
<li>Los datos críticos como la información de la sesión, las métricas y los datos relacionados con la seguridad se almacenan en Redis/Valkey.</li>
<li>Múltiples instancias de BunkerWeb pueden compartir estos datos, lo que permite la agrupación en clúster y el equilibrio de carga sin problemas.</li>
<li>El complemento admite varias opciones de implementación de Redis/Valkey, incluidos servidores independientes, autenticación con contraseña, cifrado SSL/TLS y Redis Sentinel para alta disponibilidad.</li>
<li>La reconexión automática y los tiempos de espera configurables garantizan la solidez en los entornos de producción.</li>
</ol>
<h3 id="como-usar_25">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar el complemento de Redis:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_REDIS</code> en <code>yes</code> para habilitar la integración de Redis/Valkey.</li>
<li><strong>Configure los detalles de la conexión:</strong> Especifique el nombre de host/dirección IP y el puerto de su servidor Redis/Valkey.</li>
<li><strong>Establezca las opciones de seguridad:</strong> Configure las credenciales de autenticación si su servidor Redis/Valkey las requiere.</li>
<li><strong>Configure las opciones avanzadas:</strong> Establezca la selección de la base de datos, las opciones de SSL y los tiempos de espera según sea necesario.</li>
<li><strong>Para alta disponibilidad,</strong> configure los ajustes de Sentinel si está utilizando Redis Sentinel.</li>
</ol>
<h3 id="ajustes-de-configuracion_26">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REDIS</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>Habilitar Redis:</strong> Establezca en <code>yes</code> para habilitar la integración de Redis/Valkey para el modo de clúster.</td>
</tr>
<tr>
<td><code>REDIS_HOST</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Servidor Redis/Valkey:</strong> Dirección IP o nombre de host del servidor Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_PORT</code></td>
<td><code>6379</code></td>
<td>global</td>
<td>no</td>
<td><strong>Puerto Redis/Valkey:</strong> Número de puerto del servidor Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_DATABASE</code></td>
<td><code>0</code></td>
<td>global</td>
<td>no</td>
<td><strong>Base de datos Redis/Valkey:</strong> Número de base de datos a utilizar en el servidor Redis/Valkey (0-15).</td>
</tr>
<tr>
<td><code>REDIS_SSL</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td><strong>SSL de Redis/Valkey:</strong> Establezca en <code>yes</code> para habilitar el cifrado SSL/TLS para la conexión de Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_SSL_VERIFY</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Verificación SSL de Redis/Valkey:</strong> Establezca en <code>yes</code> para verificar el certificado SSL del servidor Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_TIMEOUT</code></td>
<td><code>5</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de espera de Redis/Valkey:</strong> Tiempo de espera de la conexión en segundos para las operaciones de Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_USERNAME</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Nombre de usuario de Redis/Valkey:</strong> Nombre de usuario para la autenticación de Redis/Valkey (Redis 6.0+).</td>
</tr>
<tr>
<td><code>REDIS_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Contraseña de Redis/Valkey:</strong> Contraseña para la autenticación de Redis/Valkey.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_HOSTS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Hosts de Sentinel:</strong> Lista de hosts de Redis Sentinel separados por espacios (nombredehost:puerto).</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_USERNAME</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Nombre de usuario de Sentinel:</strong> Nombre de usuario para la autenticación de Redis Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td><strong>Contraseña de Sentinel:</strong> Contraseña para la autenticación de Redis Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_SENTINEL_MASTER</code></td>
<td><code>mymaster</code></td>
<td>global</td>
<td>no</td>
<td><strong>Maestro de Sentinel:</strong> Nombre del maestro en la configuración de Redis Sentinel.</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_IDLE</code></td>
<td><code>300</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de inactividad de keepalive:</strong> Tiempo (en segundos) entre las sondas TCP keepalive para conexiones inactivas.</td>
</tr>
<tr>
<td><code>REDIS_KEEPALIVE_POOL</code></td>
<td><code>3</code></td>
<td>global</td>
<td>no</td>
<td><strong>Grupo de keepalive:</strong> Número máximo de conexiones de Redis/Valkey mantenidas en el grupo.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Alta Disponibilidad con Redis Sentinel</p>
<p>Para entornos de producción que requieren alta disponibilidad, configure los ajustes de Redis Sentinel. Esto proporciona capacidades de conmutación por error automática si el servidor Redis principal deja de estar disponible.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Seguridad</p>
<p>Cuando utilice Redis en producción:</p>
<ul>
<li>Establezca siempre contraseñas seguras tanto para la autenticación de Redis como de Sentinel</li>
<li>Considere habilitar el cifrado SSL/TLS para las conexiones de Redis</li>
<li>Asegúrese de que su servidor Redis no esté expuesto a la Internet pública</li>
<li>Restrinja el acceso al puerto de Redis mediante cortafuegos o segmentación de red</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Requisitos del Clúster</p>
<p>Al implementar BunkerWeb en un clúster:</p>
<ul>
<li>Todas las instancias de BunkerWeb deben conectarse al mismo servidor Redis o Valkey o al clúster de Sentinel</li>
<li>Configure el mismo número de base de datos en todas las instancias</li>
<li>Asegúrese de que haya conectividad de red entre todas las instancias de BunkerWeb y los servidores Redis/Valkey</li>
</ul>
</div>
<h3 id="configuraciones-de-ejemplo_27">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="43:4"><input checked="checked" id="__tabbed_43_1" name="__tabbed_43" type="radio" /><input id="__tabbed_43_2" name="__tabbed_43" type="radio" /><input id="__tabbed_43_3" name="__tabbed_43" type="radio" /><input id="__tabbed_43_4" name="__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="__tabbed_43_1">Configuración Básica</label><label for="__tabbed_43_2">Configuración Segura</label><label for="__tabbed_43_3">Configuración de Redis Sentinel</label><label for="__tabbed_43_4">Ajuste Avanzado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple para conectarse a un servidor Redis o Valkey en la máquina local:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con autenticación por contraseña y SSL habilitado:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SSL_VERIFY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para alta disponibilidad utilizando Redis Sentinel:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_SENTINEL_HOSTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel1:26379</span><span class="nv"> </span><span class="s">sentinel2:26379</span><span class="nv"> </span><span class="s">sentinel3:26379&quot;</span>
<span class="nt">REDIS_SENTINEL_MASTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mymaster&quot;</span>
<span class="nt">REDIS_SENTINEL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sentinel-password&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis-password&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con parámetros de conexión avanzados para la optimización del rendimiento:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIS_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis.example.com&quot;</span>
<span class="nt">REDIS_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6379&quot;</span>
<span class="nt">REDIS_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-strong-password&quot;</span>
<span class="nt">REDIS_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">REDIS_KEEPALIVE_IDLE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60&quot;</span>
<span class="nt">REDIS_KEEPALIVE_POOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="mejores-practicas-de-redis">Mejores Prácticas de Redis</h3>
<p>Cuando utilice Redis o Valkey con BunkerWeb, considere estas mejores prácticas para garantizar un rendimiento, seguridad y fiabilidad óptimos:</p>
<h4 id="gestion-de-la-memoria">Gestión de la Memoria</h4>
<ul>
<li><strong>Supervise el uso de la memoria:</strong> Configure Redis con los ajustes <code>maxmemory</code> apropiados para evitar errores de falta de memoria</li>
<li><strong>Establezca una política de desalojo:</strong> Utilice <code>maxmemory-policy</code> (p. ej., <code>volatile-lru</code> o <code>allkeys-lru</code>) apropiada para su caso de uso</li>
<li><strong>Evite claves grandes:</strong> Asegúrese de que las claves individuales de Redis se mantengan en un tamaño razonable para evitar la degradación del rendimiento</li>
</ul>
<h4 id="persistencia-de-datos">Persistencia de Datos</h4>
<ul>
<li><strong>Habilite las instantáneas RDB:</strong> Configure instantáneas periódicas para la persistencia de datos sin un impacto significativo en el rendimiento</li>
<li><strong>Considere AOF:</strong> Para datos críticos, habilite la persistencia AOF (Append-Only File) con una política de <code>fsync</code> apropiada</li>
<li><strong>Estrategia de copia de seguridad:</strong> Implemente copias de seguridad regulares de Redis como parte de su plan de recuperación de desastres</li>
</ul>
<h4 id="optimizacion-del-rendimiento">Optimización del Rendimiento</h4>
<ul>
<li><strong>Agrupación de conexiones:</strong> BunkerWeb ya implementa esto, pero asegúrese de que otras aplicaciones sigan esta práctica</li>
<li><strong>Canalización:</strong> Cuando sea posible, utilice la canalización para operaciones masivas para reducir la sobrecarga de la red</li>
<li><strong>Evite operaciones costosas:</strong> Tenga cuidado con comandos como <code>KEYS</code> en entornos de producción</li>
<li><strong>Compare su carga de trabajo:</strong> Utilice <code>redis-benchmark</code> para probar sus patrones de carga de trabajo específicos</li>
</ul>
<h3 id="recursos-adicionales">Recursos Adicionales</h3>
<ul>
<li><a href="https://redis.io/documentation">Documentación de Redis</a></li>
<li><a href="https://redis.io/topics/security">Guía de Seguridad de Redis</a></li>
<li><a href="https://redis.io/topics/sentinel">Alta Disponibilidad de Redis</a></li>
<li><a href="https://redis.io/topics/persistence">Persistencia de Redis</a></li>
</ul>
<h2 id="reporting-pro">Reporting <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Regular reporting of important data from BunkerWeb (global, attacks, bans, requests, reasons, AS...). Monitoring pro plugin needed to work.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REPORTING_SMTP</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td>Enable sending the report via email.</td>
</tr>
<tr>
<td><code>USE_REPORTING_WEBHOOK</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td>Enable sending the report via webhook.</td>
</tr>
<tr>
<td><code>REPORTING_SCHEDULE</code></td>
<td><code>weekly</code></td>
<td>global</td>
<td>no</td>
<td>The frequency at which reports are sent.</td>
</tr>
<tr>
<td><code>REPORTING_WEBHOOK_URLS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>List of webhook URLs to receive the report in Markdown (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_EMAILS</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>List of email addresses to receive the report in HTML format (separated by spaces).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_HOST</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The host server used for SMTP sending.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_PORT</code></td>
<td><code>465</code></td>
<td>global</td>
<td>no</td>
<td>The port used for SMTP. Please note that there are different standards depending on the type of connection (SSL = 465, TLS = 587).</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_EMAIL</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The email address used as the sender. Note that 2FA must be disabled for this email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_USER</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The user authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_FROM_PASSWORD</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>The password authentication value for sending via the from email address.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SSL</code></td>
<td><code>SSL</code></td>
<td>global</td>
<td>no</td>
<td>Determine whether or not to use a secure connection for SMTP.</td>
</tr>
<tr>
<td><code>REPORTING_SMTP_SUBJECT</code></td>
<td><code>BunkerWeb Report</code></td>
<td>global</td>
<td>no</td>
<td>The subject line of the email.</td>
</tr>
</tbody>
</table>
<h2 id="reverse-proxy">Reverse proxy</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de Proxy Inverso proporciona capacidades de proxy sin interrupciones para BunkerWeb, lo que le permite enrutar solicitudes a servidores y servicios de backend. Esta función permite que BunkerWeb actúe como un frontend seguro para sus aplicaciones al tiempo que proporciona beneficios adicionales como la terminación de SSL y el filtrado de seguridad.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente envía una solicitud a BunkerWeb, el complemento de Proxy Inverso reenvía la solicitud a su servidor de backend configurado.</li>
<li>BunkerWeb agrega encabezados de seguridad, aplica reglas de WAF y realiza otras verificaciones de seguridad antes de pasar las solicitudes a su aplicación.</li>
<li>El servidor de backend procesa la solicitud y devuelve una respuesta a BunkerWeb.</li>
<li>BunkerWeb aplica medidas de seguridad adicionales a la respuesta antes de enviarla de vuelta al cliente.</li>
<li>El complemento admite el proxy de flujo tanto HTTP como TCP/UDP, lo que permite una amplia gama de aplicaciones, incluidos WebSockets y otros protocolos no HTTP.</li>
</ol>
<h3 id="como-usar_26">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Proxy Inverso:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_REVERSE_PROXY</code> en <code>yes</code> para habilitar la funcionalidad de proxy inverso.</li>
<li><strong>Configure sus servidores de backend:</strong> Especifique los servidores upstream utilizando el ajuste <code>REVERSE_PROXY_HOST</code>.</li>
<li><strong>Ajuste la configuración del proxy:</strong> Afine el comportamiento con ajustes opcionales para tiempos de espera, tamaños de búfer y otros parámetros.</li>
<li><strong>Configure las opciones específicas del protocolo:</strong> Para WebSockets o requisitos HTTP especiales, ajuste la configuración correspondiente.</li>
<li><strong>Configure el almacenamiento en caché (opcional):</strong> Habilite y configure el almacenamiento en caché del proxy para mejorar el rendimiento del contenido al que se accede con frecuencia.</li>
</ol>
<h3 id="guia-de-configuracion_2">Guía de Configuración</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="44:1"><input checked="checked" id="__tabbed_44_1" name="__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="__tabbed_44_1">Configuración Básica</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Ajustes Principales</strong></p>
<p>Los ajustes de configuración esenciales habilitan y controlan la funcionalidad básica de la función de proxy inverso.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios del Proxy Inverso</p>
<ul>
<li><strong>Mejora de la Seguridad:</strong> Todo el tráfico pasa a través de las capas de seguridad de BunkerWeb antes de llegar a sus aplicaciones</li>
<li><strong>Terminación SSL:</strong> Administre los certificados SSL/TLS de forma centralizada mientras que los servicios de backend pueden usar conexiones no cifradas</li>
<li><strong>Manejo de Protocolos:</strong> Soporte para HTTP, HTTPS, WebSockets y otros protocolos</li>
<li><strong>Interceptación de Errores:</strong> Personalice las páginas de error para una experiencia de usuario consistente</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_PROXY</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Proxy Inverso:</strong> Establezca en <code>yes</code> para habilitar la funcionalidad de proxy inverso.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HOST</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Host de Backend:</strong> URL completa del recurso al que se hace proxy (proxy_pass).</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_URL</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL de Ubicación:</strong> Ruta que se enviará al servidor de backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_BUFFERING</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Almacenamiento en Búfer de Respuesta:</strong> Habilite o deshabilite el almacenamiento en búfer de las respuestas del recurso al que se hace proxy.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_KEEPALIVE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Keep-Alive:</strong> Habilite o deshabilite las conexiones keepalive con el recurso al que se hace proxy.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_CUSTOM_HOST</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Host Personalizado:</strong> Anule el encabezado Host enviado al servidor upstream.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_INTERCEPT_ERRORS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Interceptar Errores:</strong> Si se deben interceptar y reescribir las respuestas de error del backend.</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Mejores Prácticas"
    - Siempre especifique la URL completa en `REVERSE_PROXY_HOST`, incluido el protocolo (http:// o https://)
    - Use `REVERSE_PROXY_INTERCEPT_ERRORS` para proporcionar páginas de error consistentes en todos sus servicios
    - Al configurar múltiples backends, use el formato de sufijo numerado (por ejemplo, `REVERSE_PROXY_HOST_2`, `REVERSE_PROXY_URL_2`)
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="45:1"><input checked="checked" id="__tabbed_45_1" name="__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="__tabbed_45_1">Ajustes de Conexión</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Configuración de Conexión y Tiempo de Espera</strong></p>
<p>Estos ajustes controlan el comportamiento de la conexión, el almacenamiento en búfer y los valores de tiempo de espera para las conexiones con proxy.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Rendimiento Optimizado:</strong> Ajuste los tamaños de los búferes y la configuración de la conexión según las necesidades de su aplicación</li>
<li><strong>Gestión de Recursos:</strong> Controle el uso de la memoria mediante configuraciones de búfer adecuadas</li>
<li><strong>Fiabilidad:</strong> Configure los tiempos de espera adecuados para manejar conexiones lentas o problemas de backend</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_CONNECT_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Tiempo de Espera de Conexión:</strong> Tiempo máximo para establecer una conexión con el servidor de backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_READ_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Tiempo de Espera de Lectura:</strong> Tiempo máximo entre las transmisiones de dos paquetes sucesivos desde el servidor de backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SEND_TIMEOUT</code></td>
<td><code>60s</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Tiempo de Espera de Envío:</strong> Tiempo máximo entre las transmisiones de dos paquetes sucesivos al servidor de backend.</td>
</tr>
<tr>
<td><code>PROXY_BUFFERS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Búferes:</strong> Número y tamaño de los búferes para leer la respuesta del servidor de backend.</td>
</tr>
<tr>
<td><code>PROXY_BUFFER_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tamaño del Búfer:</strong> Tamaño del búfer para leer la primera parte de la respuesta del servidor de backend.</td>
</tr>
<tr>
<td><code>PROXY_BUSY_BUFFERS_SIZE</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tamaño de los Búferes Ocupados:</strong> Tamaño de los búferes que pueden estar ocupados enviando la respuesta al cliente.</td>
</tr>
</tbody>
</table>
<pre><code>!!! warning "Consideraciones sobre el Tiempo de Espera"
    - Establecer tiempos de espera demasiado bajos puede hacer que se terminen las conexiones legítimas pero lentas
    - Establecer tiempos de espera demasiado altos puede dejar las conexiones abiertas innecesariamente, lo que podría agotar los recursos
    - Para las aplicaciones WebSocket, aumente significativamente los tiempos de espera de lectura y envío (se recomienda 300s o más)
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="46:1"><input checked="checked" id="__tabbed_46_1" name="__tabbed_46" type="radio" /><div class="tabbed-labels"><label for="__tabbed_46_1">Configuración SSL/TLS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Ajustes SSL/TLS para Conexiones de Backend</strong></p>
<p>Estos ajustes controlan cómo BunkerWeb establece conexiones seguras con los servidores de backend.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Cifrado de Extremo a Extremo:</strong> Mantenga las conexiones cifradas desde el cliente hasta el backend</li>
<li><strong>Validación de Certificados:</strong> Controle cómo se validan los certificados del servidor de backend</li>
<li><strong>Soporte SNI:</strong> Especifique la Indicación del Nombre del Servidor para los backends que alojan múltiples sitios</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>SSL SNI:</strong> Habilite o deshabilite el envío de SNI (Indicación del Nombre del Servidor) al upstream.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_SSL_SNI_NAME</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Nombre de SSL SNI:</strong> Establece el nombre de host de SNI que se enviará al upstream cuando SSL SNI esté habilitado.</td>
</tr>
</tbody>
</table>
<pre><code>!!! info "SNI Explicado"
    La Indicación del Nombre del Servidor (SNI) es una extensión de TLS que permite a un cliente especificar el nombre de host al que intenta conectarse durante el proceso de handshake. Esto permite a los servidores presentar múltiples certificados en la misma dirección IP y puerto, lo que permite que múltiples sitios web seguros (HTTPS) se sirvan desde una única dirección IP sin requerir que todos esos sitios usen el mismo certificado.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="47:1"><input checked="checked" id="__tabbed_47_1" name="__tabbed_47" type="radio" /><div class="tabbed-labels"><label for="__tabbed_47_1">Soporte de Protocolo</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Configuración Específica del Protocolo</strong></p>
<p>Configure el manejo especial de protocolos, particularmente para WebSockets y otros protocolos no HTTP.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Flexibilidad de Protocolo:</strong> El soporte para WebSockets permite aplicaciones en tiempo real</li>
<li><strong>Aplicaciones Web Modernas:</strong> Habilite características interactivas que requieren comunicación bidireccional</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_WS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Soporte de WebSocket:</strong> Habilite el protocolo WebSocket en el recurso.</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Configuración de WebSocket"
    - Al habilitar WebSockets con `REVERSE_PROXY_WS: "yes"`, considere aumentar los valores de tiempo de espera
    - Las conexiones WebSocket permanecen abiertas más tiempo que las conexiones HTTP típicas
    - Para las aplicaciones WebSocket, una configuración recomendada es:
      ```yaml
      REVERSE_PROXY_WS: "yes"
      REVERSE_PROXY_READ_TIMEOUT: "300s"
      REVERSE_PROXY_SEND_TIMEOUT: "300s"
      ```
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="48:1"><input checked="checked" id="__tabbed_48_1" name="__tabbed_48" type="radio" /><div class="tabbed-labels"><label for="__tabbed_48_1">Gestión de Encabezados</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Configuración de Encabezados HTTP</strong></p>
<p>Controle qué encabezados se envían a los servidores de backend y a los clientes, lo que le permite agregar, modificar o preservar los encabezados HTTP.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Control de la Información:</strong> Administre con precisión qué información se comparte entre los clientes y los backends</li>
<li><strong>Mejora de la Seguridad:</strong> Agregue encabezados relacionados con la seguridad o elimine los encabezados que podrían filtrar información sensible</li>
<li><strong>Soporte de Integración:</strong> Proporcione los encabezados necesarios para la autenticación y el correcto funcionamiento del backend</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_HEADERS</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Encabezados Personalizados:</strong> Encabezados HTTP para enviar al backend separados por punto y coma.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HIDE_HEADERS</code></td>
<td><code>Upgrade</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Ocultar Encabezados:</strong> Encabezados HTTP para ocultar a los clientes cuando se reciben del backend.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_HEADERS_CLIENT</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Encabezados del Cliente:</strong> Encabezados HTTP para enviar al cliente separados por punto y coma.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_UNDERSCORES_IN_HEADERS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Guiones Bajos en los Encabezados:</strong> Habilite o deshabilite la directiva <code>underscores_in_headers</code>.</td>
</tr>
</tbody>
</table>
<pre><code>!!! warning "Consideraciones de Seguridad"
    Al usar la función de proxy inverso, tenga cuidado con los encabezados que reenvía a sus aplicaciones de backend. Ciertos encabezados pueden exponer información sensible sobre su infraestructura o eludir los controles de seguridad.

!!! example "Ejemplos de Formato de Encabezado"
    Encabezados personalizados para los servidores de backend:
    ```
    REVERSE_PROXY_HEADERS: "X-Real-IP $remote_addr;X-Forwarded-For $proxy_add_x_forwarded_for;X-Forwarded-Proto $scheme"
    ```

    Encabezados personalizados para los clientes:
    ```
    REVERSE_PROXY_HEADERS_CLIENT: "X-Powered-By BunkerWeb;X-Frame-Options SAMEORIGIN"
    ```
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="49:1"><input checked="checked" id="__tabbed_49_1" name="__tabbed_49" type="radio" /><div class="tabbed-labels"><label for="__tabbed_49_1">Autenticación</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Configuración de Autenticación Externa</strong></p>
<p>Integre con sistemas de autenticación externos para centralizar la lógica de autorización en sus aplicaciones.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Autenticación Centralizada:</strong> Implemente un único punto de autenticación para múltiples aplicaciones</li>
<li><strong>Seguridad Consistente:</strong> Aplique políticas de autenticación uniformes en diferentes servicios</li>
<li><strong>Control Mejorado:</strong> Reenvíe los detalles de la autenticación a las aplicaciones de backend a través de encabezados o variables</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Solicitud de Autenticación:</strong> Habilite la autenticación mediante un proveedor externo.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>URL de Inicio de Sesión:</strong> Redirija a los clientes a la URL de inicio de sesión cuando falle la autenticación.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTH_REQUEST_SET</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Conjunto de Solicitudes de Autenticación:</strong> Variables a establecer desde el proveedor de autenticación.</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Integración de Autenticación"
    - La función de solicitud de autenticación permite la implementación de microservicios de autenticación centralizados
    - Su servicio de autenticación debe devolver un código de estado 200 para una autenticación exitosa o 401/403 para fallas
    - Use la directiva `auth_request_set` para extraer y reenviar información del servicio de autenticación
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="50:1"><input checked="checked" id="__tabbed_50_1" name="__tabbed_50" type="radio" /><div class="tabbed-labels"><label for="__tabbed_50_1">Configuración Avanzada</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Opciones de Configuración Adicionales</strong></p>
<p>Estos ajustes proporcionan una mayor personalización del comportamiento del proxy inverso para escenarios especializados.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Personalización:</strong> Incluya fragmentos de configuración adicionales para requisitos complejos</li>
<li><strong>Optimización del Rendimiento:</strong> Afine el manejo de solicitudes para casos de uso específicos</li>
<li><strong>Flexibilidad:</strong> Adáptese a los requisitos únicos de la aplicación con configuraciones especializadas</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REVERSE_PROXY_INCLUDES</code></td>
<td></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Configuraciones Adicionales:</strong> Incluya configuraciones adicionales en el bloque de ubicación.</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_PASS_REQUEST_BODY</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>yes</td>
<td><strong>Pasar el Cuerpo de la Solicitud:</strong> Habilite o deshabilite el paso del cuerpo de la solicitud.</td>
</tr>
</tbody>
</table>
<pre><code>!!! warning "Consideraciones de Seguridad"
    Tenga cuidado al incluir fragmentos de configuración personalizados, ya que pueden anular la configuración de seguridad de BunkerWeb o introducir vulnerabilidades si no se configuran correctamente.
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="51:1"><input checked="checked" id="__tabbed_51_1" name="__tabbed_51" type="radio" /><div class="tabbed-labels"><label for="__tabbed_51_1">Configuración de Caché</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Ajustes de Almacenamiento en Caché de Respuestas</strong></p>
<p>Mejore el rendimiento almacenando en caché las respuestas de los servidores de backend, reduciendo la carga y mejorando los tiempos de respuesta.</p>
<div class="admonition success">
<p class="admonition-title">Beneficios</p>
<ul>
<li><strong>Rendimiento:</strong> Reduzca la carga en los servidores de backend sirviendo contenido en caché</li>
<li><strong>Latencia Reducida:</strong> Tiempos de respuesta más rápidos para el contenido solicitado con frecuencia</li>
<li><strong>Ahorro de Ancho de Banda:</strong> Minimice el tráfico de la red interna almacenando en caché las respuestas</li>
<li><strong>Personalización:</strong> Configure exactamente qué, cuándo y cómo se almacena en caché el contenido</li>
</ul>
</div>
</div>
</div>
</div>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_PROXY_CACHE</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Caché:</strong> Establezca en <code>yes</code> para habilitar el almacenamiento en caché de las respuestas del backend.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_LEVELS</code></td>
<td><code>1:2</code></td>
<td>global</td>
<td>no</td>
<td><strong>Niveles de Ruta de Caché:</strong> Cómo estructurar la jerarquía del directorio de caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_ZONE_SIZE</code></td>
<td><code>10m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tamaño de la Zona de Caché:</strong> Tamaño de la zona de memoria compartida utilizada para los metadatos de la caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_PATH_PARAMS</code></td>
<td><code>max_size=100m</code></td>
<td>global</td>
<td>no</td>
<td><strong>Parámetros de la Ruta de Caché:</strong> Parámetros adicionales para la ruta de la caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_METHODS</code></td>
<td><code>GET HEAD</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Métodos de Caché:</strong> Métodos HTTP que se pueden almacenar en caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_MIN_USES</code></td>
<td><code>2</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Usos Mínimos de Caché:</strong> Número mínimo de solicitudes antes de que una respuesta se almacene en caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_KEY</code></td>
<td><code>$scheme$host$request_uri</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Clave de Caché:</strong> La clave utilizada para identificar de forma única una respuesta en caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_VALID</code></td>
<td><code>200=24h 301=1h 302=24h</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validez de la Caché:</strong> Cuánto tiempo almacenar en caché los códigos de respuesta específicos.</td>
</tr>
<tr>
<td><code>PROXY_NO_CACHE</code></td>
<td><code>$http_pragma $http_authorization</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Sin Caché:</strong> Condiciones para no almacenar en caché las respuestas aunque normalmente sean almacenables en caché.</td>
</tr>
<tr>
<td><code>PROXY_CACHE_BYPASS</code></td>
<td><code>0</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Omitir Caché:</strong> Condiciones bajo las cuales omitir la caché.</td>
</tr>
</tbody>
</table>
<pre><code>!!! tip "Mejores Prácticas de Almacenamiento en Caché"
    - Almacene en caché solo el contenido que no cambia con frecuencia o no es personalizado
    - Use duraciones de caché apropiadas según el tipo de contenido (los activos estáticos se pueden almacenar en caché por más tiempo)
    - Configure `PROXY_NO_CACHE` para evitar almacenar en caché contenido sensible o personalizado
    - Supervise las tasas de aciertos de la caché y ajuste la configuración en consecuencia
</code></pre>
<div class="admonition danger">
<p class="admonition-title">Usuarios de Docker Compose - Variables de NGINX</p>
<p>Al usar Docker Compose con variables de NGINX en sus configuraciones, debe escapar el signo de dólar (<code>$</code>) usando signos de dólar dobles (<code>$$</code>). Esto se aplica a todos los ajustes que contienen variables de NGINX como <code>$remote_addr</code>, <code>$proxy_add_x_forwarded_for</code>, etc.</p>
<p>Sin este escape, Docker Compose intentará sustituir estas variables por variables de entorno, que normalmente no existen, lo que dará como resultado valores vacíos en su configuración de NGINX.</p>
</div>
<h3 id="configuraciones-de-ejemplo_28">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="52:6"><input checked="checked" id="__tabbed_52_1" name="__tabbed_52" type="radio" /><input id="__tabbed_52_2" name="__tabbed_52" type="radio" /><input id="__tabbed_52_3" name="__tabbed_52" type="radio" /><input id="__tabbed_52_4" name="__tabbed_52" type="radio" /><input id="__tabbed_52_5" name="__tabbed_52" type="radio" /><input id="__tabbed_52_6" name="__tabbed_52" type="radio" /><div class="tabbed-labels"><label for="__tabbed_52_1">Proxy HTTP Básico</label><label for="__tabbed_52_2">Aplicación WebSocket</label><label for="__tabbed_52_3">Múltiples Ubicaciones</label><label for="__tabbed_52_4">Configuración de Caché</label><label for="__tabbed_52_5">Gestión Avanzada de Encabezados</label><label for="__tabbed_52_6">Integración de Autenticación</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple para hacer proxy de las solicitudes HTTP a un servidor de aplicaciones de backend:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración optimizada para una aplicación WebSocket con tiempos de espera más largos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://websocket-app:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">REVERSE_PROXY_WS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_CONNECT_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
<span class="nt">REVERSE_PROXY_SEND_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
<span class="nt">REVERSE_PROXY_READ_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;300s&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para enrutar diferentes rutas a diferentes servicios de backend:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Backend de la API</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://api-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/api/&quot;</span>

<span class="c1"># Backend de Administración</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://admin-server:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/admin/&quot;</span>

<span class="c1"># Aplicación Frontend</span>
<span class="nt">REVERSE_PROXY_HOST_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://frontend:3000&quot;</span>
<span class="nt">REVERSE_PROXY_URL_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con el almacenamiento en caché del proxy habilitado para un mejor rendimiento:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>
<span class="nt">USE_PROXY_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">PROXY_CACHE_VALID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;200=24h</span><span class="nv"> </span><span class="s">301=1h</span><span class="nv"> </span><span class="s">302=24h&quot;</span>
<span class="nt">PROXY_CACHE_METHODS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET</span><span class="nv"> </span><span class="s">HEAD&quot;</span>
<span class="nt">PROXY_NO_CACHE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$http_authorization&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con manipulación de encabezados personalizados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># Encabezados personalizados para el backend</span>
<span class="nt">REVERSE_PROXY_HEADERS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Real-IP</span><span class="nv"> </span><span class="s">$remote_addr;X-Forwarded-For</span><span class="nv"> </span><span class="s">$proxy_add_x_forwarded_for;X-Forwarded-Proto</span><span class="nv"> </span><span class="s">$scheme&quot;</span>

<span class="c1"># Encabezados personalizados para el cliente</span>
<span class="nt">REVERSE_PROXY_HEADERS_CLIENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Powered-By</span><span class="nv"> </span><span class="s">BunkerWeb;X-Frame-Options</span><span class="nv"> </span><span class="s">SAMEORIGIN&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con autenticación externa:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_PROXY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_PROXY_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://application:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span>

<span class="c1"># Configuración de autenticación</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SIGNIN_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://login.example.com&quot;</span>
<span class="nt">REVERSE_PROXY_AUTH_REQUEST_SET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;$auth_user</span><span class="nv"> </span><span class="s">$upstream_http_x_user;$auth_role</span><span class="nv"> </span><span class="s">$upstream_http_x_role&quot;</span>

<span class="c1"># Backend del servicio de autenticación</span>
<span class="nt">REVERSE_PROXY_HOST_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://auth-service:8080&quot;</span>
<span class="nt">REVERSE_PROXY_URL_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/auth&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="reverse-scan">Reverse scan</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de Escaneo Inverso protege de manera robusta contra los intentos de evasión de proxy al escanear los puertos de los clientes para detectar si están ejecutando servidores proxy u otros servicios de red. Esta función ayuda a identificar y bloquear posibles amenazas de clientes que puedan estar intentando ocultar su verdadera identidad u origen, mejorando así la postura de seguridad de su sitio web.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente se conecta a su servidor, BunkerWeb intenta escanear puertos específicos en la dirección IP del cliente.</li>
<li>El complemento comprueba si alguno de los puertos de proxy comunes (como 80, 443, 8080, etc.) está abierto en el lado del cliente.</li>
<li>Si se detectan puertos abiertos, lo que indica que el cliente puede estar ejecutando un servidor proxy, se deniega la conexión.</li>
<li>Esto agrega una capa adicional de seguridad contra herramientas automatizadas, bots y usuarios maliciosos que intentan enmascarar su identidad.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Beneficios clave</p>
<ol>
<li><strong>Seguridad Mejorada:</strong> Identifica a los clientes que potencialmente ejecutan servidores proxy que podrían ser utilizados con fines maliciosos.</li>
<li><strong>Detección de Proxy:</strong> Ayuda a detectar y bloquear a los clientes que intentan ocultar su verdadera identidad.</li>
<li><strong>Ajustes Configurables:</strong> Personalice qué puertos escanear según sus requisitos de seguridad específicos.</li>
<li><strong>Optimizado para el Rendimiento:</strong> Escaneo inteligente con tiempos de espera configurables para minimizar el impacto en los usuarios legítimos.</li>
<li><strong>Integración Perfecta:</strong> Funciona de forma transparente con sus capas de seguridad existentes.</li>
</ol>
</div>
<h3 id="como-usar_27">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Escaneo Inverso:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_REVERSE_SCAN</code> en <code>yes</code> para habilitar el escaneo de puertos del cliente.</li>
<li><strong>Configure los puertos a escanear:</strong> Personalice el ajuste <code>REVERSE_SCAN_PORTS</code> para especificar qué puertos del cliente deben ser verificados.</li>
<li><strong>Establezca el tiempo de espera del escaneo:</strong> Ajuste el <code>REVERSE_SCAN_TIMEOUT</code> para equilibrar un escaneo exhaustivo con el rendimiento.</li>
<li><strong>Supervise la actividad de escaneo:</strong> Verifique los registros y la <a href="../web-ui/">interfaz de usuario web</a> para revisar los resultados del escaneo y los posibles incidentes de seguridad.</li>
</ol>
<h3 id="ajustes-de-configuracion_27">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_REVERSE_SCAN</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Escaneo Inverso:</strong> Establezca en <code>yes</code> para habilitar el escaneo de los puertos de los clientes.</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_PORTS</code></td>
<td><code>22 80 443 3128 8000 8080</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Puertos a Escanear:</strong> Lista de puertos separados por espacios para verificar en el lado del cliente.</td>
</tr>
<tr>
<td><code>REVERSE_SCAN_TIMEOUT</code></td>
<td><code>500</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Tiempo de Espera del Escaneo:</strong> Tiempo máximo en milisegundos permitido para escanear un puerto.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Rendimiento</p>
<p>Escanear múltiples puertos puede agregar latencia a las conexiones de los clientes. Use un valor de tiempo de espera apropiado y limite el número de puertos escaneados para mantener un buen rendimiento.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Puertos de Proxy Comunes</p>
<p>La configuración predeterminada incluye puertos comunes utilizados por los servidores proxy (80, 443, 8080, 3128) y SSH (22). Es posible que desee personalizar esta lista según su modelo de amenaza.</p>
</div>
<h3 id="configuraciones-de-ejemplo_29">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="53:4"><input checked="checked" id="__tabbed_53_1" name="__tabbed_53" type="radio" /><input id="__tabbed_53_2" name="__tabbed_53" type="radio" /><input id="__tabbed_53_3" name="__tabbed_53" type="radio" /><input id="__tabbed_53_4" name="__tabbed_53" type="radio" /><div class="tabbed-labels"><label for="__tabbed_53_1">Configuración Básica</label><label for="__tabbed_53_2">Escaneo Exhaustivo</label><label for="__tabbed_53_3">Configuración Optimizada para el Rendimiento</label><label for="__tabbed_53_4">Configuración de Alta Seguridad</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple para habilitar el escaneo de puertos del cliente:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración más completa que verifica puertos adicionales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">8081&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración ajustada para un mejor rendimiento al verificar menos puertos con un tiempo de espera más bajo:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">8080&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración enfocada en la máxima seguridad con un escaneo extendido:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_REVERSE_SCAN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REVERSE_SCAN_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1500&quot;</span>
<span class="nt">REVERSE_SCAN_PORTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;22</span><span class="nv"> </span><span class="s">25</span><span class="nv"> </span><span class="s">80</span><span class="nv"> </span><span class="s">443</span><span class="nv"> </span><span class="s">1080</span><span class="nv"> </span><span class="s">3128</span><span class="nv"> </span><span class="s">3333</span><span class="nv"> </span><span class="s">4444</span><span class="nv"> </span><span class="s">5555</span><span class="nv"> </span><span class="s">6588</span><span class="nv"> </span><span class="s">6666</span><span class="nv"> </span><span class="s">7777</span><span class="nv"> </span><span class="s">8000</span><span class="nv"> </span><span class="s">8080</span><span class="nv"> </span><span class="s">8081</span><span class="nv"> </span><span class="s">8800</span><span class="nv"> </span><span class="s">8888</span><span class="nv"> </span><span class="s">9999&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="robotstxt">Robots.txt</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento Robots.txt gestiona el archivo <a href="https://www.robotstxt.org/">robots.txt</a> para su sitio web. Este archivo indica a los rastreadores web y robots qué partes de su sitio pueden o no pueden acceder.</p>
<p><strong>Cómo funciona:</strong></p>
<p>Cuando está habilitado, BunkerWeb genera dinámicamente el archivo <code>/robots.txt</code> en la raíz de su sitio web. Las reglas dentro de este archivo se agregan de múltiples fuentes en el siguiente orden:</p>
<ol>
<li><strong>API de DarkVisitors:</strong> Si se proporciona <code>ROBOTSTXT_DARKVISITORS_TOKEN</code>, las reglas se obtienen de la API de <a href="https://darkvisitors.com/">DarkVisitors</a>, lo que permite el bloqueo dinámico de bots maliciosos y rastreadores de IA según los tipos de agentes configurados y los agentes de usuario no permitidos.</li>
<li><strong>Listas de la Comunidad:</strong> Se incluyen reglas de listas <code>robots.txt</code> predefinidas y mantenidas por la comunidad (especificadas por <code>ROBOTSTXT_COMMUNITY_LISTS</code>).</li>
<li><strong>URL personalizadas:</strong> Las reglas se obtienen de las URL proporcionadas por el usuario (especificadas por <code>ROBOTSTXT_URLS</code>).</li>
<li><strong>Reglas manuales:</strong> Se agregan las reglas definidas directamente a través de las variables de entorno <code>ROBOTSTXT_RULE</code>.</li>
</ol>
<p>Todas las reglas de estas fuentes se combinan. Después de la agregación, se aplican <code>ROBOTSTXT_IGNORE_RULE</code> para filtrar cualquier regla no deseada utilizando patrones de expresiones regulares PCRE. Finalmente, si no queda ninguna regla después de todo este proceso, se aplica automáticamente una regla predeterminada <code>User-agent: *</code> y <code>Disallow: /</code> para garantizar un nivel básico de protección. Las URL de mapa de sitio opcionales (especificadas por <code>ROBOTSTXT_SITEMAP</code>) también se incluyen en la salida final de <code>robots.txt</code>.</p>
<h3 id="evasion-dinamica-de-bots-con-la-api-de-darkvisitors">Evasión Dinámica de Bots con la API de DarkVisitors</h3>
<p><a href="https://darkvisitors.com/">DarkVisitors</a> es un servicio que proporciona un archivo <code>robots.txt</code> dinámico para ayudar a bloquear bots maliciosos conocidos y rastreadores de IA. Al integrarse con DarkVisitors, BunkerWeb puede obtener y servir automáticamente un <code>robots.txt</code> actualizado que ayuda a proteger su sitio del tráfico automatizado no deseado.</p>
<p>Para habilitar esto, debe registrarse en <a href="https://darkvisitors.com/docs/robots-txt">darkvisitors.com</a> y obtener un token de portador (bearer token).</p>
<h3 id="como-usar_28">Cómo usar</h3>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_ROBOTSTXT</code> en <code>yes</code>.</li>
<li><strong>Configure las reglas:</strong> Elija uno o más métodos para definir sus reglas de <code>robots.txt</code>:<ul>
<li><strong>API de DarkVisitors:</strong> Proporcione <code>ROBOTSTXT_DARKVISITORS_TOKEN</code> y, opcionalmente, <code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code> y <code>ROBOTSTXT_DARKVISITORS_DISALLOW</code>.</li>
<li><strong>Listas de la Comunidad:</strong> Especifique <code>ROBOTSTXT_COMMUNITY_LISTS</code> (IDs separados por espacios).</li>
<li><strong>URL personalizadas:</strong> Proporcione <code>ROBOTSTXT_URLS</code> (URLs separadas por espacios).</li>
<li><strong>Reglas manuales:</strong> Use <code>ROBOTSTXT_RULE</code> para reglas individuales (se pueden especificar múltiples reglas con <code>ROBOTSTXT_RULE_N</code>).</li>
</ul>
</li>
<li><strong>Filtre las reglas (opcional):</strong> Use <code>ROBOTSTXT_IGNORE_RULE_N</code> para excluir reglas específicas por patrón de expresión regular.</li>
<li><strong>Agregue mapas de sitio (opcional):</strong> Use <code>ROBOTSTXT_SITEMAP_N</code> para las URL de los mapas de sitio.</li>
<li><strong>Obtenga el archivo robots.txt generado:</strong> Una vez que BunkerWeb esté funcionando con los ajustes anteriores, puede acceder al archivo <code>robots.txt</code> generado dinámicamente haciendo una solicitud HTTP GET a <code>http(s)://su-dominio.com/robots.txt</code>.</li>
</ol>
<h3 id="ajustes-de-configuracion_28">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_ROBOTSTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>No</td>
<td>Habilita o deshabilita la función <code>robots.txt</code>.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_TOKEN</code></td>
<td></td>
<td>multisite</td>
<td>No</td>
<td>Token de portador para la API de DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_AGENT_TYPES</code></td>
<td></td>
<td>multisite</td>
<td>No</td>
<td>Lista de tipos de agentes separados por comas (por ejemplo, <code>AI Data Scraper</code>) para incluir desde DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_DARKVISITORS_DISALLOW</code></td>
<td><code>/</code></td>
<td>multisite</td>
<td>No</td>
<td>Una cadena que especifica qué URL no están permitidas. Este valor se enviará como el campo de no permitir al contactar con la API de DarkVisitors.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_COMMUNITY_LISTS</code></td>
<td></td>
<td>multisite</td>
<td>No</td>
<td>Lista separada por espacios de IDs de conjuntos de reglas mantenidos por la comunidad para incluir.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>No</td>
<td>Lista separada por espacios de URL para obtener reglas adicionales de <code>robots.txt</code>. Admite <code>file://</code> y autenticación básica (<code>http://user:pass@url</code>).</td>
</tr>
<tr>
<td><code>ROBOTSTXT_RULE</code></td>
<td></td>
<td>multisite</td>
<td>Sí</td>
<td>Una sola regla para <code>robots.txt</code>.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_HEADER</code></td>
<td></td>
<td>multisite</td>
<td>Sí</td>
<td>Encabezado para el archivo <code>robots.txt</code> (antes de las reglas). Puede estar codificado en Base64.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_FOOTER</code></td>
<td></td>
<td>multisite</td>
<td>Sí</td>
<td>Pie de página para el archivo <code>robots.txt</code> (después de las reglas). Puede estar codificado en Base64.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_IGNORE_RULE</code></td>
<td></td>
<td>multisite</td>
<td>Sí</td>
<td>Un único patrón de expresión regular PCRE para ignorar reglas.</td>
</tr>
<tr>
<td><code>ROBOTSTXT_SITEMAP</code></td>
<td></td>
<td>multisite</td>
<td>Sí</td>
<td>Una única URL de mapa de sitio.</td>
</tr>
</tbody>
</table>
<h3 id="configuraciones-de-ejemplo_30">Configuraciones de Ejemplo</h3>
<p><strong>Reglas Manuales Básicas</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p><strong>Usando Fuentes Dinámicas (DarkVisitors y Lista de la Comunidad)</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;su-token-de-darkvisitors-aqui&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_AGENT_TYPES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AI</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Scraper&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;robots-disallowed&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
</code></pre></div>
<p><strong>Configuración Combinada</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_DARKVISITORS_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;su-token-de-darkvisitors-aqui&quot;</span>
<span class="nt">ROBOTSTXT_COMMUNITY_LISTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-robots-txt&quot;</span>
<span class="nt">ROBOTSTXT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/my-custom-rules.txt&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">MyOwnBot&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/admin&quot;</span>
<span class="nt">ROBOTSTXT_IGNORE_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">Googlebot-Image&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<p><strong>Con Encabezado y Pie de Página</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_ROBOTSTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">ROBOTSTXT_HEADER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">Este</span><span class="nv"> </span><span class="s">es</span><span class="nv"> </span><span class="s">un</span><span class="nv"> </span><span class="s">encabezado</span><span class="nv"> </span><span class="s">personalizado&quot;</span>
<span class="nt">ROBOTSTXT_RULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User-agent:</span><span class="nv"> </span><span class="s">*&quot;</span>
<span class="nt">ROBOTSTXT_RULE_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Disallow:</span><span class="nv"> </span><span class="s">/private&quot;</span>
<span class="nt">ROBOTSTXT_FOOTER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#</span><span class="nv"> </span><span class="s">Este</span><span class="nv"> </span><span class="s">es</span><span class="nv"> </span><span class="s">un</span><span class="nv"> </span><span class="s">pie</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">página</span><span class="nv"> </span><span class="s">personalizado&quot;</span>
<span class="nt">ROBOTSTXT_SITEMAP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/sitemap.xml&quot;</span>
</code></pre></div>
<hr />
<p>Para más información, consulte la <a href="https://www.robotstxt.org/robotstxt.html">documentación de robots.txt</a>.</p>
<h2 id="ssl">SSL</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento SSL proporciona capacidades robustas de cifrado SSL/TLS para sus sitios web protegidos por BunkerWeb. Este componente principal permite conexiones HTTPS seguras al configurar y optimizar protocolos criptográficos, cifrados y ajustes de seguridad relacionados para proteger los datos en tránsito entre los clientes y sus servicios web.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un cliente inicia una conexión HTTPS a su sitio web, BunkerWeb gestiona el handshake SSL/TLS utilizando su configuración.</li>
<li>El complemento impone protocolos de cifrado modernos y conjuntos de cifrado sólidos, al tiempo que deshabilita las opciones vulnerables conocidas.</li>
<li>Los parámetros de sesión SSL optimizados mejoran el rendimiento de la conexión sin sacrificar la seguridad.</li>
<li>La presentación de certificados se configura de acuerdo con las mejores prácticas para garantizar la compatibilidad y la seguridad.</li>
</ol>
<p>!!! success "Beneficios de Seguridad" - <strong>Protección de Datos:</strong> Cifra los datos en tránsito, previniendo la interceptación y los ataques de intermediario (man-in-the-middle). - <strong>Autenticación:</strong> Verifica la identidad de su servidor a los clientes. - <strong>Integridad:</strong> Asegura que los datos no han sido manipulados durante la transmisión. - <strong>Estándares Modernos:</strong> Configurado para cumplir con las mejores prácticas y los estándares de seguridad de la industria.</p>
<h3 id="como-usar_29">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función SSL:</p>
<ol>
<li><strong>Configure los protocolos:</strong> Elija qué versiones de protocolo SSL/TLS admitir utilizando el ajuste <code>SSL_PROTOCOLS</code>.</li>
<li><strong>Seleccione los conjuntos de cifrado:</strong> Especifique la fuerza del cifrado utilizando el ajuste <code>SSL_CIPHERS_LEVEL</code> o proporcione cifrados personalizados con <code>SSL_CIPHERS_CUSTOM</code>.</li>
<li><strong>Configure la redirección de HTTP a HTTPS:</strong> Configure la redirección automática utilizando los ajustes <code>AUTO_REDIRECT_HTTP_TO_HTTPS</code> o <code>REDIRECT_HTTP_TO_HTTPS</code>.</li>
</ol>
<h3 id="ajustes-de-configuracion_29">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Redirigir HTTP a HTTPS:</strong> Cuando se establece en <code>yes</code>, todas las solicitudes HTTP se redirigen a HTTPS.</td>
</tr>
<tr>
<td><code>AUTO_REDIRECT_HTTP_TO_HTTPS</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Redirección Automática de HTTP a HTTPS:</strong> Cuando se establece en <code>yes</code>, redirige automáticamente de HTTP a HTTPS si se detecta HTTPS.</td>
</tr>
<tr>
<td><code>SSL_PROTOCOLS</code></td>
<td><code>TLSv1.2 TLSv1.3</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Protocolos SSL:</strong> Lista de protocolos SSL/TLS a admitir, separados por espacios.</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_LEVEL</code></td>
<td><code>modern</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Nivel de Cifrados SSL:</strong> Nivel de seguridad preestablecido para los conjuntos de cifrado (<code>modern</code>, <code>intermediate</code> o <code>old</code>).</td>
</tr>
<tr>
<td><code>SSL_CIPHERS_CUSTOM</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Cifrados SSL Personalizados:</strong> Lista de conjuntos de cifrado separados por dos puntos para usar en las conexiones SSL/TLS (sobrescribe el nivel).</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Pruebas de SSL Labs</p>
<p>Después de configurar sus ajustes de SSL, utilice la <a href="https://www.ssllabs.com/ssltest/">Prueba de Servidor de SSL Labs de Qualys</a> para verificar su configuración y buscar posibles problemas de seguridad. Una configuración de SSL adecuada de BunkerWeb debería obtener una calificación A+.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Selección de Protocolo</p>
<p>El soporte para protocolos más antiguos como SSLv3, TLSv1.0 y TLSv1.1 está deshabilitado intencionadamente por defecto debido a vulnerabilidades conocidas. Solo habilite estos protocolos si es absolutamente necesario para admitir clientes heredados y comprende las implicaciones de seguridad de hacerlo.</p>
</div>
<h3 id="configuraciones-de-ejemplo_31">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="54:4"><input checked="checked" id="__tabbed_54_1" name="__tabbed_54" type="radio" /><input id="__tabbed_54_2" name="__tabbed_54" type="radio" /><input id="__tabbed_54_3" name="__tabbed_54" type="radio" /><input id="__tabbed_54_4" name="__tabbed_54" type="radio" /><div class="tabbed-labels"><label for="__tabbed_54_1">Seguridad Moderna (Predeterminada)</label><label for="__tabbed_54_2">Máxima Seguridad</label><label for="__tabbed_54_3">Compatibilidad Heredada</label><label for="__tabbed_54_4">Cifrados Personalizados</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>La configuración predeterminada que proporciona una seguridad sólida mientras mantiene la compatibilidad con los navegadores modernos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración enfocada en la máxima seguridad, potencialmente con compatibilidad reducida para clientes más antiguos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;modern&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con mayor compatibilidad para clientes más antiguos (úsela solo si es necesario):</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración que utiliza una especificación de cifrado personalizada:</p>
<div class="highlight"><pre><span></span><code><span class="nt">LISTEN_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SSL_PROTOCOLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TLSv1.2</span><span class="nv"> </span><span class="s">TLSv1.3&quot;</span>
<span class="nt">SSL_CIPHERS_CUSTOM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305&quot;</span>
<span class="nt">AUTO_REDIRECT_HTTP_TO_HTTPS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="securitytxt">Security.txt</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento Security.txt implementa el estándar <a href="https://securitytxt.org/">Security.txt</a> (<a href="https://www.rfc-editor.org/rfc/rfc9116">RFC 9116</a>) para su sitio web. Esta función ayuda a los investigadores de seguridad a acceder a sus políticas de seguridad y proporciona una forma estandarizada para que informen sobre las vulnerabilidades de seguridad que descubran en sus sistemas.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando está habilitado, BunkerWeb crea un archivo <code>/.well-known/security.txt</code> en la raíz de su sitio web.</li>
<li>Este archivo contiene información sobre sus políticas de seguridad, contactos y otros detalles relevantes.</li>
<li>Los investigadores de seguridad y las herramientas automatizadas pueden encontrar fácilmente este archivo en la ubicación estándar.</li>
<li>El contenido se configura mediante ajustes simples que le permiten especificar información de contacto, claves de cifrado, políticas y agradecimientos.</li>
<li>BunkerWeb formatea automáticamente el archivo de acuerdo con la RFC 9116.</li>
</ol>
<h3 id="como-usar_30">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función Security.txt:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>USE_SECURITYTXT</code> en <code>yes</code> para habilitar el archivo security.txt.</li>
<li><strong>Configure la información de contacto:</strong> Especifique al menos un método de contacto utilizando el ajuste <code>SECURITYTXT_CONTACT</code>.</li>
<li><strong>Establezca información adicional:</strong> Configure campos opcionales como la fecha de vencimiento, el cifrado, los agradecimientos y las URL de las políticas.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, BunkerWeb creará y servirá automáticamente el archivo security.txt en la ubicación estándar.</li>
</ol>
<h3 id="ajustes-de-configuracion_30">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_SECURITYTXT</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Security.txt:</strong> Establezca en <code>yes</code> para habilitar el archivo security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_URI</code></td>
<td><code>/.well-known/security.txt</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>URI de Security.txt:</strong> Indica la URI donde estará accesible el archivo security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CONTACT</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>Información de contacto:</strong> Cómo pueden contactarlo los investigadores de seguridad (p. ej., <code>mailto:security@example.com</code>).</td>
</tr>
<tr>
<td><code>SECURITYTXT_EXPIRES</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Fecha de vencimiento:</strong> Cuándo debe considerarse que este archivo security.txt ha expirado (formato ISO 8601).</td>
</tr>
<tr>
<td><code>SECURITYTXT_ENCRYPTION</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>Cifrado:</strong> URL que apunta a las claves de cifrado que se utilizarán para la comunicación segura.</td>
</tr>
<tr>
<td><code>SECURITYTXT_ACKNOWLEDGEMENTS</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>Agradecimientos:</strong> URL donde se reconoce a los investigadores de seguridad por sus informes.</td>
</tr>
<tr>
<td><code>SECURITYTXT_POLICY</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>Política de seguridad:</strong> URL que apunta a la política de seguridad que describe cómo informar vulnerabilidades.</td>
</tr>
<tr>
<td><code>SECURITYTXT_HIRING</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>Empleos de seguridad:</strong> URL que apunta a las ofertas de trabajo relacionadas con la seguridad.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CANONICAL</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>URL canónica:</strong> La(s) URI(s) canónica(s) para este archivo security.txt.</td>
</tr>
<tr>
<td><code>SECURITYTXT_PREFERRED_LANG</code></td>
<td><code>en</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Idioma(s) preferido(s):</strong> El(los) idioma(s) utilizado(s) en las comunicaciones. Especificado como un código de idioma ISO 639-1.</td>
</tr>
<tr>
<td><code>SECURITYTXT_CSAF</code></td>
<td></td>
<td>multisite</td>
<td>sí</td>
<td><strong>CSAF:</strong> Enlace al <code>provider-metadata.json</code> de su proveedor de Common Security Advisory Framework.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Se requiere fecha de vencimiento</p>
<p>Según la RFC 9116, el campo <code>Expires</code> es obligatorio. Si no proporciona un valor para <code>SECURITYTXT_EXPIRES</code>, BunkerWeb establece automáticamente la fecha de vencimiento en un año a partir de la fecha actual.</p>
</div>
<div class="admonition info">
<p class="admonition-title">La información de contacto es esencial</p>
<p>El campo <code>Contact</code> es la parte más importante del archivo security.txt. Debe proporcionar al menos una forma para que los investigadores de seguridad se pongan en contacto con usted. Puede ser una dirección de correo electrónico, un formulario web, un número de teléfono o cualquier otro método que funcione para su organización.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Las URL deben usar HTTPS</p>
<p>Según la RFC 9116, todas las URL del archivo security.txt (excepto los enlaces <code>mailto:</code> y <code>tel:</code>) DEBEN usar HTTPS. BunkerWeb convertirá automáticamente las URL que no sean HTTPS a HTTPS para garantizar el cumplimiento de la norma.</p>
</div>
<h3 id="configuraciones-de-ejemplo_32">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="55:3"><input checked="checked" id="__tabbed_55_1" name="__tabbed_55" type="radio" /><input id="__tabbed_55_2" name="__tabbed_55" type="radio" /><input id="__tabbed_55_3" name="__tabbed_55" type="radio" /><div class="tabbed-labels"><label for="__tabbed_55_1">Configuración Básica</label><label for="__tabbed_55_2">Configuración Completa</label><label for="__tabbed_55_3">Configuración de Múltiples Contactos</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración mínima con solo información de contacto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración más completa con todos los campos:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-contact-form&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-12-31T23:59:59+00:00&quot;</span>
<span class="nt">SECURITYTXT_ENCRYPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/pgp-key.txt&quot;</span>
<span class="nt">SECURITYTXT_ACKNOWLEDGEMENTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/hall-of-fame&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_HIRING</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/jobs/security&quot;</span>
<span class="nt">SECURITYTXT_CANONICAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/.well-known/security.txt&quot;</span>
<span class="nt">SECURITYTXT_PREFERRED_LANG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="nt">SECURITYTXT_CSAF</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/provider-metadata.json&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con múltiples métodos de contacto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_SECURITYTXT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SECURITYTXT_CONTACT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mailto:security@example.com&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tel:+1-201-555-0123&quot;</span>
<span class="nt">SECURITYTXT_CONTACT_3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-form&quot;</span>
<span class="nt">SECURITYTXT_POLICY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/security-policy&quot;</span>
<span class="nt">SECURITYTXT_EXPIRES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-06-30T23:59:59+00:00&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="self-signed-certificate">Self-signed certificate</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de Certificado Autofirmado genera y gestiona automáticamente certificados SSL/TLS directamente dentro de BunkerWeb, lo que permite conexiones HTTPS seguras sin necesidad de una autoridad de certificación externa. Esta función es particularmente útil en entornos de desarrollo, redes internas o siempre que necesite implementar HTTPS rápidamente sin configurar certificados externos.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando está habilitado, BunkerWeb genera automáticamente un certificado SSL/TLS autofirmado para sus dominios configurados.</li>
<li>El certificado incluye todos los nombres de servidor definidos en su configuración, lo que garantiza una validación SSL adecuada para cada dominio.</li>
<li>Los certificados se almacenan de forma segura y se utilizan para cifrar todo el tráfico HTTPS a sus sitios web.</li>
<li>El certificado se renueva automáticamente antes de su vencimiento, lo que garantiza la disponibilidad continua de HTTPS.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Advertencias de Seguridad del Navegador</p>
<p>Los navegadores mostrarán advertencias de seguridad cuando los usuarios visiten sitios que utilizan certificados autofirmados, ya que estos certificados no están validados por una autoridad de certificación de confianza. Para entornos de producción, considere usar <a href="#lets-encrypt">Let's Encrypt</a> en su lugar.</p>
</div>
<h3 id="como-usar_31">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Certificado Autofirmado:</p>
<ol>
<li><strong>Habilite la función:</strong> Establezca el ajuste <code>GENERATE_SELF_SIGNED_SSL</code> en <code>yes</code> para habilitar la generación de certificados autofirmados.</li>
<li><strong>Elija el algoritmo criptográfico:</strong> Seleccione su algoritmo preferido utilizando el ajuste <code>SELF_SIGNED_SSL_ALGORITHM</code>.</li>
<li><strong>Configure el período de validez:</strong> Opcionalmente, establezca cuánto tiempo debe ser válido el certificado utilizando el ajuste <code>SELF_SIGNED_SSL_EXPIRY</code>.</li>
<li><strong>Establezca el sujeto del certificado:</strong> Configure el sujeto del certificado utilizando el ajuste <code>SELF_SIGNED_SSL_SUBJ</code>.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, los certificados se generan y aplican automáticamente a sus dominios.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Configuración en Modo Stream</p>
<p>Para el modo stream, configure el ajuste <code>LISTEN_STREAM_PORT_SSL</code> para especificar el puerto de escucha SSL/TLS. Este paso es esencial para el correcto funcionamiento en modo stream.</p>
</div>
<h3 id="ajustes-de-configuracion_31">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GENERATE_SELF_SIGNED_SSL</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar autofirmado:</strong> Establezca en <code>yes</code> para habilitar la generación automática de certificados autofirmados.</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_ALGORITHM</code></td>
<td><code>ec-prime256v1</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Algoritmo del certificado:</strong> Algoritmo utilizado para la generación de certificados: <code>ec-prime256v1</code>, <code>ec-secp384r1</code>, <code>rsa-2048</code> o <code>rsa-4096</code>.</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_EXPIRY</code></td>
<td><code>365</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Validez del certificado:</strong> Número de días que el certificado autofirmado debe ser válido (predeterminado: 1 año).</td>
</tr>
<tr>
<td><code>SELF_SIGNED_SSL_SUBJ</code></td>
<td><code>/CN=www.example.com/</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Sujeto del certificado:</strong> Campo de sujeto para el certificado que identifica el dominio.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Entornos de Desarrollo</p>
<p>Los certificados autofirmados son ideales para entornos de desarrollo y prueba donde se necesita HTTPS pero no se requieren certificados de confianza para los navegadores públicos.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Información del Certificado</p>
<p>Los certificados autofirmados generados utilizan el algoritmo especificado (por defecto, criptografía de curva elíptica con la curva prime256v1) e incluyen el sujeto configurado, lo que garantiza la funcionalidad adecuada para sus dominios.</p>
</div>
<h3 id="configuraciones-de-ejemplo_33">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="56:3"><input checked="checked" id="__tabbed_56_1" name="__tabbed_56" type="radio" /><input id="__tabbed_56_2" name="__tabbed_56" type="radio" /><input id="__tabbed_56_3" name="__tabbed_56" type="radio" /><div class="tabbed-labels"><label for="__tabbed_56_1">Configuración Básica</label><label for="__tabbed_56_2">Certificados de Corta Duración</label><label for="__tabbed_56_3">Pruebas con Certificados RSA</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que utiliza certificados autofirmados con los ajustes predeterminados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=mysite.local/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con certificados que expiran con más frecuencia (útil para probar regularmente los procesos de renovación de certificados):</p>
<div class="highlight"><pre><span></span><code><span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ec-prime256v1&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;90&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=dev.example.com/&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para un entorno de prueba donde un dominio utiliza certificados RSA autofirmados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SERVER_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test.example.com&quot;</span>
<span class="nt">GENERATE_SELF_SIGNED_SSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SELF_SIGNED_SSL_ALGORITHM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rsa-4096&quot;</span>
<span class="nt">SELF_SIGNED_SSL_EXPIRY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;365&quot;</span>
<span class="nt">SELF_SIGNED_SSL_SUBJ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/CN=test.example.com/&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="sessions">Sessions</h2>
<p>Compatibilidad con STREAM <img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /></p>
<p>El complemento de Sesiones proporciona una gestión robusta de sesiones HTTP para BunkerWeb, lo que permite un seguimiento seguro y confiable de las sesiones de usuario entre solicitudes. Esta característica principal es esencial para mantener el estado del usuario, la persistencia de la autenticación y admitir otras funciones que requieren continuidad de la identidad, como la protección <a href="#antibot">anti-bot</a> y los sistemas de autenticación de usuarios.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Cuando un usuario interactúa por primera vez con su sitio web, BunkerWeb crea un identificador de sesión único.</li>
<li>Este identificador se almacena de forma segura en una cookie en el navegador del usuario.</li>
<li>En solicitudes posteriores, BunkerWeb recupera el identificador de sesión de la cookie y lo utiliza para acceder a los datos de la sesión del usuario.</li>
<li>Los datos de la sesión se pueden almacenar localmente o en <a href="#redis">Redis</a> para entornos distribuidos con múltiples instancias de BunkerWeb.</li>
<li>Las sesiones se gestionan automáticamente con tiempos de espera configurables, lo que garantiza la seguridad y la facilidad de uso.</li>
<li>La seguridad criptográfica de las sesiones se garantiza mediante una clave secreta que se utiliza para firmar las cookies de sesión.</li>
</ol>
<h3 id="como-usar_32">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Sesiones:</p>
<ol>
<li><strong>Configure la seguridad de la sesión:</strong> Establezca un <code>SESSIONS_SECRET</code> fuerte y único para garantizar que las cookies de sesión no puedan ser falsificadas. (El valor predeterminado es "random", lo que hace que BunkerWeb genere una clave secreta aleatoria).</li>
<li><strong>Elija un nombre de sesión:</strong> Opcionalmente, personalice el <code>SESSIONS_NAME</code> para definir cómo se llamará su cookie de sesión en el navegador. (El valor predeterminado es "random", lo que hace que BunkerWeb genere un nombre aleatorio).</li>
<li><strong>Establezca los tiempos de espera de la sesión:</strong> Configure cuánto tiempo permanecen válidas las sesiones con los ajustes de tiempo de espera (<code>SESSIONS_IDLING_TIMEOUT</code>, <code>SESSIONS_ROLLING_TIMEOUT</code>, <code>SESSIONS_ABSOLUTE_TIMEOUT</code>).</li>
<li><strong>Configure la integración con Redis:</strong> Para entornos distribuidos, establezca <code>USE_REDIS</code> en "yes" y configure su <a href="#redis">conexión Redis</a> para compartir los datos de la sesión entre múltiples nodos de BunkerWeb.</li>
<li><strong>Deje que BunkerWeb se encargue del resto:</strong> Una vez configurado, la gestión de sesiones se realiza automáticamente para su sitio web.</li>
</ol>
<h3 id="ajustes-de-configuracion_32">Ajustes de Configuración</h3>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SESSIONS_SECRET</code></td>
<td><code>random</code></td>
<td>global</td>
<td>no</td>
<td><strong>Secreto de sesión:</strong> Clave criptográfica utilizada para firmar las cookies de sesión. Debe ser una cadena fuerte y aleatoria única para su sitio.</td>
</tr>
<tr>
<td><code>SESSIONS_NAME</code></td>
<td><code>random</code></td>
<td>global</td>
<td>no</td>
<td><strong>Nombre de la cookie:</strong> El nombre de la cookie que almacenará el identificador de sesión.</td>
</tr>
<tr>
<td><code>SESSIONS_IDLING_TIMEOUT</code></td>
<td><code>1800</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de espera por inactividad:</strong> Tiempo máximo (en segundos) de inactividad antes de que la sesión se invalide.</td>
</tr>
<tr>
<td><code>SESSIONS_ROLLING_TIMEOUT</code></td>
<td><code>3600</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de espera renovable:</strong> Tiempo máximo (en segundos) antes de que una sesión deba renovarse.</td>
</tr>
<tr>
<td><code>SESSIONS_ABSOLUTE_TIMEOUT</code></td>
<td><code>86400</code></td>
<td>global</td>
<td>no</td>
<td><strong>Tiempo de espera absoluto:</strong> Tiempo máximo (en segundos) antes de que una sesión se destruya independientemente de la actividad.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_IP</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Comprobar IP:</strong> Cuando se establece en <code>yes</code>, destruye la sesión si la dirección IP del cliente cambia.</td>
</tr>
<tr>
<td><code>SESSIONS_CHECK_USER_AGENT</code></td>
<td><code>yes</code></td>
<td>global</td>
<td>no</td>
<td><strong>Comprobar User-Agent:</strong> Cuando se establece en <code>yes</code>, destruye la sesión si el User-Agent del cliente cambia.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Consideraciones de Seguridad</p>
<p>El ajuste <code>SESSIONS_SECRET</code> es fundamental para la seguridad. En entornos de producción:</p>
<ol>
<li>Use un valor fuerte y aleatorio (al menos 32 caracteres)</li>
<li>Mantenga este valor confidencial</li>
<li>Use el mismo valor en todas las instancias de BunkerWeb en un clúster</li>
<li>Considere usar variables de entorno o gestión de secretos para evitar almacenar esto en texto plano</li>
</ol>
</div>
<div class="admonition tip">
<p class="admonition-title">Entornos en Clúster</p>
<p>Si está ejecutando múltiples instancias de BunkerWeb detrás de un balanceador de carga:</p>
<ol>
<li>Establezca <code>USE_REDIS</code> en <code>yes</code> y configure su conexión Redis</li>
<li>Asegúrese de que todas las instancias usen exactamente el mismo <code>SESSIONS_SECRET</code> y <code>SESSIONS_NAME</code></li>
<li>Esto garantiza que los usuarios mantengan su sesión independientemente de qué instancia de BunkerWeb maneje sus solicitudes</li>
</ol>
</div>
<h3 id="configuraciones-de-ejemplo_34">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="57:4"><input checked="checked" id="__tabbed_57_1" name="__tabbed_57" type="radio" /><input id="__tabbed_57_2" name="__tabbed_57" type="radio" /><input id="__tabbed_57_3" name="__tabbed_57" type="radio" /><input id="__tabbed_57_4" name="__tabbed_57" type="radio" /><div class="tabbed-labels"><label for="__tabbed_57_1">Configuración Básica</label><label for="__tabbed_57_2">Seguridad Mejorada</label><label for="__tabbed_57_3">Entorno en Clúster con Redis</label><label for="__tabbed_57_4">Sesiones de Larga Duración</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple para una única instancia de BunkerWeb:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;su-clave-secreta-fuerte-y-aleatoria-aqui&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sesiondemicliente&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración con ajustes de seguridad aumentados:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;su-clave-secreta-muy-fuerte-y-aleatoria-aqui&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sesionsegura&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;900&quot;</span><span class="w">  </span><span class="c1"># 15 minutos</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span><span class="w">  </span><span class="c1"># 30 minutos</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;43200&quot;</span><span class="w">  </span><span class="c1"># 12 horas</span>
<span class="nt">SESSIONS_CHECK_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">SESSIONS_CHECK_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para múltiples instancias de BunkerWeb que comparten datos de sesión:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;su-clave-secreta-fuerte-y-aleatoria-aqui&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sesiondelcluster&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1800&quot;</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span>
<span class="nt">USE_REDIS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="c1"># Asegúrese de que la conexión a Redis esté configurada correctamente</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración para aplicaciones que requieren persistencia de sesión extendida:</p>
<div class="highlight"><pre><span></span><code><span class="nt">SESSIONS_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;su-clave-secreta-fuerte-y-aleatoria-aqui&quot;</span>
<span class="nt">SESSIONS_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sesionpersistente&quot;</span>
<span class="nt">SESSIONS_IDLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;86400&quot;</span><span class="w">  </span><span class="c1"># 1 día</span>
<span class="nt">SESSIONS_ROLLING_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;172800&quot;</span><span class="w">  </span><span class="c1"># 2 días</span>
<span class="nt">SESSIONS_ABSOLUTE_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;604800&quot;</span><span class="w">  </span><span class="c1"># 7 días</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="ui">UI</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Integrate easily the BunkerWeb UI.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_UI</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td>Use UI</td>
</tr>
<tr>
<td><code>UI_HOST</code></td>
<td></td>
<td>global</td>
<td>no</td>
<td>Address of the web UI used for initial setup</td>
</tr>
</tbody>
</table>
<h2 id="user-manager-pro">User Manager <img src='../../assets/img/pro-icon.svg' alt='crow pro icon' height='24px' width='24px' style='transform : translateY(3px);'> (PRO)</h2>
<p>Compatibilidad con STREAM <img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /></p>
<p>Add the possibility to manage users on the web interface</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Valor predeterminado</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USERS_REQUIRE_2FA</code></td>
<td><code>no</code></td>
<td>global</td>
<td>no</td>
<td>Require two-factor authentication for all users</td>
</tr>
</tbody>
</table>
<h2 id="whitelist">Whitelist</h2>
<p>Compatibilidad con STREAM <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/26a0.svg" title=":warning:" /></p>
<p>El complemento de Lista Blanca le permite definir una lista de direcciones IP de confianza que omiten otros filtros de seguridad.
Para bloquear clientes no deseados, consulte el <a href="#blacklist">complemento de Lista Negra</a>.</p>
<p>El complemento de Lista Blanca proporciona un enfoque integral para permitir explícitamente el acceso a su sitio web basándose en diversos atributos del cliente. Esta característica proporciona un mecanismo de seguridad: a los visitantes que coinciden con criterios específicos se les concede acceso inmediato, mientras que todos los demás deben pasar por los controles de seguridad habituales.</p>
<p><strong>Cómo funciona:</strong></p>
<ol>
<li>Usted define los criterios para los visitantes que deben estar en la "lista blanca" (<em>direcciones IP, redes, DNS inverso, ASN, User-Agent o patrones de URI</em>).</li>
<li>Cuando un visitante intenta acceder a su sitio, BunkerWeb comprueba si coincide con alguno de estos criterios de la lista blanca.</li>
<li>Si un visitante coincide con alguna regla de la lista blanca (y no coincide con ninguna regla de omisión), se le concede acceso a su sitio y <strong>omite todos los demás controles de seguridad</strong>.</li>
<li>Si un visitante no coincide con ningún criterio de la lista blanca, procede a través de todos los controles de seguridad normales como de costumbre.</li>
<li>Las listas blancas se pueden actualizar automáticamente desde fuentes externas de forma programada.</li>
</ol>
<h3 id="como-usar_33">Cómo usar</h3>
<p>Siga estos pasos para configurar y usar la función de Lista Blanca:</p>
<ol>
<li><strong>Habilite la función:</strong> La función de Lista Blanca está deshabilitada por defecto. Establezca el ajuste <code>USE_WHITELIST</code> en <code>yes</code> para habilitarla.</li>
<li><strong>Configure las reglas de permiso:</strong> Defina qué IP, redes, patrones de DNS inverso, ASN, User-Agents o URI deben estar en la lista blanca.</li>
<li><strong>Configure las reglas de omisión:</strong> Especifique cualquier excepción que deba omitir las comprobaciones de la lista blanca.</li>
<li><strong>Añada fuentes externas:</strong> Configure URL para descargar y actualizar automáticamente los datos de la lista blanca.</li>
<li><strong>Supervise el acceso:</strong> Consulte la <a href="../web-ui/">interfaz de usuario web</a> para ver qué visitantes están siendo permitidos o denegados.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">modo stream</p>
<p>Cuando se utiliza el modo stream, solo se realizan las comprobaciones de IP, DNS inverso y ASN.</p>
</div>
<h3 id="ajustes-de-configuracion_33">Ajustes de Configuración</h3>
<p><strong>General</strong></p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USE_WHITELIST</code></td>
<td><code>no</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Habilitar Lista Blanca:</strong> Establezca en <code>yes</code> para habilitar la función de lista blanca.</td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="58:5"><input checked="checked" id="__tabbed_58_1" name="__tabbed_58" type="radio" /><input id="__tabbed_58_2" name="__tabbed_58" type="radio" /><input id="__tabbed_58_3" name="__tabbed_58" type="radio" /><input id="__tabbed_58_4" name="__tabbed_58" type="radio" /><input id="__tabbed_58_5" name="__tabbed_58" type="radio" /><div class="tabbed-labels"><label for="__tabbed_58_1">Dirección IP</label><label for="__tabbed_58_2">DNS Inverso</label><label for="__tabbed_58_3">ASN</label><label for="__tabbed_58_4">User Agent</label><label for="__tabbed_58_5">URI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Pone en la lista blanca a los visitantes según su dirección IP o red. Estos visitantes omitirán todos los controles de seguridad.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_IP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Blanca de IP:</strong> Lista de direcciones IP o redes (notación CIDR) para permitir, separadas por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de IP:</strong> Lista de direcciones IP o redes que deben omitir las comprobaciones de la lista blanca de IP.</td>
</tr>
<tr>
<td><code>WHITELIST_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista Blanca de IP:</strong> Lista de URL que contienen direcciones IP o redes para incluir en la lista blanca, separadas por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_IP_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista de Omisión de IP:</strong> Lista de URL que contienen direcciones IP o redes para ignorar.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Pone en la lista blanca a los visitantes según su nombre de dominio (en inverso). Esto es útil para permitir el acceso a visitantes de organizaciones o redes específicas por su dominio.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Blanca de rDNS:</strong> Lista de sufijos de DNS inverso para permitir, separados por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_GLOBAL</code></td>
<td><code>yes</code></td>
<td>multisite</td>
<td>no</td>
<td><strong>Solo rDNS Global:</strong> Realiza comprobaciones de la lista blanca de rDNS solo en direcciones IP globales cuando se establece en <code>yes</code>.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de rDNS:</strong> Lista de sufijos de DNS inverso que deben omitir las comprobaciones de la lista blanca de rDNS.</td>
</tr>
<tr>
<td><code>WHITELIST_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista Blanca de rDNS:</strong> Lista de URL que contienen sufijos de DNS inverso para incluir en la lista blanca, separadas por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_RDNS_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista de Omisión de rDNS:</strong> Lista de URL que contienen sufijos de DNS inverso para ignorar.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Pone en la lista blanca a los visitantes de proveedores de red específicos utilizando Números de Sistema Autónomo. Los ASN identifican a qué proveedor u organización pertenece una IP.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_ASN</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Blanca de ASN:</strong> Lista de Números de Sistema Autónomo para permitir, separados por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de ASN:</strong> Lista de ASN que deben omitir las comprobaciones de la lista blanca de ASN.</td>
</tr>
<tr>
<td><code>WHITELIST_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista Blanca de ASN:</strong> Lista de URL que contienen ASN para incluir en la lista blanca, separados por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_ASN_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista de Omisión de ASN:</strong> Lista de URL que contienen ASN para ignorar.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Pone en la lista blanca a los visitantes según el navegador o la herramienta que dicen estar usando. Esto es efectivo para permitir el acceso a herramientas o servicios conocidos específicos.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Blanca de User-Agent:</strong> Lista de patrones de User-Agent (expresión regular PCRE) para permitir, separados por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de User-Agent:</strong> Lista de patrones de User-Agent que deben omitir las comprobaciones de la lista blanca de User-Agent.</td>
</tr>
<tr>
<td><code>WHITELIST_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista Blanca de User-Agent:</strong> Lista de URL que contienen patrones de User-Agent para incluir en la lista blanca.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_USER_AGENT_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista de Omisión de User-Agent:</strong> Lista de URL que contienen patrones de User-Agent para ignorar.</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p><strong>Qué hace esto:</strong> Pone en la lista blanca las solicitudes a URL específicas de su sitio. Esto es útil para permitir el acceso a puntos finales específicos independientemente de otros factores.</p>
<table>
<thead>
<tr>
<th>Ajuste</th>
<th>Valor por defecto</th>
<th>Contexto</th>
<th>Múltiple</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WHITELIST_URI</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista Blanca de URI:</strong> Lista de patrones de URI (expresión regular PCRE) para permitir, separados por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>Lista de Omisión de URI:</strong> Lista de patrones de URI que deben omitir las comprobaciones de la lista blanca de URI.</td>
</tr>
<tr>
<td><code>WHITELIST_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista Blanca de URI:</strong> Lista de URL que contienen patrones de URI para incluir en la lista blanca, separados por espacios.</td>
</tr>
<tr>
<td><code>WHITELIST_IGNORE_URI_URLS</code></td>
<td></td>
<td>multisite</td>
<td>no</td>
<td><strong>URL de Lista de Omisión de URI:</strong> Lista de URL que contienen patrones de URI para ignorar.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Soporte de Formato de URL</p>
<p>Todos los ajustes <code>*_URLS</code> admiten URL HTTP/HTTPS así como rutas de archivos locales usando el prefijo <code>file:///</code>. Se admite la autenticación básica usando el formato <code>http://usuario:contraseña@url</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Actualizaciones Regulares</p>
<p>Las listas blancas de las URL se descargan y actualizan automáticamente cada hora para asegurar que su protección se mantenga actualizada con las últimas fuentes de confianza.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Omisión de Seguridad</p>
<p>Los visitantes en la lista blanca <strong>omitirán por completo todos los demás controles de seguridad</strong> en BunkerWeb, incluidas las reglas del WAF, la limitación de velocidad, la detección de bots maliciosos y cualquier otro mecanismo de seguridad. Use la lista blanca solo para fuentes de confianza en las que esté absolutamente seguro.</p>
</div>
<h3 id="configuraciones-de-ejemplo_35">Configuraciones de Ejemplo</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="59:5"><input checked="checked" id="__tabbed_59_1" name="__tabbed_59" type="radio" /><input id="__tabbed_59_2" name="__tabbed_59" type="radio" /><input id="__tabbed_59_3" name="__tabbed_59" type="radio" /><input id="__tabbed_59_4" name="__tabbed_59" type="radio" /><input id="__tabbed_59_5" name="__tabbed_59" type="radio" /><div class="tabbed-labels"><label for="__tabbed_59_1">Acceso Básico de la Organización</label><label for="__tabbed_59_2">Configuración Avanzada</label><label for="__tabbed_59_3">Usando Archivos Locales</label><label for="__tabbed_59_4">Patrón de Acceso a la API</label><label for="__tabbed_59_5">Rastreadores Conocidos</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Una configuración simple que pone en la lista blanca las IP de la oficina de la empresa:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">10.0.0.0/8</span><span class="nv"> </span><span class="s">203.0.113.42&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración más completa con múltiples criterios de lista blanca:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Activos de la empresa y de socios de confianza</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24</span><span class="nv"> </span><span class="s">203.0.113.0/24&quot;</span>
<span class="nt">WHITELIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.company.com</span><span class="nv"> </span><span class="s">.partner-company.org&quot;</span>
<span class="nt">WHITELIST_ASN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345</span><span class="nv"> </span><span class="s">67890&quot;</span><span class="w">  </span><span class="c1"># ASN de la empresa y del socio</span>
<span class="nt">WHITELIST_USER_AGENT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(?:\b)CompanyBot(?:\b)</span><span class="nv"> </span><span class="s">(?:\b)PartnerCrawler(?:\b)&quot;</span>

<span class="c1"># Fuentes externas de confianza</span>
<span class="nt">WHITELIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-networks.txt&quot;</span>
<span class="nt">WHITELIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/trusted-crawlers.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Configuración usando archivos locales para las listas blancas:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_IP_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/ip-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_RDNS_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/rdns-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_ASN_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/asn-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_USER_AGENT_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/user-agent-whitelist.txt&quot;</span>
<span class="nt">WHITELIST_URI_URLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file:///ruta/a/uri-whitelist.txt&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración enfocada en permitir el acceso solo a puntos finales específicos de la API:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="nt">WHITELIST_URI</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^/api/v1/public/</span><span class="nv"> </span><span class="s">^/api/v1/status&quot;</span>
<span class="nt">WHITELIST_IP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24&quot;</span><span class="w">  </span><span class="c1"># Red interna para todos los puntos finales</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Una configuración que pone en la lista blanca a los rastreadores comunes de motores de búsqueda y redes sociales:</p>
<div class="highlight"><pre><span></span><code><span class="nt">USE_WHITELIST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>

<span class="c1"># Verificación con DNS inverso para mayor seguridad</span>
<span class="nt">WHITELIST_RDNS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.googlebot.com</span><span class="nv"> </span><span class="s">.search.msn.com</span><span class="nv"> </span><span class="s">.crawl.yahoo.net</span><span class="nv"> </span><span class="s">.yandex.com</span><span class="nv"> </span><span class="s">.baidu.com</span><span class="nv"> </span><span class="s">.facebook.com&quot;</span>
<span class="nt">WHITELIST_RDNS_GLOBAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w">  </span><span class="c1"># Solo verificar IP globales</span>
</code></pre></div>
<p>Esta configuración permite que los rastreadores legítimos indexen su sitio sin estar sujetos a la limitación de velocidad u otras medidas de seguridad que podrían bloquearlos. Las comprobaciones de DNS inverso ayudan a verificar que los rastreadores provienen realmente de las empresas que dicen ser.</p>
</div>
</div>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> Bunkerity
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://discord.com/invite/fTf46FmtyD" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/bunkerity" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/bunkerity/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/r/BunkerWeb/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/bunkerweb/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/bunkerity" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": {"provider": "mike", "version": "latest"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="https://chatbot.bunkerweb.io/static/js/chatbot.js"></script>
      
        <script src="../../assets/preserve-version-on-language-switch.js"></script>
      
        <script src="../../assets/toc-dropdown.js"></script>
      
    
  </body>
</html>